{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"themes/hcysun/source/css/mark.less","path":"css/mark.less","modified":0,"renderable":1},{"_id":"themes/hcysun/source/css/mixin.less","path":"css/mixin.less","modified":0,"renderable":1},{"_id":"themes/hcysun/source/css/reset.less","path":"css/reset.less","modified":0,"renderable":1},{"_id":"themes/hcysun/source/css/sidebar.less","path":"css/sidebar.less","modified":0,"renderable":1},{"_id":"themes/hcysun/source/css/style.less","path":"css/style.less","modified":0,"renderable":1},{"_id":"themes/hcysun/source/css/var.less","path":"css/var.less","modified":0,"renderable":1},{"_id":"themes/hcysun/source/js/script.js","path":"js/script.js","modified":0,"renderable":1},{"_id":"themes/hcysun/source/img/search.png","path":"img/search.png","modified":0,"renderable":1},{"_id":"themes/hcysun/source/img/hcysun.png","path":"img/hcysun.png","modified":0,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"ba9cda575a0bba1218ccf2b18e741e9f26bb960e","modified":1502364547000},{"_id":"source/CNAME","hash":"067fbbd8150d50d5a0d254d90fd784a81b215d52","modified":1442547386000},{"_id":"themes/hcysun/.DS_Store","hash":"c382e91dd2f72e2007a9380b6d7aa9dfc80f8231","modified":1502455368000},{"_id":"themes/hcysun/_config.yml","hash":"86077615d5b95ac73a24df161933354e4998ec57","modified":1502455690000},{"_id":"source/_posts/.DS_Store","hash":"fde9b9d0f22569acfd2cf94ea6fa0099ca2a1661","modified":1502366948000},{"_id":"source/about/index.md","hash":"b9f19ca86eefbe24b51001b417728124b41194de","modified":1502446027000},{"_id":"source/donate/index.md","hash":"22f8d35759ab9eb4b975e71d004a26dcf02f1c4c","modified":1502454848000},{"_id":"themes/hcysun/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1502077464000},{"_id":"themes/hcysun/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1502077464000},{"_id":"themes/hcysun/languages/fr.yml","hash":"84ab164b37c6abf625473e9a0c18f6f815dd5fd9","modified":1502077464000},{"_id":"themes/hcysun/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1502077464000},{"_id":"themes/hcysun/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1502077464000},{"_id":"themes/hcysun/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1502077464000},{"_id":"themes/hcysun/languages/zh-TW.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1502077464000},{"_id":"themes/hcysun/layout/about.ejs","hash":"82667b4079914d4aabed9c216620da5dedab630a","modified":1502354495000},{"_id":"themes/hcysun/layout/index.ejs","hash":"8447929fc4ba5d3de292d165cb3791f044430383","modified":1502337702000},{"_id":"themes/hcysun/layout/layout.ejs","hash":"6d0e0117c65f8711e6c463ec4354e035dc617118","modified":1502456301000},{"_id":"themes/hcysun/layout/post.ejs","hash":"d54c67de94e425cd8c0969b0d9edb101cb0e5ea5","modified":1502357525000},{"_id":"themes/hcysun/source/.DS_Store","hash":"8983992a301632f377142eb0de9b7125c7a7c97a","modified":1502110439000},{"_id":"source/_posts/2015/.DS_Store","hash":"8681c528dd65915fec982e3c40885f8de22be8c2","modified":1502364596000},{"_id":"source/_posts/2016/.DS_Store","hash":"ff5ae779b0146f813bb4392ddee86f3ac7fa6246","modified":1502364721000},{"_id":"source/_posts/2017/.DS_Store","hash":"77ebbbe49f38e89135f7990aca35ac2dd9cf9369","modified":1502364726000},{"_id":"themes/hcysun/layout/_partial/head.ejs","hash":"9c421ee7ebd3fa1e6da21c31836dddb5657e4145","modified":1502365482000},{"_id":"themes/hcysun/layout/_partial/footer.ejs","hash":"381a8615dffb521771214314a77bc8e9ad067d9e","modified":1502280266000},{"_id":"themes/hcysun/layout/_partial/after-footer.ejs","hash":"9f658fbcdd281811b07d7884fd5e07c49f80a252","modified":1502197946000},{"_id":"themes/hcysun/layout/_partial/google-analytics.ejs","hash":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1502090373000},{"_id":"themes/hcysun/layout/_partial/header.ejs","hash":"6eaf23300c53a47380b95979d8b61d923fcf4b87","modified":1502442417000},{"_id":"themes/hcysun/layout/_partial/sidebar.ejs","hash":"eb0e0d9289efdffdd31ffc69aca6fd5d3cee2e89","modified":1502458287000},{"_id":"themes/hcysun/layout/_partial/marks.ejs","hash":"579d7a2265c232b9c059d2330693867c875b5b6f","modified":1502109459000},{"_id":"themes/hcysun/source/css/mark.less","hash":"302fd059b5f3a573355252b5abd54fb3bd339ac8","modified":1502183291000},{"_id":"themes/hcysun/source/css/mixin.less","hash":"9c7af9ae0389764034edafbf38a5ba842f67a2ab","modified":1502249377000},{"_id":"themes/hcysun/source/css/reset.less","hash":"7200dd4eff15c7d38d1303fb00f83514932d7105","modified":1502249330000},{"_id":"themes/hcysun/source/css/sidebar.less","hash":"fc0c55e2fea17bb8277dd1f6f613b6c1b56c1b31","modified":1502442249000},{"_id":"themes/hcysun/source/css/style.less","hash":"786be2c808b6fc44c6c694e17000d0626c608c9a","modified":1502442696000},{"_id":"themes/hcysun/source/css/var.less","hash":"09c26bd6e1b7bf829a927d41c8c9f2f7a5b43ff8","modified":1502370431000},{"_id":"themes/hcysun/source/img/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1502454368000},{"_id":"themes/hcysun/source/js/script.js","hash":"6204e4b75bb725cebd0358871fcce8abdd05bb17","modified":1502442270000},{"_id":"themes/hcysun/source/img/search.png","hash":"390c074d6f875e9529e1ba0197a30148114c4946","modified":1502104719000},{"_id":"source/_posts/2015/09/.DS_Store","hash":"768571e7d5b60d589152dd3b81cb1811526f8d2c","modified":1502364566000},{"_id":"source/_posts/2015/10/.DS_Store","hash":"5aa8590982d234c30c0b6cea3c9bf0ebef0f39f2","modified":1502364576000},{"_id":"source/_posts/2015/11/.DS_Store","hash":"93619ace422ed7b3f84eb173a92ac1305be3f981","modified":1502364649000},{"_id":"themes/hcysun/source/img/hcysun.png","hash":"34fbd037894e5d5e513195e9ebc48bfbe2ac5848","modified":1460816479000},{"_id":"source/_posts/2015/12/.DS_Store","hash":"b27bc7aac388b7e374ec2054b179d2ee049fe183","modified":1502364664000},{"_id":"source/_posts/2016/01/.DS_Store","hash":"346f093582c5c0a9c61f2e8ab465670a3b8bcdfe","modified":1502364704000},{"_id":"source/_posts/2016/02/.DS_Store","hash":"e7f7dd736c6f94c7a9126a6df7baaeee3943368d","modified":1502364704000},{"_id":"source/_posts/2016/03/.DS_Store","hash":"e1a1ab993e134df7117ab55414a89ce6d5156973","modified":1502364715000},{"_id":"source/_posts/2016/04/.DS_Store","hash":"fc0173738a776634b6a12c3b2c6ed3457693c14c","modified":1502364715000},{"_id":"source/_posts/2016/07/.DS_Store","hash":"0801397ebc2b1dd13075e6349ffdb624c0408bee","modified":1502364721000},{"_id":"source/_posts/2016/08/.DS_Store","hash":"8d2722cfde2913f9a0ed807a5ac96e3f4e5da5d7","modified":1502364726000},{"_id":"source/_posts/2017/03/.DS_Store","hash":"93cc2553054da69c150781ce604ac0ff19ac3576","modified":1502251547000},{"_id":"source/_posts/2017/05/.DS_Store","hash":"8d2722cfde2913f9a0ed807a5ac96e3f4e5da5d7","modified":1502364732000},{"_id":"source/_posts/2015/09/23/ä¸ç”¨Expressè„šæ‰‹æ¶-è‡ªå·±æ­å»ºç¨‹åºéª¨æ¶.md","hash":"e40874a1c3050c12f01edea62cc149a5933a2899","modified":1448707524000},{"_id":"source/_posts/2015/09/25/ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“.md","hash":"46e3f87ef3a9ea20bcb9b40747a90fc34bd72628","modified":1488961481000},{"_id":"source/_posts/2015/10/16/ä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« (ä¸€).md","hash":"caac1c17c5fcb523fe83f06d4a2cbd351b6dcaa2","modified":1500296303000},{"_id":"source/_posts/2015/10/19/ä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« -äºŒ.md","hash":"5319a2682ad27c1f268424b489f216e029b04386","modified":1445313172000},{"_id":"source/_posts/2015/11/12/åŸºäºgulp-requirejs-rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»º.md","hash":"7adb121a3c157c3d0740df16380145b999aa242b","modified":1447327239000},{"_id":"source/_posts/2015/11/14/åŸºäºgulp-requirejs-rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºç³»åˆ—æ–‡ç« -äºŒ.md","hash":"8c8753fe70f8750410d15b2001a11a7974463902","modified":1447745531000},{"_id":"source/_posts/2015/11/26/aæ ‡ç­¾çš„hrefå±æ€§ä¸clickäº‹ä»¶çš„çƒ¦æ¼.md","hash":"b469a0e2fd4009a776e44149a28c060f6c5e016c","modified":1448593772000},{"_id":"source/_posts/2015/11/21/Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb.md","hash":"d6a327a9aacedea385ca6f323e00d850f5b5a0b8","modified":1449137534000},{"_id":"source/_posts/2015/12/02/nodejsä½¿ç”¨mongodbåšæ•°æ®æŒä¹…åŒ–.md","hash":"af6b80ac0272d8d81707ec6d5c13601fdc793ce0","modified":1449046796000},{"_id":"source/_posts/2015/12/26/é¡¹ç›®è¿ç§»é—®é¢˜æ€»ç»“.md","hash":"cbb9738f33019afd9024f309fda641ea5fd71b8e","modified":1451382155000},{"_id":"source/_posts/2016/01/06/ä½¿ç”¨gulpå®ç°é¡¹ç›®æ¨¡æ¿åŒ–.md","hash":"1a6c2fe5c88cbfc3ef903cece627d1a0de3b7df4","modified":1452079481000},{"_id":"source/_posts/2016/01/14/Ubuntuè¿æ¥çš„ç½‘ç»œéœ€è¦ç™»é™†è®¤è¯åæ‰èƒ½ä½¿ç”¨çš„è§£å†³åŠæ³•.md","hash":"8666584effebcd2a8ccef1b6ad53537cf7ed660e","modified":1452769096000},{"_id":"source/_posts/2016/01/30/ä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·å¹¶ä½¿ç”¨npmç®¡ç†ä½ çš„åŒ….md","hash":"da94914f17c33a11d6eeacdfee3dcd2d7af80f23","modified":1454139847000},{"_id":"source/_posts/2016/02/21/ç­–ç•¥æ¨¡å¼åœ¨è¡¨å•éªŒè¯ä¸­çš„åº”ç”¨.md","hash":"8af7cc933d2c471ca20b192c9949d40f64689e26","modified":1456107746000},{"_id":"source/_posts/2016/04/28/JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–.md","hash":"2f24f7c33451aa7b672f3389e6b15fcdee1c730e","modified":1463398279000},{"_id":"source/_posts/2016/07/11/js-Worker-API-åœ¨å€’è®¡æ—¶ä¸­çš„ä½¿ç”¨.md","hash":"bfb74c6782abc54d3bcb49c94d51b9097e4d793d","modified":1468235065000},{"_id":"source/_posts/2016/03/25/åŸºäºwebpackå’Œvue.jsæ­å»ºçš„H5ç«¯æ¡†æ¶(å…¶å®ä¸»è¦ç”¨äºHybridå¼€å‘H5ç«¯æ¡†æ¶ï¼Œä½†æ˜¯ä¾ç„¶èƒ½å¤Ÿä½œä¸ºçº¯webç«¯ä½¿ç”¨).md","hash":"d9e175960767e3bf57fb18aed7142d0c7371e5b2","modified":1465184336000},{"_id":"source/_posts/2016/08/13/ä½¿ç”¨weinreè°ƒè¯•ç§»åŠ¨ç«¯é¡µé¢.md","hash":"cf9d00f6117e057c1f43b60ebcabaa25ee3d676f","modified":1471059708000},{"_id":"source/_posts/2017/03/03/Vueæºç å­¦ä¹ .md","hash":"9a904d6949b09e305cc78846a9925a05f0151e79","modified":1494327275000},{"_id":"source/_posts/2017/05/13/ä»çŸ©é˜µä¸ç©ºé—´æ“ä½œçš„å…³ç³»ç†è§£CSS3çš„transform.md","hash":"87c52eee01c1250091ef8a29fefccd42dee5dc21","modified":1494647954000},{"_id":"public/about/index.html","hash":"1c08946c0eb6633504f95a11473de28531a6e40b","modified":1502458291402},{"_id":"public/donate/index.html","hash":"3c6f74ff4d959a329c654e62e47fe9439888ab52","modified":1502458291402},{"_id":"public/2016/08/13/ä½¿ç”¨weinreè°ƒè¯•ç§»åŠ¨ç«¯é¡µé¢/index.html","hash":"cc900957addf6d7ebd881611e7450cf6f09ea0e8","modified":1502458291402},{"_id":"public/2016/07/11/js-Worker-API-åœ¨å€’è®¡æ—¶ä¸­çš„ä½¿ç”¨/index.html","hash":"42133636c233391a7c29ee061c0885703b1b64b1","modified":1502458291402},{"_id":"public/2016/02/21/ç­–ç•¥æ¨¡å¼åœ¨è¡¨å•éªŒè¯ä¸­çš„åº”ç”¨/index.html","hash":"ca23b723ccff3e4bff651ecf421ff924ea1d6d84","modified":1502458291402},{"_id":"public/2016/01/14/ä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·å¹¶ä½¿ç”¨npmç®¡ç†ä½ çš„åŒ…/index.html","hash":"b50b43e881d1bf4248532257c643c8beb7508403","modified":1502458291402},{"_id":"public/2016/01/14/Ubuntuè¿æ¥çš„ç½‘ç»œéœ€è¦ç™»é™†è®¤è¯åæ‰èƒ½ä½¿ç”¨çš„è§£å†³åŠæ³•/index.html","hash":"4e7d866345f4a2a3d56a9a76b1cccb38b39c1c41","modified":1502458291402},{"_id":"public/2016/01/06/ä½¿ç”¨gulpå®ç°é¡¹ç›®æ¨¡æ¿åŒ–/index.html","hash":"b48ce93b2b98aa057067828ab6df44215c1fe8ee","modified":1502458291402},{"_id":"public/2015/12/26/é¡¹ç›®è¿ç§»é—®é¢˜æ€»ç»“/index.html","hash":"af74dd3850c824dc84b44d72af8f1efd30f5c916","modified":1502458291402},{"_id":"public/2015/11/26/aæ ‡ç­¾çš„hrefå±æ€§ä¸clickäº‹ä»¶çš„çƒ¦æ¼/index.html","hash":"5fe61853e767b29c358d585a4d83cc26d9ac1678","modified":1502458291402},{"_id":"public/2015/11/21/Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb/index.html","hash":"321e4bb65300de841facd6e60f773abe93a3a8cd","modified":1502458291403},{"_id":"public/2015/09/25/ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“/index.html","hash":"7d2916bab4527ac58087743c8780159f108196d1","modified":1502458291403},{"_id":"public/categories/WebFrontEnd/index.html","hash":"130c1f17b25915e3cb394cc6a95d0a3b2d5193d1","modified":1502458291405},{"_id":"public/categories/WebFrontEnd/page/2/index.html","hash":"1d6e13a867e83e428b841d1b6d5901e046d7da13","modified":1502458291405},{"_id":"public/archives/index.html","hash":"c22f7008bdecc9986d34dedcb2056ef4b93c55a2","modified":1502458291403},{"_id":"public/archives/page/2/index.html","hash":"27272747a3949b04fe10e8ca74bc92dc2374e7d5","modified":1502458291403},{"_id":"public/archives/2015/index.html","hash":"f0dd236d0a0a7bb624c85a4f004bacec7c9b832e","modified":1502458291403},{"_id":"public/archives/2015/09/index.html","hash":"b570d757a37a1aeacae4bda0eaa0bca5c11ca36e","modified":1502458291403},{"_id":"public/archives/2015/10/index.html","hash":"ba59f752855ce8bbb0d1532fd192cc7ffb0a704e","modified":1502458291403},{"_id":"public/archives/2015/11/index.html","hash":"589a66ef84d8cdc78329111de247a39b1b8bc5f9","modified":1502458291403},{"_id":"public/archives/2015/12/index.html","hash":"c1afaa774950d96b0dfd6fcf25a55165d3eaee26","modified":1502458291403},{"_id":"public/archives/2016/index.html","hash":"0ebde635ae49ae48c8d400e9ad87edf391dd8a61","modified":1502458291403},{"_id":"public/archives/2016/01/index.html","hash":"9a7ca06bfcd88f6a26c9266ea83eac866bbfbb02","modified":1502458291404},{"_id":"public/archives/2016/02/index.html","hash":"9123a579f3166af8c26a73b36314c9216b3766ed","modified":1502458291404},{"_id":"public/archives/2016/03/index.html","hash":"447732fc5209d13588a20e262ae8aeb59509a284","modified":1502458291404},{"_id":"public/archives/2016/04/index.html","hash":"998f783a6374bc66d64bfe86f87776df80f7f272","modified":1502458291404},{"_id":"public/archives/2016/07/index.html","hash":"45365899dcd6cf0be9ecd74d695ff9198da86887","modified":1502458291404},{"_id":"public/archives/2016/08/index.html","hash":"f530c9cc3f1fab3d01607a8bee4c4f6acb10b0d5","modified":1502458291404},{"_id":"public/archives/2017/index.html","hash":"437be0d3b1e3a73d1d9fb3f7173a0a0d617e1d89","modified":1502458291404},{"_id":"public/archives/2017/03/index.html","hash":"0b27b40ca6c45b5537dc4455f960be9696f70ad0","modified":1502458291405},{"_id":"public/archives/2017/05/index.html","hash":"b5fc8d08508648f037d604c2c9c93f0ca11a3d47","modified":1502458291405},{"_id":"public/index.html","hash":"1972e56047c30e92224f6347882feea5bd2dfc17","modified":1502458291405},{"_id":"public/page/2/index.html","hash":"fea74bea1e4b3cdb94b8280e2e8bc594f7a43cdb","modified":1502458291405},{"_id":"public/tags/express/index.html","hash":"3830034768fe89216e901c18b8e328a5127be465","modified":1502458291405},{"_id":"public/tags/nodejs/index.html","hash":"b026235edf2d4d3b525d211454e270760ebfcdfa","modified":1502458291405},{"_id":"public/tags/html/index.html","hash":"87ea0d584871f11dff7cff3450070cb39a12732a","modified":1502458291405},{"_id":"public/tags/css/index.html","hash":"03e298235a63d0e2c882a645d82d43a8c735056e","modified":1502458291405},{"_id":"public/tags/ç§»åŠ¨é¡µé¢/index.html","hash":"3c59391ba23cd392a44aa1a0e337cc15beaa5c2a","modified":1502458291406},{"_id":"public/tags/js/index.html","hash":"9644ae5933e3b17f5db8ab504628431fd65d7deb","modified":1502458291406},{"_id":"public/tags/è‡ªåŠ¨åŒ–/index.html","hash":"2d861d46bb176c2fd33882859fdb9c1bdba5d669","modified":1502458291406},{"_id":"public/tags/gulp/index.html","hash":"71cfea17a49e753eb5e7f1a230e860339b40f5f4","modified":1502458291406},{"_id":"public/tags/requirejs/index.html","hash":"d9d6124526f8ae7386d5bc7bca074511a276d0cc","modified":1502458291406},{"_id":"public/tags/rjs/index.html","hash":"0e905eaaa318d48300814f9367a409c3194ff60e","modified":1502458291406},{"_id":"public/tags/æ„å»º/index.html","hash":"b5a46d3d0bf962c884333e9ee1017c439750d254","modified":1502458291406},{"_id":"public/tags/mongodb/index.html","hash":"2aeab7e7121ad91af463baa449e119f5bc94d2a4","modified":1502458291406},{"_id":"public/tags/æ•°æ®åº“/index.html","hash":"bd98fec34ce7ca3660bdf9a7a5de30c4456dfa15","modified":1502458291406},{"_id":"public/tags/brew/index.html","hash":"4d18349046a6af59a5471f45182518a15778aa41","modified":1502458291406},{"_id":"public/tags/Ubuntu/index.html","hash":"c799ad6f978c40073ce28bb71ddf219f3994d9b2","modified":1502458291406},{"_id":"public/tags/git/index.html","hash":"98cc3e6996bb33a980078b87c8249b13f65a1cdf","modified":1502458291407},{"_id":"public/tags/æ’ä»¶/index.html","hash":"20110d37f410769db9e2f1ae3e8272554ca3978a","modified":1502458291407},{"_id":"public/tags/python/index.html","hash":"e5d8fec37d9af0647b66181f5da7bf79eb16d7b7","modified":1502458291407},{"_id":"public/tags/pycurl/index.html","hash":"5da46a38071c52a6f6733684e08d229bf4f8c8da","modified":1502458291407},{"_id":"public/tags/node/index.html","hash":"4c037220d4d012f5f8473b6a0a18fbb56914f637","modified":1502458291407},{"_id":"public/tags/npm/index.html","hash":"c9cb4d951cb01bfe07f17d0f2d0dc74c8f0a1358","modified":1502458291407},{"_id":"public/tags/å‘½ä»¤è¡Œå·¥å…·/index.html","hash":"5b9d5aaacc019c964a73e017ab7c8eccdd1abaa2","modified":1502458291407},{"_id":"public/tags/è®¾è®¡æ¨¡å¼/index.html","hash":"16bf75fe9d4afdfbddf3ad7d63175febc411ef8a","modified":1502458291408},{"_id":"public/tags/è¡¨å•éªŒè¯/index.html","hash":"5cb67e0265f03992768217b2f0afc09f8b8aed2f","modified":1502458291408},{"_id":"public/tags/æ¡†æ¶/index.html","hash":"90a530c683b00c3035f45c4593c783f2d66554a0","modified":1502458291408},{"_id":"public/tags/MVVM/index.html","hash":"fc576417185f14eeb96e96cbe972c1ed34acc1a8","modified":1502458291408},{"_id":"public/tags/observe/index.html","hash":"774a1914547bb059ff66ad6df0a40bac45d42e1f","modified":1502458291408},{"_id":"public/tags/Worker/index.html","hash":"52a272752cc62cd0ba820d28f9e1a9e7ffc9ef2b","modified":1502458291408},{"_id":"public/tags/æ¶æ„/index.html","hash":"ca776d34399982a46cc15889ed87b95d82d33ecf","modified":1502458291408},{"_id":"public/tags/vue/index.html","hash":"32170d12175f41b22205adcaf65253069f062216","modified":1502458291408},{"_id":"public/tags/webpack/index.html","hash":"81c1320b4f2e0b98038b9cc9d251c05a7426e066","modified":1502458291408},{"_id":"public/tags/debug/index.html","hash":"772fdb196903a19b32d1f8202897b5d159fa1c3c","modified":1502458291408},{"_id":"public/tags/ç§»åŠ¨è°ƒè¯•/index.html","hash":"69071999c5672a620fbdbe05ed867a50ccebb5d4","modified":1502458291408},{"_id":"public/tags/æºç /index.html","hash":"a506f4ba0dae3838204d71cb90d364c6ff549674","modified":1502458291408},{"_id":"public/tags/Vue/index.html","hash":"d0ed4db8127138d6188988514544292a97d6fa03","modified":1502458291409},{"_id":"public/tags/finger-mover/index.html","hash":"924ca9eeb0c95d919728107781d5e379a29e89df","modified":1502458291409},{"_id":"public/tags/css3/index.html","hash":"15313745c6c54a240936f46e49fe02a4522901a9","modified":1502458291409},{"_id":"public/tags/transform/index.html","hash":"1f2e0aaa5a486b7b32cb876d2c7e70d9f186ba79","modified":1502458291409},{"_id":"public/2017/05/13/ä»çŸ©é˜µä¸ç©ºé—´æ“ä½œçš„å…³ç³»ç†è§£CSS3çš„transform/index.html","hash":"0049c46a380bd54ee2b4982c84f2293045ed153e","modified":1502458291409},{"_id":"public/2017/03/03/Vueæºç å­¦ä¹ /index.html","hash":"95b06bc0735ff1c91fd7b59e9df51af96ab7a625","modified":1502458291409},{"_id":"public/2016/04/28/JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–/index.html","hash":"e7575565a445cb5ddc16984acf81c8ad7d85abd3","modified":1502458291409},{"_id":"public/2016/03/25/åŸºäºwebpackå’Œvue.jsæ­å»ºçš„H5ç«¯æ¡†æ¶(å…¶å®ä¸»è¦ç”¨äºHybridå¼€å‘H5ç«¯æ¡†æ¶ï¼Œä½†æ˜¯ä¾ç„¶èƒ½å¤Ÿä½œä¸ºçº¯webç«¯ä½¿ç”¨)/index.html","hash":"11876ee4c1ab6cdaf6e0a3267a14c0e046ed0e48","modified":1502458291409},{"_id":"public/2015/12/02/nodejsä½¿ç”¨mongodbåšæ•°æ®æŒä¹…åŒ–/index.html","hash":"9c4737f2024e9db8a43fd9f7556d262c2a6f776f","modified":1502458291409},{"_id":"public/2015/11/14/åŸºäºgulp-requirejs-rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºç³»åˆ—æ–‡ç« -äºŒ/index.html","hash":"c56802d9afea8f23ac85d81d74795dae89b50201","modified":1502458291409},{"_id":"public/2015/11/12/åŸºäºgulp-requirejs-rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»º/index.html","hash":"d4e634b625ee0e6ea79c276e388fb564f5926aa5","modified":1502458291409},{"_id":"public/2015/10/19/ä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« -äºŒ/index.html","hash":"ac4c9e69fa1b8ab75b7986adc27ab0ebb46d3116","modified":1502458291409},{"_id":"public/2015/10/16/ä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« (ä¸€)/index.html","hash":"22eeb513965c3b1dcfa8c5d43a3c3e3503846614","modified":1502458291409},{"_id":"public/2015/09/23/ä¸ç”¨Expressè„šæ‰‹æ¶-è‡ªå·±æ­å»ºç¨‹åºéª¨æ¶/index.html","hash":"1df75d6598b1bf66880ea3a60b032b42fc7451d9","modified":1502458291409},{"_id":"public/CNAME","hash":"067fbbd8150d50d5a0d254d90fd784a81b215d52","modified":1502456690134},{"_id":"public/img/search.png","hash":"390c074d6f875e9529e1ba0197a30148114c4946","modified":1502456690134},{"_id":"public/img/hcysun.png","hash":"34fbd037894e5d5e513195e9ebc48bfbe2ac5848","modified":1502456690186},{"_id":"public/js/script.js","hash":"6204e4b75bb725cebd0358871fcce8abdd05bb17","modified":1502456690195},{"_id":"public/css/mark.css","hash":"6b9d56bbea83ff02c72fe923a69b420b97065123","modified":1502456690201},{"_id":"public/css/mixin.css","hash":"78150438e3efad292cc3592effea4ed54c44587c","modified":1502456690201},{"_id":"public/css/reset.css","hash":"d39b58bb7226c081ab6da30458498f0c8cd27e66","modified":1502456690201},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1502456690201},{"_id":"public/css/sidebar.css","hash":"ef806ebb6a064c10e5ce034087a67f8a71e2a5d1","modified":1502456690236},{"_id":"public/css/style.css","hash":"308a15115d346e1dd0728b1cf4516a7e29caaab4","modified":1502456690272}],"Category":[{"name":"WebFrontEnd","_id":"cj67vx513000447fygck4lz4z"}],"Data":[],"Page":[{"title":"about","date":"2017-08-10T08:47:32.000Z","_content":"\n## æˆ‘æ˜¯ç”·çš„ï¼Œå¥³æœ‹å‹è¦å¥³çš„\n\næˆ‘çš„äººç”Ÿæ²¡ä»€ä¹ˆç†æƒ³ï¼Œèµšå¤ŸèŠ±çš„é’±(è²Œä¼¼æ°¸è¿œéƒ½ä¸å¤Ÿ)ï¼Œæ‰¾å¤ŸçœŸçš„äºº(å¥³å¨ƒå¨ƒ)ï¼Œå¾ˆå¤šäººè¢«æˆ‘çš„å¤´åƒå”¬ä½ï¼Œæˆ‘çš„è¯´ä¸‰éï¼š`æˆ‘ä¸æ˜¯å¤§å”`ã€`æˆ‘ä¸æ˜¯å¤§å”`ã€`æˆ‘ä¸æ˜¯å¤§å”`ã€‚\n\n93å¹´ï¼Œå“ˆå°”æ»¨äººï¼Œä¹Ÿä¸è¦è¯´ä¸œåŒ—äººä¸ªå­é«˜ï¼Œä½ è¯´çš„æ²¡é”™ï¼Œä½†æˆ‘æ˜¯æ‹–åè…¿å„¿çš„é‚£ä¸ª(175cm)ï¼Œä¹Ÿä¸è¦å’Œæˆ‘è¯´ä¸œåŒ—è¯ï¼ˆå¬è¾½å®äººè¯´è¯ä¹‹åæˆ‘è§‰å¾—æˆ‘ä¸æ˜¯ä¸œåŒ—äºº......ï¼‰ï¼Œä½†æ˜¯æˆ‘çˆ±ä¸œåŒ—ï¼Œé‚£æ˜¯ç”Ÿæˆ‘å…»æˆ‘çš„åœ°æ–¹ï¼Œé‚£å¾ˆå†·ï¼ˆæ¾èŠ±æ±Ÿéƒ½èƒ½å†»ä¸Šï¼‰ï¼Œä½†åŒ—æ–¹äººå…¬è®¤çš„æ²¡æœ‰å—æ–¹äººæŠ—å†»ï¼Œå¬è¯´å—æ–¹çš„å†¬å¤©å±‹é‡Œæ¯”å¤–è¾¹å†·ï¼Œæˆ‘åœ¨å“ˆå°”æ»¨ä¸Šå¤§å­¦çš„æ—¶å€™ï¼Œæˆ‘çš„ä¸€ä¸ªæµ·å—çš„åŒå­¦åœ¨å†¬å¤©å°±ç©¿ä¸€ä¸ªå¸ƒé‹ï¼Œæˆ‘å½“æ—¶åœ¨æƒ³ï¼Œæµ·å—ä¹Ÿèƒ½é”»ç‚¼æŠ—å†»èƒ½åŠ›å—ï¼Ÿä½ ğŸ‚Xã€‚\n\nç»å¸¸æœ‰äººé—®æˆ‘ä¸ºä»€ä¹ˆç”¨è¿™ä¸ªå¤´åƒï¼Œæˆ‘åœ¨è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼Œä»¥åä¸è¦å†é—®æˆ‘äº†ï¼šè¿™ä¸ªå¤´åƒé™¤äº†è„¸ä¸æ˜¯æˆ‘ï¼Œå…¶ä»–éƒ½æ˜¯æˆ‘ï¼ˆåŒ…æ‹¬å¤´å‘ï¼‰ï¼Œè¿™æ˜¯ç”¨ä¸€æ¬¾ç›¸æœºè½¯ä»¶ç…§çš„ï¼Œè¿™å¼ è„¸æ˜¯ä¸€ä¸ªæ¼”å‘˜ï¼Œå¾—äº†å¥–ã€‚\n\næœ€åï¼Œå¥³æœ‹å‹è¦å¥³çš„ï¼Œå®åœ¨æ²¡æœ‰ï¼Œç”·çš„ä¹Ÿè¡Œã€‚\n\n## è”ç³»æˆ‘\n\nåœ¨è¿™ä¸ªåšå®¢é‡Œä½ å¯ä»¥æœ‰å¾ˆå¤šæ–¹å¼è”ç³»åˆ°æˆ‘ï¼ˆ`Social Links`ï¼‰ï¼Œæˆ‘ä¸ç©qqï¼Œå¶å°”å¾®ä¿¡ï¼Œæˆ‘å¯ä»¥æ”¾å‡ºæˆ‘çš„å¾®ä¿¡å·ï¼Œæˆ‘å–œæ¬¢äº¤æœ‹å‹ï¼ŒåŠ æˆ‘çš„æ—¶å€™ä¸€å®šè¦è‘—ååŸå› ï¼Œæ¯”å¦‚ï¼š\n\nå¦‚æœä½ æ˜¯å¥³å¨ƒå¨ƒä½ å¯ä»¥è¿™æ ·ï¼šå¤§å“¥å“¥ï¼Œæˆ‘ç¼ºç”·ç¥¨ã€‚\n\nå¦‚æœä½ æ˜¯ç”·å¨ƒå¨ƒä½ å¯ä»¥è¿™æ ·ï¼šå¤§å“¥å“¥ï¼Œæˆ‘ç¼ºåŸºå‹ã€‚\n\nå¦åˆ™ï¼Œæˆ‘è¦è€ƒè™‘å¾ˆä¹…çš„ã€‚\n\nå¾®ä¿¡å·ï¼š`hcusun`\n\n## å® ç‰©\n\nå–œæ¬¢çŒ«ğŸ±å’Œç‹—ğŸ¶ï¼Œæ›¾ç»å…»è¿‡ä¸¤åªçŒ«ï¼Œå–œæ¬¢çŒ«é’»è¢«çªçš„æ„Ÿè§‰ï¼Œæ²¡æœ‰å¥³æœ‹å‹å°±æ‚çŒ«ï¼›\n\nç‹—å–œæ¬¢é‡‘æ¯›ï¼Œæ¯”è¾ƒæ¸©é¡ºï¼Œæ²¡äº‹å„¿å¯ä»¥å½“æ•å¤´æ¥ç”¨ï¼›\n\nä¸è¦å’Œæˆ‘æäºŒå“ˆï¼Œé‚£è´§çš„æ™ºå•†ä¹Ÿå°±åªé€‚åˆåœ¨æ‹†è¿é˜Ÿå·¥ä½œäº†ã€‚\n\nä½ è¦æ˜¯æœ‰çŒ«å´½å­ç‹—å´½å­æ²¡åœ°æ–¹æ”¾äº†ï¼Œå¯ä»¥ç»™æˆ‘ã€‚\n\n## ç‰¹ç‚¹\n\nå½“ä¸€ä¸ªäººç‹¬å¤„çš„æ—¶å€™(å› ä¸ºäººå¤šçš„æ—¶å€™ä¸å¥½æ„æ€)ï¼Œæ³ªç‚¹æ¯”è¾ƒä½ï¼š\n\n1ã€å¥¥è¿ä¼šæœŸé—´å–œæ¬¢çœ‹ä¸­å›½ä¸å ä¼˜åŠ¿çš„é¡¹ç›®ï¼Œæ¯”å¦‚é•¿è·‘ï¼Œçœ‹ç€ä¸­å›½è¿åŠ¨å‘˜æŒ¥æ±—å¦‚é›¨ï¼Œç„¶åå°±åœ¨å±‹é‡Œå¤§å–Šï¼ŒåŠ æ²¹ï¼Œæˆ‘ä»¬ä¸­å›½äººå°±æ²¡æ€‚è¿‡ï¼Œè·‘ä¸è¿‡å¥¹åˆå¦‚ä½•ï¼Œå¹²ä»–å¨˜çš„ã€‚ç„¶ååšå••å¤§å“­ã€‚\n\n2ã€çœ‹æŠ¥çº¸å†™äº†ä¸€ä¸ªæ¡åƒåœ¾çš„è€å¤´æŠŠå–åƒåœ¾æ”’ä¸‹æ¥çš„é’±éƒ½æç»™äº†æ±¶å·åœ°éœ‡ï¼Œåšå••å¤§å“­ã€‚\n\n3ã€å¬å®¶äººè¯´åœ¨æˆ‘ä¸è®°äº‹å„¿çš„æ—¶å€™å®¶é‡Œå…»äº†ä¸€åªçŒ«ï¼Œé‚£ä¸ªæ—¶å€™æˆ‘è¿˜åœ¨æ‘‡è½¦é‡Œï¼Œè€çŒ«ç»å¸¸å»èˆ”æˆ‘çš„è„¸è›‹ï¼Œåæ¥çŒ«è€å½’å±±äº†ï¼Œå°±å†ä¹Ÿæ²¡å›æ¥ï¼Œå½“æ—¶å“­äº†ä¸€ä¸‹åˆæ™šé¥­éƒ½æ²¡åƒã€‚\n\n4ã€.....\n\nä½†ï¼š`æˆ‘å¾ˆåšå¼º`\n\n\n<div id=\"disqus_thread\" style=\"margin-left: 0; margin-right: 0;\"></div>\n<script>\n\n/**\n*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.\n*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/\n/*\nvar disqus_config = function () {\nthis.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable\nthis.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable\n};\n*/\n(function() { // DON'T EDIT BELOW THIS LINE\nvar d = document, s = d.createElement('script');\ns.src = 'https://hcysunyang.disqus.com/embed.js';\ns.setAttribute('data-timestamp', +new Date());\n(d.head || d.body).appendChild(s);\n})();\n</script>","source":"about/index.md","raw":"---\ntitle: about\ndate: 2017-08-10 16:47:32\n---\n\n## æˆ‘æ˜¯ç”·çš„ï¼Œå¥³æœ‹å‹è¦å¥³çš„\n\næˆ‘çš„äººç”Ÿæ²¡ä»€ä¹ˆç†æƒ³ï¼Œèµšå¤ŸèŠ±çš„é’±(è²Œä¼¼æ°¸è¿œéƒ½ä¸å¤Ÿ)ï¼Œæ‰¾å¤ŸçœŸçš„äºº(å¥³å¨ƒå¨ƒ)ï¼Œå¾ˆå¤šäººè¢«æˆ‘çš„å¤´åƒå”¬ä½ï¼Œæˆ‘çš„è¯´ä¸‰éï¼š`æˆ‘ä¸æ˜¯å¤§å”`ã€`æˆ‘ä¸æ˜¯å¤§å”`ã€`æˆ‘ä¸æ˜¯å¤§å”`ã€‚\n\n93å¹´ï¼Œå“ˆå°”æ»¨äººï¼Œä¹Ÿä¸è¦è¯´ä¸œåŒ—äººä¸ªå­é«˜ï¼Œä½ è¯´çš„æ²¡é”™ï¼Œä½†æˆ‘æ˜¯æ‹–åè…¿å„¿çš„é‚£ä¸ª(175cm)ï¼Œä¹Ÿä¸è¦å’Œæˆ‘è¯´ä¸œåŒ—è¯ï¼ˆå¬è¾½å®äººè¯´è¯ä¹‹åæˆ‘è§‰å¾—æˆ‘ä¸æ˜¯ä¸œåŒ—äºº......ï¼‰ï¼Œä½†æ˜¯æˆ‘çˆ±ä¸œåŒ—ï¼Œé‚£æ˜¯ç”Ÿæˆ‘å…»æˆ‘çš„åœ°æ–¹ï¼Œé‚£å¾ˆå†·ï¼ˆæ¾èŠ±æ±Ÿéƒ½èƒ½å†»ä¸Šï¼‰ï¼Œä½†åŒ—æ–¹äººå…¬è®¤çš„æ²¡æœ‰å—æ–¹äººæŠ—å†»ï¼Œå¬è¯´å—æ–¹çš„å†¬å¤©å±‹é‡Œæ¯”å¤–è¾¹å†·ï¼Œæˆ‘åœ¨å“ˆå°”æ»¨ä¸Šå¤§å­¦çš„æ—¶å€™ï¼Œæˆ‘çš„ä¸€ä¸ªæµ·å—çš„åŒå­¦åœ¨å†¬å¤©å°±ç©¿ä¸€ä¸ªå¸ƒé‹ï¼Œæˆ‘å½“æ—¶åœ¨æƒ³ï¼Œæµ·å—ä¹Ÿèƒ½é”»ç‚¼æŠ—å†»èƒ½åŠ›å—ï¼Ÿä½ ğŸ‚Xã€‚\n\nç»å¸¸æœ‰äººé—®æˆ‘ä¸ºä»€ä¹ˆç”¨è¿™ä¸ªå¤´åƒï¼Œæˆ‘åœ¨è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼Œä»¥åä¸è¦å†é—®æˆ‘äº†ï¼šè¿™ä¸ªå¤´åƒé™¤äº†è„¸ä¸æ˜¯æˆ‘ï¼Œå…¶ä»–éƒ½æ˜¯æˆ‘ï¼ˆåŒ…æ‹¬å¤´å‘ï¼‰ï¼Œè¿™æ˜¯ç”¨ä¸€æ¬¾ç›¸æœºè½¯ä»¶ç…§çš„ï¼Œè¿™å¼ è„¸æ˜¯ä¸€ä¸ªæ¼”å‘˜ï¼Œå¾—äº†å¥–ã€‚\n\næœ€åï¼Œå¥³æœ‹å‹è¦å¥³çš„ï¼Œå®åœ¨æ²¡æœ‰ï¼Œç”·çš„ä¹Ÿè¡Œã€‚\n\n## è”ç³»æˆ‘\n\nåœ¨è¿™ä¸ªåšå®¢é‡Œä½ å¯ä»¥æœ‰å¾ˆå¤šæ–¹å¼è”ç³»åˆ°æˆ‘ï¼ˆ`Social Links`ï¼‰ï¼Œæˆ‘ä¸ç©qqï¼Œå¶å°”å¾®ä¿¡ï¼Œæˆ‘å¯ä»¥æ”¾å‡ºæˆ‘çš„å¾®ä¿¡å·ï¼Œæˆ‘å–œæ¬¢äº¤æœ‹å‹ï¼ŒåŠ æˆ‘çš„æ—¶å€™ä¸€å®šè¦è‘—ååŸå› ï¼Œæ¯”å¦‚ï¼š\n\nå¦‚æœä½ æ˜¯å¥³å¨ƒå¨ƒä½ å¯ä»¥è¿™æ ·ï¼šå¤§å“¥å“¥ï¼Œæˆ‘ç¼ºç”·ç¥¨ã€‚\n\nå¦‚æœä½ æ˜¯ç”·å¨ƒå¨ƒä½ å¯ä»¥è¿™æ ·ï¼šå¤§å“¥å“¥ï¼Œæˆ‘ç¼ºåŸºå‹ã€‚\n\nå¦åˆ™ï¼Œæˆ‘è¦è€ƒè™‘å¾ˆä¹…çš„ã€‚\n\nå¾®ä¿¡å·ï¼š`hcusun`\n\n## å® ç‰©\n\nå–œæ¬¢çŒ«ğŸ±å’Œç‹—ğŸ¶ï¼Œæ›¾ç»å…»è¿‡ä¸¤åªçŒ«ï¼Œå–œæ¬¢çŒ«é’»è¢«çªçš„æ„Ÿè§‰ï¼Œæ²¡æœ‰å¥³æœ‹å‹å°±æ‚çŒ«ï¼›\n\nç‹—å–œæ¬¢é‡‘æ¯›ï¼Œæ¯”è¾ƒæ¸©é¡ºï¼Œæ²¡äº‹å„¿å¯ä»¥å½“æ•å¤´æ¥ç”¨ï¼›\n\nä¸è¦å’Œæˆ‘æäºŒå“ˆï¼Œé‚£è´§çš„æ™ºå•†ä¹Ÿå°±åªé€‚åˆåœ¨æ‹†è¿é˜Ÿå·¥ä½œäº†ã€‚\n\nä½ è¦æ˜¯æœ‰çŒ«å´½å­ç‹—å´½å­æ²¡åœ°æ–¹æ”¾äº†ï¼Œå¯ä»¥ç»™æˆ‘ã€‚\n\n## ç‰¹ç‚¹\n\nå½“ä¸€ä¸ªäººç‹¬å¤„çš„æ—¶å€™(å› ä¸ºäººå¤šçš„æ—¶å€™ä¸å¥½æ„æ€)ï¼Œæ³ªç‚¹æ¯”è¾ƒä½ï¼š\n\n1ã€å¥¥è¿ä¼šæœŸé—´å–œæ¬¢çœ‹ä¸­å›½ä¸å ä¼˜åŠ¿çš„é¡¹ç›®ï¼Œæ¯”å¦‚é•¿è·‘ï¼Œçœ‹ç€ä¸­å›½è¿åŠ¨å‘˜æŒ¥æ±—å¦‚é›¨ï¼Œç„¶åå°±åœ¨å±‹é‡Œå¤§å–Šï¼ŒåŠ æ²¹ï¼Œæˆ‘ä»¬ä¸­å›½äººå°±æ²¡æ€‚è¿‡ï¼Œè·‘ä¸è¿‡å¥¹åˆå¦‚ä½•ï¼Œå¹²ä»–å¨˜çš„ã€‚ç„¶ååšå••å¤§å“­ã€‚\n\n2ã€çœ‹æŠ¥çº¸å†™äº†ä¸€ä¸ªæ¡åƒåœ¾çš„è€å¤´æŠŠå–åƒåœ¾æ”’ä¸‹æ¥çš„é’±éƒ½æç»™äº†æ±¶å·åœ°éœ‡ï¼Œåšå••å¤§å“­ã€‚\n\n3ã€å¬å®¶äººè¯´åœ¨æˆ‘ä¸è®°äº‹å„¿çš„æ—¶å€™å®¶é‡Œå…»äº†ä¸€åªçŒ«ï¼Œé‚£ä¸ªæ—¶å€™æˆ‘è¿˜åœ¨æ‘‡è½¦é‡Œï¼Œè€çŒ«ç»å¸¸å»èˆ”æˆ‘çš„è„¸è›‹ï¼Œåæ¥çŒ«è€å½’å±±äº†ï¼Œå°±å†ä¹Ÿæ²¡å›æ¥ï¼Œå½“æ—¶å“­äº†ä¸€ä¸‹åˆæ™šé¥­éƒ½æ²¡åƒã€‚\n\n4ã€.....\n\nä½†ï¼š`æˆ‘å¾ˆåšå¼º`\n\n\n<div id=\"disqus_thread\" style=\"margin-left: 0; margin-right: 0;\"></div>\n<script>\n\n/**\n*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.\n*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/\n/*\nvar disqus_config = function () {\nthis.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable\nthis.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable\n};\n*/\n(function() { // DON'T EDIT BELOW THIS LINE\nvar d = document, s = d.createElement('script');\ns.src = 'https://hcysunyang.disqus.com/embed.js';\ns.setAttribute('data-timestamp', +new Date());\n(d.head || d.body).appendChild(s);\n})();\n</script>","updated":"2017-08-11T10:07:07.000Z","path":"about/index.html","comments":1,"layout":"page","_id":"cj67vx4zu000047fytj2az9g0","content":"<h2 id=\"æˆ‘æ˜¯ç”·çš„ï¼Œå¥³æœ‹å‹è¦å¥³çš„\"><a href=\"#æˆ‘æ˜¯ç”·çš„ï¼Œå¥³æœ‹å‹è¦å¥³çš„\" class=\"headerlink\" title=\"æˆ‘æ˜¯ç”·çš„ï¼Œå¥³æœ‹å‹è¦å¥³çš„\"></a>æˆ‘æ˜¯ç”·çš„ï¼Œå¥³æœ‹å‹è¦å¥³çš„</h2><p>æˆ‘çš„äººç”Ÿæ²¡ä»€ä¹ˆç†æƒ³ï¼Œèµšå¤ŸèŠ±çš„é’±(è²Œä¼¼æ°¸è¿œéƒ½ä¸å¤Ÿ)ï¼Œæ‰¾å¤ŸçœŸçš„äºº(å¥³å¨ƒå¨ƒ)ï¼Œå¾ˆå¤šäººè¢«æˆ‘çš„å¤´åƒå”¬ä½ï¼Œæˆ‘çš„è¯´ä¸‰éï¼š<code>æˆ‘ä¸æ˜¯å¤§å”</code>ã€<code>æˆ‘ä¸æ˜¯å¤§å”</code>ã€<code>æˆ‘ä¸æ˜¯å¤§å”</code>ã€‚</p>\n<p>93å¹´ï¼Œå“ˆå°”æ»¨äººï¼Œä¹Ÿä¸è¦è¯´ä¸œåŒ—äººä¸ªå­é«˜ï¼Œä½ è¯´çš„æ²¡é”™ï¼Œä½†æˆ‘æ˜¯æ‹–åè…¿å„¿çš„é‚£ä¸ª(175cm)ï¼Œä¹Ÿä¸è¦å’Œæˆ‘è¯´ä¸œåŒ—è¯ï¼ˆå¬è¾½å®äººè¯´è¯ä¹‹åæˆ‘è§‰å¾—æˆ‘ä¸æ˜¯ä¸œåŒ—äººâ€¦â€¦ï¼‰ï¼Œä½†æ˜¯æˆ‘çˆ±ä¸œåŒ—ï¼Œé‚£æ˜¯ç”Ÿæˆ‘å…»æˆ‘çš„åœ°æ–¹ï¼Œé‚£å¾ˆå†·ï¼ˆæ¾èŠ±æ±Ÿéƒ½èƒ½å†»ä¸Šï¼‰ï¼Œä½†åŒ—æ–¹äººå…¬è®¤çš„æ²¡æœ‰å—æ–¹äººæŠ—å†»ï¼Œå¬è¯´å—æ–¹çš„å†¬å¤©å±‹é‡Œæ¯”å¤–è¾¹å†·ï¼Œæˆ‘åœ¨å“ˆå°”æ»¨ä¸Šå¤§å­¦çš„æ—¶å€™ï¼Œæˆ‘çš„ä¸€ä¸ªæµ·å—çš„åŒå­¦åœ¨å†¬å¤©å°±ç©¿ä¸€ä¸ªå¸ƒé‹ï¼Œæˆ‘å½“æ—¶åœ¨æƒ³ï¼Œæµ·å—ä¹Ÿèƒ½é”»ç‚¼æŠ—å†»èƒ½åŠ›å—ï¼Ÿä½ ğŸ‚Xã€‚</p>\n<p>ç»å¸¸æœ‰äººé—®æˆ‘ä¸ºä»€ä¹ˆç”¨è¿™ä¸ªå¤´åƒï¼Œæˆ‘åœ¨è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼Œä»¥åä¸è¦å†é—®æˆ‘äº†ï¼šè¿™ä¸ªå¤´åƒé™¤äº†è„¸ä¸æ˜¯æˆ‘ï¼Œå…¶ä»–éƒ½æ˜¯æˆ‘ï¼ˆåŒ…æ‹¬å¤´å‘ï¼‰ï¼Œè¿™æ˜¯ç”¨ä¸€æ¬¾ç›¸æœºè½¯ä»¶ç…§çš„ï¼Œè¿™å¼ è„¸æ˜¯ä¸€ä¸ªæ¼”å‘˜ï¼Œå¾—äº†å¥–ã€‚</p>\n<p>æœ€åï¼Œå¥³æœ‹å‹è¦å¥³çš„ï¼Œå®åœ¨æ²¡æœ‰ï¼Œç”·çš„ä¹Ÿè¡Œã€‚</p>\n<h2 id=\"è”ç³»æˆ‘\"><a href=\"#è”ç³»æˆ‘\" class=\"headerlink\" title=\"è”ç³»æˆ‘\"></a>è”ç³»æˆ‘</h2><p>åœ¨è¿™ä¸ªåšå®¢é‡Œä½ å¯ä»¥æœ‰å¾ˆå¤šæ–¹å¼è”ç³»åˆ°æˆ‘ï¼ˆ<code>Social Links</code>ï¼‰ï¼Œæˆ‘ä¸ç©qqï¼Œå¶å°”å¾®ä¿¡ï¼Œæˆ‘å¯ä»¥æ”¾å‡ºæˆ‘çš„å¾®ä¿¡å·ï¼Œæˆ‘å–œæ¬¢äº¤æœ‹å‹ï¼ŒåŠ æˆ‘çš„æ—¶å€™ä¸€å®šè¦è‘—ååŸå› ï¼Œæ¯”å¦‚ï¼š</p>\n<p>å¦‚æœä½ æ˜¯å¥³å¨ƒå¨ƒä½ å¯ä»¥è¿™æ ·ï¼šå¤§å“¥å“¥ï¼Œæˆ‘ç¼ºç”·ç¥¨ã€‚</p>\n<p>å¦‚æœä½ æ˜¯ç”·å¨ƒå¨ƒä½ å¯ä»¥è¿™æ ·ï¼šå¤§å“¥å“¥ï¼Œæˆ‘ç¼ºåŸºå‹ã€‚</p>\n<p>å¦åˆ™ï¼Œæˆ‘è¦è€ƒè™‘å¾ˆä¹…çš„ã€‚</p>\n<p>å¾®ä¿¡å·ï¼š<code>hcusun</code></p>\n<h2 id=\"å® ç‰©\"><a href=\"#å® ç‰©\" class=\"headerlink\" title=\"å® ç‰©\"></a>å® ç‰©</h2><p>å–œæ¬¢çŒ«ğŸ±å’Œç‹—ğŸ¶ï¼Œæ›¾ç»å…»è¿‡ä¸¤åªçŒ«ï¼Œå–œæ¬¢çŒ«é’»è¢«çªçš„æ„Ÿè§‰ï¼Œæ²¡æœ‰å¥³æœ‹å‹å°±æ‚çŒ«ï¼›</p>\n<p>ç‹—å–œæ¬¢é‡‘æ¯›ï¼Œæ¯”è¾ƒæ¸©é¡ºï¼Œæ²¡äº‹å„¿å¯ä»¥å½“æ•å¤´æ¥ç”¨ï¼›</p>\n<p>ä¸è¦å’Œæˆ‘æäºŒå“ˆï¼Œé‚£è´§çš„æ™ºå•†ä¹Ÿå°±åªé€‚åˆåœ¨æ‹†è¿é˜Ÿå·¥ä½œäº†ã€‚</p>\n<p>ä½ è¦æ˜¯æœ‰çŒ«å´½å­ç‹—å´½å­æ²¡åœ°æ–¹æ”¾äº†ï¼Œå¯ä»¥ç»™æˆ‘ã€‚</p>\n<h2 id=\"ç‰¹ç‚¹\"><a href=\"#ç‰¹ç‚¹\" class=\"headerlink\" title=\"ç‰¹ç‚¹\"></a>ç‰¹ç‚¹</h2><p>å½“ä¸€ä¸ªäººç‹¬å¤„çš„æ—¶å€™(å› ä¸ºäººå¤šçš„æ—¶å€™ä¸å¥½æ„æ€)ï¼Œæ³ªç‚¹æ¯”è¾ƒä½ï¼š</p>\n<p>1ã€å¥¥è¿ä¼šæœŸé—´å–œæ¬¢çœ‹ä¸­å›½ä¸å ä¼˜åŠ¿çš„é¡¹ç›®ï¼Œæ¯”å¦‚é•¿è·‘ï¼Œçœ‹ç€ä¸­å›½è¿åŠ¨å‘˜æŒ¥æ±—å¦‚é›¨ï¼Œç„¶åå°±åœ¨å±‹é‡Œå¤§å–Šï¼ŒåŠ æ²¹ï¼Œæˆ‘ä»¬ä¸­å›½äººå°±æ²¡æ€‚è¿‡ï¼Œè·‘ä¸è¿‡å¥¹åˆå¦‚ä½•ï¼Œå¹²ä»–å¨˜çš„ã€‚ç„¶ååšå••å¤§å“­ã€‚</p>\n<p>2ã€çœ‹æŠ¥çº¸å†™äº†ä¸€ä¸ªæ¡åƒåœ¾çš„è€å¤´æŠŠå–åƒåœ¾æ”’ä¸‹æ¥çš„é’±éƒ½æç»™äº†æ±¶å·åœ°éœ‡ï¼Œåšå••å¤§å“­ã€‚</p>\n<p>3ã€å¬å®¶äººè¯´åœ¨æˆ‘ä¸è®°äº‹å„¿çš„æ—¶å€™å®¶é‡Œå…»äº†ä¸€åªçŒ«ï¼Œé‚£ä¸ªæ—¶å€™æˆ‘è¿˜åœ¨æ‘‡è½¦é‡Œï¼Œè€çŒ«ç»å¸¸å»èˆ”æˆ‘çš„è„¸è›‹ï¼Œåæ¥çŒ«è€å½’å±±äº†ï¼Œå°±å†ä¹Ÿæ²¡å›æ¥ï¼Œå½“æ—¶å“­äº†ä¸€ä¸‹åˆæ™šé¥­éƒ½æ²¡åƒã€‚</p>\n<p>4ã€â€¦..</p>\n<p>ä½†ï¼š<code>æˆ‘å¾ˆåšå¼º</code></p>\n<p><div id=\"disqus_thread\" style=\"margin-left: 0; margin-right: 0;\"></div></p>\n<script>\n\n/**\n*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.\n*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/\n/*\nvar disqus_config = function () {\nthis.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable\nthis.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable\n};\n*/\n(function() { // DON'T EDIT BELOW THIS LINE\nvar d = document, s = d.createElement('script');\ns.src = 'https://hcysunyang.disqus.com/embed.js';\ns.setAttribute('data-timestamp', +new Date());\n(d.head || d.body).appendChild(s);\n})();\n</script>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"æˆ‘æ˜¯ç”·çš„ï¼Œå¥³æœ‹å‹è¦å¥³çš„\"><a href=\"#æˆ‘æ˜¯ç”·çš„ï¼Œå¥³æœ‹å‹è¦å¥³çš„\" class=\"headerlink\" title=\"æˆ‘æ˜¯ç”·çš„ï¼Œå¥³æœ‹å‹è¦å¥³çš„\"></a>æˆ‘æ˜¯ç”·çš„ï¼Œå¥³æœ‹å‹è¦å¥³çš„</h2><p>æˆ‘çš„äººç”Ÿæ²¡ä»€ä¹ˆç†æƒ³ï¼Œèµšå¤ŸèŠ±çš„é’±(è²Œä¼¼æ°¸è¿œéƒ½ä¸å¤Ÿ)ï¼Œæ‰¾å¤ŸçœŸçš„äºº(å¥³å¨ƒå¨ƒ)ï¼Œå¾ˆå¤šäººè¢«æˆ‘çš„å¤´åƒå”¬ä½ï¼Œæˆ‘çš„è¯´ä¸‰éï¼š<code>æˆ‘ä¸æ˜¯å¤§å”</code>ã€<code>æˆ‘ä¸æ˜¯å¤§å”</code>ã€<code>æˆ‘ä¸æ˜¯å¤§å”</code>ã€‚</p>\n<p>93å¹´ï¼Œå“ˆå°”æ»¨äººï¼Œä¹Ÿä¸è¦è¯´ä¸œåŒ—äººä¸ªå­é«˜ï¼Œä½ è¯´çš„æ²¡é”™ï¼Œä½†æˆ‘æ˜¯æ‹–åè…¿å„¿çš„é‚£ä¸ª(175cm)ï¼Œä¹Ÿä¸è¦å’Œæˆ‘è¯´ä¸œåŒ—è¯ï¼ˆå¬è¾½å®äººè¯´è¯ä¹‹åæˆ‘è§‰å¾—æˆ‘ä¸æ˜¯ä¸œåŒ—äººâ€¦â€¦ï¼‰ï¼Œä½†æ˜¯æˆ‘çˆ±ä¸œåŒ—ï¼Œé‚£æ˜¯ç”Ÿæˆ‘å…»æˆ‘çš„åœ°æ–¹ï¼Œé‚£å¾ˆå†·ï¼ˆæ¾èŠ±æ±Ÿéƒ½èƒ½å†»ä¸Šï¼‰ï¼Œä½†åŒ—æ–¹äººå…¬è®¤çš„æ²¡æœ‰å—æ–¹äººæŠ—å†»ï¼Œå¬è¯´å—æ–¹çš„å†¬å¤©å±‹é‡Œæ¯”å¤–è¾¹å†·ï¼Œæˆ‘åœ¨å“ˆå°”æ»¨ä¸Šå¤§å­¦çš„æ—¶å€™ï¼Œæˆ‘çš„ä¸€ä¸ªæµ·å—çš„åŒå­¦åœ¨å†¬å¤©å°±ç©¿ä¸€ä¸ªå¸ƒé‹ï¼Œæˆ‘å½“æ—¶åœ¨æƒ³ï¼Œæµ·å—ä¹Ÿèƒ½é”»ç‚¼æŠ—å†»èƒ½åŠ›å—ï¼Ÿä½ ğŸ‚Xã€‚</p>\n<p>ç»å¸¸æœ‰äººé—®æˆ‘ä¸ºä»€ä¹ˆç”¨è¿™ä¸ªå¤´åƒï¼Œæˆ‘åœ¨è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼Œä»¥åä¸è¦å†é—®æˆ‘äº†ï¼šè¿™ä¸ªå¤´åƒé™¤äº†è„¸ä¸æ˜¯æˆ‘ï¼Œå…¶ä»–éƒ½æ˜¯æˆ‘ï¼ˆåŒ…æ‹¬å¤´å‘ï¼‰ï¼Œè¿™æ˜¯ç”¨ä¸€æ¬¾ç›¸æœºè½¯ä»¶ç…§çš„ï¼Œè¿™å¼ è„¸æ˜¯ä¸€ä¸ªæ¼”å‘˜ï¼Œå¾—äº†å¥–ã€‚</p>\n<p>æœ€åï¼Œå¥³æœ‹å‹è¦å¥³çš„ï¼Œå®åœ¨æ²¡æœ‰ï¼Œç”·çš„ä¹Ÿè¡Œã€‚</p>\n<h2 id=\"è”ç³»æˆ‘\"><a href=\"#è”ç³»æˆ‘\" class=\"headerlink\" title=\"è”ç³»æˆ‘\"></a>è”ç³»æˆ‘</h2><p>åœ¨è¿™ä¸ªåšå®¢é‡Œä½ å¯ä»¥æœ‰å¾ˆå¤šæ–¹å¼è”ç³»åˆ°æˆ‘ï¼ˆ<code>Social Links</code>ï¼‰ï¼Œæˆ‘ä¸ç©qqï¼Œå¶å°”å¾®ä¿¡ï¼Œæˆ‘å¯ä»¥æ”¾å‡ºæˆ‘çš„å¾®ä¿¡å·ï¼Œæˆ‘å–œæ¬¢äº¤æœ‹å‹ï¼ŒåŠ æˆ‘çš„æ—¶å€™ä¸€å®šè¦è‘—ååŸå› ï¼Œæ¯”å¦‚ï¼š</p>\n<p>å¦‚æœä½ æ˜¯å¥³å¨ƒå¨ƒä½ å¯ä»¥è¿™æ ·ï¼šå¤§å“¥å“¥ï¼Œæˆ‘ç¼ºç”·ç¥¨ã€‚</p>\n<p>å¦‚æœä½ æ˜¯ç”·å¨ƒå¨ƒä½ å¯ä»¥è¿™æ ·ï¼šå¤§å“¥å“¥ï¼Œæˆ‘ç¼ºåŸºå‹ã€‚</p>\n<p>å¦åˆ™ï¼Œæˆ‘è¦è€ƒè™‘å¾ˆä¹…çš„ã€‚</p>\n<p>å¾®ä¿¡å·ï¼š<code>hcusun</code></p>\n<h2 id=\"å® ç‰©\"><a href=\"#å® ç‰©\" class=\"headerlink\" title=\"å® ç‰©\"></a>å® ç‰©</h2><p>å–œæ¬¢çŒ«ğŸ±å’Œç‹—ğŸ¶ï¼Œæ›¾ç»å…»è¿‡ä¸¤åªçŒ«ï¼Œå–œæ¬¢çŒ«é’»è¢«çªçš„æ„Ÿè§‰ï¼Œæ²¡æœ‰å¥³æœ‹å‹å°±æ‚çŒ«ï¼›</p>\n<p>ç‹—å–œæ¬¢é‡‘æ¯›ï¼Œæ¯”è¾ƒæ¸©é¡ºï¼Œæ²¡äº‹å„¿å¯ä»¥å½“æ•å¤´æ¥ç”¨ï¼›</p>\n<p>ä¸è¦å’Œæˆ‘æäºŒå“ˆï¼Œé‚£è´§çš„æ™ºå•†ä¹Ÿå°±åªé€‚åˆåœ¨æ‹†è¿é˜Ÿå·¥ä½œäº†ã€‚</p>\n<p>ä½ è¦æ˜¯æœ‰çŒ«å´½å­ç‹—å´½å­æ²¡åœ°æ–¹æ”¾äº†ï¼Œå¯ä»¥ç»™æˆ‘ã€‚</p>\n<h2 id=\"ç‰¹ç‚¹\"><a href=\"#ç‰¹ç‚¹\" class=\"headerlink\" title=\"ç‰¹ç‚¹\"></a>ç‰¹ç‚¹</h2><p>å½“ä¸€ä¸ªäººç‹¬å¤„çš„æ—¶å€™(å› ä¸ºäººå¤šçš„æ—¶å€™ä¸å¥½æ„æ€)ï¼Œæ³ªç‚¹æ¯”è¾ƒä½ï¼š</p>\n<p>1ã€å¥¥è¿ä¼šæœŸé—´å–œæ¬¢çœ‹ä¸­å›½ä¸å ä¼˜åŠ¿çš„é¡¹ç›®ï¼Œæ¯”å¦‚é•¿è·‘ï¼Œçœ‹ç€ä¸­å›½è¿åŠ¨å‘˜æŒ¥æ±—å¦‚é›¨ï¼Œç„¶åå°±åœ¨å±‹é‡Œå¤§å–Šï¼ŒåŠ æ²¹ï¼Œæˆ‘ä»¬ä¸­å›½äººå°±æ²¡æ€‚è¿‡ï¼Œè·‘ä¸è¿‡å¥¹åˆå¦‚ä½•ï¼Œå¹²ä»–å¨˜çš„ã€‚ç„¶ååšå••å¤§å“­ã€‚</p>\n<p>2ã€çœ‹æŠ¥çº¸å†™äº†ä¸€ä¸ªæ¡åƒåœ¾çš„è€å¤´æŠŠå–åƒåœ¾æ”’ä¸‹æ¥çš„é’±éƒ½æç»™äº†æ±¶å·åœ°éœ‡ï¼Œåšå••å¤§å“­ã€‚</p>\n<p>3ã€å¬å®¶äººè¯´åœ¨æˆ‘ä¸è®°äº‹å„¿çš„æ—¶å€™å®¶é‡Œå…»äº†ä¸€åªçŒ«ï¼Œé‚£ä¸ªæ—¶å€™æˆ‘è¿˜åœ¨æ‘‡è½¦é‡Œï¼Œè€çŒ«ç»å¸¸å»èˆ”æˆ‘çš„è„¸è›‹ï¼Œåæ¥çŒ«è€å½’å±±äº†ï¼Œå°±å†ä¹Ÿæ²¡å›æ¥ï¼Œå½“æ—¶å“­äº†ä¸€ä¸‹åˆæ™šé¥­éƒ½æ²¡åƒã€‚</p>\n<p>4ã€â€¦..</p>\n<p>ä½†ï¼š<code>æˆ‘å¾ˆåšå¼º</code></p>\n<p><div id=\"disqus_thread\" style=\"margin-left: 0; margin-right: 0;\"></div></p>\n<script>\n\n/**\n*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.\n*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/\n/*\nvar disqus_config = function () {\nthis.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable\nthis.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable\n};\n*/\n(function() { // DON'T EDIT BELOW THIS LINE\nvar d = document, s = d.createElement('script');\ns.src = 'https://hcysunyang.disqus.com/embed.js';\ns.setAttribute('data-timestamp', +new Date());\n(d.head || d.body).appendChild(s);\n})();\n</script>"},{"title":"æ‰“èµæèµ ","date":"2017-08-10T09:06:55.000Z","_content":"\n<style>\nimg {\n    max-width: 100%;\n    width: 290px;\n}\n</style>\n\næ ¹æ® [ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…](https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh)ï¼Œæˆ‘çš„åšæ–‡ä»»ä½ è¹‚èºã€‚\n\nåšå®¢åŠåšå®¢å†…å®¹æ¶‰åŠçš„æœ¬äººæ‰€æœ‰å¼€æºé¡¹ç›®éƒ½åŸºäº [MIT](https://egoist.mit-license.org/) åè®®å‘å¸ƒï¼Œæ— ä»»ä½•åº”ç”¨å†…å¤–æ”¶è´¹ã€‚\n\næ‚¨èµçš„å’–å•¡é’±â˜•ï¸å°çš„ä¸åæ„Ÿæ¿€ï¼Œå¹¶ç»§ç»­åŠªåŠ›åˆ›ä½œï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒã€‚\n\n### æ”¯ä»˜å®\n\n![æ”¯ä»˜å®](http://7xlolm.com1.z0.glb.clouddn.com/zhifubao.jpg)\n\n### å¾®ä¿¡\n\n![å¾®ä¿¡](http://7xlolm.com1.z0.glb.clouddn.com/qrweixin.jpg)\n\n\n\n\n<div id=\"disqus_thread\" style=\"margin-left: 0; margin-right: 0;\"></div>\n<script>\n\n/**\n*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.\n*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/\n/*\nvar disqus_config = function () {\nthis.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable\nthis.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable\n};\n*/\n(function() { // DON'T EDIT BELOW THIS LINE\nvar d = document, s = d.createElement('script');\ns.src = 'https://hcysunyang.disqus.com/embed.js';\ns.setAttribute('data-timestamp', +new Date());\n(d.head || d.body).appendChild(s);\n})();\n</script>","source":"donate/index.md","raw":"---\ntitle: æ‰“èµæèµ \ndate: 2017-08-10 17:06:55\n---\n\n<style>\nimg {\n    max-width: 100%;\n    width: 290px;\n}\n</style>\n\næ ¹æ® [ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…](https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh)ï¼Œæˆ‘çš„åšæ–‡ä»»ä½ è¹‚èºã€‚\n\nåšå®¢åŠåšå®¢å†…å®¹æ¶‰åŠçš„æœ¬äººæ‰€æœ‰å¼€æºé¡¹ç›®éƒ½åŸºäº [MIT](https://egoist.mit-license.org/) åè®®å‘å¸ƒï¼Œæ— ä»»ä½•åº”ç”¨å†…å¤–æ”¶è´¹ã€‚\n\næ‚¨èµçš„å’–å•¡é’±â˜•ï¸å°çš„ä¸åæ„Ÿæ¿€ï¼Œå¹¶ç»§ç»­åŠªåŠ›åˆ›ä½œï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒã€‚\n\n### æ”¯ä»˜å®\n\n![æ”¯ä»˜å®](http://7xlolm.com1.z0.glb.clouddn.com/zhifubao.jpg)\n\n### å¾®ä¿¡\n\n![å¾®ä¿¡](http://7xlolm.com1.z0.glb.clouddn.com/qrweixin.jpg)\n\n\n\n\n<div id=\"disqus_thread\" style=\"margin-left: 0; margin-right: 0;\"></div>\n<script>\n\n/**\n*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.\n*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/\n/*\nvar disqus_config = function () {\nthis.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable\nthis.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable\n};\n*/\n(function() { // DON'T EDIT BELOW THIS LINE\nvar d = document, s = d.createElement('script');\ns.src = 'https://hcysunyang.disqus.com/embed.js';\ns.setAttribute('data-timestamp', +new Date());\n(d.head || d.body).appendChild(s);\n})();\n</script>","updated":"2017-08-11T12:34:08.000Z","path":"donate/index.html","comments":1,"layout":"page","_id":"cj67vx4zw000147fy70hsx5gr","content":"<style>\nimg {\n    max-width: 100%;\n    width: 290px;\n}\n</style>\n\n<p>æ ¹æ® <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh\" target=\"_blank\" rel=\"external\">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…</a>ï¼Œæˆ‘çš„åšæ–‡ä»»ä½ è¹‚èºã€‚</p>\n<p>åšå®¢åŠåšå®¢å†…å®¹æ¶‰åŠçš„æœ¬äººæ‰€æœ‰å¼€æºé¡¹ç›®éƒ½åŸºäº <a href=\"https://egoist.mit-license.org/\" target=\"_blank\" rel=\"external\">MIT</a> åè®®å‘å¸ƒï¼Œæ— ä»»ä½•åº”ç”¨å†…å¤–æ”¶è´¹ã€‚</p>\n<p>æ‚¨èµçš„å’–å•¡é’±â˜•ï¸å°çš„ä¸åæ„Ÿæ¿€ï¼Œå¹¶ç»§ç»­åŠªåŠ›åˆ›ä½œï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒã€‚</p>\n<h3 id=\"æ”¯ä»˜å®\"><a href=\"#æ”¯ä»˜å®\" class=\"headerlink\" title=\"æ”¯ä»˜å®\"></a>æ”¯ä»˜å®</h3><p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/zhifubao.jpg\" alt=\"æ”¯ä»˜å®\"></p>\n<h3 id=\"å¾®ä¿¡\"><a href=\"#å¾®ä¿¡\" class=\"headerlink\" title=\"å¾®ä¿¡\"></a>å¾®ä¿¡</h3><p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/qrweixin.jpg\" alt=\"å¾®ä¿¡\"></p>\n<p><div id=\"disqus_thread\" style=\"margin-left: 0; margin-right: 0;\"></div></p>\n<script>\n\n/**\n*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.\n*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/\n/*\nvar disqus_config = function () {\nthis.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable\nthis.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable\n};\n*/\n(function() { // DON'T EDIT BELOW THIS LINE\nvar d = document, s = d.createElement('script');\ns.src = 'https://hcysunyang.disqus.com/embed.js';\ns.setAttribute('data-timestamp', +new Date());\n(d.head || d.body).appendChild(s);\n})();\n</script>","site":{"data":{}},"excerpt":"","more":"<style>\nimg {\n    max-width: 100%;\n    width: 290px;\n}\n</style>\n\n<p>æ ¹æ® <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh\" target=\"_blank\" rel=\"external\">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…</a>ï¼Œæˆ‘çš„åšæ–‡ä»»ä½ è¹‚èºã€‚</p>\n<p>åšå®¢åŠåšå®¢å†…å®¹æ¶‰åŠçš„æœ¬äººæ‰€æœ‰å¼€æºé¡¹ç›®éƒ½åŸºäº <a href=\"https://egoist.mit-license.org/\" target=\"_blank\" rel=\"external\">MIT</a> åè®®å‘å¸ƒï¼Œæ— ä»»ä½•åº”ç”¨å†…å¤–æ”¶è´¹ã€‚</p>\n<p>æ‚¨èµçš„å’–å•¡é’±â˜•ï¸å°çš„ä¸åæ„Ÿæ¿€ï¼Œå¹¶ç»§ç»­åŠªåŠ›åˆ›ä½œï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒã€‚</p>\n<h3 id=\"æ”¯ä»˜å®\"><a href=\"#æ”¯ä»˜å®\" class=\"headerlink\" title=\"æ”¯ä»˜å®\"></a>æ”¯ä»˜å®</h3><p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/zhifubao.jpg\" alt=\"æ”¯ä»˜å®\"></p>\n<h3 id=\"å¾®ä¿¡\"><a href=\"#å¾®ä¿¡\" class=\"headerlink\" title=\"å¾®ä¿¡\"></a>å¾®ä¿¡</h3><p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/qrweixin.jpg\" alt=\"å¾®ä¿¡\"></p>\n<p><div id=\"disqus_thread\" style=\"margin-left: 0; margin-right: 0;\"></div></p>\n<script>\n\n/**\n*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.\n*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/\n/*\nvar disqus_config = function () {\nthis.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable\nthis.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable\n};\n*/\n(function() { // DON'T EDIT BELOW THIS LINE\nvar d = document, s = d.createElement('script');\ns.src = 'https://hcysunyang.disqus.com/embed.js';\ns.setAttribute('data-timestamp', +new Date());\n(d.head || d.body).appendChild(s);\n})();\n</script>"}],"Post":[{"title":"ä¸ç”¨Expressè„šæ‰‹æ¶-è‡ªå·±æ­å»ºç¨‹åºéª¨æ¶","date":"2015-09-23T03:14:46.000Z","_content":"\n# åˆè¯†Express #\n\n[Express](http://expressjs.com/)çš„å®˜ç½‘ä¸Šæ˜¯è¿™æ ·ä»‹ç»çš„ï¼šâ€œç²¾ç®€çš„ã€çµæ´»çš„Node.js Webç¨‹åºæ¡†æ¶â€ã€‚\nexpressçš„å“²å­¦æ˜¯â€œå°‘å³æ˜¯å¤šâ€ï¼Œexpressæ˜¯å¯æ‰©å±•çš„ï¼Œä»–åªå……å½“ä½ å’ŒæœåŠ¡å™¨ä¹‹é—´è–„è–„çš„ä¸€å±‚ï¼Œè¿™å¹¶ä¸æ˜¯è¯´å®ƒä¸å¥å£®ï¼Œè€Œæ˜¯å°½é‡å°‘å¹²é¢„ä½ ï¼Œè®©ä½ èƒ½å¤Ÿå……åˆ†è¡¨è¾¾è‡ªå·±çš„æ€æƒ³ã€‚\n\n<!-- more -->\n\nåœ¨å¼€å§‹ä¹‹å‰ï¼Œé¦–å…ˆè¦ç¡®è®¤ä½ å¯¹nodeæœ‰ä¸€å®šçš„äº†è§£ï¼Œä»¥åŠä½ çš„ç”µè„‘ä¸Šå·²ç»å®‰è£…äº†nodeï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¼€å§‹å§ã€‚\næ—¢ç„¶æ˜¯ä½¿ç”¨expressä»é›¶æ­å»ºé¡¹ç›®ï¼Œé‚£ä¹ˆç¬¬ä¸€æ­¥æˆ‘ä»¬åº”è¯¥åˆ›å»ºè‡ªå·±çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¹Ÿå«æ ¹ç›®å½•æˆ–è€…é¡¹ç›®ç›®å½•ï¼ˆä¸€ä¸‹ç»Ÿç§°ä¸ºé¡¹ç›®ç›®å½•ï¼‰ï¼š\n\n```\nmkdir learnexpress\ncd learnexpress\n```\n\nnpm(åŒ…ç®¡ç†å·¥å…·)æ˜¯åŸºäºpackage.jsonæ–‡ä»¶ç®¡ç†é¡¹ç›®çš„ä¾èµ–ä»¥åŠé¡¹ç›®çš„å…ƒæ•°æ®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åˆ›å»ºpackage.jsonè¿™ä¸ªæ–‡ä»¶ï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯å…ˆé¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œ\n\n```\nnpm init\n```\n\næ‰§è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œç»ˆç«¯ä¼šæå‡ºä¸€äº›åˆ—é—®é¢˜ï¼Œæ¥å¸®åŠ©ä½ å®Œæˆè¿™ä¸ªæ–‡ä»¶ï¼š\n\n![npm init](http://7xlolm.com1.z0.glb.clouddn.com/20150923a.png) \n\nä¸è¿‡æˆ‘ä»¬å¯ä»¥ä¸€è·¯å›è½¦ï¼Œä¸éœ€è¦å¡«å†™ä»»ä½•ä¿¡æ¯ï¼Œè¿™æ ·å°±ä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«é»˜è®¤ä¿¡æ¯çš„package.jsonæ–‡ä»¶ï¼Œæ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\n```\n{\n  \"name\": \"learnexp\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\"\n}\n```\n\npackage.jsonæ–‡ä»¶åˆ›å»ºå¥½äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å®‰è£…expressäº†ï¼Œæ‰§è¡Œï¼š\n\n```\nnpm install --save express\n```\n\nè¿è¡Œnpm installä¼šæŠŠæŒ‡å®šåç§°çš„åŒ…å®‰è£…åˆ°node_modulesç›®å½•ä¸‹ï¼Œå¦‚æœä½ ä½¿ç”¨äº† --save é€‰é¡¹ï¼Œä»–è¿˜ä¼šæ›´æ–°package.jsonæ–‡ä»¶ï¼Œå°†åŒ…çš„ä¾èµ–å†™å…¥package.jsonï¼Œæ‰“å¼€é¡¹ç›®ç›®å½•ï¼Œä½ ä¼šå‘ç°å¤šäº†ä¸€ä¸ªnode_modulesç›®å½•ï¼Œæ­¤æ—¶å†æ¬¡æ‰“å¼€package.jsonæ–‡ä»¶ï¼Œä¼šå‘ç°æ–‡ä»¶è¢«æ›´æ–°äº†ï¼š\n\n```\n{\n  \"name\": \"learnexp\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"express\": \"^4.13.3\"\n  }\n}\n```\n\nexpressä¹Ÿå®‰è£…å¥½äº†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å†™é¡¹ç›®äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç¬¬ä¸€æ­¥éœ€è¦åšçš„äº‹æƒ…æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸ç®¡ä»»ä½•ä¸€ä¸ªé¡¹ç›®éƒ½éœ€è¦ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯å†™å…¥å£æ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ªjsæ–‡ä»¶ï¼Œæ–‡ä»¶åç§°è‡ªå®šä¹‰ï¼Œä½†æ˜¯æœ€å¥½ä»¥ä½ çš„é¡¹ç›®åç§°å»å‘½åï¼Œè¿™é‡Œæˆ‘ä»¬å°±å«app.jsä½œä¸ºæˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹ä»£ç \n\n```\n// å¼•å…¥expressæ¨¡å—\nvar express = require('express');\n\n// è°ƒç”¨express()æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡\nvar app = express();\n\n// è®¾ç½®ç«¯å£\napp.set('port', process.env.PORT || 3000);\n\n// ä¸­é—´ä»¶ å®šåˆ¶404é¡µé¢\napp.use(function(req, res){\n\tres.type('text/plain');\n\tres.status(404);\n\tres.send('404 - Not Found');\n});\n\n// ä¸­é—´ä»¶ å®šåˆ¶500é¡µé¢\napp.use(function(req, res){\n\tres.type('text/plain');\n\tres.status(500);\n\tres.send('500 - Server Error');\n});\n\napp.listen(app.get('port'), function(){\n\tconsole.log('expresså¯åŠ¨å¹¶ç›‘å¬' + app.get('port') + 'ç«¯å£ï¼ŒæŒ‰ Ctrl + C ç»ˆæ­¢');\n});\n```\n\nå…¥å£æ–‡ä»¶å†™å¥½åï¼Œæˆ‘ä»¬ä¿å­˜æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œï¼š\n\n```\nnode app.js\n```\n\nè¿™æ ·ï¼Œæˆ‘ä»¬çš„ç¨‹åºå°±è·‘èµ·æ¥äº†ï¼Œæ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œè¾“å…¥ * localhost:3000 *ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š\n\n![404](http://7xlolm.com1.z0.glb.clouddn.com/20150923b.png)\n\nä¸ºä»€ä¹ˆæ˜¯404ç•Œé¢å‘¢ï¼Ÿå¾ˆç®€å•æˆ‘ä»¬å¹¶æ²¡æœ‰è®¾ç½®ä»»ä½•è·¯ç”±ï¼Œæˆ‘ä»¬çš„å…¥å£æ–‡ä»¶ï¼ˆapp.jsï¼‰ä¸­åªè®¾ç½®äº†404ã€500çš„å¤„ç†ã€‚\nåœ¨æˆ‘ä»¬ç»™åº”ç”¨ç¨‹åºåŠ ä¸Šè·¯ç”±ä¹‹å‰æˆ‘ä»¬æ¥è¯´ä¸€äº›é—®é¢˜ï¼Œé¦–å…ˆé€šè¿‡æ‰§è¡Œ * npm init * åˆ›å»ºçš„package.jsonä¸­mainå±æ€§çš„é»˜è®¤å€¼æ˜¯index.jsï¼Œè€Œæˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶æ˜¯app.jsï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ‰‹åŠ¨ä¿®æ”¹package.jsonæ–‡ä»¶çš„mainå±æ€§ä¸ºapp.jsï¼š\n\n```\n{\n  \"name\": \"learnexp\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"app.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"express\": \"^4.13.3\"\n  }\n}\n```\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»™é¦–é¡µå’Œå…³äºé¡µé¢åŠ ä¸Šè·¯ç”±ï¼Œæ³¨æ„ï¼šè·¯ç”±åº”è¯¥æ”¾åœ¨404å’Œ500å¤„ç†å™¨å‰é¢ï¼š\n\n```\n// é¦–é¡µè·¯ç”±\napp.get('/' ,function(req, res){\n\tres.type('text/plain');\n\tres.send('home');\n})\n\n// å…³äºé¡µé¢è·¯ç”±\napp.get('/about' ,function(req, res){\n\tres.type('text/plain');\n\tres.send('about');\n})\n\n// ä¸­é—´ä»¶ å®šåˆ¶404é¡µé¢\napp.use(function(req, res){\n\tres.type('text/plain');\n\tres.status(404);\n\tres.send('404 - Not Found');\n});\n\n........\n\n```\n\napp.get æ˜¯æˆ‘ä»¬æ·»åŠ çš„è·¯ç”±æ–¹æ³•(å¸¸è§çš„è¿˜æœ‰ app.post )ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è·¯å¾„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°\né‡å¯æˆ‘ä»¬çš„nodeæœåŠ¡\n\n```\nnode app.js\n```\n\næ‰“å¼€æµè§ˆå™¨åˆ†åˆ«è¾“å…¥ * localhost:3000 * å’Œ * localhost:3000/about * æ€ä¹ˆæ ·ï¼Œæ˜¯å¦å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![é¦–é¡µ](http://7xlolm.com1.z0.glb.clouddn.com/20150923c.png) ![å…³äºé¡µé¢](http://7xlolm.com1.z0.glb.clouddn.com/20150923d.png)\n\n\n\n# è«æ¿å¼•æ“ #\n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬çš„ç•Œé¢ä¸å¯èƒ½æ€»æ˜¯ä¸€å †æ–‡å­—å§ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥æœ‰æ¼‚äº®çš„æ ·å¼ï¼Œå¼€å‘è¿‡ç¨‹ä¸­æ˜¯ä¸æ˜¯åº”è¯¥æœ‰æ¨¡æ¿å¼•æ“ï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šåŒå­¦å¯¹è«æ¿å¼•æ“æ˜¯ä¸é™Œç”Ÿçš„ã€‚expressæ”¯æŒå¾ˆå¤šç§è«æ¿å¼•æ“ï¼Œä¾‹å¦‚Jadeï¼Œejsç­‰ï¼Œè€Œæˆ‘ä»¬ä»Šå¤©è¦ä»‹ç»çš„æ˜¯ Handlebarsï¼Œä¸ºäº†æ”¯æŒhandlebarsï¼Œæˆ‘ä»¬é¦–å…ˆè¦å®‰è£… express3-handlebars åŒ…ï¼š\n\n```\nnpm install --save express3-handlebars\n```\n\nç„¶ååœ¨æˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶ä¸­* åˆ›å»ºappçš„ä»£ç  *ä¹‹ååŠ å…¥ä»¥ä¸‹ä»£ç ï¼š\n\n```\nvar app = express();\n\n// è®¾ç½®handlebarsè«æ¿å¼•æ“\nvar handlebars = require('express3-handlebars').create({defaultLayout : 'main'});\napp.engine('handlebars', handlebars.engine);\napp.set('view engine', 'handlebars');\n```\n\nä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œäº† * {defaultLayout : 'main'} * ï¼Œè¿™å°±æ„å‘³ç€é™¤éæˆ‘ä»¬ç‰¹åˆ«å£°æ˜ï¼Œå¦åˆ™æ‰€æœ‰è§†å›¾éƒ½å°†ä½¿ç”¨main.handlebarsä½œä¸ºé»˜è®¤å¸ƒå±€ï¼Œå¸ƒå±€æ–‡ä»¶é»˜è®¤åœ¨ * views/layouts/ * ç›®å½•ä¸‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æƒ³é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºviewsç›®å½•ï¼Œå¹¶åœ¨viewsç›®å½•ä¸­åˆ›å»ºlayoutsç›®å½•ï¼Œåœ¨layoutsç›®å½•ä¸­åˆ›å»ºmain.handlebarsæ–‡ä»¶ï¼š\n\n```\n<!dpcument html>\n<html>\n<head>\n\t<title>é»˜è®¤å¸ƒå±€</title>\n</head>\n<body>\n\t<h1>é»˜è®¤å¸ƒå±€å“¦å“¦å“¦å“¦</h1>\n\t{{{body}}}\n</body>\n</html>\n```\n\nç¼–å†™å¥½é»˜è®¤å¸ƒå±€å¥½ï¼Œæˆ‘ä»¬æ¥åˆ†åˆ«åˆ›å»ºé¦–é¡µé¡µé¢ï¼Œviews/home.handlebars\n\n```\n<h1>è¿™æ˜¯é¦–é¡µ</h1>\n```\n\nå…³äºæˆ‘ä»¬é¡µé¢ï¼Œviews/about.handlebars\n\n```\n<h1>è¿™æ˜¯å…³äºæˆ‘ä»¬é¡µé¢</h1>\n```\n\n404é¡µé¢ï¼Œviews/404.handlebars\n\n```\n<h1>è¿™æ˜¯404é¡µé¢</h1>\n```\n\n500é¡µé¢ï¼Œ500.handlebars\n\n```\n<h1>è¿™æ˜¯500é¡µé¢</h1>\n```\n\nç°åœ¨è§†å›¾ä¹Ÿç¼–å†™å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¿®æ”¹é¡¹ç›®å…¥å£æ–‡ä»¶ä¸­çš„è·¯ç”±å·²ç»404å’Œ500å¤„ç†å™¨ï¼š\n\n```\n// é¦–é¡µè·¯ç”±\napp.get('/' ,function(req, res){\n\tres.render('home');\n})\n\n// å…³äºé¡µé¢è·¯ç”±\napp.get('/about' ,function(req, res){\n\tres.render('about');\n})\n\n// ä¸­é—´ä»¶ å®šåˆ¶404é¡µé¢\napp.use(function(req, res){\n\tres.status(404);\n\tres.render('404');\n});\n\n// ä¸­é—´ä»¶ å®šåˆ¶500é¡µé¢\napp.use(function(req, res){\n\tres.status(500);\n\tres.render('500');\n});\n```\n\næ³¨æ„æˆ‘ä»¬å·²ç»ä¸ç”¨res.typeæŒ‡å®šå†…å®¹ç±»å‹äº†ï¼Œè§†å›¾å¼•æ“é»˜è®¤ä¼šè¿”å› text/html å†…å®¹ç±»å‹ï¼Œä¹Ÿä¸ç”¨ res.status æŒ‡å®šçŠ¶æ€ç äº†ï¼Œè§†å›¾å¼•æ“ä¼šé»˜è®¤è¿”å›200çŠ¶æ€ç (å¯¹äº404å’Œ500é¡µé¢å¿…é¡»æŒ‡å®šçŠ¶æ€ç )\nä¸‹é¢ï¼Œæˆ‘ä»¬å†æ¬¡é‡å¯æœåŠ¡å™¨\n\n```\nnode app.js\n```\n\næ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¦‚ä¸‹å›¾ï¼š\n\n![ä½¿ç”¨è«æ¿å¼•æ“çš„é¦–é¡µ](http://7xlolm.com1.z0.glb.clouddn.com/20150923e.png) ![ä½¿ç”¨è«æ¿å¼•æ“çš„å…³äºé¡µé¢](http://7xlolm.com1.z0.glb.clouddn.com/20150923f.png)\n\n# è§†å›¾å’Œé™æ€èµ„æº #\n\næˆ‘ä»¬åœ¨åšè§†å›¾çš„æ—¶å€™ï¼Œæ€»æ˜¯ä¼šä½¿ç”¨å¸¦é™æ€èµ„æºï¼Œæ¯”å¦‚å›¾ç‰‡ã€cssã€javascriptæ–‡ä»¶ç­‰ï¼Œexpressæ˜¯é staticä¸­é—´ä»¶ç®¡ç†é™æ€èµ„æºçš„ï¼Œå®ƒå¯ä»¥æŠŠä¸€ä¸ªæˆ–å¤šä¸ªç›®å½•æŒ‡æ´¾æˆåŒ…å«é™æ€èµ„æºçš„ç›®å½•ï¼Œå…¶ä¸­çš„èµ„æºä¸ç»è¿‡ä»»ä½•å¤„ç†ç›´æ¥å‘ç»™å®¢æˆ·ç«¯ã€‚\n\nåœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º * public * ç›®å½•ï¼Œæ¥ä¸‹æ¥ï¼Œåœ¨æ‰€æœ‰è·¯ç”±ä»¥åŠä¸­é—´ä»¶ä¹‹å‰åŠ å…¥staticä¸­é—´ä»¶ï¼š\n\n```\napp.use(express.static(__dirname + '/public'));\n```\n\næ¥ä¸‹æ¥ï¼Œåœ¨publicç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ªimgå­ç›®å½•ï¼Œå¹¶ç…§ä¸€å¼ å›¾ç‰‡æ”¾å…¥è¯¥ç›®å½•ä¸‹ï¼ˆå¦‚ï¼šlogo.pngï¼‰ï¼Œä¹‹åä¿®æ”¹main.handlebarså¸ƒå±€æ–‡ä»¶\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n\t<title>é»˜è®¤å¸ƒå±€</title>\n</head>\n<body>\n\t<img src=\"/img/logo.png\" alt=\"LOGO\" />\n\t<h1>é»˜è®¤å¸ƒå±€å“¦å“¦å“¦å“¦</h1>\n\t{{{body}}}\n</body>\n</html>\n```\n\né‡å¯nodeæœåŠ¡\n\n```\nnode app.js\n```\n\nè®¿é—®ä¸»é¡µé¢ï¼Œæ˜¯ä¸æ˜¯çœ‹åˆ°äº†é™æ€èµ„æºå›¾ç‰‡ï¼š\n\n![é™æ€èµ„æºå›¾ç‰‡](http://7xlolm.com1.z0.glb.clouddn.com/20150923g.png)\n\nå¥½å•¦ï¼Œè¿™å°±æ˜¯expressæ­å»ºé¡¹ç›®çš„åŸºæœ¬ä½¿ç”¨ï¼Œä½ è¿˜å¯ä»¥åœ¨publicç›®å½•ä¸‹é¢åˆ›å»ºç±»ä¼¼äºcssï¼Œjsè¿™æ ·çš„å­ç›®å½•ï¼Œå­˜æ”¾å¯¹åº”çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œæ›´å¤šæœ‰å…³äºexpressçš„å†…å®¹ï¼Œå¯ä»¥ç»§ç»­å…³æ³¨æˆ‘çš„åšå®¢ï¼Œæˆ–è€…[express](http://expressjs.com/)å®˜ç½‘","source":"_posts/2015/09/23/ä¸ç”¨Expressè„šæ‰‹æ¶-è‡ªå·±æ­å»ºç¨‹åºéª¨æ¶.md","raw":"title: ä¸ç”¨Expressè„šæ‰‹æ¶-è‡ªå·±æ­å»ºç¨‹åºéª¨æ¶\ndate: 2015-09-23 11:14:46\ncategories:\n- WebFrontEnd\ntags:\n- express\n- nodejs\n---\n\n# åˆè¯†Express #\n\n[Express](http://expressjs.com/)çš„å®˜ç½‘ä¸Šæ˜¯è¿™æ ·ä»‹ç»çš„ï¼šâ€œç²¾ç®€çš„ã€çµæ´»çš„Node.js Webç¨‹åºæ¡†æ¶â€ã€‚\nexpressçš„å“²å­¦æ˜¯â€œå°‘å³æ˜¯å¤šâ€ï¼Œexpressæ˜¯å¯æ‰©å±•çš„ï¼Œä»–åªå……å½“ä½ å’ŒæœåŠ¡å™¨ä¹‹é—´è–„è–„çš„ä¸€å±‚ï¼Œè¿™å¹¶ä¸æ˜¯è¯´å®ƒä¸å¥å£®ï¼Œè€Œæ˜¯å°½é‡å°‘å¹²é¢„ä½ ï¼Œè®©ä½ èƒ½å¤Ÿå……åˆ†è¡¨è¾¾è‡ªå·±çš„æ€æƒ³ã€‚\n\n<!-- more -->\n\nåœ¨å¼€å§‹ä¹‹å‰ï¼Œé¦–å…ˆè¦ç¡®è®¤ä½ å¯¹nodeæœ‰ä¸€å®šçš„äº†è§£ï¼Œä»¥åŠä½ çš„ç”µè„‘ä¸Šå·²ç»å®‰è£…äº†nodeï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¼€å§‹å§ã€‚\næ—¢ç„¶æ˜¯ä½¿ç”¨expressä»é›¶æ­å»ºé¡¹ç›®ï¼Œé‚£ä¹ˆç¬¬ä¸€æ­¥æˆ‘ä»¬åº”è¯¥åˆ›å»ºè‡ªå·±çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¹Ÿå«æ ¹ç›®å½•æˆ–è€…é¡¹ç›®ç›®å½•ï¼ˆä¸€ä¸‹ç»Ÿç§°ä¸ºé¡¹ç›®ç›®å½•ï¼‰ï¼š\n\n```\nmkdir learnexpress\ncd learnexpress\n```\n\nnpm(åŒ…ç®¡ç†å·¥å…·)æ˜¯åŸºäºpackage.jsonæ–‡ä»¶ç®¡ç†é¡¹ç›®çš„ä¾èµ–ä»¥åŠé¡¹ç›®çš„å…ƒæ•°æ®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åˆ›å»ºpackage.jsonè¿™ä¸ªæ–‡ä»¶ï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯å…ˆé¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œ\n\n```\nnpm init\n```\n\næ‰§è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œç»ˆç«¯ä¼šæå‡ºä¸€äº›åˆ—é—®é¢˜ï¼Œæ¥å¸®åŠ©ä½ å®Œæˆè¿™ä¸ªæ–‡ä»¶ï¼š\n\n![npm init](http://7xlolm.com1.z0.glb.clouddn.com/20150923a.png) \n\nä¸è¿‡æˆ‘ä»¬å¯ä»¥ä¸€è·¯å›è½¦ï¼Œä¸éœ€è¦å¡«å†™ä»»ä½•ä¿¡æ¯ï¼Œè¿™æ ·å°±ä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«é»˜è®¤ä¿¡æ¯çš„package.jsonæ–‡ä»¶ï¼Œæ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\n```\n{\n  \"name\": \"learnexp\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\"\n}\n```\n\npackage.jsonæ–‡ä»¶åˆ›å»ºå¥½äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å®‰è£…expressäº†ï¼Œæ‰§è¡Œï¼š\n\n```\nnpm install --save express\n```\n\nè¿è¡Œnpm installä¼šæŠŠæŒ‡å®šåç§°çš„åŒ…å®‰è£…åˆ°node_modulesç›®å½•ä¸‹ï¼Œå¦‚æœä½ ä½¿ç”¨äº† --save é€‰é¡¹ï¼Œä»–è¿˜ä¼šæ›´æ–°package.jsonæ–‡ä»¶ï¼Œå°†åŒ…çš„ä¾èµ–å†™å…¥package.jsonï¼Œæ‰“å¼€é¡¹ç›®ç›®å½•ï¼Œä½ ä¼šå‘ç°å¤šäº†ä¸€ä¸ªnode_modulesç›®å½•ï¼Œæ­¤æ—¶å†æ¬¡æ‰“å¼€package.jsonæ–‡ä»¶ï¼Œä¼šå‘ç°æ–‡ä»¶è¢«æ›´æ–°äº†ï¼š\n\n```\n{\n  \"name\": \"learnexp\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"express\": \"^4.13.3\"\n  }\n}\n```\n\nexpressä¹Ÿå®‰è£…å¥½äº†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å†™é¡¹ç›®äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç¬¬ä¸€æ­¥éœ€è¦åšçš„äº‹æƒ…æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸ç®¡ä»»ä½•ä¸€ä¸ªé¡¹ç›®éƒ½éœ€è¦ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯å†™å…¥å£æ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ªjsæ–‡ä»¶ï¼Œæ–‡ä»¶åç§°è‡ªå®šä¹‰ï¼Œä½†æ˜¯æœ€å¥½ä»¥ä½ çš„é¡¹ç›®åç§°å»å‘½åï¼Œè¿™é‡Œæˆ‘ä»¬å°±å«app.jsä½œä¸ºæˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹ä»£ç \n\n```\n// å¼•å…¥expressæ¨¡å—\nvar express = require('express');\n\n// è°ƒç”¨express()æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡\nvar app = express();\n\n// è®¾ç½®ç«¯å£\napp.set('port', process.env.PORT || 3000);\n\n// ä¸­é—´ä»¶ å®šåˆ¶404é¡µé¢\napp.use(function(req, res){\n\tres.type('text/plain');\n\tres.status(404);\n\tres.send('404 - Not Found');\n});\n\n// ä¸­é—´ä»¶ å®šåˆ¶500é¡µé¢\napp.use(function(req, res){\n\tres.type('text/plain');\n\tres.status(500);\n\tres.send('500 - Server Error');\n});\n\napp.listen(app.get('port'), function(){\n\tconsole.log('expresså¯åŠ¨å¹¶ç›‘å¬' + app.get('port') + 'ç«¯å£ï¼ŒæŒ‰ Ctrl + C ç»ˆæ­¢');\n});\n```\n\nå…¥å£æ–‡ä»¶å†™å¥½åï¼Œæˆ‘ä»¬ä¿å­˜æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œï¼š\n\n```\nnode app.js\n```\n\nè¿™æ ·ï¼Œæˆ‘ä»¬çš„ç¨‹åºå°±è·‘èµ·æ¥äº†ï¼Œæ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œè¾“å…¥ * localhost:3000 *ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š\n\n![404](http://7xlolm.com1.z0.glb.clouddn.com/20150923b.png)\n\nä¸ºä»€ä¹ˆæ˜¯404ç•Œé¢å‘¢ï¼Ÿå¾ˆç®€å•æˆ‘ä»¬å¹¶æ²¡æœ‰è®¾ç½®ä»»ä½•è·¯ç”±ï¼Œæˆ‘ä»¬çš„å…¥å£æ–‡ä»¶ï¼ˆapp.jsï¼‰ä¸­åªè®¾ç½®äº†404ã€500çš„å¤„ç†ã€‚\nåœ¨æˆ‘ä»¬ç»™åº”ç”¨ç¨‹åºåŠ ä¸Šè·¯ç”±ä¹‹å‰æˆ‘ä»¬æ¥è¯´ä¸€äº›é—®é¢˜ï¼Œé¦–å…ˆé€šè¿‡æ‰§è¡Œ * npm init * åˆ›å»ºçš„package.jsonä¸­mainå±æ€§çš„é»˜è®¤å€¼æ˜¯index.jsï¼Œè€Œæˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶æ˜¯app.jsï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ‰‹åŠ¨ä¿®æ”¹package.jsonæ–‡ä»¶çš„mainå±æ€§ä¸ºapp.jsï¼š\n\n```\n{\n  \"name\": \"learnexp\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"app.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"express\": \"^4.13.3\"\n  }\n}\n```\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»™é¦–é¡µå’Œå…³äºé¡µé¢åŠ ä¸Šè·¯ç”±ï¼Œæ³¨æ„ï¼šè·¯ç”±åº”è¯¥æ”¾åœ¨404å’Œ500å¤„ç†å™¨å‰é¢ï¼š\n\n```\n// é¦–é¡µè·¯ç”±\napp.get('/' ,function(req, res){\n\tres.type('text/plain');\n\tres.send('home');\n})\n\n// å…³äºé¡µé¢è·¯ç”±\napp.get('/about' ,function(req, res){\n\tres.type('text/plain');\n\tres.send('about');\n})\n\n// ä¸­é—´ä»¶ å®šåˆ¶404é¡µé¢\napp.use(function(req, res){\n\tres.type('text/plain');\n\tres.status(404);\n\tres.send('404 - Not Found');\n});\n\n........\n\n```\n\napp.get æ˜¯æˆ‘ä»¬æ·»åŠ çš„è·¯ç”±æ–¹æ³•(å¸¸è§çš„è¿˜æœ‰ app.post )ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è·¯å¾„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°\né‡å¯æˆ‘ä»¬çš„nodeæœåŠ¡\n\n```\nnode app.js\n```\n\næ‰“å¼€æµè§ˆå™¨åˆ†åˆ«è¾“å…¥ * localhost:3000 * å’Œ * localhost:3000/about * æ€ä¹ˆæ ·ï¼Œæ˜¯å¦å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![é¦–é¡µ](http://7xlolm.com1.z0.glb.clouddn.com/20150923c.png) ![å…³äºé¡µé¢](http://7xlolm.com1.z0.glb.clouddn.com/20150923d.png)\n\n\n\n# è«æ¿å¼•æ“ #\n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬çš„ç•Œé¢ä¸å¯èƒ½æ€»æ˜¯ä¸€å †æ–‡å­—å§ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥æœ‰æ¼‚äº®çš„æ ·å¼ï¼Œå¼€å‘è¿‡ç¨‹ä¸­æ˜¯ä¸æ˜¯åº”è¯¥æœ‰æ¨¡æ¿å¼•æ“ï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šåŒå­¦å¯¹è«æ¿å¼•æ“æ˜¯ä¸é™Œç”Ÿçš„ã€‚expressæ”¯æŒå¾ˆå¤šç§è«æ¿å¼•æ“ï¼Œä¾‹å¦‚Jadeï¼Œejsç­‰ï¼Œè€Œæˆ‘ä»¬ä»Šå¤©è¦ä»‹ç»çš„æ˜¯ Handlebarsï¼Œä¸ºäº†æ”¯æŒhandlebarsï¼Œæˆ‘ä»¬é¦–å…ˆè¦å®‰è£… express3-handlebars åŒ…ï¼š\n\n```\nnpm install --save express3-handlebars\n```\n\nç„¶ååœ¨æˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶ä¸­* åˆ›å»ºappçš„ä»£ç  *ä¹‹ååŠ å…¥ä»¥ä¸‹ä»£ç ï¼š\n\n```\nvar app = express();\n\n// è®¾ç½®handlebarsè«æ¿å¼•æ“\nvar handlebars = require('express3-handlebars').create({defaultLayout : 'main'});\napp.engine('handlebars', handlebars.engine);\napp.set('view engine', 'handlebars');\n```\n\nä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œäº† * {defaultLayout : 'main'} * ï¼Œè¿™å°±æ„å‘³ç€é™¤éæˆ‘ä»¬ç‰¹åˆ«å£°æ˜ï¼Œå¦åˆ™æ‰€æœ‰è§†å›¾éƒ½å°†ä½¿ç”¨main.handlebarsä½œä¸ºé»˜è®¤å¸ƒå±€ï¼Œå¸ƒå±€æ–‡ä»¶é»˜è®¤åœ¨ * views/layouts/ * ç›®å½•ä¸‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æƒ³é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºviewsç›®å½•ï¼Œå¹¶åœ¨viewsç›®å½•ä¸­åˆ›å»ºlayoutsç›®å½•ï¼Œåœ¨layoutsç›®å½•ä¸­åˆ›å»ºmain.handlebarsæ–‡ä»¶ï¼š\n\n```\n<!dpcument html>\n<html>\n<head>\n\t<title>é»˜è®¤å¸ƒå±€</title>\n</head>\n<body>\n\t<h1>é»˜è®¤å¸ƒå±€å“¦å“¦å“¦å“¦</h1>\n\t{{{body}}}\n</body>\n</html>\n```\n\nç¼–å†™å¥½é»˜è®¤å¸ƒå±€å¥½ï¼Œæˆ‘ä»¬æ¥åˆ†åˆ«åˆ›å»ºé¦–é¡µé¡µé¢ï¼Œviews/home.handlebars\n\n```\n<h1>è¿™æ˜¯é¦–é¡µ</h1>\n```\n\nå…³äºæˆ‘ä»¬é¡µé¢ï¼Œviews/about.handlebars\n\n```\n<h1>è¿™æ˜¯å…³äºæˆ‘ä»¬é¡µé¢</h1>\n```\n\n404é¡µé¢ï¼Œviews/404.handlebars\n\n```\n<h1>è¿™æ˜¯404é¡µé¢</h1>\n```\n\n500é¡µé¢ï¼Œ500.handlebars\n\n```\n<h1>è¿™æ˜¯500é¡µé¢</h1>\n```\n\nç°åœ¨è§†å›¾ä¹Ÿç¼–å†™å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¿®æ”¹é¡¹ç›®å…¥å£æ–‡ä»¶ä¸­çš„è·¯ç”±å·²ç»404å’Œ500å¤„ç†å™¨ï¼š\n\n```\n// é¦–é¡µè·¯ç”±\napp.get('/' ,function(req, res){\n\tres.render('home');\n})\n\n// å…³äºé¡µé¢è·¯ç”±\napp.get('/about' ,function(req, res){\n\tres.render('about');\n})\n\n// ä¸­é—´ä»¶ å®šåˆ¶404é¡µé¢\napp.use(function(req, res){\n\tres.status(404);\n\tres.render('404');\n});\n\n// ä¸­é—´ä»¶ å®šåˆ¶500é¡µé¢\napp.use(function(req, res){\n\tres.status(500);\n\tres.render('500');\n});\n```\n\næ³¨æ„æˆ‘ä»¬å·²ç»ä¸ç”¨res.typeæŒ‡å®šå†…å®¹ç±»å‹äº†ï¼Œè§†å›¾å¼•æ“é»˜è®¤ä¼šè¿”å› text/html å†…å®¹ç±»å‹ï¼Œä¹Ÿä¸ç”¨ res.status æŒ‡å®šçŠ¶æ€ç äº†ï¼Œè§†å›¾å¼•æ“ä¼šé»˜è®¤è¿”å›200çŠ¶æ€ç (å¯¹äº404å’Œ500é¡µé¢å¿…é¡»æŒ‡å®šçŠ¶æ€ç )\nä¸‹é¢ï¼Œæˆ‘ä»¬å†æ¬¡é‡å¯æœåŠ¡å™¨\n\n```\nnode app.js\n```\n\næ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¦‚ä¸‹å›¾ï¼š\n\n![ä½¿ç”¨è«æ¿å¼•æ“çš„é¦–é¡µ](http://7xlolm.com1.z0.glb.clouddn.com/20150923e.png) ![ä½¿ç”¨è«æ¿å¼•æ“çš„å…³äºé¡µé¢](http://7xlolm.com1.z0.glb.clouddn.com/20150923f.png)\n\n# è§†å›¾å’Œé™æ€èµ„æº #\n\næˆ‘ä»¬åœ¨åšè§†å›¾çš„æ—¶å€™ï¼Œæ€»æ˜¯ä¼šä½¿ç”¨å¸¦é™æ€èµ„æºï¼Œæ¯”å¦‚å›¾ç‰‡ã€cssã€javascriptæ–‡ä»¶ç­‰ï¼Œexpressæ˜¯é staticä¸­é—´ä»¶ç®¡ç†é™æ€èµ„æºçš„ï¼Œå®ƒå¯ä»¥æŠŠä¸€ä¸ªæˆ–å¤šä¸ªç›®å½•æŒ‡æ´¾æˆåŒ…å«é™æ€èµ„æºçš„ç›®å½•ï¼Œå…¶ä¸­çš„èµ„æºä¸ç»è¿‡ä»»ä½•å¤„ç†ç›´æ¥å‘ç»™å®¢æˆ·ç«¯ã€‚\n\nåœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º * public * ç›®å½•ï¼Œæ¥ä¸‹æ¥ï¼Œåœ¨æ‰€æœ‰è·¯ç”±ä»¥åŠä¸­é—´ä»¶ä¹‹å‰åŠ å…¥staticä¸­é—´ä»¶ï¼š\n\n```\napp.use(express.static(__dirname + '/public'));\n```\n\næ¥ä¸‹æ¥ï¼Œåœ¨publicç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ªimgå­ç›®å½•ï¼Œå¹¶ç…§ä¸€å¼ å›¾ç‰‡æ”¾å…¥è¯¥ç›®å½•ä¸‹ï¼ˆå¦‚ï¼šlogo.pngï¼‰ï¼Œä¹‹åä¿®æ”¹main.handlebarså¸ƒå±€æ–‡ä»¶\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n\t<title>é»˜è®¤å¸ƒå±€</title>\n</head>\n<body>\n\t<img src=\"/img/logo.png\" alt=\"LOGO\" />\n\t<h1>é»˜è®¤å¸ƒå±€å“¦å“¦å“¦å“¦</h1>\n\t{{{body}}}\n</body>\n</html>\n```\n\né‡å¯nodeæœåŠ¡\n\n```\nnode app.js\n```\n\nè®¿é—®ä¸»é¡µé¢ï¼Œæ˜¯ä¸æ˜¯çœ‹åˆ°äº†é™æ€èµ„æºå›¾ç‰‡ï¼š\n\n![é™æ€èµ„æºå›¾ç‰‡](http://7xlolm.com1.z0.glb.clouddn.com/20150923g.png)\n\nå¥½å•¦ï¼Œè¿™å°±æ˜¯expressæ­å»ºé¡¹ç›®çš„åŸºæœ¬ä½¿ç”¨ï¼Œä½ è¿˜å¯ä»¥åœ¨publicç›®å½•ä¸‹é¢åˆ›å»ºç±»ä¼¼äºcssï¼Œjsè¿™æ ·çš„å­ç›®å½•ï¼Œå­˜æ”¾å¯¹åº”çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œæ›´å¤šæœ‰å…³äºexpressçš„å†…å®¹ï¼Œå¯ä»¥ç»§ç»­å…³æ³¨æˆ‘çš„åšå®¢ï¼Œæˆ–è€…[express](http://expressjs.com/)å®˜ç½‘","slug":"ä¸ç”¨Expressè„šæ‰‹æ¶-è‡ªå·±æ­å»ºç¨‹åºéª¨æ¶","published":1,"updated":"2015-11-28T10:45:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx50x000247fyot7dds7a","content":"<h1 id=\"åˆè¯†Express\"><a href=\"#åˆè¯†Express\" class=\"headerlink\" title=\"åˆè¯†Express\"></a>åˆè¯†Express</h1><p><a href=\"http://expressjs.com/\" target=\"_blank\" rel=\"external\">Express</a>çš„å®˜ç½‘ä¸Šæ˜¯è¿™æ ·ä»‹ç»çš„ï¼šâ€œç²¾ç®€çš„ã€çµæ´»çš„Node.js Webç¨‹åºæ¡†æ¶â€ã€‚<br>expressçš„å“²å­¦æ˜¯â€œå°‘å³æ˜¯å¤šâ€ï¼Œexpressæ˜¯å¯æ‰©å±•çš„ï¼Œä»–åªå……å½“ä½ å’ŒæœåŠ¡å™¨ä¹‹é—´è–„è–„çš„ä¸€å±‚ï¼Œè¿™å¹¶ä¸æ˜¯è¯´å®ƒä¸å¥å£®ï¼Œè€Œæ˜¯å°½é‡å°‘å¹²é¢„ä½ ï¼Œè®©ä½ èƒ½å¤Ÿå……åˆ†è¡¨è¾¾è‡ªå·±çš„æ€æƒ³ã€‚</p>\n<a id=\"more\"></a>\n<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œé¦–å…ˆè¦ç¡®è®¤ä½ å¯¹nodeæœ‰ä¸€å®šçš„äº†è§£ï¼Œä»¥åŠä½ çš„ç”µè„‘ä¸Šå·²ç»å®‰è£…äº†nodeï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¼€å§‹å§ã€‚<br>æ—¢ç„¶æ˜¯ä½¿ç”¨expressä»é›¶æ­å»ºé¡¹ç›®ï¼Œé‚£ä¹ˆç¬¬ä¸€æ­¥æˆ‘ä»¬åº”è¯¥åˆ›å»ºè‡ªå·±çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¹Ÿå«æ ¹ç›®å½•æˆ–è€…é¡¹ç›®ç›®å½•ï¼ˆä¸€ä¸‹ç»Ÿç§°ä¸ºé¡¹ç›®ç›®å½•ï¼‰ï¼š</p>\n<pre><code>mkdir learnexpress\ncd learnexpress\n</code></pre><p>npm(åŒ…ç®¡ç†å·¥å…·)æ˜¯åŸºäºpackage.jsonæ–‡ä»¶ç®¡ç†é¡¹ç›®çš„ä¾èµ–ä»¥åŠé¡¹ç›®çš„å…ƒæ•°æ®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åˆ›å»ºpackage.jsonè¿™ä¸ªæ–‡ä»¶ï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯å…ˆé¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œ</p>\n<pre><code>npm init\n</code></pre><p>æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œç»ˆç«¯ä¼šæå‡ºä¸€äº›åˆ—é—®é¢˜ï¼Œæ¥å¸®åŠ©ä½ å®Œæˆè¿™ä¸ªæ–‡ä»¶ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923a.png\" alt=\"npm init\"> </p>\n<p>ä¸è¿‡æˆ‘ä»¬å¯ä»¥ä¸€è·¯å›è½¦ï¼Œä¸éœ€è¦å¡«å†™ä»»ä½•ä¿¡æ¯ï¼Œè¿™æ ·å°±ä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«é»˜è®¤ä¿¡æ¯çš„package.jsonæ–‡ä»¶ï¼Œæ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>\n<pre><code>{\n  &quot;name&quot;: &quot;learnexp&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;index.js&quot;,\n  &quot;scripts&quot;: {\n    &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;ISC&quot;\n}\n</code></pre><p>package.jsonæ–‡ä»¶åˆ›å»ºå¥½äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å®‰è£…expressäº†ï¼Œæ‰§è¡Œï¼š</p>\n<pre><code>npm install --save express\n</code></pre><p>è¿è¡Œnpm installä¼šæŠŠæŒ‡å®šåç§°çš„åŒ…å®‰è£…åˆ°node_modulesç›®å½•ä¸‹ï¼Œå¦‚æœä½ ä½¿ç”¨äº† â€“save é€‰é¡¹ï¼Œä»–è¿˜ä¼šæ›´æ–°package.jsonæ–‡ä»¶ï¼Œå°†åŒ…çš„ä¾èµ–å†™å…¥package.jsonï¼Œæ‰“å¼€é¡¹ç›®ç›®å½•ï¼Œä½ ä¼šå‘ç°å¤šäº†ä¸€ä¸ªnode_modulesç›®å½•ï¼Œæ­¤æ—¶å†æ¬¡æ‰“å¼€package.jsonæ–‡ä»¶ï¼Œä¼šå‘ç°æ–‡ä»¶è¢«æ›´æ–°äº†ï¼š</p>\n<pre><code>{\n  &quot;name&quot;: &quot;learnexp&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;index.js&quot;,\n  &quot;scripts&quot;: {\n    &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;ISC&quot;,\n  &quot;dependencies&quot;: {\n    &quot;express&quot;: &quot;^4.13.3&quot;\n  }\n}\n</code></pre><p>expressä¹Ÿå®‰è£…å¥½äº†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å†™é¡¹ç›®äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç¬¬ä¸€æ­¥éœ€è¦åšçš„äº‹æƒ…æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸ç®¡ä»»ä½•ä¸€ä¸ªé¡¹ç›®éƒ½éœ€è¦ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯å†™å…¥å£æ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ªjsæ–‡ä»¶ï¼Œæ–‡ä»¶åç§°è‡ªå®šä¹‰ï¼Œä½†æ˜¯æœ€å¥½ä»¥ä½ çš„é¡¹ç›®åç§°å»å‘½åï¼Œè¿™é‡Œæˆ‘ä»¬å°±å«app.jsä½œä¸ºæˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹ä»£ç </p>\n<pre><code>// å¼•å…¥expressæ¨¡å—\nvar express = require(&#39;express&#39;);\n\n// è°ƒç”¨express()æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡\nvar app = express();\n\n// è®¾ç½®ç«¯å£\napp.set(&#39;port&#39;, process.env.PORT || 3000);\n\n// ä¸­é—´ä»¶ å®šåˆ¶404é¡µé¢\napp.use(function(req, res){\n    res.type(&#39;text/plain&#39;);\n    res.status(404);\n    res.send(&#39;404 - Not Found&#39;);\n});\n\n// ä¸­é—´ä»¶ å®šåˆ¶500é¡µé¢\napp.use(function(req, res){\n    res.type(&#39;text/plain&#39;);\n    res.status(500);\n    res.send(&#39;500 - Server Error&#39;);\n});\n\napp.listen(app.get(&#39;port&#39;), function(){\n    console.log(&#39;expresså¯åŠ¨å¹¶ç›‘å¬&#39; + app.get(&#39;port&#39;) + &#39;ç«¯å£ï¼ŒæŒ‰ Ctrl + C ç»ˆæ­¢&#39;);\n});\n</code></pre><p>å…¥å£æ–‡ä»¶å†™å¥½åï¼Œæˆ‘ä»¬ä¿å­˜æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>\n<pre><code>node app.js\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬çš„ç¨‹åºå°±è·‘èµ·æ¥äº†ï¼Œæ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œè¾“å…¥ <em> localhost:3000 </em>ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923b.png\" alt=\"404\"></p>\n<p>ä¸ºä»€ä¹ˆæ˜¯404ç•Œé¢å‘¢ï¼Ÿå¾ˆç®€å•æˆ‘ä»¬å¹¶æ²¡æœ‰è®¾ç½®ä»»ä½•è·¯ç”±ï¼Œæˆ‘ä»¬çš„å…¥å£æ–‡ä»¶ï¼ˆapp.jsï¼‰ä¸­åªè®¾ç½®äº†404ã€500çš„å¤„ç†ã€‚<br>åœ¨æˆ‘ä»¬ç»™åº”ç”¨ç¨‹åºåŠ ä¸Šè·¯ç”±ä¹‹å‰æˆ‘ä»¬æ¥è¯´ä¸€äº›é—®é¢˜ï¼Œé¦–å…ˆé€šè¿‡æ‰§è¡Œ <em> npm init </em> åˆ›å»ºçš„package.jsonä¸­mainå±æ€§çš„é»˜è®¤å€¼æ˜¯index.jsï¼Œè€Œæˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶æ˜¯app.jsï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ‰‹åŠ¨ä¿®æ”¹package.jsonæ–‡ä»¶çš„mainå±æ€§ä¸ºapp.jsï¼š</p>\n<pre><code>{\n  &quot;name&quot;: &quot;learnexp&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;app.js&quot;,\n  &quot;scripts&quot;: {\n    &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;ISC&quot;,\n  &quot;dependencies&quot;: {\n    &quot;express&quot;: &quot;^4.13.3&quot;\n  }\n}\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»™é¦–é¡µå’Œå…³äºé¡µé¢åŠ ä¸Šè·¯ç”±ï¼Œæ³¨æ„ï¼šè·¯ç”±åº”è¯¥æ”¾åœ¨404å’Œ500å¤„ç†å™¨å‰é¢ï¼š</p>\n<pre><code>// é¦–é¡µè·¯ç”±\napp.get(&#39;/&#39; ,function(req, res){\n    res.type(&#39;text/plain&#39;);\n    res.send(&#39;home&#39;);\n})\n\n// å…³äºé¡µé¢è·¯ç”±\napp.get(&#39;/about&#39; ,function(req, res){\n    res.type(&#39;text/plain&#39;);\n    res.send(&#39;about&#39;);\n})\n\n// ä¸­é—´ä»¶ å®šåˆ¶404é¡µé¢\napp.use(function(req, res){\n    res.type(&#39;text/plain&#39;);\n    res.status(404);\n    res.send(&#39;404 - Not Found&#39;);\n});\n\n........\n</code></pre><p>app.get æ˜¯æˆ‘ä»¬æ·»åŠ çš„è·¯ç”±æ–¹æ³•(å¸¸è§çš„è¿˜æœ‰ app.post )ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è·¯å¾„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°<br>é‡å¯æˆ‘ä»¬çš„nodeæœåŠ¡</p>\n<pre><code>node app.js\n</code></pre><p>æ‰“å¼€æµè§ˆå™¨åˆ†åˆ«è¾“å…¥ <em> localhost:3000 </em> å’Œ <em> localhost:3000/about </em> æ€ä¹ˆæ ·ï¼Œæ˜¯å¦å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923c.png\" alt=\"é¦–é¡µ\"> <img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923d.png\" alt=\"å…³äºé¡µé¢\"></p>\n<h1 id=\"è«æ¿å¼•æ“\"><a href=\"#è«æ¿å¼•æ“\" class=\"headerlink\" title=\"è«æ¿å¼•æ“\"></a>è«æ¿å¼•æ“</h1><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬çš„ç•Œé¢ä¸å¯èƒ½æ€»æ˜¯ä¸€å †æ–‡å­—å§ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥æœ‰æ¼‚äº®çš„æ ·å¼ï¼Œå¼€å‘è¿‡ç¨‹ä¸­æ˜¯ä¸æ˜¯åº”è¯¥æœ‰æ¨¡æ¿å¼•æ“ï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šåŒå­¦å¯¹è«æ¿å¼•æ“æ˜¯ä¸é™Œç”Ÿçš„ã€‚expressæ”¯æŒå¾ˆå¤šç§è«æ¿å¼•æ“ï¼Œä¾‹å¦‚Jadeï¼Œejsç­‰ï¼Œè€Œæˆ‘ä»¬ä»Šå¤©è¦ä»‹ç»çš„æ˜¯ Handlebarsï¼Œä¸ºäº†æ”¯æŒhandlebarsï¼Œæˆ‘ä»¬é¦–å…ˆè¦å®‰è£… express3-handlebars åŒ…ï¼š</p>\n<pre><code>npm install --save express3-handlebars\n</code></pre><p>ç„¶ååœ¨æˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶ä¸­<em> åˆ›å»ºappçš„ä»£ç  </em>ä¹‹ååŠ å…¥ä»¥ä¸‹ä»£ç ï¼š</p>\n<pre><code>var app = express();\n\n// è®¾ç½®handlebarsè«æ¿å¼•æ“\nvar handlebars = require(&#39;express3-handlebars&#39;).create({defaultLayout : &#39;main&#39;});\napp.engine(&#39;handlebars&#39;, handlebars.engine);\napp.set(&#39;view engine&#39;, &#39;handlebars&#39;);\n</code></pre><p>ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œäº† <em> {defaultLayout : â€˜mainâ€™} </em> ï¼Œè¿™å°±æ„å‘³ç€é™¤éæˆ‘ä»¬ç‰¹åˆ«å£°æ˜ï¼Œå¦åˆ™æ‰€æœ‰è§†å›¾éƒ½å°†ä½¿ç”¨main.handlebarsä½œä¸ºé»˜è®¤å¸ƒå±€ï¼Œå¸ƒå±€æ–‡ä»¶é»˜è®¤åœ¨ <em> views/layouts/ </em> ç›®å½•ä¸‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æƒ³é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºviewsç›®å½•ï¼Œå¹¶åœ¨viewsç›®å½•ä¸­åˆ›å»ºlayoutsç›®å½•ï¼Œåœ¨layoutsç›®å½•ä¸­åˆ›å»ºmain.handlebarsæ–‡ä»¶ï¼š</p>\n<pre><code>&lt;!dpcument html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;é»˜è®¤å¸ƒå±€&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;é»˜è®¤å¸ƒå±€å“¦å“¦å“¦å“¦&lt;/h1&gt;\n    {{{body}}}\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ç¼–å†™å¥½é»˜è®¤å¸ƒå±€å¥½ï¼Œæˆ‘ä»¬æ¥åˆ†åˆ«åˆ›å»ºé¦–é¡µé¡µé¢ï¼Œviews/home.handlebars</p>\n<pre><code>&lt;h1&gt;è¿™æ˜¯é¦–é¡µ&lt;/h1&gt;\n</code></pre><p>å…³äºæˆ‘ä»¬é¡µé¢ï¼Œviews/about.handlebars</p>\n<pre><code>&lt;h1&gt;è¿™æ˜¯å…³äºæˆ‘ä»¬é¡µé¢&lt;/h1&gt;\n</code></pre><p>404é¡µé¢ï¼Œviews/404.handlebars</p>\n<pre><code>&lt;h1&gt;è¿™æ˜¯404é¡µé¢&lt;/h1&gt;\n</code></pre><p>500é¡µé¢ï¼Œ500.handlebars</p>\n<pre><code>&lt;h1&gt;è¿™æ˜¯500é¡µé¢&lt;/h1&gt;\n</code></pre><p>ç°åœ¨è§†å›¾ä¹Ÿç¼–å†™å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¿®æ”¹é¡¹ç›®å…¥å£æ–‡ä»¶ä¸­çš„è·¯ç”±å·²ç»404å’Œ500å¤„ç†å™¨ï¼š</p>\n<pre><code>// é¦–é¡µè·¯ç”±\napp.get(&#39;/&#39; ,function(req, res){\n    res.render(&#39;home&#39;);\n})\n\n// å…³äºé¡µé¢è·¯ç”±\napp.get(&#39;/about&#39; ,function(req, res){\n    res.render(&#39;about&#39;);\n})\n\n// ä¸­é—´ä»¶ å®šåˆ¶404é¡µé¢\napp.use(function(req, res){\n    res.status(404);\n    res.render(&#39;404&#39;);\n});\n\n// ä¸­é—´ä»¶ å®šåˆ¶500é¡µé¢\napp.use(function(req, res){\n    res.status(500);\n    res.render(&#39;500&#39;);\n});\n</code></pre><p>æ³¨æ„æˆ‘ä»¬å·²ç»ä¸ç”¨res.typeæŒ‡å®šå†…å®¹ç±»å‹äº†ï¼Œè§†å›¾å¼•æ“é»˜è®¤ä¼šè¿”å› text/html å†…å®¹ç±»å‹ï¼Œä¹Ÿä¸ç”¨ res.status æŒ‡å®šçŠ¶æ€ç äº†ï¼Œè§†å›¾å¼•æ“ä¼šé»˜è®¤è¿”å›200çŠ¶æ€ç (å¯¹äº404å’Œ500é¡µé¢å¿…é¡»æŒ‡å®šçŠ¶æ€ç )<br>ä¸‹é¢ï¼Œæˆ‘ä»¬å†æ¬¡é‡å¯æœåŠ¡å™¨</p>\n<pre><code>node app.js\n</code></pre><p>æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923e.png\" alt=\"ä½¿ç”¨è«æ¿å¼•æ“çš„é¦–é¡µ\"> <img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923f.png\" alt=\"ä½¿ç”¨è«æ¿å¼•æ“çš„å…³äºé¡µé¢\"></p>\n<h1 id=\"è§†å›¾å’Œé™æ€èµ„æº\"><a href=\"#è§†å›¾å’Œé™æ€èµ„æº\" class=\"headerlink\" title=\"è§†å›¾å’Œé™æ€èµ„æº\"></a>è§†å›¾å’Œé™æ€èµ„æº</h1><p>æˆ‘ä»¬åœ¨åšè§†å›¾çš„æ—¶å€™ï¼Œæ€»æ˜¯ä¼šä½¿ç”¨å¸¦é™æ€èµ„æºï¼Œæ¯”å¦‚å›¾ç‰‡ã€cssã€javascriptæ–‡ä»¶ç­‰ï¼Œexpressæ˜¯é staticä¸­é—´ä»¶ç®¡ç†é™æ€èµ„æºçš„ï¼Œå®ƒå¯ä»¥æŠŠä¸€ä¸ªæˆ–å¤šä¸ªç›®å½•æŒ‡æ´¾æˆåŒ…å«é™æ€èµ„æºçš„ç›®å½•ï¼Œå…¶ä¸­çš„èµ„æºä¸ç»è¿‡ä»»ä½•å¤„ç†ç›´æ¥å‘ç»™å®¢æˆ·ç«¯ã€‚</p>\n<p>åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º <em> public </em> ç›®å½•ï¼Œæ¥ä¸‹æ¥ï¼Œåœ¨æ‰€æœ‰è·¯ç”±ä»¥åŠä¸­é—´ä»¶ä¹‹å‰åŠ å…¥staticä¸­é—´ä»¶ï¼š</p>\n<pre><code>app.use(express.static(__dirname + &#39;/public&#39;));\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œåœ¨publicç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ªimgå­ç›®å½•ï¼Œå¹¶ç…§ä¸€å¼ å›¾ç‰‡æ”¾å…¥è¯¥ç›®å½•ä¸‹ï¼ˆå¦‚ï¼šlogo.pngï¼‰ï¼Œä¹‹åä¿®æ”¹main.handlebarså¸ƒå±€æ–‡ä»¶</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;é»˜è®¤å¸ƒå±€&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;img src=&quot;/img/logo.png&quot; alt=&quot;LOGO&quot; /&gt;\n    &lt;h1&gt;é»˜è®¤å¸ƒå±€å“¦å“¦å“¦å“¦&lt;/h1&gt;\n    {{{body}}}\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>é‡å¯nodeæœåŠ¡</p>\n<pre><code>node app.js\n</code></pre><p>è®¿é—®ä¸»é¡µé¢ï¼Œæ˜¯ä¸æ˜¯çœ‹åˆ°äº†é™æ€èµ„æºå›¾ç‰‡ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923g.png\" alt=\"é™æ€èµ„æºå›¾ç‰‡\"></p>\n<p>å¥½å•¦ï¼Œè¿™å°±æ˜¯expressæ­å»ºé¡¹ç›®çš„åŸºæœ¬ä½¿ç”¨ï¼Œä½ è¿˜å¯ä»¥åœ¨publicç›®å½•ä¸‹é¢åˆ›å»ºç±»ä¼¼äºcssï¼Œjsè¿™æ ·çš„å­ç›®å½•ï¼Œå­˜æ”¾å¯¹åº”çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œæ›´å¤šæœ‰å…³äºexpressçš„å†…å®¹ï¼Œå¯ä»¥ç»§ç»­å…³æ³¨æˆ‘çš„åšå®¢ï¼Œæˆ–è€…<a href=\"http://expressjs.com/\" target=\"_blank\" rel=\"external\">express</a>å®˜ç½‘</p>\n","site":{"data":{}},"excerpt":"<h1 id=\"åˆè¯†Express\"><a href=\"#åˆè¯†Express\" class=\"headerlink\" title=\"åˆè¯†Express\"></a>åˆè¯†Express</h1><p><a href=\"http://expressjs.com/\" target=\"_blank\" rel=\"external\">Express</a>çš„å®˜ç½‘ä¸Šæ˜¯è¿™æ ·ä»‹ç»çš„ï¼šâ€œç²¾ç®€çš„ã€çµæ´»çš„Node.js Webç¨‹åºæ¡†æ¶â€ã€‚<br>expressçš„å“²å­¦æ˜¯â€œå°‘å³æ˜¯å¤šâ€ï¼Œexpressæ˜¯å¯æ‰©å±•çš„ï¼Œä»–åªå……å½“ä½ å’ŒæœåŠ¡å™¨ä¹‹é—´è–„è–„çš„ä¸€å±‚ï¼Œè¿™å¹¶ä¸æ˜¯è¯´å®ƒä¸å¥å£®ï¼Œè€Œæ˜¯å°½é‡å°‘å¹²é¢„ä½ ï¼Œè®©ä½ èƒ½å¤Ÿå……åˆ†è¡¨è¾¾è‡ªå·±çš„æ€æƒ³ã€‚</p>","more":"<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œé¦–å…ˆè¦ç¡®è®¤ä½ å¯¹nodeæœ‰ä¸€å®šçš„äº†è§£ï¼Œä»¥åŠä½ çš„ç”µè„‘ä¸Šå·²ç»å®‰è£…äº†nodeï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¼€å§‹å§ã€‚<br>æ—¢ç„¶æ˜¯ä½¿ç”¨expressä»é›¶æ­å»ºé¡¹ç›®ï¼Œé‚£ä¹ˆç¬¬ä¸€æ­¥æˆ‘ä»¬åº”è¯¥åˆ›å»ºè‡ªå·±çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¹Ÿå«æ ¹ç›®å½•æˆ–è€…é¡¹ç›®ç›®å½•ï¼ˆä¸€ä¸‹ç»Ÿç§°ä¸ºé¡¹ç›®ç›®å½•ï¼‰ï¼š</p>\n<pre><code>mkdir learnexpress\ncd learnexpress\n</code></pre><p>npm(åŒ…ç®¡ç†å·¥å…·)æ˜¯åŸºäºpackage.jsonæ–‡ä»¶ç®¡ç†é¡¹ç›®çš„ä¾èµ–ä»¥åŠé¡¹ç›®çš„å…ƒæ•°æ®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åˆ›å»ºpackage.jsonè¿™ä¸ªæ–‡ä»¶ï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯å…ˆé¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œ</p>\n<pre><code>npm init\n</code></pre><p>æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œç»ˆç«¯ä¼šæå‡ºä¸€äº›åˆ—é—®é¢˜ï¼Œæ¥å¸®åŠ©ä½ å®Œæˆè¿™ä¸ªæ–‡ä»¶ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923a.png\" alt=\"npm init\"> </p>\n<p>ä¸è¿‡æˆ‘ä»¬å¯ä»¥ä¸€è·¯å›è½¦ï¼Œä¸éœ€è¦å¡«å†™ä»»ä½•ä¿¡æ¯ï¼Œè¿™æ ·å°±ä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«é»˜è®¤ä¿¡æ¯çš„package.jsonæ–‡ä»¶ï¼Œæ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>\n<pre><code>{\n  &quot;name&quot;: &quot;learnexp&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;index.js&quot;,\n  &quot;scripts&quot;: {\n    &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;ISC&quot;\n}\n</code></pre><p>package.jsonæ–‡ä»¶åˆ›å»ºå¥½äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å®‰è£…expressäº†ï¼Œæ‰§è¡Œï¼š</p>\n<pre><code>npm install --save express\n</code></pre><p>è¿è¡Œnpm installä¼šæŠŠæŒ‡å®šåç§°çš„åŒ…å®‰è£…åˆ°node_modulesç›®å½•ä¸‹ï¼Œå¦‚æœä½ ä½¿ç”¨äº† â€“save é€‰é¡¹ï¼Œä»–è¿˜ä¼šæ›´æ–°package.jsonæ–‡ä»¶ï¼Œå°†åŒ…çš„ä¾èµ–å†™å…¥package.jsonï¼Œæ‰“å¼€é¡¹ç›®ç›®å½•ï¼Œä½ ä¼šå‘ç°å¤šäº†ä¸€ä¸ªnode_modulesç›®å½•ï¼Œæ­¤æ—¶å†æ¬¡æ‰“å¼€package.jsonæ–‡ä»¶ï¼Œä¼šå‘ç°æ–‡ä»¶è¢«æ›´æ–°äº†ï¼š</p>\n<pre><code>{\n  &quot;name&quot;: &quot;learnexp&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;index.js&quot;,\n  &quot;scripts&quot;: {\n    &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;ISC&quot;,\n  &quot;dependencies&quot;: {\n    &quot;express&quot;: &quot;^4.13.3&quot;\n  }\n}\n</code></pre><p>expressä¹Ÿå®‰è£…å¥½äº†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å†™é¡¹ç›®äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç¬¬ä¸€æ­¥éœ€è¦åšçš„äº‹æƒ…æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸ç®¡ä»»ä½•ä¸€ä¸ªé¡¹ç›®éƒ½éœ€è¦ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯å†™å…¥å£æ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ªjsæ–‡ä»¶ï¼Œæ–‡ä»¶åç§°è‡ªå®šä¹‰ï¼Œä½†æ˜¯æœ€å¥½ä»¥ä½ çš„é¡¹ç›®åç§°å»å‘½åï¼Œè¿™é‡Œæˆ‘ä»¬å°±å«app.jsä½œä¸ºæˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹ä»£ç </p>\n<pre><code>// å¼•å…¥expressæ¨¡å—\nvar express = require(&#39;express&#39;);\n\n// è°ƒç”¨express()æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡\nvar app = express();\n\n// è®¾ç½®ç«¯å£\napp.set(&#39;port&#39;, process.env.PORT || 3000);\n\n// ä¸­é—´ä»¶ å®šåˆ¶404é¡µé¢\napp.use(function(req, res){\n    res.type(&#39;text/plain&#39;);\n    res.status(404);\n    res.send(&#39;404 - Not Found&#39;);\n});\n\n// ä¸­é—´ä»¶ å®šåˆ¶500é¡µé¢\napp.use(function(req, res){\n    res.type(&#39;text/plain&#39;);\n    res.status(500);\n    res.send(&#39;500 - Server Error&#39;);\n});\n\napp.listen(app.get(&#39;port&#39;), function(){\n    console.log(&#39;expresså¯åŠ¨å¹¶ç›‘å¬&#39; + app.get(&#39;port&#39;) + &#39;ç«¯å£ï¼ŒæŒ‰ Ctrl + C ç»ˆæ­¢&#39;);\n});\n</code></pre><p>å…¥å£æ–‡ä»¶å†™å¥½åï¼Œæˆ‘ä»¬ä¿å­˜æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>\n<pre><code>node app.js\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬çš„ç¨‹åºå°±è·‘èµ·æ¥äº†ï¼Œæ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œè¾“å…¥ <em> localhost:3000 </em>ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923b.png\" alt=\"404\"></p>\n<p>ä¸ºä»€ä¹ˆæ˜¯404ç•Œé¢å‘¢ï¼Ÿå¾ˆç®€å•æˆ‘ä»¬å¹¶æ²¡æœ‰è®¾ç½®ä»»ä½•è·¯ç”±ï¼Œæˆ‘ä»¬çš„å…¥å£æ–‡ä»¶ï¼ˆapp.jsï¼‰ä¸­åªè®¾ç½®äº†404ã€500çš„å¤„ç†ã€‚<br>åœ¨æˆ‘ä»¬ç»™åº”ç”¨ç¨‹åºåŠ ä¸Šè·¯ç”±ä¹‹å‰æˆ‘ä»¬æ¥è¯´ä¸€äº›é—®é¢˜ï¼Œé¦–å…ˆé€šè¿‡æ‰§è¡Œ <em> npm init </em> åˆ›å»ºçš„package.jsonä¸­mainå±æ€§çš„é»˜è®¤å€¼æ˜¯index.jsï¼Œè€Œæˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶æ˜¯app.jsï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ‰‹åŠ¨ä¿®æ”¹package.jsonæ–‡ä»¶çš„mainå±æ€§ä¸ºapp.jsï¼š</p>\n<pre><code>{\n  &quot;name&quot;: &quot;learnexp&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;description&quot;: &quot;&quot;,\n  &quot;main&quot;: &quot;app.js&quot;,\n  &quot;scripts&quot;: {\n    &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;\n  },\n  &quot;author&quot;: &quot;&quot;,\n  &quot;license&quot;: &quot;ISC&quot;,\n  &quot;dependencies&quot;: {\n    &quot;express&quot;: &quot;^4.13.3&quot;\n  }\n}\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»™é¦–é¡µå’Œå…³äºé¡µé¢åŠ ä¸Šè·¯ç”±ï¼Œæ³¨æ„ï¼šè·¯ç”±åº”è¯¥æ”¾åœ¨404å’Œ500å¤„ç†å™¨å‰é¢ï¼š</p>\n<pre><code>// é¦–é¡µè·¯ç”±\napp.get(&#39;/&#39; ,function(req, res){\n    res.type(&#39;text/plain&#39;);\n    res.send(&#39;home&#39;);\n})\n\n// å…³äºé¡µé¢è·¯ç”±\napp.get(&#39;/about&#39; ,function(req, res){\n    res.type(&#39;text/plain&#39;);\n    res.send(&#39;about&#39;);\n})\n\n// ä¸­é—´ä»¶ å®šåˆ¶404é¡µé¢\napp.use(function(req, res){\n    res.type(&#39;text/plain&#39;);\n    res.status(404);\n    res.send(&#39;404 - Not Found&#39;);\n});\n\n........\n</code></pre><p>app.get æ˜¯æˆ‘ä»¬æ·»åŠ çš„è·¯ç”±æ–¹æ³•(å¸¸è§çš„è¿˜æœ‰ app.post )ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è·¯å¾„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°<br>é‡å¯æˆ‘ä»¬çš„nodeæœåŠ¡</p>\n<pre><code>node app.js\n</code></pre><p>æ‰“å¼€æµè§ˆå™¨åˆ†åˆ«è¾“å…¥ <em> localhost:3000 </em> å’Œ <em> localhost:3000/about </em> æ€ä¹ˆæ ·ï¼Œæ˜¯å¦å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923c.png\" alt=\"é¦–é¡µ\"> <img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923d.png\" alt=\"å…³äºé¡µé¢\"></p>\n<h1 id=\"è«æ¿å¼•æ“\"><a href=\"#è«æ¿å¼•æ“\" class=\"headerlink\" title=\"è«æ¿å¼•æ“\"></a>è«æ¿å¼•æ“</h1><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬çš„ç•Œé¢ä¸å¯èƒ½æ€»æ˜¯ä¸€å †æ–‡å­—å§ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥æœ‰æ¼‚äº®çš„æ ·å¼ï¼Œå¼€å‘è¿‡ç¨‹ä¸­æ˜¯ä¸æ˜¯åº”è¯¥æœ‰æ¨¡æ¿å¼•æ“ï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šåŒå­¦å¯¹è«æ¿å¼•æ“æ˜¯ä¸é™Œç”Ÿçš„ã€‚expressæ”¯æŒå¾ˆå¤šç§è«æ¿å¼•æ“ï¼Œä¾‹å¦‚Jadeï¼Œejsç­‰ï¼Œè€Œæˆ‘ä»¬ä»Šå¤©è¦ä»‹ç»çš„æ˜¯ Handlebarsï¼Œä¸ºäº†æ”¯æŒhandlebarsï¼Œæˆ‘ä»¬é¦–å…ˆè¦å®‰è£… express3-handlebars åŒ…ï¼š</p>\n<pre><code>npm install --save express3-handlebars\n</code></pre><p>ç„¶ååœ¨æˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶ä¸­<em> åˆ›å»ºappçš„ä»£ç  </em>ä¹‹ååŠ å…¥ä»¥ä¸‹ä»£ç ï¼š</p>\n<pre><code>var app = express();\n\n// è®¾ç½®handlebarsè«æ¿å¼•æ“\nvar handlebars = require(&#39;express3-handlebars&#39;).create({defaultLayout : &#39;main&#39;});\napp.engine(&#39;handlebars&#39;, handlebars.engine);\napp.set(&#39;view engine&#39;, &#39;handlebars&#39;);\n</code></pre><p>ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œäº† <em> {defaultLayout : â€˜mainâ€™} </em> ï¼Œè¿™å°±æ„å‘³ç€é™¤éæˆ‘ä»¬ç‰¹åˆ«å£°æ˜ï¼Œå¦åˆ™æ‰€æœ‰è§†å›¾éƒ½å°†ä½¿ç”¨main.handlebarsä½œä¸ºé»˜è®¤å¸ƒå±€ï¼Œå¸ƒå±€æ–‡ä»¶é»˜è®¤åœ¨ <em> views/layouts/ </em> ç›®å½•ä¸‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æƒ³é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºviewsç›®å½•ï¼Œå¹¶åœ¨viewsç›®å½•ä¸­åˆ›å»ºlayoutsç›®å½•ï¼Œåœ¨layoutsç›®å½•ä¸­åˆ›å»ºmain.handlebarsæ–‡ä»¶ï¼š</p>\n<pre><code>&lt;!dpcument html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;é»˜è®¤å¸ƒå±€&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;é»˜è®¤å¸ƒå±€å“¦å“¦å“¦å“¦&lt;/h1&gt;\n    {{{body}}}\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ç¼–å†™å¥½é»˜è®¤å¸ƒå±€å¥½ï¼Œæˆ‘ä»¬æ¥åˆ†åˆ«åˆ›å»ºé¦–é¡µé¡µé¢ï¼Œviews/home.handlebars</p>\n<pre><code>&lt;h1&gt;è¿™æ˜¯é¦–é¡µ&lt;/h1&gt;\n</code></pre><p>å…³äºæˆ‘ä»¬é¡µé¢ï¼Œviews/about.handlebars</p>\n<pre><code>&lt;h1&gt;è¿™æ˜¯å…³äºæˆ‘ä»¬é¡µé¢&lt;/h1&gt;\n</code></pre><p>404é¡µé¢ï¼Œviews/404.handlebars</p>\n<pre><code>&lt;h1&gt;è¿™æ˜¯404é¡µé¢&lt;/h1&gt;\n</code></pre><p>500é¡µé¢ï¼Œ500.handlebars</p>\n<pre><code>&lt;h1&gt;è¿™æ˜¯500é¡µé¢&lt;/h1&gt;\n</code></pre><p>ç°åœ¨è§†å›¾ä¹Ÿç¼–å†™å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¿®æ”¹é¡¹ç›®å…¥å£æ–‡ä»¶ä¸­çš„è·¯ç”±å·²ç»404å’Œ500å¤„ç†å™¨ï¼š</p>\n<pre><code>// é¦–é¡µè·¯ç”±\napp.get(&#39;/&#39; ,function(req, res){\n    res.render(&#39;home&#39;);\n})\n\n// å…³äºé¡µé¢è·¯ç”±\napp.get(&#39;/about&#39; ,function(req, res){\n    res.render(&#39;about&#39;);\n})\n\n// ä¸­é—´ä»¶ å®šåˆ¶404é¡µé¢\napp.use(function(req, res){\n    res.status(404);\n    res.render(&#39;404&#39;);\n});\n\n// ä¸­é—´ä»¶ å®šåˆ¶500é¡µé¢\napp.use(function(req, res){\n    res.status(500);\n    res.render(&#39;500&#39;);\n});\n</code></pre><p>æ³¨æ„æˆ‘ä»¬å·²ç»ä¸ç”¨res.typeæŒ‡å®šå†…å®¹ç±»å‹äº†ï¼Œè§†å›¾å¼•æ“é»˜è®¤ä¼šè¿”å› text/html å†…å®¹ç±»å‹ï¼Œä¹Ÿä¸ç”¨ res.status æŒ‡å®šçŠ¶æ€ç äº†ï¼Œè§†å›¾å¼•æ“ä¼šé»˜è®¤è¿”å›200çŠ¶æ€ç (å¯¹äº404å’Œ500é¡µé¢å¿…é¡»æŒ‡å®šçŠ¶æ€ç )<br>ä¸‹é¢ï¼Œæˆ‘ä»¬å†æ¬¡é‡å¯æœåŠ¡å™¨</p>\n<pre><code>node app.js\n</code></pre><p>æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923e.png\" alt=\"ä½¿ç”¨è«æ¿å¼•æ“çš„é¦–é¡µ\"> <img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923f.png\" alt=\"ä½¿ç”¨è«æ¿å¼•æ“çš„å…³äºé¡µé¢\"></p>\n<h1 id=\"è§†å›¾å’Œé™æ€èµ„æº\"><a href=\"#è§†å›¾å’Œé™æ€èµ„æº\" class=\"headerlink\" title=\"è§†å›¾å’Œé™æ€èµ„æº\"></a>è§†å›¾å’Œé™æ€èµ„æº</h1><p>æˆ‘ä»¬åœ¨åšè§†å›¾çš„æ—¶å€™ï¼Œæ€»æ˜¯ä¼šä½¿ç”¨å¸¦é™æ€èµ„æºï¼Œæ¯”å¦‚å›¾ç‰‡ã€cssã€javascriptæ–‡ä»¶ç­‰ï¼Œexpressæ˜¯é staticä¸­é—´ä»¶ç®¡ç†é™æ€èµ„æºçš„ï¼Œå®ƒå¯ä»¥æŠŠä¸€ä¸ªæˆ–å¤šä¸ªç›®å½•æŒ‡æ´¾æˆåŒ…å«é™æ€èµ„æºçš„ç›®å½•ï¼Œå…¶ä¸­çš„èµ„æºä¸ç»è¿‡ä»»ä½•å¤„ç†ç›´æ¥å‘ç»™å®¢æˆ·ç«¯ã€‚</p>\n<p>åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º <em> public </em> ç›®å½•ï¼Œæ¥ä¸‹æ¥ï¼Œåœ¨æ‰€æœ‰è·¯ç”±ä»¥åŠä¸­é—´ä»¶ä¹‹å‰åŠ å…¥staticä¸­é—´ä»¶ï¼š</p>\n<pre><code>app.use(express.static(__dirname + &#39;/public&#39;));\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œåœ¨publicç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ªimgå­ç›®å½•ï¼Œå¹¶ç…§ä¸€å¼ å›¾ç‰‡æ”¾å…¥è¯¥ç›®å½•ä¸‹ï¼ˆå¦‚ï¼šlogo.pngï¼‰ï¼Œä¹‹åä¿®æ”¹main.handlebarså¸ƒå±€æ–‡ä»¶</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;é»˜è®¤å¸ƒå±€&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;img src=&quot;/img/logo.png&quot; alt=&quot;LOGO&quot; /&gt;\n    &lt;h1&gt;é»˜è®¤å¸ƒå±€å“¦å“¦å“¦å“¦&lt;/h1&gt;\n    {{{body}}}\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>é‡å¯nodeæœåŠ¡</p>\n<pre><code>node app.js\n</code></pre><p>è®¿é—®ä¸»é¡µé¢ï¼Œæ˜¯ä¸æ˜¯çœ‹åˆ°äº†é™æ€èµ„æºå›¾ç‰‡ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923g.png\" alt=\"é™æ€èµ„æºå›¾ç‰‡\"></p>\n<p>å¥½å•¦ï¼Œè¿™å°±æ˜¯expressæ­å»ºé¡¹ç›®çš„åŸºæœ¬ä½¿ç”¨ï¼Œä½ è¿˜å¯ä»¥åœ¨publicç›®å½•ä¸‹é¢åˆ›å»ºç±»ä¼¼äºcssï¼Œjsè¿™æ ·çš„å­ç›®å½•ï¼Œå­˜æ”¾å¯¹åº”çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œæ›´å¤šæœ‰å…³äºexpressçš„å†…å®¹ï¼Œå¯ä»¥ç»§ç»­å…³æ³¨æˆ‘çš„åšå®¢ï¼Œæˆ–è€…<a href=\"http://expressjs.com/\" target=\"_blank\" rel=\"external\">express</a>å®˜ç½‘</p>"},{"title":"ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“","date":"2015-09-25T08:03:45.000Z","_content":"\n# ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“åŠæŠ€å·§ #\n\nå·¥ä½œäº†æœ‰ä¸€æ®µæ—¶é—´ï¼ŒåŸºæœ¬ä¸Šéƒ½åœ¨æç§»åŠ¨ç«¯çš„å‰ç«¯å¼€å‘ï¼Œå·¥ä½œçš„è¿‡ç¨‹ä¸­é‡åˆ°è¿‡å¾ˆå¤šé—®é¢˜ï¼Œbugçš„è§£å†³æ–¹æ¡ˆï¼Œè®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿åç”¨ï¼ï¼ï¼å†…å®¹å¹¶ä¸æ˜¯å¾ˆå…¨ï¼Œä»¥åæ¯é‡åˆ°ä¸€ä¸ªé—®é¢˜éƒ½ä¼šæ€»ç»“åœ¨è¿™é‡Œï¼Œåˆ†äº«ç»™å¤§å®¶ï¼\n\n<!-- more -->\n\n# ä¸€ã€metaæ ‡ç­¾ç›¸å…³çŸ¥è¯† #\n\n1ã€ç§»åŠ¨ç«¯é¡µé¢è®¾ç½®è§†å£å®½åº¦ç­‰äºè®¾å¤‡å®½åº¦ï¼Œå¹¶ç¦æ­¢ç¼©æ”¾ã€‚\n\n```\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no\" />\n```\n\n2ã€ç§»åŠ¨ç«¯é¡µé¢è®¾ç½®è§†å£å®½åº¦ç­‰äºå®šå®½ï¼ˆå¦‚640pxï¼‰ï¼Œå¹¶ç¦æ­¢ç¼©æ”¾ï¼Œå¸¸ç”¨äºå¾®ä¿¡æµè§ˆå™¨é¡µé¢ã€‚\n\n```\n<meta name=\"viewport\" content=\"width=640,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no\" />\n```\n\n3ã€ç¦æ­¢å°†é¡µé¢ä¸­çš„æ•°å­—è¯†åˆ«ä¸ºç”µè¯å·ç \n\n```\n<meta name=\"format-detection\" content=\"telephone=no\" />\n```\n\n4ã€å¿½ç•¥Androidå¹³å°ä¸­å¯¹é‚®ç®±åœ°å€çš„è¯†åˆ«\n\n```\n<meta name=\"format-detection\" content=\"email=no\" />\n```\n\n5ã€å½“ç½‘ç«™æ·»åŠ åˆ°ä¸»å±å¹•å¿«é€Ÿå¯åŠ¨æ–¹å¼ï¼Œå¯éšè—åœ°å€æ ï¼Œä»…é’ˆå¯¹iosçš„safari\n\n```\n<meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n<!-- ios7.0ç‰ˆæœ¬ä»¥åï¼Œsafariä¸Šå·²çœ‹ä¸åˆ°æ•ˆæœ -->\n```\n\n6ã€å°†ç½‘ç«™æ·»åŠ åˆ°ä¸»å±å¹•å¿«é€Ÿå¯åŠ¨æ–¹å¼ï¼Œä»…é’ˆå¯¹iosçš„safarié¡¶ç«¯çŠ¶æ€æ¡çš„æ ·å¼\n\n```\n<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n<!-- å¯é€‰defaultã€blackã€black-translucent -->\n```\n\n## viewportè«æ¿ ##\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no\" name=\"viewport\">\n<meta content=\"yes\" name=\"apple-mobile-web-app-capable\">\n<meta content=\"black\" name=\"apple-mobile-web-app-status-bar-style\">\n<meta content=\"telephone=no\" name=\"format-detection\">\n<meta content=\"email=no\" name=\"format-detection\">\n<title>title</title>\n<link rel=\"stylesheet\" href=\"index.css\">\n</head>\n\n<body>\n\tcontent...\n</body>\n\n</html>\n```\n\n# äºŒã€CSSæ ·å¼æŠ€å·§ #\n\n1ã€ç¦æ­¢ioså’Œandroidç”¨æˆ·é€‰ä¸­æ–‡å­—\n\n```\n.css{-webkit-user-select:none}\n```\n\n2ã€ç¦æ­¢iosé•¿æŒ‰æ—¶è§¦å‘ç³»ç»Ÿçš„èœå•ï¼Œç¦æ­¢ios&androidé•¿æŒ‰æ—¶ä¸‹è½½å›¾ç‰‡\n\n```\n.css{-webkit-touch-callout: none}\n```\n\n3ã€webkitå»é™¤è¡¨å•å…ƒç´ çš„é»˜è®¤æ ·å¼\n\n```\n.css{-webkit-appearance:none;}\n```\n\n4ã€ä¿®æ”¹webkitè¡¨å•è¾“å…¥æ¡†placeholderçš„æ ·å¼\n\n```\ninput::-webkit-input-placeholder{color:#AAAAAA;}\ninput:focus::-webkit-input-placeholder{color:#EEEEEE;}\n```\n\n5ã€å»é™¤android a/button/inputæ ‡ç­¾è¢«ç‚¹å‡»æ—¶äº§ç”Ÿçš„è¾¹æ¡† & å»é™¤ios aæ ‡ç­¾è¢«ç‚¹å‡»æ—¶äº§ç”Ÿçš„åŠé€æ˜ç°è‰²èƒŒæ™¯\n\n```\na,button,input{-webkit-tap-highlight-color:rgba(255,0,0,0);}\n```\n\n6ã€iosä½¿ç”¨-webkit-text-size-adjustç¦æ­¢è°ƒæ•´å­—ä½“å¤§å°\n\n```\nbody{-webkit-text-size-adjust: 100%!important;}\n```\n\n7ã€android ä¸Šå»æ‰è¯­éŸ³è¾“å…¥æŒ‰é’®\n\n```\ninput::-webkit-input-speech-button {display: none}\n```\n\n8ã€ç§»åŠ¨ç«¯å®šä¹‰å­—ä½“ï¼Œç§»åŠ¨ç«¯æ²¡æœ‰å¾®è½¯é›…é»‘å­—ä½“\n\n```\n/* ç§»åŠ¨ç«¯å®šä¹‰å­—ä½“çš„ä»£ç  */\nbody{font-family:Helvetica;}\n```\n\n9ã€ç¦ç”¨Webkitå†…æ ¸æµè§ˆå™¨çš„æ–‡å­—å¤§å°è°ƒæ•´åŠŸèƒ½ã€‚\n\n```\n-webkit-text-size-adjust: none;\n```\n\n# ä¸‰ã€å…¶ä»–æŠ€å·§ #\n\n1ã€æ‰‹æœºæ‹ç…§å’Œä¸Šä¼ å›¾ç‰‡\n\n```\n<!-- é€‰æ‹©ç…§ç‰‡ -->\n<input type=file accept=\"image/*\">\n<!-- é€‰æ‹©è§†é¢‘ -->\n<input type=file accept=\"video/*\">\n```\n\n2ã€å–æ¶ˆinputåœ¨iosä¸‹ï¼Œè¾“å…¥çš„æ—¶å€™è‹±æ–‡é¦–å­—æ¯çš„é»˜è®¤å¤§å†™\n\n```\n<input autocapitalize=\"off\" autocorrect=\"off\" />\n```\n\n3ã€æ‰“ç”µè¯å’Œå‘çŸ­ä¿¡\n\n```\n<a href=\"tel:0755-10086\">æ‰“ç”µè¯ç»™:0755-10086</a>\n<a href=\"sms:10086\">å‘çŸ­ä¿¡ç»™: 10086</a>\n```\n\n# å››ã€CSS reset #\n\n```\n/* hcysun  */\n@charset \"utf-8\";\n/* reset */\nhtml{\n\t-webkit-text-size-adjust:none;\n\t-webkit-user-select:none;\n\t-webkit-touch-callout: none\n\tfont-family: Helvetica;\n}\nbody{font-size:12px;}\nbody,h1,h2,h3,h4,h5,h6,p,dl,dd,ul,ol,pre,form,input,textarea,th,td,select{margin:0; padding:0; font-weight: normal;text-indent: 0;}\na,button,input,textarea,select{ background: none; -webkit-tap-highlight-color:rgba(255,0,0,0); outline:none; -webkit-appearance:none;}\nem{font-style:normal}\nli{list-style:none}\na{text-decoration:none;}\nimg{border:none; vertical-align:top;}\ntable{border-collapse:collapse;}\ntextarea{ resize:none; overflow:auto;}\n/* end reset */\n```\n\n# äº”ã€å¸¸ç”¨å…¬ç”¨CSS style #\n\n```\n/* public */\n\n/* æ¸…é™¤æµ®åŠ¨ */\n.clear { zoom:1; }\n.clear:after { content:''; display:block; clear:both; }\n\n/* å®šä¹‰ç›’æ¨¡å‹ä¸ºæ€ªå¼‚å’Œæ¨¡å‹ï¼ˆå®½é«˜ä¸å—è¾¹æ¡†å½±å“ï¼‰ */\n.boxSiz{\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\t-ms-box-sizing: border-box;\n\t-o-box-sizing: border-box;\n\tbox-sizing: border-box;\n}\n\n/* å¼ºåˆ¶æ¢è¡Œ */\n.toWrap{\n\tword-break: break-all;       /* åªå¯¹è‹±æ–‡èµ·ä½œç”¨ï¼Œä»¥å­—æ¯ä½œä¸ºæ¢è¡Œä¾æ®ã€‚ */\n\tword-wrap: break-word;   \t/* åªå¯¹è‹±æ–‡èµ·ä½œç”¨ï¼Œä»¥å•è¯ä½œä¸ºæ¢è¡Œä¾æ®ã€‚*/\n\twhite-space: pre-wrap;     /* åªå¯¹ä¸­æ–‡èµ·ä½œç”¨ï¼Œå¼ºåˆ¶æ¢è¡Œã€‚*/\n}\n\n/* ç¦æ­¢æ¢è¡Œ */\n.noWrap{\n\twhite-space:nowrap;\n}\n\n/* ç¦æ­¢æ¢è¡Œ,è¶…å‡ºçœç•¥å· */\n.noWrapEllipsis{\n\t white-space:nowrap; overflow:hidden; text-overflow:ellipsis;\n}\n\n/* å¤šè¡Œæ˜¾ç¤ºçœç•¥å·ï¼Œlesså†™æ³•ï¼Œ@lineæ˜¯è¡Œæ•° */\n.ellipsisLn(@line) {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: @line;\n}\n\n/* 1px è¾¹æ¡†è§£å†³æ–¹æ¡ˆï¼Œç¤ºä¾‹ä¸­è®¾ç½®ä¸Šè¾¹æ¡†ï¼Œå¯ä»¥è°ƒæ•´ topã€rightã€bottomã€left çš„å€¼åˆ†åˆ«è®¾ç½®ä¸Šä¸‹å·¦å³è¾¹æ¡† */\n#box2:after{\n\tcontent: \" \";\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    height: 1px;\n    border-top: 1px solid #000;\n    color: #C7C7C7;\n    transform-origin: 0 0;\n    transform: scaleY(0.5);\n}\n\n/* æ–‡å­—ä¸¤ç«¯å¯¹é½ */\n.text-justify{\n\ttext-align:justify; \n\ttext-justify:inter-ideograph;\n}\n\n/* å®šä¹‰ç›’æ¨¡å‹ä¸º flexå¸ƒå±€å…¼å®¹å†™æ³•å¹¶è®©å†…å®¹æ°´å¹³å‚ç›´å±…ä¸­ */\n.flex-center{\n\tdisplay: -webkit-box;\n\tdisplay: -moz-box;\n\tdisplay: -ms-flexbox;\n\tdisplay: -o-box;\n\tdisplay: box;\n\n\t-webkit-box-pack: center;\n    -moz-box-pack: center;\n    -ms-flex-pack: center;\n    -o-box-pack: center;\n    box-pack: center;\n\n    -webkit-box-align: center;\n    -moz-box-align: center;\n    -ms-flex-align: center;\n    -o-box-align: center;\n    box-align: center;\n}\n\n/* public end */\n```\n\n# å…­ã€flexå¸ƒå±€ #\n\n1ã€å®šä¹‰å¼¹æ€§ç›’æ¨¡å‹å…¼å®¹å†™æ³•\n\n```\n\n/*\n\tbox\n\tinline-box\n*/\ndisplay: -webkit-box;\ndisplay: -moz-box;\ndisplay: -ms-flexbox;\ndisplay: -o-box;\ndisplay: box;\n```\n\n2ã€box-orient å®šä¹‰ç›’æ¨¡å‹å†…ä¼¸ç¼©é¡¹ç›®çš„å¸ƒå±€æ–¹å‘\n\n```\n/**\n * vertical column\tå‚ç›´\n * horizontal row\tæ°´å¹³ é»˜è®¤å€¼\n */\n-webkit-box-orient: horizontal;\n-moz-box-orient: horizontal;\n-ms-flex-direction: row;\n-o-box-orient: horizontal;\nbox-orient: horizontal;\n```\n\n3ã€box-direction å®šä¹‰ç›’æ¨¡å‹å†…ä¼¸ç¼©é¡¹ç›®çš„æ­£åº(normalé»˜è®¤å€¼)ã€å€’å™(reverse)\n\n```\n/* Firefox */\ndisplay:-moz-box;\n-moz-box-direction:reverse;\n/* Safariã€Opera ä»¥åŠ Chrome */\ndisplay:-webkit-box;\n-webkit-box-direction:reverse;\n```\n\n4ã€box-pack å¯¹ç›’å­æ°´å¹³å¯Œè£•ç©ºé—´çš„ç®¡ç†\n\n```\n/*\n\tstart\n\tend\n\tcenter\n\tjustify\n*/\n-webkit-box-pack: center;\n-moz-box-pack: center;\n-ms-flex-pack: center;\n-o-box-pack: center;\nbox-pack: center;\n```\n\n5ã€box-pack å¯¹ç›’å­å‚ç›´æ–¹å‘å¯Œè£•ç©ºé—´çš„ç®¡ç†\n\n```\n/*\n\tstart\n\tend\n\tcenter\n*/\n/* box-align */\n-webkit-box-align: center;\n-moz-box-align: center;\n-ms-flex-align: center;\n-o-box-align: center;\nbox-align: center;\n```\n\n6ã€å®šä¹‰ä¼¸ç¼©é¡¹ç›®çš„å…·ä½“ä½ç½®\n\n```\n/*-moz-box-ordinal-group:1;*/ /* Firefox */\n/*-webkit-box-ordinal-group:1;*/ /* Safari å’Œ Chrome */\n.box div:nth-of-type(1){-webkit-box-ordinal-group:1;}\n.box div:nth-of-type(2){-webkit-box-ordinal-group:2;}\n.box div:nth-of-type(3){-webkit-box-ordinal-group:3;}\n.box div:nth-of-type(4){-webkit-box-ordinal-group:4;}\n.box div:nth-of-type(5){-webkit-box-ordinal-group:5;}\n```\n\n7ã€å®šä¹‰ä¼¸ç¼©é¡¹ç›®å ç©ºé—´çš„ä»½æ•°\n\n```\n-moz-box-flex:2.0; /* Firefox */\n-webkit-box-flex:2.0; /* Safari å’Œ Chrome */\n\n.box div:nth-of-type(1){-webkit-box-flex:1;}\n.box div:nth-of-type(2){-webkit-box-flex:2;}\n.box div:nth-of-type(3){-webkit-box-flex:3;}\n.box div:nth-of-type(4){-webkit-box-flex:4;}\n.box div:nth-of-type(5){-webkit-box-flex:5;}\n```","source":"_posts/2015/09/25/ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“.md","raw":"title: ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“\ndate: 2015-09-25 16:03:45\ncategories:\n- WebFrontEnd\ntags:\n- html\n- css\n- ç§»åŠ¨é¡µé¢\n---\n\n# ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“åŠæŠ€å·§ #\n\nå·¥ä½œäº†æœ‰ä¸€æ®µæ—¶é—´ï¼ŒåŸºæœ¬ä¸Šéƒ½åœ¨æç§»åŠ¨ç«¯çš„å‰ç«¯å¼€å‘ï¼Œå·¥ä½œçš„è¿‡ç¨‹ä¸­é‡åˆ°è¿‡å¾ˆå¤šé—®é¢˜ï¼Œbugçš„è§£å†³æ–¹æ¡ˆï¼Œè®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿åç”¨ï¼ï¼ï¼å†…å®¹å¹¶ä¸æ˜¯å¾ˆå…¨ï¼Œä»¥åæ¯é‡åˆ°ä¸€ä¸ªé—®é¢˜éƒ½ä¼šæ€»ç»“åœ¨è¿™é‡Œï¼Œåˆ†äº«ç»™å¤§å®¶ï¼\n\n<!-- more -->\n\n# ä¸€ã€metaæ ‡ç­¾ç›¸å…³çŸ¥è¯† #\n\n1ã€ç§»åŠ¨ç«¯é¡µé¢è®¾ç½®è§†å£å®½åº¦ç­‰äºè®¾å¤‡å®½åº¦ï¼Œå¹¶ç¦æ­¢ç¼©æ”¾ã€‚\n\n```\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no\" />\n```\n\n2ã€ç§»åŠ¨ç«¯é¡µé¢è®¾ç½®è§†å£å®½åº¦ç­‰äºå®šå®½ï¼ˆå¦‚640pxï¼‰ï¼Œå¹¶ç¦æ­¢ç¼©æ”¾ï¼Œå¸¸ç”¨äºå¾®ä¿¡æµè§ˆå™¨é¡µé¢ã€‚\n\n```\n<meta name=\"viewport\" content=\"width=640,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no\" />\n```\n\n3ã€ç¦æ­¢å°†é¡µé¢ä¸­çš„æ•°å­—è¯†åˆ«ä¸ºç”µè¯å·ç \n\n```\n<meta name=\"format-detection\" content=\"telephone=no\" />\n```\n\n4ã€å¿½ç•¥Androidå¹³å°ä¸­å¯¹é‚®ç®±åœ°å€çš„è¯†åˆ«\n\n```\n<meta name=\"format-detection\" content=\"email=no\" />\n```\n\n5ã€å½“ç½‘ç«™æ·»åŠ åˆ°ä¸»å±å¹•å¿«é€Ÿå¯åŠ¨æ–¹å¼ï¼Œå¯éšè—åœ°å€æ ï¼Œä»…é’ˆå¯¹iosçš„safari\n\n```\n<meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n<!-- ios7.0ç‰ˆæœ¬ä»¥åï¼Œsafariä¸Šå·²çœ‹ä¸åˆ°æ•ˆæœ -->\n```\n\n6ã€å°†ç½‘ç«™æ·»åŠ åˆ°ä¸»å±å¹•å¿«é€Ÿå¯åŠ¨æ–¹å¼ï¼Œä»…é’ˆå¯¹iosçš„safarié¡¶ç«¯çŠ¶æ€æ¡çš„æ ·å¼\n\n```\n<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n<!-- å¯é€‰defaultã€blackã€black-translucent -->\n```\n\n## viewportè«æ¿ ##\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no\" name=\"viewport\">\n<meta content=\"yes\" name=\"apple-mobile-web-app-capable\">\n<meta content=\"black\" name=\"apple-mobile-web-app-status-bar-style\">\n<meta content=\"telephone=no\" name=\"format-detection\">\n<meta content=\"email=no\" name=\"format-detection\">\n<title>title</title>\n<link rel=\"stylesheet\" href=\"index.css\">\n</head>\n\n<body>\n\tcontent...\n</body>\n\n</html>\n```\n\n# äºŒã€CSSæ ·å¼æŠ€å·§ #\n\n1ã€ç¦æ­¢ioså’Œandroidç”¨æˆ·é€‰ä¸­æ–‡å­—\n\n```\n.css{-webkit-user-select:none}\n```\n\n2ã€ç¦æ­¢iosé•¿æŒ‰æ—¶è§¦å‘ç³»ç»Ÿçš„èœå•ï¼Œç¦æ­¢ios&androidé•¿æŒ‰æ—¶ä¸‹è½½å›¾ç‰‡\n\n```\n.css{-webkit-touch-callout: none}\n```\n\n3ã€webkitå»é™¤è¡¨å•å…ƒç´ çš„é»˜è®¤æ ·å¼\n\n```\n.css{-webkit-appearance:none;}\n```\n\n4ã€ä¿®æ”¹webkitè¡¨å•è¾“å…¥æ¡†placeholderçš„æ ·å¼\n\n```\ninput::-webkit-input-placeholder{color:#AAAAAA;}\ninput:focus::-webkit-input-placeholder{color:#EEEEEE;}\n```\n\n5ã€å»é™¤android a/button/inputæ ‡ç­¾è¢«ç‚¹å‡»æ—¶äº§ç”Ÿçš„è¾¹æ¡† & å»é™¤ios aæ ‡ç­¾è¢«ç‚¹å‡»æ—¶äº§ç”Ÿçš„åŠé€æ˜ç°è‰²èƒŒæ™¯\n\n```\na,button,input{-webkit-tap-highlight-color:rgba(255,0,0,0);}\n```\n\n6ã€iosä½¿ç”¨-webkit-text-size-adjustç¦æ­¢è°ƒæ•´å­—ä½“å¤§å°\n\n```\nbody{-webkit-text-size-adjust: 100%!important;}\n```\n\n7ã€android ä¸Šå»æ‰è¯­éŸ³è¾“å…¥æŒ‰é’®\n\n```\ninput::-webkit-input-speech-button {display: none}\n```\n\n8ã€ç§»åŠ¨ç«¯å®šä¹‰å­—ä½“ï¼Œç§»åŠ¨ç«¯æ²¡æœ‰å¾®è½¯é›…é»‘å­—ä½“\n\n```\n/* ç§»åŠ¨ç«¯å®šä¹‰å­—ä½“çš„ä»£ç  */\nbody{font-family:Helvetica;}\n```\n\n9ã€ç¦ç”¨Webkitå†…æ ¸æµè§ˆå™¨çš„æ–‡å­—å¤§å°è°ƒæ•´åŠŸèƒ½ã€‚\n\n```\n-webkit-text-size-adjust: none;\n```\n\n# ä¸‰ã€å…¶ä»–æŠ€å·§ #\n\n1ã€æ‰‹æœºæ‹ç…§å’Œä¸Šä¼ å›¾ç‰‡\n\n```\n<!-- é€‰æ‹©ç…§ç‰‡ -->\n<input type=file accept=\"image/*\">\n<!-- é€‰æ‹©è§†é¢‘ -->\n<input type=file accept=\"video/*\">\n```\n\n2ã€å–æ¶ˆinputåœ¨iosä¸‹ï¼Œè¾“å…¥çš„æ—¶å€™è‹±æ–‡é¦–å­—æ¯çš„é»˜è®¤å¤§å†™\n\n```\n<input autocapitalize=\"off\" autocorrect=\"off\" />\n```\n\n3ã€æ‰“ç”µè¯å’Œå‘çŸ­ä¿¡\n\n```\n<a href=\"tel:0755-10086\">æ‰“ç”µè¯ç»™:0755-10086</a>\n<a href=\"sms:10086\">å‘çŸ­ä¿¡ç»™: 10086</a>\n```\n\n# å››ã€CSS reset #\n\n```\n/* hcysun  */\n@charset \"utf-8\";\n/* reset */\nhtml{\n\t-webkit-text-size-adjust:none;\n\t-webkit-user-select:none;\n\t-webkit-touch-callout: none\n\tfont-family: Helvetica;\n}\nbody{font-size:12px;}\nbody,h1,h2,h3,h4,h5,h6,p,dl,dd,ul,ol,pre,form,input,textarea,th,td,select{margin:0; padding:0; font-weight: normal;text-indent: 0;}\na,button,input,textarea,select{ background: none; -webkit-tap-highlight-color:rgba(255,0,0,0); outline:none; -webkit-appearance:none;}\nem{font-style:normal}\nli{list-style:none}\na{text-decoration:none;}\nimg{border:none; vertical-align:top;}\ntable{border-collapse:collapse;}\ntextarea{ resize:none; overflow:auto;}\n/* end reset */\n```\n\n# äº”ã€å¸¸ç”¨å…¬ç”¨CSS style #\n\n```\n/* public */\n\n/* æ¸…é™¤æµ®åŠ¨ */\n.clear { zoom:1; }\n.clear:after { content:''; display:block; clear:both; }\n\n/* å®šä¹‰ç›’æ¨¡å‹ä¸ºæ€ªå¼‚å’Œæ¨¡å‹ï¼ˆå®½é«˜ä¸å—è¾¹æ¡†å½±å“ï¼‰ */\n.boxSiz{\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\t-ms-box-sizing: border-box;\n\t-o-box-sizing: border-box;\n\tbox-sizing: border-box;\n}\n\n/* å¼ºåˆ¶æ¢è¡Œ */\n.toWrap{\n\tword-break: break-all;       /* åªå¯¹è‹±æ–‡èµ·ä½œç”¨ï¼Œä»¥å­—æ¯ä½œä¸ºæ¢è¡Œä¾æ®ã€‚ */\n\tword-wrap: break-word;   \t/* åªå¯¹è‹±æ–‡èµ·ä½œç”¨ï¼Œä»¥å•è¯ä½œä¸ºæ¢è¡Œä¾æ®ã€‚*/\n\twhite-space: pre-wrap;     /* åªå¯¹ä¸­æ–‡èµ·ä½œç”¨ï¼Œå¼ºåˆ¶æ¢è¡Œã€‚*/\n}\n\n/* ç¦æ­¢æ¢è¡Œ */\n.noWrap{\n\twhite-space:nowrap;\n}\n\n/* ç¦æ­¢æ¢è¡Œ,è¶…å‡ºçœç•¥å· */\n.noWrapEllipsis{\n\t white-space:nowrap; overflow:hidden; text-overflow:ellipsis;\n}\n\n/* å¤šè¡Œæ˜¾ç¤ºçœç•¥å·ï¼Œlesså†™æ³•ï¼Œ@lineæ˜¯è¡Œæ•° */\n.ellipsisLn(@line) {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: @line;\n}\n\n/* 1px è¾¹æ¡†è§£å†³æ–¹æ¡ˆï¼Œç¤ºä¾‹ä¸­è®¾ç½®ä¸Šè¾¹æ¡†ï¼Œå¯ä»¥è°ƒæ•´ topã€rightã€bottomã€left çš„å€¼åˆ†åˆ«è®¾ç½®ä¸Šä¸‹å·¦å³è¾¹æ¡† */\n#box2:after{\n\tcontent: \" \";\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    height: 1px;\n    border-top: 1px solid #000;\n    color: #C7C7C7;\n    transform-origin: 0 0;\n    transform: scaleY(0.5);\n}\n\n/* æ–‡å­—ä¸¤ç«¯å¯¹é½ */\n.text-justify{\n\ttext-align:justify; \n\ttext-justify:inter-ideograph;\n}\n\n/* å®šä¹‰ç›’æ¨¡å‹ä¸º flexå¸ƒå±€å…¼å®¹å†™æ³•å¹¶è®©å†…å®¹æ°´å¹³å‚ç›´å±…ä¸­ */\n.flex-center{\n\tdisplay: -webkit-box;\n\tdisplay: -moz-box;\n\tdisplay: -ms-flexbox;\n\tdisplay: -o-box;\n\tdisplay: box;\n\n\t-webkit-box-pack: center;\n    -moz-box-pack: center;\n    -ms-flex-pack: center;\n    -o-box-pack: center;\n    box-pack: center;\n\n    -webkit-box-align: center;\n    -moz-box-align: center;\n    -ms-flex-align: center;\n    -o-box-align: center;\n    box-align: center;\n}\n\n/* public end */\n```\n\n# å…­ã€flexå¸ƒå±€ #\n\n1ã€å®šä¹‰å¼¹æ€§ç›’æ¨¡å‹å…¼å®¹å†™æ³•\n\n```\n\n/*\n\tbox\n\tinline-box\n*/\ndisplay: -webkit-box;\ndisplay: -moz-box;\ndisplay: -ms-flexbox;\ndisplay: -o-box;\ndisplay: box;\n```\n\n2ã€box-orient å®šä¹‰ç›’æ¨¡å‹å†…ä¼¸ç¼©é¡¹ç›®çš„å¸ƒå±€æ–¹å‘\n\n```\n/**\n * vertical column\tå‚ç›´\n * horizontal row\tæ°´å¹³ é»˜è®¤å€¼\n */\n-webkit-box-orient: horizontal;\n-moz-box-orient: horizontal;\n-ms-flex-direction: row;\n-o-box-orient: horizontal;\nbox-orient: horizontal;\n```\n\n3ã€box-direction å®šä¹‰ç›’æ¨¡å‹å†…ä¼¸ç¼©é¡¹ç›®çš„æ­£åº(normalé»˜è®¤å€¼)ã€å€’å™(reverse)\n\n```\n/* Firefox */\ndisplay:-moz-box;\n-moz-box-direction:reverse;\n/* Safariã€Opera ä»¥åŠ Chrome */\ndisplay:-webkit-box;\n-webkit-box-direction:reverse;\n```\n\n4ã€box-pack å¯¹ç›’å­æ°´å¹³å¯Œè£•ç©ºé—´çš„ç®¡ç†\n\n```\n/*\n\tstart\n\tend\n\tcenter\n\tjustify\n*/\n-webkit-box-pack: center;\n-moz-box-pack: center;\n-ms-flex-pack: center;\n-o-box-pack: center;\nbox-pack: center;\n```\n\n5ã€box-pack å¯¹ç›’å­å‚ç›´æ–¹å‘å¯Œè£•ç©ºé—´çš„ç®¡ç†\n\n```\n/*\n\tstart\n\tend\n\tcenter\n*/\n/* box-align */\n-webkit-box-align: center;\n-moz-box-align: center;\n-ms-flex-align: center;\n-o-box-align: center;\nbox-align: center;\n```\n\n6ã€å®šä¹‰ä¼¸ç¼©é¡¹ç›®çš„å…·ä½“ä½ç½®\n\n```\n/*-moz-box-ordinal-group:1;*/ /* Firefox */\n/*-webkit-box-ordinal-group:1;*/ /* Safari å’Œ Chrome */\n.box div:nth-of-type(1){-webkit-box-ordinal-group:1;}\n.box div:nth-of-type(2){-webkit-box-ordinal-group:2;}\n.box div:nth-of-type(3){-webkit-box-ordinal-group:3;}\n.box div:nth-of-type(4){-webkit-box-ordinal-group:4;}\n.box div:nth-of-type(5){-webkit-box-ordinal-group:5;}\n```\n\n7ã€å®šä¹‰ä¼¸ç¼©é¡¹ç›®å ç©ºé—´çš„ä»½æ•°\n\n```\n-moz-box-flex:2.0; /* Firefox */\n-webkit-box-flex:2.0; /* Safari å’Œ Chrome */\n\n.box div:nth-of-type(1){-webkit-box-flex:1;}\n.box div:nth-of-type(2){-webkit-box-flex:2;}\n.box div:nth-of-type(3){-webkit-box-flex:3;}\n.box div:nth-of-type(4){-webkit-box-flex:4;}\n.box div:nth-of-type(5){-webkit-box-flex:5;}\n```","slug":"ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“","published":1,"updated":"2017-03-08T08:24:41.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx511000347fygxh8hc8j","content":"<h1 id=\"ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“åŠæŠ€å·§\"><a href=\"#ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“åŠæŠ€å·§\" class=\"headerlink\" title=\"ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“åŠæŠ€å·§\"></a>ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“åŠæŠ€å·§</h1><p>å·¥ä½œäº†æœ‰ä¸€æ®µæ—¶é—´ï¼ŒåŸºæœ¬ä¸Šéƒ½åœ¨æç§»åŠ¨ç«¯çš„å‰ç«¯å¼€å‘ï¼Œå·¥ä½œçš„è¿‡ç¨‹ä¸­é‡åˆ°è¿‡å¾ˆå¤šé—®é¢˜ï¼Œbugçš„è§£å†³æ–¹æ¡ˆï¼Œè®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿åç”¨ï¼ï¼ï¼å†…å®¹å¹¶ä¸æ˜¯å¾ˆå…¨ï¼Œä»¥åæ¯é‡åˆ°ä¸€ä¸ªé—®é¢˜éƒ½ä¼šæ€»ç»“åœ¨è¿™é‡Œï¼Œåˆ†äº«ç»™å¤§å®¶ï¼</p>\n<a id=\"more\"></a>\n<h1 id=\"ä¸€ã€metaæ ‡ç­¾ç›¸å…³çŸ¥è¯†\"><a href=\"#ä¸€ã€metaæ ‡ç­¾ç›¸å…³çŸ¥è¯†\" class=\"headerlink\" title=\"ä¸€ã€metaæ ‡ç­¾ç›¸å…³çŸ¥è¯†\"></a>ä¸€ã€metaæ ‡ç­¾ç›¸å…³çŸ¥è¯†</h1><p>1ã€ç§»åŠ¨ç«¯é¡µé¢è®¾ç½®è§†å£å®½åº¦ç­‰äºè®¾å¤‡å®½åº¦ï¼Œå¹¶ç¦æ­¢ç¼©æ”¾ã€‚</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; /&gt;\n</code></pre><p>2ã€ç§»åŠ¨ç«¯é¡µé¢è®¾ç½®è§†å£å®½åº¦ç­‰äºå®šå®½ï¼ˆå¦‚640pxï¼‰ï¼Œå¹¶ç¦æ­¢ç¼©æ”¾ï¼Œå¸¸ç”¨äºå¾®ä¿¡æµè§ˆå™¨é¡µé¢ã€‚</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=640,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; /&gt;\n</code></pre><p>3ã€ç¦æ­¢å°†é¡µé¢ä¸­çš„æ•°å­—è¯†åˆ«ä¸ºç”µè¯å·ç </p>\n<pre><code>&lt;meta name=&quot;format-detection&quot; content=&quot;telephone=no&quot; /&gt;\n</code></pre><p>4ã€å¿½ç•¥Androidå¹³å°ä¸­å¯¹é‚®ç®±åœ°å€çš„è¯†åˆ«</p>\n<pre><code>&lt;meta name=&quot;format-detection&quot; content=&quot;email=no&quot; /&gt;\n</code></pre><p>5ã€å½“ç½‘ç«™æ·»åŠ åˆ°ä¸»å±å¹•å¿«é€Ÿå¯åŠ¨æ–¹å¼ï¼Œå¯éšè—åœ°å€æ ï¼Œä»…é’ˆå¯¹iosçš„safari</p>\n<pre><code>&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot; /&gt;\n&lt;!-- ios7.0ç‰ˆæœ¬ä»¥åï¼Œsafariä¸Šå·²çœ‹ä¸åˆ°æ•ˆæœ --&gt;\n</code></pre><p>6ã€å°†ç½‘ç«™æ·»åŠ åˆ°ä¸»å±å¹•å¿«é€Ÿå¯åŠ¨æ–¹å¼ï¼Œä»…é’ˆå¯¹iosçš„safarié¡¶ç«¯çŠ¶æ€æ¡çš„æ ·å¼</p>\n<pre><code>&lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black&quot; /&gt;\n&lt;!-- å¯é€‰defaultã€blackã€black-translucent --&gt;\n</code></pre><h2 id=\"viewportè«æ¿\"><a href=\"#viewportè«æ¿\" class=\"headerlink\" title=\"viewportè«æ¿\"></a>viewportè«æ¿</h2><pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;utf-8&quot;&gt;\n&lt;meta content=&quot;width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; name=&quot;viewport&quot;&gt;\n&lt;meta content=&quot;yes&quot; name=&quot;apple-mobile-web-app-capable&quot;&gt;\n&lt;meta content=&quot;black&quot; name=&quot;apple-mobile-web-app-status-bar-style&quot;&gt;\n&lt;meta content=&quot;telephone=no&quot; name=&quot;format-detection&quot;&gt;\n&lt;meta content=&quot;email=no&quot; name=&quot;format-detection&quot;&gt;\n&lt;title&gt;title&lt;/title&gt;\n&lt;link rel=&quot;stylesheet&quot; href=&quot;index.css&quot;&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    content...\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre><h1 id=\"äºŒã€CSSæ ·å¼æŠ€å·§\"><a href=\"#äºŒã€CSSæ ·å¼æŠ€å·§\" class=\"headerlink\" title=\"äºŒã€CSSæ ·å¼æŠ€å·§\"></a>äºŒã€CSSæ ·å¼æŠ€å·§</h1><p>1ã€ç¦æ­¢ioså’Œandroidç”¨æˆ·é€‰ä¸­æ–‡å­—</p>\n<pre><code>.css{-webkit-user-select:none}\n</code></pre><p>2ã€ç¦æ­¢iosé•¿æŒ‰æ—¶è§¦å‘ç³»ç»Ÿçš„èœå•ï¼Œç¦æ­¢ios&amp;androidé•¿æŒ‰æ—¶ä¸‹è½½å›¾ç‰‡</p>\n<pre><code>.css{-webkit-touch-callout: none}\n</code></pre><p>3ã€webkitå»é™¤è¡¨å•å…ƒç´ çš„é»˜è®¤æ ·å¼</p>\n<pre><code>.css{-webkit-appearance:none;}\n</code></pre><p>4ã€ä¿®æ”¹webkitè¡¨å•è¾“å…¥æ¡†placeholderçš„æ ·å¼</p>\n<pre><code>input::-webkit-input-placeholder{color:#AAAAAA;}\ninput:focus::-webkit-input-placeholder{color:#EEEEEE;}\n</code></pre><p>5ã€å»é™¤android a/button/inputæ ‡ç­¾è¢«ç‚¹å‡»æ—¶äº§ç”Ÿçš„è¾¹æ¡† &amp; å»é™¤ios aæ ‡ç­¾è¢«ç‚¹å‡»æ—¶äº§ç”Ÿçš„åŠé€æ˜ç°è‰²èƒŒæ™¯</p>\n<pre><code>a,button,input{-webkit-tap-highlight-color:rgba(255,0,0,0);}\n</code></pre><p>6ã€iosä½¿ç”¨-webkit-text-size-adjustç¦æ­¢è°ƒæ•´å­—ä½“å¤§å°</p>\n<pre><code>body{-webkit-text-size-adjust: 100%!important;}\n</code></pre><p>7ã€android ä¸Šå»æ‰è¯­éŸ³è¾“å…¥æŒ‰é’®</p>\n<pre><code>input::-webkit-input-speech-button {display: none}\n</code></pre><p>8ã€ç§»åŠ¨ç«¯å®šä¹‰å­—ä½“ï¼Œç§»åŠ¨ç«¯æ²¡æœ‰å¾®è½¯é›…é»‘å­—ä½“</p>\n<pre><code>/* ç§»åŠ¨ç«¯å®šä¹‰å­—ä½“çš„ä»£ç  */\nbody{font-family:Helvetica;}\n</code></pre><p>9ã€ç¦ç”¨Webkitå†…æ ¸æµè§ˆå™¨çš„æ–‡å­—å¤§å°è°ƒæ•´åŠŸèƒ½ã€‚</p>\n<pre><code>-webkit-text-size-adjust: none;\n</code></pre><h1 id=\"ä¸‰ã€å…¶ä»–æŠ€å·§\"><a href=\"#ä¸‰ã€å…¶ä»–æŠ€å·§\" class=\"headerlink\" title=\"ä¸‰ã€å…¶ä»–æŠ€å·§\"></a>ä¸‰ã€å…¶ä»–æŠ€å·§</h1><p>1ã€æ‰‹æœºæ‹ç…§å’Œä¸Šä¼ å›¾ç‰‡</p>\n<pre><code>&lt;!-- é€‰æ‹©ç…§ç‰‡ --&gt;\n&lt;input type=file accept=&quot;image/*&quot;&gt;\n&lt;!-- é€‰æ‹©è§†é¢‘ --&gt;\n&lt;input type=file accept=&quot;video/*&quot;&gt;\n</code></pre><p>2ã€å–æ¶ˆinputåœ¨iosä¸‹ï¼Œè¾“å…¥çš„æ—¶å€™è‹±æ–‡é¦–å­—æ¯çš„é»˜è®¤å¤§å†™</p>\n<pre><code>&lt;input autocapitalize=&quot;off&quot; autocorrect=&quot;off&quot; /&gt;\n</code></pre><p>3ã€æ‰“ç”µè¯å’Œå‘çŸ­ä¿¡</p>\n<pre><code>&lt;a href=&quot;tel:0755-10086&quot;&gt;æ‰“ç”µè¯ç»™:0755-10086&lt;/a&gt;\n&lt;a href=&quot;sms:10086&quot;&gt;å‘çŸ­ä¿¡ç»™: 10086&lt;/a&gt;\n</code></pre><h1 id=\"å››ã€CSS-reset\"><a href=\"#å››ã€CSS-reset\" class=\"headerlink\" title=\"å››ã€CSS reset\"></a>å››ã€CSS reset</h1><pre><code>/* hcysun  */\n@charset &quot;utf-8&quot;;\n/* reset */\nhtml{\n    -webkit-text-size-adjust:none;\n    -webkit-user-select:none;\n    -webkit-touch-callout: none\n    font-family: Helvetica;\n}\nbody{font-size:12px;}\nbody,h1,h2,h3,h4,h5,h6,p,dl,dd,ul,ol,pre,form,input,textarea,th,td,select{margin:0; padding:0; font-weight: normal;text-indent: 0;}\na,button,input,textarea,select{ background: none; -webkit-tap-highlight-color:rgba(255,0,0,0); outline:none; -webkit-appearance:none;}\nem{font-style:normal}\nli{list-style:none}\na{text-decoration:none;}\nimg{border:none; vertical-align:top;}\ntable{border-collapse:collapse;}\ntextarea{ resize:none; overflow:auto;}\n/* end reset */\n</code></pre><h1 id=\"äº”ã€å¸¸ç”¨å…¬ç”¨CSS-style\"><a href=\"#äº”ã€å¸¸ç”¨å…¬ç”¨CSS-style\" class=\"headerlink\" title=\"äº”ã€å¸¸ç”¨å…¬ç”¨CSS style\"></a>äº”ã€å¸¸ç”¨å…¬ç”¨CSS style</h1><pre><code>/* public */\n\n/* æ¸…é™¤æµ®åŠ¨ */\n.clear { zoom:1; }\n.clear:after { content:&#39;&#39;; display:block; clear:both; }\n\n/* å®šä¹‰ç›’æ¨¡å‹ä¸ºæ€ªå¼‚å’Œæ¨¡å‹ï¼ˆå®½é«˜ä¸å—è¾¹æ¡†å½±å“ï¼‰ */\n.boxSiz{\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -ms-box-sizing: border-box;\n    -o-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n/* å¼ºåˆ¶æ¢è¡Œ */\n.toWrap{\n    word-break: break-all;       /* åªå¯¹è‹±æ–‡èµ·ä½œç”¨ï¼Œä»¥å­—æ¯ä½œä¸ºæ¢è¡Œä¾æ®ã€‚ */\n    word-wrap: break-word;       /* åªå¯¹è‹±æ–‡èµ·ä½œç”¨ï¼Œä»¥å•è¯ä½œä¸ºæ¢è¡Œä¾æ®ã€‚*/\n    white-space: pre-wrap;     /* åªå¯¹ä¸­æ–‡èµ·ä½œç”¨ï¼Œå¼ºåˆ¶æ¢è¡Œã€‚*/\n}\n\n/* ç¦æ­¢æ¢è¡Œ */\n.noWrap{\n    white-space:nowrap;\n}\n\n/* ç¦æ­¢æ¢è¡Œ,è¶…å‡ºçœç•¥å· */\n.noWrapEllipsis{\n     white-space:nowrap; overflow:hidden; text-overflow:ellipsis;\n}\n\n/* å¤šè¡Œæ˜¾ç¤ºçœç•¥å·ï¼Œlesså†™æ³•ï¼Œ@lineæ˜¯è¡Œæ•° */\n.ellipsisLn(@line) {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: @line;\n}\n\n/* 1px è¾¹æ¡†è§£å†³æ–¹æ¡ˆï¼Œç¤ºä¾‹ä¸­è®¾ç½®ä¸Šè¾¹æ¡†ï¼Œå¯ä»¥è°ƒæ•´ topã€rightã€bottomã€left çš„å€¼åˆ†åˆ«è®¾ç½®ä¸Šä¸‹å·¦å³è¾¹æ¡† */\n#box2:after{\n    content: &quot; &quot;;\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    height: 1px;\n    border-top: 1px solid #000;\n    color: #C7C7C7;\n    transform-origin: 0 0;\n    transform: scaleY(0.5);\n}\n\n/* æ–‡å­—ä¸¤ç«¯å¯¹é½ */\n.text-justify{\n    text-align:justify; \n    text-justify:inter-ideograph;\n}\n\n/* å®šä¹‰ç›’æ¨¡å‹ä¸º flexå¸ƒå±€å…¼å®¹å†™æ³•å¹¶è®©å†…å®¹æ°´å¹³å‚ç›´å±…ä¸­ */\n.flex-center{\n    display: -webkit-box;\n    display: -moz-box;\n    display: -ms-flexbox;\n    display: -o-box;\n    display: box;\n\n    -webkit-box-pack: center;\n    -moz-box-pack: center;\n    -ms-flex-pack: center;\n    -o-box-pack: center;\n    box-pack: center;\n\n    -webkit-box-align: center;\n    -moz-box-align: center;\n    -ms-flex-align: center;\n    -o-box-align: center;\n    box-align: center;\n}\n\n/* public end */\n</code></pre><h1 id=\"å…­ã€flexå¸ƒå±€\"><a href=\"#å…­ã€flexå¸ƒå±€\" class=\"headerlink\" title=\"å…­ã€flexå¸ƒå±€\"></a>å…­ã€flexå¸ƒå±€</h1><p>1ã€å®šä¹‰å¼¹æ€§ç›’æ¨¡å‹å…¼å®¹å†™æ³•</p>\n<pre><code>\n/*\n    box\n    inline-box\n*/\ndisplay: -webkit-box;\ndisplay: -moz-box;\ndisplay: -ms-flexbox;\ndisplay: -o-box;\ndisplay: box;\n</code></pre><p>2ã€box-orient å®šä¹‰ç›’æ¨¡å‹å†…ä¼¸ç¼©é¡¹ç›®çš„å¸ƒå±€æ–¹å‘</p>\n<pre><code>/**\n * vertical column    å‚ç›´\n * horizontal row    æ°´å¹³ é»˜è®¤å€¼\n */\n-webkit-box-orient: horizontal;\n-moz-box-orient: horizontal;\n-ms-flex-direction: row;\n-o-box-orient: horizontal;\nbox-orient: horizontal;\n</code></pre><p>3ã€box-direction å®šä¹‰ç›’æ¨¡å‹å†…ä¼¸ç¼©é¡¹ç›®çš„æ­£åº(normalé»˜è®¤å€¼)ã€å€’å™(reverse)</p>\n<pre><code>/* Firefox */\ndisplay:-moz-box;\n-moz-box-direction:reverse;\n/* Safariã€Opera ä»¥åŠ Chrome */\ndisplay:-webkit-box;\n-webkit-box-direction:reverse;\n</code></pre><p>4ã€box-pack å¯¹ç›’å­æ°´å¹³å¯Œè£•ç©ºé—´çš„ç®¡ç†</p>\n<pre><code>/*\n    start\n    end\n    center\n    justify\n*/\n-webkit-box-pack: center;\n-moz-box-pack: center;\n-ms-flex-pack: center;\n-o-box-pack: center;\nbox-pack: center;\n</code></pre><p>5ã€box-pack å¯¹ç›’å­å‚ç›´æ–¹å‘å¯Œè£•ç©ºé—´çš„ç®¡ç†</p>\n<pre><code>/*\n    start\n    end\n    center\n*/\n/* box-align */\n-webkit-box-align: center;\n-moz-box-align: center;\n-ms-flex-align: center;\n-o-box-align: center;\nbox-align: center;\n</code></pre><p>6ã€å®šä¹‰ä¼¸ç¼©é¡¹ç›®çš„å…·ä½“ä½ç½®</p>\n<pre><code>/*-moz-box-ordinal-group:1;*/ /* Firefox */\n/*-webkit-box-ordinal-group:1;*/ /* Safari å’Œ Chrome */\n.box div:nth-of-type(1){-webkit-box-ordinal-group:1;}\n.box div:nth-of-type(2){-webkit-box-ordinal-group:2;}\n.box div:nth-of-type(3){-webkit-box-ordinal-group:3;}\n.box div:nth-of-type(4){-webkit-box-ordinal-group:4;}\n.box div:nth-of-type(5){-webkit-box-ordinal-group:5;}\n</code></pre><p>7ã€å®šä¹‰ä¼¸ç¼©é¡¹ç›®å ç©ºé—´çš„ä»½æ•°</p>\n<pre><code>-moz-box-flex:2.0; /* Firefox */\n-webkit-box-flex:2.0; /* Safari å’Œ Chrome */\n\n.box div:nth-of-type(1){-webkit-box-flex:1;}\n.box div:nth-of-type(2){-webkit-box-flex:2;}\n.box div:nth-of-type(3){-webkit-box-flex:3;}\n.box div:nth-of-type(4){-webkit-box-flex:4;}\n.box div:nth-of-type(5){-webkit-box-flex:5;}\n</code></pre>","site":{"data":{}},"excerpt":"<h1 id=\"ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“åŠæŠ€å·§\"><a href=\"#ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“åŠæŠ€å·§\" class=\"headerlink\" title=\"ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“åŠæŠ€å·§\"></a>ç§»åŠ¨ç«¯é¡µé¢å¼€å‘èµ„æºæ€»ç»“åŠæŠ€å·§</h1><p>å·¥ä½œäº†æœ‰ä¸€æ®µæ—¶é—´ï¼ŒåŸºæœ¬ä¸Šéƒ½åœ¨æç§»åŠ¨ç«¯çš„å‰ç«¯å¼€å‘ï¼Œå·¥ä½œçš„è¿‡ç¨‹ä¸­é‡åˆ°è¿‡å¾ˆå¤šé—®é¢˜ï¼Œbugçš„è§£å†³æ–¹æ¡ˆï¼Œè®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿åç”¨ï¼ï¼ï¼å†…å®¹å¹¶ä¸æ˜¯å¾ˆå…¨ï¼Œä»¥åæ¯é‡åˆ°ä¸€ä¸ªé—®é¢˜éƒ½ä¼šæ€»ç»“åœ¨è¿™é‡Œï¼Œåˆ†äº«ç»™å¤§å®¶ï¼</p>","more":"<h1 id=\"ä¸€ã€metaæ ‡ç­¾ç›¸å…³çŸ¥è¯†\"><a href=\"#ä¸€ã€metaæ ‡ç­¾ç›¸å…³çŸ¥è¯†\" class=\"headerlink\" title=\"ä¸€ã€metaæ ‡ç­¾ç›¸å…³çŸ¥è¯†\"></a>ä¸€ã€metaæ ‡ç­¾ç›¸å…³çŸ¥è¯†</h1><p>1ã€ç§»åŠ¨ç«¯é¡µé¢è®¾ç½®è§†å£å®½åº¦ç­‰äºè®¾å¤‡å®½åº¦ï¼Œå¹¶ç¦æ­¢ç¼©æ”¾ã€‚</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; /&gt;\n</code></pre><p>2ã€ç§»åŠ¨ç«¯é¡µé¢è®¾ç½®è§†å£å®½åº¦ç­‰äºå®šå®½ï¼ˆå¦‚640pxï¼‰ï¼Œå¹¶ç¦æ­¢ç¼©æ”¾ï¼Œå¸¸ç”¨äºå¾®ä¿¡æµè§ˆå™¨é¡µé¢ã€‚</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=640,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; /&gt;\n</code></pre><p>3ã€ç¦æ­¢å°†é¡µé¢ä¸­çš„æ•°å­—è¯†åˆ«ä¸ºç”µè¯å·ç </p>\n<pre><code>&lt;meta name=&quot;format-detection&quot; content=&quot;telephone=no&quot; /&gt;\n</code></pre><p>4ã€å¿½ç•¥Androidå¹³å°ä¸­å¯¹é‚®ç®±åœ°å€çš„è¯†åˆ«</p>\n<pre><code>&lt;meta name=&quot;format-detection&quot; content=&quot;email=no&quot; /&gt;\n</code></pre><p>5ã€å½“ç½‘ç«™æ·»åŠ åˆ°ä¸»å±å¹•å¿«é€Ÿå¯åŠ¨æ–¹å¼ï¼Œå¯éšè—åœ°å€æ ï¼Œä»…é’ˆå¯¹iosçš„safari</p>\n<pre><code>&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot; /&gt;\n&lt;!-- ios7.0ç‰ˆæœ¬ä»¥åï¼Œsafariä¸Šå·²çœ‹ä¸åˆ°æ•ˆæœ --&gt;\n</code></pre><p>6ã€å°†ç½‘ç«™æ·»åŠ åˆ°ä¸»å±å¹•å¿«é€Ÿå¯åŠ¨æ–¹å¼ï¼Œä»…é’ˆå¯¹iosçš„safarié¡¶ç«¯çŠ¶æ€æ¡çš„æ ·å¼</p>\n<pre><code>&lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black&quot; /&gt;\n&lt;!-- å¯é€‰defaultã€blackã€black-translucent --&gt;\n</code></pre><h2 id=\"viewportè«æ¿\"><a href=\"#viewportè«æ¿\" class=\"headerlink\" title=\"viewportè«æ¿\"></a>viewportè«æ¿</h2><pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;utf-8&quot;&gt;\n&lt;meta content=&quot;width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; name=&quot;viewport&quot;&gt;\n&lt;meta content=&quot;yes&quot; name=&quot;apple-mobile-web-app-capable&quot;&gt;\n&lt;meta content=&quot;black&quot; name=&quot;apple-mobile-web-app-status-bar-style&quot;&gt;\n&lt;meta content=&quot;telephone=no&quot; name=&quot;format-detection&quot;&gt;\n&lt;meta content=&quot;email=no&quot; name=&quot;format-detection&quot;&gt;\n&lt;title&gt;title&lt;/title&gt;\n&lt;link rel=&quot;stylesheet&quot; href=&quot;index.css&quot;&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    content...\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre><h1 id=\"äºŒã€CSSæ ·å¼æŠ€å·§\"><a href=\"#äºŒã€CSSæ ·å¼æŠ€å·§\" class=\"headerlink\" title=\"äºŒã€CSSæ ·å¼æŠ€å·§\"></a>äºŒã€CSSæ ·å¼æŠ€å·§</h1><p>1ã€ç¦æ­¢ioså’Œandroidç”¨æˆ·é€‰ä¸­æ–‡å­—</p>\n<pre><code>.css{-webkit-user-select:none}\n</code></pre><p>2ã€ç¦æ­¢iosé•¿æŒ‰æ—¶è§¦å‘ç³»ç»Ÿçš„èœå•ï¼Œç¦æ­¢ios&amp;androidé•¿æŒ‰æ—¶ä¸‹è½½å›¾ç‰‡</p>\n<pre><code>.css{-webkit-touch-callout: none}\n</code></pre><p>3ã€webkitå»é™¤è¡¨å•å…ƒç´ çš„é»˜è®¤æ ·å¼</p>\n<pre><code>.css{-webkit-appearance:none;}\n</code></pre><p>4ã€ä¿®æ”¹webkitè¡¨å•è¾“å…¥æ¡†placeholderçš„æ ·å¼</p>\n<pre><code>input::-webkit-input-placeholder{color:#AAAAAA;}\ninput:focus::-webkit-input-placeholder{color:#EEEEEE;}\n</code></pre><p>5ã€å»é™¤android a/button/inputæ ‡ç­¾è¢«ç‚¹å‡»æ—¶äº§ç”Ÿçš„è¾¹æ¡† &amp; å»é™¤ios aæ ‡ç­¾è¢«ç‚¹å‡»æ—¶äº§ç”Ÿçš„åŠé€æ˜ç°è‰²èƒŒæ™¯</p>\n<pre><code>a,button,input{-webkit-tap-highlight-color:rgba(255,0,0,0);}\n</code></pre><p>6ã€iosä½¿ç”¨-webkit-text-size-adjustç¦æ­¢è°ƒæ•´å­—ä½“å¤§å°</p>\n<pre><code>body{-webkit-text-size-adjust: 100%!important;}\n</code></pre><p>7ã€android ä¸Šå»æ‰è¯­éŸ³è¾“å…¥æŒ‰é’®</p>\n<pre><code>input::-webkit-input-speech-button {display: none}\n</code></pre><p>8ã€ç§»åŠ¨ç«¯å®šä¹‰å­—ä½“ï¼Œç§»åŠ¨ç«¯æ²¡æœ‰å¾®è½¯é›…é»‘å­—ä½“</p>\n<pre><code>/* ç§»åŠ¨ç«¯å®šä¹‰å­—ä½“çš„ä»£ç  */\nbody{font-family:Helvetica;}\n</code></pre><p>9ã€ç¦ç”¨Webkitå†…æ ¸æµè§ˆå™¨çš„æ–‡å­—å¤§å°è°ƒæ•´åŠŸèƒ½ã€‚</p>\n<pre><code>-webkit-text-size-adjust: none;\n</code></pre><h1 id=\"ä¸‰ã€å…¶ä»–æŠ€å·§\"><a href=\"#ä¸‰ã€å…¶ä»–æŠ€å·§\" class=\"headerlink\" title=\"ä¸‰ã€å…¶ä»–æŠ€å·§\"></a>ä¸‰ã€å…¶ä»–æŠ€å·§</h1><p>1ã€æ‰‹æœºæ‹ç…§å’Œä¸Šä¼ å›¾ç‰‡</p>\n<pre><code>&lt;!-- é€‰æ‹©ç…§ç‰‡ --&gt;\n&lt;input type=file accept=&quot;image/*&quot;&gt;\n&lt;!-- é€‰æ‹©è§†é¢‘ --&gt;\n&lt;input type=file accept=&quot;video/*&quot;&gt;\n</code></pre><p>2ã€å–æ¶ˆinputåœ¨iosä¸‹ï¼Œè¾“å…¥çš„æ—¶å€™è‹±æ–‡é¦–å­—æ¯çš„é»˜è®¤å¤§å†™</p>\n<pre><code>&lt;input autocapitalize=&quot;off&quot; autocorrect=&quot;off&quot; /&gt;\n</code></pre><p>3ã€æ‰“ç”µè¯å’Œå‘çŸ­ä¿¡</p>\n<pre><code>&lt;a href=&quot;tel:0755-10086&quot;&gt;æ‰“ç”µè¯ç»™:0755-10086&lt;/a&gt;\n&lt;a href=&quot;sms:10086&quot;&gt;å‘çŸ­ä¿¡ç»™: 10086&lt;/a&gt;\n</code></pre><h1 id=\"å››ã€CSS-reset\"><a href=\"#å››ã€CSS-reset\" class=\"headerlink\" title=\"å››ã€CSS reset\"></a>å››ã€CSS reset</h1><pre><code>/* hcysun  */\n@charset &quot;utf-8&quot;;\n/* reset */\nhtml{\n    -webkit-text-size-adjust:none;\n    -webkit-user-select:none;\n    -webkit-touch-callout: none\n    font-family: Helvetica;\n}\nbody{font-size:12px;}\nbody,h1,h2,h3,h4,h5,h6,p,dl,dd,ul,ol,pre,form,input,textarea,th,td,select{margin:0; padding:0; font-weight: normal;text-indent: 0;}\na,button,input,textarea,select{ background: none; -webkit-tap-highlight-color:rgba(255,0,0,0); outline:none; -webkit-appearance:none;}\nem{font-style:normal}\nli{list-style:none}\na{text-decoration:none;}\nimg{border:none; vertical-align:top;}\ntable{border-collapse:collapse;}\ntextarea{ resize:none; overflow:auto;}\n/* end reset */\n</code></pre><h1 id=\"äº”ã€å¸¸ç”¨å…¬ç”¨CSS-style\"><a href=\"#äº”ã€å¸¸ç”¨å…¬ç”¨CSS-style\" class=\"headerlink\" title=\"äº”ã€å¸¸ç”¨å…¬ç”¨CSS style\"></a>äº”ã€å¸¸ç”¨å…¬ç”¨CSS style</h1><pre><code>/* public */\n\n/* æ¸…é™¤æµ®åŠ¨ */\n.clear { zoom:1; }\n.clear:after { content:&#39;&#39;; display:block; clear:both; }\n\n/* å®šä¹‰ç›’æ¨¡å‹ä¸ºæ€ªå¼‚å’Œæ¨¡å‹ï¼ˆå®½é«˜ä¸å—è¾¹æ¡†å½±å“ï¼‰ */\n.boxSiz{\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -ms-box-sizing: border-box;\n    -o-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n/* å¼ºåˆ¶æ¢è¡Œ */\n.toWrap{\n    word-break: break-all;       /* åªå¯¹è‹±æ–‡èµ·ä½œç”¨ï¼Œä»¥å­—æ¯ä½œä¸ºæ¢è¡Œä¾æ®ã€‚ */\n    word-wrap: break-word;       /* åªå¯¹è‹±æ–‡èµ·ä½œç”¨ï¼Œä»¥å•è¯ä½œä¸ºæ¢è¡Œä¾æ®ã€‚*/\n    white-space: pre-wrap;     /* åªå¯¹ä¸­æ–‡èµ·ä½œç”¨ï¼Œå¼ºåˆ¶æ¢è¡Œã€‚*/\n}\n\n/* ç¦æ­¢æ¢è¡Œ */\n.noWrap{\n    white-space:nowrap;\n}\n\n/* ç¦æ­¢æ¢è¡Œ,è¶…å‡ºçœç•¥å· */\n.noWrapEllipsis{\n     white-space:nowrap; overflow:hidden; text-overflow:ellipsis;\n}\n\n/* å¤šè¡Œæ˜¾ç¤ºçœç•¥å·ï¼Œlesså†™æ³•ï¼Œ@lineæ˜¯è¡Œæ•° */\n.ellipsisLn(@line) {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: @line;\n}\n\n/* 1px è¾¹æ¡†è§£å†³æ–¹æ¡ˆï¼Œç¤ºä¾‹ä¸­è®¾ç½®ä¸Šè¾¹æ¡†ï¼Œå¯ä»¥è°ƒæ•´ topã€rightã€bottomã€left çš„å€¼åˆ†åˆ«è®¾ç½®ä¸Šä¸‹å·¦å³è¾¹æ¡† */\n#box2:after{\n    content: &quot; &quot;;\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    height: 1px;\n    border-top: 1px solid #000;\n    color: #C7C7C7;\n    transform-origin: 0 0;\n    transform: scaleY(0.5);\n}\n\n/* æ–‡å­—ä¸¤ç«¯å¯¹é½ */\n.text-justify{\n    text-align:justify; \n    text-justify:inter-ideograph;\n}\n\n/* å®šä¹‰ç›’æ¨¡å‹ä¸º flexå¸ƒå±€å…¼å®¹å†™æ³•å¹¶è®©å†…å®¹æ°´å¹³å‚ç›´å±…ä¸­ */\n.flex-center{\n    display: -webkit-box;\n    display: -moz-box;\n    display: -ms-flexbox;\n    display: -o-box;\n    display: box;\n\n    -webkit-box-pack: center;\n    -moz-box-pack: center;\n    -ms-flex-pack: center;\n    -o-box-pack: center;\n    box-pack: center;\n\n    -webkit-box-align: center;\n    -moz-box-align: center;\n    -ms-flex-align: center;\n    -o-box-align: center;\n    box-align: center;\n}\n\n/* public end */\n</code></pre><h1 id=\"å…­ã€flexå¸ƒå±€\"><a href=\"#å…­ã€flexå¸ƒå±€\" class=\"headerlink\" title=\"å…­ã€flexå¸ƒå±€\"></a>å…­ã€flexå¸ƒå±€</h1><p>1ã€å®šä¹‰å¼¹æ€§ç›’æ¨¡å‹å…¼å®¹å†™æ³•</p>\n<pre><code>\n/*\n    box\n    inline-box\n*/\ndisplay: -webkit-box;\ndisplay: -moz-box;\ndisplay: -ms-flexbox;\ndisplay: -o-box;\ndisplay: box;\n</code></pre><p>2ã€box-orient å®šä¹‰ç›’æ¨¡å‹å†…ä¼¸ç¼©é¡¹ç›®çš„å¸ƒå±€æ–¹å‘</p>\n<pre><code>/**\n * vertical column    å‚ç›´\n * horizontal row    æ°´å¹³ é»˜è®¤å€¼\n */\n-webkit-box-orient: horizontal;\n-moz-box-orient: horizontal;\n-ms-flex-direction: row;\n-o-box-orient: horizontal;\nbox-orient: horizontal;\n</code></pre><p>3ã€box-direction å®šä¹‰ç›’æ¨¡å‹å†…ä¼¸ç¼©é¡¹ç›®çš„æ­£åº(normalé»˜è®¤å€¼)ã€å€’å™(reverse)</p>\n<pre><code>/* Firefox */\ndisplay:-moz-box;\n-moz-box-direction:reverse;\n/* Safariã€Opera ä»¥åŠ Chrome */\ndisplay:-webkit-box;\n-webkit-box-direction:reverse;\n</code></pre><p>4ã€box-pack å¯¹ç›’å­æ°´å¹³å¯Œè£•ç©ºé—´çš„ç®¡ç†</p>\n<pre><code>/*\n    start\n    end\n    center\n    justify\n*/\n-webkit-box-pack: center;\n-moz-box-pack: center;\n-ms-flex-pack: center;\n-o-box-pack: center;\nbox-pack: center;\n</code></pre><p>5ã€box-pack å¯¹ç›’å­å‚ç›´æ–¹å‘å¯Œè£•ç©ºé—´çš„ç®¡ç†</p>\n<pre><code>/*\n    start\n    end\n    center\n*/\n/* box-align */\n-webkit-box-align: center;\n-moz-box-align: center;\n-ms-flex-align: center;\n-o-box-align: center;\nbox-align: center;\n</code></pre><p>6ã€å®šä¹‰ä¼¸ç¼©é¡¹ç›®çš„å…·ä½“ä½ç½®</p>\n<pre><code>/*-moz-box-ordinal-group:1;*/ /* Firefox */\n/*-webkit-box-ordinal-group:1;*/ /* Safari å’Œ Chrome */\n.box div:nth-of-type(1){-webkit-box-ordinal-group:1;}\n.box div:nth-of-type(2){-webkit-box-ordinal-group:2;}\n.box div:nth-of-type(3){-webkit-box-ordinal-group:3;}\n.box div:nth-of-type(4){-webkit-box-ordinal-group:4;}\n.box div:nth-of-type(5){-webkit-box-ordinal-group:5;}\n</code></pre><p>7ã€å®šä¹‰ä¼¸ç¼©é¡¹ç›®å ç©ºé—´çš„ä»½æ•°</p>\n<pre><code>-moz-box-flex:2.0; /* Firefox */\n-webkit-box-flex:2.0; /* Safari å’Œ Chrome */\n\n.box div:nth-of-type(1){-webkit-box-flex:1;}\n.box div:nth-of-type(2){-webkit-box-flex:2;}\n.box div:nth-of-type(3){-webkit-box-flex:3;}\n.box div:nth-of-type(4){-webkit-box-flex:4;}\n.box div:nth-of-type(5){-webkit-box-flex:5;}\n</code></pre>"},{"title":"ä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« (ä¸€)","date":"2015-10-16T02:22:14.000Z","_content":"\n# ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£ #\n\n> ä»æˆ‘å·¥ä½œä»¥æ¥ï¼Œå¼€å‘çš„ä¸€ç›´éƒ½æ˜¯ç§»åŠ¨ç«¯çš„é¡µé¢ï¼Œåªæœ‰å¶å°”å»å¼€å‘å‡ ä¸ªPCç«¯çš„é¡µé¢ï¼Œç°åœ¨æ˜¯ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£ï¼Œç§»åŠ¨å…ˆè¡Œå·²ç»æ·±å…¥éª¨é«“ï¼Œä½œä¸ºä¸€ä¸ªwebå‰ç«¯å¼€å‘ï¼Œå¦‚æœä½ è¿˜åœ¨ä¸ºå¦‚ä½•å¼€å‘ç§»åŠ¨ç«¯é¡µé¢è€Œè¿·èŒ«ï¼Œæˆ–è€…ä½ è¿˜åœ¨ä¸ºå¼€å‘å‡ºäº†ä¸€ä¸ªåœ¨ä½ æ‰‹æœºä¸Šâ€œå®Œç¾â€çš„ç§»åŠ¨é¡µé¢è€Œæ²¾æ²¾è‡ªå–œå´ä¸çŸ¥ç§»åŠ¨çš„ä¸–ç•Œæœ‰å¤šâ€œæ®‹é…·â€çš„æ—¶å€™ï¼Œé‚£ä½ åº”è¯¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« äº†ã€‚å¸Œæœ›è¿™èƒ½ç»™ä½ å¸®åŠ©ï¼ŒåŒæ—¶ä¹Ÿèƒ½ç»™æˆ‘å¸®åŠ©ï¼Œæœ‰ä¸åˆç†çš„åœ°æ–¹ï¼Œæ¬¢è¿è¯„è®ºæ”¯æŒï¼Œå¿…å°†æ”¹æ­£ã€‚\n\n![ç§»åŠ¨ç«¯](http://7xlolm.com1.z0.glb.clouddn.com/20150923mobile.jpg)\n\n<!-- more -->\n\n# è¿™é‡Œæ˜¯åŸºç¡€ï¼Œä½ äº†è§£å¦ï¼Ÿ #\n\n## ä¸€ã€åƒç´  - ä»€ä¹ˆæ˜¯åƒç´  ##\n\nåƒç´ æ˜¯webé¡µé¢å¸ƒå±€çš„åŸºç¡€ï¼Œé‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ‰æ˜¯ä¸€ä¸ªåƒç´ å‘¢ï¼Ÿ\nåƒç´ ï¼š<b>ä¸€ä¸ªåƒç´ å°±æ˜¯è®¡ç®—æœºå±å¹•æ‰€èƒ½æ˜¾ç¤ºä¸€ç§ç‰¹å®šé¢œè‰²çš„æœ€å°åŒºåŸŸã€‚</b> è¿™æ˜¯åƒç´ çš„æ¦‚å¿µï¼Œå®é™…ä¸Šï¼Œåœ¨webå‰ç«¯å¼€å‘é¢†åŸŸï¼Œåƒç´ æœ‰ä»¥ä¸‹ä¸¤å±‚å«ä¹‰ï¼š\n1ã€<b>è®¾å¤‡åƒç´ ï¼š</b>è®¾å¤‡å±å¹•çš„ç‰©ç†åƒç´ ï¼Œå¯¹äºä»»ä½•è®¾å¤‡æ¥è®²ç‰©ç†åƒç´ çš„æ•°é‡æ˜¯å›ºå®šçš„ã€‚\n2ã€<b>CSSåƒç´ ï¼š</b>è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡çš„åƒç´ æ¦‚å¿µï¼Œå®ƒæ˜¯ä¸ºwebå¼€å‘è€…åˆ›é€ çš„ã€‚\n\nå¦‚ä¸‹å›¾ï¼Œæ˜¯åœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1ï¼Œå³scale = 1çš„æƒ…å†µä¸‹ï¼Œè®¾å¤‡åƒç´ å’ŒCSSåƒç´ ç¤ºæ„å›¾\n\n![è®¾å¤‡åƒç´ å’ŒCSSåƒç´ ](http://7xlolm.com1.z0.glb.clouddn.com/20150923px1.jpg)\n\nç°åœ¨ä½ å·²ç»äº†è§£äº†ï¼ŒåŸæ¥åƒç´ å¯¹äºwebå‰ç«¯å¼€å‘æ¥è®²æœ‰è¿™æ ·çš„ä¸¤å±‚å«ä¹‰ï¼Œé‚£ä¹ˆä½ æœ‰æ²¡æœ‰å†æ·±å…¥çš„è€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ç»™ä¸€ä¸ªå…ƒç´ è®¾ç½®äº† <b>width: 200px;</b> è¿™æ¡æ ·å¼çš„æ—¶å€™ï¼Œåˆ°åº•æ”¾ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ\nä½ å¯èƒ½ä¼šè¯´ï¼šâ€œåºŸè¯ï¼å…ƒç´ çš„å®½åº¦æ˜¯200pxå‘—ã€‚â€ï¼›å¯¹ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸ª200pxæŒ‡çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºwebå‰ç«¯æ¥è®²åƒç´ æœ‰ä¸¤å±‚å«ä¹‰ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯è®¾å¤‡åƒç´ è¿˜æ˜¯CSSåƒç´ ï¼Ÿå®é™…ä¸Šæˆ‘ä»¬æ§åˆ¶çš„æ˜¯CSSåƒç´ ï¼Œå› ä¸ºå‰é¢æåˆ°äº†ï¼ŒCSSåƒç´ æ˜¯ç»™æˆ‘ä»¬webå‰ç«¯å¼€å‘è€…åˆ›é€ çš„æŠ½è±¡æ¦‚å¿µã€‚æ‰€ä»¥ä½ è¦è®°ä½ï¼š<b>å½“ä½ ç»™å…ƒç´ è®¾ç½®äº† width: 200px æ—¶ï¼Œè¿™ä¸ªå…ƒç´ çš„å®½åº¦è·¨è¶Šäº†200ä¸ªCSSåƒç´ </b>ã€‚ä½†æ˜¯å®ƒå¹¶ä¸ä¸€å®šè·¨è¶Š200ä¸ªè®¾å¤‡åƒç´ ï¼Œè‡³äºä¼šè·¨è¶Šå¤šå°‘ä¸ªè®¾å¤‡åƒç´ ï¼Œå°±å–å†³äº<b>æ‰‹æœºå±å¹•çš„ç‰¹æ€§</b>å’Œ<b>ç”¨æˆ·çš„ç¼©æ”¾</b>äº†,ä¸¾ä¸ªæ —å­ï¼š\n\nè‹¹æœæ‰‹æœºçš„è§†ç½‘è†œå±å¹•ï¼Œæ˜¯ä¸€ä¸ªé«˜å¯†åº¦å±å¹•ï¼Œå®ƒçš„åƒç´ å¯†åº¦æ˜¯æ™®é€šå±å¹•çš„2å€ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è®¾ç½® <b>width: 200px;</b> æ—¶ï¼Œ200ä¸ªCSSåƒç´ è·¨è¶Šäº†400ä¸ªè®¾å¤‡åƒç´ ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![è‹¹æœè§†ç½‘è†œå±å¹•çš„è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/20150923px2.jpg)\n\nå¦‚æœç”¨æˆ·ç¼©å°é¡µé¢ï¼Œé‚£ä¹ˆä¸€ä¸ªCSSåƒç´ ä¼šæ˜æ˜¾å°äºä¸€ä¸ªè®¾å¤‡åƒç´ ï¼Œè¿™ä¸ªæ—¶å€™ <b>width: 200px;</b> è¿™æ¡æ ·å¼ä¸­æ‰€è®¾ç½®çš„200ä¸ªCSSåƒç´ è·¨è¶Šä¸äº†200ä¸ªè®¾å¤‡åƒç´ ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![ç”¨æˆ·ç¼©é¡µé¢æ—¶è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/20150923px3.jpg)\n\nè®©æˆ‘ä»¬æ¥åšä¸€ä¸ªæ€»ç»“\n\n> 1ã€webå‰ç«¯é¢†åŸŸï¼Œåƒç´ åˆ†ä¸º<b>è®¾å¤‡åƒç´ </b>å’Œ<b>CSSåƒç´ </b>\n  3ã€ä¸€ä¸ªCSSåƒç´ çš„å¤§å°æ˜¯å¯å˜çš„ï¼Œæ¯”å¦‚ç”¨åç¼©æ”¾é¡µé¢çš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨ç¼©å°æˆ–æ”¾å¤§CSSåƒç´ ï¼Œè€Œè®¾å¤‡åƒç´ æ— è®ºå¤§å°è¿˜æ˜¯æ•°é‡éƒ½æ˜¯ä¸å˜çš„ã€‚\n\n## äºŒã€ç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£ ##\n\nä¸€çœ‹æ ‡é¢˜ï¼Œä½ æ˜¯ä¸æ˜¯è’™äº†ï¼Ÿä¸‰ä¸ªè§†å£ï¼Ÿä»€ä¹ˆä¸‰ä¸ªè§†å£ï¼Ÿå…ˆåˆ«æ€¥ï¼Œè®©æˆ‘ä»¬æ…¢æ…¢æ¥è®²ã€‚\nä½ ä¸€å®šå†™è¿‡è¿™æ ·ä¸€æ¡æ ·å¼ï¼š<b>width: 25%;</b> ä½†æ˜¯ä½ æœ‰æƒ³è¿‡ç»™ä¸€ä¸ªå…ƒç´ åŠ ä¸Šè¿™æ ·ä¸€æ¡æ ·å¼ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆå—ï¼Ÿ25%æ˜¯åŸºäºè°çš„25%ï¼Ÿæ˜ç™½çš„åŒå­¦å¯èƒ½çŸ¥é“äº†ï¼šä¸€ä¸ªå—å…ƒç´ é»˜è®¤çš„å®½åº¦æ˜¯å…¶çˆ¶å…ƒç´ çš„100%ï¼Œæ˜¯åŸºäºèµ·çˆ¶å…ƒç´ çš„ï¼Œæ‰€ä»¥25%æŒ‡çš„æ˜¯çˆ¶å…ƒç´ å®½åº¦çš„25%ï¼Œæ‰€ä»¥ï¼Œ<b>body</b>å…ƒç´ çš„é»˜è®¤å®½åº¦æ˜¯<b>html</b>å…ƒç´ å®½åº¦çš„100%ï¼Œé‚£ä¹ˆä½ æœ‰æ²¡æœ‰æƒ³è¿‡<b>html</b>å…ƒç´ çš„å®½åº¦æ˜¯åŸºäºè°çš„å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ï¼Œå°±è¦å¼•å‡ºä¸€ä¸ªæ¦‚å¿µï¼š<b style=\"color: red;\">åˆå§‹åŒ…å«å—å’Œè§†å£äº†</b>\n\nè®°ä½ä¸€å¥è¯ï¼š<b>è§†å£æ˜¯htmlçš„çˆ¶å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬ç§°è§†å£ä¸ºåˆå§‹åŒ…å«å—ã€‚</b> è¿™æ ·ä½ å°±æ˜ç™½äº†ï¼Œhtmlå…ƒç´ çš„ç™¾åˆ†æ¯”æ˜¯åŸºäºè§†å£çš„ã€‚\n\n### ç¬¬ä¸€ä¸ªè§†å£ï¼šå¸ƒå±€è§†å£ ###\n\né¦–å…ˆä½ éœ€è¦äº†è§£ä¸€ä¸ªåŸå› ï¼šæµè§ˆå™¨å‚å•†æ˜¯å¸Œæœ›æ»¡è¶³ç”¨æˆ·çš„è¦æ±‚çš„ï¼Œå³åœ¨æ‰‹æœºä¹Ÿèƒ½æµè§ˆä¸ºPCç«¯è®¾è®¡çš„ç½‘ç«™ï¼Œæ‰€ä»¥æµè§ˆå™¨å‚å•†å¿…é¡»æƒ³åŠæ³•æ¥åœ¨æ»¡è¶³~\nåœ¨PCæµè§ˆå™¨ä¸­ï¼Œè§†å£åªæœ‰ä¸€ä¸ªï¼Œå¹¶ä¸” <b>è§†å£çš„å®½åº¦</b> = <b>æµè§ˆå™¨çª—å£çš„å®½åº¦</b>ï¼Œä½†æ˜¯åœ¨ç§»åŠ¨ç«¯ä¹Ÿè¦æ ¹æ®è¿™ä¸ªæ¥è®¾è®¡çš„è¯ï¼Œé‚£ä¹ˆPCç«¯è®¾è®¡çš„ç½‘ç«™åœ¨ç§»åŠ¨ç«¯çœ‹èµ·æ¥ä¼šå¾ˆä¸‘ï¼Œå› ä¸ºPCç«¯çš„ç½‘é¡µå®½åº¦åœ¨800 ~ 1024ä¸ªCSSåƒç´ ï¼Œè€Œæ‰‹æœºå±å¹•è¦çª„çš„å¤šï¼Œè¿™ä¸ªæ—¶å€™å†PCç«¯25%çš„å®½åº¦åœ¨ç§»åŠ¨ç«¯çœ‹èµ·æ¥ä¼šå¾ˆçª„ã€‚æ‰€ä»¥ï¼Œå¸ƒå±€è§†å£çš„æ¦‚å¿µäº§ç”Ÿäº†ã€‚\n\nå¸ƒå±€æ˜¯å£ï¼šç§»åŠ¨ç«¯CSSå¸ƒå±€çš„ä¾æ®è§†å£ï¼Œå³CSSå¸ƒå±€ä¼šæ ¹æ®å¸ƒå±€è§†å£æ¥è®¡ç®—ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç§»åŠ¨ç«¯ï¼Œè§†å£å’Œæµè§ˆå™¨çª—å£å°†ä¸åœ¨å…³è”ï¼Œå®é™…ä¸Šï¼Œå¸ƒå±€è§†å£è¦æ¯”æµè§ˆå™¨çª—å£å¤§çš„å¤š(åœ¨æ‰‹æœºå’Œå¹³æ¿ä¸­æµè§ˆå™¨å¸ƒå±€è§†å£çš„å®½åº¦åœ¨768~1024åƒç´ ä¹‹é—´)ï¼Œå¦‚ä¸‹å›¾ï¼ˆå¸ƒå±€è§†å£å’Œçª—å£çš„å…³ç³»ï¼‰ï¼š\n\n![å¸ƒå±€æ˜¯å£å’Œæµè§ˆå™¨çª—å£çš„å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/20150923px4.jpg)\n\nå¯ä»¥é€šè¿‡ä»¥ä¸‹JavaScriptä»£ç è·å–å¸ƒå±€è§†å£çš„å®½åº¦å’Œé«˜åº¦ï¼š\n\n```\ndocument.documentElement.clientWidth\ndocument.documentElement.clientHeight\n```\n\n### ç¬¬äºŒä¸ªè§†å£ï¼šè§†è§‰è§†å£ ###\n\nè§†è§‰è§†å£å¯èƒ½è¦æ›´å¥½ç†è§£ä¸€äº›ï¼Œä»–å°±æ˜¯ç”¨æˆ·æ­£åœ¨çœ‹åˆ°ç½‘ç«™çš„åŒºåŸŸï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![è§†è§‰è§†å£](http://7xlolm.com1.z0.glb.clouddn.com/20150923px5.jpg)\n\n### ç¬¬ä¸‰ä¸ªè§†å£ï¼šç†æƒ³è§†å£ ###\n\nç†æƒ³è§†å£ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€éœ€è¦å…³æ³¨çš„è§†å£ï¼Œç°åœ¨æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹æˆ‘ä»¬çŸ¥é“äº†å“ªäº›è§†å£ï¼Œæœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼šå¸ƒå±€è§†å£ï¼Œè§†è§‰è§†å£ã€‚\næˆ‘ä»¬å‰é¢æåˆ°è¿‡ï¼Œå¸ƒå±€è§†å£çš„å®½åº¦ä¸€èˆ¬åœ¨ 680~1024åƒç´ ä¹‹é—´ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—PCç½‘ç«™åœ¨æ‰‹æœºä¸­ä¸è¢«å‹æ‰ï¼Œä½†æ˜¯è¿™å¹¶ä¸ç†æƒ³ï¼Œå› ä¸ºæ‰‹æœºæ›´é€‚åˆçª„çš„ç½‘ç«™ï¼Œæ¢å¥è¯è¯´ï¼Œå¸ƒå±€è§†å£å¹¶ä¸æ˜¯æœ€ç†æƒ³çš„å®½åº¦ï¼Œæ‰€ä»¥ï¼Œå°±å¼•å…¥äº†ç†æƒ³è§†å£ã€‚\n\nç†æƒ³è§†å£ï¼Œå®šä¹‰äº†ç†æƒ³è§†å£çš„å®½åº¦ï¼Œæ¯”å¦‚å¯¹äºiphone5æ¥è®²ï¼Œç†æƒ³è§†å£æ˜¯320*568ã€‚ä½†æ˜¯æœ€ç»ˆä½œç”¨çš„è¿˜æ˜¯å¸ƒå±€è§†å£ï¼Œå› ä¸ºæˆ‘ä»¬çš„cssæ˜¯ä¾æ®å¸ƒå±€è§†å£è®¡ç®—çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥è¿™æ ·ç†è§£ç†æƒ³è§†å£ï¼š<b>ç†æƒ³çš„å¸ƒå±€è§†å£</b>ã€‚ä¸‹é¢è¿™æ®µä»£ç å¯ä»¥å‘Šè¯‰æ‰‹æœºæµè§ˆå™¨è¦æŠŠå¸ƒå±€è§†å£è®¾ä¸ºç†æƒ³è§†å£ï¼š\n\n```\n<meta name=\"viewport\" content=\"width=device-width\" />\n```\n\nä¸Šé¢é‚£æ®µä»£ç å‘Šè¯‰æµè§ˆå™¨ï¼š<b>å°†å¸ƒå±€è§†å£çš„å®½åº¦è®¾ä¸ºç†æƒ³è§†å£ã€‚</b>æ‰€ä»¥ï¼Œä¸Šé¢ä»£ç ä¸­çš„widthæŒ‡çš„æ˜¯å¸ƒå±€è§†å£çš„å®½ device-width å®é™…ä¸Šå°±æ˜¯ç†æƒ³è§†å£çš„å®½åº¦ã€‚\n\nå¥½äº†ï¼Œç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£ä»‹ç»å®Œäº†ï¼Œè®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼š\n\n> 1ã€åœ¨PCç«¯ï¼Œå¸ƒå±€è§†å£å°±æ˜¯æµè§ˆå™¨çª—å£\n  2ã€åœ¨ç§»åŠ¨ç«¯ï¼Œè§†å£è¢«åˆ†ä¸ºä¸¤ä¸ªï¼šå¸ƒå±€è§†å£ã€è§†è§‰è§†å£ã€‚\n  3ã€ç§»åŠ¨ç«¯è¿˜æœ‰ä¸€ä¸ªç†æƒ³è§†å£ï¼Œå®ƒæ˜¯å¸ƒå±€è§†å£çš„ç†æƒ³å°ºå¯¸ï¼Œå³ç†æƒ³çš„å¸ƒå±€è§†å£ã€‚ï¼ˆæ³¨ï¼šç†æƒ³è§†å£çš„å°ºå¯¸å› è®¾å¤‡å’Œæµè§ˆå™¨çš„ä¸åŒè€Œä¸åŒï¼Œä½†è¿™å¯¹äºæˆ‘ä»¬æ¥è¯´æ— æ‰€è°“ï¼‰\n  4ã€å¯ä»¥å°†å¸ƒå±€è§†å£çš„å®½åº¦è®¾ä¸ºç†æƒ³è§†å£\n\n## ä¸‰ã€è®¾å¤‡åƒç´ æ¯”(DPR) ##\n\nä¸‹é¢ä½ è¿˜éœ€è¦äº†è§£ä¸€ä¸ªæ¦‚å¿µï¼Œè®¾å¤‡åƒç´ æ¯”(Device Pixel Ratio ç®€ç§°ï¼šDPR)ã€‚\nä¸‹é¢æ˜¯è®¾å¤‡åƒç´ æ¯”çš„è®¡ç®—å…¬å¼\n\nå…¬å¼æˆç«‹çš„å¤§å‰æï¼š<b style=\"color: red;\">ï¼ˆç¼©æ”¾æ¯”ä¾‹ä¸º1ï¼‰</b>\n<b>è®¾å¤‡åƒç´ æ¯”(DPR) = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£CSSåƒç´ ä¸ªæ•°(device-width)</b>\n\nä¸ç†æƒ³è§†å£ä¸€æ ·ï¼Œè®¾å¤‡åƒç´ æ¯”å¯¹äºä¸åŒçš„è®¾å¤‡æ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯ä»–ä»¬éƒ½æ˜¯åˆç†çš„ï¼Œæ¯”å¦‚æ—©èµ·iphoneçš„è®¾å¤‡åƒç´ æ˜¯320pxï¼Œç†æƒ³è§†å£ä¹Ÿæ˜¯320pxï¼Œæ‰€ä»¥æ—©èµ·iphoneçš„DPR=1ï¼Œè€Œåæ¥iphoneçš„è®¾å¤‡åƒç´ ä¸º640pxï¼Œç†æƒ³è§†å£è¿˜æ˜¯320pxï¼Œæ‰€ä»¥åæ¥iphoneçš„DPR=2ã€‚åœ¨å¼€å‘ä¸­ï¼Œæ‰“å¼€æµè§ˆå™¨çš„è°ƒè¯•å·¥å…·å¯ä»¥çœ‹åˆ°è®¾å¤‡åƒç´ æ¯”ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![chromeæµè§ˆå™¨è°ƒè¯•å·¥å…·](http://7xlolm.com1.z0.glb.clouddn.com/20150923dpr.png)\n\nå¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—ä»¥ä¸‹ä¿¡æ¯ï¼š\niPhone5çš„ç†æƒ³è§†å£æ˜¯ï¼š320\\*568 <==> device-width = 320ï¼Œdevice-height = 568\niPhone5çš„è®¾å¤‡åƒç´ æ¯”ï¼š2\næ ¹æ®å…¬å¼ï¼š<b>è®¾å¤‡åƒç´ æ¯”(DPR) = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£CSSåƒç´ ä¸ªæ•°(device-width)</b>\nå¯çŸ¥iPhone5çš„è®¾å¤‡åƒç´ ä¸º 640\\*1136\n\n## ç¼©æ”¾ ##\n\nåœ¨è®²è®¾å¤‡åƒç´ æ¯”å…¬å¼çš„æ—¶å€™è®²åˆ°äº†ï¼š\n\n> å…¬å¼æˆç«‹çš„å¤§å‰æï¼š<b style=\"color: red;\">ï¼ˆç¼©æ”¾æ¯”ä¾‹ä¸º1ï¼‰</b>\n  <b>è®¾å¤‡åƒç´ æ¯”(DPR) = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£CSSåƒç´ ä¸ªæ•°(device-width)</b>\n\né‚£ä¹ˆç¼©æ”¾åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¹Ÿè®¸è¿™ä¸ªé—®é¢˜è®©ä½ å¾ˆç–‘æƒ‘ï¼Œå¦‚æœä½ è‡ªå·±é˜…è¯»äº†å‰é¢çš„å†…å®¹ï¼Œä½ ä¼šæ³¨æ„åˆ°CSSåƒç´ çš„å¤§å°æ˜¯å¯å˜å¾—ï¼Œè€Œç¼©æ”¾ä»æŠ€æœ¯å®ç°çš„è§’åº¦æ¥è®²ï¼Œå°±æ˜¯æ”¾å¤§æˆ–ç¼©å°CSSåƒç´ çš„è¿‡ç¨‹ï¼Œæ€ä¹ˆæ ·ï¼Ÿæ˜ç™½äº†å§ï¼Œå½“ä½ ç”¨åŒæŒ‡ç¼©æ”¾é¡µé¢çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ”¾å¤§æˆ–ç¼©å°CSSåƒç´ ï¼Œè‡³äºä»€ä¹ˆæ˜¯CSSåƒç´ ï¼Œæ™•ï¼Œå›å»ä»å¤´å¥½å¥½çœ‹~~~~~\n\nä¹Ÿå­¦ä½ ä¼šè§‰å¾—ç¼©æ”¾æ²¡ä»€ä¹ˆï¼Œä½†æ˜¯ä½ äº†è§£è¿™ä¸ªæ¦‚å¿µè‡³å…³é‡è¦ï¼Œå› ä¸ºåœ¨ã€Šä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« (äºŒ)ã€‹ä¸­ï¼Œä¼šç”¨åˆ°è¿™é‡Œçš„æ¦‚å¿µã€‚å³\n\n> ç¼©æ”¾ï¼šç¼©å°æ”¾å¤§çš„æ˜¯ CSSåƒç´ ã€‚\n\n## metaæ ‡ç­¾ ##\n\nmetaè§†å£æ ‡ç­¾å­˜åœ¨çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è®©å¸ƒå±€è§†å£å’Œç†æƒ³è§†å£çš„å®½åº¦åŒ¹é…ï¼Œmetaè§†å£æ ‡ç­¾åº”è¯¥æ”¾åœ¨HTMLæ–‡æ¡£çš„headæ ‡ç­¾å†…ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\n\n```\n<meta name=\"viewport\" content=\"name=value,name=value\" />\n```\n\nå…¶ä¸­ content å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼Œå­—ç¬¦ä¸²æ˜¯ç”±é€—å·â€œï¼Œâ€åˆ†éš”çš„ å/å€¼ å¯¹ç»„æˆï¼Œå…±æœ‰5ä¸ªï¼š\n\n> 1ã€widthï¼šè®¾ç½®å¸ƒå±€è§†å£çš„å®½\n  2ã€init-scaleï¼šè®¾ç½®é¡µé¢çš„åˆå§‹ç¼©æ”¾ç¨‹åº¦\n  3ã€minimum-scaleï¼šè®¾ç½®äº†é¡µé¢æœ€å°ç¼©æ”¾ç¨‹åº¦\n  4ã€maximum-scaleï¼šè®¾ç½®äº†é¡µé¢æœ€å¤§ç¼©æ”¾ç¨‹åº¦\n  5ã€user-scalableï¼šæ˜¯å¦å…è®¸ç”¨æˆ·å¯¹é¡µé¢è¿›è¡Œç¼©æ”¾æ“ä½œ\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„metaæ ‡ç­¾å®ä¾‹\n\n```\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n```\n\nä¸Šé¢ä»£ç çš„æ„æ€æ˜¯ï¼Œè®©å¸ƒå±€è§†å£çš„å®½åº¦ç­‰äºç†æƒ³è§†å£çš„å®½åº¦ï¼Œé¡µé¢çš„åˆå§‹ç¼©æ”¾æ¯”ä¾‹ä»¥åŠæœ€å¤§ç¼©æ”¾æ¯”ä¾‹éƒ½ä¸º1ï¼Œä¸”ä¸å…è®¸ç”¨æˆ·å¯¹é¡µé¢è¿›è¡Œç¼©æ”¾æ“ä½œã€‚\n\n## åª’ä½“æŸ¥è¯¢ ##\n\nåª’ä½“æŸ¥è¯¢æ˜¯å“åº”å¼è®¾è®¡çš„åŸºç¡€ï¼Œä»–æœ‰ä»¥ä¸‹ä¸‰ç‚¹ä½œç”¨ï¼š\n\n> 1ã€æ£€æµ‹åª’ä½“çš„ç±»å‹ï¼Œæ¯”å¦‚ screenï¼Œtvç­‰\n  2ã€æ£€æµ‹å¸ƒå±€è§†å£çš„ç‰¹æ€§ï¼Œæ¯”å¦‚è§†å£çš„å®½é«˜åˆ†è¾¨ç‡ç­‰\n  3ã€ç‰¹æ€§ç›¸å…³æŸ¥è¯¢ï¼Œæ¯”å¦‚æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒæŸæŸç‰¹æ€§ï¼ˆè¿™ä¸€ç‚¹ä¸è®¨è®ºï¼Œå› ä¸ºå®ƒè¢«ç›®å‰æµè§ˆå™¨æ”¯æŒçš„åŠŸèƒ½å¯¹äºwebå¼€å‘æ¥è®²å¾ˆæ— ç”¨ï¼‰\n\ncssä¸­ä½¿ç”¨åª’ä½“æŸ¥è¯¢çš„è¯­æ³•ï¼š\n\n```\n@media åª’ä½“ç±»å‹ and (è§†å£ç‰¹æ€§é˜€å€¼){\n\t// æ»¡è¶³æ¡ä»¶çš„cssæ ·å¼ä»£ç \n  \n}\n```\n\nä¸‹é¢æ˜¯ä¸€æ®µåœ¨cssä¸­ä½¿ç”¨åª’ä½“æŸ¥è¯¢çš„ç¤ºä¾‹:\n\n```\n@media all and (min-width: 321px) and (max-width: 400px){\n\t.box{\n\t\tbackground: red;\n\t}\n}\n```\n\nä¸Šé¢ä»£ç ä¸­ï¼Œåª’ä½“ç±»å‹ä¸ºallï¼Œä»£è¡¨ä»»ä½•è®¾å¤‡ï¼Œå¹¶ä¸”è®¾å¤‡çš„å¸ƒå±€è§†å£å®½åº¦å¤§äºç­‰äº321pxä¸”å°äºç­‰äº400pxæ—¶ï¼Œè®©æ‹¥æœ‰boxç±»çš„å…ƒç´ èƒŒæ™¯å˜çº¢ã€‚\nè¿™é‡Œåªæ˜¯ç®€å•ä»‹ç»äº†css3çš„åª’ä½“æŸ¥è¯¢ï¼Œä½†æ˜¯ç”¨äºæœ¬ç³»åˆ—æ–‡ç« ï¼ˆæˆ‘ä¹Ÿå‘µå‘µäº†ï¼Œå…¶å®å°±ä¸¤ç¯‡æ–‡ç« è¿™æ˜¯ç¬¬ä¸€ç¯‡ï¼Œç¬¬äºŒç¯‡ä¼šå°½å¿«æ›´æ–°ï¼‰å·²ç»è¶³å¤Ÿç”¨äº†ï¼Œæ„Ÿå…´è¶£æˆ–è€…å¸Œæœ›è·å¾—æ›´å¤šcss3 åª’ä½“æŸ¥è¯¢çŸ¥è¯†çš„åŒå­¦å¯ä»¥åœ¨ç½‘ä¸ŠæŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚\n\nç»è¿‡6ä¸ªå°æ—¶çš„å¥‹æˆ˜ï¼Œå¥½å§ï¼Œç»ˆäºæ•´ç†å¥½äº† ã€Šä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« ã€‹ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä¸º<a href=\"http://hcysun.me/2015/10/19/%E4%B8%80%E7%AF%87%E7%9C%9F%E6%AD%A3%E6%95%99%E4%BC%9A%E4%BD%A0%E5%BC%80%E5%8F%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%96%87%E7%AB%A0-%E4%BA%8C/\">ç¬¬äºŒç¯‡</a>æ–‡ç« è¦å°†åˆ°çš„å†…å®¹æ‰“åŸºç¡€ï¼ŒåŒå­¦ä»¬å¦‚æœä¸äº†è§£å¯ä»¥å¤šé˜…è¯»å³ä¾¿ï¼Œå¦‚æœæœ‰é—®é¢˜æ¬¢è¿è¯„è®ºï¼Œæˆ‘ä¼šåŠæ—¶å›å¤çš„ï¼Œå¦å¤–ï¼Œä¸‹ä¸€ç¯‡æ–‡ç« å°†ä¼šå¸¦æ¥å¹²è´§ï¼ŒçœŸçœŸæ­£æ­£çš„è®©å¤§å®¶æŒæ¡ç§»åŠ¨ç«¯é¡µé¢çš„å¼€å‘ã€‚å¦‚æœä½ å·²ç»é˜…è¯»åˆ°äº†è¿™é‡Œï¼Œæˆ‘å¯¹ä½ è¡¨ç¤ºæ„Ÿè°¢ï¼Œä½ çš„åšæŒä¸€å®šä¼šå¾—åˆ°å›æŠ¥ï¼Œå…±å‹‰ã€‚","source":"_posts/2015/10/16/ä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« (ä¸€).md","raw":"title: ä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« (ä¸€)\ndate: 2015-10-16 10:22:14\ncategories:\n- WebFrontEnd\ntags:\n- css\n- html\n- ç§»åŠ¨é¡µé¢\n---\n\n# ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£ #\n\n> ä»æˆ‘å·¥ä½œä»¥æ¥ï¼Œå¼€å‘çš„ä¸€ç›´éƒ½æ˜¯ç§»åŠ¨ç«¯çš„é¡µé¢ï¼Œåªæœ‰å¶å°”å»å¼€å‘å‡ ä¸ªPCç«¯çš„é¡µé¢ï¼Œç°åœ¨æ˜¯ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£ï¼Œç§»åŠ¨å…ˆè¡Œå·²ç»æ·±å…¥éª¨é«“ï¼Œä½œä¸ºä¸€ä¸ªwebå‰ç«¯å¼€å‘ï¼Œå¦‚æœä½ è¿˜åœ¨ä¸ºå¦‚ä½•å¼€å‘ç§»åŠ¨ç«¯é¡µé¢è€Œè¿·èŒ«ï¼Œæˆ–è€…ä½ è¿˜åœ¨ä¸ºå¼€å‘å‡ºäº†ä¸€ä¸ªåœ¨ä½ æ‰‹æœºä¸Šâ€œå®Œç¾â€çš„ç§»åŠ¨é¡µé¢è€Œæ²¾æ²¾è‡ªå–œå´ä¸çŸ¥ç§»åŠ¨çš„ä¸–ç•Œæœ‰å¤šâ€œæ®‹é…·â€çš„æ—¶å€™ï¼Œé‚£ä½ åº”è¯¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« äº†ã€‚å¸Œæœ›è¿™èƒ½ç»™ä½ å¸®åŠ©ï¼ŒåŒæ—¶ä¹Ÿèƒ½ç»™æˆ‘å¸®åŠ©ï¼Œæœ‰ä¸åˆç†çš„åœ°æ–¹ï¼Œæ¬¢è¿è¯„è®ºæ”¯æŒï¼Œå¿…å°†æ”¹æ­£ã€‚\n\n![ç§»åŠ¨ç«¯](http://7xlolm.com1.z0.glb.clouddn.com/20150923mobile.jpg)\n\n<!-- more -->\n\n# è¿™é‡Œæ˜¯åŸºç¡€ï¼Œä½ äº†è§£å¦ï¼Ÿ #\n\n## ä¸€ã€åƒç´  - ä»€ä¹ˆæ˜¯åƒç´  ##\n\nåƒç´ æ˜¯webé¡µé¢å¸ƒå±€çš„åŸºç¡€ï¼Œé‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ‰æ˜¯ä¸€ä¸ªåƒç´ å‘¢ï¼Ÿ\nåƒç´ ï¼š<b>ä¸€ä¸ªåƒç´ å°±æ˜¯è®¡ç®—æœºå±å¹•æ‰€èƒ½æ˜¾ç¤ºä¸€ç§ç‰¹å®šé¢œè‰²çš„æœ€å°åŒºåŸŸã€‚</b> è¿™æ˜¯åƒç´ çš„æ¦‚å¿µï¼Œå®é™…ä¸Šï¼Œåœ¨webå‰ç«¯å¼€å‘é¢†åŸŸï¼Œåƒç´ æœ‰ä»¥ä¸‹ä¸¤å±‚å«ä¹‰ï¼š\n1ã€<b>è®¾å¤‡åƒç´ ï¼š</b>è®¾å¤‡å±å¹•çš„ç‰©ç†åƒç´ ï¼Œå¯¹äºä»»ä½•è®¾å¤‡æ¥è®²ç‰©ç†åƒç´ çš„æ•°é‡æ˜¯å›ºå®šçš„ã€‚\n2ã€<b>CSSåƒç´ ï¼š</b>è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡çš„åƒç´ æ¦‚å¿µï¼Œå®ƒæ˜¯ä¸ºwebå¼€å‘è€…åˆ›é€ çš„ã€‚\n\nå¦‚ä¸‹å›¾ï¼Œæ˜¯åœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1ï¼Œå³scale = 1çš„æƒ…å†µä¸‹ï¼Œè®¾å¤‡åƒç´ å’ŒCSSåƒç´ ç¤ºæ„å›¾\n\n![è®¾å¤‡åƒç´ å’ŒCSSåƒç´ ](http://7xlolm.com1.z0.glb.clouddn.com/20150923px1.jpg)\n\nç°åœ¨ä½ å·²ç»äº†è§£äº†ï¼ŒåŸæ¥åƒç´ å¯¹äºwebå‰ç«¯å¼€å‘æ¥è®²æœ‰è¿™æ ·çš„ä¸¤å±‚å«ä¹‰ï¼Œé‚£ä¹ˆä½ æœ‰æ²¡æœ‰å†æ·±å…¥çš„è€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ç»™ä¸€ä¸ªå…ƒç´ è®¾ç½®äº† <b>width: 200px;</b> è¿™æ¡æ ·å¼çš„æ—¶å€™ï¼Œåˆ°åº•æ”¾ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ\nä½ å¯èƒ½ä¼šè¯´ï¼šâ€œåºŸè¯ï¼å…ƒç´ çš„å®½åº¦æ˜¯200pxå‘—ã€‚â€ï¼›å¯¹ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸ª200pxæŒ‡çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºwebå‰ç«¯æ¥è®²åƒç´ æœ‰ä¸¤å±‚å«ä¹‰ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯è®¾å¤‡åƒç´ è¿˜æ˜¯CSSåƒç´ ï¼Ÿå®é™…ä¸Šæˆ‘ä»¬æ§åˆ¶çš„æ˜¯CSSåƒç´ ï¼Œå› ä¸ºå‰é¢æåˆ°äº†ï¼ŒCSSåƒç´ æ˜¯ç»™æˆ‘ä»¬webå‰ç«¯å¼€å‘è€…åˆ›é€ çš„æŠ½è±¡æ¦‚å¿µã€‚æ‰€ä»¥ä½ è¦è®°ä½ï¼š<b>å½“ä½ ç»™å…ƒç´ è®¾ç½®äº† width: 200px æ—¶ï¼Œè¿™ä¸ªå…ƒç´ çš„å®½åº¦è·¨è¶Šäº†200ä¸ªCSSåƒç´ </b>ã€‚ä½†æ˜¯å®ƒå¹¶ä¸ä¸€å®šè·¨è¶Š200ä¸ªè®¾å¤‡åƒç´ ï¼Œè‡³äºä¼šè·¨è¶Šå¤šå°‘ä¸ªè®¾å¤‡åƒç´ ï¼Œå°±å–å†³äº<b>æ‰‹æœºå±å¹•çš„ç‰¹æ€§</b>å’Œ<b>ç”¨æˆ·çš„ç¼©æ”¾</b>äº†,ä¸¾ä¸ªæ —å­ï¼š\n\nè‹¹æœæ‰‹æœºçš„è§†ç½‘è†œå±å¹•ï¼Œæ˜¯ä¸€ä¸ªé«˜å¯†åº¦å±å¹•ï¼Œå®ƒçš„åƒç´ å¯†åº¦æ˜¯æ™®é€šå±å¹•çš„2å€ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è®¾ç½® <b>width: 200px;</b> æ—¶ï¼Œ200ä¸ªCSSåƒç´ è·¨è¶Šäº†400ä¸ªè®¾å¤‡åƒç´ ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![è‹¹æœè§†ç½‘è†œå±å¹•çš„è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/20150923px2.jpg)\n\nå¦‚æœç”¨æˆ·ç¼©å°é¡µé¢ï¼Œé‚£ä¹ˆä¸€ä¸ªCSSåƒç´ ä¼šæ˜æ˜¾å°äºä¸€ä¸ªè®¾å¤‡åƒç´ ï¼Œè¿™ä¸ªæ—¶å€™ <b>width: 200px;</b> è¿™æ¡æ ·å¼ä¸­æ‰€è®¾ç½®çš„200ä¸ªCSSåƒç´ è·¨è¶Šä¸äº†200ä¸ªè®¾å¤‡åƒç´ ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![ç”¨æˆ·ç¼©é¡µé¢æ—¶è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/20150923px3.jpg)\n\nè®©æˆ‘ä»¬æ¥åšä¸€ä¸ªæ€»ç»“\n\n> 1ã€webå‰ç«¯é¢†åŸŸï¼Œåƒç´ åˆ†ä¸º<b>è®¾å¤‡åƒç´ </b>å’Œ<b>CSSåƒç´ </b>\n  3ã€ä¸€ä¸ªCSSåƒç´ çš„å¤§å°æ˜¯å¯å˜çš„ï¼Œæ¯”å¦‚ç”¨åç¼©æ”¾é¡µé¢çš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨ç¼©å°æˆ–æ”¾å¤§CSSåƒç´ ï¼Œè€Œè®¾å¤‡åƒç´ æ— è®ºå¤§å°è¿˜æ˜¯æ•°é‡éƒ½æ˜¯ä¸å˜çš„ã€‚\n\n## äºŒã€ç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£ ##\n\nä¸€çœ‹æ ‡é¢˜ï¼Œä½ æ˜¯ä¸æ˜¯è’™äº†ï¼Ÿä¸‰ä¸ªè§†å£ï¼Ÿä»€ä¹ˆä¸‰ä¸ªè§†å£ï¼Ÿå…ˆåˆ«æ€¥ï¼Œè®©æˆ‘ä»¬æ…¢æ…¢æ¥è®²ã€‚\nä½ ä¸€å®šå†™è¿‡è¿™æ ·ä¸€æ¡æ ·å¼ï¼š<b>width: 25%;</b> ä½†æ˜¯ä½ æœ‰æƒ³è¿‡ç»™ä¸€ä¸ªå…ƒç´ åŠ ä¸Šè¿™æ ·ä¸€æ¡æ ·å¼ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆå—ï¼Ÿ25%æ˜¯åŸºäºè°çš„25%ï¼Ÿæ˜ç™½çš„åŒå­¦å¯èƒ½çŸ¥é“äº†ï¼šä¸€ä¸ªå—å…ƒç´ é»˜è®¤çš„å®½åº¦æ˜¯å…¶çˆ¶å…ƒç´ çš„100%ï¼Œæ˜¯åŸºäºèµ·çˆ¶å…ƒç´ çš„ï¼Œæ‰€ä»¥25%æŒ‡çš„æ˜¯çˆ¶å…ƒç´ å®½åº¦çš„25%ï¼Œæ‰€ä»¥ï¼Œ<b>body</b>å…ƒç´ çš„é»˜è®¤å®½åº¦æ˜¯<b>html</b>å…ƒç´ å®½åº¦çš„100%ï¼Œé‚£ä¹ˆä½ æœ‰æ²¡æœ‰æƒ³è¿‡<b>html</b>å…ƒç´ çš„å®½åº¦æ˜¯åŸºäºè°çš„å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ï¼Œå°±è¦å¼•å‡ºä¸€ä¸ªæ¦‚å¿µï¼š<b style=\"color: red;\">åˆå§‹åŒ…å«å—å’Œè§†å£äº†</b>\n\nè®°ä½ä¸€å¥è¯ï¼š<b>è§†å£æ˜¯htmlçš„çˆ¶å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬ç§°è§†å£ä¸ºåˆå§‹åŒ…å«å—ã€‚</b> è¿™æ ·ä½ å°±æ˜ç™½äº†ï¼Œhtmlå…ƒç´ çš„ç™¾åˆ†æ¯”æ˜¯åŸºäºè§†å£çš„ã€‚\n\n### ç¬¬ä¸€ä¸ªè§†å£ï¼šå¸ƒå±€è§†å£ ###\n\né¦–å…ˆä½ éœ€è¦äº†è§£ä¸€ä¸ªåŸå› ï¼šæµè§ˆå™¨å‚å•†æ˜¯å¸Œæœ›æ»¡è¶³ç”¨æˆ·çš„è¦æ±‚çš„ï¼Œå³åœ¨æ‰‹æœºä¹Ÿèƒ½æµè§ˆä¸ºPCç«¯è®¾è®¡çš„ç½‘ç«™ï¼Œæ‰€ä»¥æµè§ˆå™¨å‚å•†å¿…é¡»æƒ³åŠæ³•æ¥åœ¨æ»¡è¶³~\nåœ¨PCæµè§ˆå™¨ä¸­ï¼Œè§†å£åªæœ‰ä¸€ä¸ªï¼Œå¹¶ä¸” <b>è§†å£çš„å®½åº¦</b> = <b>æµè§ˆå™¨çª—å£çš„å®½åº¦</b>ï¼Œä½†æ˜¯åœ¨ç§»åŠ¨ç«¯ä¹Ÿè¦æ ¹æ®è¿™ä¸ªæ¥è®¾è®¡çš„è¯ï¼Œé‚£ä¹ˆPCç«¯è®¾è®¡çš„ç½‘ç«™åœ¨ç§»åŠ¨ç«¯çœ‹èµ·æ¥ä¼šå¾ˆä¸‘ï¼Œå› ä¸ºPCç«¯çš„ç½‘é¡µå®½åº¦åœ¨800 ~ 1024ä¸ªCSSåƒç´ ï¼Œè€Œæ‰‹æœºå±å¹•è¦çª„çš„å¤šï¼Œè¿™ä¸ªæ—¶å€™å†PCç«¯25%çš„å®½åº¦åœ¨ç§»åŠ¨ç«¯çœ‹èµ·æ¥ä¼šå¾ˆçª„ã€‚æ‰€ä»¥ï¼Œå¸ƒå±€è§†å£çš„æ¦‚å¿µäº§ç”Ÿäº†ã€‚\n\nå¸ƒå±€æ˜¯å£ï¼šç§»åŠ¨ç«¯CSSå¸ƒå±€çš„ä¾æ®è§†å£ï¼Œå³CSSå¸ƒå±€ä¼šæ ¹æ®å¸ƒå±€è§†å£æ¥è®¡ç®—ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç§»åŠ¨ç«¯ï¼Œè§†å£å’Œæµè§ˆå™¨çª—å£å°†ä¸åœ¨å…³è”ï¼Œå®é™…ä¸Šï¼Œå¸ƒå±€è§†å£è¦æ¯”æµè§ˆå™¨çª—å£å¤§çš„å¤š(åœ¨æ‰‹æœºå’Œå¹³æ¿ä¸­æµè§ˆå™¨å¸ƒå±€è§†å£çš„å®½åº¦åœ¨768~1024åƒç´ ä¹‹é—´)ï¼Œå¦‚ä¸‹å›¾ï¼ˆå¸ƒå±€è§†å£å’Œçª—å£çš„å…³ç³»ï¼‰ï¼š\n\n![å¸ƒå±€æ˜¯å£å’Œæµè§ˆå™¨çª—å£çš„å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/20150923px4.jpg)\n\nå¯ä»¥é€šè¿‡ä»¥ä¸‹JavaScriptä»£ç è·å–å¸ƒå±€è§†å£çš„å®½åº¦å’Œé«˜åº¦ï¼š\n\n```\ndocument.documentElement.clientWidth\ndocument.documentElement.clientHeight\n```\n\n### ç¬¬äºŒä¸ªè§†å£ï¼šè§†è§‰è§†å£ ###\n\nè§†è§‰è§†å£å¯èƒ½è¦æ›´å¥½ç†è§£ä¸€äº›ï¼Œä»–å°±æ˜¯ç”¨æˆ·æ­£åœ¨çœ‹åˆ°ç½‘ç«™çš„åŒºåŸŸï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![è§†è§‰è§†å£](http://7xlolm.com1.z0.glb.clouddn.com/20150923px5.jpg)\n\n### ç¬¬ä¸‰ä¸ªè§†å£ï¼šç†æƒ³è§†å£ ###\n\nç†æƒ³è§†å£ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€éœ€è¦å…³æ³¨çš„è§†å£ï¼Œç°åœ¨æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹æˆ‘ä»¬çŸ¥é“äº†å“ªäº›è§†å£ï¼Œæœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼šå¸ƒå±€è§†å£ï¼Œè§†è§‰è§†å£ã€‚\næˆ‘ä»¬å‰é¢æåˆ°è¿‡ï¼Œå¸ƒå±€è§†å£çš„å®½åº¦ä¸€èˆ¬åœ¨ 680~1024åƒç´ ä¹‹é—´ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—PCç½‘ç«™åœ¨æ‰‹æœºä¸­ä¸è¢«å‹æ‰ï¼Œä½†æ˜¯è¿™å¹¶ä¸ç†æƒ³ï¼Œå› ä¸ºæ‰‹æœºæ›´é€‚åˆçª„çš„ç½‘ç«™ï¼Œæ¢å¥è¯è¯´ï¼Œå¸ƒå±€è§†å£å¹¶ä¸æ˜¯æœ€ç†æƒ³çš„å®½åº¦ï¼Œæ‰€ä»¥ï¼Œå°±å¼•å…¥äº†ç†æƒ³è§†å£ã€‚\n\nç†æƒ³è§†å£ï¼Œå®šä¹‰äº†ç†æƒ³è§†å£çš„å®½åº¦ï¼Œæ¯”å¦‚å¯¹äºiphone5æ¥è®²ï¼Œç†æƒ³è§†å£æ˜¯320*568ã€‚ä½†æ˜¯æœ€ç»ˆä½œç”¨çš„è¿˜æ˜¯å¸ƒå±€è§†å£ï¼Œå› ä¸ºæˆ‘ä»¬çš„cssæ˜¯ä¾æ®å¸ƒå±€è§†å£è®¡ç®—çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥è¿™æ ·ç†è§£ç†æƒ³è§†å£ï¼š<b>ç†æƒ³çš„å¸ƒå±€è§†å£</b>ã€‚ä¸‹é¢è¿™æ®µä»£ç å¯ä»¥å‘Šè¯‰æ‰‹æœºæµè§ˆå™¨è¦æŠŠå¸ƒå±€è§†å£è®¾ä¸ºç†æƒ³è§†å£ï¼š\n\n```\n<meta name=\"viewport\" content=\"width=device-width\" />\n```\n\nä¸Šé¢é‚£æ®µä»£ç å‘Šè¯‰æµè§ˆå™¨ï¼š<b>å°†å¸ƒå±€è§†å£çš„å®½åº¦è®¾ä¸ºç†æƒ³è§†å£ã€‚</b>æ‰€ä»¥ï¼Œä¸Šé¢ä»£ç ä¸­çš„widthæŒ‡çš„æ˜¯å¸ƒå±€è§†å£çš„å®½ device-width å®é™…ä¸Šå°±æ˜¯ç†æƒ³è§†å£çš„å®½åº¦ã€‚\n\nå¥½äº†ï¼Œç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£ä»‹ç»å®Œäº†ï¼Œè®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼š\n\n> 1ã€åœ¨PCç«¯ï¼Œå¸ƒå±€è§†å£å°±æ˜¯æµè§ˆå™¨çª—å£\n  2ã€åœ¨ç§»åŠ¨ç«¯ï¼Œè§†å£è¢«åˆ†ä¸ºä¸¤ä¸ªï¼šå¸ƒå±€è§†å£ã€è§†è§‰è§†å£ã€‚\n  3ã€ç§»åŠ¨ç«¯è¿˜æœ‰ä¸€ä¸ªç†æƒ³è§†å£ï¼Œå®ƒæ˜¯å¸ƒå±€è§†å£çš„ç†æƒ³å°ºå¯¸ï¼Œå³ç†æƒ³çš„å¸ƒå±€è§†å£ã€‚ï¼ˆæ³¨ï¼šç†æƒ³è§†å£çš„å°ºå¯¸å› è®¾å¤‡å’Œæµè§ˆå™¨çš„ä¸åŒè€Œä¸åŒï¼Œä½†è¿™å¯¹äºæˆ‘ä»¬æ¥è¯´æ— æ‰€è°“ï¼‰\n  4ã€å¯ä»¥å°†å¸ƒå±€è§†å£çš„å®½åº¦è®¾ä¸ºç†æƒ³è§†å£\n\n## ä¸‰ã€è®¾å¤‡åƒç´ æ¯”(DPR) ##\n\nä¸‹é¢ä½ è¿˜éœ€è¦äº†è§£ä¸€ä¸ªæ¦‚å¿µï¼Œè®¾å¤‡åƒç´ æ¯”(Device Pixel Ratio ç®€ç§°ï¼šDPR)ã€‚\nä¸‹é¢æ˜¯è®¾å¤‡åƒç´ æ¯”çš„è®¡ç®—å…¬å¼\n\nå…¬å¼æˆç«‹çš„å¤§å‰æï¼š<b style=\"color: red;\">ï¼ˆç¼©æ”¾æ¯”ä¾‹ä¸º1ï¼‰</b>\n<b>è®¾å¤‡åƒç´ æ¯”(DPR) = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£CSSåƒç´ ä¸ªæ•°(device-width)</b>\n\nä¸ç†æƒ³è§†å£ä¸€æ ·ï¼Œè®¾å¤‡åƒç´ æ¯”å¯¹äºä¸åŒçš„è®¾å¤‡æ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯ä»–ä»¬éƒ½æ˜¯åˆç†çš„ï¼Œæ¯”å¦‚æ—©èµ·iphoneçš„è®¾å¤‡åƒç´ æ˜¯320pxï¼Œç†æƒ³è§†å£ä¹Ÿæ˜¯320pxï¼Œæ‰€ä»¥æ—©èµ·iphoneçš„DPR=1ï¼Œè€Œåæ¥iphoneçš„è®¾å¤‡åƒç´ ä¸º640pxï¼Œç†æƒ³è§†å£è¿˜æ˜¯320pxï¼Œæ‰€ä»¥åæ¥iphoneçš„DPR=2ã€‚åœ¨å¼€å‘ä¸­ï¼Œæ‰“å¼€æµè§ˆå™¨çš„è°ƒè¯•å·¥å…·å¯ä»¥çœ‹åˆ°è®¾å¤‡åƒç´ æ¯”ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![chromeæµè§ˆå™¨è°ƒè¯•å·¥å…·](http://7xlolm.com1.z0.glb.clouddn.com/20150923dpr.png)\n\nå¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—ä»¥ä¸‹ä¿¡æ¯ï¼š\niPhone5çš„ç†æƒ³è§†å£æ˜¯ï¼š320\\*568 <==> device-width = 320ï¼Œdevice-height = 568\niPhone5çš„è®¾å¤‡åƒç´ æ¯”ï¼š2\næ ¹æ®å…¬å¼ï¼š<b>è®¾å¤‡åƒç´ æ¯”(DPR) = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£CSSåƒç´ ä¸ªæ•°(device-width)</b>\nå¯çŸ¥iPhone5çš„è®¾å¤‡åƒç´ ä¸º 640\\*1136\n\n## ç¼©æ”¾ ##\n\nåœ¨è®²è®¾å¤‡åƒç´ æ¯”å…¬å¼çš„æ—¶å€™è®²åˆ°äº†ï¼š\n\n> å…¬å¼æˆç«‹çš„å¤§å‰æï¼š<b style=\"color: red;\">ï¼ˆç¼©æ”¾æ¯”ä¾‹ä¸º1ï¼‰</b>\n  <b>è®¾å¤‡åƒç´ æ¯”(DPR) = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£CSSåƒç´ ä¸ªæ•°(device-width)</b>\n\né‚£ä¹ˆç¼©æ”¾åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¹Ÿè®¸è¿™ä¸ªé—®é¢˜è®©ä½ å¾ˆç–‘æƒ‘ï¼Œå¦‚æœä½ è‡ªå·±é˜…è¯»äº†å‰é¢çš„å†…å®¹ï¼Œä½ ä¼šæ³¨æ„åˆ°CSSåƒç´ çš„å¤§å°æ˜¯å¯å˜å¾—ï¼Œè€Œç¼©æ”¾ä»æŠ€æœ¯å®ç°çš„è§’åº¦æ¥è®²ï¼Œå°±æ˜¯æ”¾å¤§æˆ–ç¼©å°CSSåƒç´ çš„è¿‡ç¨‹ï¼Œæ€ä¹ˆæ ·ï¼Ÿæ˜ç™½äº†å§ï¼Œå½“ä½ ç”¨åŒæŒ‡ç¼©æ”¾é¡µé¢çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ”¾å¤§æˆ–ç¼©å°CSSåƒç´ ï¼Œè‡³äºä»€ä¹ˆæ˜¯CSSåƒç´ ï¼Œæ™•ï¼Œå›å»ä»å¤´å¥½å¥½çœ‹~~~~~\n\nä¹Ÿå­¦ä½ ä¼šè§‰å¾—ç¼©æ”¾æ²¡ä»€ä¹ˆï¼Œä½†æ˜¯ä½ äº†è§£è¿™ä¸ªæ¦‚å¿µè‡³å…³é‡è¦ï¼Œå› ä¸ºåœ¨ã€Šä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« (äºŒ)ã€‹ä¸­ï¼Œä¼šç”¨åˆ°è¿™é‡Œçš„æ¦‚å¿µã€‚å³\n\n> ç¼©æ”¾ï¼šç¼©å°æ”¾å¤§çš„æ˜¯ CSSåƒç´ ã€‚\n\n## metaæ ‡ç­¾ ##\n\nmetaè§†å£æ ‡ç­¾å­˜åœ¨çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è®©å¸ƒå±€è§†å£å’Œç†æƒ³è§†å£çš„å®½åº¦åŒ¹é…ï¼Œmetaè§†å£æ ‡ç­¾åº”è¯¥æ”¾åœ¨HTMLæ–‡æ¡£çš„headæ ‡ç­¾å†…ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\n\n```\n<meta name=\"viewport\" content=\"name=value,name=value\" />\n```\n\nå…¶ä¸­ content å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼Œå­—ç¬¦ä¸²æ˜¯ç”±é€—å·â€œï¼Œâ€åˆ†éš”çš„ å/å€¼ å¯¹ç»„æˆï¼Œå…±æœ‰5ä¸ªï¼š\n\n> 1ã€widthï¼šè®¾ç½®å¸ƒå±€è§†å£çš„å®½\n  2ã€init-scaleï¼šè®¾ç½®é¡µé¢çš„åˆå§‹ç¼©æ”¾ç¨‹åº¦\n  3ã€minimum-scaleï¼šè®¾ç½®äº†é¡µé¢æœ€å°ç¼©æ”¾ç¨‹åº¦\n  4ã€maximum-scaleï¼šè®¾ç½®äº†é¡µé¢æœ€å¤§ç¼©æ”¾ç¨‹åº¦\n  5ã€user-scalableï¼šæ˜¯å¦å…è®¸ç”¨æˆ·å¯¹é¡µé¢è¿›è¡Œç¼©æ”¾æ“ä½œ\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„metaæ ‡ç­¾å®ä¾‹\n\n```\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n```\n\nä¸Šé¢ä»£ç çš„æ„æ€æ˜¯ï¼Œè®©å¸ƒå±€è§†å£çš„å®½åº¦ç­‰äºç†æƒ³è§†å£çš„å®½åº¦ï¼Œé¡µé¢çš„åˆå§‹ç¼©æ”¾æ¯”ä¾‹ä»¥åŠæœ€å¤§ç¼©æ”¾æ¯”ä¾‹éƒ½ä¸º1ï¼Œä¸”ä¸å…è®¸ç”¨æˆ·å¯¹é¡µé¢è¿›è¡Œç¼©æ”¾æ“ä½œã€‚\n\n## åª’ä½“æŸ¥è¯¢ ##\n\nåª’ä½“æŸ¥è¯¢æ˜¯å“åº”å¼è®¾è®¡çš„åŸºç¡€ï¼Œä»–æœ‰ä»¥ä¸‹ä¸‰ç‚¹ä½œç”¨ï¼š\n\n> 1ã€æ£€æµ‹åª’ä½“çš„ç±»å‹ï¼Œæ¯”å¦‚ screenï¼Œtvç­‰\n  2ã€æ£€æµ‹å¸ƒå±€è§†å£çš„ç‰¹æ€§ï¼Œæ¯”å¦‚è§†å£çš„å®½é«˜åˆ†è¾¨ç‡ç­‰\n  3ã€ç‰¹æ€§ç›¸å…³æŸ¥è¯¢ï¼Œæ¯”å¦‚æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒæŸæŸç‰¹æ€§ï¼ˆè¿™ä¸€ç‚¹ä¸è®¨è®ºï¼Œå› ä¸ºå®ƒè¢«ç›®å‰æµè§ˆå™¨æ”¯æŒçš„åŠŸèƒ½å¯¹äºwebå¼€å‘æ¥è®²å¾ˆæ— ç”¨ï¼‰\n\ncssä¸­ä½¿ç”¨åª’ä½“æŸ¥è¯¢çš„è¯­æ³•ï¼š\n\n```\n@media åª’ä½“ç±»å‹ and (è§†å£ç‰¹æ€§é˜€å€¼){\n\t// æ»¡è¶³æ¡ä»¶çš„cssæ ·å¼ä»£ç \n  \n}\n```\n\nä¸‹é¢æ˜¯ä¸€æ®µåœ¨cssä¸­ä½¿ç”¨åª’ä½“æŸ¥è¯¢çš„ç¤ºä¾‹:\n\n```\n@media all and (min-width: 321px) and (max-width: 400px){\n\t.box{\n\t\tbackground: red;\n\t}\n}\n```\n\nä¸Šé¢ä»£ç ä¸­ï¼Œåª’ä½“ç±»å‹ä¸ºallï¼Œä»£è¡¨ä»»ä½•è®¾å¤‡ï¼Œå¹¶ä¸”è®¾å¤‡çš„å¸ƒå±€è§†å£å®½åº¦å¤§äºç­‰äº321pxä¸”å°äºç­‰äº400pxæ—¶ï¼Œè®©æ‹¥æœ‰boxç±»çš„å…ƒç´ èƒŒæ™¯å˜çº¢ã€‚\nè¿™é‡Œåªæ˜¯ç®€å•ä»‹ç»äº†css3çš„åª’ä½“æŸ¥è¯¢ï¼Œä½†æ˜¯ç”¨äºæœ¬ç³»åˆ—æ–‡ç« ï¼ˆæˆ‘ä¹Ÿå‘µå‘µäº†ï¼Œå…¶å®å°±ä¸¤ç¯‡æ–‡ç« è¿™æ˜¯ç¬¬ä¸€ç¯‡ï¼Œç¬¬äºŒç¯‡ä¼šå°½å¿«æ›´æ–°ï¼‰å·²ç»è¶³å¤Ÿç”¨äº†ï¼Œæ„Ÿå…´è¶£æˆ–è€…å¸Œæœ›è·å¾—æ›´å¤šcss3 åª’ä½“æŸ¥è¯¢çŸ¥è¯†çš„åŒå­¦å¯ä»¥åœ¨ç½‘ä¸ŠæŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚\n\nç»è¿‡6ä¸ªå°æ—¶çš„å¥‹æˆ˜ï¼Œå¥½å§ï¼Œç»ˆäºæ•´ç†å¥½äº† ã€Šä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« ã€‹ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä¸º<a href=\"http://hcysun.me/2015/10/19/%E4%B8%80%E7%AF%87%E7%9C%9F%E6%AD%A3%E6%95%99%E4%BC%9A%E4%BD%A0%E5%BC%80%E5%8F%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%96%87%E7%AB%A0-%E4%BA%8C/\">ç¬¬äºŒç¯‡</a>æ–‡ç« è¦å°†åˆ°çš„å†…å®¹æ‰“åŸºç¡€ï¼ŒåŒå­¦ä»¬å¦‚æœä¸äº†è§£å¯ä»¥å¤šé˜…è¯»å³ä¾¿ï¼Œå¦‚æœæœ‰é—®é¢˜æ¬¢è¿è¯„è®ºï¼Œæˆ‘ä¼šåŠæ—¶å›å¤çš„ï¼Œå¦å¤–ï¼Œä¸‹ä¸€ç¯‡æ–‡ç« å°†ä¼šå¸¦æ¥å¹²è´§ï¼ŒçœŸçœŸæ­£æ­£çš„è®©å¤§å®¶æŒæ¡ç§»åŠ¨ç«¯é¡µé¢çš„å¼€å‘ã€‚å¦‚æœä½ å·²ç»é˜…è¯»åˆ°äº†è¿™é‡Œï¼Œæˆ‘å¯¹ä½ è¡¨ç¤ºæ„Ÿè°¢ï¼Œä½ çš„åšæŒä¸€å®šä¼šå¾—åˆ°å›æŠ¥ï¼Œå…±å‹‰ã€‚","slug":"ä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« (ä¸€)","published":1,"updated":"2017-07-17T12:58:23.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx517000647fywcfei7bb","content":"<h1 id=\"ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£\"><a href=\"#ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£\" class=\"headerlink\" title=\"ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£\"></a>ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£</h1><blockquote>\n<p>ä»æˆ‘å·¥ä½œä»¥æ¥ï¼Œå¼€å‘çš„ä¸€ç›´éƒ½æ˜¯ç§»åŠ¨ç«¯çš„é¡µé¢ï¼Œåªæœ‰å¶å°”å»å¼€å‘å‡ ä¸ªPCç«¯çš„é¡µé¢ï¼Œç°åœ¨æ˜¯ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£ï¼Œç§»åŠ¨å…ˆè¡Œå·²ç»æ·±å…¥éª¨é«“ï¼Œä½œä¸ºä¸€ä¸ªwebå‰ç«¯å¼€å‘ï¼Œå¦‚æœä½ è¿˜åœ¨ä¸ºå¦‚ä½•å¼€å‘ç§»åŠ¨ç«¯é¡µé¢è€Œè¿·èŒ«ï¼Œæˆ–è€…ä½ è¿˜åœ¨ä¸ºå¼€å‘å‡ºäº†ä¸€ä¸ªåœ¨ä½ æ‰‹æœºä¸Šâ€œå®Œç¾â€çš„ç§»åŠ¨é¡µé¢è€Œæ²¾æ²¾è‡ªå–œå´ä¸çŸ¥ç§»åŠ¨çš„ä¸–ç•Œæœ‰å¤šâ€œæ®‹é…·â€çš„æ—¶å€™ï¼Œé‚£ä½ åº”è¯¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« äº†ã€‚å¸Œæœ›è¿™èƒ½ç»™ä½ å¸®åŠ©ï¼ŒåŒæ—¶ä¹Ÿèƒ½ç»™æˆ‘å¸®åŠ©ï¼Œæœ‰ä¸åˆç†çš„åœ°æ–¹ï¼Œæ¬¢è¿è¯„è®ºæ”¯æŒï¼Œå¿…å°†æ”¹æ­£ã€‚</p>\n</blockquote>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923mobile.jpg\" alt=\"ç§»åŠ¨ç«¯\"></p>\n<a id=\"more\"></a>\n<h1 id=\"è¿™é‡Œæ˜¯åŸºç¡€ï¼Œä½ äº†è§£å¦ï¼Ÿ\"><a href=\"#è¿™é‡Œæ˜¯åŸºç¡€ï¼Œä½ äº†è§£å¦ï¼Ÿ\" class=\"headerlink\" title=\"è¿™é‡Œæ˜¯åŸºç¡€ï¼Œä½ äº†è§£å¦ï¼Ÿ\"></a>è¿™é‡Œæ˜¯åŸºç¡€ï¼Œä½ äº†è§£å¦ï¼Ÿ</h1><h2 id=\"ä¸€ã€åƒç´ -ä»€ä¹ˆæ˜¯åƒç´ \"><a href=\"#ä¸€ã€åƒç´ -ä»€ä¹ˆæ˜¯åƒç´ \" class=\"headerlink\" title=\"ä¸€ã€åƒç´  - ä»€ä¹ˆæ˜¯åƒç´ \"></a>ä¸€ã€åƒç´  - ä»€ä¹ˆæ˜¯åƒç´ </h2><p>åƒç´ æ˜¯webé¡µé¢å¸ƒå±€çš„åŸºç¡€ï¼Œé‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ‰æ˜¯ä¸€ä¸ªåƒç´ å‘¢ï¼Ÿ<br>åƒç´ ï¼š<b>ä¸€ä¸ªåƒç´ å°±æ˜¯è®¡ç®—æœºå±å¹•æ‰€èƒ½æ˜¾ç¤ºä¸€ç§ç‰¹å®šé¢œè‰²çš„æœ€å°åŒºåŸŸã€‚</b> è¿™æ˜¯åƒç´ çš„æ¦‚å¿µï¼Œå®é™…ä¸Šï¼Œåœ¨webå‰ç«¯å¼€å‘é¢†åŸŸï¼Œåƒç´ æœ‰ä»¥ä¸‹ä¸¤å±‚å«ä¹‰ï¼š<br>1ã€<b>è®¾å¤‡åƒç´ ï¼š</b>è®¾å¤‡å±å¹•çš„ç‰©ç†åƒç´ ï¼Œå¯¹äºä»»ä½•è®¾å¤‡æ¥è®²ç‰©ç†åƒç´ çš„æ•°é‡æ˜¯å›ºå®šçš„ã€‚<br>2ã€<b>CSSåƒç´ ï¼š</b>è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡çš„åƒç´ æ¦‚å¿µï¼Œå®ƒæ˜¯ä¸ºwebå¼€å‘è€…åˆ›é€ çš„ã€‚</p>\n<p>å¦‚ä¸‹å›¾ï¼Œæ˜¯åœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1ï¼Œå³scale = 1çš„æƒ…å†µä¸‹ï¼Œè®¾å¤‡åƒç´ å’ŒCSSåƒç´ ç¤ºæ„å›¾</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923px1.jpg\" alt=\"è®¾å¤‡åƒç´ å’ŒCSSåƒç´ \"></p>\n<p>ç°åœ¨ä½ å·²ç»äº†è§£äº†ï¼ŒåŸæ¥åƒç´ å¯¹äºwebå‰ç«¯å¼€å‘æ¥è®²æœ‰è¿™æ ·çš„ä¸¤å±‚å«ä¹‰ï¼Œé‚£ä¹ˆä½ æœ‰æ²¡æœ‰å†æ·±å…¥çš„è€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ç»™ä¸€ä¸ªå…ƒç´ è®¾ç½®äº† <b>width: 200px;</b> è¿™æ¡æ ·å¼çš„æ—¶å€™ï¼Œåˆ°åº•æ”¾ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ<br>ä½ å¯èƒ½ä¼šè¯´ï¼šâ€œåºŸè¯ï¼å…ƒç´ çš„å®½åº¦æ˜¯200pxå‘—ã€‚â€ï¼›å¯¹ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸ª200pxæŒ‡çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºwebå‰ç«¯æ¥è®²åƒç´ æœ‰ä¸¤å±‚å«ä¹‰ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯è®¾å¤‡åƒç´ è¿˜æ˜¯CSSåƒç´ ï¼Ÿå®é™…ä¸Šæˆ‘ä»¬æ§åˆ¶çš„æ˜¯CSSåƒç´ ï¼Œå› ä¸ºå‰é¢æåˆ°äº†ï¼ŒCSSåƒç´ æ˜¯ç»™æˆ‘ä»¬webå‰ç«¯å¼€å‘è€…åˆ›é€ çš„æŠ½è±¡æ¦‚å¿µã€‚æ‰€ä»¥ä½ è¦è®°ä½ï¼š<b>å½“ä½ ç»™å…ƒç´ è®¾ç½®äº† width: 200px æ—¶ï¼Œè¿™ä¸ªå…ƒç´ çš„å®½åº¦è·¨è¶Šäº†200ä¸ªCSSåƒç´ </b>ã€‚ä½†æ˜¯å®ƒå¹¶ä¸ä¸€å®šè·¨è¶Š200ä¸ªè®¾å¤‡åƒç´ ï¼Œè‡³äºä¼šè·¨è¶Šå¤šå°‘ä¸ªè®¾å¤‡åƒç´ ï¼Œå°±å–å†³äº<b>æ‰‹æœºå±å¹•çš„ç‰¹æ€§</b>å’Œ<b>ç”¨æˆ·çš„ç¼©æ”¾</b>äº†,ä¸¾ä¸ªæ —å­ï¼š</p>\n<p>è‹¹æœæ‰‹æœºçš„è§†ç½‘è†œå±å¹•ï¼Œæ˜¯ä¸€ä¸ªé«˜å¯†åº¦å±å¹•ï¼Œå®ƒçš„åƒç´ å¯†åº¦æ˜¯æ™®é€šå±å¹•çš„2å€ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è®¾ç½® <b>width: 200px;</b> æ—¶ï¼Œ200ä¸ªCSSåƒç´ è·¨è¶Šäº†400ä¸ªè®¾å¤‡åƒç´ ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923px2.jpg\" alt=\"è‹¹æœè§†ç½‘è†œå±å¹•çš„è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»\"></p>\n<p>å¦‚æœç”¨æˆ·ç¼©å°é¡µé¢ï¼Œé‚£ä¹ˆä¸€ä¸ªCSSåƒç´ ä¼šæ˜æ˜¾å°äºä¸€ä¸ªè®¾å¤‡åƒç´ ï¼Œè¿™ä¸ªæ—¶å€™ <b>width: 200px;</b> è¿™æ¡æ ·å¼ä¸­æ‰€è®¾ç½®çš„200ä¸ªCSSåƒç´ è·¨è¶Šä¸äº†200ä¸ªè®¾å¤‡åƒç´ ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923px3.jpg\" alt=\"ç”¨æˆ·ç¼©é¡µé¢æ—¶è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»\"></p>\n<p>è®©æˆ‘ä»¬æ¥åšä¸€ä¸ªæ€»ç»“</p>\n<blockquote>\n<p>1ã€webå‰ç«¯é¢†åŸŸï¼Œåƒç´ åˆ†ä¸º<b>è®¾å¤‡åƒç´ </b>å’Œ<b>CSSåƒç´ </b><br>  3ã€ä¸€ä¸ªCSSåƒç´ çš„å¤§å°æ˜¯å¯å˜çš„ï¼Œæ¯”å¦‚ç”¨åç¼©æ”¾é¡µé¢çš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨ç¼©å°æˆ–æ”¾å¤§CSSåƒç´ ï¼Œè€Œè®¾å¤‡åƒç´ æ— è®ºå¤§å°è¿˜æ˜¯æ•°é‡éƒ½æ˜¯ä¸å˜çš„ã€‚</p>\n</blockquote>\n<h2 id=\"äºŒã€ç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£\"><a href=\"#äºŒã€ç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£\" class=\"headerlink\" title=\"äºŒã€ç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£\"></a>äºŒã€ç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£</h2><p>ä¸€çœ‹æ ‡é¢˜ï¼Œä½ æ˜¯ä¸æ˜¯è’™äº†ï¼Ÿä¸‰ä¸ªè§†å£ï¼Ÿä»€ä¹ˆä¸‰ä¸ªè§†å£ï¼Ÿå…ˆåˆ«æ€¥ï¼Œè®©æˆ‘ä»¬æ…¢æ…¢æ¥è®²ã€‚<br>ä½ ä¸€å®šå†™è¿‡è¿™æ ·ä¸€æ¡æ ·å¼ï¼š<b>width: 25%;</b> ä½†æ˜¯ä½ æœ‰æƒ³è¿‡ç»™ä¸€ä¸ªå…ƒç´ åŠ ä¸Šè¿™æ ·ä¸€æ¡æ ·å¼ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆå—ï¼Ÿ25%æ˜¯åŸºäºè°çš„25%ï¼Ÿæ˜ç™½çš„åŒå­¦å¯èƒ½çŸ¥é“äº†ï¼šä¸€ä¸ªå—å…ƒç´ é»˜è®¤çš„å®½åº¦æ˜¯å…¶çˆ¶å…ƒç´ çš„100%ï¼Œæ˜¯åŸºäºèµ·çˆ¶å…ƒç´ çš„ï¼Œæ‰€ä»¥25%æŒ‡çš„æ˜¯çˆ¶å…ƒç´ å®½åº¦çš„25%ï¼Œæ‰€ä»¥ï¼Œ<b>body</b>å…ƒç´ çš„é»˜è®¤å®½åº¦æ˜¯<b>html</b>å…ƒç´ å®½åº¦çš„100%ï¼Œé‚£ä¹ˆä½ æœ‰æ²¡æœ‰æƒ³è¿‡<b>html</b>å…ƒç´ çš„å®½åº¦æ˜¯åŸºäºè°çš„å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ï¼Œå°±è¦å¼•å‡ºä¸€ä¸ªæ¦‚å¿µï¼š<b style=\"color: red;\">åˆå§‹åŒ…å«å—å’Œè§†å£äº†</b></p>\n<p>è®°ä½ä¸€å¥è¯ï¼š<b>è§†å£æ˜¯htmlçš„çˆ¶å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬ç§°è§†å£ä¸ºåˆå§‹åŒ…å«å—ã€‚</b> è¿™æ ·ä½ å°±æ˜ç™½äº†ï¼Œhtmlå…ƒç´ çš„ç™¾åˆ†æ¯”æ˜¯åŸºäºè§†å£çš„ã€‚</p>\n<h3 id=\"ç¬¬ä¸€ä¸ªè§†å£ï¼šå¸ƒå±€è§†å£\"><a href=\"#ç¬¬ä¸€ä¸ªè§†å£ï¼šå¸ƒå±€è§†å£\" class=\"headerlink\" title=\"ç¬¬ä¸€ä¸ªè§†å£ï¼šå¸ƒå±€è§†å£\"></a>ç¬¬ä¸€ä¸ªè§†å£ï¼šå¸ƒå±€è§†å£</h3><p>é¦–å…ˆä½ éœ€è¦äº†è§£ä¸€ä¸ªåŸå› ï¼šæµè§ˆå™¨å‚å•†æ˜¯å¸Œæœ›æ»¡è¶³ç”¨æˆ·çš„è¦æ±‚çš„ï¼Œå³åœ¨æ‰‹æœºä¹Ÿèƒ½æµè§ˆä¸ºPCç«¯è®¾è®¡çš„ç½‘ç«™ï¼Œæ‰€ä»¥æµè§ˆå™¨å‚å•†å¿…é¡»æƒ³åŠæ³•æ¥åœ¨æ»¡è¶³~<br>åœ¨PCæµè§ˆå™¨ä¸­ï¼Œè§†å£åªæœ‰ä¸€ä¸ªï¼Œå¹¶ä¸” <b>è§†å£çš„å®½åº¦</b> = <b>æµè§ˆå™¨çª—å£çš„å®½åº¦</b>ï¼Œä½†æ˜¯åœ¨ç§»åŠ¨ç«¯ä¹Ÿè¦æ ¹æ®è¿™ä¸ªæ¥è®¾è®¡çš„è¯ï¼Œé‚£ä¹ˆPCç«¯è®¾è®¡çš„ç½‘ç«™åœ¨ç§»åŠ¨ç«¯çœ‹èµ·æ¥ä¼šå¾ˆä¸‘ï¼Œå› ä¸ºPCç«¯çš„ç½‘é¡µå®½åº¦åœ¨800 ~ 1024ä¸ªCSSåƒç´ ï¼Œè€Œæ‰‹æœºå±å¹•è¦çª„çš„å¤šï¼Œè¿™ä¸ªæ—¶å€™å†PCç«¯25%çš„å®½åº¦åœ¨ç§»åŠ¨ç«¯çœ‹èµ·æ¥ä¼šå¾ˆçª„ã€‚æ‰€ä»¥ï¼Œå¸ƒå±€è§†å£çš„æ¦‚å¿µäº§ç”Ÿäº†ã€‚</p>\n<p>å¸ƒå±€æ˜¯å£ï¼šç§»åŠ¨ç«¯CSSå¸ƒå±€çš„ä¾æ®è§†å£ï¼Œå³CSSå¸ƒå±€ä¼šæ ¹æ®å¸ƒå±€è§†å£æ¥è®¡ç®—ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç§»åŠ¨ç«¯ï¼Œè§†å£å’Œæµè§ˆå™¨çª—å£å°†ä¸åœ¨å…³è”ï¼Œå®é™…ä¸Šï¼Œå¸ƒå±€è§†å£è¦æ¯”æµè§ˆå™¨çª—å£å¤§çš„å¤š(åœ¨æ‰‹æœºå’Œå¹³æ¿ä¸­æµè§ˆå™¨å¸ƒå±€è§†å£çš„å®½åº¦åœ¨768~1024åƒç´ ä¹‹é—´)ï¼Œå¦‚ä¸‹å›¾ï¼ˆå¸ƒå±€è§†å£å’Œçª—å£çš„å…³ç³»ï¼‰ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923px4.jpg\" alt=\"å¸ƒå±€æ˜¯å£å’Œæµè§ˆå™¨çª—å£çš„å…³ç³»\"></p>\n<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹JavaScriptä»£ç è·å–å¸ƒå±€è§†å£çš„å®½åº¦å’Œé«˜åº¦ï¼š</p>\n<pre><code>document.documentElement.clientWidth\ndocument.documentElement.clientHeight\n</code></pre><h3 id=\"ç¬¬äºŒä¸ªè§†å£ï¼šè§†è§‰è§†å£\"><a href=\"#ç¬¬äºŒä¸ªè§†å£ï¼šè§†è§‰è§†å£\" class=\"headerlink\" title=\"ç¬¬äºŒä¸ªè§†å£ï¼šè§†è§‰è§†å£\"></a>ç¬¬äºŒä¸ªè§†å£ï¼šè§†è§‰è§†å£</h3><p>è§†è§‰è§†å£å¯èƒ½è¦æ›´å¥½ç†è§£ä¸€äº›ï¼Œä»–å°±æ˜¯ç”¨æˆ·æ­£åœ¨çœ‹åˆ°ç½‘ç«™çš„åŒºåŸŸï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923px5.jpg\" alt=\"è§†è§‰è§†å£\"></p>\n<h3 id=\"ç¬¬ä¸‰ä¸ªè§†å£ï¼šç†æƒ³è§†å£\"><a href=\"#ç¬¬ä¸‰ä¸ªè§†å£ï¼šç†æƒ³è§†å£\" class=\"headerlink\" title=\"ç¬¬ä¸‰ä¸ªè§†å£ï¼šç†æƒ³è§†å£\"></a>ç¬¬ä¸‰ä¸ªè§†å£ï¼šç†æƒ³è§†å£</h3><p>ç†æƒ³è§†å£ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€éœ€è¦å…³æ³¨çš„è§†å£ï¼Œç°åœ¨æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹æˆ‘ä»¬çŸ¥é“äº†å“ªäº›è§†å£ï¼Œæœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼šå¸ƒå±€è§†å£ï¼Œè§†è§‰è§†å£ã€‚<br>æˆ‘ä»¬å‰é¢æåˆ°è¿‡ï¼Œå¸ƒå±€è§†å£çš„å®½åº¦ä¸€èˆ¬åœ¨ 680~1024åƒç´ ä¹‹é—´ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—PCç½‘ç«™åœ¨æ‰‹æœºä¸­ä¸è¢«å‹æ‰ï¼Œä½†æ˜¯è¿™å¹¶ä¸ç†æƒ³ï¼Œå› ä¸ºæ‰‹æœºæ›´é€‚åˆçª„çš„ç½‘ç«™ï¼Œæ¢å¥è¯è¯´ï¼Œå¸ƒå±€è§†å£å¹¶ä¸æ˜¯æœ€ç†æƒ³çš„å®½åº¦ï¼Œæ‰€ä»¥ï¼Œå°±å¼•å…¥äº†ç†æƒ³è§†å£ã€‚</p>\n<p>ç†æƒ³è§†å£ï¼Œå®šä¹‰äº†ç†æƒ³è§†å£çš„å®½åº¦ï¼Œæ¯”å¦‚å¯¹äºiphone5æ¥è®²ï¼Œç†æƒ³è§†å£æ˜¯320*568ã€‚ä½†æ˜¯æœ€ç»ˆä½œç”¨çš„è¿˜æ˜¯å¸ƒå±€è§†å£ï¼Œå› ä¸ºæˆ‘ä»¬çš„cssæ˜¯ä¾æ®å¸ƒå±€è§†å£è®¡ç®—çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥è¿™æ ·ç†è§£ç†æƒ³è§†å£ï¼š<b>ç†æƒ³çš„å¸ƒå±€è§†å£</b>ã€‚ä¸‹é¢è¿™æ®µä»£ç å¯ä»¥å‘Šè¯‰æ‰‹æœºæµè§ˆå™¨è¦æŠŠå¸ƒå±€è§†å£è®¾ä¸ºç†æƒ³è§†å£ï¼š</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot; /&gt;\n</code></pre><p>ä¸Šé¢é‚£æ®µä»£ç å‘Šè¯‰æµè§ˆå™¨ï¼š<b>å°†å¸ƒå±€è§†å£çš„å®½åº¦è®¾ä¸ºç†æƒ³è§†å£ã€‚</b>æ‰€ä»¥ï¼Œä¸Šé¢ä»£ç ä¸­çš„widthæŒ‡çš„æ˜¯å¸ƒå±€è§†å£çš„å®½ device-width å®é™…ä¸Šå°±æ˜¯ç†æƒ³è§†å£çš„å®½åº¦ã€‚</p>\n<p>å¥½äº†ï¼Œç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£ä»‹ç»å®Œäº†ï¼Œè®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼š</p>\n<blockquote>\n<p>1ã€åœ¨PCç«¯ï¼Œå¸ƒå±€è§†å£å°±æ˜¯æµè§ˆå™¨çª—å£<br>  2ã€åœ¨ç§»åŠ¨ç«¯ï¼Œè§†å£è¢«åˆ†ä¸ºä¸¤ä¸ªï¼šå¸ƒå±€è§†å£ã€è§†è§‰è§†å£ã€‚<br>  3ã€ç§»åŠ¨ç«¯è¿˜æœ‰ä¸€ä¸ªç†æƒ³è§†å£ï¼Œå®ƒæ˜¯å¸ƒå±€è§†å£çš„ç†æƒ³å°ºå¯¸ï¼Œå³ç†æƒ³çš„å¸ƒå±€è§†å£ã€‚ï¼ˆæ³¨ï¼šç†æƒ³è§†å£çš„å°ºå¯¸å› è®¾å¤‡å’Œæµè§ˆå™¨çš„ä¸åŒè€Œä¸åŒï¼Œä½†è¿™å¯¹äºæˆ‘ä»¬æ¥è¯´æ— æ‰€è°“ï¼‰<br>  4ã€å¯ä»¥å°†å¸ƒå±€è§†å£çš„å®½åº¦è®¾ä¸ºç†æƒ³è§†å£</p>\n</blockquote>\n<h2 id=\"ä¸‰ã€è®¾å¤‡åƒç´ æ¯”-DPR\"><a href=\"#ä¸‰ã€è®¾å¤‡åƒç´ æ¯”-DPR\" class=\"headerlink\" title=\"ä¸‰ã€è®¾å¤‡åƒç´ æ¯”(DPR)\"></a>ä¸‰ã€è®¾å¤‡åƒç´ æ¯”(DPR)</h2><p>ä¸‹é¢ä½ è¿˜éœ€è¦äº†è§£ä¸€ä¸ªæ¦‚å¿µï¼Œè®¾å¤‡åƒç´ æ¯”(Device Pixel Ratio ç®€ç§°ï¼šDPR)ã€‚<br>ä¸‹é¢æ˜¯è®¾å¤‡åƒç´ æ¯”çš„è®¡ç®—å…¬å¼</p>\n<p>å…¬å¼æˆç«‹çš„å¤§å‰æï¼š<b style=\"color: red;\">ï¼ˆç¼©æ”¾æ¯”ä¾‹ä¸º1ï¼‰</b><br><b>è®¾å¤‡åƒç´ æ¯”(DPR) = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£CSSåƒç´ ä¸ªæ•°(device-width)</b></p>\n<p>ä¸ç†æƒ³è§†å£ä¸€æ ·ï¼Œè®¾å¤‡åƒç´ æ¯”å¯¹äºä¸åŒçš„è®¾å¤‡æ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯ä»–ä»¬éƒ½æ˜¯åˆç†çš„ï¼Œæ¯”å¦‚æ—©èµ·iphoneçš„è®¾å¤‡åƒç´ æ˜¯320pxï¼Œç†æƒ³è§†å£ä¹Ÿæ˜¯320pxï¼Œæ‰€ä»¥æ—©èµ·iphoneçš„DPR=1ï¼Œè€Œåæ¥iphoneçš„è®¾å¤‡åƒç´ ä¸º640pxï¼Œç†æƒ³è§†å£è¿˜æ˜¯320pxï¼Œæ‰€ä»¥åæ¥iphoneçš„DPR=2ã€‚åœ¨å¼€å‘ä¸­ï¼Œæ‰“å¼€æµè§ˆå™¨çš„è°ƒè¯•å·¥å…·å¯ä»¥çœ‹åˆ°è®¾å¤‡åƒç´ æ¯”ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923dpr.png\" alt=\"chromeæµè§ˆå™¨è°ƒè¯•å·¥å…·\"></p>\n<p>å¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—ä»¥ä¸‹ä¿¡æ¯ï¼š<br>iPhone5çš„ç†æƒ³è§†å£æ˜¯ï¼š320*568 &lt;==&gt; device-width = 320ï¼Œdevice-height = 568<br>iPhone5çš„è®¾å¤‡åƒç´ æ¯”ï¼š2<br>æ ¹æ®å…¬å¼ï¼š<b>è®¾å¤‡åƒç´ æ¯”(DPR) = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£CSSåƒç´ ä¸ªæ•°(device-width)</b><br>å¯çŸ¥iPhone5çš„è®¾å¤‡åƒç´ ä¸º 640*1136</p>\n<h2 id=\"ç¼©æ”¾\"><a href=\"#ç¼©æ”¾\" class=\"headerlink\" title=\"ç¼©æ”¾\"></a>ç¼©æ”¾</h2><p>åœ¨è®²è®¾å¤‡åƒç´ æ¯”å…¬å¼çš„æ—¶å€™è®²åˆ°äº†ï¼š</p>\n<blockquote>\n<p>å…¬å¼æˆç«‹çš„å¤§å‰æï¼š<b style=\"color: red;\">ï¼ˆç¼©æ”¾æ¯”ä¾‹ä¸º1ï¼‰</b><br>  <b>è®¾å¤‡åƒç´ æ¯”(DPR) = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£CSSåƒç´ ä¸ªæ•°(device-width)</b></p>\n</blockquote>\n<p>é‚£ä¹ˆç¼©æ”¾åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¹Ÿè®¸è¿™ä¸ªé—®é¢˜è®©ä½ å¾ˆç–‘æƒ‘ï¼Œå¦‚æœä½ è‡ªå·±é˜…è¯»äº†å‰é¢çš„å†…å®¹ï¼Œä½ ä¼šæ³¨æ„åˆ°CSSåƒç´ çš„å¤§å°æ˜¯å¯å˜å¾—ï¼Œè€Œç¼©æ”¾ä»æŠ€æœ¯å®ç°çš„è§’åº¦æ¥è®²ï¼Œå°±æ˜¯æ”¾å¤§æˆ–ç¼©å°CSSåƒç´ çš„è¿‡ç¨‹ï¼Œæ€ä¹ˆæ ·ï¼Ÿæ˜ç™½äº†å§ï¼Œå½“ä½ ç”¨åŒæŒ‡ç¼©æ”¾é¡µé¢çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ”¾å¤§æˆ–ç¼©å°CSSåƒç´ ï¼Œè‡³äºä»€ä¹ˆæ˜¯CSSåƒç´ ï¼Œæ™•ï¼Œå›å»ä»å¤´å¥½å¥½çœ‹<del>~</del></p>\n<p>ä¹Ÿå­¦ä½ ä¼šè§‰å¾—ç¼©æ”¾æ²¡ä»€ä¹ˆï¼Œä½†æ˜¯ä½ äº†è§£è¿™ä¸ªæ¦‚å¿µè‡³å…³é‡è¦ï¼Œå› ä¸ºåœ¨ã€Šä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« (äºŒ)ã€‹ä¸­ï¼Œä¼šç”¨åˆ°è¿™é‡Œçš„æ¦‚å¿µã€‚å³</p>\n<blockquote>\n<p>ç¼©æ”¾ï¼šç¼©å°æ”¾å¤§çš„æ˜¯ CSSåƒç´ ã€‚</p>\n</blockquote>\n<h2 id=\"metaæ ‡ç­¾\"><a href=\"#metaæ ‡ç­¾\" class=\"headerlink\" title=\"metaæ ‡ç­¾\"></a>metaæ ‡ç­¾</h2><p>metaè§†å£æ ‡ç­¾å­˜åœ¨çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è®©å¸ƒå±€è§†å£å’Œç†æƒ³è§†å£çš„å®½åº¦åŒ¹é…ï¼Œmetaè§†å£æ ‡ç­¾åº”è¯¥æ”¾åœ¨HTMLæ–‡æ¡£çš„headæ ‡ç­¾å†…ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;name=value,name=value&quot; /&gt;\n</code></pre><p>å…¶ä¸­ content å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼Œå­—ç¬¦ä¸²æ˜¯ç”±é€—å·â€œï¼Œâ€åˆ†éš”çš„ å/å€¼ å¯¹ç»„æˆï¼Œå…±æœ‰5ä¸ªï¼š</p>\n<blockquote>\n<p>1ã€widthï¼šè®¾ç½®å¸ƒå±€è§†å£çš„å®½<br>  2ã€init-scaleï¼šè®¾ç½®é¡µé¢çš„åˆå§‹ç¼©æ”¾ç¨‹åº¦<br>  3ã€minimum-scaleï¼šè®¾ç½®äº†é¡µé¢æœ€å°ç¼©æ”¾ç¨‹åº¦<br>  4ã€maximum-scaleï¼šè®¾ç½®äº†é¡µé¢æœ€å¤§ç¼©æ”¾ç¨‹åº¦<br>  5ã€user-scalableï¼šæ˜¯å¦å…è®¸ç”¨æˆ·å¯¹é¡µé¢è¿›è¡Œç¼©æ”¾æ“ä½œ</p>\n</blockquote>\n<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„metaæ ‡ç­¾å®ä¾‹</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;&gt;\n</code></pre><p>ä¸Šé¢ä»£ç çš„æ„æ€æ˜¯ï¼Œè®©å¸ƒå±€è§†å£çš„å®½åº¦ç­‰äºç†æƒ³è§†å£çš„å®½åº¦ï¼Œé¡µé¢çš„åˆå§‹ç¼©æ”¾æ¯”ä¾‹ä»¥åŠæœ€å¤§ç¼©æ”¾æ¯”ä¾‹éƒ½ä¸º1ï¼Œä¸”ä¸å…è®¸ç”¨æˆ·å¯¹é¡µé¢è¿›è¡Œç¼©æ”¾æ“ä½œã€‚</p>\n<h2 id=\"åª’ä½“æŸ¥è¯¢\"><a href=\"#åª’ä½“æŸ¥è¯¢\" class=\"headerlink\" title=\"åª’ä½“æŸ¥è¯¢\"></a>åª’ä½“æŸ¥è¯¢</h2><p>åª’ä½“æŸ¥è¯¢æ˜¯å“åº”å¼è®¾è®¡çš„åŸºç¡€ï¼Œä»–æœ‰ä»¥ä¸‹ä¸‰ç‚¹ä½œç”¨ï¼š</p>\n<blockquote>\n<p>1ã€æ£€æµ‹åª’ä½“çš„ç±»å‹ï¼Œæ¯”å¦‚ screenï¼Œtvç­‰<br>  2ã€æ£€æµ‹å¸ƒå±€è§†å£çš„ç‰¹æ€§ï¼Œæ¯”å¦‚è§†å£çš„å®½é«˜åˆ†è¾¨ç‡ç­‰<br>  3ã€ç‰¹æ€§ç›¸å…³æŸ¥è¯¢ï¼Œæ¯”å¦‚æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒæŸæŸç‰¹æ€§ï¼ˆè¿™ä¸€ç‚¹ä¸è®¨è®ºï¼Œå› ä¸ºå®ƒè¢«ç›®å‰æµè§ˆå™¨æ”¯æŒçš„åŠŸèƒ½å¯¹äºwebå¼€å‘æ¥è®²å¾ˆæ— ç”¨ï¼‰</p>\n</blockquote>\n<p>cssä¸­ä½¿ç”¨åª’ä½“æŸ¥è¯¢çš„è¯­æ³•ï¼š</p>\n<pre><code>@media åª’ä½“ç±»å‹ and (è§†å£ç‰¹æ€§é˜€å€¼){\n    // æ»¡è¶³æ¡ä»¶çš„cssæ ·å¼ä»£ç \n\n}\n</code></pre><p>ä¸‹é¢æ˜¯ä¸€æ®µåœ¨cssä¸­ä½¿ç”¨åª’ä½“æŸ¥è¯¢çš„ç¤ºä¾‹:</p>\n<pre><code>@media all and (min-width: 321px) and (max-width: 400px){\n    .box{\n        background: red;\n    }\n}\n</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œåª’ä½“ç±»å‹ä¸ºallï¼Œä»£è¡¨ä»»ä½•è®¾å¤‡ï¼Œå¹¶ä¸”è®¾å¤‡çš„å¸ƒå±€è§†å£å®½åº¦å¤§äºç­‰äº321pxä¸”å°äºç­‰äº400pxæ—¶ï¼Œè®©æ‹¥æœ‰boxç±»çš„å…ƒç´ èƒŒæ™¯å˜çº¢ã€‚<br>è¿™é‡Œåªæ˜¯ç®€å•ä»‹ç»äº†css3çš„åª’ä½“æŸ¥è¯¢ï¼Œä½†æ˜¯ç”¨äºæœ¬ç³»åˆ—æ–‡ç« ï¼ˆæˆ‘ä¹Ÿå‘µå‘µäº†ï¼Œå…¶å®å°±ä¸¤ç¯‡æ–‡ç« è¿™æ˜¯ç¬¬ä¸€ç¯‡ï¼Œç¬¬äºŒç¯‡ä¼šå°½å¿«æ›´æ–°ï¼‰å·²ç»è¶³å¤Ÿç”¨äº†ï¼Œæ„Ÿå…´è¶£æˆ–è€…å¸Œæœ›è·å¾—æ›´å¤šcss3 åª’ä½“æŸ¥è¯¢çŸ¥è¯†çš„åŒå­¦å¯ä»¥åœ¨ç½‘ä¸ŠæŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚</p>\n<p>ç»è¿‡6ä¸ªå°æ—¶çš„å¥‹æˆ˜ï¼Œå¥½å§ï¼Œç»ˆäºæ•´ç†å¥½äº† ã€Šä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« ã€‹ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä¸º<a href=\"http://hcysun.me/2015/10/19/%E4%B8%80%E7%AF%87%E7%9C%9F%E6%AD%A3%E6%95%99%E4%BC%9A%E4%BD%A0%E5%BC%80%E5%8F%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%96%87%E7%AB%A0-%E4%BA%8C/\">ç¬¬äºŒç¯‡</a>æ–‡ç« è¦å°†åˆ°çš„å†…å®¹æ‰“åŸºç¡€ï¼ŒåŒå­¦ä»¬å¦‚æœä¸äº†è§£å¯ä»¥å¤šé˜…è¯»å³ä¾¿ï¼Œå¦‚æœæœ‰é—®é¢˜æ¬¢è¿è¯„è®ºï¼Œæˆ‘ä¼šåŠæ—¶å›å¤çš„ï¼Œå¦å¤–ï¼Œä¸‹ä¸€ç¯‡æ–‡ç« å°†ä¼šå¸¦æ¥å¹²è´§ï¼ŒçœŸçœŸæ­£æ­£çš„è®©å¤§å®¶æŒæ¡ç§»åŠ¨ç«¯é¡µé¢çš„å¼€å‘ã€‚å¦‚æœä½ å·²ç»é˜…è¯»åˆ°äº†è¿™é‡Œï¼Œæˆ‘å¯¹ä½ è¡¨ç¤ºæ„Ÿè°¢ï¼Œä½ çš„åšæŒä¸€å®šä¼šå¾—åˆ°å›æŠ¥ï¼Œå…±å‹‰ã€‚</p>\n","site":{"data":{}},"excerpt":"<h1 id=\"ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£\"><a href=\"#ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£\" class=\"headerlink\" title=\"ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£\"></a>ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£</h1><blockquote>\n<p>ä»æˆ‘å·¥ä½œä»¥æ¥ï¼Œå¼€å‘çš„ä¸€ç›´éƒ½æ˜¯ç§»åŠ¨ç«¯çš„é¡µé¢ï¼Œåªæœ‰å¶å°”å»å¼€å‘å‡ ä¸ªPCç«¯çš„é¡µé¢ï¼Œç°åœ¨æ˜¯ä¸€ä¸ªç§»åŠ¨ç«¯çš„æ—¶ä»£ï¼Œç§»åŠ¨å…ˆè¡Œå·²ç»æ·±å…¥éª¨é«“ï¼Œä½œä¸ºä¸€ä¸ªwebå‰ç«¯å¼€å‘ï¼Œå¦‚æœä½ è¿˜åœ¨ä¸ºå¦‚ä½•å¼€å‘ç§»åŠ¨ç«¯é¡µé¢è€Œè¿·èŒ«ï¼Œæˆ–è€…ä½ è¿˜åœ¨ä¸ºå¼€å‘å‡ºäº†ä¸€ä¸ªåœ¨ä½ æ‰‹æœºä¸Šâ€œå®Œç¾â€çš„ç§»åŠ¨é¡µé¢è€Œæ²¾æ²¾è‡ªå–œå´ä¸çŸ¥ç§»åŠ¨çš„ä¸–ç•Œæœ‰å¤šâ€œæ®‹é…·â€çš„æ—¶å€™ï¼Œé‚£ä½ åº”è¯¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« äº†ã€‚å¸Œæœ›è¿™èƒ½ç»™ä½ å¸®åŠ©ï¼ŒåŒæ—¶ä¹Ÿèƒ½ç»™æˆ‘å¸®åŠ©ï¼Œæœ‰ä¸åˆç†çš„åœ°æ–¹ï¼Œæ¬¢è¿è¯„è®ºæ”¯æŒï¼Œå¿…å°†æ”¹æ­£ã€‚</p>\n</blockquote>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923mobile.jpg\" alt=\"ç§»åŠ¨ç«¯\"></p>","more":"<h1 id=\"è¿™é‡Œæ˜¯åŸºç¡€ï¼Œä½ äº†è§£å¦ï¼Ÿ\"><a href=\"#è¿™é‡Œæ˜¯åŸºç¡€ï¼Œä½ äº†è§£å¦ï¼Ÿ\" class=\"headerlink\" title=\"è¿™é‡Œæ˜¯åŸºç¡€ï¼Œä½ äº†è§£å¦ï¼Ÿ\"></a>è¿™é‡Œæ˜¯åŸºç¡€ï¼Œä½ äº†è§£å¦ï¼Ÿ</h1><h2 id=\"ä¸€ã€åƒç´ -ä»€ä¹ˆæ˜¯åƒç´ \"><a href=\"#ä¸€ã€åƒç´ -ä»€ä¹ˆæ˜¯åƒç´ \" class=\"headerlink\" title=\"ä¸€ã€åƒç´  - ä»€ä¹ˆæ˜¯åƒç´ \"></a>ä¸€ã€åƒç´  - ä»€ä¹ˆæ˜¯åƒç´ </h2><p>åƒç´ æ˜¯webé¡µé¢å¸ƒå±€çš„åŸºç¡€ï¼Œé‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ‰æ˜¯ä¸€ä¸ªåƒç´ å‘¢ï¼Ÿ<br>åƒç´ ï¼š<b>ä¸€ä¸ªåƒç´ å°±æ˜¯è®¡ç®—æœºå±å¹•æ‰€èƒ½æ˜¾ç¤ºä¸€ç§ç‰¹å®šé¢œè‰²çš„æœ€å°åŒºåŸŸã€‚</b> è¿™æ˜¯åƒç´ çš„æ¦‚å¿µï¼Œå®é™…ä¸Šï¼Œåœ¨webå‰ç«¯å¼€å‘é¢†åŸŸï¼Œåƒç´ æœ‰ä»¥ä¸‹ä¸¤å±‚å«ä¹‰ï¼š<br>1ã€<b>è®¾å¤‡åƒç´ ï¼š</b>è®¾å¤‡å±å¹•çš„ç‰©ç†åƒç´ ï¼Œå¯¹äºä»»ä½•è®¾å¤‡æ¥è®²ç‰©ç†åƒç´ çš„æ•°é‡æ˜¯å›ºå®šçš„ã€‚<br>2ã€<b>CSSåƒç´ ï¼š</b>è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡çš„åƒç´ æ¦‚å¿µï¼Œå®ƒæ˜¯ä¸ºwebå¼€å‘è€…åˆ›é€ çš„ã€‚</p>\n<p>å¦‚ä¸‹å›¾ï¼Œæ˜¯åœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1ï¼Œå³scale = 1çš„æƒ…å†µä¸‹ï¼Œè®¾å¤‡åƒç´ å’ŒCSSåƒç´ ç¤ºæ„å›¾</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923px1.jpg\" alt=\"è®¾å¤‡åƒç´ å’ŒCSSåƒç´ \"></p>\n<p>ç°åœ¨ä½ å·²ç»äº†è§£äº†ï¼ŒåŸæ¥åƒç´ å¯¹äºwebå‰ç«¯å¼€å‘æ¥è®²æœ‰è¿™æ ·çš„ä¸¤å±‚å«ä¹‰ï¼Œé‚£ä¹ˆä½ æœ‰æ²¡æœ‰å†æ·±å…¥çš„è€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ç»™ä¸€ä¸ªå…ƒç´ è®¾ç½®äº† <b>width: 200px;</b> è¿™æ¡æ ·å¼çš„æ—¶å€™ï¼Œåˆ°åº•æ”¾ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ<br>ä½ å¯èƒ½ä¼šè¯´ï¼šâ€œåºŸè¯ï¼å…ƒç´ çš„å®½åº¦æ˜¯200pxå‘—ã€‚â€ï¼›å¯¹ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸ª200pxæŒ‡çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºwebå‰ç«¯æ¥è®²åƒç´ æœ‰ä¸¤å±‚å«ä¹‰ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯è®¾å¤‡åƒç´ è¿˜æ˜¯CSSåƒç´ ï¼Ÿå®é™…ä¸Šæˆ‘ä»¬æ§åˆ¶çš„æ˜¯CSSåƒç´ ï¼Œå› ä¸ºå‰é¢æåˆ°äº†ï¼ŒCSSåƒç´ æ˜¯ç»™æˆ‘ä»¬webå‰ç«¯å¼€å‘è€…åˆ›é€ çš„æŠ½è±¡æ¦‚å¿µã€‚æ‰€ä»¥ä½ è¦è®°ä½ï¼š<b>å½“ä½ ç»™å…ƒç´ è®¾ç½®äº† width: 200px æ—¶ï¼Œè¿™ä¸ªå…ƒç´ çš„å®½åº¦è·¨è¶Šäº†200ä¸ªCSSåƒç´ </b>ã€‚ä½†æ˜¯å®ƒå¹¶ä¸ä¸€å®šè·¨è¶Š200ä¸ªè®¾å¤‡åƒç´ ï¼Œè‡³äºä¼šè·¨è¶Šå¤šå°‘ä¸ªè®¾å¤‡åƒç´ ï¼Œå°±å–å†³äº<b>æ‰‹æœºå±å¹•çš„ç‰¹æ€§</b>å’Œ<b>ç”¨æˆ·çš„ç¼©æ”¾</b>äº†,ä¸¾ä¸ªæ —å­ï¼š</p>\n<p>è‹¹æœæ‰‹æœºçš„è§†ç½‘è†œå±å¹•ï¼Œæ˜¯ä¸€ä¸ªé«˜å¯†åº¦å±å¹•ï¼Œå®ƒçš„åƒç´ å¯†åº¦æ˜¯æ™®é€šå±å¹•çš„2å€ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è®¾ç½® <b>width: 200px;</b> æ—¶ï¼Œ200ä¸ªCSSåƒç´ è·¨è¶Šäº†400ä¸ªè®¾å¤‡åƒç´ ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923px2.jpg\" alt=\"è‹¹æœè§†ç½‘è†œå±å¹•çš„è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»\"></p>\n<p>å¦‚æœç”¨æˆ·ç¼©å°é¡µé¢ï¼Œé‚£ä¹ˆä¸€ä¸ªCSSåƒç´ ä¼šæ˜æ˜¾å°äºä¸€ä¸ªè®¾å¤‡åƒç´ ï¼Œè¿™ä¸ªæ—¶å€™ <b>width: 200px;</b> è¿™æ¡æ ·å¼ä¸­æ‰€è®¾ç½®çš„200ä¸ªCSSåƒç´ è·¨è¶Šä¸äº†200ä¸ªè®¾å¤‡åƒç´ ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923px3.jpg\" alt=\"ç”¨æˆ·ç¼©é¡µé¢æ—¶è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»\"></p>\n<p>è®©æˆ‘ä»¬æ¥åšä¸€ä¸ªæ€»ç»“</p>\n<blockquote>\n<p>1ã€webå‰ç«¯é¢†åŸŸï¼Œåƒç´ åˆ†ä¸º<b>è®¾å¤‡åƒç´ </b>å’Œ<b>CSSåƒç´ </b><br>  3ã€ä¸€ä¸ªCSSåƒç´ çš„å¤§å°æ˜¯å¯å˜çš„ï¼Œæ¯”å¦‚ç”¨åç¼©æ”¾é¡µé¢çš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨ç¼©å°æˆ–æ”¾å¤§CSSåƒç´ ï¼Œè€Œè®¾å¤‡åƒç´ æ— è®ºå¤§å°è¿˜æ˜¯æ•°é‡éƒ½æ˜¯ä¸å˜çš„ã€‚</p>\n</blockquote>\n<h2 id=\"äºŒã€ç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£\"><a href=\"#äºŒã€ç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£\" class=\"headerlink\" title=\"äºŒã€ç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£\"></a>äºŒã€ç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£</h2><p>ä¸€çœ‹æ ‡é¢˜ï¼Œä½ æ˜¯ä¸æ˜¯è’™äº†ï¼Ÿä¸‰ä¸ªè§†å£ï¼Ÿä»€ä¹ˆä¸‰ä¸ªè§†å£ï¼Ÿå…ˆåˆ«æ€¥ï¼Œè®©æˆ‘ä»¬æ…¢æ…¢æ¥è®²ã€‚<br>ä½ ä¸€å®šå†™è¿‡è¿™æ ·ä¸€æ¡æ ·å¼ï¼š<b>width: 25%;</b> ä½†æ˜¯ä½ æœ‰æƒ³è¿‡ç»™ä¸€ä¸ªå…ƒç´ åŠ ä¸Šè¿™æ ·ä¸€æ¡æ ·å¼ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆå—ï¼Ÿ25%æ˜¯åŸºäºè°çš„25%ï¼Ÿæ˜ç™½çš„åŒå­¦å¯èƒ½çŸ¥é“äº†ï¼šä¸€ä¸ªå—å…ƒç´ é»˜è®¤çš„å®½åº¦æ˜¯å…¶çˆ¶å…ƒç´ çš„100%ï¼Œæ˜¯åŸºäºèµ·çˆ¶å…ƒç´ çš„ï¼Œæ‰€ä»¥25%æŒ‡çš„æ˜¯çˆ¶å…ƒç´ å®½åº¦çš„25%ï¼Œæ‰€ä»¥ï¼Œ<b>body</b>å…ƒç´ çš„é»˜è®¤å®½åº¦æ˜¯<b>html</b>å…ƒç´ å®½åº¦çš„100%ï¼Œé‚£ä¹ˆä½ æœ‰æ²¡æœ‰æƒ³è¿‡<b>html</b>å…ƒç´ çš„å®½åº¦æ˜¯åŸºäºè°çš„å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ï¼Œå°±è¦å¼•å‡ºä¸€ä¸ªæ¦‚å¿µï¼š<b style=\"color: red;\">åˆå§‹åŒ…å«å—å’Œè§†å£äº†</b></p>\n<p>è®°ä½ä¸€å¥è¯ï¼š<b>è§†å£æ˜¯htmlçš„çˆ¶å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬ç§°è§†å£ä¸ºåˆå§‹åŒ…å«å—ã€‚</b> è¿™æ ·ä½ å°±æ˜ç™½äº†ï¼Œhtmlå…ƒç´ çš„ç™¾åˆ†æ¯”æ˜¯åŸºäºè§†å£çš„ã€‚</p>\n<h3 id=\"ç¬¬ä¸€ä¸ªè§†å£ï¼šå¸ƒå±€è§†å£\"><a href=\"#ç¬¬ä¸€ä¸ªè§†å£ï¼šå¸ƒå±€è§†å£\" class=\"headerlink\" title=\"ç¬¬ä¸€ä¸ªè§†å£ï¼šå¸ƒå±€è§†å£\"></a>ç¬¬ä¸€ä¸ªè§†å£ï¼šå¸ƒå±€è§†å£</h3><p>é¦–å…ˆä½ éœ€è¦äº†è§£ä¸€ä¸ªåŸå› ï¼šæµè§ˆå™¨å‚å•†æ˜¯å¸Œæœ›æ»¡è¶³ç”¨æˆ·çš„è¦æ±‚çš„ï¼Œå³åœ¨æ‰‹æœºä¹Ÿèƒ½æµè§ˆä¸ºPCç«¯è®¾è®¡çš„ç½‘ç«™ï¼Œæ‰€ä»¥æµè§ˆå™¨å‚å•†å¿…é¡»æƒ³åŠæ³•æ¥åœ¨æ»¡è¶³~<br>åœ¨PCæµè§ˆå™¨ä¸­ï¼Œè§†å£åªæœ‰ä¸€ä¸ªï¼Œå¹¶ä¸” <b>è§†å£çš„å®½åº¦</b> = <b>æµè§ˆå™¨çª—å£çš„å®½åº¦</b>ï¼Œä½†æ˜¯åœ¨ç§»åŠ¨ç«¯ä¹Ÿè¦æ ¹æ®è¿™ä¸ªæ¥è®¾è®¡çš„è¯ï¼Œé‚£ä¹ˆPCç«¯è®¾è®¡çš„ç½‘ç«™åœ¨ç§»åŠ¨ç«¯çœ‹èµ·æ¥ä¼šå¾ˆä¸‘ï¼Œå› ä¸ºPCç«¯çš„ç½‘é¡µå®½åº¦åœ¨800 ~ 1024ä¸ªCSSåƒç´ ï¼Œè€Œæ‰‹æœºå±å¹•è¦çª„çš„å¤šï¼Œè¿™ä¸ªæ—¶å€™å†PCç«¯25%çš„å®½åº¦åœ¨ç§»åŠ¨ç«¯çœ‹èµ·æ¥ä¼šå¾ˆçª„ã€‚æ‰€ä»¥ï¼Œå¸ƒå±€è§†å£çš„æ¦‚å¿µäº§ç”Ÿäº†ã€‚</p>\n<p>å¸ƒå±€æ˜¯å£ï¼šç§»åŠ¨ç«¯CSSå¸ƒå±€çš„ä¾æ®è§†å£ï¼Œå³CSSå¸ƒå±€ä¼šæ ¹æ®å¸ƒå±€è§†å£æ¥è®¡ç®—ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç§»åŠ¨ç«¯ï¼Œè§†å£å’Œæµè§ˆå™¨çª—å£å°†ä¸åœ¨å…³è”ï¼Œå®é™…ä¸Šï¼Œå¸ƒå±€è§†å£è¦æ¯”æµè§ˆå™¨çª—å£å¤§çš„å¤š(åœ¨æ‰‹æœºå’Œå¹³æ¿ä¸­æµè§ˆå™¨å¸ƒå±€è§†å£çš„å®½åº¦åœ¨768~1024åƒç´ ä¹‹é—´)ï¼Œå¦‚ä¸‹å›¾ï¼ˆå¸ƒå±€è§†å£å’Œçª—å£çš„å…³ç³»ï¼‰ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923px4.jpg\" alt=\"å¸ƒå±€æ˜¯å£å’Œæµè§ˆå™¨çª—å£çš„å…³ç³»\"></p>\n<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹JavaScriptä»£ç è·å–å¸ƒå±€è§†å£çš„å®½åº¦å’Œé«˜åº¦ï¼š</p>\n<pre><code>document.documentElement.clientWidth\ndocument.documentElement.clientHeight\n</code></pre><h3 id=\"ç¬¬äºŒä¸ªè§†å£ï¼šè§†è§‰è§†å£\"><a href=\"#ç¬¬äºŒä¸ªè§†å£ï¼šè§†è§‰è§†å£\" class=\"headerlink\" title=\"ç¬¬äºŒä¸ªè§†å£ï¼šè§†è§‰è§†å£\"></a>ç¬¬äºŒä¸ªè§†å£ï¼šè§†è§‰è§†å£</h3><p>è§†è§‰è§†å£å¯èƒ½è¦æ›´å¥½ç†è§£ä¸€äº›ï¼Œä»–å°±æ˜¯ç”¨æˆ·æ­£åœ¨çœ‹åˆ°ç½‘ç«™çš„åŒºåŸŸï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923px5.jpg\" alt=\"è§†è§‰è§†å£\"></p>\n<h3 id=\"ç¬¬ä¸‰ä¸ªè§†å£ï¼šç†æƒ³è§†å£\"><a href=\"#ç¬¬ä¸‰ä¸ªè§†å£ï¼šç†æƒ³è§†å£\" class=\"headerlink\" title=\"ç¬¬ä¸‰ä¸ªè§†å£ï¼šç†æƒ³è§†å£\"></a>ç¬¬ä¸‰ä¸ªè§†å£ï¼šç†æƒ³è§†å£</h3><p>ç†æƒ³è§†å£ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€éœ€è¦å…³æ³¨çš„è§†å£ï¼Œç°åœ¨æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹æˆ‘ä»¬çŸ¥é“äº†å“ªäº›è§†å£ï¼Œæœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼šå¸ƒå±€è§†å£ï¼Œè§†è§‰è§†å£ã€‚<br>æˆ‘ä»¬å‰é¢æåˆ°è¿‡ï¼Œå¸ƒå±€è§†å£çš„å®½åº¦ä¸€èˆ¬åœ¨ 680~1024åƒç´ ä¹‹é—´ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—PCç½‘ç«™åœ¨æ‰‹æœºä¸­ä¸è¢«å‹æ‰ï¼Œä½†æ˜¯è¿™å¹¶ä¸ç†æƒ³ï¼Œå› ä¸ºæ‰‹æœºæ›´é€‚åˆçª„çš„ç½‘ç«™ï¼Œæ¢å¥è¯è¯´ï¼Œå¸ƒå±€è§†å£å¹¶ä¸æ˜¯æœ€ç†æƒ³çš„å®½åº¦ï¼Œæ‰€ä»¥ï¼Œå°±å¼•å…¥äº†ç†æƒ³è§†å£ã€‚</p>\n<p>ç†æƒ³è§†å£ï¼Œå®šä¹‰äº†ç†æƒ³è§†å£çš„å®½åº¦ï¼Œæ¯”å¦‚å¯¹äºiphone5æ¥è®²ï¼Œç†æƒ³è§†å£æ˜¯320*568ã€‚ä½†æ˜¯æœ€ç»ˆä½œç”¨çš„è¿˜æ˜¯å¸ƒå±€è§†å£ï¼Œå› ä¸ºæˆ‘ä»¬çš„cssæ˜¯ä¾æ®å¸ƒå±€è§†å£è®¡ç®—çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥è¿™æ ·ç†è§£ç†æƒ³è§†å£ï¼š<b>ç†æƒ³çš„å¸ƒå±€è§†å£</b>ã€‚ä¸‹é¢è¿™æ®µä»£ç å¯ä»¥å‘Šè¯‰æ‰‹æœºæµè§ˆå™¨è¦æŠŠå¸ƒå±€è§†å£è®¾ä¸ºç†æƒ³è§†å£ï¼š</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot; /&gt;\n</code></pre><p>ä¸Šé¢é‚£æ®µä»£ç å‘Šè¯‰æµè§ˆå™¨ï¼š<b>å°†å¸ƒå±€è§†å£çš„å®½åº¦è®¾ä¸ºç†æƒ³è§†å£ã€‚</b>æ‰€ä»¥ï¼Œä¸Šé¢ä»£ç ä¸­çš„widthæŒ‡çš„æ˜¯å¸ƒå±€è§†å£çš„å®½ device-width å®é™…ä¸Šå°±æ˜¯ç†æƒ³è§†å£çš„å®½åº¦ã€‚</p>\n<p>å¥½äº†ï¼Œç§»åŠ¨ç«¯çš„ä¸‰ä¸ªè§†å£ä»‹ç»å®Œäº†ï¼Œè®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼š</p>\n<blockquote>\n<p>1ã€åœ¨PCç«¯ï¼Œå¸ƒå±€è§†å£å°±æ˜¯æµè§ˆå™¨çª—å£<br>  2ã€åœ¨ç§»åŠ¨ç«¯ï¼Œè§†å£è¢«åˆ†ä¸ºä¸¤ä¸ªï¼šå¸ƒå±€è§†å£ã€è§†è§‰è§†å£ã€‚<br>  3ã€ç§»åŠ¨ç«¯è¿˜æœ‰ä¸€ä¸ªç†æƒ³è§†å£ï¼Œå®ƒæ˜¯å¸ƒå±€è§†å£çš„ç†æƒ³å°ºå¯¸ï¼Œå³ç†æƒ³çš„å¸ƒå±€è§†å£ã€‚ï¼ˆæ³¨ï¼šç†æƒ³è§†å£çš„å°ºå¯¸å› è®¾å¤‡å’Œæµè§ˆå™¨çš„ä¸åŒè€Œä¸åŒï¼Œä½†è¿™å¯¹äºæˆ‘ä»¬æ¥è¯´æ— æ‰€è°“ï¼‰<br>  4ã€å¯ä»¥å°†å¸ƒå±€è§†å£çš„å®½åº¦è®¾ä¸ºç†æƒ³è§†å£</p>\n</blockquote>\n<h2 id=\"ä¸‰ã€è®¾å¤‡åƒç´ æ¯”-DPR\"><a href=\"#ä¸‰ã€è®¾å¤‡åƒç´ æ¯”-DPR\" class=\"headerlink\" title=\"ä¸‰ã€è®¾å¤‡åƒç´ æ¯”(DPR)\"></a>ä¸‰ã€è®¾å¤‡åƒç´ æ¯”(DPR)</h2><p>ä¸‹é¢ä½ è¿˜éœ€è¦äº†è§£ä¸€ä¸ªæ¦‚å¿µï¼Œè®¾å¤‡åƒç´ æ¯”(Device Pixel Ratio ç®€ç§°ï¼šDPR)ã€‚<br>ä¸‹é¢æ˜¯è®¾å¤‡åƒç´ æ¯”çš„è®¡ç®—å…¬å¼</p>\n<p>å…¬å¼æˆç«‹çš„å¤§å‰æï¼š<b style=\"color: red;\">ï¼ˆç¼©æ”¾æ¯”ä¾‹ä¸º1ï¼‰</b><br><b>è®¾å¤‡åƒç´ æ¯”(DPR) = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£CSSåƒç´ ä¸ªæ•°(device-width)</b></p>\n<p>ä¸ç†æƒ³è§†å£ä¸€æ ·ï¼Œè®¾å¤‡åƒç´ æ¯”å¯¹äºä¸åŒçš„è®¾å¤‡æ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯ä»–ä»¬éƒ½æ˜¯åˆç†çš„ï¼Œæ¯”å¦‚æ—©èµ·iphoneçš„è®¾å¤‡åƒç´ æ˜¯320pxï¼Œç†æƒ³è§†å£ä¹Ÿæ˜¯320pxï¼Œæ‰€ä»¥æ—©èµ·iphoneçš„DPR=1ï¼Œè€Œåæ¥iphoneçš„è®¾å¤‡åƒç´ ä¸º640pxï¼Œç†æƒ³è§†å£è¿˜æ˜¯320pxï¼Œæ‰€ä»¥åæ¥iphoneçš„DPR=2ã€‚åœ¨å¼€å‘ä¸­ï¼Œæ‰“å¼€æµè§ˆå™¨çš„è°ƒè¯•å·¥å…·å¯ä»¥çœ‹åˆ°è®¾å¤‡åƒç´ æ¯”ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923dpr.png\" alt=\"chromeæµè§ˆå™¨è°ƒè¯•å·¥å…·\"></p>\n<p>å¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—ä»¥ä¸‹ä¿¡æ¯ï¼š<br>iPhone5çš„ç†æƒ³è§†å£æ˜¯ï¼š320*568 &lt;==&gt; device-width = 320ï¼Œdevice-height = 568<br>iPhone5çš„è®¾å¤‡åƒç´ æ¯”ï¼š2<br>æ ¹æ®å…¬å¼ï¼š<b>è®¾å¤‡åƒç´ æ¯”(DPR) = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£CSSåƒç´ ä¸ªæ•°(device-width)</b><br>å¯çŸ¥iPhone5çš„è®¾å¤‡åƒç´ ä¸º 640*1136</p>\n<h2 id=\"ç¼©æ”¾\"><a href=\"#ç¼©æ”¾\" class=\"headerlink\" title=\"ç¼©æ”¾\"></a>ç¼©æ”¾</h2><p>åœ¨è®²è®¾å¤‡åƒç´ æ¯”å…¬å¼çš„æ—¶å€™è®²åˆ°äº†ï¼š</p>\n<blockquote>\n<p>å…¬å¼æˆç«‹çš„å¤§å‰æï¼š<b style=\"color: red;\">ï¼ˆç¼©æ”¾æ¯”ä¾‹ä¸º1ï¼‰</b><br>  <b>è®¾å¤‡åƒç´ æ¯”(DPR) = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£CSSåƒç´ ä¸ªæ•°(device-width)</b></p>\n</blockquote>\n<p>é‚£ä¹ˆç¼©æ”¾åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¹Ÿè®¸è¿™ä¸ªé—®é¢˜è®©ä½ å¾ˆç–‘æƒ‘ï¼Œå¦‚æœä½ è‡ªå·±é˜…è¯»äº†å‰é¢çš„å†…å®¹ï¼Œä½ ä¼šæ³¨æ„åˆ°CSSåƒç´ çš„å¤§å°æ˜¯å¯å˜å¾—ï¼Œè€Œç¼©æ”¾ä»æŠ€æœ¯å®ç°çš„è§’åº¦æ¥è®²ï¼Œå°±æ˜¯æ”¾å¤§æˆ–ç¼©å°CSSåƒç´ çš„è¿‡ç¨‹ï¼Œæ€ä¹ˆæ ·ï¼Ÿæ˜ç™½äº†å§ï¼Œå½“ä½ ç”¨åŒæŒ‡ç¼©æ”¾é¡µé¢çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ”¾å¤§æˆ–ç¼©å°CSSåƒç´ ï¼Œè‡³äºä»€ä¹ˆæ˜¯CSSåƒç´ ï¼Œæ™•ï¼Œå›å»ä»å¤´å¥½å¥½çœ‹<del>~</del></p>\n<p>ä¹Ÿå­¦ä½ ä¼šè§‰å¾—ç¼©æ”¾æ²¡ä»€ä¹ˆï¼Œä½†æ˜¯ä½ äº†è§£è¿™ä¸ªæ¦‚å¿µè‡³å…³é‡è¦ï¼Œå› ä¸ºåœ¨ã€Šä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« (äºŒ)ã€‹ä¸­ï¼Œä¼šç”¨åˆ°è¿™é‡Œçš„æ¦‚å¿µã€‚å³</p>\n<blockquote>\n<p>ç¼©æ”¾ï¼šç¼©å°æ”¾å¤§çš„æ˜¯ CSSåƒç´ ã€‚</p>\n</blockquote>\n<h2 id=\"metaæ ‡ç­¾\"><a href=\"#metaæ ‡ç­¾\" class=\"headerlink\" title=\"metaæ ‡ç­¾\"></a>metaæ ‡ç­¾</h2><p>metaè§†å£æ ‡ç­¾å­˜åœ¨çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è®©å¸ƒå±€è§†å£å’Œç†æƒ³è§†å£çš„å®½åº¦åŒ¹é…ï¼Œmetaè§†å£æ ‡ç­¾åº”è¯¥æ”¾åœ¨HTMLæ–‡æ¡£çš„headæ ‡ç­¾å†…ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;name=value,name=value&quot; /&gt;\n</code></pre><p>å…¶ä¸­ content å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼Œå­—ç¬¦ä¸²æ˜¯ç”±é€—å·â€œï¼Œâ€åˆ†éš”çš„ å/å€¼ å¯¹ç»„æˆï¼Œå…±æœ‰5ä¸ªï¼š</p>\n<blockquote>\n<p>1ã€widthï¼šè®¾ç½®å¸ƒå±€è§†å£çš„å®½<br>  2ã€init-scaleï¼šè®¾ç½®é¡µé¢çš„åˆå§‹ç¼©æ”¾ç¨‹åº¦<br>  3ã€minimum-scaleï¼šè®¾ç½®äº†é¡µé¢æœ€å°ç¼©æ”¾ç¨‹åº¦<br>  4ã€maximum-scaleï¼šè®¾ç½®äº†é¡µé¢æœ€å¤§ç¼©æ”¾ç¨‹åº¦<br>  5ã€user-scalableï¼šæ˜¯å¦å…è®¸ç”¨æˆ·å¯¹é¡µé¢è¿›è¡Œç¼©æ”¾æ“ä½œ</p>\n</blockquote>\n<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„metaæ ‡ç­¾å®ä¾‹</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;&gt;\n</code></pre><p>ä¸Šé¢ä»£ç çš„æ„æ€æ˜¯ï¼Œè®©å¸ƒå±€è§†å£çš„å®½åº¦ç­‰äºç†æƒ³è§†å£çš„å®½åº¦ï¼Œé¡µé¢çš„åˆå§‹ç¼©æ”¾æ¯”ä¾‹ä»¥åŠæœ€å¤§ç¼©æ”¾æ¯”ä¾‹éƒ½ä¸º1ï¼Œä¸”ä¸å…è®¸ç”¨æˆ·å¯¹é¡µé¢è¿›è¡Œç¼©æ”¾æ“ä½œã€‚</p>\n<h2 id=\"åª’ä½“æŸ¥è¯¢\"><a href=\"#åª’ä½“æŸ¥è¯¢\" class=\"headerlink\" title=\"åª’ä½“æŸ¥è¯¢\"></a>åª’ä½“æŸ¥è¯¢</h2><p>åª’ä½“æŸ¥è¯¢æ˜¯å“åº”å¼è®¾è®¡çš„åŸºç¡€ï¼Œä»–æœ‰ä»¥ä¸‹ä¸‰ç‚¹ä½œç”¨ï¼š</p>\n<blockquote>\n<p>1ã€æ£€æµ‹åª’ä½“çš„ç±»å‹ï¼Œæ¯”å¦‚ screenï¼Œtvç­‰<br>  2ã€æ£€æµ‹å¸ƒå±€è§†å£çš„ç‰¹æ€§ï¼Œæ¯”å¦‚è§†å£çš„å®½é«˜åˆ†è¾¨ç‡ç­‰<br>  3ã€ç‰¹æ€§ç›¸å…³æŸ¥è¯¢ï¼Œæ¯”å¦‚æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒæŸæŸç‰¹æ€§ï¼ˆè¿™ä¸€ç‚¹ä¸è®¨è®ºï¼Œå› ä¸ºå®ƒè¢«ç›®å‰æµè§ˆå™¨æ”¯æŒçš„åŠŸèƒ½å¯¹äºwebå¼€å‘æ¥è®²å¾ˆæ— ç”¨ï¼‰</p>\n</blockquote>\n<p>cssä¸­ä½¿ç”¨åª’ä½“æŸ¥è¯¢çš„è¯­æ³•ï¼š</p>\n<pre><code>@media åª’ä½“ç±»å‹ and (è§†å£ç‰¹æ€§é˜€å€¼){\n    // æ»¡è¶³æ¡ä»¶çš„cssæ ·å¼ä»£ç \n\n}\n</code></pre><p>ä¸‹é¢æ˜¯ä¸€æ®µåœ¨cssä¸­ä½¿ç”¨åª’ä½“æŸ¥è¯¢çš„ç¤ºä¾‹:</p>\n<pre><code>@media all and (min-width: 321px) and (max-width: 400px){\n    .box{\n        background: red;\n    }\n}\n</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œåª’ä½“ç±»å‹ä¸ºallï¼Œä»£è¡¨ä»»ä½•è®¾å¤‡ï¼Œå¹¶ä¸”è®¾å¤‡çš„å¸ƒå±€è§†å£å®½åº¦å¤§äºç­‰äº321pxä¸”å°äºç­‰äº400pxæ—¶ï¼Œè®©æ‹¥æœ‰boxç±»çš„å…ƒç´ èƒŒæ™¯å˜çº¢ã€‚<br>è¿™é‡Œåªæ˜¯ç®€å•ä»‹ç»äº†css3çš„åª’ä½“æŸ¥è¯¢ï¼Œä½†æ˜¯ç”¨äºæœ¬ç³»åˆ—æ–‡ç« ï¼ˆæˆ‘ä¹Ÿå‘µå‘µäº†ï¼Œå…¶å®å°±ä¸¤ç¯‡æ–‡ç« è¿™æ˜¯ç¬¬ä¸€ç¯‡ï¼Œç¬¬äºŒç¯‡ä¼šå°½å¿«æ›´æ–°ï¼‰å·²ç»è¶³å¤Ÿç”¨äº†ï¼Œæ„Ÿå…´è¶£æˆ–è€…å¸Œæœ›è·å¾—æ›´å¤šcss3 åª’ä½“æŸ¥è¯¢çŸ¥è¯†çš„åŒå­¦å¯ä»¥åœ¨ç½‘ä¸ŠæŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚</p>\n<p>ç»è¿‡6ä¸ªå°æ—¶çš„å¥‹æˆ˜ï¼Œå¥½å§ï¼Œç»ˆäºæ•´ç†å¥½äº† ã€Šä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« ã€‹ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä¸º<a href=\"http://hcysun.me/2015/10/19/%E4%B8%80%E7%AF%87%E7%9C%9F%E6%AD%A3%E6%95%99%E4%BC%9A%E4%BD%A0%E5%BC%80%E5%8F%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%96%87%E7%AB%A0-%E4%BA%8C/\">ç¬¬äºŒç¯‡</a>æ–‡ç« è¦å°†åˆ°çš„å†…å®¹æ‰“åŸºç¡€ï¼ŒåŒå­¦ä»¬å¦‚æœä¸äº†è§£å¯ä»¥å¤šé˜…è¯»å³ä¾¿ï¼Œå¦‚æœæœ‰é—®é¢˜æ¬¢è¿è¯„è®ºï¼Œæˆ‘ä¼šåŠæ—¶å›å¤çš„ï¼Œå¦å¤–ï¼Œä¸‹ä¸€ç¯‡æ–‡ç« å°†ä¼šå¸¦æ¥å¹²è´§ï¼ŒçœŸçœŸæ­£æ­£çš„è®©å¤§å®¶æŒæ¡ç§»åŠ¨ç«¯é¡µé¢çš„å¼€å‘ã€‚å¦‚æœä½ å·²ç»é˜…è¯»åˆ°äº†è¿™é‡Œï¼Œæˆ‘å¯¹ä½ è¡¨ç¤ºæ„Ÿè°¢ï¼Œä½ çš„åšæŒä¸€å®šä¼šå¾—åˆ°å›æŠ¥ï¼Œå…±å‹‰ã€‚</p>"},{"title":"ä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« (äºŒ)","date":"2015-10-19T06:56:12.000Z","_content":"\n# ç§»åŠ¨ç«¯å¼€å‘çš„å¹²è´§ç¯‡ #\n\n> ä¹‹å‰å†™äº†ä¸€ç¯‡æ–‡ç« <a href=\"http://hcysun.me/2015/10/16/%E4%B8%80%E7%AF%87%E7%9C%9F%E6%AD%A3%E6%95%99%E4%BC%9A%E4%BD%A0%E5%BC%80%E5%8F%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%96%87%E7%AB%A0(%E4%B8%80)/\">ã€Šä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯ä¸€é¢çš„æ–‡ç« (ä¸€)ã€‹</a>ã€‚é‚£æ˜¯æœ¬ç¯‡æ–‡ç« çš„åŸºç¡€ï¼Œå¦‚æœæ²¡æœ‰é˜…è¯»è¿‡çš„åŒå­¦å¯ä»¥å»çœ‹çœ‹ï¼Œä»Šå¤©å°±ç»™å¤§å®¶å¸¦æ¥å¹²è´§ï¼ŒçœŸçœŸæ­£æ­£çš„è®²åˆ°å¦‚ä½•å¾ˆå¥½çš„å¼€å‘ä¸€ä¸ªç§»åŠ¨ç«¯çš„é¡µé¢\n\n![ç§»åŠ¨ç«¯](http://7xlolm.com1.z0.glb.clouddn.com/20150923mobile.jpg)\n\n<!-- more -->\n\nå¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼Œä»å“ªé‡Œå¼€å§‹å‘¢ï¼Ÿä»è®¾è®¡å›¾å¼€å§‹ï¼Œå³PSDç¨¿ä»¶ï¼š\nç§»åŠ¨ç«¯PSDç¨¿ä»¶çš„å°ºå¯¸è‚¯å®šè¾ƒä¹‹PCç«¯çš„PSDç¨¿ä»¶ä¸åŒï¼Œå…·ä½“ä½“ç°åœ¨è®¾è®¡å›¾çš„å°ºå¯¸ä¸Šï¼Œç°åœ¨ç§»åŠ¨ç«¯çš„è®¾è®¡å›¾å°ºå¯¸å¤§å¤šä»¥iPhone5å’ŒiPhone6çš„è®¾å¤‡åƒç´ å°ºå¯¸ä½œä¸ºä¾æ®ï¼Œæ¯”å¦‚æ‹¿åˆ°ä¸€å¼ PSDè®¾è®¡å›¾ï¼Œå®ƒçš„æ€»å®½åº¦ä¸º640px(iPhone5)æˆ–è€…750px(iPhone6)ã€‚æœ¬ä¾‹å°±æ‹¿iPhone6çš„è®¾è®¡å›¾å°ºå¯¸ä¸ºæ ‡å‡†è¿›è¡Œè®²è§£ï¼Œå…¶å®ƒè®¾è®¡å›¾å°ºå¯¸é“ç†æ˜¯ä¸€æ ·çš„ï¼Œè¿™å¹¶ä¸å½±å“æˆ‘ä»¬çš„å¼€å‘ã€‚\n\né¦–å…ˆæˆ‘ä»¬è¦æœ‰ä¸€å¼ è®¾è®¡å›¾æ‰è¡Œï¼Œçœ‹ä¸‹å›¾ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€å¼ è®¾è®¡å›¾ï¼Œå®ƒå¾ˆç®€å•ï¼Œåªæœ‰ä¸€ä¸ªçº¢è‰²çš„æ–¹å—ï¼š\n\n![psdç¨¿](http://7xlolm.com1.z0.glb.clouddn.com/20150923psd1.jpg)\n\næ‹¿åˆ°äº†è®¾è®¡å›¾ï¼Œäºæ˜¯ä½ å¼€å¼€å¿ƒå¿ƒçš„å¼€å§‹å†™ä»£ç äº†ï¼Œä½ æ‰“å¼€äº†ç¼–è¾‘å™¨ï¼Œå¹¶å†™ä¸‹äº†å¦‚ä¸‹HTMLä»£ç ï¼š\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no\" />\n</head>\n<body>\n\n\t<div class=\"box\"></div>\n\n</body>\n</html>\n```\n\nHTMLä»£ç å†™å¥½äº†ï¼Œä½ ç”¨äº†ä¸€ä¸ªå¸¦æœ‰boxç±»çš„divæ ‡ç­¾ä½œä¸ºpsç¨¿ä¸­çš„çº¢è‰²å—ï¼Œç»è¿‡å°ºå¯¸æµ‹é‡ï¼Œä½ ä¸ºä¸Šé¢ä»£ç æ·»åŠ äº†CSSæ ·å¼ï¼Œæœ€åä½ çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no\" />\n\t<style>\n\tbody{\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\t.box{\n\t\twidth: 200px;\n\t\theight: 200px;\n\t\tbackground: red;\n\t}\n\t</style>\n</head>\n<body>\n\n\t<div class=\"box\"></div>\n\n</body>\n</html>\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œä½ åªæ˜¯åœ¨åŸæ¥çš„åŸºç¡€ä¸Šå¢åŠ äº†CSSæ ·å¼ï¼Œé¦–å…ˆä½ æ¸…é™¤äº†bodyæ ‡ç­¾ä¸Šçš„é»˜è®¤æ ·å¼ï¼Œè¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œç„¶åä½ æ ¹æ®è®¾è®¡å›¾ä¸­æµ‹é‡çš„å°ºå¯¸æ¥ç»™boxç¼–å†™æ ·å¼ï¼Œå®½200px;é«˜200px;èƒŒæ™¯çº¢è‰²ã€‚çœ‹ä¸Šå»å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œäºæ˜¯ä½ å¼€å¼€å¿ƒå¿ƒçš„æ‰“å¼€æµè§ˆå™¨ï¼Œåˆ·æ–°é¡µé¢ï¼Œä½ çš„è„¸è‰²æ²‰äº†ä¸‹æ¥ï¼Œå› ä¸ºä½ çœ‹åˆ°äº†ä½ ä¸æƒ³çœ‹åˆ°çš„ç»“æœï¼Œå¦‚ä¸‹å›¾ï¼Œä¸Šå›¾ä¸ºè®¾è®¡ç¨¿çš„æ ·å¼ï¼Œä¸‹å›¾ä¸ºä½ ç¼–å†™çš„htmlæ–‡ä»¶çš„æ ·å¼ï¼š\n\n![psdåŸç¨¿](http://7xlolm.com1.z0.glb.clouddn.com/20150923psd2.jpg)\n\n![htmlé¡µé¢](http://7xlolm.com1.z0.glb.clouddn.com/20150923ht1.jpg)\n\né€šè¿‡å¯¹æ¯”psdåŸç¨¿å’Œæˆ‘ä»¬ç›®å‰æ‰€å†™çš„htmlé¡µé¢ï¼Œå¯ä»¥çœ‹å‡ºæˆ‘ä»¬htmlé¡µé¢çš„é—®é¢˜ï¼Œçº¢è‰²æ–¹å—ä¸æ•´ä¸ªé¡µé¢çš„æ¯”ä¾‹å’ŒpsdåŸç¨¿ä¸ä¸€æ ·å•Šï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬æ˜æ˜æ˜¯æŒ‰ç…§åŸç¨¿æµ‹é‡çš„å°ºå¯¸å†™å‡ºæ¥çš„ä»£ç å´å’ŒpsdåŸç¨¿æ˜¾ç¤ºçš„æ•ˆæœä¸ä¸€æ ·å‘¢ï¼Ÿåˆ«å¿˜äº†ï¼ŒpsdåŸç¨¿çš„å°ºå¯¸æ˜¯æŒ‰ç…§è®¾å¤‡åƒç´ è®¾è®¡çš„ï¼Œç”±äºæˆ‘ä»¬æ‰€ç”¨çš„è®¾è®¡ç¨¿æ˜¯åŸºäºiPhone6è®¾è®¡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾è®¡ç¨¿çš„å°ºå¯¸å°±æ˜¯iPhone6çš„è®¾å¤‡åƒç´ çš„å°ºå¯¸ï¼Œä¹Ÿå°±æ˜¯750pxï¼Œè€Œæˆ‘ä»¬CSSä¸­çš„æ ·å¼æ˜¯åŸºäºå¸ƒå±€è§†å£çš„å°ºå¯¸è®¡ç®—çš„ï¼Œç”±äºæˆ‘ä»¬htmlé¡µé¢ä¸­ç”±äºå†™å…¥äº†ä»¥ä¸‹metaæ ‡ç­¾ï¼š\n\n```\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no\" />\n```\n\nåœ¨ä¸Šä¸€ç¯‡æˆ‘ä»¬è®²è¿‡ï¼Œ* width=device-width * è¿™æ®µä»£ç æ˜¯è®©å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºç†æƒ³è§†å£ã€‚\næ ¹æ®å…¬å¼(ç¼©æ”¾æ¯”ä¾‹ä¸º1)ï¼š\n<b>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£åƒç´ ä¸ªæ•°ï¼ˆdevice-widthï¼‰</b>\nå› ä¸ºiPhone6çš„DPRï¼ˆè®¾å¤‡åƒç´ æ¯”ï¼‰ä¸º2ï¼Œè®¾å¤‡åƒç´ ä¸º750ï¼Œæ‰€ä»¥iPhone6çš„ç†æƒ³è§†å£å°ºå¯¸ä¸º375pxã€‚æ‰€ä»¥ä¸Šé¢ä»£ç æœ€ç»ˆå¯¼è‡´çš„æ˜¯ï¼šä½¿æˆ‘ä»¬å¸ƒå±€è§†å£çš„å®½åº¦å˜æˆäº†375pxã€‚è€Œæˆ‘ä»¬CSSä¸­ç¼–å†™çš„æ ·å¼å°ºå¯¸åˆæ˜¯åŸºäºå¸ƒå±€è§†å£è®¡ç®—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—åˆ°çš„é¡µé¢çœ‹ä¸Šå»æ¯”ä¾‹ä¸å¯¹ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![å¸ƒå±€è§†å£å®½åº¦å’Œå…ƒç´ å®½åº¦](http://7xlolm.com1.z0.glb.clouddn.com/20150923ht2.jpg)\n![psdè®¾è®¡ç¨¿å®½åº¦å’Œå…ƒç´ å®½åº¦](http://7xlolm.com1.z0.glb.clouddn.com/20150923psd3.jpg)\n\nå¦‚ä¸Šé¢ä¸¤å¹…å›¾ç‰‡ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œpsdç¨¿çš„æ€»å®½æ˜¯750pxï¼Œå…ƒç´ å®½200pxï¼Œè€Œæˆ‘ä»¬çœŸæ­£åšé¡µé¢çš„æ—¶å€™ï¼Œå¸ƒå±€è§†å£çš„å®½åº¦æ˜¯375pxï¼Œæ­£å¥½æ˜¯è®¾è®¡ç¨¿çš„ä¸€åŠã€‚æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨è®¾è®¡ç¨¿ä¸Šé¢æµ‹é‡æ‰€å¾—çš„åƒç´ å°ºå¯¸ï¼Œæ ¹æ®æ¯”ä¾‹ï¼Œæˆ‘ä»¬åº”è¯¥å°†æµ‹é‡æ‰€å¾—çš„å°ºå¯¸é™¤ä»¥2ï¼Œæ‰æ˜¯æˆ‘ä»¬CSSä¸­å¸ƒå±€æ‰€ç”¨çš„å°ºå¯¸ï¼Œæ®æ­¤ï¼Œæˆ‘ä»¬å°†200pxé™¤ä»¥2å¾—åˆ°100pxï¼Œäºæ˜¯æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œå°†çº¢è‰²æ–¹å—çš„å®½é«˜éƒ½è®¾ä¸º100pxï¼Œåˆ·æ–°é¡µé¢ï¼Œçœ‹çœ‹æ¯”ä¾‹æ˜¯ä¸æ˜¯å’Œè®¾è®¡å›¾ä¸€æ ·äº†ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå¦‚ä¸‹å›¾ä¸ºä¿®æ”¹åçš„htmlé¡µé¢ï¼š\n\n![ä¿®æ”¹åçš„htmlé¡µé¢](http://7xlolm.com1.z0.glb.clouddn.com/20150923ht3.jpg)\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†æ­£ç¡®çš„æ•°æ®ï¼Œå¹¶ä¸”æ­£ç¡®çš„å†™å‡ºäº†é¡µé¢ï¼Œä½ å¾ˆé«˜å…´ï¼Œå¯æ˜¯é—®é¢˜æ¥äº†ï¼Œå¦‚æœä½ åœ¨åšé¡µé¢çš„æ—¶å€™ï¼Œæµ‹é‡äº†ä¸€ä¸ªå…ƒç´ çš„å®½åº¦ï¼Œå®½åº¦æ˜¯ä¸€ä¸ªå¥‡æ•°ï¼Œæ¯”å¦‚111åƒç´ ï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¹‹å‰çš„åšæ³•æ˜¯ï¼Œå°†æµ‹é‡åˆ°çš„æ•°æ®é™¤ä»¥2ï¼Œå¾—åˆ°æˆ‘ä»¬çœŸæ­£ä½¿ç”¨çš„æ•°æ®ï¼Œæ‰€ä»¥111é™¤ä»¥2ç­‰äº55.5pxï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œè®¡ç®—æœº(æ‰‹æœº)æ²¡åŠæ³•æ˜¾ç¤ºä¸åˆ°ä¸€ä¸ªåƒç´ çš„åƒç´ å€¼ï¼Œè®¡ç®—æœº(æ‰‹æœº)ä¼šè‡ªåŠ¨å°†å…¶è¡¥å…¨ä¸ºä¸€ä¸ªåƒç´ è¿›è¡Œæ˜¾ç¤ºï¼Œæ‰€ä»¥æœ€ç»ˆä¼šå°†å…ƒç´ æ˜¾ç¤ºä¸º56åƒç´ ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚\nå¦å¤–ï¼Œæˆ‘ä»¬çš„è®¾è®¡ç¨¿æ˜¯åŸºäºiphone6è®¾è®¡çš„ï¼Œæˆ‘ä»¬è°ƒè¯•é¡µé¢ä¹Ÿæ˜¯åœ¨iphone6ä¸‹è°ƒè¯•çš„ã€‚åˆå› ä¸ºiphone6çš„è®¾å¤‡åƒç´ æ¯”è¯•2ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰èƒ½ç”±è®¾è®¡ç¨¿æµ‹é‡çš„æ•°æ®é™¤ä»¥2åç›´æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨iphone6ä¸‹æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä½ è¦çŸ¥é“ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰æ‰‹æœºçš„è®¾å¤‡åƒç´ æ¯”éƒ½æ˜¯2ï¼Œæœ‰çš„æ‰‹æœºçš„è®¾å¤‡åƒç´ æ¯”è¯•2.5æˆ–è€…3ã€‚å¹¶ä¸”ä¸åŒè®¾å¤‡çš„è®¾å¤‡åƒç´ åˆä¸åŒï¼Œè¿™æ ·å°±å¯¼è‡´ç†æƒ³è§†å£çš„å°ºå¯¸ä¸åŒï¼Œä»è€Œå¯¼è‡´å¸ƒå±€è§†å£çš„å°ºå¯¸ä¸åŒï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥æ ¹æ®iphone6çš„è®¾è®¡ç¨¿å°ºå¯¸é™¤ä»¥2å¾—åˆ°çš„å°ºå¯¸ç”¨æ¥ç¼–å†™CSSæ˜¯ä¸èƒ½åœ¨æ‰€æœ‰è®¾å¤‡ä¸‹å®Œå¥½æ˜¾ç¤ºçš„ã€‚\n\næ‰€ä»¥ï¼Œæˆ‘ä»¬è¦æ¢ä¸€ä¸ªæ–¹æ³•ã€‚\näºæ˜¯æˆ‘ä»¬æƒ³åˆ°ï¼šå¦‚æœæˆ‘ä»¬èƒ½å°†å¸ƒå±€è§†å£çš„å°ºå¯¸è®¾ç½®ä¸ºå’Œè®¾å¤‡åƒç´ å°ºå¯¸ç›¸ç­‰çš„è¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¿è¯äº†è®¾è®¡å›¾ä¸é¡µé¢çš„1:1å…³ç³»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨psdä¸­æµ‹é‡çš„å°ºå¯¸äº†ï¼Œç„¶ååœ¨å…¶ä»–å°ºå¯¸çš„æ‰‹æœºä¸­ï¼Œæˆ‘ä»¬è¿›è¡Œç­‰æ¯”ç¼©æ”¾å°±okäº†ã€‚é‚£ä¹ˆå¦‚ä½•æ‰èƒ½è®©å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºè®¾å¤‡åƒç´ å°ºå¯¸å‘¢ï¼Ÿ\n\næˆ‘ä»¬æ³¨æ„åˆ°metaæ ‡ç­¾ä¸­çš„ width=device-width è¿™æ®µä»£ç ï¼Œé¦–å…ˆä½ è¦æ˜ç™½è¿™å¥è¯çš„æ„æ€ï¼Œå‰é¢è®²è¿‡ï¼Œè¿™å¥è¯æœ€ç»ˆå¯¼è‡´çš„ç»“æœæ˜¯ï¼šè®©å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºç†æƒ³è§†å£çš„å°ºå¯¸ã€‚è¨€å¤–ä¹‹æ„å°±æ˜¯,åœ¨ä»£ç  width=device-width ä¸­ï¼š\n\nwidthï¼šæ˜¯å¸ƒå±€è§†å£çš„width\ndevice-widthï¼šæ˜¯ç†æƒ³è§†å£çš„å®½åº¦\n\næ ¹æ®å…¬å¼(ç¼©æ”¾æ¯”ä¾‹ä¸º1)ï¼š\n\n<b>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£åƒç´ ä¸ªæ•°ï¼ˆdevice-widthï¼‰</b>\n\nä»¥iphone6ä¸ºä¾‹ï¼š\nè®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ï¼š2\nè®¾å¤‡åƒç´ ä¸ªæ•°ï¼š750\næ‰€ä»¥åœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1çš„æƒ…å†µä¸‹ï¼Œiphone6ç†æƒ³è§†å£çš„åƒç´ ä¸ªæ•°ä¸º 750 / 2 = 375ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºiphone6æ¥è®² device-widthçš„å€¼ä¸º375\n\næ‰€ä»¥æˆ‘ä»¬é€šè¿‡width=device-widthè¿™å¥è¯ï¼Œé—´æ¥çš„å°†å¸ƒå±€è§†å£çš„å°ºå¯¸è®¾ä¸ºäº†375ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬èƒ½æ”¹å˜ç†æƒ³è§†å£çš„å°ºå¯¸ï¼Œä¹Ÿå°±æ”¹å˜äº†å¸ƒå±€é€‚å£çš„å°ºå¯¸ï¼Œå¦‚ä½•æ”¹å˜ç†æƒ³è§†å£çš„å°ºå¯¸å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°ç¼©æ”¾äº†ï¼Œä¸Šä¸€ç¯‡æˆ‘ä»¬è®²åˆ°è¿‡ç¼©æ”¾ï¼Œç¼©æ”¾æ˜¯ç¼©å°æˆ–æ”¾å¤§CSSåƒç´ çš„è¿‡ç¨‹ï¼Œä»¥iphone6ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬ç¼©æ”¾æ¯”ä¾‹ä¸º1:1çš„æ—¶å€™ï¼Œç”±äºiphone6çš„è®¾å¤‡åƒç´ æ¯”ä¸º2ï¼Œæ‰€ä»¥iphone6çš„è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»çœ‹èµ·æ¥å°±åƒä¸‹å›¾è¿™æ ·ï¼š\n\n![iphone6ä¸‹ç¼©æ”¾æ¯”ä¾‹ä¸º1æ—¶ï¼Œè®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/2015092319a.jpg)\n\nä¸€ä¸ªCSSåƒç´ å®½åº¦ç­‰äºä¸¤ä¸ªè®¾å¤‡åƒç´ å®½åº¦ï¼Œæ‰€ä»¥750pxçš„è®¾å¤‡å®½åº¦çš„å¸ƒå±€è§†å£ä¸º357CSSåƒç´ ã€‚è¿™æ˜¯åœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1çš„æƒ…å†µä¸‹ï¼Œæ—¢ç„¶ç¼©æ”¾å¯ä»¥æ”¾å¤§æˆ–ç¼©å°CSSåƒç´ ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬å°†CSSåƒç´ çš„å®½åº¦ç¼©æ”¾è‡³ä¸è®¾å¤‡åƒç´ å®½åº¦ç›¸ç­‰äº†ï¼Œé‚£ä¹ˆ750ä¸ªè®¾å¤‡åƒç´ ä¹Ÿå°±èƒ½æ˜¾ç¤º750ä¸ªCSSåƒç´ ï¼Œç¼©æ”¾åçš„è®¾å¤‡åƒç´ ä¸CSSåƒç´ çœ‹èµ·æ¥åº”è¯¥åƒä¸‹å›¾è¿™æ ·ï¼š\n\n![iphone6ç¼©å°0.5å€åï¼Œè®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/20150923px1.jpg)\n\nä½†æ˜¯ï¼Œæˆ‘ä»¬çš„ç¼©æ”¾å€æ•°æ˜¯å¤šå°‘å‘¢ï¼Ÿåœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1çš„æ—¶å€™ï¼Œä¸€ä¸ªCSSåƒç´ çš„å®½åº¦ = ä¸¤ä¸ªè®¾å¤‡åƒç´ çš„å®½åº¦ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®© ä¸€ä¸ªCSSåƒç´ çš„å®½åº¦ = ä¸€ä¸ªè®¾å¤‡åƒç´ çš„å®½åº¦ï¼Œæˆ‘ä»¬å°±è¦å°†CSSåƒç´ ç¼©å°ä¸ºåŸæ¥çš„0.5å€ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬ç¼©å°çš„å€æ•° = è®¾å¤‡åƒç´ æ¯”çš„å€’æ•°ã€‚\näºæ˜¯ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„HTMLä»£ç (ä¿®æ”¹äº†metaæ ‡ç­¾)ï¼š\n\n```\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"width=device-width,initial-scale=0.5,maximum-scale=0.5,user-scalable=no\" />\n\t<style>\n\tbody{\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\t.box{\n\t\twidth: 200px;\n\t\theight: 200px;\n\t\tbackground: red;\n\t}\n\t</style>\n</head>\n<body>\n\n\t<div class=\"box\"></div>\n\n</body>\n</html>\n```\n\næ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬ç»™çº¢è‰²æ–¹å—ä½¿ç”¨çš„CSSå°ºå¯¸ç›´æ¥ä½¿ç”¨çš„æ˜¯psdç¨¿ä¸­æµ‹é‡çš„å°ºå¯¸ï¼Œæˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼Œæ€ä¹ˆæ ·ï¼Ÿæ»¡æ„å§ï¼š\n\n![ä¿®æ”¹åçš„æ–°é¡µé¢æ­£ç¡®è¾“å‡º](http://7xlolm.com1.z0.glb.clouddn.com/2015092316b.jpg)\n\nä½†æ˜¯æˆ‘ä»¬è¿™æ˜¯æœ‰ä¸ªå‰æçš„ï¼Œé‚£å°±æ˜¯ç¼©æ”¾0.5å€åªé€‚ç”¨äºè®¾å¤‡åƒç´ æ¯”ä¸º2çš„è®¾å¤‡ï¼ˆå› ä¸ºç¼©æ”¾å€¼ = 1 / è®¾å¤‡åƒç´ æ¯”ï¼‰ã€‚æ‰€ä»¥ï¼Œä¸ºäº†é€‚åº”æ‰€æœ‰çš„è®¾å¤‡ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨javascriptä»£ç åŠ¨æ€ç”Ÿæˆmetaæ ‡ç­¾ï¼š\n\n```\nvar scale = 1 / window.devicePixelRatio;\ndocument.querySelector('meta[name=\"viewport\"]').setAttribute('content','width=device-width,initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n```\n\nå…¶ä¸­ <b>window.devicePixelRatio</b> çš„å€¼ä¸ºè®¾å¤‡åƒç´ æ¯”ã€‚\näºæ˜¯æˆ‘ä»¬çš„ä»£ç å˜æˆäº†è¿™æ ·ï¼š\n\n```\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"\" />\n\t<style>\n\tbody{\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\t.box{\n\t\twidth: 200px;\n\t\theight: 200px;\n\t\tbackground: red;\n\t}\n\t</style>\n</head>\n<body>\n\n\t<div class=\"box\"></div>\n\n\t<script>\n\tvar scale = 1 / window.devicePixelRatio;\n\tdocument.querySelector('meta[name=\"viewport\"]').setAttribute('content','width=device-width,initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n\t</script>\n</body>\n</html>\n```\n\nä¸Šé¢çš„ä»£ç æœ€ç»ˆèƒ½ä¿è¯ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æ— è®ºä»»ä½•è®¾å¤‡ï¼Œå¸ƒå±€è§†å£çš„å®½åº¦æ€»æ˜¯ç­‰äºè®¾å¤‡åƒç´ ã€‚\nè¿™æ ·ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡å›¾ä¸­æµ‹é‡ä¸º200pxçš„å®½åº¦å°±èƒ½ç›´æ¥ç”¨åœ¨CSSä¸­äº†ï¼Œå¹¶ä¸”åœ¨iphone6ä¸­æ˜¾ç¤ºå®Œå¥½ï¼Œå¯æ˜¯åˆ«å¿˜äº†ï¼Œæˆ‘ä»¬çš„è®¾è®¡å›¾å°±æ˜¯æ ¹æ®iphone6è®¾è®¡çš„ï¼Œå¦‚æœæ¢åšå…¶ä»–è®¾å¤‡ï¼Œè¿˜èƒ½æ˜¾ç¤ºå®Œå¥½ä¹ˆï¼Ÿæˆ‘ä»¬ä¸å¦¨è¯•ä¸€ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼Œæ˜¯ä¸Šé¢ä»£ç åœ¨iphone5å’Œiphone6ä¸‹çš„å¯¹æ¯”ï¼š\n\n![iphone5ä¸­çš„æ•ˆæœ](http://7xlolm.com1.z0.glb.clouddn.com/20150923p5.jpg)\n\n![iphone6ä¸­çš„æ•ˆæœ](http://7xlolm.com1.z0.glb.clouddn.com/20150923p6.jpg)\n\næˆ‘ä»¬å‘ç°ï¼Œæ— è®ºæ˜¯äº”è¿˜æ˜¯6ï¼Œå³ä½¿è®¾å¤‡åƒç´ å˜äº†ï¼Œå³å±å¹•å®½åº¦å˜äº†ï¼Œå¯æ˜¯çº¢è‰²æ–¹å—çš„å®½åº¦å¹¶æ²¡æœ‰å˜ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„ç°è±¡ï¼Œå› ä¸ºè¿™æ ·é¡µé¢çš„å…ƒç´ å°±ä¸æˆæ¯”ä¾‹äº†ï¼Œä¼šå½±å“åˆ°å¸ƒå±€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•è®©æˆ‘ä»¬é¡µé¢çš„å…ƒç´ è·Ÿç€è®¾å¤‡å˜åŒ–è€Œç­‰æ¯”ç¼©æ”¾ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦è§£å†³çš„ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°remçš„çŸ¥è¯†ç‚¹äº†ã€‚\n\n## rem ##\n\nä»€ä¹ˆæ˜¯remï¼Ÿ\nremæ˜¯ç›¸å¯¹å°ºå¯¸å•ä½ï¼Œç›¸å¯¹äºhtmlæ ‡ç­¾å­—ä½“å¤§å°çš„å•ä½ï¼Œä¸¾ä¸ªä¾‹å­ï¼š\nå¦‚æœhtmlçš„font-size = 18px;\né‚£ä¹ˆ1rem = 18pxï¼Œéœ€è¦è®°ä½çš„æ˜¯ï¼Œremæ˜¯åŸºäºhtmlæ ‡ç­¾çš„å­—ä½“å¤§å°çš„ã€‚\n\nç›¸ä¿¡ä½ å·²ç»æ˜ç™½äº†ï¼Œå¯¹æ²¡é”™ï¼Œæˆ‘ä»¬è¦æŠŠä¹‹å‰ç”¨pxåšå…ƒç´ å°ºå¯¸çš„å•ä½æ¢æˆremï¼Œæ‰€ä»¥ï¼Œç°åœ¨çš„é—®é¢˜å°±æ˜¯å¦‚æœè½¬æ¢ï¼Œå› ä¸ºremæ˜¯æ ¹æ®htmlæ ‡ç­¾çš„font-sizeå€¼ç¡®å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦ç¡®å®šhtmlæ ‡ç­¾çš„font-sizeå€¼å°±è¡Œäº†ï¼Œæˆ‘ä»¬é¦–å…ˆè‡ªå·±å®šä¸€ä¸ªæ ‡å‡†ï¼Œå°±æ˜¯è®©font-sizeçš„å€¼ç­‰äºè®¾å¤‡åƒç´ çš„ååˆ†ä¹‹ä¸€ï¼Œå³ï¼š\n\n```\ndocument.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + 'px';\n```\n\nä»¥iphone6ä¸ºä¾‹ï¼Œhtmlæ ‡ç­¾çš„font-sizeçš„å€¼å°±ç­‰äº 750 / 10 = 75px äº†ï¼Œè¿™æ · 1rem = 75pxï¼Œæ‰€ä»¥çº¢è‰²æ–¹å—200pxæ¢ç®—ä¸ºremå•ä½å°±æ˜¯ 200 / 75 = 2.6666667remã€‚\né‚£ä¹ˆåœ¨iphone5ä¸­å‘¢ï¼Ÿå› ä¸ºiphone5çš„è®¾å¤‡åƒç´ ä¸º640ï¼Œæ‰€ä»¥iphoneçš„htmlæ ‡ç­¾çš„font-sizeçš„å€¼ä¸º 640 / 10 = 64pxï¼Œæ‰€ä»¥ 1rem = 64pxï¼Œæ‰€ä»¥åœ¨iphone6ä¸­æ˜¾ç¤ºä¸º200pxçš„å…ƒç´ åœ¨iphone5ä¸­ä¼šæ˜¾ç¤ºä¸º 2.6666667 * 64 åƒç´ ï¼Œè¿™æ ·ï¼Œåœ¨ä¸åŒè®¾å¤‡ä¸­å°±å®ç°äº†è®©å…ƒç´ ç­‰æ¯”ç¼©æ”¾ä»è€Œä¸å½±å“å¸ƒå±€ã€‚è€Œä¸Šé¢çš„æ–¹æ³•ä¹Ÿæ˜¯æ‰‹æœºæ·˜å®æ‰€ç”¨çš„æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œç°åœ¨ä½ åªéœ€è¦å°†ä½ æµ‹é‡çš„å°ºå¯¸æ•°æ®é™¤ä»¥75å°±è½¬æ¢æˆäº†remå•ä½ï¼Œå¦‚æœæ˜¯iPhone5å°±è¦é™¤ä»¥64ï¼Œå³é™¤ä»¥ä½ åŠ¨æ€è®¾ç½®çš„font-sizeçš„å€¼ã€‚\n\nå¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåšé¡µé¢çš„æ—¶å€™æ–‡å­—å­—ä½“å¤§å°ä¸è¦ç”¨remæ¢ç®—ï¼Œè¿˜æ˜¯ä½¿ç”¨pxåšå•ä½ã€‚åé¢ä¼šè®²åˆ°ã€‚\n\nè®©æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬ç°åœ¨äº†è§£çš„æ–¹æ³•ï¼š\n\n1ã€å°†å¸ƒå±€è§†å£å¤§å°è®¾ä¸ºè®¾å¤‡åƒç´ å°ºå¯¸ï¼š\n\n```\nvar scale = 1 / window.devicePixelRatio;\ndocument.querySelector('meta[name=\"viewport\"]').setAttribute('content','width=device-width,initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n```\n\n2ã€åŠ¨æ€è®¾ç½®htmlå­—ä½“å¤§å°ï¼š\n\n```\ndocument.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + 'px';\n```\n\n3ã€å°†è®¾è®¡å›¾ä¸­çš„å°ºå¯¸æ¢ç®—æˆrem\n\nå…ƒç´ çš„remå°ºå¯¸ = å…ƒç´ çš„psdç¨¿æµ‹é‡çš„åƒç´ å°ºå¯¸ / åŠ¨æ€è®¾ç½®çš„htmlæ ‡ç­¾çš„font-sizeå€¼\n\nè¯´äº†ä¸€å¤§å †ï¼Œå…¶å®æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„htmlè«æ¿å°±å¯ä»¥å†™é¡µé¢äº†ï¼Œå”¯ä¸€éœ€è¦ä½ åšçš„å°±æ˜¯è®¡ç®—å…ƒç´ çš„remå°ºå¯¸ï¼Œæ‰€ä»¥å³ä½¿ä½ æ²¡çœ‹æ‡‚ä¸Šé¢çš„è®²è¿°ä¹Ÿä¸é‡è¦ï¼Œä½ åªè¦å°†è«æ¿æ‹¿è¿‡å»ç”¨å°±å¥½äº†ï¼š\n\n```\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"\" />\n</head>\n<body>\n\n\t\n\n\t<script>\n\tvar scale = 1 / window.devicePixelRatio;\n\tdocument.querySelector('meta[name=\"viewport\"]').setAttribute('content','width=device-width,initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n\n\tdocument.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + 'px';\n\t</script>\n</body>\n</html>\n```\n\nç°åœ¨æˆ‘ä»¬ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ä¿®æ”¹æˆ‘ä»¬çš„ä»£ç å¦‚ä¸‹ï¼š\n\n```\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"\" />\n\t<style>\n\tbody{\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\t.box{\n\t\twidth: 2.66666667rem;\n\t\theight: 2.66666667rem;\n\t\tbackground: red;\n\t}\n\t</style>\n</head>\n<body>\n\n\t<div class=\"box\"></div>\n\n\t<script>\n\tvar scale = 1 / window.devicePixelRatio;\n\tdocument.querySelector('meta[name=\"viewport\"]').setAttribute('content','width=device-width,initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n\n\tdocument.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + 'px';\n\t</script>\n</body>\n</html>\n```\n\næ‰“å¼€æµè§ˆå™¨ï¼Œåˆ†åˆ«åœ¨iPhone6å’ŒiPhone5ä¸‹æŸ¥çœ‹é¡µé¢ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œç°åœ¨çš„å…ƒç´ å¯ä»¥æ ¹æ®æ‰‹æœºçš„å°ºå¯¸ä¸åŒè€Œç­‰æ¯”ç¼©æ”¾äº†ã€‚\n\nä¸Šé¢çš„æ–¹æ³•æ˜¯æ‰‹æœºæ·˜å®çš„æ–¹æ³•ï¼Œæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯è½¬åŒ–remå•ä½çš„æ—¶å€™ï¼Œéœ€è¦é™¤ä»¥font-sizeçš„å€¼ï¼Œæ·˜å®ç”¨çš„æ˜¯iPhone6çš„è®¾è®¡å›¾ï¼Œæ‰€ä»¥æ·˜å®è½¬æ¢å°ºå¯¸çš„æ—¶å€™è¦é™¤ä»¥75ï¼Œè¿™ä¸ªå€¼å¯ä¸å¥½ç®—ï¼Œæ‰€ä»¥è¿˜è¦å€Ÿç”¨è®¡ç®—å™¨æ¥å®Œæˆï¼Œå½±å“å¼€å‘æ•ˆç‡ï¼Œå¦å¤–ï¼Œåœ¨è½¬è¿˜remå•ä½æ—¶é‡åˆ°é™¤ä¸å°½çš„æ•°æ—¶æˆ‘ä»¬ä¼šé‡‡ç”¨å¾ˆé•¿çš„è¿‘ä¼¼å€¼æ¯”å¦‚ä¸Šé¢çš„2.6666667remï¼Œè¿™æ ·å¯èƒ½ä¼šä½¿é¡µé¢å…ƒç´ çš„å°ºå¯¸æœ‰åå·®ã€‚\n\né™¤äº†ä¸Šé¢çš„æ–¹æ³•æ¯”è¾ƒé€šç”¨ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬æ¥é‡æ–°æ€è€ƒä¸€ä¸‹ï¼š\n\nä¸Šé¢åšé¡µé¢çš„æ€è·¯æ˜¯ï¼šæ‹¿åˆ°è®¾è®¡å›¾ï¼Œæ¯”å¦‚iPhone6çš„è®¾è®¡å›¾ï¼Œæˆ‘ä»¬å°±å°†æµè§ˆå™¨è®¾ç½®åˆ°iPhone6è®¾å¤‡è°ƒè¯•ï¼Œç„¶åä½¿ç”¨jsåŠ¨æ€ä¿®æ”¹metaæ ‡ç­¾ï¼Œä½¿å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºè®¾è®¡å›¾å°ºå¯¸ï¼Œä¹Ÿå°±æ˜¯è®¾å¤‡åƒç´ å°ºå¯¸ï¼Œç„¶åä½¿ç”¨remæ›¿ä»£pxåšå°ºå¯¸ä»£ä¸ºï¼Œä½¿å¾—é¡µé¢åœ¨ä¸åŒè®¾å¤‡ä¸­ç­‰æ¯”ç¼©æ”¾ã€‚\n\nç°åœ¨å‡å¦‚æˆ‘ä»¬ä¸å»ä¿®æ”¹metaæ ‡ç­¾ï¼Œæ­£å¸¸ä½¿ç”¨ç¼©æ”¾ä¸º1:1çš„metaæ ‡ç­¾ï¼Œå³ä½¿ç”¨å¦‚ä¸‹metaæ ‡ç­¾ï¼š\n\n```\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no\" />\n```\n\nè¿˜ä»¥iPhone6ä¸ºä¾‹ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç¼©æ”¾ä¸º1:1çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®å…¬å¼ï¼š\n\n<b>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£åƒç´ ä¸ªæ•°ï¼ˆdevice-widthï¼‰</b>\n\næˆ‘ä»¬çŸ¥é“ï¼š\nè®¾å¤‡åƒç´  = è®¾è®¡å›¾å°ºå¯¸ = 750px\nå¸ƒå±€è§†å£ = 375px\n\nå‡è®¾æˆ‘ä»¬ä»¥iPhone6è®¾è®¡å›¾å°ºå¯¸ä¸ºæ ‡å‡†ï¼Œåœ¨è®¾è®¡å›¾çš„å°ºå¯¸ä¸‹è®¾ç½®ä¸€ä¸ªfont-sizeå€¼ä¸º100pxã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼š750pxå®½çš„é¡µé¢ï¼Œæˆ‘ä»¬è®¾ç½®100pxçš„font-sizeå€¼ï¼Œé‚£ä¹ˆé¡µé¢çš„å®½åº¦æ¢ç®—ä¸ºremå°±ç­‰äº 750 / 100 = 7.5remã€‚\n\næˆ‘ä»¬å°±ä»¥é¡µé¢æ€»å®½ä¸º7.5remä¸ºæ ‡å‡†ï¼Œé‚£ä¹ˆåœ¨å¸ƒå±€è§†å£ä¸­ï¼Œä¹Ÿå°±æ˜¯é¡µé¢æ€»å®½ä¸º375pxä¸‹ï¼Œfont-sizeå€¼åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿå¾ˆç®€å•ï¼š\n\nfont-size = 375 / 7.5 = 50px\n\né‚£ä¹ˆåœ¨iPhone5ä¸‹å‘¢ï¼Ÿå› ä¸ºiPhone5çš„å¸ƒå±€è§†å£å®½ä¸º320pxï¼Œæ‰€ä»¥å¦‚æœé¡µé¢æ€»å®½ä»¥7.5ä¸ºæ ‡å‡†ï¼Œé‚£ä¹ˆiPhone5ä¸‹æˆ‘ä»¬è®¾ç½®çš„font-sizeå€¼åº”è¯¥æ˜¯ï¼š\n\nfont-size = 320 / 7.5 =42.666666667px\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡åœ¨ä»€ä¹ˆè®¾å¤‡ä¸‹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æŠŠé¡µé¢çš„æ€»å®½åº¦è®¾ä¸ºä¸€ä¸ªä»¥remä¸ºå•ä½çš„å®šå€¼ï¼Œæ¯”å¦‚æœ¬ä¾‹å°±æ˜¯7.5remï¼Œåªä¸è¿‡ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å¸ƒå±€è§†å£çš„å°ºå¯¸åŠ¨æ€è®¾ç½®font-sizeçš„å€¼ï¼š\n\n```\ndocument.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px';\n```\n\nè¿™æ ·ï¼Œæ— è®ºåœ¨ä»€ä¹ˆè®¾å¤‡ä¸‹ï¼Œæˆ‘ä»¬é¡µé¢çš„æ€»å®½åº¦éƒ½æ˜¯7.5remï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥åœ¨è®¾è®¡å›¾ä¸Šæµ‹é‡pxå•ä½çš„å°ºå¯¸ï¼Œç„¶åé™¤ä»¥100è½¬æ¢æˆremå•ä½åç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚ï¼Œåœ¨iPhone6è®¾è®¡å›¾ä¸­æµ‹é‡ä¸€ä¸ªå…ƒç´ çš„å°ºå¯¸ä¸º200pxï¼Œé‚£ä¹ˆè½¬æ¢æˆremå•ä½å°±æ˜¯ 200 / 100 = 2remï¼Œå› ä¸ºåœ¨ä¸åŒè®¾å¤‡ä¸‹æˆ‘ä»¬åŠ¨æ€è®¾ç½®äº†htmlæ ‡ç­¾çš„font-sizeå€¼ï¼Œæ‰€ä»¥ä¸åŒè®¾å¤‡ä¸‹ç›¸åŒçš„remå€¼å¯¹åº”çš„åƒç´ å€¼æ˜¯ä¸åŒçš„ï¼Œè¿™æ ·å°±å®ç°äº†åœ¨ä¸åŒè®¾å¤‡ä¸‹ç­‰æ¯”ç¼©æ”¾ã€‚æˆ‘ä»¬ä¿®æ”¹htmlä»£ç å¦‚ä¸‹ï¼š\n\n```\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no\" />\n\t<style>\n\tbody{\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\t.box{\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tbackground: red;\n\t}\n\t</style>\n</head>\n<body>\n\n\t<div class=\"box\"></div>\n\n\t<script>\n\tdocument.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px';\n\t</script>\n</body>\n</html>\n```\n\nåˆ·æ–°é¡µé¢ï¼Œåˆ†åˆ«åœ¨iPhone6å’ŒiPhone5ä¸‹è°ƒè¯•æŸ¥çœ‹ç»“æœï¼Œä¼šå‘ç°å¦‚ä¸‹å›¾ï¼Œä½¿æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œç­‰æ¯”ç¼©æ”¾ï¼Œokï¼Œå®é™…ä¸Šè¿™ç§åšæ³•ä¹Ÿæ˜¯ç½‘æ˜“çš„åšæ³•ï¼š\n\n![iPhone6ä¸‹æ˜¾ç¤ºæ•ˆæœ](http://7xlolm.com1.z0.glb.clouddn.com/2015092320a.jpg)\n\n![iPhone5ä¸‹æ˜¾ç¤ºæ•ˆæœ](http://7xlolm.com1.z0.glb.clouddn.com/2015092320b.jpg)\n\nä¸‹é¢ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ç¬¬äºŒç§åšæ³•ï¼š\n\n1ã€æ‹¿åˆ°è®¾è®¡å›¾ï¼Œè®¡ç®—å‡ºé¡µé¢çš„æ€»å®½ï¼Œä¸ºäº†å¥½è®¡ç®—ï¼Œå–100pxçš„font-sizeï¼Œå¦‚æœè®¾è®¡å›¾æ˜¯iPhone6çš„é‚£ä¹ˆè®¡ç®—å‡ºçš„å°±æ˜¯7.5remï¼Œå¦‚æœé¡µé¢æ˜¯iPhone5çš„é‚£ä¹ˆè®¡ç®—å‡ºçš„ç»“æœå°±æ˜¯6.4remã€‚\n2ã€åŠ¨æ€è®¾ç½®htmlæ ‡ç­¾çš„font-sizeå€¼ï¼š\n  ```\n  document.documentElement.style.fontSize = document.documentElement.clientWidth / ä»¥remä¸ºå•ä½çš„é¡µé¢æ€»å®½ + 'px';\n  ```\n  å¦‚iPhone6çš„è®¾è®¡å›¾å°±æ˜¯ï¼š\n  ```\n  document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px';\n  ```\n  iPhone5çš„è®¾è®¡å›¾å°±æ˜¯ï¼š\n  ```\n  document.documentElement.style.fontSize = document.documentElement.clientWidth / 6.4 + 'px';\n  ```\n3ã€åšé¡µé¢æ˜¯æµ‹é‡è®¾è®¡å›¾çš„pxå°ºå¯¸é™¤ä»¥100å¾—åˆ°remå°ºå¯¸ã€‚\n4ã€å’Œæ·˜å®çš„åšæ³•ä¸€æ ·ï¼Œæ–‡å­—å­—ä½“å¤§å°ä¸è¦ä½¿ç”¨remæ¢ç®—ã€‚\n\nä¸‹é¢æ˜¯è¿™ç§åšæ³•çš„htmlè«æ¿ï¼š\n\n```\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no\" />\n</head>\n<body>\n\n\t\n\n\t<script>\n\tdocument.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px';\n\t</script>\n</body>\n</html>\n```\n\nç”±äºè¿™ç§åšæ³•åœ¨å¼€å‘ä¸­æ¢ç®—remå•ä½çš„æ—¶å€™åªéœ€è¦å°†æµ‹é‡çš„å°ºå¯¸é™¤ä»¥100å³å¯ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨è®¡ç®—å™¨æˆ‘ä»¬å°±å¯ä»¥å¾ˆå¿«çš„å®Œæˆè®¡ç®—è½¬æ¢ï¼Œæ‰€ä»¥è¿™ä¹Ÿä¼šæå‡å¼€å‘æ•ˆç‡ï¼Œæœ¬äººä¹Ÿæ¯”è¾ƒé’çè¿™ç§åšæ³•ã€‚\n\nå¦å¤–ï¼Œæ— è®ºæ˜¯ç¬¬ä¸€ç§åšæ³•è¿˜æ˜¯ç¬¬äºŒç§åšæ³•ï¼Œæˆ‘ä»¬éƒ½æåˆ°äº†ï¼Œæ–‡å­—å­—ä½“å¤§å°æ˜¯ä¸è¦æ¢ç®—æˆremåšå•ä½çš„ï¼Œè€Œæ˜¯ä½¿ç”¨åª’ä½“æŸ¥è¯¢æ¥è¿›è¡ŒåŠ¨æ€è®¾ç½®ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±æ˜¯ç½‘æ˜“çš„ä»£ç ï¼š\n\nä»£ç ç‰‡æ®µä¸€ï¼š\n\n```\n@media screen and (max-width: 321px) {\n    body {\n        font-size:16px\n    }\n}\n\n@media screen and (min-width: 321px) and (max-width:400px) {\n    body {\n        font-size:17px\n    }\n}\n\n@media screen and (min-width: 400px) {\n    body {\n        font-size:19px\n    }\n}\n```\n\nä»£ç ç‰‡æ®µäºŒï¼š\n\n```\n@media screen and (max-width: 321px) {\n    header,footer {\n        font-size:16px\n    }\n}\n\n@media screen and (min-width: 321px) and (max-width:400px) {\n    header,footer {\n        font-size:17px\n    }\n}\n\n@media screen and (min-width: 400px) {\n    header,footer {\n        font-size:19px\n    }\n}\n```\n\næˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ç½‘æ˜“åœ¨æ–‡å­—å­—ä½“å¤§å°ä¸Šçš„åšæ³•ï¼Œåœ¨åª’ä½“æŸ¥è¯¢é˜¶æ®µï¼Œåˆ†ä¸ºä¸‰ä¸ªç­‰çº§åˆ†åˆ«æ˜¯ï¼š\n321pxä»¥ä¸‹\n321px - 400pxä¹‹é—´\n400pxä»¥ä¸Š\n\nå…·ä½“æ–‡å­—å¤§å°è¦å¤šå°‘ä¸ªåƒç´ è¿™ä¸ªä»¥è®¾è®¡å›¾ä¸ºå‡†ï¼Œä½†æ˜¯è¿™ä¸‰ä¸ªç­‰çº§ä¹‹é—´æ˜¯æœ‰è§„å¾‹çš„ï¼Œä»”ç»†è§‚å¯Ÿå‘ç°ï¼Œ321pxä»¥ä¸‹çš„å±å¹•å­—ä½“å¤§å°æ¯”321px - 400pxä¹‹é—´çš„å±å¹•å­—ä½“å¤§å°è¦å°ä¸€ä¸ªåƒç´ ï¼Œè€Œ321px - 400pxä¹‹é—´çš„å±å¹•å­—ä½“å¤§å°è¦æ¯”400ä»¥ä¸Šå±å¹•å­—ä½“å¤§å°è¦å°2ä¸ªåƒç´ ã€‚ä¾ç…§è¿™ä¸ªè§„å¾‹ï¼Œæˆ‘ä»¬æ ¹æ®è®¾è®¡å›¾æ‰€åœ¨çš„åƒç´ åŒºæ®µå…ˆå†™å¥½è¯¥åŒºæ®µçš„å­—ä½“å¤§å°ï¼Œç„¶ååˆ†åˆ«å†™å‡ºå¦å¤–ä¸¤ä¸ªåŒºæ®µçš„å­—ä½“å¤§å°åª’ä½“æŸ¥è¯¢ä»£ç å°±å¯ä»¥äº†ã€‚\n\nç»ˆäºç å®Œäº†è¿™ç¬¬äºŒç¯‡æ–‡ç« ï¼Œæ— åŠ›å†å¤šè¯´å…¶ä»–çš„è¯ï¼Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œæœ‰äº›ç»†èŠ‚åœ°æ–¹æ²¡æœ‰ç»†è¯´ï¼Œå¦å¤–ä½œè€…æ°´å¹³æœ‰é™ï¼Œå¸Œæœ›å¤§å®¶æŒ‡æ­£å…±åŒè¿›æ­¥ï¼Œè°¢è°¢ã€‚","source":"_posts/2015/10/19/ä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« -äºŒ.md","raw":"title: ä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« (äºŒ)\ndate: 2015-10-19 14:56:12\ncategories:\n- WebFrontEnd\ntags:\n- css\n- html\n- ç§»åŠ¨é¡µé¢\n---\n\n# ç§»åŠ¨ç«¯å¼€å‘çš„å¹²è´§ç¯‡ #\n\n> ä¹‹å‰å†™äº†ä¸€ç¯‡æ–‡ç« <a href=\"http://hcysun.me/2015/10/16/%E4%B8%80%E7%AF%87%E7%9C%9F%E6%AD%A3%E6%95%99%E4%BC%9A%E4%BD%A0%E5%BC%80%E5%8F%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%96%87%E7%AB%A0(%E4%B8%80)/\">ã€Šä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯ä¸€é¢çš„æ–‡ç« (ä¸€)ã€‹</a>ã€‚é‚£æ˜¯æœ¬ç¯‡æ–‡ç« çš„åŸºç¡€ï¼Œå¦‚æœæ²¡æœ‰é˜…è¯»è¿‡çš„åŒå­¦å¯ä»¥å»çœ‹çœ‹ï¼Œä»Šå¤©å°±ç»™å¤§å®¶å¸¦æ¥å¹²è´§ï¼ŒçœŸçœŸæ­£æ­£çš„è®²åˆ°å¦‚ä½•å¾ˆå¥½çš„å¼€å‘ä¸€ä¸ªç§»åŠ¨ç«¯çš„é¡µé¢\n\n![ç§»åŠ¨ç«¯](http://7xlolm.com1.z0.glb.clouddn.com/20150923mobile.jpg)\n\n<!-- more -->\n\nå¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼Œä»å“ªé‡Œå¼€å§‹å‘¢ï¼Ÿä»è®¾è®¡å›¾å¼€å§‹ï¼Œå³PSDç¨¿ä»¶ï¼š\nç§»åŠ¨ç«¯PSDç¨¿ä»¶çš„å°ºå¯¸è‚¯å®šè¾ƒä¹‹PCç«¯çš„PSDç¨¿ä»¶ä¸åŒï¼Œå…·ä½“ä½“ç°åœ¨è®¾è®¡å›¾çš„å°ºå¯¸ä¸Šï¼Œç°åœ¨ç§»åŠ¨ç«¯çš„è®¾è®¡å›¾å°ºå¯¸å¤§å¤šä»¥iPhone5å’ŒiPhone6çš„è®¾å¤‡åƒç´ å°ºå¯¸ä½œä¸ºä¾æ®ï¼Œæ¯”å¦‚æ‹¿åˆ°ä¸€å¼ PSDè®¾è®¡å›¾ï¼Œå®ƒçš„æ€»å®½åº¦ä¸º640px(iPhone5)æˆ–è€…750px(iPhone6)ã€‚æœ¬ä¾‹å°±æ‹¿iPhone6çš„è®¾è®¡å›¾å°ºå¯¸ä¸ºæ ‡å‡†è¿›è¡Œè®²è§£ï¼Œå…¶å®ƒè®¾è®¡å›¾å°ºå¯¸é“ç†æ˜¯ä¸€æ ·çš„ï¼Œè¿™å¹¶ä¸å½±å“æˆ‘ä»¬çš„å¼€å‘ã€‚\n\né¦–å…ˆæˆ‘ä»¬è¦æœ‰ä¸€å¼ è®¾è®¡å›¾æ‰è¡Œï¼Œçœ‹ä¸‹å›¾ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€å¼ è®¾è®¡å›¾ï¼Œå®ƒå¾ˆç®€å•ï¼Œåªæœ‰ä¸€ä¸ªçº¢è‰²çš„æ–¹å—ï¼š\n\n![psdç¨¿](http://7xlolm.com1.z0.glb.clouddn.com/20150923psd1.jpg)\n\næ‹¿åˆ°äº†è®¾è®¡å›¾ï¼Œäºæ˜¯ä½ å¼€å¼€å¿ƒå¿ƒçš„å¼€å§‹å†™ä»£ç äº†ï¼Œä½ æ‰“å¼€äº†ç¼–è¾‘å™¨ï¼Œå¹¶å†™ä¸‹äº†å¦‚ä¸‹HTMLä»£ç ï¼š\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no\" />\n</head>\n<body>\n\n\t<div class=\"box\"></div>\n\n</body>\n</html>\n```\n\nHTMLä»£ç å†™å¥½äº†ï¼Œä½ ç”¨äº†ä¸€ä¸ªå¸¦æœ‰boxç±»çš„divæ ‡ç­¾ä½œä¸ºpsç¨¿ä¸­çš„çº¢è‰²å—ï¼Œç»è¿‡å°ºå¯¸æµ‹é‡ï¼Œä½ ä¸ºä¸Šé¢ä»£ç æ·»åŠ äº†CSSæ ·å¼ï¼Œæœ€åä½ çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no\" />\n\t<style>\n\tbody{\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\t.box{\n\t\twidth: 200px;\n\t\theight: 200px;\n\t\tbackground: red;\n\t}\n\t</style>\n</head>\n<body>\n\n\t<div class=\"box\"></div>\n\n</body>\n</html>\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œä½ åªæ˜¯åœ¨åŸæ¥çš„åŸºç¡€ä¸Šå¢åŠ äº†CSSæ ·å¼ï¼Œé¦–å…ˆä½ æ¸…é™¤äº†bodyæ ‡ç­¾ä¸Šçš„é»˜è®¤æ ·å¼ï¼Œè¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œç„¶åä½ æ ¹æ®è®¾è®¡å›¾ä¸­æµ‹é‡çš„å°ºå¯¸æ¥ç»™boxç¼–å†™æ ·å¼ï¼Œå®½200px;é«˜200px;èƒŒæ™¯çº¢è‰²ã€‚çœ‹ä¸Šå»å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œäºæ˜¯ä½ å¼€å¼€å¿ƒå¿ƒçš„æ‰“å¼€æµè§ˆå™¨ï¼Œåˆ·æ–°é¡µé¢ï¼Œä½ çš„è„¸è‰²æ²‰äº†ä¸‹æ¥ï¼Œå› ä¸ºä½ çœ‹åˆ°äº†ä½ ä¸æƒ³çœ‹åˆ°çš„ç»“æœï¼Œå¦‚ä¸‹å›¾ï¼Œä¸Šå›¾ä¸ºè®¾è®¡ç¨¿çš„æ ·å¼ï¼Œä¸‹å›¾ä¸ºä½ ç¼–å†™çš„htmlæ–‡ä»¶çš„æ ·å¼ï¼š\n\n![psdåŸç¨¿](http://7xlolm.com1.z0.glb.clouddn.com/20150923psd2.jpg)\n\n![htmlé¡µé¢](http://7xlolm.com1.z0.glb.clouddn.com/20150923ht1.jpg)\n\né€šè¿‡å¯¹æ¯”psdåŸç¨¿å’Œæˆ‘ä»¬ç›®å‰æ‰€å†™çš„htmlé¡µé¢ï¼Œå¯ä»¥çœ‹å‡ºæˆ‘ä»¬htmlé¡µé¢çš„é—®é¢˜ï¼Œçº¢è‰²æ–¹å—ä¸æ•´ä¸ªé¡µé¢çš„æ¯”ä¾‹å’ŒpsdåŸç¨¿ä¸ä¸€æ ·å•Šï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬æ˜æ˜æ˜¯æŒ‰ç…§åŸç¨¿æµ‹é‡çš„å°ºå¯¸å†™å‡ºæ¥çš„ä»£ç å´å’ŒpsdåŸç¨¿æ˜¾ç¤ºçš„æ•ˆæœä¸ä¸€æ ·å‘¢ï¼Ÿåˆ«å¿˜äº†ï¼ŒpsdåŸç¨¿çš„å°ºå¯¸æ˜¯æŒ‰ç…§è®¾å¤‡åƒç´ è®¾è®¡çš„ï¼Œç”±äºæˆ‘ä»¬æ‰€ç”¨çš„è®¾è®¡ç¨¿æ˜¯åŸºäºiPhone6è®¾è®¡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾è®¡ç¨¿çš„å°ºå¯¸å°±æ˜¯iPhone6çš„è®¾å¤‡åƒç´ çš„å°ºå¯¸ï¼Œä¹Ÿå°±æ˜¯750pxï¼Œè€Œæˆ‘ä»¬CSSä¸­çš„æ ·å¼æ˜¯åŸºäºå¸ƒå±€è§†å£çš„å°ºå¯¸è®¡ç®—çš„ï¼Œç”±äºæˆ‘ä»¬htmlé¡µé¢ä¸­ç”±äºå†™å…¥äº†ä»¥ä¸‹metaæ ‡ç­¾ï¼š\n\n```\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no\" />\n```\n\nåœ¨ä¸Šä¸€ç¯‡æˆ‘ä»¬è®²è¿‡ï¼Œ* width=device-width * è¿™æ®µä»£ç æ˜¯è®©å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºç†æƒ³è§†å£ã€‚\næ ¹æ®å…¬å¼(ç¼©æ”¾æ¯”ä¾‹ä¸º1)ï¼š\n<b>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£åƒç´ ä¸ªæ•°ï¼ˆdevice-widthï¼‰</b>\nå› ä¸ºiPhone6çš„DPRï¼ˆè®¾å¤‡åƒç´ æ¯”ï¼‰ä¸º2ï¼Œè®¾å¤‡åƒç´ ä¸º750ï¼Œæ‰€ä»¥iPhone6çš„ç†æƒ³è§†å£å°ºå¯¸ä¸º375pxã€‚æ‰€ä»¥ä¸Šé¢ä»£ç æœ€ç»ˆå¯¼è‡´çš„æ˜¯ï¼šä½¿æˆ‘ä»¬å¸ƒå±€è§†å£çš„å®½åº¦å˜æˆäº†375pxã€‚è€Œæˆ‘ä»¬CSSä¸­ç¼–å†™çš„æ ·å¼å°ºå¯¸åˆæ˜¯åŸºäºå¸ƒå±€è§†å£è®¡ç®—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—åˆ°çš„é¡µé¢çœ‹ä¸Šå»æ¯”ä¾‹ä¸å¯¹ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![å¸ƒå±€è§†å£å®½åº¦å’Œå…ƒç´ å®½åº¦](http://7xlolm.com1.z0.glb.clouddn.com/20150923ht2.jpg)\n![psdè®¾è®¡ç¨¿å®½åº¦å’Œå…ƒç´ å®½åº¦](http://7xlolm.com1.z0.glb.clouddn.com/20150923psd3.jpg)\n\nå¦‚ä¸Šé¢ä¸¤å¹…å›¾ç‰‡ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œpsdç¨¿çš„æ€»å®½æ˜¯750pxï¼Œå…ƒç´ å®½200pxï¼Œè€Œæˆ‘ä»¬çœŸæ­£åšé¡µé¢çš„æ—¶å€™ï¼Œå¸ƒå±€è§†å£çš„å®½åº¦æ˜¯375pxï¼Œæ­£å¥½æ˜¯è®¾è®¡ç¨¿çš„ä¸€åŠã€‚æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨è®¾è®¡ç¨¿ä¸Šé¢æµ‹é‡æ‰€å¾—çš„åƒç´ å°ºå¯¸ï¼Œæ ¹æ®æ¯”ä¾‹ï¼Œæˆ‘ä»¬åº”è¯¥å°†æµ‹é‡æ‰€å¾—çš„å°ºå¯¸é™¤ä»¥2ï¼Œæ‰æ˜¯æˆ‘ä»¬CSSä¸­å¸ƒå±€æ‰€ç”¨çš„å°ºå¯¸ï¼Œæ®æ­¤ï¼Œæˆ‘ä»¬å°†200pxé™¤ä»¥2å¾—åˆ°100pxï¼Œäºæ˜¯æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œå°†çº¢è‰²æ–¹å—çš„å®½é«˜éƒ½è®¾ä¸º100pxï¼Œåˆ·æ–°é¡µé¢ï¼Œçœ‹çœ‹æ¯”ä¾‹æ˜¯ä¸æ˜¯å’Œè®¾è®¡å›¾ä¸€æ ·äº†ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå¦‚ä¸‹å›¾ä¸ºä¿®æ”¹åçš„htmlé¡µé¢ï¼š\n\n![ä¿®æ”¹åçš„htmlé¡µé¢](http://7xlolm.com1.z0.glb.clouddn.com/20150923ht3.jpg)\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†æ­£ç¡®çš„æ•°æ®ï¼Œå¹¶ä¸”æ­£ç¡®çš„å†™å‡ºäº†é¡µé¢ï¼Œä½ å¾ˆé«˜å…´ï¼Œå¯æ˜¯é—®é¢˜æ¥äº†ï¼Œå¦‚æœä½ åœ¨åšé¡µé¢çš„æ—¶å€™ï¼Œæµ‹é‡äº†ä¸€ä¸ªå…ƒç´ çš„å®½åº¦ï¼Œå®½åº¦æ˜¯ä¸€ä¸ªå¥‡æ•°ï¼Œæ¯”å¦‚111åƒç´ ï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¹‹å‰çš„åšæ³•æ˜¯ï¼Œå°†æµ‹é‡åˆ°çš„æ•°æ®é™¤ä»¥2ï¼Œå¾—åˆ°æˆ‘ä»¬çœŸæ­£ä½¿ç”¨çš„æ•°æ®ï¼Œæ‰€ä»¥111é™¤ä»¥2ç­‰äº55.5pxï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œè®¡ç®—æœº(æ‰‹æœº)æ²¡åŠæ³•æ˜¾ç¤ºä¸åˆ°ä¸€ä¸ªåƒç´ çš„åƒç´ å€¼ï¼Œè®¡ç®—æœº(æ‰‹æœº)ä¼šè‡ªåŠ¨å°†å…¶è¡¥å…¨ä¸ºä¸€ä¸ªåƒç´ è¿›è¡Œæ˜¾ç¤ºï¼Œæ‰€ä»¥æœ€ç»ˆä¼šå°†å…ƒç´ æ˜¾ç¤ºä¸º56åƒç´ ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚\nå¦å¤–ï¼Œæˆ‘ä»¬çš„è®¾è®¡ç¨¿æ˜¯åŸºäºiphone6è®¾è®¡çš„ï¼Œæˆ‘ä»¬è°ƒè¯•é¡µé¢ä¹Ÿæ˜¯åœ¨iphone6ä¸‹è°ƒè¯•çš„ã€‚åˆå› ä¸ºiphone6çš„è®¾å¤‡åƒç´ æ¯”è¯•2ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰èƒ½ç”±è®¾è®¡ç¨¿æµ‹é‡çš„æ•°æ®é™¤ä»¥2åç›´æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨iphone6ä¸‹æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä½ è¦çŸ¥é“ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰æ‰‹æœºçš„è®¾å¤‡åƒç´ æ¯”éƒ½æ˜¯2ï¼Œæœ‰çš„æ‰‹æœºçš„è®¾å¤‡åƒç´ æ¯”è¯•2.5æˆ–è€…3ã€‚å¹¶ä¸”ä¸åŒè®¾å¤‡çš„è®¾å¤‡åƒç´ åˆä¸åŒï¼Œè¿™æ ·å°±å¯¼è‡´ç†æƒ³è§†å£çš„å°ºå¯¸ä¸åŒï¼Œä»è€Œå¯¼è‡´å¸ƒå±€è§†å£çš„å°ºå¯¸ä¸åŒï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥æ ¹æ®iphone6çš„è®¾è®¡ç¨¿å°ºå¯¸é™¤ä»¥2å¾—åˆ°çš„å°ºå¯¸ç”¨æ¥ç¼–å†™CSSæ˜¯ä¸èƒ½åœ¨æ‰€æœ‰è®¾å¤‡ä¸‹å®Œå¥½æ˜¾ç¤ºçš„ã€‚\n\næ‰€ä»¥ï¼Œæˆ‘ä»¬è¦æ¢ä¸€ä¸ªæ–¹æ³•ã€‚\näºæ˜¯æˆ‘ä»¬æƒ³åˆ°ï¼šå¦‚æœæˆ‘ä»¬èƒ½å°†å¸ƒå±€è§†å£çš„å°ºå¯¸è®¾ç½®ä¸ºå’Œè®¾å¤‡åƒç´ å°ºå¯¸ç›¸ç­‰çš„è¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¿è¯äº†è®¾è®¡å›¾ä¸é¡µé¢çš„1:1å…³ç³»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨psdä¸­æµ‹é‡çš„å°ºå¯¸äº†ï¼Œç„¶ååœ¨å…¶ä»–å°ºå¯¸çš„æ‰‹æœºä¸­ï¼Œæˆ‘ä»¬è¿›è¡Œç­‰æ¯”ç¼©æ”¾å°±okäº†ã€‚é‚£ä¹ˆå¦‚ä½•æ‰èƒ½è®©å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºè®¾å¤‡åƒç´ å°ºå¯¸å‘¢ï¼Ÿ\n\næˆ‘ä»¬æ³¨æ„åˆ°metaæ ‡ç­¾ä¸­çš„ width=device-width è¿™æ®µä»£ç ï¼Œé¦–å…ˆä½ è¦æ˜ç™½è¿™å¥è¯çš„æ„æ€ï¼Œå‰é¢è®²è¿‡ï¼Œè¿™å¥è¯æœ€ç»ˆå¯¼è‡´çš„ç»“æœæ˜¯ï¼šè®©å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºç†æƒ³è§†å£çš„å°ºå¯¸ã€‚è¨€å¤–ä¹‹æ„å°±æ˜¯,åœ¨ä»£ç  width=device-width ä¸­ï¼š\n\nwidthï¼šæ˜¯å¸ƒå±€è§†å£çš„width\ndevice-widthï¼šæ˜¯ç†æƒ³è§†å£çš„å®½åº¦\n\næ ¹æ®å…¬å¼(ç¼©æ”¾æ¯”ä¾‹ä¸º1)ï¼š\n\n<b>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£åƒç´ ä¸ªæ•°ï¼ˆdevice-widthï¼‰</b>\n\nä»¥iphone6ä¸ºä¾‹ï¼š\nè®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ï¼š2\nè®¾å¤‡åƒç´ ä¸ªæ•°ï¼š750\næ‰€ä»¥åœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1çš„æƒ…å†µä¸‹ï¼Œiphone6ç†æƒ³è§†å£çš„åƒç´ ä¸ªæ•°ä¸º 750 / 2 = 375ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºiphone6æ¥è®² device-widthçš„å€¼ä¸º375\n\næ‰€ä»¥æˆ‘ä»¬é€šè¿‡width=device-widthè¿™å¥è¯ï¼Œé—´æ¥çš„å°†å¸ƒå±€è§†å£çš„å°ºå¯¸è®¾ä¸ºäº†375ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬èƒ½æ”¹å˜ç†æƒ³è§†å£çš„å°ºå¯¸ï¼Œä¹Ÿå°±æ”¹å˜äº†å¸ƒå±€é€‚å£çš„å°ºå¯¸ï¼Œå¦‚ä½•æ”¹å˜ç†æƒ³è§†å£çš„å°ºå¯¸å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°ç¼©æ”¾äº†ï¼Œä¸Šä¸€ç¯‡æˆ‘ä»¬è®²åˆ°è¿‡ç¼©æ”¾ï¼Œç¼©æ”¾æ˜¯ç¼©å°æˆ–æ”¾å¤§CSSåƒç´ çš„è¿‡ç¨‹ï¼Œä»¥iphone6ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬ç¼©æ”¾æ¯”ä¾‹ä¸º1:1çš„æ—¶å€™ï¼Œç”±äºiphone6çš„è®¾å¤‡åƒç´ æ¯”ä¸º2ï¼Œæ‰€ä»¥iphone6çš„è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»çœ‹èµ·æ¥å°±åƒä¸‹å›¾è¿™æ ·ï¼š\n\n![iphone6ä¸‹ç¼©æ”¾æ¯”ä¾‹ä¸º1æ—¶ï¼Œè®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/2015092319a.jpg)\n\nä¸€ä¸ªCSSåƒç´ å®½åº¦ç­‰äºä¸¤ä¸ªè®¾å¤‡åƒç´ å®½åº¦ï¼Œæ‰€ä»¥750pxçš„è®¾å¤‡å®½åº¦çš„å¸ƒå±€è§†å£ä¸º357CSSåƒç´ ã€‚è¿™æ˜¯åœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1çš„æƒ…å†µä¸‹ï¼Œæ—¢ç„¶ç¼©æ”¾å¯ä»¥æ”¾å¤§æˆ–ç¼©å°CSSåƒç´ ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬å°†CSSåƒç´ çš„å®½åº¦ç¼©æ”¾è‡³ä¸è®¾å¤‡åƒç´ å®½åº¦ç›¸ç­‰äº†ï¼Œé‚£ä¹ˆ750ä¸ªè®¾å¤‡åƒç´ ä¹Ÿå°±èƒ½æ˜¾ç¤º750ä¸ªCSSåƒç´ ï¼Œç¼©æ”¾åçš„è®¾å¤‡åƒç´ ä¸CSSåƒç´ çœ‹èµ·æ¥åº”è¯¥åƒä¸‹å›¾è¿™æ ·ï¼š\n\n![iphone6ç¼©å°0.5å€åï¼Œè®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/20150923px1.jpg)\n\nä½†æ˜¯ï¼Œæˆ‘ä»¬çš„ç¼©æ”¾å€æ•°æ˜¯å¤šå°‘å‘¢ï¼Ÿåœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1çš„æ—¶å€™ï¼Œä¸€ä¸ªCSSåƒç´ çš„å®½åº¦ = ä¸¤ä¸ªè®¾å¤‡åƒç´ çš„å®½åº¦ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®© ä¸€ä¸ªCSSåƒç´ çš„å®½åº¦ = ä¸€ä¸ªè®¾å¤‡åƒç´ çš„å®½åº¦ï¼Œæˆ‘ä»¬å°±è¦å°†CSSåƒç´ ç¼©å°ä¸ºåŸæ¥çš„0.5å€ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬ç¼©å°çš„å€æ•° = è®¾å¤‡åƒç´ æ¯”çš„å€’æ•°ã€‚\näºæ˜¯ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„HTMLä»£ç (ä¿®æ”¹äº†metaæ ‡ç­¾)ï¼š\n\n```\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"width=device-width,initial-scale=0.5,maximum-scale=0.5,user-scalable=no\" />\n\t<style>\n\tbody{\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\t.box{\n\t\twidth: 200px;\n\t\theight: 200px;\n\t\tbackground: red;\n\t}\n\t</style>\n</head>\n<body>\n\n\t<div class=\"box\"></div>\n\n</body>\n</html>\n```\n\næ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬ç»™çº¢è‰²æ–¹å—ä½¿ç”¨çš„CSSå°ºå¯¸ç›´æ¥ä½¿ç”¨çš„æ˜¯psdç¨¿ä¸­æµ‹é‡çš„å°ºå¯¸ï¼Œæˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼Œæ€ä¹ˆæ ·ï¼Ÿæ»¡æ„å§ï¼š\n\n![ä¿®æ”¹åçš„æ–°é¡µé¢æ­£ç¡®è¾“å‡º](http://7xlolm.com1.z0.glb.clouddn.com/2015092316b.jpg)\n\nä½†æ˜¯æˆ‘ä»¬è¿™æ˜¯æœ‰ä¸ªå‰æçš„ï¼Œé‚£å°±æ˜¯ç¼©æ”¾0.5å€åªé€‚ç”¨äºè®¾å¤‡åƒç´ æ¯”ä¸º2çš„è®¾å¤‡ï¼ˆå› ä¸ºç¼©æ”¾å€¼ = 1 / è®¾å¤‡åƒç´ æ¯”ï¼‰ã€‚æ‰€ä»¥ï¼Œä¸ºäº†é€‚åº”æ‰€æœ‰çš„è®¾å¤‡ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨javascriptä»£ç åŠ¨æ€ç”Ÿæˆmetaæ ‡ç­¾ï¼š\n\n```\nvar scale = 1 / window.devicePixelRatio;\ndocument.querySelector('meta[name=\"viewport\"]').setAttribute('content','width=device-width,initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n```\n\nå…¶ä¸­ <b>window.devicePixelRatio</b> çš„å€¼ä¸ºè®¾å¤‡åƒç´ æ¯”ã€‚\näºæ˜¯æˆ‘ä»¬çš„ä»£ç å˜æˆäº†è¿™æ ·ï¼š\n\n```\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"\" />\n\t<style>\n\tbody{\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\t.box{\n\t\twidth: 200px;\n\t\theight: 200px;\n\t\tbackground: red;\n\t}\n\t</style>\n</head>\n<body>\n\n\t<div class=\"box\"></div>\n\n\t<script>\n\tvar scale = 1 / window.devicePixelRatio;\n\tdocument.querySelector('meta[name=\"viewport\"]').setAttribute('content','width=device-width,initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n\t</script>\n</body>\n</html>\n```\n\nä¸Šé¢çš„ä»£ç æœ€ç»ˆèƒ½ä¿è¯ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æ— è®ºä»»ä½•è®¾å¤‡ï¼Œå¸ƒå±€è§†å£çš„å®½åº¦æ€»æ˜¯ç­‰äºè®¾å¤‡åƒç´ ã€‚\nè¿™æ ·ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡å›¾ä¸­æµ‹é‡ä¸º200pxçš„å®½åº¦å°±èƒ½ç›´æ¥ç”¨åœ¨CSSä¸­äº†ï¼Œå¹¶ä¸”åœ¨iphone6ä¸­æ˜¾ç¤ºå®Œå¥½ï¼Œå¯æ˜¯åˆ«å¿˜äº†ï¼Œæˆ‘ä»¬çš„è®¾è®¡å›¾å°±æ˜¯æ ¹æ®iphone6è®¾è®¡çš„ï¼Œå¦‚æœæ¢åšå…¶ä»–è®¾å¤‡ï¼Œè¿˜èƒ½æ˜¾ç¤ºå®Œå¥½ä¹ˆï¼Ÿæˆ‘ä»¬ä¸å¦¨è¯•ä¸€ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼Œæ˜¯ä¸Šé¢ä»£ç åœ¨iphone5å’Œiphone6ä¸‹çš„å¯¹æ¯”ï¼š\n\n![iphone5ä¸­çš„æ•ˆæœ](http://7xlolm.com1.z0.glb.clouddn.com/20150923p5.jpg)\n\n![iphone6ä¸­çš„æ•ˆæœ](http://7xlolm.com1.z0.glb.clouddn.com/20150923p6.jpg)\n\næˆ‘ä»¬å‘ç°ï¼Œæ— è®ºæ˜¯äº”è¿˜æ˜¯6ï¼Œå³ä½¿è®¾å¤‡åƒç´ å˜äº†ï¼Œå³å±å¹•å®½åº¦å˜äº†ï¼Œå¯æ˜¯çº¢è‰²æ–¹å—çš„å®½åº¦å¹¶æ²¡æœ‰å˜ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„ç°è±¡ï¼Œå› ä¸ºè¿™æ ·é¡µé¢çš„å…ƒç´ å°±ä¸æˆæ¯”ä¾‹äº†ï¼Œä¼šå½±å“åˆ°å¸ƒå±€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•è®©æˆ‘ä»¬é¡µé¢çš„å…ƒç´ è·Ÿç€è®¾å¤‡å˜åŒ–è€Œç­‰æ¯”ç¼©æ”¾ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦è§£å†³çš„ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°remçš„çŸ¥è¯†ç‚¹äº†ã€‚\n\n## rem ##\n\nä»€ä¹ˆæ˜¯remï¼Ÿ\nremæ˜¯ç›¸å¯¹å°ºå¯¸å•ä½ï¼Œç›¸å¯¹äºhtmlæ ‡ç­¾å­—ä½“å¤§å°çš„å•ä½ï¼Œä¸¾ä¸ªä¾‹å­ï¼š\nå¦‚æœhtmlçš„font-size = 18px;\né‚£ä¹ˆ1rem = 18pxï¼Œéœ€è¦è®°ä½çš„æ˜¯ï¼Œremæ˜¯åŸºäºhtmlæ ‡ç­¾çš„å­—ä½“å¤§å°çš„ã€‚\n\nç›¸ä¿¡ä½ å·²ç»æ˜ç™½äº†ï¼Œå¯¹æ²¡é”™ï¼Œæˆ‘ä»¬è¦æŠŠä¹‹å‰ç”¨pxåšå…ƒç´ å°ºå¯¸çš„å•ä½æ¢æˆremï¼Œæ‰€ä»¥ï¼Œç°åœ¨çš„é—®é¢˜å°±æ˜¯å¦‚æœè½¬æ¢ï¼Œå› ä¸ºremæ˜¯æ ¹æ®htmlæ ‡ç­¾çš„font-sizeå€¼ç¡®å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦ç¡®å®šhtmlæ ‡ç­¾çš„font-sizeå€¼å°±è¡Œäº†ï¼Œæˆ‘ä»¬é¦–å…ˆè‡ªå·±å®šä¸€ä¸ªæ ‡å‡†ï¼Œå°±æ˜¯è®©font-sizeçš„å€¼ç­‰äºè®¾å¤‡åƒç´ çš„ååˆ†ä¹‹ä¸€ï¼Œå³ï¼š\n\n```\ndocument.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + 'px';\n```\n\nä»¥iphone6ä¸ºä¾‹ï¼Œhtmlæ ‡ç­¾çš„font-sizeçš„å€¼å°±ç­‰äº 750 / 10 = 75px äº†ï¼Œè¿™æ · 1rem = 75pxï¼Œæ‰€ä»¥çº¢è‰²æ–¹å—200pxæ¢ç®—ä¸ºremå•ä½å°±æ˜¯ 200 / 75 = 2.6666667remã€‚\né‚£ä¹ˆåœ¨iphone5ä¸­å‘¢ï¼Ÿå› ä¸ºiphone5çš„è®¾å¤‡åƒç´ ä¸º640ï¼Œæ‰€ä»¥iphoneçš„htmlæ ‡ç­¾çš„font-sizeçš„å€¼ä¸º 640 / 10 = 64pxï¼Œæ‰€ä»¥ 1rem = 64pxï¼Œæ‰€ä»¥åœ¨iphone6ä¸­æ˜¾ç¤ºä¸º200pxçš„å…ƒç´ åœ¨iphone5ä¸­ä¼šæ˜¾ç¤ºä¸º 2.6666667 * 64 åƒç´ ï¼Œè¿™æ ·ï¼Œåœ¨ä¸åŒè®¾å¤‡ä¸­å°±å®ç°äº†è®©å…ƒç´ ç­‰æ¯”ç¼©æ”¾ä»è€Œä¸å½±å“å¸ƒå±€ã€‚è€Œä¸Šé¢çš„æ–¹æ³•ä¹Ÿæ˜¯æ‰‹æœºæ·˜å®æ‰€ç”¨çš„æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œç°åœ¨ä½ åªéœ€è¦å°†ä½ æµ‹é‡çš„å°ºå¯¸æ•°æ®é™¤ä»¥75å°±è½¬æ¢æˆäº†remå•ä½ï¼Œå¦‚æœæ˜¯iPhone5å°±è¦é™¤ä»¥64ï¼Œå³é™¤ä»¥ä½ åŠ¨æ€è®¾ç½®çš„font-sizeçš„å€¼ã€‚\n\nå¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåšé¡µé¢çš„æ—¶å€™æ–‡å­—å­—ä½“å¤§å°ä¸è¦ç”¨remæ¢ç®—ï¼Œè¿˜æ˜¯ä½¿ç”¨pxåšå•ä½ã€‚åé¢ä¼šè®²åˆ°ã€‚\n\nè®©æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬ç°åœ¨äº†è§£çš„æ–¹æ³•ï¼š\n\n1ã€å°†å¸ƒå±€è§†å£å¤§å°è®¾ä¸ºè®¾å¤‡åƒç´ å°ºå¯¸ï¼š\n\n```\nvar scale = 1 / window.devicePixelRatio;\ndocument.querySelector('meta[name=\"viewport\"]').setAttribute('content','width=device-width,initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n```\n\n2ã€åŠ¨æ€è®¾ç½®htmlå­—ä½“å¤§å°ï¼š\n\n```\ndocument.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + 'px';\n```\n\n3ã€å°†è®¾è®¡å›¾ä¸­çš„å°ºå¯¸æ¢ç®—æˆrem\n\nå…ƒç´ çš„remå°ºå¯¸ = å…ƒç´ çš„psdç¨¿æµ‹é‡çš„åƒç´ å°ºå¯¸ / åŠ¨æ€è®¾ç½®çš„htmlæ ‡ç­¾çš„font-sizeå€¼\n\nè¯´äº†ä¸€å¤§å †ï¼Œå…¶å®æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„htmlè«æ¿å°±å¯ä»¥å†™é¡µé¢äº†ï¼Œå”¯ä¸€éœ€è¦ä½ åšçš„å°±æ˜¯è®¡ç®—å…ƒç´ çš„remå°ºå¯¸ï¼Œæ‰€ä»¥å³ä½¿ä½ æ²¡çœ‹æ‡‚ä¸Šé¢çš„è®²è¿°ä¹Ÿä¸é‡è¦ï¼Œä½ åªè¦å°†è«æ¿æ‹¿è¿‡å»ç”¨å°±å¥½äº†ï¼š\n\n```\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"\" />\n</head>\n<body>\n\n\t\n\n\t<script>\n\tvar scale = 1 / window.devicePixelRatio;\n\tdocument.querySelector('meta[name=\"viewport\"]').setAttribute('content','width=device-width,initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n\n\tdocument.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + 'px';\n\t</script>\n</body>\n</html>\n```\n\nç°åœ¨æˆ‘ä»¬ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ä¿®æ”¹æˆ‘ä»¬çš„ä»£ç å¦‚ä¸‹ï¼š\n\n```\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"\" />\n\t<style>\n\tbody{\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\t.box{\n\t\twidth: 2.66666667rem;\n\t\theight: 2.66666667rem;\n\t\tbackground: red;\n\t}\n\t</style>\n</head>\n<body>\n\n\t<div class=\"box\"></div>\n\n\t<script>\n\tvar scale = 1 / window.devicePixelRatio;\n\tdocument.querySelector('meta[name=\"viewport\"]').setAttribute('content','width=device-width,initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n\n\tdocument.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + 'px';\n\t</script>\n</body>\n</html>\n```\n\næ‰“å¼€æµè§ˆå™¨ï¼Œåˆ†åˆ«åœ¨iPhone6å’ŒiPhone5ä¸‹æŸ¥çœ‹é¡µé¢ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œç°åœ¨çš„å…ƒç´ å¯ä»¥æ ¹æ®æ‰‹æœºçš„å°ºå¯¸ä¸åŒè€Œç­‰æ¯”ç¼©æ”¾äº†ã€‚\n\nä¸Šé¢çš„æ–¹æ³•æ˜¯æ‰‹æœºæ·˜å®çš„æ–¹æ³•ï¼Œæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯è½¬åŒ–remå•ä½çš„æ—¶å€™ï¼Œéœ€è¦é™¤ä»¥font-sizeçš„å€¼ï¼Œæ·˜å®ç”¨çš„æ˜¯iPhone6çš„è®¾è®¡å›¾ï¼Œæ‰€ä»¥æ·˜å®è½¬æ¢å°ºå¯¸çš„æ—¶å€™è¦é™¤ä»¥75ï¼Œè¿™ä¸ªå€¼å¯ä¸å¥½ç®—ï¼Œæ‰€ä»¥è¿˜è¦å€Ÿç”¨è®¡ç®—å™¨æ¥å®Œæˆï¼Œå½±å“å¼€å‘æ•ˆç‡ï¼Œå¦å¤–ï¼Œåœ¨è½¬è¿˜remå•ä½æ—¶é‡åˆ°é™¤ä¸å°½çš„æ•°æ—¶æˆ‘ä»¬ä¼šé‡‡ç”¨å¾ˆé•¿çš„è¿‘ä¼¼å€¼æ¯”å¦‚ä¸Šé¢çš„2.6666667remï¼Œè¿™æ ·å¯èƒ½ä¼šä½¿é¡µé¢å…ƒç´ çš„å°ºå¯¸æœ‰åå·®ã€‚\n\né™¤äº†ä¸Šé¢çš„æ–¹æ³•æ¯”è¾ƒé€šç”¨ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬æ¥é‡æ–°æ€è€ƒä¸€ä¸‹ï¼š\n\nä¸Šé¢åšé¡µé¢çš„æ€è·¯æ˜¯ï¼šæ‹¿åˆ°è®¾è®¡å›¾ï¼Œæ¯”å¦‚iPhone6çš„è®¾è®¡å›¾ï¼Œæˆ‘ä»¬å°±å°†æµè§ˆå™¨è®¾ç½®åˆ°iPhone6è®¾å¤‡è°ƒè¯•ï¼Œç„¶åä½¿ç”¨jsåŠ¨æ€ä¿®æ”¹metaæ ‡ç­¾ï¼Œä½¿å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºè®¾è®¡å›¾å°ºå¯¸ï¼Œä¹Ÿå°±æ˜¯è®¾å¤‡åƒç´ å°ºå¯¸ï¼Œç„¶åä½¿ç”¨remæ›¿ä»£pxåšå°ºå¯¸ä»£ä¸ºï¼Œä½¿å¾—é¡µé¢åœ¨ä¸åŒè®¾å¤‡ä¸­ç­‰æ¯”ç¼©æ”¾ã€‚\n\nç°åœ¨å‡å¦‚æˆ‘ä»¬ä¸å»ä¿®æ”¹metaæ ‡ç­¾ï¼Œæ­£å¸¸ä½¿ç”¨ç¼©æ”¾ä¸º1:1çš„metaæ ‡ç­¾ï¼Œå³ä½¿ç”¨å¦‚ä¸‹metaæ ‡ç­¾ï¼š\n\n```\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no\" />\n```\n\nè¿˜ä»¥iPhone6ä¸ºä¾‹ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç¼©æ”¾ä¸º1:1çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®å…¬å¼ï¼š\n\n<b>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£åƒç´ ä¸ªæ•°ï¼ˆdevice-widthï¼‰</b>\n\næˆ‘ä»¬çŸ¥é“ï¼š\nè®¾å¤‡åƒç´  = è®¾è®¡å›¾å°ºå¯¸ = 750px\nå¸ƒå±€è§†å£ = 375px\n\nå‡è®¾æˆ‘ä»¬ä»¥iPhone6è®¾è®¡å›¾å°ºå¯¸ä¸ºæ ‡å‡†ï¼Œåœ¨è®¾è®¡å›¾çš„å°ºå¯¸ä¸‹è®¾ç½®ä¸€ä¸ªfont-sizeå€¼ä¸º100pxã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼š750pxå®½çš„é¡µé¢ï¼Œæˆ‘ä»¬è®¾ç½®100pxçš„font-sizeå€¼ï¼Œé‚£ä¹ˆé¡µé¢çš„å®½åº¦æ¢ç®—ä¸ºremå°±ç­‰äº 750 / 100 = 7.5remã€‚\n\næˆ‘ä»¬å°±ä»¥é¡µé¢æ€»å®½ä¸º7.5remä¸ºæ ‡å‡†ï¼Œé‚£ä¹ˆåœ¨å¸ƒå±€è§†å£ä¸­ï¼Œä¹Ÿå°±æ˜¯é¡µé¢æ€»å®½ä¸º375pxä¸‹ï¼Œfont-sizeå€¼åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿå¾ˆç®€å•ï¼š\n\nfont-size = 375 / 7.5 = 50px\n\né‚£ä¹ˆåœ¨iPhone5ä¸‹å‘¢ï¼Ÿå› ä¸ºiPhone5çš„å¸ƒå±€è§†å£å®½ä¸º320pxï¼Œæ‰€ä»¥å¦‚æœé¡µé¢æ€»å®½ä»¥7.5ä¸ºæ ‡å‡†ï¼Œé‚£ä¹ˆiPhone5ä¸‹æˆ‘ä»¬è®¾ç½®çš„font-sizeå€¼åº”è¯¥æ˜¯ï¼š\n\nfont-size = 320 / 7.5 =42.666666667px\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡åœ¨ä»€ä¹ˆè®¾å¤‡ä¸‹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æŠŠé¡µé¢çš„æ€»å®½åº¦è®¾ä¸ºä¸€ä¸ªä»¥remä¸ºå•ä½çš„å®šå€¼ï¼Œæ¯”å¦‚æœ¬ä¾‹å°±æ˜¯7.5remï¼Œåªä¸è¿‡ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å¸ƒå±€è§†å£çš„å°ºå¯¸åŠ¨æ€è®¾ç½®font-sizeçš„å€¼ï¼š\n\n```\ndocument.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px';\n```\n\nè¿™æ ·ï¼Œæ— è®ºåœ¨ä»€ä¹ˆè®¾å¤‡ä¸‹ï¼Œæˆ‘ä»¬é¡µé¢çš„æ€»å®½åº¦éƒ½æ˜¯7.5remï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥åœ¨è®¾è®¡å›¾ä¸Šæµ‹é‡pxå•ä½çš„å°ºå¯¸ï¼Œç„¶åé™¤ä»¥100è½¬æ¢æˆremå•ä½åç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚ï¼Œåœ¨iPhone6è®¾è®¡å›¾ä¸­æµ‹é‡ä¸€ä¸ªå…ƒç´ çš„å°ºå¯¸ä¸º200pxï¼Œé‚£ä¹ˆè½¬æ¢æˆremå•ä½å°±æ˜¯ 200 / 100 = 2remï¼Œå› ä¸ºåœ¨ä¸åŒè®¾å¤‡ä¸‹æˆ‘ä»¬åŠ¨æ€è®¾ç½®äº†htmlæ ‡ç­¾çš„font-sizeå€¼ï¼Œæ‰€ä»¥ä¸åŒè®¾å¤‡ä¸‹ç›¸åŒçš„remå€¼å¯¹åº”çš„åƒç´ å€¼æ˜¯ä¸åŒçš„ï¼Œè¿™æ ·å°±å®ç°äº†åœ¨ä¸åŒè®¾å¤‡ä¸‹ç­‰æ¯”ç¼©æ”¾ã€‚æˆ‘ä»¬ä¿®æ”¹htmlä»£ç å¦‚ä¸‹ï¼š\n\n```\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no\" />\n\t<style>\n\tbody{\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\t.box{\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tbackground: red;\n\t}\n\t</style>\n</head>\n<body>\n\n\t<div class=\"box\"></div>\n\n\t<script>\n\tdocument.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px';\n\t</script>\n</body>\n</html>\n```\n\nåˆ·æ–°é¡µé¢ï¼Œåˆ†åˆ«åœ¨iPhone6å’ŒiPhone5ä¸‹è°ƒè¯•æŸ¥çœ‹ç»“æœï¼Œä¼šå‘ç°å¦‚ä¸‹å›¾ï¼Œä½¿æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œç­‰æ¯”ç¼©æ”¾ï¼Œokï¼Œå®é™…ä¸Šè¿™ç§åšæ³•ä¹Ÿæ˜¯ç½‘æ˜“çš„åšæ³•ï¼š\n\n![iPhone6ä¸‹æ˜¾ç¤ºæ•ˆæœ](http://7xlolm.com1.z0.glb.clouddn.com/2015092320a.jpg)\n\n![iPhone5ä¸‹æ˜¾ç¤ºæ•ˆæœ](http://7xlolm.com1.z0.glb.clouddn.com/2015092320b.jpg)\n\nä¸‹é¢ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ç¬¬äºŒç§åšæ³•ï¼š\n\n1ã€æ‹¿åˆ°è®¾è®¡å›¾ï¼Œè®¡ç®—å‡ºé¡µé¢çš„æ€»å®½ï¼Œä¸ºäº†å¥½è®¡ç®—ï¼Œå–100pxçš„font-sizeï¼Œå¦‚æœè®¾è®¡å›¾æ˜¯iPhone6çš„é‚£ä¹ˆè®¡ç®—å‡ºçš„å°±æ˜¯7.5remï¼Œå¦‚æœé¡µé¢æ˜¯iPhone5çš„é‚£ä¹ˆè®¡ç®—å‡ºçš„ç»“æœå°±æ˜¯6.4remã€‚\n2ã€åŠ¨æ€è®¾ç½®htmlæ ‡ç­¾çš„font-sizeå€¼ï¼š\n  ```\n  document.documentElement.style.fontSize = document.documentElement.clientWidth / ä»¥remä¸ºå•ä½çš„é¡µé¢æ€»å®½ + 'px';\n  ```\n  å¦‚iPhone6çš„è®¾è®¡å›¾å°±æ˜¯ï¼š\n  ```\n  document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px';\n  ```\n  iPhone5çš„è®¾è®¡å›¾å°±æ˜¯ï¼š\n  ```\n  document.documentElement.style.fontSize = document.documentElement.clientWidth / 6.4 + 'px';\n  ```\n3ã€åšé¡µé¢æ˜¯æµ‹é‡è®¾è®¡å›¾çš„pxå°ºå¯¸é™¤ä»¥100å¾—åˆ°remå°ºå¯¸ã€‚\n4ã€å’Œæ·˜å®çš„åšæ³•ä¸€æ ·ï¼Œæ–‡å­—å­—ä½“å¤§å°ä¸è¦ä½¿ç”¨remæ¢ç®—ã€‚\n\nä¸‹é¢æ˜¯è¿™ç§åšæ³•çš„htmlè«æ¿ï¼š\n\n```\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n\t<meta name=\"viewport\" content=\"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no\" />\n</head>\n<body>\n\n\t\n\n\t<script>\n\tdocument.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px';\n\t</script>\n</body>\n</html>\n```\n\nç”±äºè¿™ç§åšæ³•åœ¨å¼€å‘ä¸­æ¢ç®—remå•ä½çš„æ—¶å€™åªéœ€è¦å°†æµ‹é‡çš„å°ºå¯¸é™¤ä»¥100å³å¯ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨è®¡ç®—å™¨æˆ‘ä»¬å°±å¯ä»¥å¾ˆå¿«çš„å®Œæˆè®¡ç®—è½¬æ¢ï¼Œæ‰€ä»¥è¿™ä¹Ÿä¼šæå‡å¼€å‘æ•ˆç‡ï¼Œæœ¬äººä¹Ÿæ¯”è¾ƒé’çè¿™ç§åšæ³•ã€‚\n\nå¦å¤–ï¼Œæ— è®ºæ˜¯ç¬¬ä¸€ç§åšæ³•è¿˜æ˜¯ç¬¬äºŒç§åšæ³•ï¼Œæˆ‘ä»¬éƒ½æåˆ°äº†ï¼Œæ–‡å­—å­—ä½“å¤§å°æ˜¯ä¸è¦æ¢ç®—æˆremåšå•ä½çš„ï¼Œè€Œæ˜¯ä½¿ç”¨åª’ä½“æŸ¥è¯¢æ¥è¿›è¡ŒåŠ¨æ€è®¾ç½®ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±æ˜¯ç½‘æ˜“çš„ä»£ç ï¼š\n\nä»£ç ç‰‡æ®µä¸€ï¼š\n\n```\n@media screen and (max-width: 321px) {\n    body {\n        font-size:16px\n    }\n}\n\n@media screen and (min-width: 321px) and (max-width:400px) {\n    body {\n        font-size:17px\n    }\n}\n\n@media screen and (min-width: 400px) {\n    body {\n        font-size:19px\n    }\n}\n```\n\nä»£ç ç‰‡æ®µäºŒï¼š\n\n```\n@media screen and (max-width: 321px) {\n    header,footer {\n        font-size:16px\n    }\n}\n\n@media screen and (min-width: 321px) and (max-width:400px) {\n    header,footer {\n        font-size:17px\n    }\n}\n\n@media screen and (min-width: 400px) {\n    header,footer {\n        font-size:19px\n    }\n}\n```\n\næˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ç½‘æ˜“åœ¨æ–‡å­—å­—ä½“å¤§å°ä¸Šçš„åšæ³•ï¼Œåœ¨åª’ä½“æŸ¥è¯¢é˜¶æ®µï¼Œåˆ†ä¸ºä¸‰ä¸ªç­‰çº§åˆ†åˆ«æ˜¯ï¼š\n321pxä»¥ä¸‹\n321px - 400pxä¹‹é—´\n400pxä»¥ä¸Š\n\nå…·ä½“æ–‡å­—å¤§å°è¦å¤šå°‘ä¸ªåƒç´ è¿™ä¸ªä»¥è®¾è®¡å›¾ä¸ºå‡†ï¼Œä½†æ˜¯è¿™ä¸‰ä¸ªç­‰çº§ä¹‹é—´æ˜¯æœ‰è§„å¾‹çš„ï¼Œä»”ç»†è§‚å¯Ÿå‘ç°ï¼Œ321pxä»¥ä¸‹çš„å±å¹•å­—ä½“å¤§å°æ¯”321px - 400pxä¹‹é—´çš„å±å¹•å­—ä½“å¤§å°è¦å°ä¸€ä¸ªåƒç´ ï¼Œè€Œ321px - 400pxä¹‹é—´çš„å±å¹•å­—ä½“å¤§å°è¦æ¯”400ä»¥ä¸Šå±å¹•å­—ä½“å¤§å°è¦å°2ä¸ªåƒç´ ã€‚ä¾ç…§è¿™ä¸ªè§„å¾‹ï¼Œæˆ‘ä»¬æ ¹æ®è®¾è®¡å›¾æ‰€åœ¨çš„åƒç´ åŒºæ®µå…ˆå†™å¥½è¯¥åŒºæ®µçš„å­—ä½“å¤§å°ï¼Œç„¶ååˆ†åˆ«å†™å‡ºå¦å¤–ä¸¤ä¸ªåŒºæ®µçš„å­—ä½“å¤§å°åª’ä½“æŸ¥è¯¢ä»£ç å°±å¯ä»¥äº†ã€‚\n\nç»ˆäºç å®Œäº†è¿™ç¬¬äºŒç¯‡æ–‡ç« ï¼Œæ— åŠ›å†å¤šè¯´å…¶ä»–çš„è¯ï¼Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œæœ‰äº›ç»†èŠ‚åœ°æ–¹æ²¡æœ‰ç»†è¯´ï¼Œå¦å¤–ä½œè€…æ°´å¹³æœ‰é™ï¼Œå¸Œæœ›å¤§å®¶æŒ‡æ­£å…±åŒè¿›æ­¥ï¼Œè°¢è°¢ã€‚","slug":"ä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ–‡ç« -äºŒ","published":1,"updated":"2015-10-20T03:52:52.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx518000747fy1m84zilu","content":"<h1 id=\"ç§»åŠ¨ç«¯å¼€å‘çš„å¹²è´§ç¯‡\"><a href=\"#ç§»åŠ¨ç«¯å¼€å‘çš„å¹²è´§ç¯‡\" class=\"headerlink\" title=\"ç§»åŠ¨ç«¯å¼€å‘çš„å¹²è´§ç¯‡\"></a>ç§»åŠ¨ç«¯å¼€å‘çš„å¹²è´§ç¯‡</h1><blockquote>\n<p>ä¹‹å‰å†™äº†ä¸€ç¯‡æ–‡ç« <a href=\"http://hcysun.me/2015/10/16/%E4%B8%80%E7%AF%87%E7%9C%9F%E6%AD%A3%E6%95%99%E4%BC%9A%E4%BD%A0%E5%BC%80%E5%8F%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%96%87%E7%AB%A0(%E4%B8%80)/\">ã€Šä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯ä¸€é¢çš„æ–‡ç« (ä¸€)ã€‹</a>ã€‚é‚£æ˜¯æœ¬ç¯‡æ–‡ç« çš„åŸºç¡€ï¼Œå¦‚æœæ²¡æœ‰é˜…è¯»è¿‡çš„åŒå­¦å¯ä»¥å»çœ‹çœ‹ï¼Œä»Šå¤©å°±ç»™å¤§å®¶å¸¦æ¥å¹²è´§ï¼ŒçœŸçœŸæ­£æ­£çš„è®²åˆ°å¦‚ä½•å¾ˆå¥½çš„å¼€å‘ä¸€ä¸ªç§»åŠ¨ç«¯çš„é¡µé¢</p>\n</blockquote>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923mobile.jpg\" alt=\"ç§»åŠ¨ç«¯\"></p>\n<a id=\"more\"></a>\n<p>å¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼Œä»å“ªé‡Œå¼€å§‹å‘¢ï¼Ÿä»è®¾è®¡å›¾å¼€å§‹ï¼Œå³PSDç¨¿ä»¶ï¼š<br>ç§»åŠ¨ç«¯PSDç¨¿ä»¶çš„å°ºå¯¸è‚¯å®šè¾ƒä¹‹PCç«¯çš„PSDç¨¿ä»¶ä¸åŒï¼Œå…·ä½“ä½“ç°åœ¨è®¾è®¡å›¾çš„å°ºå¯¸ä¸Šï¼Œç°åœ¨ç§»åŠ¨ç«¯çš„è®¾è®¡å›¾å°ºå¯¸å¤§å¤šä»¥iPhone5å’ŒiPhone6çš„è®¾å¤‡åƒç´ å°ºå¯¸ä½œä¸ºä¾æ®ï¼Œæ¯”å¦‚æ‹¿åˆ°ä¸€å¼ PSDè®¾è®¡å›¾ï¼Œå®ƒçš„æ€»å®½åº¦ä¸º640px(iPhone5)æˆ–è€…750px(iPhone6)ã€‚æœ¬ä¾‹å°±æ‹¿iPhone6çš„è®¾è®¡å›¾å°ºå¯¸ä¸ºæ ‡å‡†è¿›è¡Œè®²è§£ï¼Œå…¶å®ƒè®¾è®¡å›¾å°ºå¯¸é“ç†æ˜¯ä¸€æ ·çš„ï¼Œè¿™å¹¶ä¸å½±å“æˆ‘ä»¬çš„å¼€å‘ã€‚</p>\n<p>é¦–å…ˆæˆ‘ä»¬è¦æœ‰ä¸€å¼ è®¾è®¡å›¾æ‰è¡Œï¼Œçœ‹ä¸‹å›¾ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€å¼ è®¾è®¡å›¾ï¼Œå®ƒå¾ˆç®€å•ï¼Œåªæœ‰ä¸€ä¸ªçº¢è‰²çš„æ–¹å—ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923psd1.jpg\" alt=\"psdç¨¿\"></p>\n<p>æ‹¿åˆ°äº†è®¾è®¡å›¾ï¼Œäºæ˜¯ä½ å¼€å¼€å¿ƒå¿ƒçš„å¼€å§‹å†™ä»£ç äº†ï¼Œä½ æ‰“å¼€äº†ç¼–è¾‘å™¨ï¼Œå¹¶å†™ä¸‹äº†å¦‚ä¸‹HTMLä»£ç ï¼š</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>HTMLä»£ç å†™å¥½äº†ï¼Œä½ ç”¨äº†ä¸€ä¸ªå¸¦æœ‰boxç±»çš„divæ ‡ç­¾ä½œä¸ºpsç¨¿ä¸­çš„çº¢è‰²å—ï¼Œç»è¿‡å°ºå¯¸æµ‹é‡ï¼Œä½ ä¸ºä¸Šé¢ä»£ç æ·»åŠ äº†CSSæ ·å¼ï¼Œæœ€åä½ çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; /&gt;\n    &lt;style&gt;\n    body{\n        margin: 0;\n        padding: 0;\n    }\n    .box{\n        width: 200px;\n        height: 200px;\n        background: red;\n    }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä½ åªæ˜¯åœ¨åŸæ¥çš„åŸºç¡€ä¸Šå¢åŠ äº†CSSæ ·å¼ï¼Œé¦–å…ˆä½ æ¸…é™¤äº†bodyæ ‡ç­¾ä¸Šçš„é»˜è®¤æ ·å¼ï¼Œè¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œç„¶åä½ æ ¹æ®è®¾è®¡å›¾ä¸­æµ‹é‡çš„å°ºå¯¸æ¥ç»™boxç¼–å†™æ ·å¼ï¼Œå®½200px;é«˜200px;èƒŒæ™¯çº¢è‰²ã€‚çœ‹ä¸Šå»å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œäºæ˜¯ä½ å¼€å¼€å¿ƒå¿ƒçš„æ‰“å¼€æµè§ˆå™¨ï¼Œåˆ·æ–°é¡µé¢ï¼Œä½ çš„è„¸è‰²æ²‰äº†ä¸‹æ¥ï¼Œå› ä¸ºä½ çœ‹åˆ°äº†ä½ ä¸æƒ³çœ‹åˆ°çš„ç»“æœï¼Œå¦‚ä¸‹å›¾ï¼Œä¸Šå›¾ä¸ºè®¾è®¡ç¨¿çš„æ ·å¼ï¼Œä¸‹å›¾ä¸ºä½ ç¼–å†™çš„htmlæ–‡ä»¶çš„æ ·å¼ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923psd2.jpg\" alt=\"psdåŸç¨¿\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923ht1.jpg\" alt=\"htmlé¡µé¢\"></p>\n<p>é€šè¿‡å¯¹æ¯”psdåŸç¨¿å’Œæˆ‘ä»¬ç›®å‰æ‰€å†™çš„htmlé¡µé¢ï¼Œå¯ä»¥çœ‹å‡ºæˆ‘ä»¬htmlé¡µé¢çš„é—®é¢˜ï¼Œçº¢è‰²æ–¹å—ä¸æ•´ä¸ªé¡µé¢çš„æ¯”ä¾‹å’ŒpsdåŸç¨¿ä¸ä¸€æ ·å•Šï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬æ˜æ˜æ˜¯æŒ‰ç…§åŸç¨¿æµ‹é‡çš„å°ºå¯¸å†™å‡ºæ¥çš„ä»£ç å´å’ŒpsdåŸç¨¿æ˜¾ç¤ºçš„æ•ˆæœä¸ä¸€æ ·å‘¢ï¼Ÿåˆ«å¿˜äº†ï¼ŒpsdåŸç¨¿çš„å°ºå¯¸æ˜¯æŒ‰ç…§è®¾å¤‡åƒç´ è®¾è®¡çš„ï¼Œç”±äºæˆ‘ä»¬æ‰€ç”¨çš„è®¾è®¡ç¨¿æ˜¯åŸºäºiPhone6è®¾è®¡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾è®¡ç¨¿çš„å°ºå¯¸å°±æ˜¯iPhone6çš„è®¾å¤‡åƒç´ çš„å°ºå¯¸ï¼Œä¹Ÿå°±æ˜¯750pxï¼Œè€Œæˆ‘ä»¬CSSä¸­çš„æ ·å¼æ˜¯åŸºäºå¸ƒå±€è§†å£çš„å°ºå¯¸è®¡ç®—çš„ï¼Œç”±äºæˆ‘ä»¬htmlé¡µé¢ä¸­ç”±äºå†™å…¥äº†ä»¥ä¸‹metaæ ‡ç­¾ï¼š</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; /&gt;\n</code></pre><p>åœ¨ä¸Šä¸€ç¯‡æˆ‘ä»¬è®²è¿‡ï¼Œ<em> width=device-width </em> è¿™æ®µä»£ç æ˜¯è®©å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºç†æƒ³è§†å£ã€‚<br>æ ¹æ®å…¬å¼(ç¼©æ”¾æ¯”ä¾‹ä¸º1)ï¼š<br><b>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£åƒç´ ä¸ªæ•°ï¼ˆdevice-widthï¼‰</b><br>å› ä¸ºiPhone6çš„DPRï¼ˆè®¾å¤‡åƒç´ æ¯”ï¼‰ä¸º2ï¼Œè®¾å¤‡åƒç´ ä¸º750ï¼Œæ‰€ä»¥iPhone6çš„ç†æƒ³è§†å£å°ºå¯¸ä¸º375pxã€‚æ‰€ä»¥ä¸Šé¢ä»£ç æœ€ç»ˆå¯¼è‡´çš„æ˜¯ï¼šä½¿æˆ‘ä»¬å¸ƒå±€è§†å£çš„å®½åº¦å˜æˆäº†375pxã€‚è€Œæˆ‘ä»¬CSSä¸­ç¼–å†™çš„æ ·å¼å°ºå¯¸åˆæ˜¯åŸºäºå¸ƒå±€è§†å£è®¡ç®—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—åˆ°çš„é¡µé¢çœ‹ä¸Šå»æ¯”ä¾‹ä¸å¯¹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923ht2.jpg\" alt=\"å¸ƒå±€è§†å£å®½åº¦å’Œå…ƒç´ å®½åº¦\"><br><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923psd3.jpg\" alt=\"psdè®¾è®¡ç¨¿å®½åº¦å’Œå…ƒç´ å®½åº¦\"></p>\n<p>å¦‚ä¸Šé¢ä¸¤å¹…å›¾ç‰‡ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œpsdç¨¿çš„æ€»å®½æ˜¯750pxï¼Œå…ƒç´ å®½200pxï¼Œè€Œæˆ‘ä»¬çœŸæ­£åšé¡µé¢çš„æ—¶å€™ï¼Œå¸ƒå±€è§†å£çš„å®½åº¦æ˜¯375pxï¼Œæ­£å¥½æ˜¯è®¾è®¡ç¨¿çš„ä¸€åŠã€‚æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨è®¾è®¡ç¨¿ä¸Šé¢æµ‹é‡æ‰€å¾—çš„åƒç´ å°ºå¯¸ï¼Œæ ¹æ®æ¯”ä¾‹ï¼Œæˆ‘ä»¬åº”è¯¥å°†æµ‹é‡æ‰€å¾—çš„å°ºå¯¸é™¤ä»¥2ï¼Œæ‰æ˜¯æˆ‘ä»¬CSSä¸­å¸ƒå±€æ‰€ç”¨çš„å°ºå¯¸ï¼Œæ®æ­¤ï¼Œæˆ‘ä»¬å°†200pxé™¤ä»¥2å¾—åˆ°100pxï¼Œäºæ˜¯æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œå°†çº¢è‰²æ–¹å—çš„å®½é«˜éƒ½è®¾ä¸º100pxï¼Œåˆ·æ–°é¡µé¢ï¼Œçœ‹çœ‹æ¯”ä¾‹æ˜¯ä¸æ˜¯å’Œè®¾è®¡å›¾ä¸€æ ·äº†ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå¦‚ä¸‹å›¾ä¸ºä¿®æ”¹åçš„htmlé¡µé¢ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923ht3.jpg\" alt=\"ä¿®æ”¹åçš„htmlé¡µé¢\"></p>\n<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†æ­£ç¡®çš„æ•°æ®ï¼Œå¹¶ä¸”æ­£ç¡®çš„å†™å‡ºäº†é¡µé¢ï¼Œä½ å¾ˆé«˜å…´ï¼Œå¯æ˜¯é—®é¢˜æ¥äº†ï¼Œå¦‚æœä½ åœ¨åšé¡µé¢çš„æ—¶å€™ï¼Œæµ‹é‡äº†ä¸€ä¸ªå…ƒç´ çš„å®½åº¦ï¼Œå®½åº¦æ˜¯ä¸€ä¸ªå¥‡æ•°ï¼Œæ¯”å¦‚111åƒç´ ï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¹‹å‰çš„åšæ³•æ˜¯ï¼Œå°†æµ‹é‡åˆ°çš„æ•°æ®é™¤ä»¥2ï¼Œå¾—åˆ°æˆ‘ä»¬çœŸæ­£ä½¿ç”¨çš„æ•°æ®ï¼Œæ‰€ä»¥111é™¤ä»¥2ç­‰äº55.5pxï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œè®¡ç®—æœº(æ‰‹æœº)æ²¡åŠæ³•æ˜¾ç¤ºä¸åˆ°ä¸€ä¸ªåƒç´ çš„åƒç´ å€¼ï¼Œè®¡ç®—æœº(æ‰‹æœº)ä¼šè‡ªåŠ¨å°†å…¶è¡¥å…¨ä¸ºä¸€ä¸ªåƒç´ è¿›è¡Œæ˜¾ç¤ºï¼Œæ‰€ä»¥æœ€ç»ˆä¼šå°†å…ƒç´ æ˜¾ç¤ºä¸º56åƒç´ ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚<br>å¦å¤–ï¼Œæˆ‘ä»¬çš„è®¾è®¡ç¨¿æ˜¯åŸºäºiphone6è®¾è®¡çš„ï¼Œæˆ‘ä»¬è°ƒè¯•é¡µé¢ä¹Ÿæ˜¯åœ¨iphone6ä¸‹è°ƒè¯•çš„ã€‚åˆå› ä¸ºiphone6çš„è®¾å¤‡åƒç´ æ¯”è¯•2ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰èƒ½ç”±è®¾è®¡ç¨¿æµ‹é‡çš„æ•°æ®é™¤ä»¥2åç›´æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨iphone6ä¸‹æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä½ è¦çŸ¥é“ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰æ‰‹æœºçš„è®¾å¤‡åƒç´ æ¯”éƒ½æ˜¯2ï¼Œæœ‰çš„æ‰‹æœºçš„è®¾å¤‡åƒç´ æ¯”è¯•2.5æˆ–è€…3ã€‚å¹¶ä¸”ä¸åŒè®¾å¤‡çš„è®¾å¤‡åƒç´ åˆä¸åŒï¼Œè¿™æ ·å°±å¯¼è‡´ç†æƒ³è§†å£çš„å°ºå¯¸ä¸åŒï¼Œä»è€Œå¯¼è‡´å¸ƒå±€è§†å£çš„å°ºå¯¸ä¸åŒï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥æ ¹æ®iphone6çš„è®¾è®¡ç¨¿å°ºå¯¸é™¤ä»¥2å¾—åˆ°çš„å°ºå¯¸ç”¨æ¥ç¼–å†™CSSæ˜¯ä¸èƒ½åœ¨æ‰€æœ‰è®¾å¤‡ä¸‹å®Œå¥½æ˜¾ç¤ºçš„ã€‚</p>\n<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦æ¢ä¸€ä¸ªæ–¹æ³•ã€‚<br>äºæ˜¯æˆ‘ä»¬æƒ³åˆ°ï¼šå¦‚æœæˆ‘ä»¬èƒ½å°†å¸ƒå±€è§†å£çš„å°ºå¯¸è®¾ç½®ä¸ºå’Œè®¾å¤‡åƒç´ å°ºå¯¸ç›¸ç­‰çš„è¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¿è¯äº†è®¾è®¡å›¾ä¸é¡µé¢çš„1:1å…³ç³»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨psdä¸­æµ‹é‡çš„å°ºå¯¸äº†ï¼Œç„¶ååœ¨å…¶ä»–å°ºå¯¸çš„æ‰‹æœºä¸­ï¼Œæˆ‘ä»¬è¿›è¡Œç­‰æ¯”ç¼©æ”¾å°±okäº†ã€‚é‚£ä¹ˆå¦‚ä½•æ‰èƒ½è®©å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºè®¾å¤‡åƒç´ å°ºå¯¸å‘¢ï¼Ÿ</p>\n<p>æˆ‘ä»¬æ³¨æ„åˆ°metaæ ‡ç­¾ä¸­çš„ width=device-width è¿™æ®µä»£ç ï¼Œé¦–å…ˆä½ è¦æ˜ç™½è¿™å¥è¯çš„æ„æ€ï¼Œå‰é¢è®²è¿‡ï¼Œè¿™å¥è¯æœ€ç»ˆå¯¼è‡´çš„ç»“æœæ˜¯ï¼šè®©å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºç†æƒ³è§†å£çš„å°ºå¯¸ã€‚è¨€å¤–ä¹‹æ„å°±æ˜¯,åœ¨ä»£ç  width=device-width ä¸­ï¼š</p>\n<p>widthï¼šæ˜¯å¸ƒå±€è§†å£çš„width<br>device-widthï¼šæ˜¯ç†æƒ³è§†å£çš„å®½åº¦</p>\n<p>æ ¹æ®å…¬å¼(ç¼©æ”¾æ¯”ä¾‹ä¸º1)ï¼š</p>\n<p><b>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£åƒç´ ä¸ªæ•°ï¼ˆdevice-widthï¼‰</b></p>\n<p>ä»¥iphone6ä¸ºä¾‹ï¼š<br>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ï¼š2<br>è®¾å¤‡åƒç´ ä¸ªæ•°ï¼š750<br>æ‰€ä»¥åœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1çš„æƒ…å†µä¸‹ï¼Œiphone6ç†æƒ³è§†å£çš„åƒç´ ä¸ªæ•°ä¸º 750 / 2 = 375ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºiphone6æ¥è®² device-widthçš„å€¼ä¸º375</p>\n<p>æ‰€ä»¥æˆ‘ä»¬é€šè¿‡width=device-widthè¿™å¥è¯ï¼Œé—´æ¥çš„å°†å¸ƒå±€è§†å£çš„å°ºå¯¸è®¾ä¸ºäº†375ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬èƒ½æ”¹å˜ç†æƒ³è§†å£çš„å°ºå¯¸ï¼Œä¹Ÿå°±æ”¹å˜äº†å¸ƒå±€é€‚å£çš„å°ºå¯¸ï¼Œå¦‚ä½•æ”¹å˜ç†æƒ³è§†å£çš„å°ºå¯¸å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°ç¼©æ”¾äº†ï¼Œä¸Šä¸€ç¯‡æˆ‘ä»¬è®²åˆ°è¿‡ç¼©æ”¾ï¼Œç¼©æ”¾æ˜¯ç¼©å°æˆ–æ”¾å¤§CSSåƒç´ çš„è¿‡ç¨‹ï¼Œä»¥iphone6ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬ç¼©æ”¾æ¯”ä¾‹ä¸º1:1çš„æ—¶å€™ï¼Œç”±äºiphone6çš„è®¾å¤‡åƒç´ æ¯”ä¸º2ï¼Œæ‰€ä»¥iphone6çš„è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»çœ‹èµ·æ¥å°±åƒä¸‹å›¾è¿™æ ·ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015092319a.jpg\" alt=\"iphone6ä¸‹ç¼©æ”¾æ¯”ä¾‹ä¸º1æ—¶ï¼Œè®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»\"></p>\n<p>ä¸€ä¸ªCSSåƒç´ å®½åº¦ç­‰äºä¸¤ä¸ªè®¾å¤‡åƒç´ å®½åº¦ï¼Œæ‰€ä»¥750pxçš„è®¾å¤‡å®½åº¦çš„å¸ƒå±€è§†å£ä¸º357CSSåƒç´ ã€‚è¿™æ˜¯åœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1çš„æƒ…å†µä¸‹ï¼Œæ—¢ç„¶ç¼©æ”¾å¯ä»¥æ”¾å¤§æˆ–ç¼©å°CSSåƒç´ ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬å°†CSSåƒç´ çš„å®½åº¦ç¼©æ”¾è‡³ä¸è®¾å¤‡åƒç´ å®½åº¦ç›¸ç­‰äº†ï¼Œé‚£ä¹ˆ750ä¸ªè®¾å¤‡åƒç´ ä¹Ÿå°±èƒ½æ˜¾ç¤º750ä¸ªCSSåƒç´ ï¼Œç¼©æ”¾åçš„è®¾å¤‡åƒç´ ä¸CSSåƒç´ çœ‹èµ·æ¥åº”è¯¥åƒä¸‹å›¾è¿™æ ·ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923px1.jpg\" alt=\"iphone6ç¼©å°0.5å€åï¼Œè®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»\"></p>\n<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬çš„ç¼©æ”¾å€æ•°æ˜¯å¤šå°‘å‘¢ï¼Ÿåœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1çš„æ—¶å€™ï¼Œä¸€ä¸ªCSSåƒç´ çš„å®½åº¦ = ä¸¤ä¸ªè®¾å¤‡åƒç´ çš„å®½åº¦ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®© ä¸€ä¸ªCSSåƒç´ çš„å®½åº¦ = ä¸€ä¸ªè®¾å¤‡åƒç´ çš„å®½åº¦ï¼Œæˆ‘ä»¬å°±è¦å°†CSSåƒç´ ç¼©å°ä¸ºåŸæ¥çš„0.5å€ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬ç¼©å°çš„å€æ•° = è®¾å¤‡åƒç´ æ¯”çš„å€’æ•°ã€‚<br>äºæ˜¯ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„HTMLä»£ç (ä¿®æ”¹äº†metaæ ‡ç­¾)ï¼š</p>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=0.5,maximum-scale=0.5,user-scalable=no&quot; /&gt;\n    &lt;style&gt;\n    body{\n        margin: 0;\n        padding: 0;\n    }\n    .box{\n        width: 200px;\n        height: 200px;\n        background: red;\n    }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬ç»™çº¢è‰²æ–¹å—ä½¿ç”¨çš„CSSå°ºå¯¸ç›´æ¥ä½¿ç”¨çš„æ˜¯psdç¨¿ä¸­æµ‹é‡çš„å°ºå¯¸ï¼Œæˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼Œæ€ä¹ˆæ ·ï¼Ÿæ»¡æ„å§ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015092316b.jpg\" alt=\"ä¿®æ”¹åçš„æ–°é¡µé¢æ­£ç¡®è¾“å‡º\"></p>\n<p>ä½†æ˜¯æˆ‘ä»¬è¿™æ˜¯æœ‰ä¸ªå‰æçš„ï¼Œé‚£å°±æ˜¯ç¼©æ”¾0.5å€åªé€‚ç”¨äºè®¾å¤‡åƒç´ æ¯”ä¸º2çš„è®¾å¤‡ï¼ˆå› ä¸ºç¼©æ”¾å€¼ = 1 / è®¾å¤‡åƒç´ æ¯”ï¼‰ã€‚æ‰€ä»¥ï¼Œä¸ºäº†é€‚åº”æ‰€æœ‰çš„è®¾å¤‡ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨javascriptä»£ç åŠ¨æ€ç”Ÿæˆmetaæ ‡ç­¾ï¼š</p>\n<pre><code>var scale = 1 / window.devicePixelRatio;\ndocument.querySelector(&#39;meta[name=&quot;viewport&quot;]&#39;).setAttribute(&#39;content&#39;,&#39;width=device-width,initial-scale=&#39; + scale + &#39;, maximum-scale=&#39; + scale + &#39;, minimum-scale=&#39; + scale + &#39;, user-scalable=no&#39;);\n</code></pre><p>å…¶ä¸­ <b>window.devicePixelRatio</b> çš„å€¼ä¸ºè®¾å¤‡åƒç´ æ¯”ã€‚<br>äºæ˜¯æˆ‘ä»¬çš„ä»£ç å˜æˆäº†è¿™æ ·ï¼š</p>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;&quot; /&gt;\n    &lt;style&gt;\n    body{\n        margin: 0;\n        padding: 0;\n    }\n    .box{\n        width: 200px;\n        height: 200px;\n        background: red;\n    }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;\n\n    &lt;script&gt;\n    var scale = 1 / window.devicePixelRatio;\n    document.querySelector(&#39;meta[name=&quot;viewport&quot;]&#39;).setAttribute(&#39;content&#39;,&#39;width=device-width,initial-scale=&#39; + scale + &#39;, maximum-scale=&#39; + scale + &#39;, minimum-scale=&#39; + scale + &#39;, user-scalable=no&#39;);\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ä¸Šé¢çš„ä»£ç æœ€ç»ˆèƒ½ä¿è¯ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æ— è®ºä»»ä½•è®¾å¤‡ï¼Œå¸ƒå±€è§†å£çš„å®½åº¦æ€»æ˜¯ç­‰äºè®¾å¤‡åƒç´ ã€‚<br>è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡å›¾ä¸­æµ‹é‡ä¸º200pxçš„å®½åº¦å°±èƒ½ç›´æ¥ç”¨åœ¨CSSä¸­äº†ï¼Œå¹¶ä¸”åœ¨iphone6ä¸­æ˜¾ç¤ºå®Œå¥½ï¼Œå¯æ˜¯åˆ«å¿˜äº†ï¼Œæˆ‘ä»¬çš„è®¾è®¡å›¾å°±æ˜¯æ ¹æ®iphone6è®¾è®¡çš„ï¼Œå¦‚æœæ¢åšå…¶ä»–è®¾å¤‡ï¼Œè¿˜èƒ½æ˜¾ç¤ºå®Œå¥½ä¹ˆï¼Ÿæˆ‘ä»¬ä¸å¦¨è¯•ä¸€ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼Œæ˜¯ä¸Šé¢ä»£ç åœ¨iphone5å’Œiphone6ä¸‹çš„å¯¹æ¯”ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923p5.jpg\" alt=\"iphone5ä¸­çš„æ•ˆæœ\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923p6.jpg\" alt=\"iphone6ä¸­çš„æ•ˆæœ\"></p>\n<p>æˆ‘ä»¬å‘ç°ï¼Œæ— è®ºæ˜¯äº”è¿˜æ˜¯6ï¼Œå³ä½¿è®¾å¤‡åƒç´ å˜äº†ï¼Œå³å±å¹•å®½åº¦å˜äº†ï¼Œå¯æ˜¯çº¢è‰²æ–¹å—çš„å®½åº¦å¹¶æ²¡æœ‰å˜ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„ç°è±¡ï¼Œå› ä¸ºè¿™æ ·é¡µé¢çš„å…ƒç´ å°±ä¸æˆæ¯”ä¾‹äº†ï¼Œä¼šå½±å“åˆ°å¸ƒå±€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•è®©æˆ‘ä»¬é¡µé¢çš„å…ƒç´ è·Ÿç€è®¾å¤‡å˜åŒ–è€Œç­‰æ¯”ç¼©æ”¾ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦è§£å†³çš„ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°remçš„çŸ¥è¯†ç‚¹äº†ã€‚</p>\n<h2 id=\"rem\"><a href=\"#rem\" class=\"headerlink\" title=\"rem\"></a>rem</h2><p>ä»€ä¹ˆæ˜¯remï¼Ÿ<br>remæ˜¯ç›¸å¯¹å°ºå¯¸å•ä½ï¼Œç›¸å¯¹äºhtmlæ ‡ç­¾å­—ä½“å¤§å°çš„å•ä½ï¼Œä¸¾ä¸ªä¾‹å­ï¼š<br>å¦‚æœhtmlçš„font-size = 18px;<br>é‚£ä¹ˆ1rem = 18pxï¼Œéœ€è¦è®°ä½çš„æ˜¯ï¼Œremæ˜¯åŸºäºhtmlæ ‡ç­¾çš„å­—ä½“å¤§å°çš„ã€‚</p>\n<p>ç›¸ä¿¡ä½ å·²ç»æ˜ç™½äº†ï¼Œå¯¹æ²¡é”™ï¼Œæˆ‘ä»¬è¦æŠŠä¹‹å‰ç”¨pxåšå…ƒç´ å°ºå¯¸çš„å•ä½æ¢æˆremï¼Œæ‰€ä»¥ï¼Œç°åœ¨çš„é—®é¢˜å°±æ˜¯å¦‚æœè½¬æ¢ï¼Œå› ä¸ºremæ˜¯æ ¹æ®htmlæ ‡ç­¾çš„font-sizeå€¼ç¡®å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦ç¡®å®šhtmlæ ‡ç­¾çš„font-sizeå€¼å°±è¡Œäº†ï¼Œæˆ‘ä»¬é¦–å…ˆè‡ªå·±å®šä¸€ä¸ªæ ‡å‡†ï¼Œå°±æ˜¯è®©font-sizeçš„å€¼ç­‰äºè®¾å¤‡åƒç´ çš„ååˆ†ä¹‹ä¸€ï¼Œå³ï¼š</p>\n<pre><code>document.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + &#39;px&#39;;\n</code></pre><p>ä»¥iphone6ä¸ºä¾‹ï¼Œhtmlæ ‡ç­¾çš„font-sizeçš„å€¼å°±ç­‰äº 750 / 10 = 75px äº†ï¼Œè¿™æ · 1rem = 75pxï¼Œæ‰€ä»¥çº¢è‰²æ–¹å—200pxæ¢ç®—ä¸ºremå•ä½å°±æ˜¯ 200 / 75 = 2.6666667remã€‚<br>é‚£ä¹ˆåœ¨iphone5ä¸­å‘¢ï¼Ÿå› ä¸ºiphone5çš„è®¾å¤‡åƒç´ ä¸º640ï¼Œæ‰€ä»¥iphoneçš„htmlæ ‡ç­¾çš„font-sizeçš„å€¼ä¸º 640 / 10 = 64pxï¼Œæ‰€ä»¥ 1rem = 64pxï¼Œæ‰€ä»¥åœ¨iphone6ä¸­æ˜¾ç¤ºä¸º200pxçš„å…ƒç´ åœ¨iphone5ä¸­ä¼šæ˜¾ç¤ºä¸º 2.6666667 * 64 åƒç´ ï¼Œè¿™æ ·ï¼Œåœ¨ä¸åŒè®¾å¤‡ä¸­å°±å®ç°äº†è®©å…ƒç´ ç­‰æ¯”ç¼©æ”¾ä»è€Œä¸å½±å“å¸ƒå±€ã€‚è€Œä¸Šé¢çš„æ–¹æ³•ä¹Ÿæ˜¯æ‰‹æœºæ·˜å®æ‰€ç”¨çš„æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œç°åœ¨ä½ åªéœ€è¦å°†ä½ æµ‹é‡çš„å°ºå¯¸æ•°æ®é™¤ä»¥75å°±è½¬æ¢æˆäº†remå•ä½ï¼Œå¦‚æœæ˜¯iPhone5å°±è¦é™¤ä»¥64ï¼Œå³é™¤ä»¥ä½ åŠ¨æ€è®¾ç½®çš„font-sizeçš„å€¼ã€‚</p>\n<p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåšé¡µé¢çš„æ—¶å€™æ–‡å­—å­—ä½“å¤§å°ä¸è¦ç”¨remæ¢ç®—ï¼Œè¿˜æ˜¯ä½¿ç”¨pxåšå•ä½ã€‚åé¢ä¼šè®²åˆ°ã€‚</p>\n<p>è®©æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬ç°åœ¨äº†è§£çš„æ–¹æ³•ï¼š</p>\n<p>1ã€å°†å¸ƒå±€è§†å£å¤§å°è®¾ä¸ºè®¾å¤‡åƒç´ å°ºå¯¸ï¼š</p>\n<pre><code>var scale = 1 / window.devicePixelRatio;\ndocument.querySelector(&#39;meta[name=&quot;viewport&quot;]&#39;).setAttribute(&#39;content&#39;,&#39;width=device-width,initial-scale=&#39; + scale + &#39;, maximum-scale=&#39; + scale + &#39;, minimum-scale=&#39; + scale + &#39;, user-scalable=no&#39;);\n</code></pre><p>2ã€åŠ¨æ€è®¾ç½®htmlå­—ä½“å¤§å°ï¼š</p>\n<pre><code>document.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + &#39;px&#39;;\n</code></pre><p>3ã€å°†è®¾è®¡å›¾ä¸­çš„å°ºå¯¸æ¢ç®—æˆrem</p>\n<p>å…ƒç´ çš„remå°ºå¯¸ = å…ƒç´ çš„psdç¨¿æµ‹é‡çš„åƒç´ å°ºå¯¸ / åŠ¨æ€è®¾ç½®çš„htmlæ ‡ç­¾çš„font-sizeå€¼</p>\n<p>è¯´äº†ä¸€å¤§å †ï¼Œå…¶å®æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„htmlè«æ¿å°±å¯ä»¥å†™é¡µé¢äº†ï¼Œå”¯ä¸€éœ€è¦ä½ åšçš„å°±æ˜¯è®¡ç®—å…ƒç´ çš„remå°ºå¯¸ï¼Œæ‰€ä»¥å³ä½¿ä½ æ²¡çœ‹æ‡‚ä¸Šé¢çš„è®²è¿°ä¹Ÿä¸é‡è¦ï¼Œä½ åªè¦å°†è«æ¿æ‹¿è¿‡å»ç”¨å°±å¥½äº†ï¼š</p>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n\n\n    &lt;script&gt;\n    var scale = 1 / window.devicePixelRatio;\n    document.querySelector(&#39;meta[name=&quot;viewport&quot;]&#39;).setAttribute(&#39;content&#39;,&#39;width=device-width,initial-scale=&#39; + scale + &#39;, maximum-scale=&#39; + scale + &#39;, minimum-scale=&#39; + scale + &#39;, user-scalable=no&#39;);\n\n    document.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + &#39;px&#39;;\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ä¿®æ”¹æˆ‘ä»¬çš„ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;&quot; /&gt;\n    &lt;style&gt;\n    body{\n        margin: 0;\n        padding: 0;\n    }\n    .box{\n        width: 2.66666667rem;\n        height: 2.66666667rem;\n        background: red;\n    }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;\n\n    &lt;script&gt;\n    var scale = 1 / window.devicePixelRatio;\n    document.querySelector(&#39;meta[name=&quot;viewport&quot;]&#39;).setAttribute(&#39;content&#39;,&#39;width=device-width,initial-scale=&#39; + scale + &#39;, maximum-scale=&#39; + scale + &#39;, minimum-scale=&#39; + scale + &#39;, user-scalable=no&#39;);\n\n    document.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + &#39;px&#39;;\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>æ‰“å¼€æµè§ˆå™¨ï¼Œåˆ†åˆ«åœ¨iPhone6å’ŒiPhone5ä¸‹æŸ¥çœ‹é¡µé¢ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œç°åœ¨çš„å…ƒç´ å¯ä»¥æ ¹æ®æ‰‹æœºçš„å°ºå¯¸ä¸åŒè€Œç­‰æ¯”ç¼©æ”¾äº†ã€‚</p>\n<p>ä¸Šé¢çš„æ–¹æ³•æ˜¯æ‰‹æœºæ·˜å®çš„æ–¹æ³•ï¼Œæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯è½¬åŒ–remå•ä½çš„æ—¶å€™ï¼Œéœ€è¦é™¤ä»¥font-sizeçš„å€¼ï¼Œæ·˜å®ç”¨çš„æ˜¯iPhone6çš„è®¾è®¡å›¾ï¼Œæ‰€ä»¥æ·˜å®è½¬æ¢å°ºå¯¸çš„æ—¶å€™è¦é™¤ä»¥75ï¼Œè¿™ä¸ªå€¼å¯ä¸å¥½ç®—ï¼Œæ‰€ä»¥è¿˜è¦å€Ÿç”¨è®¡ç®—å™¨æ¥å®Œæˆï¼Œå½±å“å¼€å‘æ•ˆç‡ï¼Œå¦å¤–ï¼Œåœ¨è½¬è¿˜remå•ä½æ—¶é‡åˆ°é™¤ä¸å°½çš„æ•°æ—¶æˆ‘ä»¬ä¼šé‡‡ç”¨å¾ˆé•¿çš„è¿‘ä¼¼å€¼æ¯”å¦‚ä¸Šé¢çš„2.6666667remï¼Œè¿™æ ·å¯èƒ½ä¼šä½¿é¡µé¢å…ƒç´ çš„å°ºå¯¸æœ‰åå·®ã€‚</p>\n<p>é™¤äº†ä¸Šé¢çš„æ–¹æ³•æ¯”è¾ƒé€šç”¨ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬æ¥é‡æ–°æ€è€ƒä¸€ä¸‹ï¼š</p>\n<p>ä¸Šé¢åšé¡µé¢çš„æ€è·¯æ˜¯ï¼šæ‹¿åˆ°è®¾è®¡å›¾ï¼Œæ¯”å¦‚iPhone6çš„è®¾è®¡å›¾ï¼Œæˆ‘ä»¬å°±å°†æµè§ˆå™¨è®¾ç½®åˆ°iPhone6è®¾å¤‡è°ƒè¯•ï¼Œç„¶åä½¿ç”¨jsåŠ¨æ€ä¿®æ”¹metaæ ‡ç­¾ï¼Œä½¿å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºè®¾è®¡å›¾å°ºå¯¸ï¼Œä¹Ÿå°±æ˜¯è®¾å¤‡åƒç´ å°ºå¯¸ï¼Œç„¶åä½¿ç”¨remæ›¿ä»£pxåšå°ºå¯¸ä»£ä¸ºï¼Œä½¿å¾—é¡µé¢åœ¨ä¸åŒè®¾å¤‡ä¸­ç­‰æ¯”ç¼©æ”¾ã€‚</p>\n<p>ç°åœ¨å‡å¦‚æˆ‘ä»¬ä¸å»ä¿®æ”¹metaæ ‡ç­¾ï¼Œæ­£å¸¸ä½¿ç”¨ç¼©æ”¾ä¸º1:1çš„metaæ ‡ç­¾ï¼Œå³ä½¿ç”¨å¦‚ä¸‹metaæ ‡ç­¾ï¼š</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no&quot; /&gt;\n</code></pre><p>è¿˜ä»¥iPhone6ä¸ºä¾‹ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç¼©æ”¾ä¸º1:1çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®å…¬å¼ï¼š</p>\n<p><b>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£åƒç´ ä¸ªæ•°ï¼ˆdevice-widthï¼‰</b></p>\n<p>æˆ‘ä»¬çŸ¥é“ï¼š<br>è®¾å¤‡åƒç´  = è®¾è®¡å›¾å°ºå¯¸ = 750px<br>å¸ƒå±€è§†å£ = 375px</p>\n<p>å‡è®¾æˆ‘ä»¬ä»¥iPhone6è®¾è®¡å›¾å°ºå¯¸ä¸ºæ ‡å‡†ï¼Œåœ¨è®¾è®¡å›¾çš„å°ºå¯¸ä¸‹è®¾ç½®ä¸€ä¸ªfont-sizeå€¼ä¸º100pxã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼š750pxå®½çš„é¡µé¢ï¼Œæˆ‘ä»¬è®¾ç½®100pxçš„font-sizeå€¼ï¼Œé‚£ä¹ˆé¡µé¢çš„å®½åº¦æ¢ç®—ä¸ºremå°±ç­‰äº 750 / 100 = 7.5remã€‚</p>\n<p>æˆ‘ä»¬å°±ä»¥é¡µé¢æ€»å®½ä¸º7.5remä¸ºæ ‡å‡†ï¼Œé‚£ä¹ˆåœ¨å¸ƒå±€è§†å£ä¸­ï¼Œä¹Ÿå°±æ˜¯é¡µé¢æ€»å®½ä¸º375pxä¸‹ï¼Œfont-sizeå€¼åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿå¾ˆç®€å•ï¼š</p>\n<p>font-size = 375 / 7.5 = 50px</p>\n<p>é‚£ä¹ˆåœ¨iPhone5ä¸‹å‘¢ï¼Ÿå› ä¸ºiPhone5çš„å¸ƒå±€è§†å£å®½ä¸º320pxï¼Œæ‰€ä»¥å¦‚æœé¡µé¢æ€»å®½ä»¥7.5ä¸ºæ ‡å‡†ï¼Œé‚£ä¹ˆiPhone5ä¸‹æˆ‘ä»¬è®¾ç½®çš„font-sizeå€¼åº”è¯¥æ˜¯ï¼š</p>\n<p>font-size = 320 / 7.5 =42.666666667px</p>\n<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡åœ¨ä»€ä¹ˆè®¾å¤‡ä¸‹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æŠŠé¡µé¢çš„æ€»å®½åº¦è®¾ä¸ºä¸€ä¸ªä»¥remä¸ºå•ä½çš„å®šå€¼ï¼Œæ¯”å¦‚æœ¬ä¾‹å°±æ˜¯7.5remï¼Œåªä¸è¿‡ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å¸ƒå±€è§†å£çš„å°ºå¯¸åŠ¨æ€è®¾ç½®font-sizeçš„å€¼ï¼š</p>\n<pre><code>document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + &#39;px&#39;;\n</code></pre><p>è¿™æ ·ï¼Œæ— è®ºåœ¨ä»€ä¹ˆè®¾å¤‡ä¸‹ï¼Œæˆ‘ä»¬é¡µé¢çš„æ€»å®½åº¦éƒ½æ˜¯7.5remï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥åœ¨è®¾è®¡å›¾ä¸Šæµ‹é‡pxå•ä½çš„å°ºå¯¸ï¼Œç„¶åé™¤ä»¥100è½¬æ¢æˆremå•ä½åç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚ï¼Œåœ¨iPhone6è®¾è®¡å›¾ä¸­æµ‹é‡ä¸€ä¸ªå…ƒç´ çš„å°ºå¯¸ä¸º200pxï¼Œé‚£ä¹ˆè½¬æ¢æˆremå•ä½å°±æ˜¯ 200 / 100 = 2remï¼Œå› ä¸ºåœ¨ä¸åŒè®¾å¤‡ä¸‹æˆ‘ä»¬åŠ¨æ€è®¾ç½®äº†htmlæ ‡ç­¾çš„font-sizeå€¼ï¼Œæ‰€ä»¥ä¸åŒè®¾å¤‡ä¸‹ç›¸åŒçš„remå€¼å¯¹åº”çš„åƒç´ å€¼æ˜¯ä¸åŒçš„ï¼Œè¿™æ ·å°±å®ç°äº†åœ¨ä¸åŒè®¾å¤‡ä¸‹ç­‰æ¯”ç¼©æ”¾ã€‚æˆ‘ä»¬ä¿®æ”¹htmlä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no&quot; /&gt;\n    &lt;style&gt;\n    body{\n        margin: 0;\n        padding: 0;\n    }\n    .box{\n        width: 2rem;\n        height: 2rem;\n        background: red;\n    }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;\n\n    &lt;script&gt;\n    document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + &#39;px&#39;;\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>åˆ·æ–°é¡µé¢ï¼Œåˆ†åˆ«åœ¨iPhone6å’ŒiPhone5ä¸‹è°ƒè¯•æŸ¥çœ‹ç»“æœï¼Œä¼šå‘ç°å¦‚ä¸‹å›¾ï¼Œä½¿æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œç­‰æ¯”ç¼©æ”¾ï¼Œokï¼Œå®é™…ä¸Šè¿™ç§åšæ³•ä¹Ÿæ˜¯ç½‘æ˜“çš„åšæ³•ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015092320a.jpg\" alt=\"iPhone6ä¸‹æ˜¾ç¤ºæ•ˆæœ\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015092320b.jpg\" alt=\"iPhone5ä¸‹æ˜¾ç¤ºæ•ˆæœ\"></p>\n<p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ç¬¬äºŒç§åšæ³•ï¼š</p>\n<p>1ã€æ‹¿åˆ°è®¾è®¡å›¾ï¼Œè®¡ç®—å‡ºé¡µé¢çš„æ€»å®½ï¼Œä¸ºäº†å¥½è®¡ç®—ï¼Œå–100pxçš„font-sizeï¼Œå¦‚æœè®¾è®¡å›¾æ˜¯iPhone6çš„é‚£ä¹ˆè®¡ç®—å‡ºçš„å°±æ˜¯7.5remï¼Œå¦‚æœé¡µé¢æ˜¯iPhone5çš„é‚£ä¹ˆè®¡ç®—å‡ºçš„ç»“æœå°±æ˜¯6.4remã€‚<br>2ã€åŠ¨æ€è®¾ç½®htmlæ ‡ç­¾çš„font-sizeå€¼ï¼š</p>\n<pre><code>  document.documentElement.style.fontSize = document.documentElement.clientWidth / ä»¥remä¸ºå•ä½çš„é¡µé¢æ€»å®½ + &#39;px&#39;;\n</code></pre><p>  å¦‚iPhone6çš„è®¾è®¡å›¾å°±æ˜¯ï¼š</p>\n<pre><code>  document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + &#39;px&#39;;\n</code></pre><p>  iPhone5çš„è®¾è®¡å›¾å°±æ˜¯ï¼š</p>\n<pre><code>  document.documentElement.style.fontSize = document.documentElement.clientWidth / 6.4 + &#39;px&#39;;\n</code></pre><p>3ã€åšé¡µé¢æ˜¯æµ‹é‡è®¾è®¡å›¾çš„pxå°ºå¯¸é™¤ä»¥100å¾—åˆ°remå°ºå¯¸ã€‚<br>4ã€å’Œæ·˜å®çš„åšæ³•ä¸€æ ·ï¼Œæ–‡å­—å­—ä½“å¤§å°ä¸è¦ä½¿ç”¨remæ¢ç®—ã€‚</p>\n<p>ä¸‹é¢æ˜¯è¿™ç§åšæ³•çš„htmlè«æ¿ï¼š</p>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n\n\n    &lt;script&gt;\n    document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + &#39;px&#39;;\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ç”±äºè¿™ç§åšæ³•åœ¨å¼€å‘ä¸­æ¢ç®—remå•ä½çš„æ—¶å€™åªéœ€è¦å°†æµ‹é‡çš„å°ºå¯¸é™¤ä»¥100å³å¯ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨è®¡ç®—å™¨æˆ‘ä»¬å°±å¯ä»¥å¾ˆå¿«çš„å®Œæˆè®¡ç®—è½¬æ¢ï¼Œæ‰€ä»¥è¿™ä¹Ÿä¼šæå‡å¼€å‘æ•ˆç‡ï¼Œæœ¬äººä¹Ÿæ¯”è¾ƒé’çè¿™ç§åšæ³•ã€‚</p>\n<p>å¦å¤–ï¼Œæ— è®ºæ˜¯ç¬¬ä¸€ç§åšæ³•è¿˜æ˜¯ç¬¬äºŒç§åšæ³•ï¼Œæˆ‘ä»¬éƒ½æåˆ°äº†ï¼Œæ–‡å­—å­—ä½“å¤§å°æ˜¯ä¸è¦æ¢ç®—æˆremåšå•ä½çš„ï¼Œè€Œæ˜¯ä½¿ç”¨åª’ä½“æŸ¥è¯¢æ¥è¿›è¡ŒåŠ¨æ€è®¾ç½®ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±æ˜¯ç½‘æ˜“çš„ä»£ç ï¼š</p>\n<p>ä»£ç ç‰‡æ®µä¸€ï¼š</p>\n<pre><code>@media screen and (max-width: 321px) {\n    body {\n        font-size:16px\n    }\n}\n\n@media screen and (min-width: 321px) and (max-width:400px) {\n    body {\n        font-size:17px\n    }\n}\n\n@media screen and (min-width: 400px) {\n    body {\n        font-size:19px\n    }\n}\n</code></pre><p>ä»£ç ç‰‡æ®µäºŒï¼š</p>\n<pre><code>@media screen and (max-width: 321px) {\n    header,footer {\n        font-size:16px\n    }\n}\n\n@media screen and (min-width: 321px) and (max-width:400px) {\n    header,footer {\n        font-size:17px\n    }\n}\n\n@media screen and (min-width: 400px) {\n    header,footer {\n        font-size:19px\n    }\n}\n</code></pre><p>æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ç½‘æ˜“åœ¨æ–‡å­—å­—ä½“å¤§å°ä¸Šçš„åšæ³•ï¼Œåœ¨åª’ä½“æŸ¥è¯¢é˜¶æ®µï¼Œåˆ†ä¸ºä¸‰ä¸ªç­‰çº§åˆ†åˆ«æ˜¯ï¼š<br>321pxä»¥ä¸‹<br>321px - 400pxä¹‹é—´<br>400pxä»¥ä¸Š</p>\n<p>å…·ä½“æ–‡å­—å¤§å°è¦å¤šå°‘ä¸ªåƒç´ è¿™ä¸ªä»¥è®¾è®¡å›¾ä¸ºå‡†ï¼Œä½†æ˜¯è¿™ä¸‰ä¸ªç­‰çº§ä¹‹é—´æ˜¯æœ‰è§„å¾‹çš„ï¼Œä»”ç»†è§‚å¯Ÿå‘ç°ï¼Œ321pxä»¥ä¸‹çš„å±å¹•å­—ä½“å¤§å°æ¯”321px - 400pxä¹‹é—´çš„å±å¹•å­—ä½“å¤§å°è¦å°ä¸€ä¸ªåƒç´ ï¼Œè€Œ321px - 400pxä¹‹é—´çš„å±å¹•å­—ä½“å¤§å°è¦æ¯”400ä»¥ä¸Šå±å¹•å­—ä½“å¤§å°è¦å°2ä¸ªåƒç´ ã€‚ä¾ç…§è¿™ä¸ªè§„å¾‹ï¼Œæˆ‘ä»¬æ ¹æ®è®¾è®¡å›¾æ‰€åœ¨çš„åƒç´ åŒºæ®µå…ˆå†™å¥½è¯¥åŒºæ®µçš„å­—ä½“å¤§å°ï¼Œç„¶ååˆ†åˆ«å†™å‡ºå¦å¤–ä¸¤ä¸ªåŒºæ®µçš„å­—ä½“å¤§å°åª’ä½“æŸ¥è¯¢ä»£ç å°±å¯ä»¥äº†ã€‚</p>\n<p>ç»ˆäºç å®Œäº†è¿™ç¬¬äºŒç¯‡æ–‡ç« ï¼Œæ— åŠ›å†å¤šè¯´å…¶ä»–çš„è¯ï¼Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œæœ‰äº›ç»†èŠ‚åœ°æ–¹æ²¡æœ‰ç»†è¯´ï¼Œå¦å¤–ä½œè€…æ°´å¹³æœ‰é™ï¼Œå¸Œæœ›å¤§å®¶æŒ‡æ­£å…±åŒè¿›æ­¥ï¼Œè°¢è°¢ã€‚</p>\n","site":{"data":{}},"excerpt":"<h1 id=\"ç§»åŠ¨ç«¯å¼€å‘çš„å¹²è´§ç¯‡\"><a href=\"#ç§»åŠ¨ç«¯å¼€å‘çš„å¹²è´§ç¯‡\" class=\"headerlink\" title=\"ç§»åŠ¨ç«¯å¼€å‘çš„å¹²è´§ç¯‡\"></a>ç§»åŠ¨ç«¯å¼€å‘çš„å¹²è´§ç¯‡</h1><blockquote>\n<p>ä¹‹å‰å†™äº†ä¸€ç¯‡æ–‡ç« <a href=\"http://hcysun.me/2015/10/16/%E4%B8%80%E7%AF%87%E7%9C%9F%E6%AD%A3%E6%95%99%E4%BC%9A%E4%BD%A0%E5%BC%80%E5%8F%91%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%96%87%E7%AB%A0(%E4%B8%80)/\">ã€Šä¸€ç¯‡çœŸæ­£æ•™ä¼šä½ å¼€å‘ç§»åŠ¨ç«¯ä¸€é¢çš„æ–‡ç« (ä¸€)ã€‹</a>ã€‚é‚£æ˜¯æœ¬ç¯‡æ–‡ç« çš„åŸºç¡€ï¼Œå¦‚æœæ²¡æœ‰é˜…è¯»è¿‡çš„åŒå­¦å¯ä»¥å»çœ‹çœ‹ï¼Œä»Šå¤©å°±ç»™å¤§å®¶å¸¦æ¥å¹²è´§ï¼ŒçœŸçœŸæ­£æ­£çš„è®²åˆ°å¦‚ä½•å¾ˆå¥½çš„å¼€å‘ä¸€ä¸ªç§»åŠ¨ç«¯çš„é¡µé¢</p>\n</blockquote>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923mobile.jpg\" alt=\"ç§»åŠ¨ç«¯\"></p>","more":"<p>å¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼Œä»å“ªé‡Œå¼€å§‹å‘¢ï¼Ÿä»è®¾è®¡å›¾å¼€å§‹ï¼Œå³PSDç¨¿ä»¶ï¼š<br>ç§»åŠ¨ç«¯PSDç¨¿ä»¶çš„å°ºå¯¸è‚¯å®šè¾ƒä¹‹PCç«¯çš„PSDç¨¿ä»¶ä¸åŒï¼Œå…·ä½“ä½“ç°åœ¨è®¾è®¡å›¾çš„å°ºå¯¸ä¸Šï¼Œç°åœ¨ç§»åŠ¨ç«¯çš„è®¾è®¡å›¾å°ºå¯¸å¤§å¤šä»¥iPhone5å’ŒiPhone6çš„è®¾å¤‡åƒç´ å°ºå¯¸ä½œä¸ºä¾æ®ï¼Œæ¯”å¦‚æ‹¿åˆ°ä¸€å¼ PSDè®¾è®¡å›¾ï¼Œå®ƒçš„æ€»å®½åº¦ä¸º640px(iPhone5)æˆ–è€…750px(iPhone6)ã€‚æœ¬ä¾‹å°±æ‹¿iPhone6çš„è®¾è®¡å›¾å°ºå¯¸ä¸ºæ ‡å‡†è¿›è¡Œè®²è§£ï¼Œå…¶å®ƒè®¾è®¡å›¾å°ºå¯¸é“ç†æ˜¯ä¸€æ ·çš„ï¼Œè¿™å¹¶ä¸å½±å“æˆ‘ä»¬çš„å¼€å‘ã€‚</p>\n<p>é¦–å…ˆæˆ‘ä»¬è¦æœ‰ä¸€å¼ è®¾è®¡å›¾æ‰è¡Œï¼Œçœ‹ä¸‹å›¾ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€å¼ è®¾è®¡å›¾ï¼Œå®ƒå¾ˆç®€å•ï¼Œåªæœ‰ä¸€ä¸ªçº¢è‰²çš„æ–¹å—ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923psd1.jpg\" alt=\"psdç¨¿\"></p>\n<p>æ‹¿åˆ°äº†è®¾è®¡å›¾ï¼Œäºæ˜¯ä½ å¼€å¼€å¿ƒå¿ƒçš„å¼€å§‹å†™ä»£ç äº†ï¼Œä½ æ‰“å¼€äº†ç¼–è¾‘å™¨ï¼Œå¹¶å†™ä¸‹äº†å¦‚ä¸‹HTMLä»£ç ï¼š</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>HTMLä»£ç å†™å¥½äº†ï¼Œä½ ç”¨äº†ä¸€ä¸ªå¸¦æœ‰boxç±»çš„divæ ‡ç­¾ä½œä¸ºpsç¨¿ä¸­çš„çº¢è‰²å—ï¼Œç»è¿‡å°ºå¯¸æµ‹é‡ï¼Œä½ ä¸ºä¸Šé¢ä»£ç æ·»åŠ äº†CSSæ ·å¼ï¼Œæœ€åä½ çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; /&gt;\n    &lt;style&gt;\n    body{\n        margin: 0;\n        padding: 0;\n    }\n    .box{\n        width: 200px;\n        height: 200px;\n        background: red;\n    }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä½ åªæ˜¯åœ¨åŸæ¥çš„åŸºç¡€ä¸Šå¢åŠ äº†CSSæ ·å¼ï¼Œé¦–å…ˆä½ æ¸…é™¤äº†bodyæ ‡ç­¾ä¸Šçš„é»˜è®¤æ ·å¼ï¼Œè¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œç„¶åä½ æ ¹æ®è®¾è®¡å›¾ä¸­æµ‹é‡çš„å°ºå¯¸æ¥ç»™boxç¼–å†™æ ·å¼ï¼Œå®½200px;é«˜200px;èƒŒæ™¯çº¢è‰²ã€‚çœ‹ä¸Šå»å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œäºæ˜¯ä½ å¼€å¼€å¿ƒå¿ƒçš„æ‰“å¼€æµè§ˆå™¨ï¼Œåˆ·æ–°é¡µé¢ï¼Œä½ çš„è„¸è‰²æ²‰äº†ä¸‹æ¥ï¼Œå› ä¸ºä½ çœ‹åˆ°äº†ä½ ä¸æƒ³çœ‹åˆ°çš„ç»“æœï¼Œå¦‚ä¸‹å›¾ï¼Œä¸Šå›¾ä¸ºè®¾è®¡ç¨¿çš„æ ·å¼ï¼Œä¸‹å›¾ä¸ºä½ ç¼–å†™çš„htmlæ–‡ä»¶çš„æ ·å¼ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923psd2.jpg\" alt=\"psdåŸç¨¿\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923ht1.jpg\" alt=\"htmlé¡µé¢\"></p>\n<p>é€šè¿‡å¯¹æ¯”psdåŸç¨¿å’Œæˆ‘ä»¬ç›®å‰æ‰€å†™çš„htmlé¡µé¢ï¼Œå¯ä»¥çœ‹å‡ºæˆ‘ä»¬htmlé¡µé¢çš„é—®é¢˜ï¼Œçº¢è‰²æ–¹å—ä¸æ•´ä¸ªé¡µé¢çš„æ¯”ä¾‹å’ŒpsdåŸç¨¿ä¸ä¸€æ ·å•Šï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬æ˜æ˜æ˜¯æŒ‰ç…§åŸç¨¿æµ‹é‡çš„å°ºå¯¸å†™å‡ºæ¥çš„ä»£ç å´å’ŒpsdåŸç¨¿æ˜¾ç¤ºçš„æ•ˆæœä¸ä¸€æ ·å‘¢ï¼Ÿåˆ«å¿˜äº†ï¼ŒpsdåŸç¨¿çš„å°ºå¯¸æ˜¯æŒ‰ç…§è®¾å¤‡åƒç´ è®¾è®¡çš„ï¼Œç”±äºæˆ‘ä»¬æ‰€ç”¨çš„è®¾è®¡ç¨¿æ˜¯åŸºäºiPhone6è®¾è®¡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾è®¡ç¨¿çš„å°ºå¯¸å°±æ˜¯iPhone6çš„è®¾å¤‡åƒç´ çš„å°ºå¯¸ï¼Œä¹Ÿå°±æ˜¯750pxï¼Œè€Œæˆ‘ä»¬CSSä¸­çš„æ ·å¼æ˜¯åŸºäºå¸ƒå±€è§†å£çš„å°ºå¯¸è®¡ç®—çš„ï¼Œç”±äºæˆ‘ä»¬htmlé¡µé¢ä¸­ç”±äºå†™å…¥äº†ä»¥ä¸‹metaæ ‡ç­¾ï¼š</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; /&gt;\n</code></pre><p>åœ¨ä¸Šä¸€ç¯‡æˆ‘ä»¬è®²è¿‡ï¼Œ<em> width=device-width </em> è¿™æ®µä»£ç æ˜¯è®©å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºç†æƒ³è§†å£ã€‚<br>æ ¹æ®å…¬å¼(ç¼©æ”¾æ¯”ä¾‹ä¸º1)ï¼š<br><b>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£åƒç´ ä¸ªæ•°ï¼ˆdevice-widthï¼‰</b><br>å› ä¸ºiPhone6çš„DPRï¼ˆè®¾å¤‡åƒç´ æ¯”ï¼‰ä¸º2ï¼Œè®¾å¤‡åƒç´ ä¸º750ï¼Œæ‰€ä»¥iPhone6çš„ç†æƒ³è§†å£å°ºå¯¸ä¸º375pxã€‚æ‰€ä»¥ä¸Šé¢ä»£ç æœ€ç»ˆå¯¼è‡´çš„æ˜¯ï¼šä½¿æˆ‘ä»¬å¸ƒå±€è§†å£çš„å®½åº¦å˜æˆäº†375pxã€‚è€Œæˆ‘ä»¬CSSä¸­ç¼–å†™çš„æ ·å¼å°ºå¯¸åˆæ˜¯åŸºäºå¸ƒå±€è§†å£è®¡ç®—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—åˆ°çš„é¡µé¢çœ‹ä¸Šå»æ¯”ä¾‹ä¸å¯¹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923ht2.jpg\" alt=\"å¸ƒå±€è§†å£å®½åº¦å’Œå…ƒç´ å®½åº¦\"><br><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923psd3.jpg\" alt=\"psdè®¾è®¡ç¨¿å®½åº¦å’Œå…ƒç´ å®½åº¦\"></p>\n<p>å¦‚ä¸Šé¢ä¸¤å¹…å›¾ç‰‡ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œpsdç¨¿çš„æ€»å®½æ˜¯750pxï¼Œå…ƒç´ å®½200pxï¼Œè€Œæˆ‘ä»¬çœŸæ­£åšé¡µé¢çš„æ—¶å€™ï¼Œå¸ƒå±€è§†å£çš„å®½åº¦æ˜¯375pxï¼Œæ­£å¥½æ˜¯è®¾è®¡ç¨¿çš„ä¸€åŠã€‚æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨è®¾è®¡ç¨¿ä¸Šé¢æµ‹é‡æ‰€å¾—çš„åƒç´ å°ºå¯¸ï¼Œæ ¹æ®æ¯”ä¾‹ï¼Œæˆ‘ä»¬åº”è¯¥å°†æµ‹é‡æ‰€å¾—çš„å°ºå¯¸é™¤ä»¥2ï¼Œæ‰æ˜¯æˆ‘ä»¬CSSä¸­å¸ƒå±€æ‰€ç”¨çš„å°ºå¯¸ï¼Œæ®æ­¤ï¼Œæˆ‘ä»¬å°†200pxé™¤ä»¥2å¾—åˆ°100pxï¼Œäºæ˜¯æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œå°†çº¢è‰²æ–¹å—çš„å®½é«˜éƒ½è®¾ä¸º100pxï¼Œåˆ·æ–°é¡µé¢ï¼Œçœ‹çœ‹æ¯”ä¾‹æ˜¯ä¸æ˜¯å’Œè®¾è®¡å›¾ä¸€æ ·äº†ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå¦‚ä¸‹å›¾ä¸ºä¿®æ”¹åçš„htmlé¡µé¢ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923ht3.jpg\" alt=\"ä¿®æ”¹åçš„htmlé¡µé¢\"></p>\n<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†æ­£ç¡®çš„æ•°æ®ï¼Œå¹¶ä¸”æ­£ç¡®çš„å†™å‡ºäº†é¡µé¢ï¼Œä½ å¾ˆé«˜å…´ï¼Œå¯æ˜¯é—®é¢˜æ¥äº†ï¼Œå¦‚æœä½ åœ¨åšé¡µé¢çš„æ—¶å€™ï¼Œæµ‹é‡äº†ä¸€ä¸ªå…ƒç´ çš„å®½åº¦ï¼Œå®½åº¦æ˜¯ä¸€ä¸ªå¥‡æ•°ï¼Œæ¯”å¦‚111åƒç´ ï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¹‹å‰çš„åšæ³•æ˜¯ï¼Œå°†æµ‹é‡åˆ°çš„æ•°æ®é™¤ä»¥2ï¼Œå¾—åˆ°æˆ‘ä»¬çœŸæ­£ä½¿ç”¨çš„æ•°æ®ï¼Œæ‰€ä»¥111é™¤ä»¥2ç­‰äº55.5pxï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œè®¡ç®—æœº(æ‰‹æœº)æ²¡åŠæ³•æ˜¾ç¤ºä¸åˆ°ä¸€ä¸ªåƒç´ çš„åƒç´ å€¼ï¼Œè®¡ç®—æœº(æ‰‹æœº)ä¼šè‡ªåŠ¨å°†å…¶è¡¥å…¨ä¸ºä¸€ä¸ªåƒç´ è¿›è¡Œæ˜¾ç¤ºï¼Œæ‰€ä»¥æœ€ç»ˆä¼šå°†å…ƒç´ æ˜¾ç¤ºä¸º56åƒç´ ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚<br>å¦å¤–ï¼Œæˆ‘ä»¬çš„è®¾è®¡ç¨¿æ˜¯åŸºäºiphone6è®¾è®¡çš„ï¼Œæˆ‘ä»¬è°ƒè¯•é¡µé¢ä¹Ÿæ˜¯åœ¨iphone6ä¸‹è°ƒè¯•çš„ã€‚åˆå› ä¸ºiphone6çš„è®¾å¤‡åƒç´ æ¯”è¯•2ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰èƒ½ç”±è®¾è®¡ç¨¿æµ‹é‡çš„æ•°æ®é™¤ä»¥2åç›´æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨iphone6ä¸‹æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä½ è¦çŸ¥é“ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰æ‰‹æœºçš„è®¾å¤‡åƒç´ æ¯”éƒ½æ˜¯2ï¼Œæœ‰çš„æ‰‹æœºçš„è®¾å¤‡åƒç´ æ¯”è¯•2.5æˆ–è€…3ã€‚å¹¶ä¸”ä¸åŒè®¾å¤‡çš„è®¾å¤‡åƒç´ åˆä¸åŒï¼Œè¿™æ ·å°±å¯¼è‡´ç†æƒ³è§†å£çš„å°ºå¯¸ä¸åŒï¼Œä»è€Œå¯¼è‡´å¸ƒå±€è§†å£çš„å°ºå¯¸ä¸åŒï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥æ ¹æ®iphone6çš„è®¾è®¡ç¨¿å°ºå¯¸é™¤ä»¥2å¾—åˆ°çš„å°ºå¯¸ç”¨æ¥ç¼–å†™CSSæ˜¯ä¸èƒ½åœ¨æ‰€æœ‰è®¾å¤‡ä¸‹å®Œå¥½æ˜¾ç¤ºçš„ã€‚</p>\n<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦æ¢ä¸€ä¸ªæ–¹æ³•ã€‚<br>äºæ˜¯æˆ‘ä»¬æƒ³åˆ°ï¼šå¦‚æœæˆ‘ä»¬èƒ½å°†å¸ƒå±€è§†å£çš„å°ºå¯¸è®¾ç½®ä¸ºå’Œè®¾å¤‡åƒç´ å°ºå¯¸ç›¸ç­‰çš„è¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¿è¯äº†è®¾è®¡å›¾ä¸é¡µé¢çš„1:1å…³ç³»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨psdä¸­æµ‹é‡çš„å°ºå¯¸äº†ï¼Œç„¶ååœ¨å…¶ä»–å°ºå¯¸çš„æ‰‹æœºä¸­ï¼Œæˆ‘ä»¬è¿›è¡Œç­‰æ¯”ç¼©æ”¾å°±okäº†ã€‚é‚£ä¹ˆå¦‚ä½•æ‰èƒ½è®©å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºè®¾å¤‡åƒç´ å°ºå¯¸å‘¢ï¼Ÿ</p>\n<p>æˆ‘ä»¬æ³¨æ„åˆ°metaæ ‡ç­¾ä¸­çš„ width=device-width è¿™æ®µä»£ç ï¼Œé¦–å…ˆä½ è¦æ˜ç™½è¿™å¥è¯çš„æ„æ€ï¼Œå‰é¢è®²è¿‡ï¼Œè¿™å¥è¯æœ€ç»ˆå¯¼è‡´çš„ç»“æœæ˜¯ï¼šè®©å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºç†æƒ³è§†å£çš„å°ºå¯¸ã€‚è¨€å¤–ä¹‹æ„å°±æ˜¯,åœ¨ä»£ç  width=device-width ä¸­ï¼š</p>\n<p>widthï¼šæ˜¯å¸ƒå±€è§†å£çš„width<br>device-widthï¼šæ˜¯ç†æƒ³è§†å£çš„å®½åº¦</p>\n<p>æ ¹æ®å…¬å¼(ç¼©æ”¾æ¯”ä¾‹ä¸º1)ï¼š</p>\n<p><b>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£åƒç´ ä¸ªæ•°ï¼ˆdevice-widthï¼‰</b></p>\n<p>ä»¥iphone6ä¸ºä¾‹ï¼š<br>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ï¼š2<br>è®¾å¤‡åƒç´ ä¸ªæ•°ï¼š750<br>æ‰€ä»¥åœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1çš„æƒ…å†µä¸‹ï¼Œiphone6ç†æƒ³è§†å£çš„åƒç´ ä¸ªæ•°ä¸º 750 / 2 = 375ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºiphone6æ¥è®² device-widthçš„å€¼ä¸º375</p>\n<p>æ‰€ä»¥æˆ‘ä»¬é€šè¿‡width=device-widthè¿™å¥è¯ï¼Œé—´æ¥çš„å°†å¸ƒå±€è§†å£çš„å°ºå¯¸è®¾ä¸ºäº†375ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬èƒ½æ”¹å˜ç†æƒ³è§†å£çš„å°ºå¯¸ï¼Œä¹Ÿå°±æ”¹å˜äº†å¸ƒå±€é€‚å£çš„å°ºå¯¸ï¼Œå¦‚ä½•æ”¹å˜ç†æƒ³è§†å£çš„å°ºå¯¸å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°ç¼©æ”¾äº†ï¼Œä¸Šä¸€ç¯‡æˆ‘ä»¬è®²åˆ°è¿‡ç¼©æ”¾ï¼Œç¼©æ”¾æ˜¯ç¼©å°æˆ–æ”¾å¤§CSSåƒç´ çš„è¿‡ç¨‹ï¼Œä»¥iphone6ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬ç¼©æ”¾æ¯”ä¾‹ä¸º1:1çš„æ—¶å€™ï¼Œç”±äºiphone6çš„è®¾å¤‡åƒç´ æ¯”ä¸º2ï¼Œæ‰€ä»¥iphone6çš„è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»çœ‹èµ·æ¥å°±åƒä¸‹å›¾è¿™æ ·ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015092319a.jpg\" alt=\"iphone6ä¸‹ç¼©æ”¾æ¯”ä¾‹ä¸º1æ—¶ï¼Œè®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»\"></p>\n<p>ä¸€ä¸ªCSSåƒç´ å®½åº¦ç­‰äºä¸¤ä¸ªè®¾å¤‡åƒç´ å®½åº¦ï¼Œæ‰€ä»¥750pxçš„è®¾å¤‡å®½åº¦çš„å¸ƒå±€è§†å£ä¸º357CSSåƒç´ ã€‚è¿™æ˜¯åœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1çš„æƒ…å†µä¸‹ï¼Œæ—¢ç„¶ç¼©æ”¾å¯ä»¥æ”¾å¤§æˆ–ç¼©å°CSSåƒç´ ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬å°†CSSåƒç´ çš„å®½åº¦ç¼©æ”¾è‡³ä¸è®¾å¤‡åƒç´ å®½åº¦ç›¸ç­‰äº†ï¼Œé‚£ä¹ˆ750ä¸ªè®¾å¤‡åƒç´ ä¹Ÿå°±èƒ½æ˜¾ç¤º750ä¸ªCSSåƒç´ ï¼Œç¼©æ”¾åçš„è®¾å¤‡åƒç´ ä¸CSSåƒç´ çœ‹èµ·æ¥åº”è¯¥åƒä¸‹å›¾è¿™æ ·ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923px1.jpg\" alt=\"iphone6ç¼©å°0.5å€åï¼Œè®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»\"></p>\n<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬çš„ç¼©æ”¾å€æ•°æ˜¯å¤šå°‘å‘¢ï¼Ÿåœ¨ç¼©æ”¾æ¯”ä¾‹ä¸º1çš„æ—¶å€™ï¼Œä¸€ä¸ªCSSåƒç´ çš„å®½åº¦ = ä¸¤ä¸ªè®¾å¤‡åƒç´ çš„å®½åº¦ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®© ä¸€ä¸ªCSSåƒç´ çš„å®½åº¦ = ä¸€ä¸ªè®¾å¤‡åƒç´ çš„å®½åº¦ï¼Œæˆ‘ä»¬å°±è¦å°†CSSåƒç´ ç¼©å°ä¸ºåŸæ¥çš„0.5å€ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬ç¼©å°çš„å€æ•° = è®¾å¤‡åƒç´ æ¯”çš„å€’æ•°ã€‚<br>äºæ˜¯ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„HTMLä»£ç (ä¿®æ”¹äº†metaæ ‡ç­¾)ï¼š</p>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=0.5,maximum-scale=0.5,user-scalable=no&quot; /&gt;\n    &lt;style&gt;\n    body{\n        margin: 0;\n        padding: 0;\n    }\n    .box{\n        width: 200px;\n        height: 200px;\n        background: red;\n    }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬ç»™çº¢è‰²æ–¹å—ä½¿ç”¨çš„CSSå°ºå¯¸ç›´æ¥ä½¿ç”¨çš„æ˜¯psdç¨¿ä¸­æµ‹é‡çš„å°ºå¯¸ï¼Œæˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼Œæ€ä¹ˆæ ·ï¼Ÿæ»¡æ„å§ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015092316b.jpg\" alt=\"ä¿®æ”¹åçš„æ–°é¡µé¢æ­£ç¡®è¾“å‡º\"></p>\n<p>ä½†æ˜¯æˆ‘ä»¬è¿™æ˜¯æœ‰ä¸ªå‰æçš„ï¼Œé‚£å°±æ˜¯ç¼©æ”¾0.5å€åªé€‚ç”¨äºè®¾å¤‡åƒç´ æ¯”ä¸º2çš„è®¾å¤‡ï¼ˆå› ä¸ºç¼©æ”¾å€¼ = 1 / è®¾å¤‡åƒç´ æ¯”ï¼‰ã€‚æ‰€ä»¥ï¼Œä¸ºäº†é€‚åº”æ‰€æœ‰çš„è®¾å¤‡ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨javascriptä»£ç åŠ¨æ€ç”Ÿæˆmetaæ ‡ç­¾ï¼š</p>\n<pre><code>var scale = 1 / window.devicePixelRatio;\ndocument.querySelector(&#39;meta[name=&quot;viewport&quot;]&#39;).setAttribute(&#39;content&#39;,&#39;width=device-width,initial-scale=&#39; + scale + &#39;, maximum-scale=&#39; + scale + &#39;, minimum-scale=&#39; + scale + &#39;, user-scalable=no&#39;);\n</code></pre><p>å…¶ä¸­ <b>window.devicePixelRatio</b> çš„å€¼ä¸ºè®¾å¤‡åƒç´ æ¯”ã€‚<br>äºæ˜¯æˆ‘ä»¬çš„ä»£ç å˜æˆäº†è¿™æ ·ï¼š</p>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;&quot; /&gt;\n    &lt;style&gt;\n    body{\n        margin: 0;\n        padding: 0;\n    }\n    .box{\n        width: 200px;\n        height: 200px;\n        background: red;\n    }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;\n\n    &lt;script&gt;\n    var scale = 1 / window.devicePixelRatio;\n    document.querySelector(&#39;meta[name=&quot;viewport&quot;]&#39;).setAttribute(&#39;content&#39;,&#39;width=device-width,initial-scale=&#39; + scale + &#39;, maximum-scale=&#39; + scale + &#39;, minimum-scale=&#39; + scale + &#39;, user-scalable=no&#39;);\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ä¸Šé¢çš„ä»£ç æœ€ç»ˆèƒ½ä¿è¯ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æ— è®ºä»»ä½•è®¾å¤‡ï¼Œå¸ƒå±€è§†å£çš„å®½åº¦æ€»æ˜¯ç­‰äºè®¾å¤‡åƒç´ ã€‚<br>è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡å›¾ä¸­æµ‹é‡ä¸º200pxçš„å®½åº¦å°±èƒ½ç›´æ¥ç”¨åœ¨CSSä¸­äº†ï¼Œå¹¶ä¸”åœ¨iphone6ä¸­æ˜¾ç¤ºå®Œå¥½ï¼Œå¯æ˜¯åˆ«å¿˜äº†ï¼Œæˆ‘ä»¬çš„è®¾è®¡å›¾å°±æ˜¯æ ¹æ®iphone6è®¾è®¡çš„ï¼Œå¦‚æœæ¢åšå…¶ä»–è®¾å¤‡ï¼Œè¿˜èƒ½æ˜¾ç¤ºå®Œå¥½ä¹ˆï¼Ÿæˆ‘ä»¬ä¸å¦¨è¯•ä¸€ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼Œæ˜¯ä¸Šé¢ä»£ç åœ¨iphone5å’Œiphone6ä¸‹çš„å¯¹æ¯”ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923p5.jpg\" alt=\"iphone5ä¸­çš„æ•ˆæœ\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20150923p6.jpg\" alt=\"iphone6ä¸­çš„æ•ˆæœ\"></p>\n<p>æˆ‘ä»¬å‘ç°ï¼Œæ— è®ºæ˜¯äº”è¿˜æ˜¯6ï¼Œå³ä½¿è®¾å¤‡åƒç´ å˜äº†ï¼Œå³å±å¹•å®½åº¦å˜äº†ï¼Œå¯æ˜¯çº¢è‰²æ–¹å—çš„å®½åº¦å¹¶æ²¡æœ‰å˜ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„ç°è±¡ï¼Œå› ä¸ºè¿™æ ·é¡µé¢çš„å…ƒç´ å°±ä¸æˆæ¯”ä¾‹äº†ï¼Œä¼šå½±å“åˆ°å¸ƒå±€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•è®©æˆ‘ä»¬é¡µé¢çš„å…ƒç´ è·Ÿç€è®¾å¤‡å˜åŒ–è€Œç­‰æ¯”ç¼©æ”¾ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦è§£å†³çš„ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°remçš„çŸ¥è¯†ç‚¹äº†ã€‚</p>\n<h2 id=\"rem\"><a href=\"#rem\" class=\"headerlink\" title=\"rem\"></a>rem</h2><p>ä»€ä¹ˆæ˜¯remï¼Ÿ<br>remæ˜¯ç›¸å¯¹å°ºå¯¸å•ä½ï¼Œç›¸å¯¹äºhtmlæ ‡ç­¾å­—ä½“å¤§å°çš„å•ä½ï¼Œä¸¾ä¸ªä¾‹å­ï¼š<br>å¦‚æœhtmlçš„font-size = 18px;<br>é‚£ä¹ˆ1rem = 18pxï¼Œéœ€è¦è®°ä½çš„æ˜¯ï¼Œremæ˜¯åŸºäºhtmlæ ‡ç­¾çš„å­—ä½“å¤§å°çš„ã€‚</p>\n<p>ç›¸ä¿¡ä½ å·²ç»æ˜ç™½äº†ï¼Œå¯¹æ²¡é”™ï¼Œæˆ‘ä»¬è¦æŠŠä¹‹å‰ç”¨pxåšå…ƒç´ å°ºå¯¸çš„å•ä½æ¢æˆremï¼Œæ‰€ä»¥ï¼Œç°åœ¨çš„é—®é¢˜å°±æ˜¯å¦‚æœè½¬æ¢ï¼Œå› ä¸ºremæ˜¯æ ¹æ®htmlæ ‡ç­¾çš„font-sizeå€¼ç¡®å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦ç¡®å®šhtmlæ ‡ç­¾çš„font-sizeå€¼å°±è¡Œäº†ï¼Œæˆ‘ä»¬é¦–å…ˆè‡ªå·±å®šä¸€ä¸ªæ ‡å‡†ï¼Œå°±æ˜¯è®©font-sizeçš„å€¼ç­‰äºè®¾å¤‡åƒç´ çš„ååˆ†ä¹‹ä¸€ï¼Œå³ï¼š</p>\n<pre><code>document.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + &#39;px&#39;;\n</code></pre><p>ä»¥iphone6ä¸ºä¾‹ï¼Œhtmlæ ‡ç­¾çš„font-sizeçš„å€¼å°±ç­‰äº 750 / 10 = 75px äº†ï¼Œè¿™æ · 1rem = 75pxï¼Œæ‰€ä»¥çº¢è‰²æ–¹å—200pxæ¢ç®—ä¸ºremå•ä½å°±æ˜¯ 200 / 75 = 2.6666667remã€‚<br>é‚£ä¹ˆåœ¨iphone5ä¸­å‘¢ï¼Ÿå› ä¸ºiphone5çš„è®¾å¤‡åƒç´ ä¸º640ï¼Œæ‰€ä»¥iphoneçš„htmlæ ‡ç­¾çš„font-sizeçš„å€¼ä¸º 640 / 10 = 64pxï¼Œæ‰€ä»¥ 1rem = 64pxï¼Œæ‰€ä»¥åœ¨iphone6ä¸­æ˜¾ç¤ºä¸º200pxçš„å…ƒç´ åœ¨iphone5ä¸­ä¼šæ˜¾ç¤ºä¸º 2.6666667 * 64 åƒç´ ï¼Œè¿™æ ·ï¼Œåœ¨ä¸åŒè®¾å¤‡ä¸­å°±å®ç°äº†è®©å…ƒç´ ç­‰æ¯”ç¼©æ”¾ä»è€Œä¸å½±å“å¸ƒå±€ã€‚è€Œä¸Šé¢çš„æ–¹æ³•ä¹Ÿæ˜¯æ‰‹æœºæ·˜å®æ‰€ç”¨çš„æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œç°åœ¨ä½ åªéœ€è¦å°†ä½ æµ‹é‡çš„å°ºå¯¸æ•°æ®é™¤ä»¥75å°±è½¬æ¢æˆäº†remå•ä½ï¼Œå¦‚æœæ˜¯iPhone5å°±è¦é™¤ä»¥64ï¼Œå³é™¤ä»¥ä½ åŠ¨æ€è®¾ç½®çš„font-sizeçš„å€¼ã€‚</p>\n<p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåšé¡µé¢çš„æ—¶å€™æ–‡å­—å­—ä½“å¤§å°ä¸è¦ç”¨remæ¢ç®—ï¼Œè¿˜æ˜¯ä½¿ç”¨pxåšå•ä½ã€‚åé¢ä¼šè®²åˆ°ã€‚</p>\n<p>è®©æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬ç°åœ¨äº†è§£çš„æ–¹æ³•ï¼š</p>\n<p>1ã€å°†å¸ƒå±€è§†å£å¤§å°è®¾ä¸ºè®¾å¤‡åƒç´ å°ºå¯¸ï¼š</p>\n<pre><code>var scale = 1 / window.devicePixelRatio;\ndocument.querySelector(&#39;meta[name=&quot;viewport&quot;]&#39;).setAttribute(&#39;content&#39;,&#39;width=device-width,initial-scale=&#39; + scale + &#39;, maximum-scale=&#39; + scale + &#39;, minimum-scale=&#39; + scale + &#39;, user-scalable=no&#39;);\n</code></pre><p>2ã€åŠ¨æ€è®¾ç½®htmlå­—ä½“å¤§å°ï¼š</p>\n<pre><code>document.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + &#39;px&#39;;\n</code></pre><p>3ã€å°†è®¾è®¡å›¾ä¸­çš„å°ºå¯¸æ¢ç®—æˆrem</p>\n<p>å…ƒç´ çš„remå°ºå¯¸ = å…ƒç´ çš„psdç¨¿æµ‹é‡çš„åƒç´ å°ºå¯¸ / åŠ¨æ€è®¾ç½®çš„htmlæ ‡ç­¾çš„font-sizeå€¼</p>\n<p>è¯´äº†ä¸€å¤§å †ï¼Œå…¶å®æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„htmlè«æ¿å°±å¯ä»¥å†™é¡µé¢äº†ï¼Œå”¯ä¸€éœ€è¦ä½ åšçš„å°±æ˜¯è®¡ç®—å…ƒç´ çš„remå°ºå¯¸ï¼Œæ‰€ä»¥å³ä½¿ä½ æ²¡çœ‹æ‡‚ä¸Šé¢çš„è®²è¿°ä¹Ÿä¸é‡è¦ï¼Œä½ åªè¦å°†è«æ¿æ‹¿è¿‡å»ç”¨å°±å¥½äº†ï¼š</p>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n\n\n    &lt;script&gt;\n    var scale = 1 / window.devicePixelRatio;\n    document.querySelector(&#39;meta[name=&quot;viewport&quot;]&#39;).setAttribute(&#39;content&#39;,&#39;width=device-width,initial-scale=&#39; + scale + &#39;, maximum-scale=&#39; + scale + &#39;, minimum-scale=&#39; + scale + &#39;, user-scalable=no&#39;);\n\n    document.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + &#39;px&#39;;\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ä¿®æ”¹æˆ‘ä»¬çš„ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;&quot; /&gt;\n    &lt;style&gt;\n    body{\n        margin: 0;\n        padding: 0;\n    }\n    .box{\n        width: 2.66666667rem;\n        height: 2.66666667rem;\n        background: red;\n    }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;\n\n    &lt;script&gt;\n    var scale = 1 / window.devicePixelRatio;\n    document.querySelector(&#39;meta[name=&quot;viewport&quot;]&#39;).setAttribute(&#39;content&#39;,&#39;width=device-width,initial-scale=&#39; + scale + &#39;, maximum-scale=&#39; + scale + &#39;, minimum-scale=&#39; + scale + &#39;, user-scalable=no&#39;);\n\n    document.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + &#39;px&#39;;\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>æ‰“å¼€æµè§ˆå™¨ï¼Œåˆ†åˆ«åœ¨iPhone6å’ŒiPhone5ä¸‹æŸ¥çœ‹é¡µé¢ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œç°åœ¨çš„å…ƒç´ å¯ä»¥æ ¹æ®æ‰‹æœºçš„å°ºå¯¸ä¸åŒè€Œç­‰æ¯”ç¼©æ”¾äº†ã€‚</p>\n<p>ä¸Šé¢çš„æ–¹æ³•æ˜¯æ‰‹æœºæ·˜å®çš„æ–¹æ³•ï¼Œæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯è½¬åŒ–remå•ä½çš„æ—¶å€™ï¼Œéœ€è¦é™¤ä»¥font-sizeçš„å€¼ï¼Œæ·˜å®ç”¨çš„æ˜¯iPhone6çš„è®¾è®¡å›¾ï¼Œæ‰€ä»¥æ·˜å®è½¬æ¢å°ºå¯¸çš„æ—¶å€™è¦é™¤ä»¥75ï¼Œè¿™ä¸ªå€¼å¯ä¸å¥½ç®—ï¼Œæ‰€ä»¥è¿˜è¦å€Ÿç”¨è®¡ç®—å™¨æ¥å®Œæˆï¼Œå½±å“å¼€å‘æ•ˆç‡ï¼Œå¦å¤–ï¼Œåœ¨è½¬è¿˜remå•ä½æ—¶é‡åˆ°é™¤ä¸å°½çš„æ•°æ—¶æˆ‘ä»¬ä¼šé‡‡ç”¨å¾ˆé•¿çš„è¿‘ä¼¼å€¼æ¯”å¦‚ä¸Šé¢çš„2.6666667remï¼Œè¿™æ ·å¯èƒ½ä¼šä½¿é¡µé¢å…ƒç´ çš„å°ºå¯¸æœ‰åå·®ã€‚</p>\n<p>é™¤äº†ä¸Šé¢çš„æ–¹æ³•æ¯”è¾ƒé€šç”¨ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬æ¥é‡æ–°æ€è€ƒä¸€ä¸‹ï¼š</p>\n<p>ä¸Šé¢åšé¡µé¢çš„æ€è·¯æ˜¯ï¼šæ‹¿åˆ°è®¾è®¡å›¾ï¼Œæ¯”å¦‚iPhone6çš„è®¾è®¡å›¾ï¼Œæˆ‘ä»¬å°±å°†æµè§ˆå™¨è®¾ç½®åˆ°iPhone6è®¾å¤‡è°ƒè¯•ï¼Œç„¶åä½¿ç”¨jsåŠ¨æ€ä¿®æ”¹metaæ ‡ç­¾ï¼Œä½¿å¸ƒå±€è§†å£çš„å°ºå¯¸ç­‰äºè®¾è®¡å›¾å°ºå¯¸ï¼Œä¹Ÿå°±æ˜¯è®¾å¤‡åƒç´ å°ºå¯¸ï¼Œç„¶åä½¿ç”¨remæ›¿ä»£pxåšå°ºå¯¸ä»£ä¸ºï¼Œä½¿å¾—é¡µé¢åœ¨ä¸åŒè®¾å¤‡ä¸­ç­‰æ¯”ç¼©æ”¾ã€‚</p>\n<p>ç°åœ¨å‡å¦‚æˆ‘ä»¬ä¸å»ä¿®æ”¹metaæ ‡ç­¾ï¼Œæ­£å¸¸ä½¿ç”¨ç¼©æ”¾ä¸º1:1çš„metaæ ‡ç­¾ï¼Œå³ä½¿ç”¨å¦‚ä¸‹metaæ ‡ç­¾ï¼š</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no&quot; /&gt;\n</code></pre><p>è¿˜ä»¥iPhone6ä¸ºä¾‹ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç¼©æ”¾ä¸º1:1çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®å…¬å¼ï¼š</p>\n<p><b>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ = è®¾å¤‡åƒç´ ä¸ªæ•° / ç†æƒ³è§†å£åƒç´ ä¸ªæ•°ï¼ˆdevice-widthï¼‰</b></p>\n<p>æˆ‘ä»¬çŸ¥é“ï¼š<br>è®¾å¤‡åƒç´  = è®¾è®¡å›¾å°ºå¯¸ = 750px<br>å¸ƒå±€è§†å£ = 375px</p>\n<p>å‡è®¾æˆ‘ä»¬ä»¥iPhone6è®¾è®¡å›¾å°ºå¯¸ä¸ºæ ‡å‡†ï¼Œåœ¨è®¾è®¡å›¾çš„å°ºå¯¸ä¸‹è®¾ç½®ä¸€ä¸ªfont-sizeå€¼ä¸º100pxã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼š750pxå®½çš„é¡µé¢ï¼Œæˆ‘ä»¬è®¾ç½®100pxçš„font-sizeå€¼ï¼Œé‚£ä¹ˆé¡µé¢çš„å®½åº¦æ¢ç®—ä¸ºremå°±ç­‰äº 750 / 100 = 7.5remã€‚</p>\n<p>æˆ‘ä»¬å°±ä»¥é¡µé¢æ€»å®½ä¸º7.5remä¸ºæ ‡å‡†ï¼Œé‚£ä¹ˆåœ¨å¸ƒå±€è§†å£ä¸­ï¼Œä¹Ÿå°±æ˜¯é¡µé¢æ€»å®½ä¸º375pxä¸‹ï¼Œfont-sizeå€¼åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿå¾ˆç®€å•ï¼š</p>\n<p>font-size = 375 / 7.5 = 50px</p>\n<p>é‚£ä¹ˆåœ¨iPhone5ä¸‹å‘¢ï¼Ÿå› ä¸ºiPhone5çš„å¸ƒå±€è§†å£å®½ä¸º320pxï¼Œæ‰€ä»¥å¦‚æœé¡µé¢æ€»å®½ä»¥7.5ä¸ºæ ‡å‡†ï¼Œé‚£ä¹ˆiPhone5ä¸‹æˆ‘ä»¬è®¾ç½®çš„font-sizeå€¼åº”è¯¥æ˜¯ï¼š</p>\n<p>font-size = 320 / 7.5 =42.666666667px</p>\n<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡åœ¨ä»€ä¹ˆè®¾å¤‡ä¸‹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æŠŠé¡µé¢çš„æ€»å®½åº¦è®¾ä¸ºä¸€ä¸ªä»¥remä¸ºå•ä½çš„å®šå€¼ï¼Œæ¯”å¦‚æœ¬ä¾‹å°±æ˜¯7.5remï¼Œåªä¸è¿‡ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å¸ƒå±€è§†å£çš„å°ºå¯¸åŠ¨æ€è®¾ç½®font-sizeçš„å€¼ï¼š</p>\n<pre><code>document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + &#39;px&#39;;\n</code></pre><p>è¿™æ ·ï¼Œæ— è®ºåœ¨ä»€ä¹ˆè®¾å¤‡ä¸‹ï¼Œæˆ‘ä»¬é¡µé¢çš„æ€»å®½åº¦éƒ½æ˜¯7.5remï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥åœ¨è®¾è®¡å›¾ä¸Šæµ‹é‡pxå•ä½çš„å°ºå¯¸ï¼Œç„¶åé™¤ä»¥100è½¬æ¢æˆremå•ä½åç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚ï¼Œåœ¨iPhone6è®¾è®¡å›¾ä¸­æµ‹é‡ä¸€ä¸ªå…ƒç´ çš„å°ºå¯¸ä¸º200pxï¼Œé‚£ä¹ˆè½¬æ¢æˆremå•ä½å°±æ˜¯ 200 / 100 = 2remï¼Œå› ä¸ºåœ¨ä¸åŒè®¾å¤‡ä¸‹æˆ‘ä»¬åŠ¨æ€è®¾ç½®äº†htmlæ ‡ç­¾çš„font-sizeå€¼ï¼Œæ‰€ä»¥ä¸åŒè®¾å¤‡ä¸‹ç›¸åŒçš„remå€¼å¯¹åº”çš„åƒç´ å€¼æ˜¯ä¸åŒçš„ï¼Œè¿™æ ·å°±å®ç°äº†åœ¨ä¸åŒè®¾å¤‡ä¸‹ç­‰æ¯”ç¼©æ”¾ã€‚æˆ‘ä»¬ä¿®æ”¹htmlä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no&quot; /&gt;\n    &lt;style&gt;\n    body{\n        margin: 0;\n        padding: 0;\n    }\n    .box{\n        width: 2rem;\n        height: 2rem;\n        background: red;\n    }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;\n\n    &lt;script&gt;\n    document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + &#39;px&#39;;\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>åˆ·æ–°é¡µé¢ï¼Œåˆ†åˆ«åœ¨iPhone6å’ŒiPhone5ä¸‹è°ƒè¯•æŸ¥çœ‹ç»“æœï¼Œä¼šå‘ç°å¦‚ä¸‹å›¾ï¼Œä½¿æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œç­‰æ¯”ç¼©æ”¾ï¼Œokï¼Œå®é™…ä¸Šè¿™ç§åšæ³•ä¹Ÿæ˜¯ç½‘æ˜“çš„åšæ³•ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015092320a.jpg\" alt=\"iPhone6ä¸‹æ˜¾ç¤ºæ•ˆæœ\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015092320b.jpg\" alt=\"iPhone5ä¸‹æ˜¾ç¤ºæ•ˆæœ\"></p>\n<p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ç¬¬äºŒç§åšæ³•ï¼š</p>\n<p>1ã€æ‹¿åˆ°è®¾è®¡å›¾ï¼Œè®¡ç®—å‡ºé¡µé¢çš„æ€»å®½ï¼Œä¸ºäº†å¥½è®¡ç®—ï¼Œå–100pxçš„font-sizeï¼Œå¦‚æœè®¾è®¡å›¾æ˜¯iPhone6çš„é‚£ä¹ˆè®¡ç®—å‡ºçš„å°±æ˜¯7.5remï¼Œå¦‚æœé¡µé¢æ˜¯iPhone5çš„é‚£ä¹ˆè®¡ç®—å‡ºçš„ç»“æœå°±æ˜¯6.4remã€‚<br>2ã€åŠ¨æ€è®¾ç½®htmlæ ‡ç­¾çš„font-sizeå€¼ï¼š</p>\n<pre><code>  document.documentElement.style.fontSize = document.documentElement.clientWidth / ä»¥remä¸ºå•ä½çš„é¡µé¢æ€»å®½ + &#39;px&#39;;\n</code></pre><p>  å¦‚iPhone6çš„è®¾è®¡å›¾å°±æ˜¯ï¼š</p>\n<pre><code>  document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + &#39;px&#39;;\n</code></pre><p>  iPhone5çš„è®¾è®¡å›¾å°±æ˜¯ï¼š</p>\n<pre><code>  document.documentElement.style.fontSize = document.documentElement.clientWidth / 6.4 + &#39;px&#39;;\n</code></pre><p>3ã€åšé¡µé¢æ˜¯æµ‹é‡è®¾è®¡å›¾çš„pxå°ºå¯¸é™¤ä»¥100å¾—åˆ°remå°ºå¯¸ã€‚<br>4ã€å’Œæ·˜å®çš„åšæ³•ä¸€æ ·ï¼Œæ–‡å­—å­—ä½“å¤§å°ä¸è¦ä½¿ç”¨remæ¢ç®—ã€‚</p>\n<p>ä¸‹é¢æ˜¯è¿™ç§åšæ³•çš„htmlè«æ¿ï¼š</p>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n\n\n    &lt;script&gt;\n    document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + &#39;px&#39;;\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ç”±äºè¿™ç§åšæ³•åœ¨å¼€å‘ä¸­æ¢ç®—remå•ä½çš„æ—¶å€™åªéœ€è¦å°†æµ‹é‡çš„å°ºå¯¸é™¤ä»¥100å³å¯ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨è®¡ç®—å™¨æˆ‘ä»¬å°±å¯ä»¥å¾ˆå¿«çš„å®Œæˆè®¡ç®—è½¬æ¢ï¼Œæ‰€ä»¥è¿™ä¹Ÿä¼šæå‡å¼€å‘æ•ˆç‡ï¼Œæœ¬äººä¹Ÿæ¯”è¾ƒé’çè¿™ç§åšæ³•ã€‚</p>\n<p>å¦å¤–ï¼Œæ— è®ºæ˜¯ç¬¬ä¸€ç§åšæ³•è¿˜æ˜¯ç¬¬äºŒç§åšæ³•ï¼Œæˆ‘ä»¬éƒ½æåˆ°äº†ï¼Œæ–‡å­—å­—ä½“å¤§å°æ˜¯ä¸è¦æ¢ç®—æˆremåšå•ä½çš„ï¼Œè€Œæ˜¯ä½¿ç”¨åª’ä½“æŸ¥è¯¢æ¥è¿›è¡ŒåŠ¨æ€è®¾ç½®ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±æ˜¯ç½‘æ˜“çš„ä»£ç ï¼š</p>\n<p>ä»£ç ç‰‡æ®µä¸€ï¼š</p>\n<pre><code>@media screen and (max-width: 321px) {\n    body {\n        font-size:16px\n    }\n}\n\n@media screen and (min-width: 321px) and (max-width:400px) {\n    body {\n        font-size:17px\n    }\n}\n\n@media screen and (min-width: 400px) {\n    body {\n        font-size:19px\n    }\n}\n</code></pre><p>ä»£ç ç‰‡æ®µäºŒï¼š</p>\n<pre><code>@media screen and (max-width: 321px) {\n    header,footer {\n        font-size:16px\n    }\n}\n\n@media screen and (min-width: 321px) and (max-width:400px) {\n    header,footer {\n        font-size:17px\n    }\n}\n\n@media screen and (min-width: 400px) {\n    header,footer {\n        font-size:19px\n    }\n}\n</code></pre><p>æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ç½‘æ˜“åœ¨æ–‡å­—å­—ä½“å¤§å°ä¸Šçš„åšæ³•ï¼Œåœ¨åª’ä½“æŸ¥è¯¢é˜¶æ®µï¼Œåˆ†ä¸ºä¸‰ä¸ªç­‰çº§åˆ†åˆ«æ˜¯ï¼š<br>321pxä»¥ä¸‹<br>321px - 400pxä¹‹é—´<br>400pxä»¥ä¸Š</p>\n<p>å…·ä½“æ–‡å­—å¤§å°è¦å¤šå°‘ä¸ªåƒç´ è¿™ä¸ªä»¥è®¾è®¡å›¾ä¸ºå‡†ï¼Œä½†æ˜¯è¿™ä¸‰ä¸ªç­‰çº§ä¹‹é—´æ˜¯æœ‰è§„å¾‹çš„ï¼Œä»”ç»†è§‚å¯Ÿå‘ç°ï¼Œ321pxä»¥ä¸‹çš„å±å¹•å­—ä½“å¤§å°æ¯”321px - 400pxä¹‹é—´çš„å±å¹•å­—ä½“å¤§å°è¦å°ä¸€ä¸ªåƒç´ ï¼Œè€Œ321px - 400pxä¹‹é—´çš„å±å¹•å­—ä½“å¤§å°è¦æ¯”400ä»¥ä¸Šå±å¹•å­—ä½“å¤§å°è¦å°2ä¸ªåƒç´ ã€‚ä¾ç…§è¿™ä¸ªè§„å¾‹ï¼Œæˆ‘ä»¬æ ¹æ®è®¾è®¡å›¾æ‰€åœ¨çš„åƒç´ åŒºæ®µå…ˆå†™å¥½è¯¥åŒºæ®µçš„å­—ä½“å¤§å°ï¼Œç„¶ååˆ†åˆ«å†™å‡ºå¦å¤–ä¸¤ä¸ªåŒºæ®µçš„å­—ä½“å¤§å°åª’ä½“æŸ¥è¯¢ä»£ç å°±å¯ä»¥äº†ã€‚</p>\n<p>ç»ˆäºç å®Œäº†è¿™ç¬¬äºŒç¯‡æ–‡ç« ï¼Œæ— åŠ›å†å¤šè¯´å…¶ä»–çš„è¯ï¼Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œæœ‰äº›ç»†èŠ‚åœ°æ–¹æ²¡æœ‰ç»†è¯´ï¼Œå¦å¤–ä½œè€…æ°´å¹³æœ‰é™ï¼Œå¸Œæœ›å¤§å®¶æŒ‡æ­£å…±åŒè¿›æ­¥ï¼Œè°¢è°¢ã€‚</p>"},{"title":"åŸºäºgulp requirejs rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºç³»åˆ—æ–‡ç« (ä¸€)","date":"2015-11-12T02:40:43.000Z","_content":"\n> å‰ç«¯çš„è‡ªåŠ¨åŒ–ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯è®©ä¸€ä»¶äº‹èƒ½å¤Ÿåœ¨æˆ‘ä»¬çš„ä¸€æ¡å‘½ä»¤ä¸‹å°±èƒ½å¤Ÿè‡ªåŠ¨å»æ‰§è¡Œå¹¶å¾ˆå¥½çš„å®Œæˆï¼Œè€Œä¸å†éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»é‡å¤è¿™äº›å·¥ä½œï¼Œè¿™ä¸ªç³»åˆ—æ–‡ç« ä¸ä»…ä»…å»å•ä¸€çš„è®²è¿°æ¯ä¸€å—çŸ¥è¯†ç‚¹æˆ–è€…å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œå› ä¸ºç½‘ä¸Šçš„æ–‡ç« å·²ç»å¾ˆå¤šäº†ï¼Œè€Œæ˜¯åœ¨æ¸…æ™°çš„ç»™è¯»è€…è®²è¿°è¿™äº›â€œå·¥å…·â€ç”¨æ³•çš„åŒæ—¶ï¼ŒçœŸæ­£çš„æŠŠä»–ä»¬ç»„åˆåœ¨ä¸€èµ·å¹¶ä¸”æ­å»ºä¸€ä¸ªé¡¹ç›®æ¡†æ¶é›å½¢æ¥ï¼Œæœ¬ç³»åˆ—æ–‡ç« æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹æœ‰ï¼š\n\n* jsçš„æ¨¡å—åŒ–ï¼ˆé‡ç‚¹åœ¨AMDè§„èŒƒï¼‰\n* requirejsçš„ä»‹ç»åŠä½¿ç”¨\n* rjsçš„ä½¿ç”¨\n* æ–°ä¸€ä»£æ„å»ºå·¥å…·gulpçš„ä»‹ç»åŠä½¿ç”¨\n* ç»„åˆä»¥ä¸Šå·¥å…·æ­å»ºå‰ç«¯è‡ªåŠ¨åŒ–å¼€å‘æ¡†æ¶\n\n<!-- more -->\n\n# å†™åœ¨å‰é¢ #\n\nå…¶å®ä¸Šé¢çš„æ¯ä¸€ä¸ªçŸ¥è¯†ç‚¹éƒ½å¯ä»¥å•ç‹¬æˆæ–‡ï¼Œä½†æ˜¯æˆ‘åˆä¸å–œæ¬¢æŠŠæœ¬åº”è¯¥æ˜¯â€œä¸€ä»¶äº‹â€çš„ä¸œè¥¿æ‹†åˆ†çš„ä¸ƒé›¶å…«ç¢ï¼Œç½‘ä¸Šå¾ˆå¤šæ–‡ç« éƒ½æ˜¯å…¶ä¸­æŸä¸€ä¸ªçŸ¥è¯†ç‚¹çš„æ€»ç»“ã€ä»‹ç»æˆ–è€…ä½¿ç”¨ï¼Œè¿™æ ·çš„å¼Šç«¯å°±æ˜¯ï¼Œè¯»è€…èƒ½å¤Ÿçœ‹çš„æ˜ç™½ä½ åœ¨è¯´ä»€ä¹ˆï¼Œä¹ŸçŸ¥é“è¿™äº›å·¥å…·æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œä½†æ˜¯ååä¸ä¼šæŠŠä»–ä»¬æ”¾åœ¨ä¸€å—ç»„åˆå»ä½¿ç”¨ï¼Œè€Œä¸”è¯»è€…å¯èƒ½åœ¨æœç´¢å¼•æ“ä¸­æœç´¢çŸ¥è¯†ç‚¹çš„æ—¶å€™éƒ½æ˜¯å•ç‹¬å»æœç´¢ï¼Œè¿™æ ·å­¦ä¹ ä¸åŒçš„çŸ¥è¯†ç‚¹éœ€è¦é˜…è¯»çš„æ–‡ç« å¹¶ä¸æ˜¯åŒä¸€ä¸ªäººå¾—æ–‡ç« ï¼Œè¿™æ ·åœ¨æ€è·¯ä¸Šå’Œä¾‹å­ä»£ç ä¸Šå¾ˆéš¾è”ç³»åˆ°ä¸€å—ï¼Œå› ä¸ºæœ¬äººå½“æ—¶å¤§æ¦‚å°±ç»å†è¿‡è¿™æ ·çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥è¶‹äºè¿™æ ·çš„åŸå› ï¼Œæˆ‘å†³å®šæ¥å†™æ­¤ç³»åˆ—æ–‡ç« ï¼Œç”±äºä½œè€…æ°´å¹³æœ‰é™ï¼Œå¹¶ä¸”å¤šæ˜¯æŠ±ç€ç§¯ç´¯å­¦ä¹ å’Œåˆ†äº«çš„æ€åº¦ï¼Œæ‰€ä»¥ç‰¹åˆ«å¸Œæœ›å¤§å®¶èƒ½å¤Ÿç»™ä¸æŒ‡æ­£å’Œå»ºè®®ã€‚\n\nå¥½å•¦ï¼Œæ¥ä¸‹æ¥å¼€å§‹æˆ‘çš„ç³»åˆ—æ–‡ç« ç¬¬ä¸€ç¯‡ã€‚\n\n# ä¸€ã€jsæ¨¡å—åŒ–ä¸AMD #\n\n### å…ƒæŸäººæ—¶æœŸï¼Œæˆ‘å›½æœ€æ—©çš„äººç±»ï¼Œè·ä»Šçº¦170ä¸‡å¹´ ###\n\nç®€ä»‹ï¼šjavascriptè¿™é—¨è¯­è¨€å¾ˆçµæ´»ï¼Œä½†æ˜¯åœ¨æœ€åˆé˜¶æ®µæ¨¡å—åŒ–å¹¶æ²¡æœ‰å—åˆ°é‡è§†ï¼Œæ˜¯åæ¥nodejsçš„å‡ºç°ï¼Œä½¿å¾—jsåœ¨æµè§ˆå™¨ç«¯çš„æ¨¡å—åŒ–è¿…é€Ÿå´›èµ·ï¼Œé‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–ï¼Œæˆ‘ä»¬ä»å¤´æ¥ã€‚\n\nåœ¨å…ƒæŸäººæ—¶æœŸï¼Œäººç±»å†™jsä»£ç éƒ½æ˜¯è¿™æ ·çš„ï¼Œåœ¨headæ ‡ç­¾ä¸­æˆ–è€…bodyç»“æŸæ ‡ç­¾çš„ä¸Šé¢é€šè¿‡scriptæ ‡ç­¾å¼•å…¥ä¸€ä¸ªjsè„šæœ¬æ–‡ä»¶ï¼š\n\n```\n\t<script src=\"a.js\"></script>\n```\n\näºæ˜¯æ‰€æœ‰çš„ä»£ç éƒ½å†™åœ¨äº† a.js è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œåæ¥ï¼Œä»£ç è¶Šæ¥è¶Šå¤šï¼Œå¦‚æœå…¨éƒ¨å†™åœ¨a.jsæ–‡ä»¶ä¸­ä¼šä½¿å¾—ä»£ç éå¸¸ä¸å¥½ç»´æŠ¤ï¼Œè‡³äºä¸ºä»€ä¹ˆä¸å¥½ç»´æŠ¤ï¼ˆè‡ªå·±è„‘è¡¥ï¼‰ï¼Œä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹2000è¡Œçš„jsæ–‡ä»¶ï¼Œç„¶åä½ å¿˜è®°ä¸€ä¸ªå‡½æ•°çš„åç§°ï¼Œäºæ˜¯åœ¨å†™ä»£ç çš„æ—¶å€™ä¸Šä¸‹æ‹‰æ¥æ‹‰å»ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚è¿™æ ·ï¼Œäººä»¬è‡ªç„¶çš„å°±æƒ³åˆ°åˆ†å‡ºå‡ ä¸ªjsæ–‡ä»¶ï¼Œäºæ˜¯ï¼Œèªæ˜çš„å…ƒæŸäººå°±æŠŠä¸€äº›ç±»ä¼¼äºè·å–å…ƒç´ ï¼Œæ·»åŠ classç­‰ç­‰ç­‰ç­‰åŠŸèƒ½å°è£…æˆä¸€ä¸ªä¸ªçš„å‡½æ•°ï¼Œå•ç‹¬çš„å†™åœ¨ä¸€ä¸ªjsæ–‡ä»¶é‡Œï¼Œå–åå«åšutil.jsï¼Œæ„æ€æ˜¯å·¥å…·æ–‡ä»¶çš„æ„æ€ï¼Œä»¥åéœ€è¦ç”¨åˆ°è¿™äº›å‡½æ•°çš„è¯å°±ç›´æ¥å¼•å…¥è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ï¼š\n\n```\n\t<script src=\"util.js\"></script>\n\t<script src=\"a.js\"></script>\n```\n\nåæ¥å…ƒæŸäººå‘ç°ï¼Œå·¥å…·æ–‡ä»¶util.jsçš„å†…å®¹ä¹Ÿå˜çš„è¶Šæ¥è¶Šå¤šï¼Œäºæ˜¯åˆæŠŠä¸åŒåŠŸèƒ½çš„å‡½æ•°åŒºåˆ†å¼€æ¥ï¼Œå†™åœ¨ä¸åŒçš„æ–‡ä»¶é‡Œï¼Œæ¯”å¦‚æŠŠajaxæ“ä½œå‡½æ•°éƒ½åˆ†è£…åœ¨äº†ajax.jsæ–‡ä»¶ä¸­ï¼ŒæŠŠæ“ä½œDOMå…ƒç´ çš„å‡½æ•°å°è£…åœ¨äº†dom.jsæ–‡ä»¶ä¸­ç­‰ç­‰ï¼Œäºæ˜¯ï¼Œhtmlé¡µé¢å¼•å…¥çš„jsæ–‡ä»¶çœ‹ä¸Šå»å°±æˆäº†è¿™æ ·ï¼š\n\n```\n\t<script src=\"ajax.js\"></script>\n\t<script src=\"dom.js\"></script>\n\t...\n\t...\n\t<script src=\"a.js\"></script>\n```\n\né‚£ä¹ˆè¿™æ ·åšçš„åå¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š\n1 htmlæ–‡ä»¶ä¸­å¼•å…¥äº†è¿‡å¤šçš„jsè„šæœ¬æ–‡ä»¶ï¼Œè¿™ä¸ä¼šä½¿å¾—æµè§ˆå™¨å‘å‡ºå¾ˆå¤šæ¬¡httpè¯·æ±‚ï¼Œè¿™æ˜¯å½±å“é¡µé¢æ€§èƒ½çš„æœ€ç³Ÿç³•å› ç´ ã€‚\n2 æ‰€æœ‰å˜é‡åŠå‡½æ•°éƒ½æ˜¯å…¨å±€å˜é‡ï¼Œææ˜“å†²çªï¼Œæ¯”å¦‚a.jsä¸­æœ‰ä¸ªå˜é‡objï¼Œb.jsä¸­ä¹Ÿæœ‰ä¸ªå˜é‡objã€‚\n3 ä¾èµ–é¡ºåºä¸æ˜“ç®¡ç†ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸Šé¢çš„ä»£ç ï¼Œdom.jsä¾èµ–ajax.jsä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆä½ å¿…é¡»å…ˆå¼•å…¥ajax.jsæ–‡ä»¶å†å¼•å…¥dom.jsæ–‡ä»¶ã€‚\n\n### åŒ—äº¬äººæ—¶æœŸï¼Œè·ä»Šçº¦20 ~ 70ä¸‡å¹´ ###\n\næ­¤åŒ—äº¬äººéå½¼åŒ—äº¬äººï¼Œæœ‰ç‚¹å†å²å¸¸è¯†çš„éƒ½åº”è¯¥æ˜ç™½ = =ã€‚\nåŒ—äº¬äººå¾ˆèªæ˜çš„ï¼Œä»–ä»¬å‘ç°äº†ä¸Šé¢çš„é—®é¢˜åï¼Œæå‡ºï¼Œå¦‚æœæ¯ä¸€ä¸ªæ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼ˆå˜é‡å’Œå‡½æ•°ï¼‰ï¼Œéƒ½ç”¨ä¸€ä¸ªå¯¹è±¡å­˜å‚¨ï¼Œè¿™æ ·å°±èƒ½æ‰“æ‰“å‡å°å†²çªçš„å¯èƒ½ï¼Œå‡å¦‚æˆ‘ä»¬å°†dom.jsä¸­çš„å‡½æ•°éƒ½æ”¾åœ¨ä¸€ä¸ªå¯¹è±¡ä¸‹é¢ï¼Œäºæ˜¯dom.jså°±å˜æˆäº†è¿™æ ·ï¼š\n\n```\nvar Dom = {\n\t// è·å–å…ƒç´ \n\tgetEle : function(){...},\n\t// å…‹éš†å…ƒç´ \n\tcloneEle : function(){...},\t\n\t// å…¶ä»–domæ–¹æ³•\n\t...\n};\n```\n\nåŒ—äº¬äººçš„ç¡®ç¼“è§£äº†å˜é‡å†²çªçš„é—®é¢˜ï¼Œæ³¨æ„ï¼Œæˆ‘ç”¨çš„æ˜¯â€œç¼“è§£â€å¹¶ä¸æ˜¯â€œè§£å†³â€ï¼Œå› ä¸ºè¿™æ ·åšåªèƒ½å‡å°‘å†²çªï¼Œä¸èƒ½ä¿è¯ä¸€å®šä¸ä¼šå†²çªï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨è¿™äº›å‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šåƒè¿™æ ·ï¼š\n\n```\nDom.getEle();\n```\n\nå¦‚æœå±‚çº§æ·±å¾—è¯è¿˜å¯èƒ½ç±»ä¼¼äºè¿™æ ·ï¼š\n\n```\nDom.XXX.getEle();\n```\n\nè¿™å¹¶ä¸æ˜¯è¯»è€…åœ¨æœæ’°ï¼Œåœ¨ä¸ºäº†æš´éœ²ç¼ºç‚¹è€Œä¹±å†™çš„ï¼Œæ¥çœ‹çœ‹Yahoo! çš„ YUI2 é¡¹ç›®ï¼Œä¸‹é¢æ˜¯ä¸€æ®µçœŸå®çš„ä»£ç ï¼š\n\n```\nif (org.cometd.Utils.isString(response)) {\n  return org.cometd.JSON.fromJSON(response);\n}\n```\n\nè¿™æ ·æ˜¯å¾ˆè®©äººæ¼ç«çš„ï¼Œæˆ‘ä¸ºäº†ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¦è®°ä½ä¸€å¤§ä¸²çš„è°ƒç”¨å…³ç³»ï¼Œå†™èµ·æ¥ä¹Ÿç‰¹åˆ«éº»çƒ¦ï¼Œå‡å¦‚æˆ‘è®°ä¸ä½è°ƒç”¨å…³ç³»æˆ‘è¿˜è¦å»æŸ¥è¯¢ï¼ŒåŠå…¶å½±å“å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”è¿™ç§åšæ³•ä¹Ÿä»…ä»…æ˜¯ç¼“è§£äº†å‘½åå†²çªçš„é—®é¢˜å¹¶æ²¡æœ‰çœŸæ­£è§£å†³ï¼ŒåŒ…æ‹¬æ–‡ä»¶ä¾èµ–å…³ç³»çš„å¤„ç†ï¼Œå’Œé¡µé¢éœ€è¦å‘é€çš„httpè¯·æ±‚æ•°é‡ç­‰é—®é¢˜ä¾æ—§æ²¡æœ‰å¾—åˆ°å¤„ç†ã€‚\n\nåæ¥çš„ å±±é¡¶æ´äººã€åŠå¡äººã€æ²³å§†æ¸¡äººé€šé€šæ²¡æœ‰è§£å†³è¿™ç±»é—®é¢˜ï¼ˆè°çŸ¥é“æœ‰æ²¡æœ‰è§£å†³å‘¢~ ~ï¼Œä¹Ÿæ˜¯é†‰äº†ï¼‰\n\nä½†æ˜¯å†è‹¦éš¾çš„é—®é¢˜éƒ½éš¾ä¸å€’æˆ‘ä»¬â€œæ–°äººç±»â€çš„æ™ºæ…§ï¼Œä»€ä¹ˆå«æ–°äººç±»ï¼Ÿ æ–°äººç±» == â€˜è´¿èµ‚ï¼Œèµ°å…³ç³»ï¼Œä¹±ç”¨èŒæƒï¼Œå…¬å“ç§ç”¨......â€™ ï¼Œå’³å’³ï¼Œå›åˆ°æ­£é¢˜ï¼Œé‚£ä¹ˆæ–°äººç±»åˆ°åº•æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿåœ¨ç»å†äº†å±±é¡¶æ´äººã€åŠå¡äººã€æ²³å§†æ¸¡äººä¹‹åï¼Œäººä»¬å·²ç»æ·±æ·±çš„è¢«è¿™ç§é—®é¢˜æ‰€ç—›æ¶ï¼Œè®¤è¯†åˆ°äº†æ¨¡å—åŒ–çš„å¿…è¦æ€§ï¼Œæ‰€ä»¥è¯´ï¼Œæ¨¡å—åŒ–ç›®çš„åœ¨äºè§£å†³ä»¥ä¸‹é—®é¢˜ï¼š\n\n* æ–‡ä»¶çš„ä¾èµ–å…³ç³»\n* é¿å…æ±¡æŸ“å…¨å±€ç¯å¢ƒï¼Œå¯¼è‡´å‘½åå†²çª\n* ä½¿ç¼–ç è¿‡ç¨‹å˜å¾—ä¼˜é›…\n* æ€§èƒ½å¾—åˆ°æå‡\n\nä½†æ˜¯äººä»¬çš„ç¡®æ˜¯è®¤è¯†åˆ°äº†æ¨¡å—åŒ–çš„é‡è¦è¡Œï¼Œå¯çœŸæ­£æ™®åŠè¿˜è¦å½’åŠŸäºnodejsçš„å‡ºç°ï¼Œnodejsæ˜¯æœåŠ¡å™¨ç«¯javascriptçš„å®ç°ï¼Œå¦‚æœä½ ä½¿ç”¨nodejsä½ ä¼šå‘ç°å¯ä»¥ä½¿ç”¨require()æ–¹æ³•åŠ è½½æ¨¡å—ï¼Œä½¿ç”¨define()å®šä¹‰æ¨¡å—ç­‰ï¼Œå®é™…ä¸Šnodejséµå¾ªçš„æ˜¯Commonjsè§„èŒƒï¼Œä¹‹æ‰€ä»¥è¦æœ‰è§„èŒƒæ˜¯ä¸ºäº†ç»Ÿä¸€ç¼–ç çš„æ–¹å¼ï¼Œå› ä¸ºjsæ˜¯ä¸€é—¨å¾ˆçµæ´»çš„è¯­è¨€ï¼Œå®ç°æ¨¡å—å˜æˆçš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œä½ å†™ä¸€ç§æˆ‘å†™ä¸€ç§è¿™å²‚ä¸æ˜¯å°±ä¹±å¥—äº†ï¼Œç›®å‰åœ¨javascriptä¸­æœ‰ä¸‰ç§è§„èŒƒï¼Œåˆ†åˆ«æ˜¯Commonjsè§„èŒƒã€AMDè§„èŒƒã€CMDè§„èŒƒã€‚ä¸‰è€…ä¹‹é—´çš„åŒºåˆ«è¯´å®è¯ï¼Œçš„ç¡®æœ‰ï¼Œä½†æ˜¯ä¸å¤§ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è¦ä»‹ç»çš„å°±æ˜¯AMDè§„èŒƒï¼Œå¹¶ä¸”requirejsæ˜¯AMDè§„èŒƒçš„ä¸€ä¸ªå®ç°ã€‚\n\n### AMDè§„èŒƒ ###\n\nAMD(Asynchronous Module Definition) è¯‘ä¸ºâ€œå¼‚æ­¥æ¨¡å—å®šä¹‰â€ï¼Œä¸ºä»€ä¹ˆæ˜¯å¼‚æ­¥æ¨¡å—å®šä¹‰å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œnodejsä¸­ä½¿ç”¨requireå»åŠ è½½æ¨¡å—çš„æ—¶å€™ï¼Œæ¨¡å—å¤šåœ¨å†…å­˜æˆ–ç£ç›˜ä¸­ï¼Œè€Œä¸”åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œéœ€è¦é€šè¿‡ç½‘ç»œè¯·æ±‚å»åŠ è½½æ¨¡å—ï¼Œè¿™ä¸ä»å†…å­˜æˆ–ç£ç›˜ä¸­åŠ è½½æ¨¡å—æ ¹æœ¬å°±ä¸åœ¨ä¸€ä¸ªé‡çº§ä¸Šï¼Œå‡å¦‚æˆ‘ä»¬åŒæ­¥åŠ è½½æ¨¡å—çš„è¯ï¼Œæµè§ˆå™¨ä¼šåœæ»åœ¨è¿™é‡Œå‡ºç°å‡æ­»çš„çŠ¶æ€ï¼Œè¦ç­‰åˆ°æ‰€æœ‰æ¨¡å—å…¨éƒ¨åŠ è½½å®Œä¹‹åæ‰ä¼šç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªé€‚ç”¨äºæµè§ˆå™¨ç«¯å®ç°æ¨¡å—åŒ–çš„è§„èŒƒï¼Œè€Œè¿™ä¹Ÿæ˜¯AMDè§„èŒƒçš„æˆå› ã€‚\n\nä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ï¼ŒAMDè§„èŒƒä¸­æˆ‘ä»¬å¦‚ä½•å»å†™ä»£ç ï¼Œå…¶ä¸­æˆ‘ä»¬åªéœ€è¦å…³æ³¨å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œå’Œå¦‚ä½•ä½¿ç”¨æ¨¡å—ã€‚\n\n#### å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å— ####\n\nAMDè§„èŒƒè§„å®šä½¿ç”¨define()æ–¹æ³•å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œdefineæ–¹æ³•å¦‚ä¸‹ï¼š\n\ndefine(id?, dependencies?, factory);\n\nå‚æ•°è¯´æ˜ï¼š\n\tid {String} æ¨¡å—æ ‡è¯†ï¼Œå¯ä»¥çœç•¥ã€‚\n\tdependencies {Array} æ‰€ä¾èµ–çš„æ¨¡å—æ•°ç»„ï¼Œå¯ä»¥çœç•¥ã€‚\n\tfactory {Object} | {Function} æ¨¡å—çš„å®ç°ã€‚\n\nçœ‹ä¸‹é¢çš„ä»£ç ï¼Œå®šä¹‰äº†ä¸€ä¸ªæ¨¡å—ï¼Œè¯¥æ¨¡å—æ²¡æœ‰ä¾èµ–ä»»ä½•å…¶ä»–æ¨¡å—ï¼Œä¹Ÿæ²¡æœ‰åå­—ï¼ˆå³æ²¡æœ‰idè¿™ä¸ªå‚æ•°ï¼‰ï¼š\n\n```\ndefine(function(){\n\treturn {\n\t\ta : '1',\n\t\tb : '2'\n\t}\n});\n```\n\nåƒä¸Šé¢çš„ä»£ç ï¼Œå¦‚æœåªæ˜¯ç®€å•çš„è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š\n\n```\ndefine({\n\ta : '1',\n\tb : '2'\n});\n```\n\nä¸Šé¢å®šä¹‰çš„æ¨¡å—è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼ŒAMDè§„å®šï¼Œè¿”å›çš„å¯¹è±¡ï¼Œå³ä¸ºè¯¥æ¨¡å—å¯¹è±¡ã€‚ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š\n\n```\ndefine(function(){\n\tvar m = function(){\n\n\t};\n\n\treturn m;\n\n});\n```\n\nå¦‚æœä½ ç¼–å†™çš„æ¨¡å—éœ€è¦ä½¿ç”¨å…¶ä»–æ¨¡å—ä¸­çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦ä¾èµ–é‚£ä¸ªæ¨¡å—ï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±å¯ä»¥ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸ºä½ ä¾èµ–æ¨¡å—çš„åç§°ï¼š\n\n```\ndefine(['A', 'B'], function(A, B){\n\t\n\tA.add();\n\n\treturn {\n\t\ta : '1',\n\t\tb : '2'\n\t}\n});\n```\n\nä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªæ¨¡å—ï¼Œè¯¥æ¨¡å—ä¾èµ–ä¸¤ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«æ˜¯æ¨¡å—Aå’Œæ¨¡å—Bï¼Œæ³¨æ„æˆ‘ä»¬åœ¨å‡½æ•°ä¸­ä¼ é€’äº†ä¸ä¾èµ–æ•°ç»„ä¸­ä¸€ä¸€å¯¹åº”çš„å½¢å¼å‚æ•°ï¼Œä»¥ä¾¿åœ¨æ¨¡å—ä¸­ä½¿ç”¨ä¾èµ–çš„æ¨¡å—ï¼Œè€Œæˆ‘ä»¬ä¹Ÿåœ¨æ¨¡å—ä¸­è°ƒç”¨äº†æ¨¡å—Açš„add()æ–¹æ³•ã€‚\n\nä¸Šé¢æˆ‘ä»¬å®šä¹‰çš„æ¨¡å—éƒ½æ²¡æœ‰ä¼ é€’idè¿™ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¼ é€’è¿™ä¸ªå‚æ•°ï¼Œè¿™æ ·å°±åƒæˆ‘ä»¬ç»™æ¨¡å—å»äº†ä¸€ä¸ªåå­—ï¼Œæ‰€ä»¥å¸¦æœ‰idè¿™ä¸ªå‚æ•°çš„æ¨¡å—å«åšå…·åæ¨¡å—ï¼š\n\n```\ndefine('index', ['A'], function(A){\n\t...\n});\n```\n\nä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šæ‰‹åŠ¨çš„å»å†™ï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨ä½¿ç”¨æ„å»ºå·¥å…·ä¼˜åŒ–é¡¹ç›®çš„æ—¶å€™ï¼Œå¦‚æˆ‘ä»¬ä½¿ç”¨gulpé…åˆrjsåˆå¹¶æ¨¡å—çš„æ—¶å€™ï¼Œè‡ªåŠ¨å»å¸®æˆ‘ä»¬å¡«å……æ¨¡å—idã€‚\n\næœ€åï¼Œä»‹ç»ä¸€ä¸‹AMDè§„èŒƒå…¼å®¹Commonjsè§„èŒƒçš„ä¸€ä¸ªæ¨¡å—å®šä¹‰å†™æ³•ï¼š\n\n```\ndefine(function(require, exports, module){\n\tvar m = require('m1');\n\n\texports.A = function(){\n\t\treturn m.add();\n\t}\n});\n```\n\næˆ‘ä»¬åœ¨å‡½æ•°ä¸­æ˜¾ç¤ºçš„ä¼ é€’äº†ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯requireï¼Œexportså’Œmoduleï¼Œè¿™ä¸‰ä¸ªå˜é‡æ˜¯å…¨å±€çš„ï¼Œå…¶ä¸­requireæ˜¯ç”¨æ¥åŠ è½½å…¶ä»–æ¨¡å—çš„ï¼Œexportsæ˜¯ç”¨æ¥å¯¼å‡ºæ¨¡å—æ¥å£çš„ï¼Œmoduleæ˜¯æ¨¡å—å¯¹è±¡æœ¬èº«ã€‚\n\næ¥ä¸‹æ¥æˆ‘ä»¬è®²è§£ä¸€ä¸‹requrieï¼Œrequireæ˜¯ç”¨æ¥å¼•ç”¨æ¨¡å—çš„ï¼ŒåŠåŠ è½½æ¨¡å—ï¼Œä¸Šé¢æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†require()æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼ é€’äº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŠæ¨¡å—çš„åç§°ï¼Œå»åŠ è½½æ¨¡å—ï¼Œå®é™…ä¸Šæˆ‘ä»¬è¿˜å¯ä»¥ä¼ é€’ä¾èµ–æ•°ç»„ï¼Œå¦‚ä¸‹ï¼š\n\n```\nrequire(['A', 'B'], function(A, B){\n\t// ...\n});\n```\n\nè¿™æ ·ï¼Œjså¤§æ¦‚çš„æ¨¡å—åŒ–å†å²å’ŒAMDè§„èŒƒæˆ‘ä»¬å°±ç®€å•ä»‹ç»å®Œäº†ï¼Œç”±äºæˆ‘ä»¬è¿™ç¯‡æ–‡ç« ç»¼åˆæ€§æ¯”è¾ƒå¼ºï¼Œå¦‚æœæƒ³æ·±å…¥äº†è§£AMDï¼Œç‚¹å‡»è¿™é‡Œï¼š[AMD](https://github.com/amdjs/amdjs-api/blob/master/require.md)\n\nè¿™ç¯‡æ–‡ç« å°±åˆ°è¿™é‡Œï¼Œä¸‹ä¸€ç« æˆ‘ä»¬ç»“åˆå®é™…çš„æ¡ˆä¾‹ä»”ç»†è®¨è®ºä¸€ä¸‹requirejsï¼Œå¹¶ç›¸ä¿¡æˆ‘ï¼Œä¸€å®šæœ‰ä½ èƒ½å­¦åˆ°çš„ä¸œè¥¿ã€‚\n\nå¦‚æœå¯¹ä½ æœ‰ç”¨ï¼Œæ„Ÿè°¢æåŠ©ã€‚\n\n![æ”¯ä»˜å®äºŒç»´ç ](http://7xlolm.com1.z0.glb.clouddn.com/201511122.pic.jpg)\n","source":"_posts/2015/11/12/åŸºäºgulp-requirejs-rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»º.md","raw":"title: åŸºäºgulp requirejs rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºç³»åˆ—æ–‡ç« (ä¸€)\ndate: 2015-11-12 10:40:43\ncategories:\n- WebFrontEnd\ntags:\n- js\n- è‡ªåŠ¨åŒ–\n- gulp\n- requirejs\n- rjs\n- æ„å»º\n---\n\n> å‰ç«¯çš„è‡ªåŠ¨åŒ–ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯è®©ä¸€ä»¶äº‹èƒ½å¤Ÿåœ¨æˆ‘ä»¬çš„ä¸€æ¡å‘½ä»¤ä¸‹å°±èƒ½å¤Ÿè‡ªåŠ¨å»æ‰§è¡Œå¹¶å¾ˆå¥½çš„å®Œæˆï¼Œè€Œä¸å†éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»é‡å¤è¿™äº›å·¥ä½œï¼Œè¿™ä¸ªç³»åˆ—æ–‡ç« ä¸ä»…ä»…å»å•ä¸€çš„è®²è¿°æ¯ä¸€å—çŸ¥è¯†ç‚¹æˆ–è€…å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œå› ä¸ºç½‘ä¸Šçš„æ–‡ç« å·²ç»å¾ˆå¤šäº†ï¼Œè€Œæ˜¯åœ¨æ¸…æ™°çš„ç»™è¯»è€…è®²è¿°è¿™äº›â€œå·¥å…·â€ç”¨æ³•çš„åŒæ—¶ï¼ŒçœŸæ­£çš„æŠŠä»–ä»¬ç»„åˆåœ¨ä¸€èµ·å¹¶ä¸”æ­å»ºä¸€ä¸ªé¡¹ç›®æ¡†æ¶é›å½¢æ¥ï¼Œæœ¬ç³»åˆ—æ–‡ç« æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹æœ‰ï¼š\n\n* jsçš„æ¨¡å—åŒ–ï¼ˆé‡ç‚¹åœ¨AMDè§„èŒƒï¼‰\n* requirejsçš„ä»‹ç»åŠä½¿ç”¨\n* rjsçš„ä½¿ç”¨\n* æ–°ä¸€ä»£æ„å»ºå·¥å…·gulpçš„ä»‹ç»åŠä½¿ç”¨\n* ç»„åˆä»¥ä¸Šå·¥å…·æ­å»ºå‰ç«¯è‡ªåŠ¨åŒ–å¼€å‘æ¡†æ¶\n\n<!-- more -->\n\n# å†™åœ¨å‰é¢ #\n\nå…¶å®ä¸Šé¢çš„æ¯ä¸€ä¸ªçŸ¥è¯†ç‚¹éƒ½å¯ä»¥å•ç‹¬æˆæ–‡ï¼Œä½†æ˜¯æˆ‘åˆä¸å–œæ¬¢æŠŠæœ¬åº”è¯¥æ˜¯â€œä¸€ä»¶äº‹â€çš„ä¸œè¥¿æ‹†åˆ†çš„ä¸ƒé›¶å…«ç¢ï¼Œç½‘ä¸Šå¾ˆå¤šæ–‡ç« éƒ½æ˜¯å…¶ä¸­æŸä¸€ä¸ªçŸ¥è¯†ç‚¹çš„æ€»ç»“ã€ä»‹ç»æˆ–è€…ä½¿ç”¨ï¼Œè¿™æ ·çš„å¼Šç«¯å°±æ˜¯ï¼Œè¯»è€…èƒ½å¤Ÿçœ‹çš„æ˜ç™½ä½ åœ¨è¯´ä»€ä¹ˆï¼Œä¹ŸçŸ¥é“è¿™äº›å·¥å…·æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œä½†æ˜¯ååä¸ä¼šæŠŠä»–ä»¬æ”¾åœ¨ä¸€å—ç»„åˆå»ä½¿ç”¨ï¼Œè€Œä¸”è¯»è€…å¯èƒ½åœ¨æœç´¢å¼•æ“ä¸­æœç´¢çŸ¥è¯†ç‚¹çš„æ—¶å€™éƒ½æ˜¯å•ç‹¬å»æœç´¢ï¼Œè¿™æ ·å­¦ä¹ ä¸åŒçš„çŸ¥è¯†ç‚¹éœ€è¦é˜…è¯»çš„æ–‡ç« å¹¶ä¸æ˜¯åŒä¸€ä¸ªäººå¾—æ–‡ç« ï¼Œè¿™æ ·åœ¨æ€è·¯ä¸Šå’Œä¾‹å­ä»£ç ä¸Šå¾ˆéš¾è”ç³»åˆ°ä¸€å—ï¼Œå› ä¸ºæœ¬äººå½“æ—¶å¤§æ¦‚å°±ç»å†è¿‡è¿™æ ·çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥è¶‹äºè¿™æ ·çš„åŸå› ï¼Œæˆ‘å†³å®šæ¥å†™æ­¤ç³»åˆ—æ–‡ç« ï¼Œç”±äºä½œè€…æ°´å¹³æœ‰é™ï¼Œå¹¶ä¸”å¤šæ˜¯æŠ±ç€ç§¯ç´¯å­¦ä¹ å’Œåˆ†äº«çš„æ€åº¦ï¼Œæ‰€ä»¥ç‰¹åˆ«å¸Œæœ›å¤§å®¶èƒ½å¤Ÿç»™ä¸æŒ‡æ­£å’Œå»ºè®®ã€‚\n\nå¥½å•¦ï¼Œæ¥ä¸‹æ¥å¼€å§‹æˆ‘çš„ç³»åˆ—æ–‡ç« ç¬¬ä¸€ç¯‡ã€‚\n\n# ä¸€ã€jsæ¨¡å—åŒ–ä¸AMD #\n\n### å…ƒæŸäººæ—¶æœŸï¼Œæˆ‘å›½æœ€æ—©çš„äººç±»ï¼Œè·ä»Šçº¦170ä¸‡å¹´ ###\n\nç®€ä»‹ï¼šjavascriptè¿™é—¨è¯­è¨€å¾ˆçµæ´»ï¼Œä½†æ˜¯åœ¨æœ€åˆé˜¶æ®µæ¨¡å—åŒ–å¹¶æ²¡æœ‰å—åˆ°é‡è§†ï¼Œæ˜¯åæ¥nodejsçš„å‡ºç°ï¼Œä½¿å¾—jsåœ¨æµè§ˆå™¨ç«¯çš„æ¨¡å—åŒ–è¿…é€Ÿå´›èµ·ï¼Œé‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–ï¼Œæˆ‘ä»¬ä»å¤´æ¥ã€‚\n\nåœ¨å…ƒæŸäººæ—¶æœŸï¼Œäººç±»å†™jsä»£ç éƒ½æ˜¯è¿™æ ·çš„ï¼Œåœ¨headæ ‡ç­¾ä¸­æˆ–è€…bodyç»“æŸæ ‡ç­¾çš„ä¸Šé¢é€šè¿‡scriptæ ‡ç­¾å¼•å…¥ä¸€ä¸ªjsè„šæœ¬æ–‡ä»¶ï¼š\n\n```\n\t<script src=\"a.js\"></script>\n```\n\näºæ˜¯æ‰€æœ‰çš„ä»£ç éƒ½å†™åœ¨äº† a.js è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œåæ¥ï¼Œä»£ç è¶Šæ¥è¶Šå¤šï¼Œå¦‚æœå…¨éƒ¨å†™åœ¨a.jsæ–‡ä»¶ä¸­ä¼šä½¿å¾—ä»£ç éå¸¸ä¸å¥½ç»´æŠ¤ï¼Œè‡³äºä¸ºä»€ä¹ˆä¸å¥½ç»´æŠ¤ï¼ˆè‡ªå·±è„‘è¡¥ï¼‰ï¼Œä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹2000è¡Œçš„jsæ–‡ä»¶ï¼Œç„¶åä½ å¿˜è®°ä¸€ä¸ªå‡½æ•°çš„åç§°ï¼Œäºæ˜¯åœ¨å†™ä»£ç çš„æ—¶å€™ä¸Šä¸‹æ‹‰æ¥æ‹‰å»ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚è¿™æ ·ï¼Œäººä»¬è‡ªç„¶çš„å°±æƒ³åˆ°åˆ†å‡ºå‡ ä¸ªjsæ–‡ä»¶ï¼Œäºæ˜¯ï¼Œèªæ˜çš„å…ƒæŸäººå°±æŠŠä¸€äº›ç±»ä¼¼äºè·å–å…ƒç´ ï¼Œæ·»åŠ classç­‰ç­‰ç­‰ç­‰åŠŸèƒ½å°è£…æˆä¸€ä¸ªä¸ªçš„å‡½æ•°ï¼Œå•ç‹¬çš„å†™åœ¨ä¸€ä¸ªjsæ–‡ä»¶é‡Œï¼Œå–åå«åšutil.jsï¼Œæ„æ€æ˜¯å·¥å…·æ–‡ä»¶çš„æ„æ€ï¼Œä»¥åéœ€è¦ç”¨åˆ°è¿™äº›å‡½æ•°çš„è¯å°±ç›´æ¥å¼•å…¥è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ï¼š\n\n```\n\t<script src=\"util.js\"></script>\n\t<script src=\"a.js\"></script>\n```\n\nåæ¥å…ƒæŸäººå‘ç°ï¼Œå·¥å…·æ–‡ä»¶util.jsçš„å†…å®¹ä¹Ÿå˜çš„è¶Šæ¥è¶Šå¤šï¼Œäºæ˜¯åˆæŠŠä¸åŒåŠŸèƒ½çš„å‡½æ•°åŒºåˆ†å¼€æ¥ï¼Œå†™åœ¨ä¸åŒçš„æ–‡ä»¶é‡Œï¼Œæ¯”å¦‚æŠŠajaxæ“ä½œå‡½æ•°éƒ½åˆ†è£…åœ¨äº†ajax.jsæ–‡ä»¶ä¸­ï¼ŒæŠŠæ“ä½œDOMå…ƒç´ çš„å‡½æ•°å°è£…åœ¨äº†dom.jsæ–‡ä»¶ä¸­ç­‰ç­‰ï¼Œäºæ˜¯ï¼Œhtmlé¡µé¢å¼•å…¥çš„jsæ–‡ä»¶çœ‹ä¸Šå»å°±æˆäº†è¿™æ ·ï¼š\n\n```\n\t<script src=\"ajax.js\"></script>\n\t<script src=\"dom.js\"></script>\n\t...\n\t...\n\t<script src=\"a.js\"></script>\n```\n\né‚£ä¹ˆè¿™æ ·åšçš„åå¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š\n1 htmlæ–‡ä»¶ä¸­å¼•å…¥äº†è¿‡å¤šçš„jsè„šæœ¬æ–‡ä»¶ï¼Œè¿™ä¸ä¼šä½¿å¾—æµè§ˆå™¨å‘å‡ºå¾ˆå¤šæ¬¡httpè¯·æ±‚ï¼Œè¿™æ˜¯å½±å“é¡µé¢æ€§èƒ½çš„æœ€ç³Ÿç³•å› ç´ ã€‚\n2 æ‰€æœ‰å˜é‡åŠå‡½æ•°éƒ½æ˜¯å…¨å±€å˜é‡ï¼Œææ˜“å†²çªï¼Œæ¯”å¦‚a.jsä¸­æœ‰ä¸ªå˜é‡objï¼Œb.jsä¸­ä¹Ÿæœ‰ä¸ªå˜é‡objã€‚\n3 ä¾èµ–é¡ºåºä¸æ˜“ç®¡ç†ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸Šé¢çš„ä»£ç ï¼Œdom.jsä¾èµ–ajax.jsä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆä½ å¿…é¡»å…ˆå¼•å…¥ajax.jsæ–‡ä»¶å†å¼•å…¥dom.jsæ–‡ä»¶ã€‚\n\n### åŒ—äº¬äººæ—¶æœŸï¼Œè·ä»Šçº¦20 ~ 70ä¸‡å¹´ ###\n\næ­¤åŒ—äº¬äººéå½¼åŒ—äº¬äººï¼Œæœ‰ç‚¹å†å²å¸¸è¯†çš„éƒ½åº”è¯¥æ˜ç™½ = =ã€‚\nåŒ—äº¬äººå¾ˆèªæ˜çš„ï¼Œä»–ä»¬å‘ç°äº†ä¸Šé¢çš„é—®é¢˜åï¼Œæå‡ºï¼Œå¦‚æœæ¯ä¸€ä¸ªæ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼ˆå˜é‡å’Œå‡½æ•°ï¼‰ï¼Œéƒ½ç”¨ä¸€ä¸ªå¯¹è±¡å­˜å‚¨ï¼Œè¿™æ ·å°±èƒ½æ‰“æ‰“å‡å°å†²çªçš„å¯èƒ½ï¼Œå‡å¦‚æˆ‘ä»¬å°†dom.jsä¸­çš„å‡½æ•°éƒ½æ”¾åœ¨ä¸€ä¸ªå¯¹è±¡ä¸‹é¢ï¼Œäºæ˜¯dom.jså°±å˜æˆäº†è¿™æ ·ï¼š\n\n```\nvar Dom = {\n\t// è·å–å…ƒç´ \n\tgetEle : function(){...},\n\t// å…‹éš†å…ƒç´ \n\tcloneEle : function(){...},\t\n\t// å…¶ä»–domæ–¹æ³•\n\t...\n};\n```\n\nåŒ—äº¬äººçš„ç¡®ç¼“è§£äº†å˜é‡å†²çªçš„é—®é¢˜ï¼Œæ³¨æ„ï¼Œæˆ‘ç”¨çš„æ˜¯â€œç¼“è§£â€å¹¶ä¸æ˜¯â€œè§£å†³â€ï¼Œå› ä¸ºè¿™æ ·åšåªèƒ½å‡å°‘å†²çªï¼Œä¸èƒ½ä¿è¯ä¸€å®šä¸ä¼šå†²çªï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨è¿™äº›å‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šåƒè¿™æ ·ï¼š\n\n```\nDom.getEle();\n```\n\nå¦‚æœå±‚çº§æ·±å¾—è¯è¿˜å¯èƒ½ç±»ä¼¼äºè¿™æ ·ï¼š\n\n```\nDom.XXX.getEle();\n```\n\nè¿™å¹¶ä¸æ˜¯è¯»è€…åœ¨æœæ’°ï¼Œåœ¨ä¸ºäº†æš´éœ²ç¼ºç‚¹è€Œä¹±å†™çš„ï¼Œæ¥çœ‹çœ‹Yahoo! çš„ YUI2 é¡¹ç›®ï¼Œä¸‹é¢æ˜¯ä¸€æ®µçœŸå®çš„ä»£ç ï¼š\n\n```\nif (org.cometd.Utils.isString(response)) {\n  return org.cometd.JSON.fromJSON(response);\n}\n```\n\nè¿™æ ·æ˜¯å¾ˆè®©äººæ¼ç«çš„ï¼Œæˆ‘ä¸ºäº†ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¦è®°ä½ä¸€å¤§ä¸²çš„è°ƒç”¨å…³ç³»ï¼Œå†™èµ·æ¥ä¹Ÿç‰¹åˆ«éº»çƒ¦ï¼Œå‡å¦‚æˆ‘è®°ä¸ä½è°ƒç”¨å…³ç³»æˆ‘è¿˜è¦å»æŸ¥è¯¢ï¼ŒåŠå…¶å½±å“å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”è¿™ç§åšæ³•ä¹Ÿä»…ä»…æ˜¯ç¼“è§£äº†å‘½åå†²çªçš„é—®é¢˜å¹¶æ²¡æœ‰çœŸæ­£è§£å†³ï¼ŒåŒ…æ‹¬æ–‡ä»¶ä¾èµ–å…³ç³»çš„å¤„ç†ï¼Œå’Œé¡µé¢éœ€è¦å‘é€çš„httpè¯·æ±‚æ•°é‡ç­‰é—®é¢˜ä¾æ—§æ²¡æœ‰å¾—åˆ°å¤„ç†ã€‚\n\nåæ¥çš„ å±±é¡¶æ´äººã€åŠå¡äººã€æ²³å§†æ¸¡äººé€šé€šæ²¡æœ‰è§£å†³è¿™ç±»é—®é¢˜ï¼ˆè°çŸ¥é“æœ‰æ²¡æœ‰è§£å†³å‘¢~ ~ï¼Œä¹Ÿæ˜¯é†‰äº†ï¼‰\n\nä½†æ˜¯å†è‹¦éš¾çš„é—®é¢˜éƒ½éš¾ä¸å€’æˆ‘ä»¬â€œæ–°äººç±»â€çš„æ™ºæ…§ï¼Œä»€ä¹ˆå«æ–°äººç±»ï¼Ÿ æ–°äººç±» == â€˜è´¿èµ‚ï¼Œèµ°å…³ç³»ï¼Œä¹±ç”¨èŒæƒï¼Œå…¬å“ç§ç”¨......â€™ ï¼Œå’³å’³ï¼Œå›åˆ°æ­£é¢˜ï¼Œé‚£ä¹ˆæ–°äººç±»åˆ°åº•æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿåœ¨ç»å†äº†å±±é¡¶æ´äººã€åŠå¡äººã€æ²³å§†æ¸¡äººä¹‹åï¼Œäººä»¬å·²ç»æ·±æ·±çš„è¢«è¿™ç§é—®é¢˜æ‰€ç—›æ¶ï¼Œè®¤è¯†åˆ°äº†æ¨¡å—åŒ–çš„å¿…è¦æ€§ï¼Œæ‰€ä»¥è¯´ï¼Œæ¨¡å—åŒ–ç›®çš„åœ¨äºè§£å†³ä»¥ä¸‹é—®é¢˜ï¼š\n\n* æ–‡ä»¶çš„ä¾èµ–å…³ç³»\n* é¿å…æ±¡æŸ“å…¨å±€ç¯å¢ƒï¼Œå¯¼è‡´å‘½åå†²çª\n* ä½¿ç¼–ç è¿‡ç¨‹å˜å¾—ä¼˜é›…\n* æ€§èƒ½å¾—åˆ°æå‡\n\nä½†æ˜¯äººä»¬çš„ç¡®æ˜¯è®¤è¯†åˆ°äº†æ¨¡å—åŒ–çš„é‡è¦è¡Œï¼Œå¯çœŸæ­£æ™®åŠè¿˜è¦å½’åŠŸäºnodejsçš„å‡ºç°ï¼Œnodejsæ˜¯æœåŠ¡å™¨ç«¯javascriptçš„å®ç°ï¼Œå¦‚æœä½ ä½¿ç”¨nodejsä½ ä¼šå‘ç°å¯ä»¥ä½¿ç”¨require()æ–¹æ³•åŠ è½½æ¨¡å—ï¼Œä½¿ç”¨define()å®šä¹‰æ¨¡å—ç­‰ï¼Œå®é™…ä¸Šnodejséµå¾ªçš„æ˜¯Commonjsè§„èŒƒï¼Œä¹‹æ‰€ä»¥è¦æœ‰è§„èŒƒæ˜¯ä¸ºäº†ç»Ÿä¸€ç¼–ç çš„æ–¹å¼ï¼Œå› ä¸ºjsæ˜¯ä¸€é—¨å¾ˆçµæ´»çš„è¯­è¨€ï¼Œå®ç°æ¨¡å—å˜æˆçš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œä½ å†™ä¸€ç§æˆ‘å†™ä¸€ç§è¿™å²‚ä¸æ˜¯å°±ä¹±å¥—äº†ï¼Œç›®å‰åœ¨javascriptä¸­æœ‰ä¸‰ç§è§„èŒƒï¼Œåˆ†åˆ«æ˜¯Commonjsè§„èŒƒã€AMDè§„èŒƒã€CMDè§„èŒƒã€‚ä¸‰è€…ä¹‹é—´çš„åŒºåˆ«è¯´å®è¯ï¼Œçš„ç¡®æœ‰ï¼Œä½†æ˜¯ä¸å¤§ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è¦ä»‹ç»çš„å°±æ˜¯AMDè§„èŒƒï¼Œå¹¶ä¸”requirejsæ˜¯AMDè§„èŒƒçš„ä¸€ä¸ªå®ç°ã€‚\n\n### AMDè§„èŒƒ ###\n\nAMD(Asynchronous Module Definition) è¯‘ä¸ºâ€œå¼‚æ­¥æ¨¡å—å®šä¹‰â€ï¼Œä¸ºä»€ä¹ˆæ˜¯å¼‚æ­¥æ¨¡å—å®šä¹‰å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œnodejsä¸­ä½¿ç”¨requireå»åŠ è½½æ¨¡å—çš„æ—¶å€™ï¼Œæ¨¡å—å¤šåœ¨å†…å­˜æˆ–ç£ç›˜ä¸­ï¼Œè€Œä¸”åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œéœ€è¦é€šè¿‡ç½‘ç»œè¯·æ±‚å»åŠ è½½æ¨¡å—ï¼Œè¿™ä¸ä»å†…å­˜æˆ–ç£ç›˜ä¸­åŠ è½½æ¨¡å—æ ¹æœ¬å°±ä¸åœ¨ä¸€ä¸ªé‡çº§ä¸Šï¼Œå‡å¦‚æˆ‘ä»¬åŒæ­¥åŠ è½½æ¨¡å—çš„è¯ï¼Œæµè§ˆå™¨ä¼šåœæ»åœ¨è¿™é‡Œå‡ºç°å‡æ­»çš„çŠ¶æ€ï¼Œè¦ç­‰åˆ°æ‰€æœ‰æ¨¡å—å…¨éƒ¨åŠ è½½å®Œä¹‹åæ‰ä¼šç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªé€‚ç”¨äºæµè§ˆå™¨ç«¯å®ç°æ¨¡å—åŒ–çš„è§„èŒƒï¼Œè€Œè¿™ä¹Ÿæ˜¯AMDè§„èŒƒçš„æˆå› ã€‚\n\nä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ï¼ŒAMDè§„èŒƒä¸­æˆ‘ä»¬å¦‚ä½•å»å†™ä»£ç ï¼Œå…¶ä¸­æˆ‘ä»¬åªéœ€è¦å…³æ³¨å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œå’Œå¦‚ä½•ä½¿ç”¨æ¨¡å—ã€‚\n\n#### å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å— ####\n\nAMDè§„èŒƒè§„å®šä½¿ç”¨define()æ–¹æ³•å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œdefineæ–¹æ³•å¦‚ä¸‹ï¼š\n\ndefine(id?, dependencies?, factory);\n\nå‚æ•°è¯´æ˜ï¼š\n\tid {String} æ¨¡å—æ ‡è¯†ï¼Œå¯ä»¥çœç•¥ã€‚\n\tdependencies {Array} æ‰€ä¾èµ–çš„æ¨¡å—æ•°ç»„ï¼Œå¯ä»¥çœç•¥ã€‚\n\tfactory {Object} | {Function} æ¨¡å—çš„å®ç°ã€‚\n\nçœ‹ä¸‹é¢çš„ä»£ç ï¼Œå®šä¹‰äº†ä¸€ä¸ªæ¨¡å—ï¼Œè¯¥æ¨¡å—æ²¡æœ‰ä¾èµ–ä»»ä½•å…¶ä»–æ¨¡å—ï¼Œä¹Ÿæ²¡æœ‰åå­—ï¼ˆå³æ²¡æœ‰idè¿™ä¸ªå‚æ•°ï¼‰ï¼š\n\n```\ndefine(function(){\n\treturn {\n\t\ta : '1',\n\t\tb : '2'\n\t}\n});\n```\n\nåƒä¸Šé¢çš„ä»£ç ï¼Œå¦‚æœåªæ˜¯ç®€å•çš„è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š\n\n```\ndefine({\n\ta : '1',\n\tb : '2'\n});\n```\n\nä¸Šé¢å®šä¹‰çš„æ¨¡å—è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼ŒAMDè§„å®šï¼Œè¿”å›çš„å¯¹è±¡ï¼Œå³ä¸ºè¯¥æ¨¡å—å¯¹è±¡ã€‚ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š\n\n```\ndefine(function(){\n\tvar m = function(){\n\n\t};\n\n\treturn m;\n\n});\n```\n\nå¦‚æœä½ ç¼–å†™çš„æ¨¡å—éœ€è¦ä½¿ç”¨å…¶ä»–æ¨¡å—ä¸­çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦ä¾èµ–é‚£ä¸ªæ¨¡å—ï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±å¯ä»¥ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸ºä½ ä¾èµ–æ¨¡å—çš„åç§°ï¼š\n\n```\ndefine(['A', 'B'], function(A, B){\n\t\n\tA.add();\n\n\treturn {\n\t\ta : '1',\n\t\tb : '2'\n\t}\n});\n```\n\nä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªæ¨¡å—ï¼Œè¯¥æ¨¡å—ä¾èµ–ä¸¤ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«æ˜¯æ¨¡å—Aå’Œæ¨¡å—Bï¼Œæ³¨æ„æˆ‘ä»¬åœ¨å‡½æ•°ä¸­ä¼ é€’äº†ä¸ä¾èµ–æ•°ç»„ä¸­ä¸€ä¸€å¯¹åº”çš„å½¢å¼å‚æ•°ï¼Œä»¥ä¾¿åœ¨æ¨¡å—ä¸­ä½¿ç”¨ä¾èµ–çš„æ¨¡å—ï¼Œè€Œæˆ‘ä»¬ä¹Ÿåœ¨æ¨¡å—ä¸­è°ƒç”¨äº†æ¨¡å—Açš„add()æ–¹æ³•ã€‚\n\nä¸Šé¢æˆ‘ä»¬å®šä¹‰çš„æ¨¡å—éƒ½æ²¡æœ‰ä¼ é€’idè¿™ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¼ é€’è¿™ä¸ªå‚æ•°ï¼Œè¿™æ ·å°±åƒæˆ‘ä»¬ç»™æ¨¡å—å»äº†ä¸€ä¸ªåå­—ï¼Œæ‰€ä»¥å¸¦æœ‰idè¿™ä¸ªå‚æ•°çš„æ¨¡å—å«åšå…·åæ¨¡å—ï¼š\n\n```\ndefine('index', ['A'], function(A){\n\t...\n});\n```\n\nä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šæ‰‹åŠ¨çš„å»å†™ï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨ä½¿ç”¨æ„å»ºå·¥å…·ä¼˜åŒ–é¡¹ç›®çš„æ—¶å€™ï¼Œå¦‚æˆ‘ä»¬ä½¿ç”¨gulpé…åˆrjsåˆå¹¶æ¨¡å—çš„æ—¶å€™ï¼Œè‡ªåŠ¨å»å¸®æˆ‘ä»¬å¡«å……æ¨¡å—idã€‚\n\næœ€åï¼Œä»‹ç»ä¸€ä¸‹AMDè§„èŒƒå…¼å®¹Commonjsè§„èŒƒçš„ä¸€ä¸ªæ¨¡å—å®šä¹‰å†™æ³•ï¼š\n\n```\ndefine(function(require, exports, module){\n\tvar m = require('m1');\n\n\texports.A = function(){\n\t\treturn m.add();\n\t}\n});\n```\n\næˆ‘ä»¬åœ¨å‡½æ•°ä¸­æ˜¾ç¤ºçš„ä¼ é€’äº†ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯requireï¼Œexportså’Œmoduleï¼Œè¿™ä¸‰ä¸ªå˜é‡æ˜¯å…¨å±€çš„ï¼Œå…¶ä¸­requireæ˜¯ç”¨æ¥åŠ è½½å…¶ä»–æ¨¡å—çš„ï¼Œexportsæ˜¯ç”¨æ¥å¯¼å‡ºæ¨¡å—æ¥å£çš„ï¼Œmoduleæ˜¯æ¨¡å—å¯¹è±¡æœ¬èº«ã€‚\n\næ¥ä¸‹æ¥æˆ‘ä»¬è®²è§£ä¸€ä¸‹requrieï¼Œrequireæ˜¯ç”¨æ¥å¼•ç”¨æ¨¡å—çš„ï¼ŒåŠåŠ è½½æ¨¡å—ï¼Œä¸Šé¢æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†require()æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼ é€’äº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŠæ¨¡å—çš„åç§°ï¼Œå»åŠ è½½æ¨¡å—ï¼Œå®é™…ä¸Šæˆ‘ä»¬è¿˜å¯ä»¥ä¼ é€’ä¾èµ–æ•°ç»„ï¼Œå¦‚ä¸‹ï¼š\n\n```\nrequire(['A', 'B'], function(A, B){\n\t// ...\n});\n```\n\nè¿™æ ·ï¼Œjså¤§æ¦‚çš„æ¨¡å—åŒ–å†å²å’ŒAMDè§„èŒƒæˆ‘ä»¬å°±ç®€å•ä»‹ç»å®Œäº†ï¼Œç”±äºæˆ‘ä»¬è¿™ç¯‡æ–‡ç« ç»¼åˆæ€§æ¯”è¾ƒå¼ºï¼Œå¦‚æœæƒ³æ·±å…¥äº†è§£AMDï¼Œç‚¹å‡»è¿™é‡Œï¼š[AMD](https://github.com/amdjs/amdjs-api/blob/master/require.md)\n\nè¿™ç¯‡æ–‡ç« å°±åˆ°è¿™é‡Œï¼Œä¸‹ä¸€ç« æˆ‘ä»¬ç»“åˆå®é™…çš„æ¡ˆä¾‹ä»”ç»†è®¨è®ºä¸€ä¸‹requirejsï¼Œå¹¶ç›¸ä¿¡æˆ‘ï¼Œä¸€å®šæœ‰ä½ èƒ½å­¦åˆ°çš„ä¸œè¥¿ã€‚\n\nå¦‚æœå¯¹ä½ æœ‰ç”¨ï¼Œæ„Ÿè°¢æåŠ©ã€‚\n\n![æ”¯ä»˜å®äºŒç»´ç ](http://7xlolm.com1.z0.glb.clouddn.com/201511122.pic.jpg)\n","slug":"åŸºäºgulp-requirejs-rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»º","published":1,"updated":"2015-11-12T11:20:39.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx519000847fymovopxni","content":"<blockquote>\n<p>å‰ç«¯çš„è‡ªåŠ¨åŒ–ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯è®©ä¸€ä»¶äº‹èƒ½å¤Ÿåœ¨æˆ‘ä»¬çš„ä¸€æ¡å‘½ä»¤ä¸‹å°±èƒ½å¤Ÿè‡ªåŠ¨å»æ‰§è¡Œå¹¶å¾ˆå¥½çš„å®Œæˆï¼Œè€Œä¸å†éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»é‡å¤è¿™äº›å·¥ä½œï¼Œè¿™ä¸ªç³»åˆ—æ–‡ç« ä¸ä»…ä»…å»å•ä¸€çš„è®²è¿°æ¯ä¸€å—çŸ¥è¯†ç‚¹æˆ–è€…å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œå› ä¸ºç½‘ä¸Šçš„æ–‡ç« å·²ç»å¾ˆå¤šäº†ï¼Œè€Œæ˜¯åœ¨æ¸…æ™°çš„ç»™è¯»è€…è®²è¿°è¿™äº›â€œå·¥å…·â€ç”¨æ³•çš„åŒæ—¶ï¼ŒçœŸæ­£çš„æŠŠä»–ä»¬ç»„åˆåœ¨ä¸€èµ·å¹¶ä¸”æ­å»ºä¸€ä¸ªé¡¹ç›®æ¡†æ¶é›å½¢æ¥ï¼Œæœ¬ç³»åˆ—æ–‡ç« æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹æœ‰ï¼š</p>\n</blockquote>\n<ul>\n<li>jsçš„æ¨¡å—åŒ–ï¼ˆé‡ç‚¹åœ¨AMDè§„èŒƒï¼‰</li>\n<li>requirejsçš„ä»‹ç»åŠä½¿ç”¨</li>\n<li>rjsçš„ä½¿ç”¨</li>\n<li>æ–°ä¸€ä»£æ„å»ºå·¥å…·gulpçš„ä»‹ç»åŠä½¿ç”¨</li>\n<li>ç»„åˆä»¥ä¸Šå·¥å…·æ­å»ºå‰ç«¯è‡ªåŠ¨åŒ–å¼€å‘æ¡†æ¶</li>\n</ul>\n<a id=\"more\"></a>\n<h1 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h1><p>å…¶å®ä¸Šé¢çš„æ¯ä¸€ä¸ªçŸ¥è¯†ç‚¹éƒ½å¯ä»¥å•ç‹¬æˆæ–‡ï¼Œä½†æ˜¯æˆ‘åˆä¸å–œæ¬¢æŠŠæœ¬åº”è¯¥æ˜¯â€œä¸€ä»¶äº‹â€çš„ä¸œè¥¿æ‹†åˆ†çš„ä¸ƒé›¶å…«ç¢ï¼Œç½‘ä¸Šå¾ˆå¤šæ–‡ç« éƒ½æ˜¯å…¶ä¸­æŸä¸€ä¸ªçŸ¥è¯†ç‚¹çš„æ€»ç»“ã€ä»‹ç»æˆ–è€…ä½¿ç”¨ï¼Œè¿™æ ·çš„å¼Šç«¯å°±æ˜¯ï¼Œè¯»è€…èƒ½å¤Ÿçœ‹çš„æ˜ç™½ä½ åœ¨è¯´ä»€ä¹ˆï¼Œä¹ŸçŸ¥é“è¿™äº›å·¥å…·æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œä½†æ˜¯ååä¸ä¼šæŠŠä»–ä»¬æ”¾åœ¨ä¸€å—ç»„åˆå»ä½¿ç”¨ï¼Œè€Œä¸”è¯»è€…å¯èƒ½åœ¨æœç´¢å¼•æ“ä¸­æœç´¢çŸ¥è¯†ç‚¹çš„æ—¶å€™éƒ½æ˜¯å•ç‹¬å»æœç´¢ï¼Œè¿™æ ·å­¦ä¹ ä¸åŒçš„çŸ¥è¯†ç‚¹éœ€è¦é˜…è¯»çš„æ–‡ç« å¹¶ä¸æ˜¯åŒä¸€ä¸ªäººå¾—æ–‡ç« ï¼Œè¿™æ ·åœ¨æ€è·¯ä¸Šå’Œä¾‹å­ä»£ç ä¸Šå¾ˆéš¾è”ç³»åˆ°ä¸€å—ï¼Œå› ä¸ºæœ¬äººå½“æ—¶å¤§æ¦‚å°±ç»å†è¿‡è¿™æ ·çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥è¶‹äºè¿™æ ·çš„åŸå› ï¼Œæˆ‘å†³å®šæ¥å†™æ­¤ç³»åˆ—æ–‡ç« ï¼Œç”±äºä½œè€…æ°´å¹³æœ‰é™ï¼Œå¹¶ä¸”å¤šæ˜¯æŠ±ç€ç§¯ç´¯å­¦ä¹ å’Œåˆ†äº«çš„æ€åº¦ï¼Œæ‰€ä»¥ç‰¹åˆ«å¸Œæœ›å¤§å®¶èƒ½å¤Ÿç»™ä¸æŒ‡æ­£å’Œå»ºè®®ã€‚</p>\n<p>å¥½å•¦ï¼Œæ¥ä¸‹æ¥å¼€å§‹æˆ‘çš„ç³»åˆ—æ–‡ç« ç¬¬ä¸€ç¯‡ã€‚</p>\n<h1 id=\"ä¸€ã€jsæ¨¡å—åŒ–ä¸AMD\"><a href=\"#ä¸€ã€jsæ¨¡å—åŒ–ä¸AMD\" class=\"headerlink\" title=\"ä¸€ã€jsæ¨¡å—åŒ–ä¸AMD\"></a>ä¸€ã€jsæ¨¡å—åŒ–ä¸AMD</h1><h3 id=\"å…ƒæŸäººæ—¶æœŸï¼Œæˆ‘å›½æœ€æ—©çš„äººç±»ï¼Œè·ä»Šçº¦170ä¸‡å¹´\"><a href=\"#å…ƒæŸäººæ—¶æœŸï¼Œæˆ‘å›½æœ€æ—©çš„äººç±»ï¼Œè·ä»Šçº¦170ä¸‡å¹´\" class=\"headerlink\" title=\"å…ƒæŸäººæ—¶æœŸï¼Œæˆ‘å›½æœ€æ—©çš„äººç±»ï¼Œè·ä»Šçº¦170ä¸‡å¹´\"></a>å…ƒæŸäººæ—¶æœŸï¼Œæˆ‘å›½æœ€æ—©çš„äººç±»ï¼Œè·ä»Šçº¦170ä¸‡å¹´</h3><p>ç®€ä»‹ï¼šjavascriptè¿™é—¨è¯­è¨€å¾ˆçµæ´»ï¼Œä½†æ˜¯åœ¨æœ€åˆé˜¶æ®µæ¨¡å—åŒ–å¹¶æ²¡æœ‰å—åˆ°é‡è§†ï¼Œæ˜¯åæ¥nodejsçš„å‡ºç°ï¼Œä½¿å¾—jsåœ¨æµè§ˆå™¨ç«¯çš„æ¨¡å—åŒ–è¿…é€Ÿå´›èµ·ï¼Œé‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–ï¼Œæˆ‘ä»¬ä»å¤´æ¥ã€‚</p>\n<p>åœ¨å…ƒæŸäººæ—¶æœŸï¼Œäººç±»å†™jsä»£ç éƒ½æ˜¯è¿™æ ·çš„ï¼Œåœ¨headæ ‡ç­¾ä¸­æˆ–è€…bodyç»“æŸæ ‡ç­¾çš„ä¸Šé¢é€šè¿‡scriptæ ‡ç­¾å¼•å…¥ä¸€ä¸ªjsè„šæœ¬æ–‡ä»¶ï¼š</p>\n<pre><code>    &lt;script src=&quot;a.js&quot;&gt;&lt;/script&gt;\n</code></pre><p>äºæ˜¯æ‰€æœ‰çš„ä»£ç éƒ½å†™åœ¨äº† a.js è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œåæ¥ï¼Œä»£ç è¶Šæ¥è¶Šå¤šï¼Œå¦‚æœå…¨éƒ¨å†™åœ¨a.jsæ–‡ä»¶ä¸­ä¼šä½¿å¾—ä»£ç éå¸¸ä¸å¥½ç»´æŠ¤ï¼Œè‡³äºä¸ºä»€ä¹ˆä¸å¥½ç»´æŠ¤ï¼ˆè‡ªå·±è„‘è¡¥ï¼‰ï¼Œä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹2000è¡Œçš„jsæ–‡ä»¶ï¼Œç„¶åä½ å¿˜è®°ä¸€ä¸ªå‡½æ•°çš„åç§°ï¼Œäºæ˜¯åœ¨å†™ä»£ç çš„æ—¶å€™ä¸Šä¸‹æ‹‰æ¥æ‹‰å»ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚è¿™æ ·ï¼Œäººä»¬è‡ªç„¶çš„å°±æƒ³åˆ°åˆ†å‡ºå‡ ä¸ªjsæ–‡ä»¶ï¼Œäºæ˜¯ï¼Œèªæ˜çš„å…ƒæŸäººå°±æŠŠä¸€äº›ç±»ä¼¼äºè·å–å…ƒç´ ï¼Œæ·»åŠ classç­‰ç­‰ç­‰ç­‰åŠŸèƒ½å°è£…æˆä¸€ä¸ªä¸ªçš„å‡½æ•°ï¼Œå•ç‹¬çš„å†™åœ¨ä¸€ä¸ªjsæ–‡ä»¶é‡Œï¼Œå–åå«åšutil.jsï¼Œæ„æ€æ˜¯å·¥å…·æ–‡ä»¶çš„æ„æ€ï¼Œä»¥åéœ€è¦ç”¨åˆ°è¿™äº›å‡½æ•°çš„è¯å°±ç›´æ¥å¼•å…¥è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>    &lt;script src=&quot;util.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;a.js&quot;&gt;&lt;/script&gt;\n</code></pre><p>åæ¥å…ƒæŸäººå‘ç°ï¼Œå·¥å…·æ–‡ä»¶util.jsçš„å†…å®¹ä¹Ÿå˜çš„è¶Šæ¥è¶Šå¤šï¼Œäºæ˜¯åˆæŠŠä¸åŒåŠŸèƒ½çš„å‡½æ•°åŒºåˆ†å¼€æ¥ï¼Œå†™åœ¨ä¸åŒçš„æ–‡ä»¶é‡Œï¼Œæ¯”å¦‚æŠŠajaxæ“ä½œå‡½æ•°éƒ½åˆ†è£…åœ¨äº†ajax.jsæ–‡ä»¶ä¸­ï¼ŒæŠŠæ“ä½œDOMå…ƒç´ çš„å‡½æ•°å°è£…åœ¨äº†dom.jsæ–‡ä»¶ä¸­ç­‰ç­‰ï¼Œäºæ˜¯ï¼Œhtmlé¡µé¢å¼•å…¥çš„jsæ–‡ä»¶çœ‹ä¸Šå»å°±æˆäº†è¿™æ ·ï¼š</p>\n<pre><code>    &lt;script src=&quot;ajax.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;dom.js&quot;&gt;&lt;/script&gt;\n    ...\n    ...\n    &lt;script src=&quot;a.js&quot;&gt;&lt;/script&gt;\n</code></pre><p>é‚£ä¹ˆè¿™æ ·åšçš„åå¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š<br>1 htmlæ–‡ä»¶ä¸­å¼•å…¥äº†è¿‡å¤šçš„jsè„šæœ¬æ–‡ä»¶ï¼Œè¿™ä¸ä¼šä½¿å¾—æµè§ˆå™¨å‘å‡ºå¾ˆå¤šæ¬¡httpè¯·æ±‚ï¼Œè¿™æ˜¯å½±å“é¡µé¢æ€§èƒ½çš„æœ€ç³Ÿç³•å› ç´ ã€‚<br>2 æ‰€æœ‰å˜é‡åŠå‡½æ•°éƒ½æ˜¯å…¨å±€å˜é‡ï¼Œææ˜“å†²çªï¼Œæ¯”å¦‚a.jsä¸­æœ‰ä¸ªå˜é‡objï¼Œb.jsä¸­ä¹Ÿæœ‰ä¸ªå˜é‡objã€‚<br>3 ä¾èµ–é¡ºåºä¸æ˜“ç®¡ç†ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸Šé¢çš„ä»£ç ï¼Œdom.jsä¾èµ–ajax.jsä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆä½ å¿…é¡»å…ˆå¼•å…¥ajax.jsæ–‡ä»¶å†å¼•å…¥dom.jsæ–‡ä»¶ã€‚</p>\n<h3 id=\"åŒ—äº¬äººæ—¶æœŸï¼Œè·ä»Šçº¦20-70ä¸‡å¹´\"><a href=\"#åŒ—äº¬äººæ—¶æœŸï¼Œè·ä»Šçº¦20-70ä¸‡å¹´\" class=\"headerlink\" title=\"åŒ—äº¬äººæ—¶æœŸï¼Œè·ä»Šçº¦20 ~ 70ä¸‡å¹´\"></a>åŒ—äº¬äººæ—¶æœŸï¼Œè·ä»Šçº¦20 ~ 70ä¸‡å¹´</h3><p>æ­¤åŒ—äº¬äººéå½¼åŒ—äº¬äººï¼Œæœ‰ç‚¹å†å²å¸¸è¯†çš„éƒ½åº”è¯¥æ˜ç™½ = =ã€‚<br>åŒ—äº¬äººå¾ˆèªæ˜çš„ï¼Œä»–ä»¬å‘ç°äº†ä¸Šé¢çš„é—®é¢˜åï¼Œæå‡ºï¼Œå¦‚æœæ¯ä¸€ä¸ªæ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼ˆå˜é‡å’Œå‡½æ•°ï¼‰ï¼Œéƒ½ç”¨ä¸€ä¸ªå¯¹è±¡å­˜å‚¨ï¼Œè¿™æ ·å°±èƒ½æ‰“æ‰“å‡å°å†²çªçš„å¯èƒ½ï¼Œå‡å¦‚æˆ‘ä»¬å°†dom.jsä¸­çš„å‡½æ•°éƒ½æ”¾åœ¨ä¸€ä¸ªå¯¹è±¡ä¸‹é¢ï¼Œäºæ˜¯dom.jså°±å˜æˆäº†è¿™æ ·ï¼š</p>\n<pre><code>var Dom = {\n    // è·å–å…ƒç´ \n    getEle : function(){...},\n    // å…‹éš†å…ƒç´ \n    cloneEle : function(){...},    \n    // å…¶ä»–domæ–¹æ³•\n    ...\n};\n</code></pre><p>åŒ—äº¬äººçš„ç¡®ç¼“è§£äº†å˜é‡å†²çªçš„é—®é¢˜ï¼Œæ³¨æ„ï¼Œæˆ‘ç”¨çš„æ˜¯â€œç¼“è§£â€å¹¶ä¸æ˜¯â€œè§£å†³â€ï¼Œå› ä¸ºè¿™æ ·åšåªèƒ½å‡å°‘å†²çªï¼Œä¸èƒ½ä¿è¯ä¸€å®šä¸ä¼šå†²çªï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨è¿™äº›å‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šåƒè¿™æ ·ï¼š</p>\n<pre><code>Dom.getEle();\n</code></pre><p>å¦‚æœå±‚çº§æ·±å¾—è¯è¿˜å¯èƒ½ç±»ä¼¼äºè¿™æ ·ï¼š</p>\n<pre><code>Dom.XXX.getEle();\n</code></pre><p>è¿™å¹¶ä¸æ˜¯è¯»è€…åœ¨æœæ’°ï¼Œåœ¨ä¸ºäº†æš´éœ²ç¼ºç‚¹è€Œä¹±å†™çš„ï¼Œæ¥çœ‹çœ‹Yahoo! çš„ YUI2 é¡¹ç›®ï¼Œä¸‹é¢æ˜¯ä¸€æ®µçœŸå®çš„ä»£ç ï¼š</p>\n<pre><code>if (org.cometd.Utils.isString(response)) {\n  return org.cometd.JSON.fromJSON(response);\n}\n</code></pre><p>è¿™æ ·æ˜¯å¾ˆè®©äººæ¼ç«çš„ï¼Œæˆ‘ä¸ºäº†ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¦è®°ä½ä¸€å¤§ä¸²çš„è°ƒç”¨å…³ç³»ï¼Œå†™èµ·æ¥ä¹Ÿç‰¹åˆ«éº»çƒ¦ï¼Œå‡å¦‚æˆ‘è®°ä¸ä½è°ƒç”¨å…³ç³»æˆ‘è¿˜è¦å»æŸ¥è¯¢ï¼ŒåŠå…¶å½±å“å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”è¿™ç§åšæ³•ä¹Ÿä»…ä»…æ˜¯ç¼“è§£äº†å‘½åå†²çªçš„é—®é¢˜å¹¶æ²¡æœ‰çœŸæ­£è§£å†³ï¼ŒåŒ…æ‹¬æ–‡ä»¶ä¾èµ–å…³ç³»çš„å¤„ç†ï¼Œå’Œé¡µé¢éœ€è¦å‘é€çš„httpè¯·æ±‚æ•°é‡ç­‰é—®é¢˜ä¾æ—§æ²¡æœ‰å¾—åˆ°å¤„ç†ã€‚</p>\n<p>åæ¥çš„ å±±é¡¶æ´äººã€åŠå¡äººã€æ²³å§†æ¸¡äººé€šé€šæ²¡æœ‰è§£å†³è¿™ç±»é—®é¢˜ï¼ˆè°çŸ¥é“æœ‰æ²¡æœ‰è§£å†³å‘¢~ ~ï¼Œä¹Ÿæ˜¯é†‰äº†ï¼‰</p>\n<p>ä½†æ˜¯å†è‹¦éš¾çš„é—®é¢˜éƒ½éš¾ä¸å€’æˆ‘ä»¬â€œæ–°äººç±»â€çš„æ™ºæ…§ï¼Œä»€ä¹ˆå«æ–°äººç±»ï¼Ÿ æ–°äººç±» == â€˜è´¿èµ‚ï¼Œèµ°å…³ç³»ï¼Œä¹±ç”¨èŒæƒï¼Œå…¬å“ç§ç”¨â€¦â€¦â€™ ï¼Œå’³å’³ï¼Œå›åˆ°æ­£é¢˜ï¼Œé‚£ä¹ˆæ–°äººç±»åˆ°åº•æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿåœ¨ç»å†äº†å±±é¡¶æ´äººã€åŠå¡äººã€æ²³å§†æ¸¡äººä¹‹åï¼Œäººä»¬å·²ç»æ·±æ·±çš„è¢«è¿™ç§é—®é¢˜æ‰€ç—›æ¶ï¼Œè®¤è¯†åˆ°äº†æ¨¡å—åŒ–çš„å¿…è¦æ€§ï¼Œæ‰€ä»¥è¯´ï¼Œæ¨¡å—åŒ–ç›®çš„åœ¨äºè§£å†³ä»¥ä¸‹é—®é¢˜ï¼š</p>\n<ul>\n<li>æ–‡ä»¶çš„ä¾èµ–å…³ç³»</li>\n<li>é¿å…æ±¡æŸ“å…¨å±€ç¯å¢ƒï¼Œå¯¼è‡´å‘½åå†²çª</li>\n<li>ä½¿ç¼–ç è¿‡ç¨‹å˜å¾—ä¼˜é›…</li>\n<li>æ€§èƒ½å¾—åˆ°æå‡</li>\n</ul>\n<p>ä½†æ˜¯äººä»¬çš„ç¡®æ˜¯è®¤è¯†åˆ°äº†æ¨¡å—åŒ–çš„é‡è¦è¡Œï¼Œå¯çœŸæ­£æ™®åŠè¿˜è¦å½’åŠŸäºnodejsçš„å‡ºç°ï¼Œnodejsæ˜¯æœåŠ¡å™¨ç«¯javascriptçš„å®ç°ï¼Œå¦‚æœä½ ä½¿ç”¨nodejsä½ ä¼šå‘ç°å¯ä»¥ä½¿ç”¨require()æ–¹æ³•åŠ è½½æ¨¡å—ï¼Œä½¿ç”¨define()å®šä¹‰æ¨¡å—ç­‰ï¼Œå®é™…ä¸Šnodejséµå¾ªçš„æ˜¯Commonjsè§„èŒƒï¼Œä¹‹æ‰€ä»¥è¦æœ‰è§„èŒƒæ˜¯ä¸ºäº†ç»Ÿä¸€ç¼–ç çš„æ–¹å¼ï¼Œå› ä¸ºjsæ˜¯ä¸€é—¨å¾ˆçµæ´»çš„è¯­è¨€ï¼Œå®ç°æ¨¡å—å˜æˆçš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œä½ å†™ä¸€ç§æˆ‘å†™ä¸€ç§è¿™å²‚ä¸æ˜¯å°±ä¹±å¥—äº†ï¼Œç›®å‰åœ¨javascriptä¸­æœ‰ä¸‰ç§è§„èŒƒï¼Œåˆ†åˆ«æ˜¯Commonjsè§„èŒƒã€AMDè§„èŒƒã€CMDè§„èŒƒã€‚ä¸‰è€…ä¹‹é—´çš„åŒºåˆ«è¯´å®è¯ï¼Œçš„ç¡®æœ‰ï¼Œä½†æ˜¯ä¸å¤§ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è¦ä»‹ç»çš„å°±æ˜¯AMDè§„èŒƒï¼Œå¹¶ä¸”requirejsæ˜¯AMDè§„èŒƒçš„ä¸€ä¸ªå®ç°ã€‚</p>\n<h3 id=\"AMDè§„èŒƒ\"><a href=\"#AMDè§„èŒƒ\" class=\"headerlink\" title=\"AMDè§„èŒƒ\"></a>AMDè§„èŒƒ</h3><p>AMD(Asynchronous Module Definition) è¯‘ä¸ºâ€œå¼‚æ­¥æ¨¡å—å®šä¹‰â€ï¼Œä¸ºä»€ä¹ˆæ˜¯å¼‚æ­¥æ¨¡å—å®šä¹‰å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œnodejsä¸­ä½¿ç”¨requireå»åŠ è½½æ¨¡å—çš„æ—¶å€™ï¼Œæ¨¡å—å¤šåœ¨å†…å­˜æˆ–ç£ç›˜ä¸­ï¼Œè€Œä¸”åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œéœ€è¦é€šè¿‡ç½‘ç»œè¯·æ±‚å»åŠ è½½æ¨¡å—ï¼Œè¿™ä¸ä»å†…å­˜æˆ–ç£ç›˜ä¸­åŠ è½½æ¨¡å—æ ¹æœ¬å°±ä¸åœ¨ä¸€ä¸ªé‡çº§ä¸Šï¼Œå‡å¦‚æˆ‘ä»¬åŒæ­¥åŠ è½½æ¨¡å—çš„è¯ï¼Œæµè§ˆå™¨ä¼šåœæ»åœ¨è¿™é‡Œå‡ºç°å‡æ­»çš„çŠ¶æ€ï¼Œè¦ç­‰åˆ°æ‰€æœ‰æ¨¡å—å…¨éƒ¨åŠ è½½å®Œä¹‹åæ‰ä¼šç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªé€‚ç”¨äºæµè§ˆå™¨ç«¯å®ç°æ¨¡å—åŒ–çš„è§„èŒƒï¼Œè€Œè¿™ä¹Ÿæ˜¯AMDè§„èŒƒçš„æˆå› ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ï¼ŒAMDè§„èŒƒä¸­æˆ‘ä»¬å¦‚ä½•å»å†™ä»£ç ï¼Œå…¶ä¸­æˆ‘ä»¬åªéœ€è¦å…³æ³¨å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œå’Œå¦‚ä½•ä½¿ç”¨æ¨¡å—ã€‚</p>\n<h4 id=\"å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å—\"><a href=\"#å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å—\" class=\"headerlink\" title=\"å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å—\"></a>å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å—</h4><p>AMDè§„èŒƒè§„å®šä½¿ç”¨define()æ–¹æ³•å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œdefineæ–¹æ³•å¦‚ä¸‹ï¼š</p>\n<p>define(id?, dependencies?, factory);</p>\n<p>å‚æ•°è¯´æ˜ï¼š<br>    id {String} æ¨¡å—æ ‡è¯†ï¼Œå¯ä»¥çœç•¥ã€‚<br>    dependencies {Array} æ‰€ä¾èµ–çš„æ¨¡å—æ•°ç»„ï¼Œå¯ä»¥çœç•¥ã€‚<br>    factory {Object} | {Function} æ¨¡å—çš„å®ç°ã€‚</p>\n<p>çœ‹ä¸‹é¢çš„ä»£ç ï¼Œå®šä¹‰äº†ä¸€ä¸ªæ¨¡å—ï¼Œè¯¥æ¨¡å—æ²¡æœ‰ä¾èµ–ä»»ä½•å…¶ä»–æ¨¡å—ï¼Œä¹Ÿæ²¡æœ‰åå­—ï¼ˆå³æ²¡æœ‰idè¿™ä¸ªå‚æ•°ï¼‰ï¼š</p>\n<pre><code>define(function(){\n    return {\n        a : &#39;1&#39;,\n        b : &#39;2&#39;\n    }\n});\n</code></pre><p>åƒä¸Šé¢çš„ä»£ç ï¼Œå¦‚æœåªæ˜¯ç®€å•çš„è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š</p>\n<pre><code>define({\n    a : &#39;1&#39;,\n    b : &#39;2&#39;\n});\n</code></pre><p>ä¸Šé¢å®šä¹‰çš„æ¨¡å—è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼ŒAMDè§„å®šï¼Œè¿”å›çš„å¯¹è±¡ï¼Œå³ä¸ºè¯¥æ¨¡å—å¯¹è±¡ã€‚ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>define(function(){\n    var m = function(){\n\n    };\n\n    return m;\n\n});\n</code></pre><p>å¦‚æœä½ ç¼–å†™çš„æ¨¡å—éœ€è¦ä½¿ç”¨å…¶ä»–æ¨¡å—ä¸­çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦ä¾èµ–é‚£ä¸ªæ¨¡å—ï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±å¯ä»¥ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸ºä½ ä¾èµ–æ¨¡å—çš„åç§°ï¼š</p>\n<pre><code>define([&#39;A&#39;, &#39;B&#39;], function(A, B){\n\n    A.add();\n\n    return {\n        a : &#39;1&#39;,\n        b : &#39;2&#39;\n    }\n});\n</code></pre><p>ä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªæ¨¡å—ï¼Œè¯¥æ¨¡å—ä¾èµ–ä¸¤ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«æ˜¯æ¨¡å—Aå’Œæ¨¡å—Bï¼Œæ³¨æ„æˆ‘ä»¬åœ¨å‡½æ•°ä¸­ä¼ é€’äº†ä¸ä¾èµ–æ•°ç»„ä¸­ä¸€ä¸€å¯¹åº”çš„å½¢å¼å‚æ•°ï¼Œä»¥ä¾¿åœ¨æ¨¡å—ä¸­ä½¿ç”¨ä¾èµ–çš„æ¨¡å—ï¼Œè€Œæˆ‘ä»¬ä¹Ÿåœ¨æ¨¡å—ä¸­è°ƒç”¨äº†æ¨¡å—Açš„add()æ–¹æ³•ã€‚</p>\n<p>ä¸Šé¢æˆ‘ä»¬å®šä¹‰çš„æ¨¡å—éƒ½æ²¡æœ‰ä¼ é€’idè¿™ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¼ é€’è¿™ä¸ªå‚æ•°ï¼Œè¿™æ ·å°±åƒæˆ‘ä»¬ç»™æ¨¡å—å»äº†ä¸€ä¸ªåå­—ï¼Œæ‰€ä»¥å¸¦æœ‰idè¿™ä¸ªå‚æ•°çš„æ¨¡å—å«åšå…·åæ¨¡å—ï¼š</p>\n<pre><code>define(&#39;index&#39;, [&#39;A&#39;], function(A){\n    ...\n});\n</code></pre><p>ä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šæ‰‹åŠ¨çš„å»å†™ï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨ä½¿ç”¨æ„å»ºå·¥å…·ä¼˜åŒ–é¡¹ç›®çš„æ—¶å€™ï¼Œå¦‚æˆ‘ä»¬ä½¿ç”¨gulpé…åˆrjsåˆå¹¶æ¨¡å—çš„æ—¶å€™ï¼Œè‡ªåŠ¨å»å¸®æˆ‘ä»¬å¡«å……æ¨¡å—idã€‚</p>\n<p>æœ€åï¼Œä»‹ç»ä¸€ä¸‹AMDè§„èŒƒå…¼å®¹Commonjsè§„èŒƒçš„ä¸€ä¸ªæ¨¡å—å®šä¹‰å†™æ³•ï¼š</p>\n<pre><code>define(function(require, exports, module){\n    var m = require(&#39;m1&#39;);\n\n    exports.A = function(){\n        return m.add();\n    }\n});\n</code></pre><p>æˆ‘ä»¬åœ¨å‡½æ•°ä¸­æ˜¾ç¤ºçš„ä¼ é€’äº†ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯requireï¼Œexportså’Œmoduleï¼Œè¿™ä¸‰ä¸ªå˜é‡æ˜¯å…¨å±€çš„ï¼Œå…¶ä¸­requireæ˜¯ç”¨æ¥åŠ è½½å…¶ä»–æ¨¡å—çš„ï¼Œexportsæ˜¯ç”¨æ¥å¯¼å‡ºæ¨¡å—æ¥å£çš„ï¼Œmoduleæ˜¯æ¨¡å—å¯¹è±¡æœ¬èº«ã€‚</p>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬è®²è§£ä¸€ä¸‹requrieï¼Œrequireæ˜¯ç”¨æ¥å¼•ç”¨æ¨¡å—çš„ï¼ŒåŠåŠ è½½æ¨¡å—ï¼Œä¸Šé¢æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†require()æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼ é€’äº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŠæ¨¡å—çš„åç§°ï¼Œå»åŠ è½½æ¨¡å—ï¼Œå®é™…ä¸Šæˆ‘ä»¬è¿˜å¯ä»¥ä¼ é€’ä¾èµ–æ•°ç»„ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>require([&#39;A&#39;, &#39;B&#39;], function(A, B){\n    // ...\n});\n</code></pre><p>è¿™æ ·ï¼Œjså¤§æ¦‚çš„æ¨¡å—åŒ–å†å²å’ŒAMDè§„èŒƒæˆ‘ä»¬å°±ç®€å•ä»‹ç»å®Œäº†ï¼Œç”±äºæˆ‘ä»¬è¿™ç¯‡æ–‡ç« ç»¼åˆæ€§æ¯”è¾ƒå¼ºï¼Œå¦‚æœæƒ³æ·±å…¥äº†è§£AMDï¼Œç‚¹å‡»è¿™é‡Œï¼š<a href=\"https://github.com/amdjs/amdjs-api/blob/master/require.md\" target=\"_blank\" rel=\"external\">AMD</a></p>\n<p>è¿™ç¯‡æ–‡ç« å°±åˆ°è¿™é‡Œï¼Œä¸‹ä¸€ç« æˆ‘ä»¬ç»“åˆå®é™…çš„æ¡ˆä¾‹ä»”ç»†è®¨è®ºä¸€ä¸‹requirejsï¼Œå¹¶ç›¸ä¿¡æˆ‘ï¼Œä¸€å®šæœ‰ä½ èƒ½å­¦åˆ°çš„ä¸œè¥¿ã€‚</p>\n<p>å¦‚æœå¯¹ä½ æœ‰ç”¨ï¼Œæ„Ÿè°¢æåŠ©ã€‚</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511122.pic.jpg\" alt=\"æ”¯ä»˜å®äºŒç»´ç \"></p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>å‰ç«¯çš„è‡ªåŠ¨åŒ–ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯è®©ä¸€ä»¶äº‹èƒ½å¤Ÿåœ¨æˆ‘ä»¬çš„ä¸€æ¡å‘½ä»¤ä¸‹å°±èƒ½å¤Ÿè‡ªåŠ¨å»æ‰§è¡Œå¹¶å¾ˆå¥½çš„å®Œæˆï¼Œè€Œä¸å†éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»é‡å¤è¿™äº›å·¥ä½œï¼Œè¿™ä¸ªç³»åˆ—æ–‡ç« ä¸ä»…ä»…å»å•ä¸€çš„è®²è¿°æ¯ä¸€å—çŸ¥è¯†ç‚¹æˆ–è€…å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œå› ä¸ºç½‘ä¸Šçš„æ–‡ç« å·²ç»å¾ˆå¤šäº†ï¼Œè€Œæ˜¯åœ¨æ¸…æ™°çš„ç»™è¯»è€…è®²è¿°è¿™äº›â€œå·¥å…·â€ç”¨æ³•çš„åŒæ—¶ï¼ŒçœŸæ­£çš„æŠŠä»–ä»¬ç»„åˆåœ¨ä¸€èµ·å¹¶ä¸”æ­å»ºä¸€ä¸ªé¡¹ç›®æ¡†æ¶é›å½¢æ¥ï¼Œæœ¬ç³»åˆ—æ–‡ç« æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹æœ‰ï¼š</p>\n</blockquote>\n<ul>\n<li>jsçš„æ¨¡å—åŒ–ï¼ˆé‡ç‚¹åœ¨AMDè§„èŒƒï¼‰</li>\n<li>requirejsçš„ä»‹ç»åŠä½¿ç”¨</li>\n<li>rjsçš„ä½¿ç”¨</li>\n<li>æ–°ä¸€ä»£æ„å»ºå·¥å…·gulpçš„ä»‹ç»åŠä½¿ç”¨</li>\n<li>ç»„åˆä»¥ä¸Šå·¥å…·æ­å»ºå‰ç«¯è‡ªåŠ¨åŒ–å¼€å‘æ¡†æ¶</li>\n</ul>","more":"<h1 id=\"å†™åœ¨å‰é¢\"><a href=\"#å†™åœ¨å‰é¢\" class=\"headerlink\" title=\"å†™åœ¨å‰é¢\"></a>å†™åœ¨å‰é¢</h1><p>å…¶å®ä¸Šé¢çš„æ¯ä¸€ä¸ªçŸ¥è¯†ç‚¹éƒ½å¯ä»¥å•ç‹¬æˆæ–‡ï¼Œä½†æ˜¯æˆ‘åˆä¸å–œæ¬¢æŠŠæœ¬åº”è¯¥æ˜¯â€œä¸€ä»¶äº‹â€çš„ä¸œè¥¿æ‹†åˆ†çš„ä¸ƒé›¶å…«ç¢ï¼Œç½‘ä¸Šå¾ˆå¤šæ–‡ç« éƒ½æ˜¯å…¶ä¸­æŸä¸€ä¸ªçŸ¥è¯†ç‚¹çš„æ€»ç»“ã€ä»‹ç»æˆ–è€…ä½¿ç”¨ï¼Œè¿™æ ·çš„å¼Šç«¯å°±æ˜¯ï¼Œè¯»è€…èƒ½å¤Ÿçœ‹çš„æ˜ç™½ä½ åœ¨è¯´ä»€ä¹ˆï¼Œä¹ŸçŸ¥é“è¿™äº›å·¥å…·æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œä½†æ˜¯ååä¸ä¼šæŠŠä»–ä»¬æ”¾åœ¨ä¸€å—ç»„åˆå»ä½¿ç”¨ï¼Œè€Œä¸”è¯»è€…å¯èƒ½åœ¨æœç´¢å¼•æ“ä¸­æœç´¢çŸ¥è¯†ç‚¹çš„æ—¶å€™éƒ½æ˜¯å•ç‹¬å»æœç´¢ï¼Œè¿™æ ·å­¦ä¹ ä¸åŒçš„çŸ¥è¯†ç‚¹éœ€è¦é˜…è¯»çš„æ–‡ç« å¹¶ä¸æ˜¯åŒä¸€ä¸ªäººå¾—æ–‡ç« ï¼Œè¿™æ ·åœ¨æ€è·¯ä¸Šå’Œä¾‹å­ä»£ç ä¸Šå¾ˆéš¾è”ç³»åˆ°ä¸€å—ï¼Œå› ä¸ºæœ¬äººå½“æ—¶å¤§æ¦‚å°±ç»å†è¿‡è¿™æ ·çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥è¶‹äºè¿™æ ·çš„åŸå› ï¼Œæˆ‘å†³å®šæ¥å†™æ­¤ç³»åˆ—æ–‡ç« ï¼Œç”±äºä½œè€…æ°´å¹³æœ‰é™ï¼Œå¹¶ä¸”å¤šæ˜¯æŠ±ç€ç§¯ç´¯å­¦ä¹ å’Œåˆ†äº«çš„æ€åº¦ï¼Œæ‰€ä»¥ç‰¹åˆ«å¸Œæœ›å¤§å®¶èƒ½å¤Ÿç»™ä¸æŒ‡æ­£å’Œå»ºè®®ã€‚</p>\n<p>å¥½å•¦ï¼Œæ¥ä¸‹æ¥å¼€å§‹æˆ‘çš„ç³»åˆ—æ–‡ç« ç¬¬ä¸€ç¯‡ã€‚</p>\n<h1 id=\"ä¸€ã€jsæ¨¡å—åŒ–ä¸AMD\"><a href=\"#ä¸€ã€jsæ¨¡å—åŒ–ä¸AMD\" class=\"headerlink\" title=\"ä¸€ã€jsæ¨¡å—åŒ–ä¸AMD\"></a>ä¸€ã€jsæ¨¡å—åŒ–ä¸AMD</h1><h3 id=\"å…ƒæŸäººæ—¶æœŸï¼Œæˆ‘å›½æœ€æ—©çš„äººç±»ï¼Œè·ä»Šçº¦170ä¸‡å¹´\"><a href=\"#å…ƒæŸäººæ—¶æœŸï¼Œæˆ‘å›½æœ€æ—©çš„äººç±»ï¼Œè·ä»Šçº¦170ä¸‡å¹´\" class=\"headerlink\" title=\"å…ƒæŸäººæ—¶æœŸï¼Œæˆ‘å›½æœ€æ—©çš„äººç±»ï¼Œè·ä»Šçº¦170ä¸‡å¹´\"></a>å…ƒæŸäººæ—¶æœŸï¼Œæˆ‘å›½æœ€æ—©çš„äººç±»ï¼Œè·ä»Šçº¦170ä¸‡å¹´</h3><p>ç®€ä»‹ï¼šjavascriptè¿™é—¨è¯­è¨€å¾ˆçµæ´»ï¼Œä½†æ˜¯åœ¨æœ€åˆé˜¶æ®µæ¨¡å—åŒ–å¹¶æ²¡æœ‰å—åˆ°é‡è§†ï¼Œæ˜¯åæ¥nodejsçš„å‡ºç°ï¼Œä½¿å¾—jsåœ¨æµè§ˆå™¨ç«¯çš„æ¨¡å—åŒ–è¿…é€Ÿå´›èµ·ï¼Œé‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–ï¼Œæˆ‘ä»¬ä»å¤´æ¥ã€‚</p>\n<p>åœ¨å…ƒæŸäººæ—¶æœŸï¼Œäººç±»å†™jsä»£ç éƒ½æ˜¯è¿™æ ·çš„ï¼Œåœ¨headæ ‡ç­¾ä¸­æˆ–è€…bodyç»“æŸæ ‡ç­¾çš„ä¸Šé¢é€šè¿‡scriptæ ‡ç­¾å¼•å…¥ä¸€ä¸ªjsè„šæœ¬æ–‡ä»¶ï¼š</p>\n<pre><code>    &lt;script src=&quot;a.js&quot;&gt;&lt;/script&gt;\n</code></pre><p>äºæ˜¯æ‰€æœ‰çš„ä»£ç éƒ½å†™åœ¨äº† a.js è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œåæ¥ï¼Œä»£ç è¶Šæ¥è¶Šå¤šï¼Œå¦‚æœå…¨éƒ¨å†™åœ¨a.jsæ–‡ä»¶ä¸­ä¼šä½¿å¾—ä»£ç éå¸¸ä¸å¥½ç»´æŠ¤ï¼Œè‡³äºä¸ºä»€ä¹ˆä¸å¥½ç»´æŠ¤ï¼ˆè‡ªå·±è„‘è¡¥ï¼‰ï¼Œä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹2000è¡Œçš„jsæ–‡ä»¶ï¼Œç„¶åä½ å¿˜è®°ä¸€ä¸ªå‡½æ•°çš„åç§°ï¼Œäºæ˜¯åœ¨å†™ä»£ç çš„æ—¶å€™ä¸Šä¸‹æ‹‰æ¥æ‹‰å»ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚è¿™æ ·ï¼Œäººä»¬è‡ªç„¶çš„å°±æƒ³åˆ°åˆ†å‡ºå‡ ä¸ªjsæ–‡ä»¶ï¼Œäºæ˜¯ï¼Œèªæ˜çš„å…ƒæŸäººå°±æŠŠä¸€äº›ç±»ä¼¼äºè·å–å…ƒç´ ï¼Œæ·»åŠ classç­‰ç­‰ç­‰ç­‰åŠŸèƒ½å°è£…æˆä¸€ä¸ªä¸ªçš„å‡½æ•°ï¼Œå•ç‹¬çš„å†™åœ¨ä¸€ä¸ªjsæ–‡ä»¶é‡Œï¼Œå–åå«åšutil.jsï¼Œæ„æ€æ˜¯å·¥å…·æ–‡ä»¶çš„æ„æ€ï¼Œä»¥åéœ€è¦ç”¨åˆ°è¿™äº›å‡½æ•°çš„è¯å°±ç›´æ¥å¼•å…¥è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>    &lt;script src=&quot;util.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;a.js&quot;&gt;&lt;/script&gt;\n</code></pre><p>åæ¥å…ƒæŸäººå‘ç°ï¼Œå·¥å…·æ–‡ä»¶util.jsçš„å†…å®¹ä¹Ÿå˜çš„è¶Šæ¥è¶Šå¤šï¼Œäºæ˜¯åˆæŠŠä¸åŒåŠŸèƒ½çš„å‡½æ•°åŒºåˆ†å¼€æ¥ï¼Œå†™åœ¨ä¸åŒçš„æ–‡ä»¶é‡Œï¼Œæ¯”å¦‚æŠŠajaxæ“ä½œå‡½æ•°éƒ½åˆ†è£…åœ¨äº†ajax.jsæ–‡ä»¶ä¸­ï¼ŒæŠŠæ“ä½œDOMå…ƒç´ çš„å‡½æ•°å°è£…åœ¨äº†dom.jsæ–‡ä»¶ä¸­ç­‰ç­‰ï¼Œäºæ˜¯ï¼Œhtmlé¡µé¢å¼•å…¥çš„jsæ–‡ä»¶çœ‹ä¸Šå»å°±æˆäº†è¿™æ ·ï¼š</p>\n<pre><code>    &lt;script src=&quot;ajax.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;dom.js&quot;&gt;&lt;/script&gt;\n    ...\n    ...\n    &lt;script src=&quot;a.js&quot;&gt;&lt;/script&gt;\n</code></pre><p>é‚£ä¹ˆè¿™æ ·åšçš„åå¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š<br>1 htmlæ–‡ä»¶ä¸­å¼•å…¥äº†è¿‡å¤šçš„jsè„šæœ¬æ–‡ä»¶ï¼Œè¿™ä¸ä¼šä½¿å¾—æµè§ˆå™¨å‘å‡ºå¾ˆå¤šæ¬¡httpè¯·æ±‚ï¼Œè¿™æ˜¯å½±å“é¡µé¢æ€§èƒ½çš„æœ€ç³Ÿç³•å› ç´ ã€‚<br>2 æ‰€æœ‰å˜é‡åŠå‡½æ•°éƒ½æ˜¯å…¨å±€å˜é‡ï¼Œææ˜“å†²çªï¼Œæ¯”å¦‚a.jsä¸­æœ‰ä¸ªå˜é‡objï¼Œb.jsä¸­ä¹Ÿæœ‰ä¸ªå˜é‡objã€‚<br>3 ä¾èµ–é¡ºåºä¸æ˜“ç®¡ç†ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸Šé¢çš„ä»£ç ï¼Œdom.jsä¾èµ–ajax.jsä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆä½ å¿…é¡»å…ˆå¼•å…¥ajax.jsæ–‡ä»¶å†å¼•å…¥dom.jsæ–‡ä»¶ã€‚</p>\n<h3 id=\"åŒ—äº¬äººæ—¶æœŸï¼Œè·ä»Šçº¦20-70ä¸‡å¹´\"><a href=\"#åŒ—äº¬äººæ—¶æœŸï¼Œè·ä»Šçº¦20-70ä¸‡å¹´\" class=\"headerlink\" title=\"åŒ—äº¬äººæ—¶æœŸï¼Œè·ä»Šçº¦20 ~ 70ä¸‡å¹´\"></a>åŒ—äº¬äººæ—¶æœŸï¼Œè·ä»Šçº¦20 ~ 70ä¸‡å¹´</h3><p>æ­¤åŒ—äº¬äººéå½¼åŒ—äº¬äººï¼Œæœ‰ç‚¹å†å²å¸¸è¯†çš„éƒ½åº”è¯¥æ˜ç™½ = =ã€‚<br>åŒ—äº¬äººå¾ˆèªæ˜çš„ï¼Œä»–ä»¬å‘ç°äº†ä¸Šé¢çš„é—®é¢˜åï¼Œæå‡ºï¼Œå¦‚æœæ¯ä¸€ä¸ªæ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼ˆå˜é‡å’Œå‡½æ•°ï¼‰ï¼Œéƒ½ç”¨ä¸€ä¸ªå¯¹è±¡å­˜å‚¨ï¼Œè¿™æ ·å°±èƒ½æ‰“æ‰“å‡å°å†²çªçš„å¯èƒ½ï¼Œå‡å¦‚æˆ‘ä»¬å°†dom.jsä¸­çš„å‡½æ•°éƒ½æ”¾åœ¨ä¸€ä¸ªå¯¹è±¡ä¸‹é¢ï¼Œäºæ˜¯dom.jså°±å˜æˆäº†è¿™æ ·ï¼š</p>\n<pre><code>var Dom = {\n    // è·å–å…ƒç´ \n    getEle : function(){...},\n    // å…‹éš†å…ƒç´ \n    cloneEle : function(){...},    \n    // å…¶ä»–domæ–¹æ³•\n    ...\n};\n</code></pre><p>åŒ—äº¬äººçš„ç¡®ç¼“è§£äº†å˜é‡å†²çªçš„é—®é¢˜ï¼Œæ³¨æ„ï¼Œæˆ‘ç”¨çš„æ˜¯â€œç¼“è§£â€å¹¶ä¸æ˜¯â€œè§£å†³â€ï¼Œå› ä¸ºè¿™æ ·åšåªèƒ½å‡å°‘å†²çªï¼Œä¸èƒ½ä¿è¯ä¸€å®šä¸ä¼šå†²çªï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨è¿™äº›å‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šåƒè¿™æ ·ï¼š</p>\n<pre><code>Dom.getEle();\n</code></pre><p>å¦‚æœå±‚çº§æ·±å¾—è¯è¿˜å¯èƒ½ç±»ä¼¼äºè¿™æ ·ï¼š</p>\n<pre><code>Dom.XXX.getEle();\n</code></pre><p>è¿™å¹¶ä¸æ˜¯è¯»è€…åœ¨æœæ’°ï¼Œåœ¨ä¸ºäº†æš´éœ²ç¼ºç‚¹è€Œä¹±å†™çš„ï¼Œæ¥çœ‹çœ‹Yahoo! çš„ YUI2 é¡¹ç›®ï¼Œä¸‹é¢æ˜¯ä¸€æ®µçœŸå®çš„ä»£ç ï¼š</p>\n<pre><code>if (org.cometd.Utils.isString(response)) {\n  return org.cometd.JSON.fromJSON(response);\n}\n</code></pre><p>è¿™æ ·æ˜¯å¾ˆè®©äººæ¼ç«çš„ï¼Œæˆ‘ä¸ºäº†ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¦è®°ä½ä¸€å¤§ä¸²çš„è°ƒç”¨å…³ç³»ï¼Œå†™èµ·æ¥ä¹Ÿç‰¹åˆ«éº»çƒ¦ï¼Œå‡å¦‚æˆ‘è®°ä¸ä½è°ƒç”¨å…³ç³»æˆ‘è¿˜è¦å»æŸ¥è¯¢ï¼ŒåŠå…¶å½±å“å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”è¿™ç§åšæ³•ä¹Ÿä»…ä»…æ˜¯ç¼“è§£äº†å‘½åå†²çªçš„é—®é¢˜å¹¶æ²¡æœ‰çœŸæ­£è§£å†³ï¼ŒåŒ…æ‹¬æ–‡ä»¶ä¾èµ–å…³ç³»çš„å¤„ç†ï¼Œå’Œé¡µé¢éœ€è¦å‘é€çš„httpè¯·æ±‚æ•°é‡ç­‰é—®é¢˜ä¾æ—§æ²¡æœ‰å¾—åˆ°å¤„ç†ã€‚</p>\n<p>åæ¥çš„ å±±é¡¶æ´äººã€åŠå¡äººã€æ²³å§†æ¸¡äººé€šé€šæ²¡æœ‰è§£å†³è¿™ç±»é—®é¢˜ï¼ˆè°çŸ¥é“æœ‰æ²¡æœ‰è§£å†³å‘¢~ ~ï¼Œä¹Ÿæ˜¯é†‰äº†ï¼‰</p>\n<p>ä½†æ˜¯å†è‹¦éš¾çš„é—®é¢˜éƒ½éš¾ä¸å€’æˆ‘ä»¬â€œæ–°äººç±»â€çš„æ™ºæ…§ï¼Œä»€ä¹ˆå«æ–°äººç±»ï¼Ÿ æ–°äººç±» == â€˜è´¿èµ‚ï¼Œèµ°å…³ç³»ï¼Œä¹±ç”¨èŒæƒï¼Œå…¬å“ç§ç”¨â€¦â€¦â€™ ï¼Œå’³å’³ï¼Œå›åˆ°æ­£é¢˜ï¼Œé‚£ä¹ˆæ–°äººç±»åˆ°åº•æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿåœ¨ç»å†äº†å±±é¡¶æ´äººã€åŠå¡äººã€æ²³å§†æ¸¡äººä¹‹åï¼Œäººä»¬å·²ç»æ·±æ·±çš„è¢«è¿™ç§é—®é¢˜æ‰€ç—›æ¶ï¼Œè®¤è¯†åˆ°äº†æ¨¡å—åŒ–çš„å¿…è¦æ€§ï¼Œæ‰€ä»¥è¯´ï¼Œæ¨¡å—åŒ–ç›®çš„åœ¨äºè§£å†³ä»¥ä¸‹é—®é¢˜ï¼š</p>\n<ul>\n<li>æ–‡ä»¶çš„ä¾èµ–å…³ç³»</li>\n<li>é¿å…æ±¡æŸ“å…¨å±€ç¯å¢ƒï¼Œå¯¼è‡´å‘½åå†²çª</li>\n<li>ä½¿ç¼–ç è¿‡ç¨‹å˜å¾—ä¼˜é›…</li>\n<li>æ€§èƒ½å¾—åˆ°æå‡</li>\n</ul>\n<p>ä½†æ˜¯äººä»¬çš„ç¡®æ˜¯è®¤è¯†åˆ°äº†æ¨¡å—åŒ–çš„é‡è¦è¡Œï¼Œå¯çœŸæ­£æ™®åŠè¿˜è¦å½’åŠŸäºnodejsçš„å‡ºç°ï¼Œnodejsæ˜¯æœåŠ¡å™¨ç«¯javascriptçš„å®ç°ï¼Œå¦‚æœä½ ä½¿ç”¨nodejsä½ ä¼šå‘ç°å¯ä»¥ä½¿ç”¨require()æ–¹æ³•åŠ è½½æ¨¡å—ï¼Œä½¿ç”¨define()å®šä¹‰æ¨¡å—ç­‰ï¼Œå®é™…ä¸Šnodejséµå¾ªçš„æ˜¯Commonjsè§„èŒƒï¼Œä¹‹æ‰€ä»¥è¦æœ‰è§„èŒƒæ˜¯ä¸ºäº†ç»Ÿä¸€ç¼–ç çš„æ–¹å¼ï¼Œå› ä¸ºjsæ˜¯ä¸€é—¨å¾ˆçµæ´»çš„è¯­è¨€ï¼Œå®ç°æ¨¡å—å˜æˆçš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œä½ å†™ä¸€ç§æˆ‘å†™ä¸€ç§è¿™å²‚ä¸æ˜¯å°±ä¹±å¥—äº†ï¼Œç›®å‰åœ¨javascriptä¸­æœ‰ä¸‰ç§è§„èŒƒï¼Œåˆ†åˆ«æ˜¯Commonjsè§„èŒƒã€AMDè§„èŒƒã€CMDè§„èŒƒã€‚ä¸‰è€…ä¹‹é—´çš„åŒºåˆ«è¯´å®è¯ï¼Œçš„ç¡®æœ‰ï¼Œä½†æ˜¯ä¸å¤§ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è¦ä»‹ç»çš„å°±æ˜¯AMDè§„èŒƒï¼Œå¹¶ä¸”requirejsæ˜¯AMDè§„èŒƒçš„ä¸€ä¸ªå®ç°ã€‚</p>\n<h3 id=\"AMDè§„èŒƒ\"><a href=\"#AMDè§„èŒƒ\" class=\"headerlink\" title=\"AMDè§„èŒƒ\"></a>AMDè§„èŒƒ</h3><p>AMD(Asynchronous Module Definition) è¯‘ä¸ºâ€œå¼‚æ­¥æ¨¡å—å®šä¹‰â€ï¼Œä¸ºä»€ä¹ˆæ˜¯å¼‚æ­¥æ¨¡å—å®šä¹‰å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œnodejsä¸­ä½¿ç”¨requireå»åŠ è½½æ¨¡å—çš„æ—¶å€™ï¼Œæ¨¡å—å¤šåœ¨å†…å­˜æˆ–ç£ç›˜ä¸­ï¼Œè€Œä¸”åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œéœ€è¦é€šè¿‡ç½‘ç»œè¯·æ±‚å»åŠ è½½æ¨¡å—ï¼Œè¿™ä¸ä»å†…å­˜æˆ–ç£ç›˜ä¸­åŠ è½½æ¨¡å—æ ¹æœ¬å°±ä¸åœ¨ä¸€ä¸ªé‡çº§ä¸Šï¼Œå‡å¦‚æˆ‘ä»¬åŒæ­¥åŠ è½½æ¨¡å—çš„è¯ï¼Œæµè§ˆå™¨ä¼šåœæ»åœ¨è¿™é‡Œå‡ºç°å‡æ­»çš„çŠ¶æ€ï¼Œè¦ç­‰åˆ°æ‰€æœ‰æ¨¡å—å…¨éƒ¨åŠ è½½å®Œä¹‹åæ‰ä¼šç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªé€‚ç”¨äºæµè§ˆå™¨ç«¯å®ç°æ¨¡å—åŒ–çš„è§„èŒƒï¼Œè€Œè¿™ä¹Ÿæ˜¯AMDè§„èŒƒçš„æˆå› ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ï¼ŒAMDè§„èŒƒä¸­æˆ‘ä»¬å¦‚ä½•å»å†™ä»£ç ï¼Œå…¶ä¸­æˆ‘ä»¬åªéœ€è¦å…³æ³¨å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œå’Œå¦‚ä½•ä½¿ç”¨æ¨¡å—ã€‚</p>\n<h4 id=\"å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å—\"><a href=\"#å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å—\" class=\"headerlink\" title=\"å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å—\"></a>å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¨¡å—</h4><p>AMDè§„èŒƒè§„å®šä½¿ç”¨define()æ–¹æ³•å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œdefineæ–¹æ³•å¦‚ä¸‹ï¼š</p>\n<p>define(id?, dependencies?, factory);</p>\n<p>å‚æ•°è¯´æ˜ï¼š<br>    id {String} æ¨¡å—æ ‡è¯†ï¼Œå¯ä»¥çœç•¥ã€‚<br>    dependencies {Array} æ‰€ä¾èµ–çš„æ¨¡å—æ•°ç»„ï¼Œå¯ä»¥çœç•¥ã€‚<br>    factory {Object} | {Function} æ¨¡å—çš„å®ç°ã€‚</p>\n<p>çœ‹ä¸‹é¢çš„ä»£ç ï¼Œå®šä¹‰äº†ä¸€ä¸ªæ¨¡å—ï¼Œè¯¥æ¨¡å—æ²¡æœ‰ä¾èµ–ä»»ä½•å…¶ä»–æ¨¡å—ï¼Œä¹Ÿæ²¡æœ‰åå­—ï¼ˆå³æ²¡æœ‰idè¿™ä¸ªå‚æ•°ï¼‰ï¼š</p>\n<pre><code>define(function(){\n    return {\n        a : &#39;1&#39;,\n        b : &#39;2&#39;\n    }\n});\n</code></pre><p>åƒä¸Šé¢çš„ä»£ç ï¼Œå¦‚æœåªæ˜¯ç®€å•çš„è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š</p>\n<pre><code>define({\n    a : &#39;1&#39;,\n    b : &#39;2&#39;\n});\n</code></pre><p>ä¸Šé¢å®šä¹‰çš„æ¨¡å—è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼ŒAMDè§„å®šï¼Œè¿”å›çš„å¯¹è±¡ï¼Œå³ä¸ºè¯¥æ¨¡å—å¯¹è±¡ã€‚ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>define(function(){\n    var m = function(){\n\n    };\n\n    return m;\n\n});\n</code></pre><p>å¦‚æœä½ ç¼–å†™çš„æ¨¡å—éœ€è¦ä½¿ç”¨å…¶ä»–æ¨¡å—ä¸­çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦ä¾èµ–é‚£ä¸ªæ¨¡å—ï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±å¯ä»¥ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸ºä½ ä¾èµ–æ¨¡å—çš„åç§°ï¼š</p>\n<pre><code>define([&#39;A&#39;, &#39;B&#39;], function(A, B){\n\n    A.add();\n\n    return {\n        a : &#39;1&#39;,\n        b : &#39;2&#39;\n    }\n});\n</code></pre><p>ä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªæ¨¡å—ï¼Œè¯¥æ¨¡å—ä¾èµ–ä¸¤ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«æ˜¯æ¨¡å—Aå’Œæ¨¡å—Bï¼Œæ³¨æ„æˆ‘ä»¬åœ¨å‡½æ•°ä¸­ä¼ é€’äº†ä¸ä¾èµ–æ•°ç»„ä¸­ä¸€ä¸€å¯¹åº”çš„å½¢å¼å‚æ•°ï¼Œä»¥ä¾¿åœ¨æ¨¡å—ä¸­ä½¿ç”¨ä¾èµ–çš„æ¨¡å—ï¼Œè€Œæˆ‘ä»¬ä¹Ÿåœ¨æ¨¡å—ä¸­è°ƒç”¨äº†æ¨¡å—Açš„add()æ–¹æ³•ã€‚</p>\n<p>ä¸Šé¢æˆ‘ä»¬å®šä¹‰çš„æ¨¡å—éƒ½æ²¡æœ‰ä¼ é€’idè¿™ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¼ é€’è¿™ä¸ªå‚æ•°ï¼Œè¿™æ ·å°±åƒæˆ‘ä»¬ç»™æ¨¡å—å»äº†ä¸€ä¸ªåå­—ï¼Œæ‰€ä»¥å¸¦æœ‰idè¿™ä¸ªå‚æ•°çš„æ¨¡å—å«åšå…·åæ¨¡å—ï¼š</p>\n<pre><code>define(&#39;index&#39;, [&#39;A&#39;], function(A){\n    ...\n});\n</code></pre><p>ä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šæ‰‹åŠ¨çš„å»å†™ï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨ä½¿ç”¨æ„å»ºå·¥å…·ä¼˜åŒ–é¡¹ç›®çš„æ—¶å€™ï¼Œå¦‚æˆ‘ä»¬ä½¿ç”¨gulpé…åˆrjsåˆå¹¶æ¨¡å—çš„æ—¶å€™ï¼Œè‡ªåŠ¨å»å¸®æˆ‘ä»¬å¡«å……æ¨¡å—idã€‚</p>\n<p>æœ€åï¼Œä»‹ç»ä¸€ä¸‹AMDè§„èŒƒå…¼å®¹Commonjsè§„èŒƒçš„ä¸€ä¸ªæ¨¡å—å®šä¹‰å†™æ³•ï¼š</p>\n<pre><code>define(function(require, exports, module){\n    var m = require(&#39;m1&#39;);\n\n    exports.A = function(){\n        return m.add();\n    }\n});\n</code></pre><p>æˆ‘ä»¬åœ¨å‡½æ•°ä¸­æ˜¾ç¤ºçš„ä¼ é€’äº†ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯requireï¼Œexportså’Œmoduleï¼Œè¿™ä¸‰ä¸ªå˜é‡æ˜¯å…¨å±€çš„ï¼Œå…¶ä¸­requireæ˜¯ç”¨æ¥åŠ è½½å…¶ä»–æ¨¡å—çš„ï¼Œexportsæ˜¯ç”¨æ¥å¯¼å‡ºæ¨¡å—æ¥å£çš„ï¼Œmoduleæ˜¯æ¨¡å—å¯¹è±¡æœ¬èº«ã€‚</p>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬è®²è§£ä¸€ä¸‹requrieï¼Œrequireæ˜¯ç”¨æ¥å¼•ç”¨æ¨¡å—çš„ï¼ŒåŠåŠ è½½æ¨¡å—ï¼Œä¸Šé¢æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†require()æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼ é€’äº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŠæ¨¡å—çš„åç§°ï¼Œå»åŠ è½½æ¨¡å—ï¼Œå®é™…ä¸Šæˆ‘ä»¬è¿˜å¯ä»¥ä¼ é€’ä¾èµ–æ•°ç»„ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>require([&#39;A&#39;, &#39;B&#39;], function(A, B){\n    // ...\n});\n</code></pre><p>è¿™æ ·ï¼Œjså¤§æ¦‚çš„æ¨¡å—åŒ–å†å²å’ŒAMDè§„èŒƒæˆ‘ä»¬å°±ç®€å•ä»‹ç»å®Œäº†ï¼Œç”±äºæˆ‘ä»¬è¿™ç¯‡æ–‡ç« ç»¼åˆæ€§æ¯”è¾ƒå¼ºï¼Œå¦‚æœæƒ³æ·±å…¥äº†è§£AMDï¼Œç‚¹å‡»è¿™é‡Œï¼š<a href=\"https://github.com/amdjs/amdjs-api/blob/master/require.md\" target=\"_blank\" rel=\"external\">AMD</a></p>\n<p>è¿™ç¯‡æ–‡ç« å°±åˆ°è¿™é‡Œï¼Œä¸‹ä¸€ç« æˆ‘ä»¬ç»“åˆå®é™…çš„æ¡ˆä¾‹ä»”ç»†è®¨è®ºä¸€ä¸‹requirejsï¼Œå¹¶ç›¸ä¿¡æˆ‘ï¼Œä¸€å®šæœ‰ä½ èƒ½å­¦åˆ°çš„ä¸œè¥¿ã€‚</p>\n<p>å¦‚æœå¯¹ä½ æœ‰ç”¨ï¼Œæ„Ÿè°¢æåŠ©ã€‚</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511122.pic.jpg\" alt=\"æ”¯ä»˜å®äºŒç»´ç \"></p>"},{"title":"åŸºäºgulp requirejs rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºç³»åˆ—æ–‡ç« (äºŒ)","date":"2015-11-14T02:12:25.000Z","_content":"\n> ä¸Šä¸€ç¯‡ä»‹ç»äº†jsæ¨¡å—åŒ–çš„å†ç¨‹å’ŒAMDè§„èŒƒä¸­è§„å®šæ¨¡å—çš„å®šä¹‰å’Œå¼•ç”¨ï¼Œè¿™ç¯‡æ–‡ç« å°±ä»¥requirejsè¿™ä¸ªAMDè§„èŒƒçš„å®ç°æ¥è®²è§£jsä¸­çš„æ¨¡å—åŒ–å¼€å‘\n\n![requirejs](http://7xlolm.com1.z0.glb.clouddn.com/20151109amd.jpg)\n\n<!-- more -->\n\nå¦‚æœä½ çŸ¥é“äº†AMDè§„èŒƒä¸­è§„å®šçš„jsæ¨¡å—çš„å®šä¹‰æ–¹æ³•å’Œå¦‚ä½•å¼•ç”¨ä¸€ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆrequirejsçš„ä½¿ç”¨å‡ ä¹æ˜¯é›¶æˆæœ¬çš„ï¼Œå› ä¸ºrequirejså°±æ˜¯AMDè§„èŒƒçš„å®ç°ï¼Œä½ å”¯ä¸€éœ€è¦å­¦ä¹ çš„å¯èƒ½å°±æ˜¯ä¸€äº›ä¾¿äºæˆ‘ä»¬ä½¿ç”¨æ¨¡å—çš„é…ç½®ï¼Œå’Œrequirejsçš„ä¸€äº›ç‰¹æ€§ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç”¨ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œæ¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨requirejsã€‚\n\næˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¾ˆå¯èƒ½ä¼šå¼•ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚jQueryç­‰ï¼Œè¿˜è¦å¼•ç”¨æˆ‘ä»¬è‡ªå·±å†™çš„ä¸€äº›jsæ–‡ä»¶ï¼Œåœ¨æœ€åˆï¼Œæˆ‘ä»¬çš„ç›®å½•ç»“æ„çœ‹ä¸Šå»æ˜¯è¿™æ ·çš„ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![åŸå§‹ç›®å½•ç»“æ„](http://7xlolm.com1.z0.glb.clouddn.com/201511141.pic.jpg)\n\næˆ‘ä»¬æœ‰ä¸€ä¸ªindex.htmlæ–‡ä»¶ï¼Œç„¶åå†å»ºç«‹ä¸€ä¸ªåä¸ºjsçš„æ–‡ä»¶å¤¹ï¼ŒæŠŠjQueryåº“å’Œæˆ‘ä»¬è‡ªå·±å†™çš„jsæ–‡ä»¶éƒ½æ”¾åœ¨é‡Œé¢ï¼Œæˆ–è€…å¯èƒ½ä½ è¿˜ä¼šä¸ºjQueryç­‰ç¬¬ä¸‰æ–¹åº“å•ç‹¬å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä½†æœ€ç»ˆåœ¨htmlé¡µé¢ä¸­å¼•ç”¨çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œå³éœ€è¦å‡ ä¸ªjsæ–‡ä»¶ï¼Œå°±éœ€è¦å‡ ä¸ªscriptæ ‡ç­¾ï¼Œå¦‚ä¸‹æ˜¯index.htmlçš„å†…å®¹ï¼š\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n</head>\n<body>\n\n\t<script src=\"js/jquery.min.js\"></script>\n\t<script src=\"js/a.js\"></script>\n\t<script src=\"js/b.js\"></script>\n</body>\n</html>\n```\n\næˆ‘ä»¬å·²ç»äº†è§£äº†ä¸Šé¢ä»£ç çš„ç¼ºç‚¹ï¼š\n* æ±¡æŸ“äº†å…¨å±€å˜é‡ï¼Œä¸åŒæ–‡ä»¶ä¹‹é—´å¯èƒ½ä¼šå‘½åå†²çª\n* æ–‡ä»¶ä¾èµ–å…³ç³»éš¾ä»¥ç»´æŠ¤\n* å‘å‡ºæ›´å¤šçš„httpè¯·æ±‚ï¼Œå½±å“æ€§èƒ½\n\nå†æ¥çœ‹çœ‹æˆ‘ä»¬çš„a.jså’Œb.jsæ–‡ä»¶ï¼š\n\na.js\n```\nvar a = {\n\tcontent : 'a.js'\n}\n```\n\nb.js\n```\nvar b = {\n\tcontent : 'b.js'\n}\n```\n\nè¿™ä¸¤ä¸ªæ–‡ä»¶å¾ˆç®€å•ï¼Œåˆ†åˆ«å®šä¹‰äº†ä¸¤ä¸ªæ±¡æŸ“å…¨å±€çš„å˜é‡aå’Œbã€‚\n\né‚£æˆ‘ä»¬é€šè¿‡requirejsæ¥è§£å†³è¿™äº›é—®é¢˜å‘¢ï¼Ÿé¦–å…ˆï¼Œä½ å¾—æœ‰ä¸ªå¥³æœ‹å‹ï¼Œå“¦ä¸å¯¹ï¼Œä½ å¾—å…ˆæœ‰requirejsåº“ï¼Œæ‰€ä»¥ï¼Œä¸‹è½½è¿æ¥ [requirejsä¸‹è½½](http://www.requirejs.cn/docs/download.html#requirejs)\n\nä¸‹è½½ä¸‹æ¥ä¹‹åï¼Œæˆ‘ä»¬æŠŠrequirejsæ”¾åœ¨ä¸æˆ‘ä»¬index.htmlåŒçº§çš„ç›®å½•ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![requirejsä¸htmlåŒçº§](http://7xlolm.com1.z0.glb.clouddn.com/201511142.pic.jpg)\n\nä¿®æ”¹æˆ‘ä»¬çš„index.htmlï¼Œåªéœ€å¼•å…¥æˆ‘ä»¬åˆšåˆšä¸‹è½½ä¸‹æ¥çš„requirejsï¼š\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n</head>\n<body>\n\n\t<script src=\"require.js\" data-main=\"config\"></script>\n</body>\n</html>\n```\n\nä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼Œscriptæ ‡ç­¾ä¸­data-mainæ˜¯ä»€ä¹ˆï¼Ÿæ˜¯è¿™æ ·çš„ï¼Œrequirejséœ€è¦ä¸€ä¸ªå…¥å£æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸Šæ¥å°±å»æ‰§è¡Œçš„æ¨¡å—ï¼Œç±»ä¼¼äºCè¯­è¨€ä¸­çš„mainå‡½æ•°ã€‚ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å‘Šè¯‰requirejsæˆ‘ä»¬çš„å…¥å£æ¨¡å—æ˜¯config.jsï¼Œç”±äºrequirejsé»˜è®¤æ¨¡å—éƒ½æ˜¯ä»¥.jsä¸ºåç¼€çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœç•¥ï¼Œåªéœ€è¦å†™configå°±å¯ä»¥äº†ï¼Œç„¶åæˆ‘ä»¬åœ¨index.htmlåŒçº§ç›®å½•ä¸‹åˆ›å»ºconfig.jsæ–‡ä»¶å¦‚ä¸‹ï¼š\n\n![config.jsæ–‡ä»¶ä¸index.htmlåŒçº§ç›®å½•](http://7xlolm.com1.z0.glb.clouddn.com/201511143.pic.jpg)\n\nè¿™ä¸ªconfig.jså¯ä»¥çœ‹åšæ˜¯æˆ‘ä»¬çš„å…¥å£æ¨¡å—ï¼Œæˆ–è€…ä¸»æ¨¡å—ï¼Œå½“requirejsåŠ è½½å®Œæˆåï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œconfig.jsæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨config.jsæ–‡ä»¶ä¸­å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š\n\n```\nalert('è¿™æ˜¯config.jsæ–‡ä»¶');\n```\n\nåŒå‡»æ‰“å¼€requirejsæ–‡ä»¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå¦‚ä¸‹å›¾ï¼Œå¦‚æˆ‘ä»¬æ‰€æ„¿ï¼Œconfig.jsè¢«æ‰§è¡Œäº†ï¼š\n\n![config.jsæ–‡ä»¶è¢«æ‰§è¡Œäº†](http://7xlolm.com1.z0.glb.clouddn.com/20151114c.png)\n\nå¦‚æœconfigæ¨¡å—åªæ˜¯ç®€å•çš„alertä¸€å¥è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ²¡æœ‰å¿…è¦ç”¨requirejsäº†ï¼Œä¸€èˆ¬æ¥è®²ï¼Œæˆ‘ä»¬åœ¨ä¸»æ¨¡å—ä¸­å»å¼•ç”¨å…¶ä»–æ¨¡å—ï¼Œå¼€å‘æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼Œåœ¨ä¹‹å‰çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†jQueryåº“ï¼Œa.jså’Œb.jsï¼Œç°åœ¨æˆ‘ä»¬åªå¼•å…¥äº†requirejså¹¶ä¸”å‘Šè¯‰å®ƒæˆ‘ä»¬çš„ä¸»æ¨¡å—æ˜¯config.jsï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨requirejså»åŠ è½½a.jsã€b.jså’ŒjQueryåº“å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“config.jsç¬¦åˆAMDæ¨¡å—ç¼–å†™è§„èŒƒï¼Œä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬å·²ç»è®²è¿‡äº†AMDè§„èŒƒä¸­å¦‚ä½•ç¼–å†™å’Œå¼•ç”¨æ¨¡å—ï¼Œä¸‹é¢æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æŠŠæˆ‘ä»¬çš„æ–‡ä»¶éƒ½ç¼–å†™æˆä¸€ä¸ªä¸ªæ¨¡å—å°±å¥½äº†ï¼Œç”±äºæˆ‘ä»¬å¤šåœ¨ä¸»æ¨¡å—å³config.jsä¸­å»å¼•ç”¨å…¶ä»–æ¨¡å—ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹config.jså¦‚ä¸‹ï¼š\n\n```\nrequire(['a', 'b'], function(A, B){\n\tconsole.log(A);\n\tconsole.log(B);\n});\n```\n\næˆ‘ä»¬åœ¨config.jsä¸­ä½¿ç”¨requireå‡½æ•°å»åŠ è½½æ¨¡å—aå’Œæ¨¡å—bï¼Œæ³¨æ„ï¼Œrequirejsé»˜è®¤æ¨¡å—æ˜¯.jsåç¼€ç»“å°¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å†™aå’Œbå³å¯ï¼Œå®ƒä¼šè‡ªåŠ¨å»åŠ è½½a.jså’Œb.jsï¼Œä½†æ˜¯è¿™æ ·å†™å°±å¯ä»¥äº†å˜›ï¼Ÿæˆ‘ä»¬åˆ·æ–°æµè§ˆå™¨ï¼š\n\n![æŠ¥é”™](http://7xlolm.com1.z0.glb.clouddn.com/2015111422.pic.jpg)\n\næˆ‘ä»¬ä»”ç»†çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œâ€œnet::ERR_FILE_NOT_FOUNDâ€ï¼Œå†çœ‹æ¨¡å—åŠ è½½çš„è·¯å¾„ â€œfile:///Users/huochunyang/hcyObj/temp/a.jsâ€ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬åˆšåˆšåœ¨config.jsä¸­åŠ è½½æ¨¡å—aå’Œbçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä»…ä»…å†™äº†aå’Œbåˆ°ä¾èµ–æ•°ç»„ä¸­ï¼Œå¯æ˜¯requirejsæ€ä¹ˆçŸ¥é“ä½ è¿™ä¸¤ä¸ªæ¨¡å—åœ¨å“ªé‡Œï¼Ÿæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ï¼Œrequirejsé»˜è®¤ä¼šåœ¨å¼•ç”¨requirejsçš„htmlæ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œæ³¨æ„ï¼Œæ˜¯htmlåŒçº§ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œä¸æ˜¯requirejsåŒçº§ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œå½“ç„¶ï¼Œç”±äºæˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­index.htmlå’Œrequirejsæ˜¯åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œæ‰€ä»¥æ€•å¤§å®¶æ··æ·†ã€‚æ—¢ç„¶è¿™æ ·ï¼Œé—®é¢˜å°±å¥½è¯´äº†ï¼Œæˆ‘ä»¬index.htmlåŒçº§ç›®å½•ä¸‹å¹¶æ²¡æœ‰a.jså’Œb.jsè¿™ä¸¤ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ªæ¨¡å—æ”¾åˆ°äº†jsç›®å½•ä¸‹ï¼Œæ‰€ä»¥ï¼Œå½“ç„¶ä¼šæŠ¥é”™å•¦ï¼Œæ—¢ç„¶æ‰¾åˆ°äº†é—®é¢˜çš„åŸå› ï¼Œæˆ‘ä»¬ä¿®æ”¹config.jsæ–‡ä»¶ï¼š\n\n```\nrequire(['js/a', 'js/b'], function(A, B){\n\tconsole.log(A);\n\tconsole.log(B);\n});\n```\n\nå†åˆ·æ–°æµè§ˆå™¨ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![ä¸æŠ¥é”™ï¼Œä½†è¾“å‡ºundefined](http://7xlolm.com1.z0.glb.clouddn.com/201511144.pic.jpg)\n\næ€ä¹ˆæ ·ï¼Ÿä¸æŠ¥é”™äº†å§ï¼Ÿé‚£æ˜¯å› ä¸ºæˆ‘ä»¬å®¶åœ¨æ¨¡å—çš„æ—¶å€™è·¯å¾„å†™çš„æ­£ç¡®ï¼Œrequirejsèƒ½å¤Ÿæ­£ç¡®åŠ è½½æ¨¡å—ï¼Œæ‰€ä»¥å°±ä¸ä¼šæŠ¥é”™äº†ï¼Œä½†æ˜¯ç»†å¿ƒçš„åŒå­¦ä¼šå‘ç°ï¼Œæ€ä¹ˆè¾“å‡ºä¸¤ä¸ªundefinedï¼Ÿåœ¨config.jsä¸­æˆ‘ä»¬åŠ è½½äº†aã€bä¸¤ä¸ªæ¨¡å—åï¼Œåˆ†åˆ«åœ¨logä¸­è¾“å‡ºäº†Aã€Bæ¨¡å—å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä½¿ç”¨requirejsåŠ è½½è¿‡æ¥çš„ä¸¤ä¸ªæ¨¡å—ç«Ÿç„¶æ˜¯undefinedã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬a.jså’Œb.jsä¸­ï¼Œå¹¶æ²¡æœ‰æš—ä¸­AMDè§„èŒƒå»ç¼–å†™æ¨¡å—ä»£ç ï¼Œä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ä»‹ç»äº†å¦‚æœç¼–å†™ä¸€ä¸ªæ¨¡å—ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ”¹å†™a.jså’Œb.jsä¸ºæ¨¡å—çš„å†™æ³•ï¼Œå¦‚ä¸‹ï¼š\n\na.js\n```\ndefine(function(){\n\tvar a = {\n\t\tcontent : 'a.js'\n\t}\n\n\treturn a;\n});\n```\n\nb.js\n```\ndefine(function(){\n\n\tvar b = {\n\t\tcontent : 'b.js'\n\t}\n\n\treturn b;\n\n});\n```\n\nè¿™ä¸¤ä¸ªæ¨¡å—å¾ˆç®€å•ï¼Œæˆ‘ä»¬ä½¿ç”¨returnè¯­å¥è¿”å›ä¸¤ä¸ªå¯¹è±¡ï¼Œè¢«è¿”å›çš„å¯¹è±¡å°±æ˜¯æ¨¡å—å¯¹è±¡ï¼Œä»£è¡¨äº†è¿™ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬åˆ·æ–°æµè§ˆå™¨ï¼š\n\n![è¾“å‡ºæ¨¡å—Aå’ŒB](http://7xlolm.com1.z0.glb.clouddn.com/201511145.pic.jpg)\n\nå¦‚ä½•æˆ‘ä»¬çš„æ¨¡å—Béœ€è¦ä¾èµ–æ¨¡å—Aï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å†™æ¨¡å—Bä¸ºå¦‚ä¸‹ä»£ç ï¼Œåœ¨ä¾èµ–æ•°ç»„ä¸­ä¾èµ–æ¨¡å—Aï¼š\n\n```\ndefine(['js/a'], function(A){\n\n\tvar b = {\n\t\tcontent : 'b.js'\n\t}\n\n\treturn b;\n\n});\n```\n\nä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œæˆ‘ä»¬æ¯æ¬¡å»åŠ è½½æ¨¡å—çš„æ—¶å€™ï¼Œéƒ½è¦å†™å¯¹æ¨¡å—æ‰€åœ¨è·¯å¾„ï¼Œæ¯”å¦‚åŠ è½½æ¨¡å—aï¼Œæˆ‘ä»¬å°±è¦è¿™æ ·å»åŠ è½½ â€œjs/a.jsâ€ ï¼Œå‡å¦‚æˆ‘ä»¬çš„é¡¹ç›®åšçš„æ¯”è¾ƒå¤§ï¼Œæ¨¡å—åˆ†çš„æ¯”è¾ƒæ·±ï¼ŒåŠç›®å½•å±‚çº§æ·±ï¼Œå¦‚æœæˆ‘ä»¬è¿˜è¿™æ ·å»åŠ è½½çš„è¯ï¼Œå¯èƒ½ä¼šå†™æˆä¸‹é¢è¿™æ ·ï¼š\n\n* \"modules/dom/XXX/aaa.js\" *\n\nå¦‚æœæ¯æ¬¡ä¸ºäº†åŠ è½½ä¸€ä¸ªæ¨¡å—éƒ½è¦è¿™æ ·å»å†™çš„è¯ï¼Œç¬¬ä¸€æˆ‘ä»¬è¿˜è¦è®°ä½æ¨¡å—æ‰€åœ¨è·¯å¾„ï¼Œå¦‚æœè®°ä¸ä½çš„è¯è¿˜è¦å»æŸ¥çœ‹ï¼Œå¾ˆå½±å“å¼€å‘æ•ˆç‡ï¼Œç¬¬äºŒå†™èµ·æ¥æ€»æ˜¯æ„Ÿè§‰å¾ˆä¸çˆ½ï¼Œä»£ç çœ‹ç€å¾ˆæ¶å¿ƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°requirejsçš„é…ç½®äº†ï¼Œrequirejsæœ‰ä¸€ä¸ªconfigå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªjsonå¯¹è±¡ï¼Œè®¾ç½®ä¸€äº›é…ç½®é€‰é¡¹ï¼Œæˆ‘ä»¬ä¿®æ”¹config.jså¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tpaths : {\n\t\ta : 'js/a',\n\t\tb : 'js/b'\n\t}\n});\n\n\nrequire(['a', 'b'], function(A, B){\n\tconsole.log(A);\n\tconsole.log(B);\n});\n```\n\né¦–å…ˆæˆ‘ä»¬åœ¨ä½¿ç”¨require()å‡½æ•°å»åŠ è½½æ¨¡å—ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨requirejs.config()æ–¹æ³•å»å¯¹requirejsè¿›è¡Œé…ç½®ï¼Œrequirejs.configæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªpathsé…ç½®é¡¹ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™æ˜¯ä¸€é¡¹è·¯å¾„é…ç½®ï¼Œå†çœ‹ä¸‹é¢ä½¿ç”¨require()å‡½æ•°å»åŠ è½½æ¨¡å—æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥å»åŠ è½½aå’Œbï¼Œè¿™æ ·æ˜¯å¯ä»¥æ­£å¸¸åŠ è½½æ¨¡å—çš„ï¼Œå› ä¸ºåœ¨åŠ è½½aæ¨¡å—çš„æ—¶å€™ï¼Œrequirejså‘ç°åœ¨pathsä¸­é…ç½®çš„è·¯å¾„ä¸­aå¯¹åº”â€œjs/aâ€ï¼Œæ‰€ä»¥ï¼Œrequireä¼šè‡ªåŠ¨å»åŠ è½½js/aæ¨¡å—ï¼Œè€Œä¸æ˜¯åœ¨index.htmlåŒçº§ç›®å½•ä¸‹å»æ‰¾ï¼Œæ‰€ä»¥pathsé…ç½®å°±åƒä¸€ä¸ªè·¯ç”±ï¼Œåˆ·æ–°é¡µé¢ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ä¸­çš„è¾“å‡ºï¼Œæˆ‘ä»¬ç­‰å¾…ç‰‡åˆ»ä¼šå‘ç°ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![åŠ è½½è¶…æ—¶](http://7xlolm.com1.z0.glb.clouddn.com/201511146.pic.jpg)\n\nä»€ä¹ˆï¼ŸåŠ è½½è¶…æ—¶ï¼Ÿä»€ä¹ˆæƒ…å†µï¼Ÿåˆ«ç´§å¼ ï¼Œè¿˜è®°æˆ‘ä»¬çš„b.jsä¸­å—ï¼Ÿæˆ‘ä»¬åœ¨b.jsä¸­ä¾èµ–äº†a.jsï¼Œå¯æ˜¯æˆ‘ä»¬çš„ä»£ç æ˜¯æ€ä¹ˆä¾èµ–çš„å‘¢ï¼Ÿæ‰“å¼€b.jsï¼š\n\n```\ndefine(['js/a'], function(A){\n\n\tvar b = {\n\t\tcontent : 'b.js'\n\t}\n\n\treturn b;\n\n});\n```\n\næˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬ä¾èµ–aï¼Œæ¨¡å—çš„æ—¶å€™ä¾ç„¶ä½¿ç”¨'js/a'è¿›è¡Œä¾èµ–ï¼Œè€Œå½“requirejsåœ¨è§£æ'js/a'çš„æ—¶å€™ï¼Œå‘ç°æœ‰ä¸€ä¸ª'a'ï¼Œç„¶ååˆå†pathsé…ç½®ä¸­å‘ç°'a'å¯¹åº”'js/a',äºæ˜¯ï¼Œrequirejså°±æŠŠ'a'æ¢æˆäº†'js/a'ï¼Œæ‰€ä»¥æ•´ä½“çš„'js/a'æœ€ç»ˆè¢«æ¢æˆäº†'js/js/a'ï¼Œç„¶ååˆå†è·¯å¾„ä¸­å‘ç°äº†aï¼Œäºæ˜¯åŠ è½½è·¯å¾„åˆè¢«æ›¿æ¢æˆäº†'js/js/js/a'ï¼Œå¦‚æ­¤ä¸‹å»ï¼Œæœ€ç»ˆæˆäº†æ­»å¾ªç¯ï¼Œè€Œè¶…è¿‡ä¸€å®šçš„æ—¶é—´ä¹‹åï¼Œå°±ä¼šæŠ¥é”™åŠ è½½è¶…æ—¶ï¼Œæ˜ç™½äº†å§ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æŠŠb.jsä¸­ä¾èµ–a.jsçš„å­—ç¬¦åˆ›ç›´æ¥å†™æˆ'a'å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ï¼š\n\n```\ndefine(['a'], function(A){\n\n\tvar b = {\n\t\tcontent : 'b.js'\n\t}\n\n\treturn b;\n\n});\n```\n\nå†æ¬¡åˆ·æ–°æµè§ˆå™¨ï¼Œæ€ä¹ˆæ ·ï¼Ÿæ­£å¸¸åŠ è½½äº†å§ï¼Ÿè¿™æ ·ä»¥åæˆ‘ä»¬åªè¦éœ€è¦ä¾èµ–aæ¨¡å—ï¼Œæˆ‘ä»¬å°±ç›´æ¥å†™'a'å°±å¯ä»¥äº†ï¼š\n\n![æ­£å¸¸åŠ è½½](http://7xlolm.com1.z0.glb.clouddn.com/201511147.pic.jpg)\n\né‚£ä¹ˆå¥½ï¼Œa.jså’Œb.jsæˆ‘ä»¬éƒ½æ”¹æˆäº†æ¨¡å—çš„ç¼–å†™æ–¹å¼ï¼Œå¹¶ä¸”ä¹Ÿåšäº†pathsé…ç½®ï¼Œæœ€ç»ˆä¹ŸæˆåŠŸåŠ è½½äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜é—æ¼äº†ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯jQueryè¿™ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œé‚£ä¹ˆrequirejsèƒ½å¤ŸåŠ è½½ç¬¬ä¸‰æ–¹åº“å—ï¼Ÿç­”æ¡ˆæ˜¯ï¼šåªè¦ç¬¬ä¸‰æ–¹åº“æä¾›äº†AMDæ¥å£ï¼Œé‚£ä¹ˆrequirejså°±å¯ä»¥åŠ è½½ï¼Œè€ŒjQueryæœ¬èº«ä¹Ÿæä¾›äº†è¿™ä¸ªæ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥åŠ è½½å°±å¥½äº†ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¾ç„¶åœ¨pathsä¸­é…ç½®ä¸€ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tpaths : {\n\t\ta : 'js/a',\n\t\tb : 'js/b',\n\t\t$ : 'js/jquery.min'\n\t}\n});\n```\n\nç„¶ååœ¨configä¸­å»åŠ è½½jQueryå¹¶è¯•ç€ä½¿ç”¨jQueryï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä¿®æ”¹æˆ‘ä»¬çš„config.jså¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tpaths : {\n\t\ta : 'js/a',\n\t\tb : 'js/b',\n\t\tjquery : 'js/jquery.min'\n\t}\n});\n\nrequire(['a', 'b', 'jquery'], function(A, B, $){\n\talert($('html').html());\n\tconsole.log(A);\n\tconsole.log(B);\n});\n```\n\nåˆ·æ–°é¡µé¢ï¼š\n\n![ç¬¬ä¸‰æ–¹åº“åŠ è½½æˆåŠŸ](http://7xlolm.com1.z0.glb.clouddn.com/201511148.pic.jpg)\n\nå¼¹å‡ºå¼¹çª—ï¼Œè¯æ˜æˆ‘ä»¬åŠ è½½jQueryæˆåŠŸå¹¶æˆåŠŸä½¿ç”¨ã€‚\n\nä¸‹é¢æˆ‘ä»¬å†æ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆèƒ½å¤Ÿç›´æ¥é€šè¿‡requirejsåŠ è½½jQueryï¼Ÿæ˜¯å› ä¸ºjQueryè¿™ä¸ªç¬¬ä¸‰æ–¹åº“æä¾›äº†AMDæ”¯æŒï¼Œå¯æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“éƒ½æä¾›äº†AMDæ”¯æŒï¼Œé‚£ä¹ˆrequireå°±ä¸èƒ½åŠ è½½é‚£äº›ç¬¬ä¸‰æ–¹åº“äº†å—ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¾ç„¶èƒ½å¤ŸåŠ è½½ã€‚ä¸è¿‡ï¼Œè¿™å°±æ¶‰åŠåˆ°å¦‚ä½•åŠ è½½éAMDæ¨¡å—å†™æ³•çš„æ¨¡å—äº†ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¨¡å—cï¼Œä½†æ˜¯c.jså¹¶æ²¡æœ‰æŒ‰ç…§AMDè§„èŒƒå°è£…ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬åœ¨jsæ–‡ä»¶åŠ ä¸‹åˆ›å»ºc.jsï¼Œå¹¶å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š\n\n```\nvar show = function(){\n\talert('è°ƒç”¨äº†c');\n}\n```\n\næˆ‘ä»¬çš„c.jså¾ˆç®€å•ã€‚åªæ˜¯å•çº¯çš„å®šä¹‰äº†ä¸€ä¸ªcå‡½æ•°ï¼Œå¹¶å¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†ï¼Œæ˜¾ç¤ºâ€œè°ƒç”¨äº†câ€ï¼Œæ‰€ä»¥è¿™ä¸ªc.jså¹¶ä¸æ˜¯ä¸€ä¸ªAMDæ¨¡å—ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨requirejsåŠ è½½è¿™ä¸ªcï¼Œè¯¥å¦‚ä½•åŠ è½½å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°requirejs.config()ä¸­çš„å¦ä¸€ä¸ªé…ç½®é¡¹ shim äº†ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†pathsæ˜¯ç”¨æ¥é…ç½®åŠ è½½æ¨¡å—è·¯å¾„çš„ï¼Œshimåˆ™æ˜¯ç”¨æ¥åŠ è½½éAMDæ¨¡å—è§„èŒƒçš„â€œæ¨¡å—â€çš„ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†åŠ è½½c.jsï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹config.jså¹¶æ·»åŠ shimé…ç½®ï¼Œå¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tpaths : {\n\t\ta : 'js/a',\n\t\tb : 'js/b',\n\t\tc : 'js/c',\n\t\tjquery : 'js/jquery.min'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\texports : 'show'\n\t\t}\n\t}\n});\n\n\nrequire(['a', 'b', 'jquery', 'c'], function(A, B, $, c){\n\tconsole.log(c);\n});\n```\n\næˆ‘ä»¬æ·»åŠ äº†shimé…ç½®ï¼Œé…ç½®ä¸­ï¼Œc ä»£è¡¨æˆ‘ä»¬åœ¨requireä¸­å¼•å…¥æ¨¡å—æ—¶çš„åå­—ï¼Œå³æˆ‘ä»¬å¯ä»¥é€šè¿‡require(['c'])å»å¼•ç”¨cæ¨¡å—ï¼Œcå¯¹åº”ä¸€ä¸ªjsonå¯¹è±¡ï¼Œå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªexportså±æ€§ï¼Œexportså±æ€§çš„å€¼å°±æ˜¯æˆ‘ä»¬è¦åˆ°å¤„çš„æ¥å£ï¼Œæ³¨æ„ï¼Œæˆ‘ä»¬ä¾ç„¶è¦åœ¨pathsä¸­æ·»åŠ æ¨¡å—cçš„é…ç½®ï¼Œè¿™æ ·æ‰èƒ½æ­£å¸¸åŠ è½½æ¨¡å—ï¼Œæœ€åï¼Œæˆ‘ä»¬åœ¨æ§åˆ¶å°ä¸­è¾“å‡ºäº†æ¨¡å—cï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œåˆ·æ–°ï¼š\n\n![è¾“å‡ºæ¨¡å—c](http://7xlolm.com1.z0.glb.clouddn.com/201511149.pic.jpg)\n\næˆ‘ä»¬çœ‹åˆ°ï¼Œæ‰“å°å‡ºæ¥çš„å°±æ˜¯æˆ‘ä»¬çš„å‡½æ•°showï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åˆ°å¤„çš„æ¥å£å°±æ˜¯showå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä¸€ä¸‹è¯•è¯•ï¼Œä¿®æ”¹config.jsï¼š\n\n```\nrequire(['a', 'b', 'jquery', 'c'], function(A, B, $, c){\n\tc();\n});\n```\n\nåˆ·æ–°é¡µé¢ï¼š\n\n![è°ƒç”¨äº†showå‡½æ•°](http://7xlolm.com1.z0.glb.clouddn.com/2015111410.pic.jpg)\n\næ€ä¹ˆæ ·ï¼Œå¼¹å‡ºå¼¹çª—äº†å§ï¼Œå®é™…ä¸Šï¼Œç»è¿‡shimé…ç½®åï¼Œrequirejsä¼šè‡ªåŠ¨ä¿®æ”¹c.jsä¸ºä¸€ä¸ªAMDæ¨¡å—ï¼Œä¸ºå…¶æ·»åŠ å°è£…ä»£ç ï¼Œå¦‚ä¸‹ï¼š\n\n```\ndefine(function(){\n\tvar show = function(){\n\t\talert('è°ƒç”¨äº†c');\n\t}\t\n\n\treturn show;\n});\n```\n\næˆ‘ä»¬çœ‹åˆ°ï¼Œreturnè¿”å›çš„æ˜¯showå‡½æ•°ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨shimä¸­ä¸ºcæ¨¡å—é…ç½®çš„å¯¼å‡ºæ¥å£ä¸ºshowï¼Œå³exportsçš„å€¼æ˜¯showï¼Œæ‰€ä»¥åŠ å…¥æˆ‘ä»¬ä¿®æ”¹exportsçš„å€¼ä¸ºå…¶ä»–å€¼ï¼Œæ˜¯æ²¡æœ‰åŠæ³•å¯¼å‡ºæˆåŠŸçš„ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¿®æ”¹config.jsä¸­cæ¨¡å—çš„shimé…ç½®ï¼Œå¦‚ä¸‹ï¼Œæˆ‘ä»¬å¯¼å‡ºçš„æ¥å£ä¸æ˜¯showè€Œæ˜¯éšæ„çš„aaa:\n\n```\nshim : {\n\tc : {\n\t\texports : 'aaa'\n\t}\n}\n```\n\nåˆ·æ–°é¡µé¢ï¼š\n\n![æŠ¥é”™](http://7xlolm.com1.z0.glb.clouddn.com/2015111411.pic.jpg)\n\næŠ¥é”™ï¼Œcä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬å¯¼å‡ºçš„æ¥å£æ˜¯aaaï¼Œé¬¼çŸ¥é“ä½ è¿™ä¸ªaaaæ˜¯ä»€ä¹ˆå•Šã€‚æ‰€ä»¥æœ€åè°ƒç”¨çš„æ—¶å€™å½“ç„¶ä¼šæŠ¥é”™ã€‚\n\næˆ‘ä»¬è¿˜å¯ä»¥å¯¼å‡ºå¤šä¸ªæ¥å£ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„c.jsä¸­æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«æ˜¯showå‡½æ•°å’Œhideå‡½æ•°ï¼Œä¿®æ”¹æˆ‘ä»¬çš„c.jså¦‚ä¸‹ï¼š\n\n```\nvar show = function(){\n\talert('showå‡½æ•°');\n}\t\n\nvar hide = function(){\n\talert('hideå‡½æ•°');\n}\n```\n\nå¦‚æœæˆ‘ä»¬ç»§ç»­ä½¿ç”¨ä¸Šé¢çš„shimé…ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†åªèƒ½å¯¼å‡ºshowå‡½æ•°ï¼Œæ²¡æœ‰åŠæ³•å¯¼å‡ºhideï¼Œå¦‚ä½•æ‰èƒ½å°†ä¸¤ä¸ªæ¥å£éƒ½å¯¼å‡ºæ¥å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±ä¸èƒ½ä½¿ç”¨exportså±æ€§äº†ï¼Œæˆ‘ä»¬è¦ç”¨initå±æ€§ï¼Œåˆ†åˆ«å°†ä¸¤ä¸ªæ¥å£å¯¼å‡ºï¼Œä¿®æ”¹config.jså¦‚ä¸‹ï¼š\n\n```\nshim : {\n\tc : {\n\t\tinit : function(){\n\t\t\treturn {\n\t\t\t\taaa : show,\n\t\t\t\tbbb : hide\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\ninitå±æ€§å¯¹åº”ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œé¢å¯¹åº”æˆ‘ä»¬è¦å¯¼å‡ºçš„æ¥å£ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æŠŠä¸¤ä¸ªæ¥å£éƒ½å¯¼å‡ºäº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡å—çš„aaaè°ƒç”¨showå‡½æ•°ï¼Œæ¨¡å—çš„bbbè°ƒç”¨hideå‡½æ•°ï¼Œä¿®æ”¹config.jså»å°è¯•è°ƒç”¨ä¸€ä¸‹ï¼š\n\n```\nrequire(['a', 'b', 'jquery', 'c'], function(A, B, $, c){\n\tc.aaa();\n\tc.bbb();\n});\n```\n\næ‰“å¼€æµè§ˆå™¨åˆ·æ–°ï¼Œæ€ä¹ˆæ ·ï¼Œä¸¤ä¸ªå‡½æ•°æ­£å¸¸è°ƒç”¨äº†å§ï¼Œä¸è¿‡è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œinitå±æ€§å¯¹åº”çš„å‡½æ•°ä¸­ï¼Œè¿”å›çš„å¯¹è±¡é‡Œé¢ï¼Œshowå’Œhideä¸èƒ½ç”¨å¼•å·å¼•èµ·æ¥ï¼Œä¸‹é¢çš„å†™æ³•æ˜¯é”™è¯¯çš„ï¼š\n\n```\nshim : {\n\tc : {\n\t\tinit : function(){\n\t\t\treturn {\n\t\t\t\taaa : 'show',\n\t\t\t\tbbb : 'hide'\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\nåˆ·æ–°æµè§ˆå™¨ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![åŠ å¼•å·åæŠ¥é”™](http://7xlolm.com1.z0.glb.clouddn.com/2015111412.pic.jpg)\n\né‚£ä¹ˆä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬è®¾ç½®äº†initå±æ€§åï¼Œrequirejsç›¸å½“äºè‡ªåŠ¨ä¸ºæˆ‘ä»¬å°è£…äº†c.jså¦‚ä¸‹é¢è¿™æ ·ï¼š\n\n```\ndefine(function(){\n\tvar show = function(){\n\t\talert('showå‡½æ•°');\n\t}\t\n\n\tvar hide = function(){\n\t\talert('hideå‡½æ•°');\n\t}\n\n\treturn {\n\t\taaa : show,\n\t\tbbb : hide\n\t}\n});\n```\n\nä¸Šé¢ä»£ç ä¸­showå’Œhideæ²¡æœ‰åŠ å¼•å·ï¼Œæ‰€ä»¥æ˜¯å˜é‡ï¼Œåˆ†åˆ«å¼•ç”¨ä¸Šé¢çš„showå‡½æ•°å’Œhideå‡½æ•°ï¼Œå¦‚æœæˆ‘ä»¬åŠ äº†å¼•å·ï¼Œrequirejså°è£…ä¹‹åå°±ä¼šæƒ³è¿™æ ·ï¼š\n\n```\ndefine(function(){\n\tvar show = function(){\n\t\talert('showå‡½æ•°');\n\t}\t\n\n\tvar hide = function(){\n\t\talert('hideå‡½æ•°');\n\t}\n\n\treturn {\n\t\taaa : 'show',\n\t\tbbb : 'hide'\n\t}\n});\n```\n\næˆ‘ä»¬çœ‹ä¸Šé¢çš„ä»£ç ï¼Œ'show'å’Œ'hide'éƒ½åŠ äº†å¼•å·ï¼Œæ‰€ä»¥ä»–ä»¬æ˜¯å­—ç¬¦ä¸²ï¼Œå¹¶æ²¡æœ‰å¼•ç”¨ä¸Šé¢çš„showå‡½æ•°å’Œhideå‡½æ•°ï¼Œåªæ˜¯å¯¼å‡ºä¸€ä¸ªå­—ç¬¦ä¸²è€Œå·²ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æŠŠå­—ç¬¦ä¸²å½“åšå‡½æ•°æ¥è°ƒç”¨çš„æ—¶å€™ï¼Œå½“ç„¶ä¼šæŠ¥é”™ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥éªŒè¯è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨å¸¦å¼•å·çš„é…ç½®ï¼Œç„¶åæ‰“å°å‡ºc.aaaçš„ç±»å‹ï¼Œå¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tpaths : {\n\t\ta : 'js/a',\n\t\tb : 'js/b',\n\t\tc : 'js/c',\n\t\tjquery : 'js/jquery.min'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\tinit : function(){\n\t\t\t\treturn {\n\t\t\t\t\taaa : 'show',\n\t\t\t\t\tbbb : 'hide'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n\nrequire(['a', 'b', 'jquery', 'c'], function(A, B, $, c){\n\tconsole.log(typeof c.aaa);\n});\n```\n\nåˆ·æ–°æµè§ˆå™¨ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œc.aaaçš„ç¡®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š\n\n![æ‰“å°å‡ºæ¥çš„æ˜¯å­—ç¬¦ä¸²](http://7xlolm.com1.z0.glb.clouddn.com/2015111413.pic.jpg)\n\nå¦å¤–ï¼Œæˆ‘ä»¬æ³¨æ„ä¸€ç‚¹ï¼Œpathsé‡Œé¢çš„é…ç½®ï¼Œè·¯å¾„ä¸­éƒ½å¸¦æœ‰'js/'ï¼Œå¦‚ä¸‹ï¼š\n\n```\npaths : {\n\ta : 'js/a',\n\tb : 'js/b',\n\tc : 'js/c',\n\tjquery : 'js/jquery.min'\n}\n```\n\nä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„æ¨¡å—éƒ½æ”¾åœ¨jsç›®å½•ä¸‹ï¼Œæ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä¸å¯ä»¥é€šè¿‡ä¸€ä¸ªé…ç½®ï¼Œæ¥å‘Šè¯‰æˆ‘ä»¬çš„requirejsï¼Œæ¯æ¬¡æŸ¥æ‰¾æ¨¡å—çš„æ—¶å€™éƒ½åŸºäºjsç›®å½•æŸ¥æ‰¾å‘¢ï¼Ÿè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ¯æ¬¡ç¼–å†™pathsé…ç½®çš„æ—¶å€™éƒ½è¦å†™ä¸Š'js/'äº†ï¼Œå®é™…ä¸Šæ˜¯å¯ä»¥çš„ï¼Œrequirejs.config()çš„é…ç½®å¯¹è±¡ä¸­è¿˜æœ‰ä¸€ä¸ª baseUrl å±æ€§ï¼Œç”¨æ¥åˆ¶å®šæ¨¡å—çš„æŸ¥æ‰¾ç›®å½•ï¼Œä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tbaseUrl : './js',\n\tpaths : {\n\t\ta : 'a',\n\t\tb : 'b',\n\t\tc : 'c',\n\t\tjquery : 'jquery.min'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\tinit : function(){\n\t\t\t\treturn {\n\t\t\t\t\taaa : show,\n\t\t\t\t\tbbb : hide\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n```\n\nå½“ç„¶ï¼ŒbaseUrlæœ¬çœæ˜¯åŸºäºå¼•å…¥requirejsçš„htmlæ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ï¼Œåœ¨æœ¬ä¾‹ä¸­å³index.htmlæ‰€åœ¨ç›®å½•çš„ã€‚\n\nå¦å¤–ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå½“æˆ‘ä»¬é…ç½®å®ŒbaseUrlä¹‹åï¼Œpathsä¸­aã€bã€cä¸‰ä¸ªæ¨¡å—å¯ä»¥ä¸ç”¨é…ç½®ï¼Œå› ä¸ºå·²ç»æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ï¼Œä½†æ˜¯jqueryéœ€è¦ä¿ç•™ï¼Œå¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tbaseUrl : './js',\n\tpaths : {\n\t\tjquery : 'jquery.min'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\tinit : function(){\n\t\t\t\treturn {\n\t\t\t\t\taaa : show,\n\t\t\t\t\tbbb : hide\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n```\n\nè¿™æ ·ï¼Œå½“requirejså»åŠ è½½çš„aã€bã€cæ¨¡å—çš„æ—¶å€™ï¼Œå°±è‡ªåŠ¨ä¼šæ ¹æ®baseUrlä¸­çš„é…ç½®å»æŸ¥æ‰¾æ¨¡å—ï¼Œè€Œæˆ‘ä»¬çš„ä¸‰ä¸ªæ¨¡å—ä¹Ÿæ°å¥½åœ¨jsç›®å½•ä¸‹ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨é…ç½®äº†ï¼Œæ€»è€Œè¨€ä¹‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆçµå¥½å¥½ç”¨çš„é…ç½®ï¼Œå…·ä½“æ ¹æ®ä½ çš„é¡¹ç›®æ¥ã€‚\n\nä¸‹é¢ï¼Œæˆ‘ä»¬åœ¨è€ƒè™‘ä¸€ç§æƒ…æ™¯ï¼Œå‡å¦‚ä½ çš„é¡¹ç›®å¾ˆå¤§ï¼Œåœ¨æœ€åˆé˜¶æ®µï¼Œä½ çš„é¡¹ç›®é‡Œå¼•ç”¨äº†jQuery1.xç‰ˆæœ¬ï¼Œåæ¥éšç€é¡¹ç›®çš„å‘å±•ï¼Œé¡¹ç›®éœ€è¦å¼•å…¥jQuery2.xçš„ç‰ˆæœ¬ï¼Œä½†æ˜¯åˆä¸èƒ½åˆ é™¤æ‰åŸæ¥çš„1.xç‰ˆæœ¬ï¼Œå› ä¸ºé¡¹ç›®ä¸­æœ‰å¾ˆå¤šæ¨¡å—éƒ½åœ¨ä½¿ç”¨1.xçš„ç‰ˆæœ¬ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¸Œæœ›åœ¨æŸäº›æ–‡ä»¶ä¸­å¼•å…¥jQueryæ—¶ä½¿ç”¨çš„1.xç‰ˆæœ¬ï¼Œè€Œåœ¨å¦å¤–ä¸€äº›æ–‡ä»¶ä¸­ä½¿ç”¨çš„æ˜¯2.xçš„ç‰ˆæœ¬ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿæœ‰çš„åŒå­¦å¯èƒ½ä¼šè¿™æ ·æƒ³ï¼Œå¦‚ä¸‹é…ç½®ï¼š\n\n```\nrequirejs.config({\n\tbaseUrl : './js',\n\tpaths : {\n\t\tjquery1 : 'jquery-1.11.3'\n\t\tjquery2 : 'jquery-2.1.4'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\tinit : function(){\n\t\t\t\treturn {\n\t\t\t\t\taaa : show,\n\t\t\t\t\tbbb : hide\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n```\n\né…ç½®ä¸¤ä¸ªjqueryï¼Œä¸€ä¸ªjquery1ï¼Œä¸€ä¸ªjquery2ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒçš„ç‰ˆæœ¬ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨1.xç‰ˆæœ¬çš„æ—¶å€™ï¼Œå°±å¼•ç”¨'jquery1'ï¼Œå½“æˆ‘ä»¬æƒ³ä½¿ç”¨2.xç‰ˆæœ¬çš„æ—¶å€™å°±å¼•ç”¨'jquery2'ï¼Œè¿™æ ·çœ‹ä¸Šå»å¥½åƒå¾ˆåˆç†ï¼Œè¯•ç€ä½¿ç”¨ä¸€ä¸‹ï¼Œä¿®æ”¹config.jsä¸­requireä¸­çš„ä»£ç å¦‚ä¸‹ï¼š\n\n```requirejs.config({\n\tbaseUrl : './js',\n\tpaths : {\n\t\tjquery1 : 'jquery-1.11.3',\n\t\tjquery2 : 'jquery-2.1.4'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\tinit : function(){\n\t\t\t\treturn {\n\t\t\t\t\taaa : show,\n\t\t\t\t\tbbb : hide\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n\nrequire(['jquery1'], function($){\n\talert($('html').html());\n});\n\n```\n\næˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼ŒæŠ¥é”™äº†ï¼š\n\n![æŠ¥é”™](http://7xlolm.com1.z0.glb.clouddn.com/2015111414.pic.jpg)\n\næŸ¥çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œä»–è¯´$æ²¡æœ‰å®šä¹‰ï¼Œè¨€å¤–ä¹‹æ„å°±æ˜¯è¯´æˆ‘ä»¬jQueryæ¨¡å—æ ¹æœ¬æ²¡æœ‰å¼•å…¥è¿›æ¥ï¼Œæ€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬åœ¨pathsä¸­é…ç½®jqueryæ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨åˆ«åï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªèƒ½ä½¿ç”¨ jquery è€Œä¸èƒ½ä½¿ç”¨ jquery1å’Œjquery2ï¼Œä¸ä¿¡ä½ å°†requirejs.config()ä¸­çš„pathsä¿®æ”¹å¦‚ä¸‹ï¼š\n\n```\npaths : {\n\tjquery : 'jquery-1.11.3'\n}\n```\n\nåˆ·æ–°é¡µé¢å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯ä¿®æ”¹æˆä¸‹é¢è¿™æ ·å°±ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼š\n\n```\npaths : {\n\tjq : 'jquery-1.11.3'\n}\n```\n\nå› ä¸ºä½ åªèƒ½ç”¨jqueryè€Œä¸èƒ½ç”¨ä»»ä½•å…¶ä»–åˆ«åï¼Œä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬æ‰“å¼€jqueryçš„æºç ï¼Œå¼€å…¶ä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![jQueryæºç ä¸­å¯¹AMDå…¼å®¹åšæ³•](http://7xlolm.com1.z0.glb.clouddn.com/2015111415.pic.jpg)\n\nè¿™æ®µä»£ç å…¶å®å°±æ˜¯jQueryåº“å¯¹AMDæ¨¡å—çš„å…¼å®¹åšæ³•ï¼Œæˆ‘ä»¬å‘ç°ï¼ŒjQueryå»ä½¿ç”¨defineå®šä¹‰æ¨¡å—çš„æ—¶å€™ï¼Œä»–æ˜¾ç¤ºçš„ä¼ é€’äº†ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² 'jquery'ï¼Œè¿™ä¸ªå‚æ•°åœ¨æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„æ¨¡å—ä¸­ä¸€èˆ¬æ˜¯ä¸å»æ‰‹åŠ¨å†™æ­»å¾—ï¼Œä¸€èˆ¬ç”±æ„å»ºå·¥å…·åœ¨ä¼˜åŒ–æ¨¡å—æ—¶è‡ªåŠ¨å¡«å……çš„ï¼Œä»¥å…æ¨¡å—å†²çªï¼Œå› ä¸ºè¿™ä¸ªå‚æ•°ä»£è¡¨äº†æ¨¡å—idï¼Œé‚£ä¹ˆjqueryä¸ºä»€ä¹ˆè¦å†™æ­»å‘¢ï¼Ÿ\n\nç½‘ä¸Šæœ‰ç§è¯´æ³•æ˜¯å‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œå› ä¸ºåƒjQueryè¿™ç§åº“æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨æ˜¯å¾ˆé¢‘ç¹çš„ï¼Œå¾ˆå¤šæ¨¡å—éƒ½è¦ä¾èµ–è¿™ä¸ªæ¨¡å—ï¼Œå¦‚æœidè¿™ä¸ªå‚æ•°ä¸å†™æ­»å¾—è¯ï¼Œæ„å‘³ç€æˆ‘ä»¬åœ¨ä¾èµ–jQueryçš„æ—¶å€™å¯ä»¥éšæ„èµ·åå­—ï¼Œè€Œéå¿…é¡»ä½¿ç”¨ 'jquery' ï¼Œè¿™æ ·å…¶ä»–æ¨¡å—å°±å¯ä»¥ç»™jQueryèµ·ä¸åŒçš„æ¨¡å—åï¼Œè¿™å°±ä¼šå¯¼è‡´å¤šæ¬¡å¼•å…¥jQueryã€‚\n\nç°åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“äº†ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨pathsé…ç½®ä¸­é…ç½®jQueryçš„æ—¶å€™ä¸ºä»€ä¹ˆåªèƒ½ä½¿ç”¨ 'jquery' äº†ï¼Œæˆ‘ä»¬å›åˆ°ä¹‹å‰çš„é—®é¢˜ï¼Œå³åœ¨ä¸åŒçš„æ¨¡å—å¼•å…¥ä¸åŒç‰ˆæœ¬çš„jQueryï¼Œæƒ³ä¸€æƒ³æˆ‘ä»¬è¿˜èƒ½è¿™æ ·å»é…ç½®äº†å˜›ï¼š\n\n```\npaths : {\n\tjquery1 : 'jquery-1.11.3',\n\tjquery2 : 'jquery-2.1.4'\n}\n```\n\nç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸ºæˆ‘ä»¬åªèƒ½ç”¨ jquery è€Œä¸èƒ½ç”¨ jquery1 æˆ– jquery2ï¼Œé‚£éš¾é“æˆ‘ä»¬è¿™æ ·é…ç½®å—ï¼Ÿå¦‚ä¸‹ï¼š\n\n```\npaths : {\n\tjquery : 'jquery-1.11.3',\n\tjquery : 'jquery-2.1.4'\n}\n```\n\nç®€ç›´å°±æ˜¯ç¬‘è¯ï¼Œè¿™æ ·ç¬¬äºŒä¸ªjqueryå±æ€§ä¼šè¦†ç›–ç¬¬ä¸€ä¸ªjqueryå±æ€§ï¼Œé‚£æ€ä¹ˆåŠï¼Ÿè¿™å°±æ¶‰åŠrequirejsçš„å¦ä¸€ä¸ªé…ç½®äº†ï¼Œmapé…ç½®é¡¹ï¼Œmapé…ç½®é¡¹çš„ä½œç”¨æ˜¯ï¼Œåœ¨ä¸åŒçš„æ¨¡å—ä¸­ï¼Œå³jsæ–‡ä»¶ä¸­ï¼Œä¾èµ–ç›¸åŒçš„æ¨¡å—åï¼Œç¼ºåŠ è½½ä¸åŒçš„æ¨¡å—ã€‚\n\næˆ‘ä»¬å…ˆåœ¨config.jsä¸­å¢åŠ mapé…ç½®å¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tbaseUrl : './js',\n\tpaths : {\n\t\tjquery : 'jquery-1.11.3'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\tinit : function(){\n\t\t\t\treturn {\n\t\t\t\t\taaa : show,\n\t\t\t\t\tbbb : hide\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tmap : {\n\t\t'a' : {\n\t\t\tjquery : 'jquery-1.11.3'\n\t\t},\n\t\t\n\t\t'b' : {\n\t\t\tjquery : 'jquery-2.1.4'\n\t\t}\n\t}\n});\n```\n\næˆ‘ä»¬åœ¨mapä¸­å¯ä»¥å¯¹æ¯ä¸€ä¸ªæ¨¡å—è¿›è¡Œé…ç½®ï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬é…ç½®äº†å½“åœ¨ a æ¨¡å—ä¸­ä¾èµ– 'jquery' æ—¶ï¼Œæˆ‘ä»¬åŠ è½½çš„æ˜¯ 1.11.3 ç‰ˆæœ¬ï¼Œå½“æˆ‘ä»¬åœ¨ b æ¨¡å—ä¸­ä¾èµ– 'jquery' æ—¶ï¼Œæˆ‘ä»¬åŠ è½½çš„æ˜¯ 2.1.4 ç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥å°è¯•ä¸€ä¸‹ï¼Œåˆ†åˆ«ä¿®æ”¹a.jså’Œb.jsè¿™ä¸¤ä¸ªæ¨¡å—ï¼Œè®©ä»–ä»¬éƒ½å»ä¾èµ–jqueryï¼Œç„¶ååˆ†åˆ«è¿”å›æ‰€ä¾èµ–jqueryçš„ç‰ˆæœ¬ï¼Œå¦‚ä¸‹ï¼š\n\na.js\n```\ndefine(['jquery'], function(jquery){\n\tvar a = {\n\t\tcontent : $().jquery\n\t}\n\n\treturn a;\n});\n```\n\nb.js\n```\ndefine(['jquery'], function(jquery){\n\tvar b = {\n\t\tcontent : $().jquery\n\t}\n\n\treturn b;\n\n});\n```\n\nç„¶åæˆ‘ä»¬åœ¨config.jsä¸­æ‰“å°æ¨¡å—aå’Œbï¼Œå¦‚ä¸‹ï¼š\n\n```\nrequire(['a', 'b'], function(A, B){\n\tconsole.log('æ¨¡å—aå¼•ç”¨çš„jQueryç‰ˆæœ¬æ˜¯' + A.content);\n\tconsole.log('æ¨¡å—bå¼•ç”¨çš„jQueryç‰ˆæœ¬æ˜¯' + B.content);\n});\n```\n\nåˆ·æ–°æµè§ˆå™¨ï¼Œæˆ‘ä»¬çœ‹åˆ°å¦‚ä¸‹ï¼Œçš„ç¡®åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ä¾èµ–äº†ä¸åŒç‰ˆæœ¬çš„jQueryï¼š\n\n![ä¸åŒæ–‡ä»¶ä¸­ä¾èµ–äº†ä¸åŒç‰ˆæœ¬çš„jQuery](http://7xlolm.com1.z0.glb.clouddn.com/2015111416.pic.jpg)\n\nä½†æ˜¯æœ‰ä¸€ç‚¹è¯·è¯»è€…çœ‹æ¸…æ¥šï¼Œåœ¨a.jså’Œb.jsä¸­æˆ‘éƒ½ä¾èµ–äº†jqueryï¼Œåœ¨å½¢å¼å‚æ•°ä¸­æˆ‘ä½¿ç”¨çš„æ˜¯jqueryï¼Œä½†æ˜¯åœ¨ä¸‹é¢æˆ‘ç”¨åˆ°çš„å´æ˜¯(ç¾å…ƒç¬¦å·)ï¼Œå› ä¸ºç¬”è€…åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå½¢å¼å‚æ•°ä¹Ÿå†™æˆ(ç¾å…ƒç¬¦å·)ï¼Œé‚£ä¹ˆä½¿ç”¨(ç¾å…ƒç¬¦å·)å‚æ•°æ‰“å°å‡ºæ¥çš„å§‹ç»ˆéƒ½æ˜¯undefinedï¼Œä½†æ˜¯ç»è¿‡åˆ†æçš„ç¡®æ­£å¸¸å¯¼å…¥æ¨¡å—å¹¶ä¸”æ²¡æœ‰æŠ¥é”™ï¼Œæˆ‘ä¸çŸ¥é“è¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Œæˆ–è€…requirejsçš„BUGï¼Œå¦‚æœè¯»è€…æœ‰çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› çš„æ¬¢è¿åœ¨ä¸‹é¢è¯„è®ºæŒ‡é’ˆï¼Œå…±åŒè¿›æ­¥ã€‚\n\nè¿™æ ·ï¼Œrequirejsä¸­ä¸€äº›å¿…å¤‡ä¸”ä¸æ˜“ç†è§£çš„é…ç½®ä»¥åŠä¸€äº›é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆå°±è®²è§£çš„å·®ä¸å¤šäº†ï¼Œå…¶å®requirejsä¸­çš„é…ç½®ä¸åªè¿™äº›ï¼Œè¯»è€…å¯ä»¥æŸ¥é˜…[å®˜æ–¹æ–‡æ¡£](http://www.requirejs.cn/) æŸ¥çœ‹å…¶ä»–é…ç½®ï¼Œéƒ½æ¯”è¾ƒç®€å•ï¼ŒæŒæ¡ç¬”è€…è®²å¾—è¿™äº›åŸºæœ¬å¤Ÿç”¨äº†ã€‚\n\nä¸‹ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬å°±æ¥è®²ä¸€è®²å¦‚ä½•ä¼˜åŒ–é¡¹ç›®çš„äº‹ï¼ŒåŒ…æ‹¬ä½¿ç”¨rjsé…åˆgulpæ„å»ºå·¥å…·ç­‰ï¼Œå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå°±çœ‹çœ‹æˆ‘çš„è¯è”ç½‘ç¥ˆç¥·æ€ç»´çš„è¿ç”¨å§ï¼Œå¦‚ä¸‹ï¼š\n\n![æ”¯ä»˜å®äºŒç»´ç ](http://7xlolm.com1.z0.glb.clouddn.com/201511122.pic.jpg)\n\n\n","source":"_posts/2015/11/14/åŸºäºgulp-requirejs-rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºç³»åˆ—æ–‡ç« -äºŒ.md","raw":"title: åŸºäºgulp requirejs rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºç³»åˆ—æ–‡ç« (äºŒ)\ndate: 2015-11-14 10:12:25\ncategories:\n- WebFrontEnd\ntags:\n- js\n- è‡ªåŠ¨åŒ–\n- gulp\n- requirejs\n- rjs\n- æ„å»º\n---\n\n> ä¸Šä¸€ç¯‡ä»‹ç»äº†jsæ¨¡å—åŒ–çš„å†ç¨‹å’ŒAMDè§„èŒƒä¸­è§„å®šæ¨¡å—çš„å®šä¹‰å’Œå¼•ç”¨ï¼Œè¿™ç¯‡æ–‡ç« å°±ä»¥requirejsè¿™ä¸ªAMDè§„èŒƒçš„å®ç°æ¥è®²è§£jsä¸­çš„æ¨¡å—åŒ–å¼€å‘\n\n![requirejs](http://7xlolm.com1.z0.glb.clouddn.com/20151109amd.jpg)\n\n<!-- more -->\n\nå¦‚æœä½ çŸ¥é“äº†AMDè§„èŒƒä¸­è§„å®šçš„jsæ¨¡å—çš„å®šä¹‰æ–¹æ³•å’Œå¦‚ä½•å¼•ç”¨ä¸€ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆrequirejsçš„ä½¿ç”¨å‡ ä¹æ˜¯é›¶æˆæœ¬çš„ï¼Œå› ä¸ºrequirejså°±æ˜¯AMDè§„èŒƒçš„å®ç°ï¼Œä½ å”¯ä¸€éœ€è¦å­¦ä¹ çš„å¯èƒ½å°±æ˜¯ä¸€äº›ä¾¿äºæˆ‘ä»¬ä½¿ç”¨æ¨¡å—çš„é…ç½®ï¼Œå’Œrequirejsçš„ä¸€äº›ç‰¹æ€§ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç”¨ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œæ¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨requirejsã€‚\n\næˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¾ˆå¯èƒ½ä¼šå¼•ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚jQueryç­‰ï¼Œè¿˜è¦å¼•ç”¨æˆ‘ä»¬è‡ªå·±å†™çš„ä¸€äº›jsæ–‡ä»¶ï¼Œåœ¨æœ€åˆï¼Œæˆ‘ä»¬çš„ç›®å½•ç»“æ„çœ‹ä¸Šå»æ˜¯è¿™æ ·çš„ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![åŸå§‹ç›®å½•ç»“æ„](http://7xlolm.com1.z0.glb.clouddn.com/201511141.pic.jpg)\n\næˆ‘ä»¬æœ‰ä¸€ä¸ªindex.htmlæ–‡ä»¶ï¼Œç„¶åå†å»ºç«‹ä¸€ä¸ªåä¸ºjsçš„æ–‡ä»¶å¤¹ï¼ŒæŠŠjQueryåº“å’Œæˆ‘ä»¬è‡ªå·±å†™çš„jsæ–‡ä»¶éƒ½æ”¾åœ¨é‡Œé¢ï¼Œæˆ–è€…å¯èƒ½ä½ è¿˜ä¼šä¸ºjQueryç­‰ç¬¬ä¸‰æ–¹åº“å•ç‹¬å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä½†æœ€ç»ˆåœ¨htmlé¡µé¢ä¸­å¼•ç”¨çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œå³éœ€è¦å‡ ä¸ªjsæ–‡ä»¶ï¼Œå°±éœ€è¦å‡ ä¸ªscriptæ ‡ç­¾ï¼Œå¦‚ä¸‹æ˜¯index.htmlçš„å†…å®¹ï¼š\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n</head>\n<body>\n\n\t<script src=\"js/jquery.min.js\"></script>\n\t<script src=\"js/a.js\"></script>\n\t<script src=\"js/b.js\"></script>\n</body>\n</html>\n```\n\næˆ‘ä»¬å·²ç»äº†è§£äº†ä¸Šé¢ä»£ç çš„ç¼ºç‚¹ï¼š\n* æ±¡æŸ“äº†å…¨å±€å˜é‡ï¼Œä¸åŒæ–‡ä»¶ä¹‹é—´å¯èƒ½ä¼šå‘½åå†²çª\n* æ–‡ä»¶ä¾èµ–å…³ç³»éš¾ä»¥ç»´æŠ¤\n* å‘å‡ºæ›´å¤šçš„httpè¯·æ±‚ï¼Œå½±å“æ€§èƒ½\n\nå†æ¥çœ‹çœ‹æˆ‘ä»¬çš„a.jså’Œb.jsæ–‡ä»¶ï¼š\n\na.js\n```\nvar a = {\n\tcontent : 'a.js'\n}\n```\n\nb.js\n```\nvar b = {\n\tcontent : 'b.js'\n}\n```\n\nè¿™ä¸¤ä¸ªæ–‡ä»¶å¾ˆç®€å•ï¼Œåˆ†åˆ«å®šä¹‰äº†ä¸¤ä¸ªæ±¡æŸ“å…¨å±€çš„å˜é‡aå’Œbã€‚\n\né‚£æˆ‘ä»¬é€šè¿‡requirejsæ¥è§£å†³è¿™äº›é—®é¢˜å‘¢ï¼Ÿé¦–å…ˆï¼Œä½ å¾—æœ‰ä¸ªå¥³æœ‹å‹ï¼Œå“¦ä¸å¯¹ï¼Œä½ å¾—å…ˆæœ‰requirejsåº“ï¼Œæ‰€ä»¥ï¼Œä¸‹è½½è¿æ¥ [requirejsä¸‹è½½](http://www.requirejs.cn/docs/download.html#requirejs)\n\nä¸‹è½½ä¸‹æ¥ä¹‹åï¼Œæˆ‘ä»¬æŠŠrequirejsæ”¾åœ¨ä¸æˆ‘ä»¬index.htmlåŒçº§çš„ç›®å½•ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![requirejsä¸htmlåŒçº§](http://7xlolm.com1.z0.glb.clouddn.com/201511142.pic.jpg)\n\nä¿®æ”¹æˆ‘ä»¬çš„index.htmlï¼Œåªéœ€å¼•å…¥æˆ‘ä»¬åˆšåˆšä¸‹è½½ä¸‹æ¥çš„requirejsï¼š\n\n```\n<!DOCTYPE html>\n<html>\n<head>\n\t<title></title>\n\t<meta charset=\"utf-8\" />\n</head>\n<body>\n\n\t<script src=\"require.js\" data-main=\"config\"></script>\n</body>\n</html>\n```\n\nä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼Œscriptæ ‡ç­¾ä¸­data-mainæ˜¯ä»€ä¹ˆï¼Ÿæ˜¯è¿™æ ·çš„ï¼Œrequirejséœ€è¦ä¸€ä¸ªå…¥å£æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸Šæ¥å°±å»æ‰§è¡Œçš„æ¨¡å—ï¼Œç±»ä¼¼äºCè¯­è¨€ä¸­çš„mainå‡½æ•°ã€‚ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å‘Šè¯‰requirejsæˆ‘ä»¬çš„å…¥å£æ¨¡å—æ˜¯config.jsï¼Œç”±äºrequirejsé»˜è®¤æ¨¡å—éƒ½æ˜¯ä»¥.jsä¸ºåç¼€çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœç•¥ï¼Œåªéœ€è¦å†™configå°±å¯ä»¥äº†ï¼Œç„¶åæˆ‘ä»¬åœ¨index.htmlåŒçº§ç›®å½•ä¸‹åˆ›å»ºconfig.jsæ–‡ä»¶å¦‚ä¸‹ï¼š\n\n![config.jsæ–‡ä»¶ä¸index.htmlåŒçº§ç›®å½•](http://7xlolm.com1.z0.glb.clouddn.com/201511143.pic.jpg)\n\nè¿™ä¸ªconfig.jså¯ä»¥çœ‹åšæ˜¯æˆ‘ä»¬çš„å…¥å£æ¨¡å—ï¼Œæˆ–è€…ä¸»æ¨¡å—ï¼Œå½“requirejsåŠ è½½å®Œæˆåï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œconfig.jsæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨config.jsæ–‡ä»¶ä¸­å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š\n\n```\nalert('è¿™æ˜¯config.jsæ–‡ä»¶');\n```\n\nåŒå‡»æ‰“å¼€requirejsæ–‡ä»¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå¦‚ä¸‹å›¾ï¼Œå¦‚æˆ‘ä»¬æ‰€æ„¿ï¼Œconfig.jsè¢«æ‰§è¡Œäº†ï¼š\n\n![config.jsæ–‡ä»¶è¢«æ‰§è¡Œäº†](http://7xlolm.com1.z0.glb.clouddn.com/20151114c.png)\n\nå¦‚æœconfigæ¨¡å—åªæ˜¯ç®€å•çš„alertä¸€å¥è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ²¡æœ‰å¿…è¦ç”¨requirejsäº†ï¼Œä¸€èˆ¬æ¥è®²ï¼Œæˆ‘ä»¬åœ¨ä¸»æ¨¡å—ä¸­å»å¼•ç”¨å…¶ä»–æ¨¡å—ï¼Œå¼€å‘æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼Œåœ¨ä¹‹å‰çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†jQueryåº“ï¼Œa.jså’Œb.jsï¼Œç°åœ¨æˆ‘ä»¬åªå¼•å…¥äº†requirejså¹¶ä¸”å‘Šè¯‰å®ƒæˆ‘ä»¬çš„ä¸»æ¨¡å—æ˜¯config.jsï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨requirejså»åŠ è½½a.jsã€b.jså’ŒjQueryåº“å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“config.jsç¬¦åˆAMDæ¨¡å—ç¼–å†™è§„èŒƒï¼Œä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬å·²ç»è®²è¿‡äº†AMDè§„èŒƒä¸­å¦‚ä½•ç¼–å†™å’Œå¼•ç”¨æ¨¡å—ï¼Œä¸‹é¢æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æŠŠæˆ‘ä»¬çš„æ–‡ä»¶éƒ½ç¼–å†™æˆä¸€ä¸ªä¸ªæ¨¡å—å°±å¥½äº†ï¼Œç”±äºæˆ‘ä»¬å¤šåœ¨ä¸»æ¨¡å—å³config.jsä¸­å»å¼•ç”¨å…¶ä»–æ¨¡å—ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹config.jså¦‚ä¸‹ï¼š\n\n```\nrequire(['a', 'b'], function(A, B){\n\tconsole.log(A);\n\tconsole.log(B);\n});\n```\n\næˆ‘ä»¬åœ¨config.jsä¸­ä½¿ç”¨requireå‡½æ•°å»åŠ è½½æ¨¡å—aå’Œæ¨¡å—bï¼Œæ³¨æ„ï¼Œrequirejsé»˜è®¤æ¨¡å—æ˜¯.jsåç¼€ç»“å°¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å†™aå’Œbå³å¯ï¼Œå®ƒä¼šè‡ªåŠ¨å»åŠ è½½a.jså’Œb.jsï¼Œä½†æ˜¯è¿™æ ·å†™å°±å¯ä»¥äº†å˜›ï¼Ÿæˆ‘ä»¬åˆ·æ–°æµè§ˆå™¨ï¼š\n\n![æŠ¥é”™](http://7xlolm.com1.z0.glb.clouddn.com/2015111422.pic.jpg)\n\næˆ‘ä»¬ä»”ç»†çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œâ€œnet::ERR_FILE_NOT_FOUNDâ€ï¼Œå†çœ‹æ¨¡å—åŠ è½½çš„è·¯å¾„ â€œfile:///Users/huochunyang/hcyObj/temp/a.jsâ€ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬åˆšåˆšåœ¨config.jsä¸­åŠ è½½æ¨¡å—aå’Œbçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä»…ä»…å†™äº†aå’Œbåˆ°ä¾èµ–æ•°ç»„ä¸­ï¼Œå¯æ˜¯requirejsæ€ä¹ˆçŸ¥é“ä½ è¿™ä¸¤ä¸ªæ¨¡å—åœ¨å“ªé‡Œï¼Ÿæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ï¼Œrequirejsé»˜è®¤ä¼šåœ¨å¼•ç”¨requirejsçš„htmlæ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œæ³¨æ„ï¼Œæ˜¯htmlåŒçº§ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œä¸æ˜¯requirejsåŒçº§ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œå½“ç„¶ï¼Œç”±äºæˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­index.htmlå’Œrequirejsæ˜¯åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œæ‰€ä»¥æ€•å¤§å®¶æ··æ·†ã€‚æ—¢ç„¶è¿™æ ·ï¼Œé—®é¢˜å°±å¥½è¯´äº†ï¼Œæˆ‘ä»¬index.htmlåŒçº§ç›®å½•ä¸‹å¹¶æ²¡æœ‰a.jså’Œb.jsè¿™ä¸¤ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ªæ¨¡å—æ”¾åˆ°äº†jsç›®å½•ä¸‹ï¼Œæ‰€ä»¥ï¼Œå½“ç„¶ä¼šæŠ¥é”™å•¦ï¼Œæ—¢ç„¶æ‰¾åˆ°äº†é—®é¢˜çš„åŸå› ï¼Œæˆ‘ä»¬ä¿®æ”¹config.jsæ–‡ä»¶ï¼š\n\n```\nrequire(['js/a', 'js/b'], function(A, B){\n\tconsole.log(A);\n\tconsole.log(B);\n});\n```\n\nå†åˆ·æ–°æµè§ˆå™¨ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![ä¸æŠ¥é”™ï¼Œä½†è¾“å‡ºundefined](http://7xlolm.com1.z0.glb.clouddn.com/201511144.pic.jpg)\n\næ€ä¹ˆæ ·ï¼Ÿä¸æŠ¥é”™äº†å§ï¼Ÿé‚£æ˜¯å› ä¸ºæˆ‘ä»¬å®¶åœ¨æ¨¡å—çš„æ—¶å€™è·¯å¾„å†™çš„æ­£ç¡®ï¼Œrequirejsèƒ½å¤Ÿæ­£ç¡®åŠ è½½æ¨¡å—ï¼Œæ‰€ä»¥å°±ä¸ä¼šæŠ¥é”™äº†ï¼Œä½†æ˜¯ç»†å¿ƒçš„åŒå­¦ä¼šå‘ç°ï¼Œæ€ä¹ˆè¾“å‡ºä¸¤ä¸ªundefinedï¼Ÿåœ¨config.jsä¸­æˆ‘ä»¬åŠ è½½äº†aã€bä¸¤ä¸ªæ¨¡å—åï¼Œåˆ†åˆ«åœ¨logä¸­è¾“å‡ºäº†Aã€Bæ¨¡å—å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä½¿ç”¨requirejsåŠ è½½è¿‡æ¥çš„ä¸¤ä¸ªæ¨¡å—ç«Ÿç„¶æ˜¯undefinedã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬a.jså’Œb.jsä¸­ï¼Œå¹¶æ²¡æœ‰æš—ä¸­AMDè§„èŒƒå»ç¼–å†™æ¨¡å—ä»£ç ï¼Œä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ä»‹ç»äº†å¦‚æœç¼–å†™ä¸€ä¸ªæ¨¡å—ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ”¹å†™a.jså’Œb.jsä¸ºæ¨¡å—çš„å†™æ³•ï¼Œå¦‚ä¸‹ï¼š\n\na.js\n```\ndefine(function(){\n\tvar a = {\n\t\tcontent : 'a.js'\n\t}\n\n\treturn a;\n});\n```\n\nb.js\n```\ndefine(function(){\n\n\tvar b = {\n\t\tcontent : 'b.js'\n\t}\n\n\treturn b;\n\n});\n```\n\nè¿™ä¸¤ä¸ªæ¨¡å—å¾ˆç®€å•ï¼Œæˆ‘ä»¬ä½¿ç”¨returnè¯­å¥è¿”å›ä¸¤ä¸ªå¯¹è±¡ï¼Œè¢«è¿”å›çš„å¯¹è±¡å°±æ˜¯æ¨¡å—å¯¹è±¡ï¼Œä»£è¡¨äº†è¿™ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬åˆ·æ–°æµè§ˆå™¨ï¼š\n\n![è¾“å‡ºæ¨¡å—Aå’ŒB](http://7xlolm.com1.z0.glb.clouddn.com/201511145.pic.jpg)\n\nå¦‚ä½•æˆ‘ä»¬çš„æ¨¡å—Béœ€è¦ä¾èµ–æ¨¡å—Aï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å†™æ¨¡å—Bä¸ºå¦‚ä¸‹ä»£ç ï¼Œåœ¨ä¾èµ–æ•°ç»„ä¸­ä¾èµ–æ¨¡å—Aï¼š\n\n```\ndefine(['js/a'], function(A){\n\n\tvar b = {\n\t\tcontent : 'b.js'\n\t}\n\n\treturn b;\n\n});\n```\n\nä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œæˆ‘ä»¬æ¯æ¬¡å»åŠ è½½æ¨¡å—çš„æ—¶å€™ï¼Œéƒ½è¦å†™å¯¹æ¨¡å—æ‰€åœ¨è·¯å¾„ï¼Œæ¯”å¦‚åŠ è½½æ¨¡å—aï¼Œæˆ‘ä»¬å°±è¦è¿™æ ·å»åŠ è½½ â€œjs/a.jsâ€ ï¼Œå‡å¦‚æˆ‘ä»¬çš„é¡¹ç›®åšçš„æ¯”è¾ƒå¤§ï¼Œæ¨¡å—åˆ†çš„æ¯”è¾ƒæ·±ï¼ŒåŠç›®å½•å±‚çº§æ·±ï¼Œå¦‚æœæˆ‘ä»¬è¿˜è¿™æ ·å»åŠ è½½çš„è¯ï¼Œå¯èƒ½ä¼šå†™æˆä¸‹é¢è¿™æ ·ï¼š\n\n* \"modules/dom/XXX/aaa.js\" *\n\nå¦‚æœæ¯æ¬¡ä¸ºäº†åŠ è½½ä¸€ä¸ªæ¨¡å—éƒ½è¦è¿™æ ·å»å†™çš„è¯ï¼Œç¬¬ä¸€æˆ‘ä»¬è¿˜è¦è®°ä½æ¨¡å—æ‰€åœ¨è·¯å¾„ï¼Œå¦‚æœè®°ä¸ä½çš„è¯è¿˜è¦å»æŸ¥çœ‹ï¼Œå¾ˆå½±å“å¼€å‘æ•ˆç‡ï¼Œç¬¬äºŒå†™èµ·æ¥æ€»æ˜¯æ„Ÿè§‰å¾ˆä¸çˆ½ï¼Œä»£ç çœ‹ç€å¾ˆæ¶å¿ƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°requirejsçš„é…ç½®äº†ï¼Œrequirejsæœ‰ä¸€ä¸ªconfigå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªjsonå¯¹è±¡ï¼Œè®¾ç½®ä¸€äº›é…ç½®é€‰é¡¹ï¼Œæˆ‘ä»¬ä¿®æ”¹config.jså¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tpaths : {\n\t\ta : 'js/a',\n\t\tb : 'js/b'\n\t}\n});\n\n\nrequire(['a', 'b'], function(A, B){\n\tconsole.log(A);\n\tconsole.log(B);\n});\n```\n\né¦–å…ˆæˆ‘ä»¬åœ¨ä½¿ç”¨require()å‡½æ•°å»åŠ è½½æ¨¡å—ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨requirejs.config()æ–¹æ³•å»å¯¹requirejsè¿›è¡Œé…ç½®ï¼Œrequirejs.configæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªpathsé…ç½®é¡¹ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™æ˜¯ä¸€é¡¹è·¯å¾„é…ç½®ï¼Œå†çœ‹ä¸‹é¢ä½¿ç”¨require()å‡½æ•°å»åŠ è½½æ¨¡å—æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥å»åŠ è½½aå’Œbï¼Œè¿™æ ·æ˜¯å¯ä»¥æ­£å¸¸åŠ è½½æ¨¡å—çš„ï¼Œå› ä¸ºåœ¨åŠ è½½aæ¨¡å—çš„æ—¶å€™ï¼Œrequirejså‘ç°åœ¨pathsä¸­é…ç½®çš„è·¯å¾„ä¸­aå¯¹åº”â€œjs/aâ€ï¼Œæ‰€ä»¥ï¼Œrequireä¼šè‡ªåŠ¨å»åŠ è½½js/aæ¨¡å—ï¼Œè€Œä¸æ˜¯åœ¨index.htmlåŒçº§ç›®å½•ä¸‹å»æ‰¾ï¼Œæ‰€ä»¥pathsé…ç½®å°±åƒä¸€ä¸ªè·¯ç”±ï¼Œåˆ·æ–°é¡µé¢ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ä¸­çš„è¾“å‡ºï¼Œæˆ‘ä»¬ç­‰å¾…ç‰‡åˆ»ä¼šå‘ç°ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![åŠ è½½è¶…æ—¶](http://7xlolm.com1.z0.glb.clouddn.com/201511146.pic.jpg)\n\nä»€ä¹ˆï¼ŸåŠ è½½è¶…æ—¶ï¼Ÿä»€ä¹ˆæƒ…å†µï¼Ÿåˆ«ç´§å¼ ï¼Œè¿˜è®°æˆ‘ä»¬çš„b.jsä¸­å—ï¼Ÿæˆ‘ä»¬åœ¨b.jsä¸­ä¾èµ–äº†a.jsï¼Œå¯æ˜¯æˆ‘ä»¬çš„ä»£ç æ˜¯æ€ä¹ˆä¾èµ–çš„å‘¢ï¼Ÿæ‰“å¼€b.jsï¼š\n\n```\ndefine(['js/a'], function(A){\n\n\tvar b = {\n\t\tcontent : 'b.js'\n\t}\n\n\treturn b;\n\n});\n```\n\næˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬ä¾èµ–aï¼Œæ¨¡å—çš„æ—¶å€™ä¾ç„¶ä½¿ç”¨'js/a'è¿›è¡Œä¾èµ–ï¼Œè€Œå½“requirejsåœ¨è§£æ'js/a'çš„æ—¶å€™ï¼Œå‘ç°æœ‰ä¸€ä¸ª'a'ï¼Œç„¶ååˆå†pathsé…ç½®ä¸­å‘ç°'a'å¯¹åº”'js/a',äºæ˜¯ï¼Œrequirejså°±æŠŠ'a'æ¢æˆäº†'js/a'ï¼Œæ‰€ä»¥æ•´ä½“çš„'js/a'æœ€ç»ˆè¢«æ¢æˆäº†'js/js/a'ï¼Œç„¶ååˆå†è·¯å¾„ä¸­å‘ç°äº†aï¼Œäºæ˜¯åŠ è½½è·¯å¾„åˆè¢«æ›¿æ¢æˆäº†'js/js/js/a'ï¼Œå¦‚æ­¤ä¸‹å»ï¼Œæœ€ç»ˆæˆäº†æ­»å¾ªç¯ï¼Œè€Œè¶…è¿‡ä¸€å®šçš„æ—¶é—´ä¹‹åï¼Œå°±ä¼šæŠ¥é”™åŠ è½½è¶…æ—¶ï¼Œæ˜ç™½äº†å§ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æŠŠb.jsä¸­ä¾èµ–a.jsçš„å­—ç¬¦åˆ›ç›´æ¥å†™æˆ'a'å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ï¼š\n\n```\ndefine(['a'], function(A){\n\n\tvar b = {\n\t\tcontent : 'b.js'\n\t}\n\n\treturn b;\n\n});\n```\n\nå†æ¬¡åˆ·æ–°æµè§ˆå™¨ï¼Œæ€ä¹ˆæ ·ï¼Ÿæ­£å¸¸åŠ è½½äº†å§ï¼Ÿè¿™æ ·ä»¥åæˆ‘ä»¬åªè¦éœ€è¦ä¾èµ–aæ¨¡å—ï¼Œæˆ‘ä»¬å°±ç›´æ¥å†™'a'å°±å¯ä»¥äº†ï¼š\n\n![æ­£å¸¸åŠ è½½](http://7xlolm.com1.z0.glb.clouddn.com/201511147.pic.jpg)\n\né‚£ä¹ˆå¥½ï¼Œa.jså’Œb.jsæˆ‘ä»¬éƒ½æ”¹æˆäº†æ¨¡å—çš„ç¼–å†™æ–¹å¼ï¼Œå¹¶ä¸”ä¹Ÿåšäº†pathsé…ç½®ï¼Œæœ€ç»ˆä¹ŸæˆåŠŸåŠ è½½äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜é—æ¼äº†ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯jQueryè¿™ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œé‚£ä¹ˆrequirejsèƒ½å¤ŸåŠ è½½ç¬¬ä¸‰æ–¹åº“å—ï¼Ÿç­”æ¡ˆæ˜¯ï¼šåªè¦ç¬¬ä¸‰æ–¹åº“æä¾›äº†AMDæ¥å£ï¼Œé‚£ä¹ˆrequirejså°±å¯ä»¥åŠ è½½ï¼Œè€ŒjQueryæœ¬èº«ä¹Ÿæä¾›äº†è¿™ä¸ªæ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥åŠ è½½å°±å¥½äº†ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¾ç„¶åœ¨pathsä¸­é…ç½®ä¸€ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tpaths : {\n\t\ta : 'js/a',\n\t\tb : 'js/b',\n\t\t$ : 'js/jquery.min'\n\t}\n});\n```\n\nç„¶ååœ¨configä¸­å»åŠ è½½jQueryå¹¶è¯•ç€ä½¿ç”¨jQueryï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä¿®æ”¹æˆ‘ä»¬çš„config.jså¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tpaths : {\n\t\ta : 'js/a',\n\t\tb : 'js/b',\n\t\tjquery : 'js/jquery.min'\n\t}\n});\n\nrequire(['a', 'b', 'jquery'], function(A, B, $){\n\talert($('html').html());\n\tconsole.log(A);\n\tconsole.log(B);\n});\n```\n\nåˆ·æ–°é¡µé¢ï¼š\n\n![ç¬¬ä¸‰æ–¹åº“åŠ è½½æˆåŠŸ](http://7xlolm.com1.z0.glb.clouddn.com/201511148.pic.jpg)\n\nå¼¹å‡ºå¼¹çª—ï¼Œè¯æ˜æˆ‘ä»¬åŠ è½½jQueryæˆåŠŸå¹¶æˆåŠŸä½¿ç”¨ã€‚\n\nä¸‹é¢æˆ‘ä»¬å†æ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆèƒ½å¤Ÿç›´æ¥é€šè¿‡requirejsåŠ è½½jQueryï¼Ÿæ˜¯å› ä¸ºjQueryè¿™ä¸ªç¬¬ä¸‰æ–¹åº“æä¾›äº†AMDæ”¯æŒï¼Œå¯æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“éƒ½æä¾›äº†AMDæ”¯æŒï¼Œé‚£ä¹ˆrequireå°±ä¸èƒ½åŠ è½½é‚£äº›ç¬¬ä¸‰æ–¹åº“äº†å—ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¾ç„¶èƒ½å¤ŸåŠ è½½ã€‚ä¸è¿‡ï¼Œè¿™å°±æ¶‰åŠåˆ°å¦‚ä½•åŠ è½½éAMDæ¨¡å—å†™æ³•çš„æ¨¡å—äº†ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¨¡å—cï¼Œä½†æ˜¯c.jså¹¶æ²¡æœ‰æŒ‰ç…§AMDè§„èŒƒå°è£…ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬åœ¨jsæ–‡ä»¶åŠ ä¸‹åˆ›å»ºc.jsï¼Œå¹¶å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š\n\n```\nvar show = function(){\n\talert('è°ƒç”¨äº†c');\n}\n```\n\næˆ‘ä»¬çš„c.jså¾ˆç®€å•ã€‚åªæ˜¯å•çº¯çš„å®šä¹‰äº†ä¸€ä¸ªcå‡½æ•°ï¼Œå¹¶å¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†ï¼Œæ˜¾ç¤ºâ€œè°ƒç”¨äº†câ€ï¼Œæ‰€ä»¥è¿™ä¸ªc.jså¹¶ä¸æ˜¯ä¸€ä¸ªAMDæ¨¡å—ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨requirejsåŠ è½½è¿™ä¸ªcï¼Œè¯¥å¦‚ä½•åŠ è½½å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°requirejs.config()ä¸­çš„å¦ä¸€ä¸ªé…ç½®é¡¹ shim äº†ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†pathsæ˜¯ç”¨æ¥é…ç½®åŠ è½½æ¨¡å—è·¯å¾„çš„ï¼Œshimåˆ™æ˜¯ç”¨æ¥åŠ è½½éAMDæ¨¡å—è§„èŒƒçš„â€œæ¨¡å—â€çš„ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†åŠ è½½c.jsï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹config.jså¹¶æ·»åŠ shimé…ç½®ï¼Œå¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tpaths : {\n\t\ta : 'js/a',\n\t\tb : 'js/b',\n\t\tc : 'js/c',\n\t\tjquery : 'js/jquery.min'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\texports : 'show'\n\t\t}\n\t}\n});\n\n\nrequire(['a', 'b', 'jquery', 'c'], function(A, B, $, c){\n\tconsole.log(c);\n});\n```\n\næˆ‘ä»¬æ·»åŠ äº†shimé…ç½®ï¼Œé…ç½®ä¸­ï¼Œc ä»£è¡¨æˆ‘ä»¬åœ¨requireä¸­å¼•å…¥æ¨¡å—æ—¶çš„åå­—ï¼Œå³æˆ‘ä»¬å¯ä»¥é€šè¿‡require(['c'])å»å¼•ç”¨cæ¨¡å—ï¼Œcå¯¹åº”ä¸€ä¸ªjsonå¯¹è±¡ï¼Œå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªexportså±æ€§ï¼Œexportså±æ€§çš„å€¼å°±æ˜¯æˆ‘ä»¬è¦åˆ°å¤„çš„æ¥å£ï¼Œæ³¨æ„ï¼Œæˆ‘ä»¬ä¾ç„¶è¦åœ¨pathsä¸­æ·»åŠ æ¨¡å—cçš„é…ç½®ï¼Œè¿™æ ·æ‰èƒ½æ­£å¸¸åŠ è½½æ¨¡å—ï¼Œæœ€åï¼Œæˆ‘ä»¬åœ¨æ§åˆ¶å°ä¸­è¾“å‡ºäº†æ¨¡å—cï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œåˆ·æ–°ï¼š\n\n![è¾“å‡ºæ¨¡å—c](http://7xlolm.com1.z0.glb.clouddn.com/201511149.pic.jpg)\n\næˆ‘ä»¬çœ‹åˆ°ï¼Œæ‰“å°å‡ºæ¥çš„å°±æ˜¯æˆ‘ä»¬çš„å‡½æ•°showï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åˆ°å¤„çš„æ¥å£å°±æ˜¯showå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä¸€ä¸‹è¯•è¯•ï¼Œä¿®æ”¹config.jsï¼š\n\n```\nrequire(['a', 'b', 'jquery', 'c'], function(A, B, $, c){\n\tc();\n});\n```\n\nåˆ·æ–°é¡µé¢ï¼š\n\n![è°ƒç”¨äº†showå‡½æ•°](http://7xlolm.com1.z0.glb.clouddn.com/2015111410.pic.jpg)\n\næ€ä¹ˆæ ·ï¼Œå¼¹å‡ºå¼¹çª—äº†å§ï¼Œå®é™…ä¸Šï¼Œç»è¿‡shimé…ç½®åï¼Œrequirejsä¼šè‡ªåŠ¨ä¿®æ”¹c.jsä¸ºä¸€ä¸ªAMDæ¨¡å—ï¼Œä¸ºå…¶æ·»åŠ å°è£…ä»£ç ï¼Œå¦‚ä¸‹ï¼š\n\n```\ndefine(function(){\n\tvar show = function(){\n\t\talert('è°ƒç”¨äº†c');\n\t}\t\n\n\treturn show;\n});\n```\n\næˆ‘ä»¬çœ‹åˆ°ï¼Œreturnè¿”å›çš„æ˜¯showå‡½æ•°ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨shimä¸­ä¸ºcæ¨¡å—é…ç½®çš„å¯¼å‡ºæ¥å£ä¸ºshowï¼Œå³exportsçš„å€¼æ˜¯showï¼Œæ‰€ä»¥åŠ å…¥æˆ‘ä»¬ä¿®æ”¹exportsçš„å€¼ä¸ºå…¶ä»–å€¼ï¼Œæ˜¯æ²¡æœ‰åŠæ³•å¯¼å‡ºæˆåŠŸçš„ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¿®æ”¹config.jsä¸­cæ¨¡å—çš„shimé…ç½®ï¼Œå¦‚ä¸‹ï¼Œæˆ‘ä»¬å¯¼å‡ºçš„æ¥å£ä¸æ˜¯showè€Œæ˜¯éšæ„çš„aaa:\n\n```\nshim : {\n\tc : {\n\t\texports : 'aaa'\n\t}\n}\n```\n\nåˆ·æ–°é¡µé¢ï¼š\n\n![æŠ¥é”™](http://7xlolm.com1.z0.glb.clouddn.com/2015111411.pic.jpg)\n\næŠ¥é”™ï¼Œcä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬å¯¼å‡ºçš„æ¥å£æ˜¯aaaï¼Œé¬¼çŸ¥é“ä½ è¿™ä¸ªaaaæ˜¯ä»€ä¹ˆå•Šã€‚æ‰€ä»¥æœ€åè°ƒç”¨çš„æ—¶å€™å½“ç„¶ä¼šæŠ¥é”™ã€‚\n\næˆ‘ä»¬è¿˜å¯ä»¥å¯¼å‡ºå¤šä¸ªæ¥å£ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„c.jsä¸­æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«æ˜¯showå‡½æ•°å’Œhideå‡½æ•°ï¼Œä¿®æ”¹æˆ‘ä»¬çš„c.jså¦‚ä¸‹ï¼š\n\n```\nvar show = function(){\n\talert('showå‡½æ•°');\n}\t\n\nvar hide = function(){\n\talert('hideå‡½æ•°');\n}\n```\n\nå¦‚æœæˆ‘ä»¬ç»§ç»­ä½¿ç”¨ä¸Šé¢çš„shimé…ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†åªèƒ½å¯¼å‡ºshowå‡½æ•°ï¼Œæ²¡æœ‰åŠæ³•å¯¼å‡ºhideï¼Œå¦‚ä½•æ‰èƒ½å°†ä¸¤ä¸ªæ¥å£éƒ½å¯¼å‡ºæ¥å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±ä¸èƒ½ä½¿ç”¨exportså±æ€§äº†ï¼Œæˆ‘ä»¬è¦ç”¨initå±æ€§ï¼Œåˆ†åˆ«å°†ä¸¤ä¸ªæ¥å£å¯¼å‡ºï¼Œä¿®æ”¹config.jså¦‚ä¸‹ï¼š\n\n```\nshim : {\n\tc : {\n\t\tinit : function(){\n\t\t\treturn {\n\t\t\t\taaa : show,\n\t\t\t\tbbb : hide\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\ninitå±æ€§å¯¹åº”ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œé¢å¯¹åº”æˆ‘ä»¬è¦å¯¼å‡ºçš„æ¥å£ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æŠŠä¸¤ä¸ªæ¥å£éƒ½å¯¼å‡ºäº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡å—çš„aaaè°ƒç”¨showå‡½æ•°ï¼Œæ¨¡å—çš„bbbè°ƒç”¨hideå‡½æ•°ï¼Œä¿®æ”¹config.jså»å°è¯•è°ƒç”¨ä¸€ä¸‹ï¼š\n\n```\nrequire(['a', 'b', 'jquery', 'c'], function(A, B, $, c){\n\tc.aaa();\n\tc.bbb();\n});\n```\n\næ‰“å¼€æµè§ˆå™¨åˆ·æ–°ï¼Œæ€ä¹ˆæ ·ï¼Œä¸¤ä¸ªå‡½æ•°æ­£å¸¸è°ƒç”¨äº†å§ï¼Œä¸è¿‡è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œinitå±æ€§å¯¹åº”çš„å‡½æ•°ä¸­ï¼Œè¿”å›çš„å¯¹è±¡é‡Œé¢ï¼Œshowå’Œhideä¸èƒ½ç”¨å¼•å·å¼•èµ·æ¥ï¼Œä¸‹é¢çš„å†™æ³•æ˜¯é”™è¯¯çš„ï¼š\n\n```\nshim : {\n\tc : {\n\t\tinit : function(){\n\t\t\treturn {\n\t\t\t\taaa : 'show',\n\t\t\t\tbbb : 'hide'\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\nåˆ·æ–°æµè§ˆå™¨ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![åŠ å¼•å·åæŠ¥é”™](http://7xlolm.com1.z0.glb.clouddn.com/2015111412.pic.jpg)\n\né‚£ä¹ˆä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬è®¾ç½®äº†initå±æ€§åï¼Œrequirejsç›¸å½“äºè‡ªåŠ¨ä¸ºæˆ‘ä»¬å°è£…äº†c.jså¦‚ä¸‹é¢è¿™æ ·ï¼š\n\n```\ndefine(function(){\n\tvar show = function(){\n\t\talert('showå‡½æ•°');\n\t}\t\n\n\tvar hide = function(){\n\t\talert('hideå‡½æ•°');\n\t}\n\n\treturn {\n\t\taaa : show,\n\t\tbbb : hide\n\t}\n});\n```\n\nä¸Šé¢ä»£ç ä¸­showå’Œhideæ²¡æœ‰åŠ å¼•å·ï¼Œæ‰€ä»¥æ˜¯å˜é‡ï¼Œåˆ†åˆ«å¼•ç”¨ä¸Šé¢çš„showå‡½æ•°å’Œhideå‡½æ•°ï¼Œå¦‚æœæˆ‘ä»¬åŠ äº†å¼•å·ï¼Œrequirejså°è£…ä¹‹åå°±ä¼šæƒ³è¿™æ ·ï¼š\n\n```\ndefine(function(){\n\tvar show = function(){\n\t\talert('showå‡½æ•°');\n\t}\t\n\n\tvar hide = function(){\n\t\talert('hideå‡½æ•°');\n\t}\n\n\treturn {\n\t\taaa : 'show',\n\t\tbbb : 'hide'\n\t}\n});\n```\n\næˆ‘ä»¬çœ‹ä¸Šé¢çš„ä»£ç ï¼Œ'show'å’Œ'hide'éƒ½åŠ äº†å¼•å·ï¼Œæ‰€ä»¥ä»–ä»¬æ˜¯å­—ç¬¦ä¸²ï¼Œå¹¶æ²¡æœ‰å¼•ç”¨ä¸Šé¢çš„showå‡½æ•°å’Œhideå‡½æ•°ï¼Œåªæ˜¯å¯¼å‡ºä¸€ä¸ªå­—ç¬¦ä¸²è€Œå·²ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æŠŠå­—ç¬¦ä¸²å½“åšå‡½æ•°æ¥è°ƒç”¨çš„æ—¶å€™ï¼Œå½“ç„¶ä¼šæŠ¥é”™ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥éªŒè¯è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨å¸¦å¼•å·çš„é…ç½®ï¼Œç„¶åæ‰“å°å‡ºc.aaaçš„ç±»å‹ï¼Œå¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tpaths : {\n\t\ta : 'js/a',\n\t\tb : 'js/b',\n\t\tc : 'js/c',\n\t\tjquery : 'js/jquery.min'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\tinit : function(){\n\t\t\t\treturn {\n\t\t\t\t\taaa : 'show',\n\t\t\t\t\tbbb : 'hide'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n\nrequire(['a', 'b', 'jquery', 'c'], function(A, B, $, c){\n\tconsole.log(typeof c.aaa);\n});\n```\n\nåˆ·æ–°æµè§ˆå™¨ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œc.aaaçš„ç¡®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š\n\n![æ‰“å°å‡ºæ¥çš„æ˜¯å­—ç¬¦ä¸²](http://7xlolm.com1.z0.glb.clouddn.com/2015111413.pic.jpg)\n\nå¦å¤–ï¼Œæˆ‘ä»¬æ³¨æ„ä¸€ç‚¹ï¼Œpathsé‡Œé¢çš„é…ç½®ï¼Œè·¯å¾„ä¸­éƒ½å¸¦æœ‰'js/'ï¼Œå¦‚ä¸‹ï¼š\n\n```\npaths : {\n\ta : 'js/a',\n\tb : 'js/b',\n\tc : 'js/c',\n\tjquery : 'js/jquery.min'\n}\n```\n\nä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„æ¨¡å—éƒ½æ”¾åœ¨jsç›®å½•ä¸‹ï¼Œæ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä¸å¯ä»¥é€šè¿‡ä¸€ä¸ªé…ç½®ï¼Œæ¥å‘Šè¯‰æˆ‘ä»¬çš„requirejsï¼Œæ¯æ¬¡æŸ¥æ‰¾æ¨¡å—çš„æ—¶å€™éƒ½åŸºäºjsç›®å½•æŸ¥æ‰¾å‘¢ï¼Ÿè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ¯æ¬¡ç¼–å†™pathsé…ç½®çš„æ—¶å€™éƒ½è¦å†™ä¸Š'js/'äº†ï¼Œå®é™…ä¸Šæ˜¯å¯ä»¥çš„ï¼Œrequirejs.config()çš„é…ç½®å¯¹è±¡ä¸­è¿˜æœ‰ä¸€ä¸ª baseUrl å±æ€§ï¼Œç”¨æ¥åˆ¶å®šæ¨¡å—çš„æŸ¥æ‰¾ç›®å½•ï¼Œä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tbaseUrl : './js',\n\tpaths : {\n\t\ta : 'a',\n\t\tb : 'b',\n\t\tc : 'c',\n\t\tjquery : 'jquery.min'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\tinit : function(){\n\t\t\t\treturn {\n\t\t\t\t\taaa : show,\n\t\t\t\t\tbbb : hide\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n```\n\nå½“ç„¶ï¼ŒbaseUrlæœ¬çœæ˜¯åŸºäºå¼•å…¥requirejsçš„htmlæ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ï¼Œåœ¨æœ¬ä¾‹ä¸­å³index.htmlæ‰€åœ¨ç›®å½•çš„ã€‚\n\nå¦å¤–ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå½“æˆ‘ä»¬é…ç½®å®ŒbaseUrlä¹‹åï¼Œpathsä¸­aã€bã€cä¸‰ä¸ªæ¨¡å—å¯ä»¥ä¸ç”¨é…ç½®ï¼Œå› ä¸ºå·²ç»æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ï¼Œä½†æ˜¯jqueryéœ€è¦ä¿ç•™ï¼Œå¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tbaseUrl : './js',\n\tpaths : {\n\t\tjquery : 'jquery.min'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\tinit : function(){\n\t\t\t\treturn {\n\t\t\t\t\taaa : show,\n\t\t\t\t\tbbb : hide\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n```\n\nè¿™æ ·ï¼Œå½“requirejså»åŠ è½½çš„aã€bã€cæ¨¡å—çš„æ—¶å€™ï¼Œå°±è‡ªåŠ¨ä¼šæ ¹æ®baseUrlä¸­çš„é…ç½®å»æŸ¥æ‰¾æ¨¡å—ï¼Œè€Œæˆ‘ä»¬çš„ä¸‰ä¸ªæ¨¡å—ä¹Ÿæ°å¥½åœ¨jsç›®å½•ä¸‹ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨é…ç½®äº†ï¼Œæ€»è€Œè¨€ä¹‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆçµå¥½å¥½ç”¨çš„é…ç½®ï¼Œå…·ä½“æ ¹æ®ä½ çš„é¡¹ç›®æ¥ã€‚\n\nä¸‹é¢ï¼Œæˆ‘ä»¬åœ¨è€ƒè™‘ä¸€ç§æƒ…æ™¯ï¼Œå‡å¦‚ä½ çš„é¡¹ç›®å¾ˆå¤§ï¼Œåœ¨æœ€åˆé˜¶æ®µï¼Œä½ çš„é¡¹ç›®é‡Œå¼•ç”¨äº†jQuery1.xç‰ˆæœ¬ï¼Œåæ¥éšç€é¡¹ç›®çš„å‘å±•ï¼Œé¡¹ç›®éœ€è¦å¼•å…¥jQuery2.xçš„ç‰ˆæœ¬ï¼Œä½†æ˜¯åˆä¸èƒ½åˆ é™¤æ‰åŸæ¥çš„1.xç‰ˆæœ¬ï¼Œå› ä¸ºé¡¹ç›®ä¸­æœ‰å¾ˆå¤šæ¨¡å—éƒ½åœ¨ä½¿ç”¨1.xçš„ç‰ˆæœ¬ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¸Œæœ›åœ¨æŸäº›æ–‡ä»¶ä¸­å¼•å…¥jQueryæ—¶ä½¿ç”¨çš„1.xç‰ˆæœ¬ï¼Œè€Œåœ¨å¦å¤–ä¸€äº›æ–‡ä»¶ä¸­ä½¿ç”¨çš„æ˜¯2.xçš„ç‰ˆæœ¬ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿæœ‰çš„åŒå­¦å¯èƒ½ä¼šè¿™æ ·æƒ³ï¼Œå¦‚ä¸‹é…ç½®ï¼š\n\n```\nrequirejs.config({\n\tbaseUrl : './js',\n\tpaths : {\n\t\tjquery1 : 'jquery-1.11.3'\n\t\tjquery2 : 'jquery-2.1.4'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\tinit : function(){\n\t\t\t\treturn {\n\t\t\t\t\taaa : show,\n\t\t\t\t\tbbb : hide\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n```\n\né…ç½®ä¸¤ä¸ªjqueryï¼Œä¸€ä¸ªjquery1ï¼Œä¸€ä¸ªjquery2ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒçš„ç‰ˆæœ¬ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨1.xç‰ˆæœ¬çš„æ—¶å€™ï¼Œå°±å¼•ç”¨'jquery1'ï¼Œå½“æˆ‘ä»¬æƒ³ä½¿ç”¨2.xç‰ˆæœ¬çš„æ—¶å€™å°±å¼•ç”¨'jquery2'ï¼Œè¿™æ ·çœ‹ä¸Šå»å¥½åƒå¾ˆåˆç†ï¼Œè¯•ç€ä½¿ç”¨ä¸€ä¸‹ï¼Œä¿®æ”¹config.jsä¸­requireä¸­çš„ä»£ç å¦‚ä¸‹ï¼š\n\n```requirejs.config({\n\tbaseUrl : './js',\n\tpaths : {\n\t\tjquery1 : 'jquery-1.11.3',\n\t\tjquery2 : 'jquery-2.1.4'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\tinit : function(){\n\t\t\t\treturn {\n\t\t\t\t\taaa : show,\n\t\t\t\t\tbbb : hide\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n\nrequire(['jquery1'], function($){\n\talert($('html').html());\n});\n\n```\n\næˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼ŒæŠ¥é”™äº†ï¼š\n\n![æŠ¥é”™](http://7xlolm.com1.z0.glb.clouddn.com/2015111414.pic.jpg)\n\næŸ¥çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œä»–è¯´$æ²¡æœ‰å®šä¹‰ï¼Œè¨€å¤–ä¹‹æ„å°±æ˜¯è¯´æˆ‘ä»¬jQueryæ¨¡å—æ ¹æœ¬æ²¡æœ‰å¼•å…¥è¿›æ¥ï¼Œæ€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬åœ¨pathsä¸­é…ç½®jqueryæ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨åˆ«åï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªèƒ½ä½¿ç”¨ jquery è€Œä¸èƒ½ä½¿ç”¨ jquery1å’Œjquery2ï¼Œä¸ä¿¡ä½ å°†requirejs.config()ä¸­çš„pathsä¿®æ”¹å¦‚ä¸‹ï¼š\n\n```\npaths : {\n\tjquery : 'jquery-1.11.3'\n}\n```\n\nåˆ·æ–°é¡µé¢å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯ä¿®æ”¹æˆä¸‹é¢è¿™æ ·å°±ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼š\n\n```\npaths : {\n\tjq : 'jquery-1.11.3'\n}\n```\n\nå› ä¸ºä½ åªèƒ½ç”¨jqueryè€Œä¸èƒ½ç”¨ä»»ä½•å…¶ä»–åˆ«åï¼Œä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬æ‰“å¼€jqueryçš„æºç ï¼Œå¼€å…¶ä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![jQueryæºç ä¸­å¯¹AMDå…¼å®¹åšæ³•](http://7xlolm.com1.z0.glb.clouddn.com/2015111415.pic.jpg)\n\nè¿™æ®µä»£ç å…¶å®å°±æ˜¯jQueryåº“å¯¹AMDæ¨¡å—çš„å…¼å®¹åšæ³•ï¼Œæˆ‘ä»¬å‘ç°ï¼ŒjQueryå»ä½¿ç”¨defineå®šä¹‰æ¨¡å—çš„æ—¶å€™ï¼Œä»–æ˜¾ç¤ºçš„ä¼ é€’äº†ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² 'jquery'ï¼Œè¿™ä¸ªå‚æ•°åœ¨æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„æ¨¡å—ä¸­ä¸€èˆ¬æ˜¯ä¸å»æ‰‹åŠ¨å†™æ­»å¾—ï¼Œä¸€èˆ¬ç”±æ„å»ºå·¥å…·åœ¨ä¼˜åŒ–æ¨¡å—æ—¶è‡ªåŠ¨å¡«å……çš„ï¼Œä»¥å…æ¨¡å—å†²çªï¼Œå› ä¸ºè¿™ä¸ªå‚æ•°ä»£è¡¨äº†æ¨¡å—idï¼Œé‚£ä¹ˆjqueryä¸ºä»€ä¹ˆè¦å†™æ­»å‘¢ï¼Ÿ\n\nç½‘ä¸Šæœ‰ç§è¯´æ³•æ˜¯å‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œå› ä¸ºåƒjQueryè¿™ç§åº“æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨æ˜¯å¾ˆé¢‘ç¹çš„ï¼Œå¾ˆå¤šæ¨¡å—éƒ½è¦ä¾èµ–è¿™ä¸ªæ¨¡å—ï¼Œå¦‚æœidè¿™ä¸ªå‚æ•°ä¸å†™æ­»å¾—è¯ï¼Œæ„å‘³ç€æˆ‘ä»¬åœ¨ä¾èµ–jQueryçš„æ—¶å€™å¯ä»¥éšæ„èµ·åå­—ï¼Œè€Œéå¿…é¡»ä½¿ç”¨ 'jquery' ï¼Œè¿™æ ·å…¶ä»–æ¨¡å—å°±å¯ä»¥ç»™jQueryèµ·ä¸åŒçš„æ¨¡å—åï¼Œè¿™å°±ä¼šå¯¼è‡´å¤šæ¬¡å¼•å…¥jQueryã€‚\n\nç°åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“äº†ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨pathsé…ç½®ä¸­é…ç½®jQueryçš„æ—¶å€™ä¸ºä»€ä¹ˆåªèƒ½ä½¿ç”¨ 'jquery' äº†ï¼Œæˆ‘ä»¬å›åˆ°ä¹‹å‰çš„é—®é¢˜ï¼Œå³åœ¨ä¸åŒçš„æ¨¡å—å¼•å…¥ä¸åŒç‰ˆæœ¬çš„jQueryï¼Œæƒ³ä¸€æƒ³æˆ‘ä»¬è¿˜èƒ½è¿™æ ·å»é…ç½®äº†å˜›ï¼š\n\n```\npaths : {\n\tjquery1 : 'jquery-1.11.3',\n\tjquery2 : 'jquery-2.1.4'\n}\n```\n\nç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸ºæˆ‘ä»¬åªèƒ½ç”¨ jquery è€Œä¸èƒ½ç”¨ jquery1 æˆ– jquery2ï¼Œé‚£éš¾é“æˆ‘ä»¬è¿™æ ·é…ç½®å—ï¼Ÿå¦‚ä¸‹ï¼š\n\n```\npaths : {\n\tjquery : 'jquery-1.11.3',\n\tjquery : 'jquery-2.1.4'\n}\n```\n\nç®€ç›´å°±æ˜¯ç¬‘è¯ï¼Œè¿™æ ·ç¬¬äºŒä¸ªjqueryå±æ€§ä¼šè¦†ç›–ç¬¬ä¸€ä¸ªjqueryå±æ€§ï¼Œé‚£æ€ä¹ˆåŠï¼Ÿè¿™å°±æ¶‰åŠrequirejsçš„å¦ä¸€ä¸ªé…ç½®äº†ï¼Œmapé…ç½®é¡¹ï¼Œmapé…ç½®é¡¹çš„ä½œç”¨æ˜¯ï¼Œåœ¨ä¸åŒçš„æ¨¡å—ä¸­ï¼Œå³jsæ–‡ä»¶ä¸­ï¼Œä¾èµ–ç›¸åŒçš„æ¨¡å—åï¼Œç¼ºåŠ è½½ä¸åŒçš„æ¨¡å—ã€‚\n\næˆ‘ä»¬å…ˆåœ¨config.jsä¸­å¢åŠ mapé…ç½®å¦‚ä¸‹ï¼š\n\n```\nrequirejs.config({\n\tbaseUrl : './js',\n\tpaths : {\n\t\tjquery : 'jquery-1.11.3'\n\t},\n\n\tshim : {\n\t\tc : {\n\t\t\tinit : function(){\n\t\t\t\treturn {\n\t\t\t\t\taaa : show,\n\t\t\t\t\tbbb : hide\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tmap : {\n\t\t'a' : {\n\t\t\tjquery : 'jquery-1.11.3'\n\t\t},\n\t\t\n\t\t'b' : {\n\t\t\tjquery : 'jquery-2.1.4'\n\t\t}\n\t}\n});\n```\n\næˆ‘ä»¬åœ¨mapä¸­å¯ä»¥å¯¹æ¯ä¸€ä¸ªæ¨¡å—è¿›è¡Œé…ç½®ï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬é…ç½®äº†å½“åœ¨ a æ¨¡å—ä¸­ä¾èµ– 'jquery' æ—¶ï¼Œæˆ‘ä»¬åŠ è½½çš„æ˜¯ 1.11.3 ç‰ˆæœ¬ï¼Œå½“æˆ‘ä»¬åœ¨ b æ¨¡å—ä¸­ä¾èµ– 'jquery' æ—¶ï¼Œæˆ‘ä»¬åŠ è½½çš„æ˜¯ 2.1.4 ç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥å°è¯•ä¸€ä¸‹ï¼Œåˆ†åˆ«ä¿®æ”¹a.jså’Œb.jsè¿™ä¸¤ä¸ªæ¨¡å—ï¼Œè®©ä»–ä»¬éƒ½å»ä¾èµ–jqueryï¼Œç„¶ååˆ†åˆ«è¿”å›æ‰€ä¾èµ–jqueryçš„ç‰ˆæœ¬ï¼Œå¦‚ä¸‹ï¼š\n\na.js\n```\ndefine(['jquery'], function(jquery){\n\tvar a = {\n\t\tcontent : $().jquery\n\t}\n\n\treturn a;\n});\n```\n\nb.js\n```\ndefine(['jquery'], function(jquery){\n\tvar b = {\n\t\tcontent : $().jquery\n\t}\n\n\treturn b;\n\n});\n```\n\nç„¶åæˆ‘ä»¬åœ¨config.jsä¸­æ‰“å°æ¨¡å—aå’Œbï¼Œå¦‚ä¸‹ï¼š\n\n```\nrequire(['a', 'b'], function(A, B){\n\tconsole.log('æ¨¡å—aå¼•ç”¨çš„jQueryç‰ˆæœ¬æ˜¯' + A.content);\n\tconsole.log('æ¨¡å—bå¼•ç”¨çš„jQueryç‰ˆæœ¬æ˜¯' + B.content);\n});\n```\n\nåˆ·æ–°æµè§ˆå™¨ï¼Œæˆ‘ä»¬çœ‹åˆ°å¦‚ä¸‹ï¼Œçš„ç¡®åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ä¾èµ–äº†ä¸åŒç‰ˆæœ¬çš„jQueryï¼š\n\n![ä¸åŒæ–‡ä»¶ä¸­ä¾èµ–äº†ä¸åŒç‰ˆæœ¬çš„jQuery](http://7xlolm.com1.z0.glb.clouddn.com/2015111416.pic.jpg)\n\nä½†æ˜¯æœ‰ä¸€ç‚¹è¯·è¯»è€…çœ‹æ¸…æ¥šï¼Œåœ¨a.jså’Œb.jsä¸­æˆ‘éƒ½ä¾èµ–äº†jqueryï¼Œåœ¨å½¢å¼å‚æ•°ä¸­æˆ‘ä½¿ç”¨çš„æ˜¯jqueryï¼Œä½†æ˜¯åœ¨ä¸‹é¢æˆ‘ç”¨åˆ°çš„å´æ˜¯(ç¾å…ƒç¬¦å·)ï¼Œå› ä¸ºç¬”è€…åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå½¢å¼å‚æ•°ä¹Ÿå†™æˆ(ç¾å…ƒç¬¦å·)ï¼Œé‚£ä¹ˆä½¿ç”¨(ç¾å…ƒç¬¦å·)å‚æ•°æ‰“å°å‡ºæ¥çš„å§‹ç»ˆéƒ½æ˜¯undefinedï¼Œä½†æ˜¯ç»è¿‡åˆ†æçš„ç¡®æ­£å¸¸å¯¼å…¥æ¨¡å—å¹¶ä¸”æ²¡æœ‰æŠ¥é”™ï¼Œæˆ‘ä¸çŸ¥é“è¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Œæˆ–è€…requirejsçš„BUGï¼Œå¦‚æœè¯»è€…æœ‰çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› çš„æ¬¢è¿åœ¨ä¸‹é¢è¯„è®ºæŒ‡é’ˆï¼Œå…±åŒè¿›æ­¥ã€‚\n\nè¿™æ ·ï¼Œrequirejsä¸­ä¸€äº›å¿…å¤‡ä¸”ä¸æ˜“ç†è§£çš„é…ç½®ä»¥åŠä¸€äº›é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆå°±è®²è§£çš„å·®ä¸å¤šäº†ï¼Œå…¶å®requirejsä¸­çš„é…ç½®ä¸åªè¿™äº›ï¼Œè¯»è€…å¯ä»¥æŸ¥é˜…[å®˜æ–¹æ–‡æ¡£](http://www.requirejs.cn/) æŸ¥çœ‹å…¶ä»–é…ç½®ï¼Œéƒ½æ¯”è¾ƒç®€å•ï¼ŒæŒæ¡ç¬”è€…è®²å¾—è¿™äº›åŸºæœ¬å¤Ÿç”¨äº†ã€‚\n\nä¸‹ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬å°±æ¥è®²ä¸€è®²å¦‚ä½•ä¼˜åŒ–é¡¹ç›®çš„äº‹ï¼ŒåŒ…æ‹¬ä½¿ç”¨rjsé…åˆgulpæ„å»ºå·¥å…·ç­‰ï¼Œå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå°±çœ‹çœ‹æˆ‘çš„è¯è”ç½‘ç¥ˆç¥·æ€ç»´çš„è¿ç”¨å§ï¼Œå¦‚ä¸‹ï¼š\n\n![æ”¯ä»˜å®äºŒç»´ç ](http://7xlolm.com1.z0.glb.clouddn.com/201511122.pic.jpg)\n\n\n","slug":"åŸºäºgulp-requirejs-rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºç³»åˆ—æ–‡ç« -äºŒ","published":1,"updated":"2015-11-17T07:32:11.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx51b000b47fypucmfk0n","content":"<blockquote>\n<p>ä¸Šä¸€ç¯‡ä»‹ç»äº†jsæ¨¡å—åŒ–çš„å†ç¨‹å’ŒAMDè§„èŒƒä¸­è§„å®šæ¨¡å—çš„å®šä¹‰å’Œå¼•ç”¨ï¼Œè¿™ç¯‡æ–‡ç« å°±ä»¥requirejsè¿™ä¸ªAMDè§„èŒƒçš„å®ç°æ¥è®²è§£jsä¸­çš„æ¨¡å—åŒ–å¼€å‘</p>\n</blockquote>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20151109amd.jpg\" alt=\"requirejs\"></p>\n<a id=\"more\"></a>\n<p>å¦‚æœä½ çŸ¥é“äº†AMDè§„èŒƒä¸­è§„å®šçš„jsæ¨¡å—çš„å®šä¹‰æ–¹æ³•å’Œå¦‚ä½•å¼•ç”¨ä¸€ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆrequirejsçš„ä½¿ç”¨å‡ ä¹æ˜¯é›¶æˆæœ¬çš„ï¼Œå› ä¸ºrequirejså°±æ˜¯AMDè§„èŒƒçš„å®ç°ï¼Œä½ å”¯ä¸€éœ€è¦å­¦ä¹ çš„å¯èƒ½å°±æ˜¯ä¸€äº›ä¾¿äºæˆ‘ä»¬ä½¿ç”¨æ¨¡å—çš„é…ç½®ï¼Œå’Œrequirejsçš„ä¸€äº›ç‰¹æ€§ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç”¨ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œæ¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨requirejsã€‚</p>\n<p>æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¾ˆå¯èƒ½ä¼šå¼•ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚jQueryç­‰ï¼Œè¿˜è¦å¼•ç”¨æˆ‘ä»¬è‡ªå·±å†™çš„ä¸€äº›jsæ–‡ä»¶ï¼Œåœ¨æœ€åˆï¼Œæˆ‘ä»¬çš„ç›®å½•ç»“æ„çœ‹ä¸Šå»æ˜¯è¿™æ ·çš„ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511141.pic.jpg\" alt=\"åŸå§‹ç›®å½•ç»“æ„\"></p>\n<p>æˆ‘ä»¬æœ‰ä¸€ä¸ªindex.htmlæ–‡ä»¶ï¼Œç„¶åå†å»ºç«‹ä¸€ä¸ªåä¸ºjsçš„æ–‡ä»¶å¤¹ï¼ŒæŠŠjQueryåº“å’Œæˆ‘ä»¬è‡ªå·±å†™çš„jsæ–‡ä»¶éƒ½æ”¾åœ¨é‡Œé¢ï¼Œæˆ–è€…å¯èƒ½ä½ è¿˜ä¼šä¸ºjQueryç­‰ç¬¬ä¸‰æ–¹åº“å•ç‹¬å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä½†æœ€ç»ˆåœ¨htmlé¡µé¢ä¸­å¼•ç”¨çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œå³éœ€è¦å‡ ä¸ªjsæ–‡ä»¶ï¼Œå°±éœ€è¦å‡ ä¸ªscriptæ ‡ç­¾ï¼Œå¦‚ä¸‹æ˜¯index.htmlçš„å†…å®¹ï¼š</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;script src=&quot;js/jquery.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;js/a.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;js/b.js&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>æˆ‘ä»¬å·²ç»äº†è§£äº†ä¸Šé¢ä»£ç çš„ç¼ºç‚¹ï¼š</p>\n<ul>\n<li>æ±¡æŸ“äº†å…¨å±€å˜é‡ï¼Œä¸åŒæ–‡ä»¶ä¹‹é—´å¯èƒ½ä¼šå‘½åå†²çª</li>\n<li>æ–‡ä»¶ä¾èµ–å…³ç³»éš¾ä»¥ç»´æŠ¤</li>\n<li>å‘å‡ºæ›´å¤šçš„httpè¯·æ±‚ï¼Œå½±å“æ€§èƒ½</li>\n</ul>\n<p>å†æ¥çœ‹çœ‹æˆ‘ä»¬çš„a.jså’Œb.jsæ–‡ä»¶ï¼š</p>\n<p>a.js</p>\n<pre><code>var a = {\n    content : &#39;a.js&#39;\n}\n</code></pre><p>b.js</p>\n<pre><code>var b = {\n    content : &#39;b.js&#39;\n}\n</code></pre><p>è¿™ä¸¤ä¸ªæ–‡ä»¶å¾ˆç®€å•ï¼Œåˆ†åˆ«å®šä¹‰äº†ä¸¤ä¸ªæ±¡æŸ“å…¨å±€çš„å˜é‡aå’Œbã€‚</p>\n<p>é‚£æˆ‘ä»¬é€šè¿‡requirejsæ¥è§£å†³è¿™äº›é—®é¢˜å‘¢ï¼Ÿé¦–å…ˆï¼Œä½ å¾—æœ‰ä¸ªå¥³æœ‹å‹ï¼Œå“¦ä¸å¯¹ï¼Œä½ å¾—å…ˆæœ‰requirejsåº“ï¼Œæ‰€ä»¥ï¼Œä¸‹è½½è¿æ¥ <a href=\"http://www.requirejs.cn/docs/download.html#requirejs\" target=\"_blank\" rel=\"external\">requirejsä¸‹è½½</a></p>\n<p>ä¸‹è½½ä¸‹æ¥ä¹‹åï¼Œæˆ‘ä»¬æŠŠrequirejsæ”¾åœ¨ä¸æˆ‘ä»¬index.htmlåŒçº§çš„ç›®å½•ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511142.pic.jpg\" alt=\"requirejsä¸htmlåŒçº§\"></p>\n<p>ä¿®æ”¹æˆ‘ä»¬çš„index.htmlï¼Œåªéœ€å¼•å…¥æˆ‘ä»¬åˆšåˆšä¸‹è½½ä¸‹æ¥çš„requirejsï¼š</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;script src=&quot;require.js&quot; data-main=&quot;config&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼Œscriptæ ‡ç­¾ä¸­data-mainæ˜¯ä»€ä¹ˆï¼Ÿæ˜¯è¿™æ ·çš„ï¼Œrequirejséœ€è¦ä¸€ä¸ªå…¥å£æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸Šæ¥å°±å»æ‰§è¡Œçš„æ¨¡å—ï¼Œç±»ä¼¼äºCè¯­è¨€ä¸­çš„mainå‡½æ•°ã€‚ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å‘Šè¯‰requirejsæˆ‘ä»¬çš„å…¥å£æ¨¡å—æ˜¯config.jsï¼Œç”±äºrequirejsé»˜è®¤æ¨¡å—éƒ½æ˜¯ä»¥.jsä¸ºåç¼€çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœç•¥ï¼Œåªéœ€è¦å†™configå°±å¯ä»¥äº†ï¼Œç„¶åæˆ‘ä»¬åœ¨index.htmlåŒçº§ç›®å½•ä¸‹åˆ›å»ºconfig.jsæ–‡ä»¶å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511143.pic.jpg\" alt=\"config.jsæ–‡ä»¶ä¸index.htmlåŒçº§ç›®å½•\"></p>\n<p>è¿™ä¸ªconfig.jså¯ä»¥çœ‹åšæ˜¯æˆ‘ä»¬çš„å…¥å£æ¨¡å—ï¼Œæˆ–è€…ä¸»æ¨¡å—ï¼Œå½“requirejsåŠ è½½å®Œæˆåï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œconfig.jsæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨config.jsæ–‡ä»¶ä¸­å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>alert(&#39;è¿™æ˜¯config.jsæ–‡ä»¶&#39;);\n</code></pre><p>åŒå‡»æ‰“å¼€requirejsæ–‡ä»¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå¦‚ä¸‹å›¾ï¼Œå¦‚æˆ‘ä»¬æ‰€æ„¿ï¼Œconfig.jsè¢«æ‰§è¡Œäº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20151114c.png\" alt=\"config.jsæ–‡ä»¶è¢«æ‰§è¡Œäº†\"></p>\n<p>å¦‚æœconfigæ¨¡å—åªæ˜¯ç®€å•çš„alertä¸€å¥è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ²¡æœ‰å¿…è¦ç”¨requirejsäº†ï¼Œä¸€èˆ¬æ¥è®²ï¼Œæˆ‘ä»¬åœ¨ä¸»æ¨¡å—ä¸­å»å¼•ç”¨å…¶ä»–æ¨¡å—ï¼Œå¼€å‘æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼Œåœ¨ä¹‹å‰çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†jQueryåº“ï¼Œa.jså’Œb.jsï¼Œç°åœ¨æˆ‘ä»¬åªå¼•å…¥äº†requirejså¹¶ä¸”å‘Šè¯‰å®ƒæˆ‘ä»¬çš„ä¸»æ¨¡å—æ˜¯config.jsï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨requirejså»åŠ è½½a.jsã€b.jså’ŒjQueryåº“å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“config.jsç¬¦åˆAMDæ¨¡å—ç¼–å†™è§„èŒƒï¼Œä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬å·²ç»è®²è¿‡äº†AMDè§„èŒƒä¸­å¦‚ä½•ç¼–å†™å’Œå¼•ç”¨æ¨¡å—ï¼Œä¸‹é¢æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æŠŠæˆ‘ä»¬çš„æ–‡ä»¶éƒ½ç¼–å†™æˆä¸€ä¸ªä¸ªæ¨¡å—å°±å¥½äº†ï¼Œç”±äºæˆ‘ä»¬å¤šåœ¨ä¸»æ¨¡å—å³config.jsä¸­å»å¼•ç”¨å…¶ä»–æ¨¡å—ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹config.jså¦‚ä¸‹ï¼š</p>\n<pre><code>require([&#39;a&#39;, &#39;b&#39;], function(A, B){\n    console.log(A);\n    console.log(B);\n});\n</code></pre><p>æˆ‘ä»¬åœ¨config.jsä¸­ä½¿ç”¨requireå‡½æ•°å»åŠ è½½æ¨¡å—aå’Œæ¨¡å—bï¼Œæ³¨æ„ï¼Œrequirejsé»˜è®¤æ¨¡å—æ˜¯.jsåç¼€ç»“å°¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å†™aå’Œbå³å¯ï¼Œå®ƒä¼šè‡ªåŠ¨å»åŠ è½½a.jså’Œb.jsï¼Œä½†æ˜¯è¿™æ ·å†™å°±å¯ä»¥äº†å˜›ï¼Ÿæˆ‘ä»¬åˆ·æ–°æµè§ˆå™¨ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111422.pic.jpg\" alt=\"æŠ¥é”™\"></p>\n<p>æˆ‘ä»¬ä»”ç»†çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œâ€œnet::ERR_FILE_NOT_FOUNDâ€ï¼Œå†çœ‹æ¨¡å—åŠ è½½çš„è·¯å¾„ â€œfile:///Users/huochunyang/hcyObj/temp/a.jsâ€ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬åˆšåˆšåœ¨config.jsä¸­åŠ è½½æ¨¡å—aå’Œbçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä»…ä»…å†™äº†aå’Œbåˆ°ä¾èµ–æ•°ç»„ä¸­ï¼Œå¯æ˜¯requirejsæ€ä¹ˆçŸ¥é“ä½ è¿™ä¸¤ä¸ªæ¨¡å—åœ¨å“ªé‡Œï¼Ÿæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ï¼Œrequirejsé»˜è®¤ä¼šåœ¨å¼•ç”¨requirejsçš„htmlæ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œæ³¨æ„ï¼Œæ˜¯htmlåŒçº§ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œä¸æ˜¯requirejsåŒçº§ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œå½“ç„¶ï¼Œç”±äºæˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­index.htmlå’Œrequirejsæ˜¯åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œæ‰€ä»¥æ€•å¤§å®¶æ··æ·†ã€‚æ—¢ç„¶è¿™æ ·ï¼Œé—®é¢˜å°±å¥½è¯´äº†ï¼Œæˆ‘ä»¬index.htmlåŒçº§ç›®å½•ä¸‹å¹¶æ²¡æœ‰a.jså’Œb.jsè¿™ä¸¤ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ªæ¨¡å—æ”¾åˆ°äº†jsç›®å½•ä¸‹ï¼Œæ‰€ä»¥ï¼Œå½“ç„¶ä¼šæŠ¥é”™å•¦ï¼Œæ—¢ç„¶æ‰¾åˆ°äº†é—®é¢˜çš„åŸå› ï¼Œæˆ‘ä»¬ä¿®æ”¹config.jsæ–‡ä»¶ï¼š</p>\n<pre><code>require([&#39;js/a&#39;, &#39;js/b&#39;], function(A, B){\n    console.log(A);\n    console.log(B);\n});\n</code></pre><p>å†åˆ·æ–°æµè§ˆå™¨ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511144.pic.jpg\" alt=\"ä¸æŠ¥é”™ï¼Œä½†è¾“å‡ºundefined\"></p>\n<p>æ€ä¹ˆæ ·ï¼Ÿä¸æŠ¥é”™äº†å§ï¼Ÿé‚£æ˜¯å› ä¸ºæˆ‘ä»¬å®¶åœ¨æ¨¡å—çš„æ—¶å€™è·¯å¾„å†™çš„æ­£ç¡®ï¼Œrequirejsèƒ½å¤Ÿæ­£ç¡®åŠ è½½æ¨¡å—ï¼Œæ‰€ä»¥å°±ä¸ä¼šæŠ¥é”™äº†ï¼Œä½†æ˜¯ç»†å¿ƒçš„åŒå­¦ä¼šå‘ç°ï¼Œæ€ä¹ˆè¾“å‡ºä¸¤ä¸ªundefinedï¼Ÿåœ¨config.jsä¸­æˆ‘ä»¬åŠ è½½äº†aã€bä¸¤ä¸ªæ¨¡å—åï¼Œåˆ†åˆ«åœ¨logä¸­è¾“å‡ºäº†Aã€Bæ¨¡å—å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä½¿ç”¨requirejsåŠ è½½è¿‡æ¥çš„ä¸¤ä¸ªæ¨¡å—ç«Ÿç„¶æ˜¯undefinedã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬a.jså’Œb.jsä¸­ï¼Œå¹¶æ²¡æœ‰æš—ä¸­AMDè§„èŒƒå»ç¼–å†™æ¨¡å—ä»£ç ï¼Œä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ä»‹ç»äº†å¦‚æœç¼–å†™ä¸€ä¸ªæ¨¡å—ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ”¹å†™a.jså’Œb.jsä¸ºæ¨¡å—çš„å†™æ³•ï¼Œå¦‚ä¸‹ï¼š</p>\n<p>a.js</p>\n<pre><code>define(function(){\n    var a = {\n        content : &#39;a.js&#39;\n    }\n\n    return a;\n});\n</code></pre><p>b.js</p>\n<pre><code>define(function(){\n\n    var b = {\n        content : &#39;b.js&#39;\n    }\n\n    return b;\n\n});\n</code></pre><p>è¿™ä¸¤ä¸ªæ¨¡å—å¾ˆç®€å•ï¼Œæˆ‘ä»¬ä½¿ç”¨returnè¯­å¥è¿”å›ä¸¤ä¸ªå¯¹è±¡ï¼Œè¢«è¿”å›çš„å¯¹è±¡å°±æ˜¯æ¨¡å—å¯¹è±¡ï¼Œä»£è¡¨äº†è¿™ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬åˆ·æ–°æµè§ˆå™¨ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511145.pic.jpg\" alt=\"è¾“å‡ºæ¨¡å—Aå’ŒB\"></p>\n<p>å¦‚ä½•æˆ‘ä»¬çš„æ¨¡å—Béœ€è¦ä¾èµ–æ¨¡å—Aï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å†™æ¨¡å—Bä¸ºå¦‚ä¸‹ä»£ç ï¼Œåœ¨ä¾èµ–æ•°ç»„ä¸­ä¾èµ–æ¨¡å—Aï¼š</p>\n<pre><code>define([&#39;js/a&#39;], function(A){\n\n    var b = {\n        content : &#39;b.js&#39;\n    }\n\n    return b;\n\n});\n</code></pre><p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œæˆ‘ä»¬æ¯æ¬¡å»åŠ è½½æ¨¡å—çš„æ—¶å€™ï¼Œéƒ½è¦å†™å¯¹æ¨¡å—æ‰€åœ¨è·¯å¾„ï¼Œæ¯”å¦‚åŠ è½½æ¨¡å—aï¼Œæˆ‘ä»¬å°±è¦è¿™æ ·å»åŠ è½½ â€œjs/a.jsâ€ ï¼Œå‡å¦‚æˆ‘ä»¬çš„é¡¹ç›®åšçš„æ¯”è¾ƒå¤§ï¼Œæ¨¡å—åˆ†çš„æ¯”è¾ƒæ·±ï¼ŒåŠç›®å½•å±‚çº§æ·±ï¼Œå¦‚æœæˆ‘ä»¬è¿˜è¿™æ ·å»åŠ è½½çš„è¯ï¼Œå¯èƒ½ä¼šå†™æˆä¸‹é¢è¿™æ ·ï¼š</p>\n<ul>\n<li>â€œmodules/dom/XXX/aaa.jsâ€ *</li>\n</ul>\n<p>å¦‚æœæ¯æ¬¡ä¸ºäº†åŠ è½½ä¸€ä¸ªæ¨¡å—éƒ½è¦è¿™æ ·å»å†™çš„è¯ï¼Œç¬¬ä¸€æˆ‘ä»¬è¿˜è¦è®°ä½æ¨¡å—æ‰€åœ¨è·¯å¾„ï¼Œå¦‚æœè®°ä¸ä½çš„è¯è¿˜è¦å»æŸ¥çœ‹ï¼Œå¾ˆå½±å“å¼€å‘æ•ˆç‡ï¼Œç¬¬äºŒå†™èµ·æ¥æ€»æ˜¯æ„Ÿè§‰å¾ˆä¸çˆ½ï¼Œä»£ç çœ‹ç€å¾ˆæ¶å¿ƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°requirejsçš„é…ç½®äº†ï¼Œrequirejsæœ‰ä¸€ä¸ªconfigå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªjsonå¯¹è±¡ï¼Œè®¾ç½®ä¸€äº›é…ç½®é€‰é¡¹ï¼Œæˆ‘ä»¬ä¿®æ”¹config.jså¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    paths : {\n        a : &#39;js/a&#39;,\n        b : &#39;js/b&#39;\n    }\n});\n\n\nrequire([&#39;a&#39;, &#39;b&#39;], function(A, B){\n    console.log(A);\n    console.log(B);\n});\n</code></pre><p>é¦–å…ˆæˆ‘ä»¬åœ¨ä½¿ç”¨require()å‡½æ•°å»åŠ è½½æ¨¡å—ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨requirejs.config()æ–¹æ³•å»å¯¹requirejsè¿›è¡Œé…ç½®ï¼Œrequirejs.configæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªpathsé…ç½®é¡¹ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™æ˜¯ä¸€é¡¹è·¯å¾„é…ç½®ï¼Œå†çœ‹ä¸‹é¢ä½¿ç”¨require()å‡½æ•°å»åŠ è½½æ¨¡å—æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥å»åŠ è½½aå’Œbï¼Œè¿™æ ·æ˜¯å¯ä»¥æ­£å¸¸åŠ è½½æ¨¡å—çš„ï¼Œå› ä¸ºåœ¨åŠ è½½aæ¨¡å—çš„æ—¶å€™ï¼Œrequirejså‘ç°åœ¨pathsä¸­é…ç½®çš„è·¯å¾„ä¸­aå¯¹åº”â€œjs/aâ€ï¼Œæ‰€ä»¥ï¼Œrequireä¼šè‡ªåŠ¨å»åŠ è½½js/aæ¨¡å—ï¼Œè€Œä¸æ˜¯åœ¨index.htmlåŒçº§ç›®å½•ä¸‹å»æ‰¾ï¼Œæ‰€ä»¥pathsé…ç½®å°±åƒä¸€ä¸ªè·¯ç”±ï¼Œåˆ·æ–°é¡µé¢ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ä¸­çš„è¾“å‡ºï¼Œæˆ‘ä»¬ç­‰å¾…ç‰‡åˆ»ä¼šå‘ç°ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511146.pic.jpg\" alt=\"åŠ è½½è¶…æ—¶\"></p>\n<p>ä»€ä¹ˆï¼ŸåŠ è½½è¶…æ—¶ï¼Ÿä»€ä¹ˆæƒ…å†µï¼Ÿåˆ«ç´§å¼ ï¼Œè¿˜è®°æˆ‘ä»¬çš„b.jsä¸­å—ï¼Ÿæˆ‘ä»¬åœ¨b.jsä¸­ä¾èµ–äº†a.jsï¼Œå¯æ˜¯æˆ‘ä»¬çš„ä»£ç æ˜¯æ€ä¹ˆä¾èµ–çš„å‘¢ï¼Ÿæ‰“å¼€b.jsï¼š</p>\n<pre><code>define([&#39;js/a&#39;], function(A){\n\n    var b = {\n        content : &#39;b.js&#39;\n    }\n\n    return b;\n\n});\n</code></pre><p>æˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬ä¾èµ–aï¼Œæ¨¡å—çš„æ—¶å€™ä¾ç„¶ä½¿ç”¨â€™js/aâ€™è¿›è¡Œä¾èµ–ï¼Œè€Œå½“requirejsåœ¨è§£æâ€™js/aâ€™çš„æ—¶å€™ï¼Œå‘ç°æœ‰ä¸€ä¸ªâ€™aâ€™ï¼Œç„¶ååˆå†pathsé…ç½®ä¸­å‘ç°â€™aâ€™å¯¹åº”â€™js/aâ€™,äºæ˜¯ï¼Œrequirejså°±æŠŠâ€™aâ€™æ¢æˆäº†â€™js/aâ€™ï¼Œæ‰€ä»¥æ•´ä½“çš„â€™js/aâ€™æœ€ç»ˆè¢«æ¢æˆäº†â€™js/js/aâ€™ï¼Œç„¶ååˆå†è·¯å¾„ä¸­å‘ç°äº†aï¼Œäºæ˜¯åŠ è½½è·¯å¾„åˆè¢«æ›¿æ¢æˆäº†â€™js/js/js/aâ€™ï¼Œå¦‚æ­¤ä¸‹å»ï¼Œæœ€ç»ˆæˆäº†æ­»å¾ªç¯ï¼Œè€Œè¶…è¿‡ä¸€å®šçš„æ—¶é—´ä¹‹åï¼Œå°±ä¼šæŠ¥é”™åŠ è½½è¶…æ—¶ï¼Œæ˜ç™½äº†å§ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æŠŠb.jsä¸­ä¾èµ–a.jsçš„å­—ç¬¦åˆ›ç›´æ¥å†™æˆâ€™aâ€™å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>define([&#39;a&#39;], function(A){\n\n    var b = {\n        content : &#39;b.js&#39;\n    }\n\n    return b;\n\n});\n</code></pre><p>å†æ¬¡åˆ·æ–°æµè§ˆå™¨ï¼Œæ€ä¹ˆæ ·ï¼Ÿæ­£å¸¸åŠ è½½äº†å§ï¼Ÿè¿™æ ·ä»¥åæˆ‘ä»¬åªè¦éœ€è¦ä¾èµ–aæ¨¡å—ï¼Œæˆ‘ä»¬å°±ç›´æ¥å†™â€™aâ€™å°±å¯ä»¥äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511147.pic.jpg\" alt=\"æ­£å¸¸åŠ è½½\"></p>\n<p>é‚£ä¹ˆå¥½ï¼Œa.jså’Œb.jsæˆ‘ä»¬éƒ½æ”¹æˆäº†æ¨¡å—çš„ç¼–å†™æ–¹å¼ï¼Œå¹¶ä¸”ä¹Ÿåšäº†pathsé…ç½®ï¼Œæœ€ç»ˆä¹ŸæˆåŠŸåŠ è½½äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜é—æ¼äº†ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯jQueryè¿™ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œé‚£ä¹ˆrequirejsèƒ½å¤ŸåŠ è½½ç¬¬ä¸‰æ–¹åº“å—ï¼Ÿç­”æ¡ˆæ˜¯ï¼šåªè¦ç¬¬ä¸‰æ–¹åº“æä¾›äº†AMDæ¥å£ï¼Œé‚£ä¹ˆrequirejså°±å¯ä»¥åŠ è½½ï¼Œè€ŒjQueryæœ¬èº«ä¹Ÿæä¾›äº†è¿™ä¸ªæ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥åŠ è½½å°±å¥½äº†ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¾ç„¶åœ¨pathsä¸­é…ç½®ä¸€ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    paths : {\n        a : &#39;js/a&#39;,\n        b : &#39;js/b&#39;,\n        $ : &#39;js/jquery.min&#39;\n    }\n});\n</code></pre><p>ç„¶ååœ¨configä¸­å»åŠ è½½jQueryå¹¶è¯•ç€ä½¿ç”¨jQueryï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä¿®æ”¹æˆ‘ä»¬çš„config.jså¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    paths : {\n        a : &#39;js/a&#39;,\n        b : &#39;js/b&#39;,\n        jquery : &#39;js/jquery.min&#39;\n    }\n});\n\nrequire([&#39;a&#39;, &#39;b&#39;, &#39;jquery&#39;], function(A, B, $){\n    alert($(&#39;html&#39;).html());\n    console.log(A);\n    console.log(B);\n});\n</code></pre><p>åˆ·æ–°é¡µé¢ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511148.pic.jpg\" alt=\"ç¬¬ä¸‰æ–¹åº“åŠ è½½æˆåŠŸ\"></p>\n<p>å¼¹å‡ºå¼¹çª—ï¼Œè¯æ˜æˆ‘ä»¬åŠ è½½jQueryæˆåŠŸå¹¶æˆåŠŸä½¿ç”¨ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬å†æ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆèƒ½å¤Ÿç›´æ¥é€šè¿‡requirejsåŠ è½½jQueryï¼Ÿæ˜¯å› ä¸ºjQueryè¿™ä¸ªç¬¬ä¸‰æ–¹åº“æä¾›äº†AMDæ”¯æŒï¼Œå¯æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“éƒ½æä¾›äº†AMDæ”¯æŒï¼Œé‚£ä¹ˆrequireå°±ä¸èƒ½åŠ è½½é‚£äº›ç¬¬ä¸‰æ–¹åº“äº†å—ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¾ç„¶èƒ½å¤ŸåŠ è½½ã€‚ä¸è¿‡ï¼Œè¿™å°±æ¶‰åŠåˆ°å¦‚ä½•åŠ è½½éAMDæ¨¡å—å†™æ³•çš„æ¨¡å—äº†ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¨¡å—cï¼Œä½†æ˜¯c.jså¹¶æ²¡æœ‰æŒ‰ç…§AMDè§„èŒƒå°è£…ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬åœ¨jsæ–‡ä»¶åŠ ä¸‹åˆ›å»ºc.jsï¼Œå¹¶å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>var show = function(){\n    alert(&#39;è°ƒç”¨äº†c&#39;);\n}\n</code></pre><p>æˆ‘ä»¬çš„c.jså¾ˆç®€å•ã€‚åªæ˜¯å•çº¯çš„å®šä¹‰äº†ä¸€ä¸ªcå‡½æ•°ï¼Œå¹¶å¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†ï¼Œæ˜¾ç¤ºâ€œè°ƒç”¨äº†câ€ï¼Œæ‰€ä»¥è¿™ä¸ªc.jså¹¶ä¸æ˜¯ä¸€ä¸ªAMDæ¨¡å—ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨requirejsåŠ è½½è¿™ä¸ªcï¼Œè¯¥å¦‚ä½•åŠ è½½å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°requirejs.config()ä¸­çš„å¦ä¸€ä¸ªé…ç½®é¡¹ shim äº†ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†pathsæ˜¯ç”¨æ¥é…ç½®åŠ è½½æ¨¡å—è·¯å¾„çš„ï¼Œshimåˆ™æ˜¯ç”¨æ¥åŠ è½½éAMDæ¨¡å—è§„èŒƒçš„â€œæ¨¡å—â€çš„ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†åŠ è½½c.jsï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹config.jså¹¶æ·»åŠ shimé…ç½®ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    paths : {\n        a : &#39;js/a&#39;,\n        b : &#39;js/b&#39;,\n        c : &#39;js/c&#39;,\n        jquery : &#39;js/jquery.min&#39;\n    },\n\n    shim : {\n        c : {\n            exports : &#39;show&#39;\n        }\n    }\n});\n\n\nrequire([&#39;a&#39;, &#39;b&#39;, &#39;jquery&#39;, &#39;c&#39;], function(A, B, $, c){\n    console.log(c);\n});\n</code></pre><p>æˆ‘ä»¬æ·»åŠ äº†shimé…ç½®ï¼Œé…ç½®ä¸­ï¼Œc ä»£è¡¨æˆ‘ä»¬åœ¨requireä¸­å¼•å…¥æ¨¡å—æ—¶çš„åå­—ï¼Œå³æˆ‘ä»¬å¯ä»¥é€šè¿‡require([â€˜câ€™])å»å¼•ç”¨cæ¨¡å—ï¼Œcå¯¹åº”ä¸€ä¸ªjsonå¯¹è±¡ï¼Œå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªexportså±æ€§ï¼Œexportså±æ€§çš„å€¼å°±æ˜¯æˆ‘ä»¬è¦åˆ°å¤„çš„æ¥å£ï¼Œæ³¨æ„ï¼Œæˆ‘ä»¬ä¾ç„¶è¦åœ¨pathsä¸­æ·»åŠ æ¨¡å—cçš„é…ç½®ï¼Œè¿™æ ·æ‰èƒ½æ­£å¸¸åŠ è½½æ¨¡å—ï¼Œæœ€åï¼Œæˆ‘ä»¬åœ¨æ§åˆ¶å°ä¸­è¾“å‡ºäº†æ¨¡å—cï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œåˆ·æ–°ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511149.pic.jpg\" alt=\"è¾“å‡ºæ¨¡å—c\"></p>\n<p>æˆ‘ä»¬çœ‹åˆ°ï¼Œæ‰“å°å‡ºæ¥çš„å°±æ˜¯æˆ‘ä»¬çš„å‡½æ•°showï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åˆ°å¤„çš„æ¥å£å°±æ˜¯showå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä¸€ä¸‹è¯•è¯•ï¼Œä¿®æ”¹config.jsï¼š</p>\n<pre><code>require([&#39;a&#39;, &#39;b&#39;, &#39;jquery&#39;, &#39;c&#39;], function(A, B, $, c){\n    c();\n});\n</code></pre><p>åˆ·æ–°é¡µé¢ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111410.pic.jpg\" alt=\"è°ƒç”¨äº†showå‡½æ•°\"></p>\n<p>æ€ä¹ˆæ ·ï¼Œå¼¹å‡ºå¼¹çª—äº†å§ï¼Œå®é™…ä¸Šï¼Œç»è¿‡shimé…ç½®åï¼Œrequirejsä¼šè‡ªåŠ¨ä¿®æ”¹c.jsä¸ºä¸€ä¸ªAMDæ¨¡å—ï¼Œä¸ºå…¶æ·»åŠ å°è£…ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>define(function(){\n    var show = function(){\n        alert(&#39;è°ƒç”¨äº†c&#39;);\n    }    \n\n    return show;\n});\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œreturnè¿”å›çš„æ˜¯showå‡½æ•°ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨shimä¸­ä¸ºcæ¨¡å—é…ç½®çš„å¯¼å‡ºæ¥å£ä¸ºshowï¼Œå³exportsçš„å€¼æ˜¯showï¼Œæ‰€ä»¥åŠ å…¥æˆ‘ä»¬ä¿®æ”¹exportsçš„å€¼ä¸ºå…¶ä»–å€¼ï¼Œæ˜¯æ²¡æœ‰åŠæ³•å¯¼å‡ºæˆåŠŸçš„ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¿®æ”¹config.jsä¸­cæ¨¡å—çš„shimé…ç½®ï¼Œå¦‚ä¸‹ï¼Œæˆ‘ä»¬å¯¼å‡ºçš„æ¥å£ä¸æ˜¯showè€Œæ˜¯éšæ„çš„aaa:</p>\n<pre><code>shim : {\n    c : {\n        exports : &#39;aaa&#39;\n    }\n}\n</code></pre><p>åˆ·æ–°é¡µé¢ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111411.pic.jpg\" alt=\"æŠ¥é”™\"></p>\n<p>æŠ¥é”™ï¼Œcä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬å¯¼å‡ºçš„æ¥å£æ˜¯aaaï¼Œé¬¼çŸ¥é“ä½ è¿™ä¸ªaaaæ˜¯ä»€ä¹ˆå•Šã€‚æ‰€ä»¥æœ€åè°ƒç”¨çš„æ—¶å€™å½“ç„¶ä¼šæŠ¥é”™ã€‚</p>\n<p>æˆ‘ä»¬è¿˜å¯ä»¥å¯¼å‡ºå¤šä¸ªæ¥å£ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„c.jsä¸­æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«æ˜¯showå‡½æ•°å’Œhideå‡½æ•°ï¼Œä¿®æ”¹æˆ‘ä»¬çš„c.jså¦‚ä¸‹ï¼š</p>\n<pre><code>var show = function(){\n    alert(&#39;showå‡½æ•°&#39;);\n}    \n\nvar hide = function(){\n    alert(&#39;hideå‡½æ•°&#39;);\n}\n</code></pre><p>å¦‚æœæˆ‘ä»¬ç»§ç»­ä½¿ç”¨ä¸Šé¢çš„shimé…ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†åªèƒ½å¯¼å‡ºshowå‡½æ•°ï¼Œæ²¡æœ‰åŠæ³•å¯¼å‡ºhideï¼Œå¦‚ä½•æ‰èƒ½å°†ä¸¤ä¸ªæ¥å£éƒ½å¯¼å‡ºæ¥å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±ä¸èƒ½ä½¿ç”¨exportså±æ€§äº†ï¼Œæˆ‘ä»¬è¦ç”¨initå±æ€§ï¼Œåˆ†åˆ«å°†ä¸¤ä¸ªæ¥å£å¯¼å‡ºï¼Œä¿®æ”¹config.jså¦‚ä¸‹ï¼š</p>\n<pre><code>shim : {\n    c : {\n        init : function(){\n            return {\n                aaa : show,\n                bbb : hide\n            }\n        }\n    }\n}\n</code></pre><p>initå±æ€§å¯¹åº”ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œé¢å¯¹åº”æˆ‘ä»¬è¦å¯¼å‡ºçš„æ¥å£ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æŠŠä¸¤ä¸ªæ¥å£éƒ½å¯¼å‡ºäº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡å—çš„aaaè°ƒç”¨showå‡½æ•°ï¼Œæ¨¡å—çš„bbbè°ƒç”¨hideå‡½æ•°ï¼Œä¿®æ”¹config.jså»å°è¯•è°ƒç”¨ä¸€ä¸‹ï¼š</p>\n<pre><code>require([&#39;a&#39;, &#39;b&#39;, &#39;jquery&#39;, &#39;c&#39;], function(A, B, $, c){\n    c.aaa();\n    c.bbb();\n});\n</code></pre><p>æ‰“å¼€æµè§ˆå™¨åˆ·æ–°ï¼Œæ€ä¹ˆæ ·ï¼Œä¸¤ä¸ªå‡½æ•°æ­£å¸¸è°ƒç”¨äº†å§ï¼Œä¸è¿‡è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œinitå±æ€§å¯¹åº”çš„å‡½æ•°ä¸­ï¼Œè¿”å›çš„å¯¹è±¡é‡Œé¢ï¼Œshowå’Œhideä¸èƒ½ç”¨å¼•å·å¼•èµ·æ¥ï¼Œä¸‹é¢çš„å†™æ³•æ˜¯é”™è¯¯çš„ï¼š</p>\n<pre><code>shim : {\n    c : {\n        init : function(){\n            return {\n                aaa : &#39;show&#39;,\n                bbb : &#39;hide&#39;\n            }\n        }\n    }\n}\n</code></pre><p>åˆ·æ–°æµè§ˆå™¨ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111412.pic.jpg\" alt=\"åŠ å¼•å·åæŠ¥é”™\"></p>\n<p>é‚£ä¹ˆä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬è®¾ç½®äº†initå±æ€§åï¼Œrequirejsç›¸å½“äºè‡ªåŠ¨ä¸ºæˆ‘ä»¬å°è£…äº†c.jså¦‚ä¸‹é¢è¿™æ ·ï¼š</p>\n<pre><code>define(function(){\n    var show = function(){\n        alert(&#39;showå‡½æ•°&#39;);\n    }    \n\n    var hide = function(){\n        alert(&#39;hideå‡½æ•°&#39;);\n    }\n\n    return {\n        aaa : show,\n        bbb : hide\n    }\n});\n</code></pre><p>ä¸Šé¢ä»£ç ä¸­showå’Œhideæ²¡æœ‰åŠ å¼•å·ï¼Œæ‰€ä»¥æ˜¯å˜é‡ï¼Œåˆ†åˆ«å¼•ç”¨ä¸Šé¢çš„showå‡½æ•°å’Œhideå‡½æ•°ï¼Œå¦‚æœæˆ‘ä»¬åŠ äº†å¼•å·ï¼Œrequirejså°è£…ä¹‹åå°±ä¼šæƒ³è¿™æ ·ï¼š</p>\n<pre><code>define(function(){\n    var show = function(){\n        alert(&#39;showå‡½æ•°&#39;);\n    }    \n\n    var hide = function(){\n        alert(&#39;hideå‡½æ•°&#39;);\n    }\n\n    return {\n        aaa : &#39;show&#39;,\n        bbb : &#39;hide&#39;\n    }\n});\n</code></pre><p>æˆ‘ä»¬çœ‹ä¸Šé¢çš„ä»£ç ï¼Œâ€™showâ€™å’Œâ€™hideâ€™éƒ½åŠ äº†å¼•å·ï¼Œæ‰€ä»¥ä»–ä»¬æ˜¯å­—ç¬¦ä¸²ï¼Œå¹¶æ²¡æœ‰å¼•ç”¨ä¸Šé¢çš„showå‡½æ•°å’Œhideå‡½æ•°ï¼Œåªæ˜¯å¯¼å‡ºä¸€ä¸ªå­—ç¬¦ä¸²è€Œå·²ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æŠŠå­—ç¬¦ä¸²å½“åšå‡½æ•°æ¥è°ƒç”¨çš„æ—¶å€™ï¼Œå½“ç„¶ä¼šæŠ¥é”™ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥éªŒè¯è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨å¸¦å¼•å·çš„é…ç½®ï¼Œç„¶åæ‰“å°å‡ºc.aaaçš„ç±»å‹ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    paths : {\n        a : &#39;js/a&#39;,\n        b : &#39;js/b&#39;,\n        c : &#39;js/c&#39;,\n        jquery : &#39;js/jquery.min&#39;\n    },\n\n    shim : {\n        c : {\n            init : function(){\n                return {\n                    aaa : &#39;show&#39;,\n                    bbb : &#39;hide&#39;\n                }\n            }\n        }\n    }\n});\n\n\nrequire([&#39;a&#39;, &#39;b&#39;, &#39;jquery&#39;, &#39;c&#39;], function(A, B, $, c){\n    console.log(typeof c.aaa);\n});\n</code></pre><p>åˆ·æ–°æµè§ˆå™¨ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œc.aaaçš„ç¡®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111413.pic.jpg\" alt=\"æ‰“å°å‡ºæ¥çš„æ˜¯å­—ç¬¦ä¸²\"></p>\n<p>å¦å¤–ï¼Œæˆ‘ä»¬æ³¨æ„ä¸€ç‚¹ï¼Œpathsé‡Œé¢çš„é…ç½®ï¼Œè·¯å¾„ä¸­éƒ½å¸¦æœ‰â€™js/â€˜ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>paths : {\n    a : &#39;js/a&#39;,\n    b : &#39;js/b&#39;,\n    c : &#39;js/c&#39;,\n    jquery : &#39;js/jquery.min&#39;\n}\n</code></pre><p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„æ¨¡å—éƒ½æ”¾åœ¨jsç›®å½•ä¸‹ï¼Œæ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä¸å¯ä»¥é€šè¿‡ä¸€ä¸ªé…ç½®ï¼Œæ¥å‘Šè¯‰æˆ‘ä»¬çš„requirejsï¼Œæ¯æ¬¡æŸ¥æ‰¾æ¨¡å—çš„æ—¶å€™éƒ½åŸºäºjsç›®å½•æŸ¥æ‰¾å‘¢ï¼Ÿè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ¯æ¬¡ç¼–å†™pathsé…ç½®çš„æ—¶å€™éƒ½è¦å†™ä¸Šâ€™js/â€˜äº†ï¼Œå®é™…ä¸Šæ˜¯å¯ä»¥çš„ï¼Œrequirejs.config()çš„é…ç½®å¯¹è±¡ä¸­è¿˜æœ‰ä¸€ä¸ª baseUrl å±æ€§ï¼Œç”¨æ¥åˆ¶å®šæ¨¡å—çš„æŸ¥æ‰¾ç›®å½•ï¼Œä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    baseUrl : &#39;./js&#39;,\n    paths : {\n        a : &#39;a&#39;,\n        b : &#39;b&#39;,\n        c : &#39;c&#39;,\n        jquery : &#39;jquery.min&#39;\n    },\n\n    shim : {\n        c : {\n            init : function(){\n                return {\n                    aaa : show,\n                    bbb : hide\n                }\n            }\n        }\n    }\n});\n</code></pre><p>å½“ç„¶ï¼ŒbaseUrlæœ¬çœæ˜¯åŸºäºå¼•å…¥requirejsçš„htmlæ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ï¼Œåœ¨æœ¬ä¾‹ä¸­å³index.htmlæ‰€åœ¨ç›®å½•çš„ã€‚</p>\n<p>å¦å¤–ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå½“æˆ‘ä»¬é…ç½®å®ŒbaseUrlä¹‹åï¼Œpathsä¸­aã€bã€cä¸‰ä¸ªæ¨¡å—å¯ä»¥ä¸ç”¨é…ç½®ï¼Œå› ä¸ºå·²ç»æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ï¼Œä½†æ˜¯jqueryéœ€è¦ä¿ç•™ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    baseUrl : &#39;./js&#39;,\n    paths : {\n        jquery : &#39;jquery.min&#39;\n    },\n\n    shim : {\n        c : {\n            init : function(){\n                return {\n                    aaa : show,\n                    bbb : hide\n                }\n            }\n        }\n    }\n});\n</code></pre><p>è¿™æ ·ï¼Œå½“requirejså»åŠ è½½çš„aã€bã€cæ¨¡å—çš„æ—¶å€™ï¼Œå°±è‡ªåŠ¨ä¼šæ ¹æ®baseUrlä¸­çš„é…ç½®å»æŸ¥æ‰¾æ¨¡å—ï¼Œè€Œæˆ‘ä»¬çš„ä¸‰ä¸ªæ¨¡å—ä¹Ÿæ°å¥½åœ¨jsç›®å½•ä¸‹ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨é…ç½®äº†ï¼Œæ€»è€Œè¨€ä¹‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆçµå¥½å¥½ç”¨çš„é…ç½®ï¼Œå…·ä½“æ ¹æ®ä½ çš„é¡¹ç›®æ¥ã€‚</p>\n<p>ä¸‹é¢ï¼Œæˆ‘ä»¬åœ¨è€ƒè™‘ä¸€ç§æƒ…æ™¯ï¼Œå‡å¦‚ä½ çš„é¡¹ç›®å¾ˆå¤§ï¼Œåœ¨æœ€åˆé˜¶æ®µï¼Œä½ çš„é¡¹ç›®é‡Œå¼•ç”¨äº†jQuery1.xç‰ˆæœ¬ï¼Œåæ¥éšç€é¡¹ç›®çš„å‘å±•ï¼Œé¡¹ç›®éœ€è¦å¼•å…¥jQuery2.xçš„ç‰ˆæœ¬ï¼Œä½†æ˜¯åˆä¸èƒ½åˆ é™¤æ‰åŸæ¥çš„1.xç‰ˆæœ¬ï¼Œå› ä¸ºé¡¹ç›®ä¸­æœ‰å¾ˆå¤šæ¨¡å—éƒ½åœ¨ä½¿ç”¨1.xçš„ç‰ˆæœ¬ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¸Œæœ›åœ¨æŸäº›æ–‡ä»¶ä¸­å¼•å…¥jQueryæ—¶ä½¿ç”¨çš„1.xç‰ˆæœ¬ï¼Œè€Œåœ¨å¦å¤–ä¸€äº›æ–‡ä»¶ä¸­ä½¿ç”¨çš„æ˜¯2.xçš„ç‰ˆæœ¬ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿæœ‰çš„åŒå­¦å¯èƒ½ä¼šè¿™æ ·æƒ³ï¼Œå¦‚ä¸‹é…ç½®ï¼š</p>\n<pre><code>requirejs.config({\n    baseUrl : &#39;./js&#39;,\n    paths : {\n        jquery1 : &#39;jquery-1.11.3&#39;\n        jquery2 : &#39;jquery-2.1.4&#39;\n    },\n\n    shim : {\n        c : {\n            init : function(){\n                return {\n                    aaa : show,\n                    bbb : hide\n                }\n            }\n        }\n    }\n});\n</code></pre><p>é…ç½®ä¸¤ä¸ªjqueryï¼Œä¸€ä¸ªjquery1ï¼Œä¸€ä¸ªjquery2ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒçš„ç‰ˆæœ¬ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨1.xç‰ˆæœ¬çš„æ—¶å€™ï¼Œå°±å¼•ç”¨â€™jquery1â€™ï¼Œå½“æˆ‘ä»¬æƒ³ä½¿ç”¨2.xç‰ˆæœ¬çš„æ—¶å€™å°±å¼•ç”¨â€™jquery2â€™ï¼Œè¿™æ ·çœ‹ä¸Šå»å¥½åƒå¾ˆåˆç†ï¼Œè¯•ç€ä½¿ç”¨ä¸€ä¸‹ï¼Œä¿®æ”¹config.jsä¸­requireä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"requirejs.config({\">    baseUrl : &#39;./js&#39;,\n    paths : {\n        jquery1 : &#39;jquery-1.11.3&#39;,\n        jquery2 : &#39;jquery-2.1.4&#39;\n    },\n\n    shim : {\n        c : {\n            init : function(){\n                return {\n                    aaa : show,\n                    bbb : hide\n                }\n            }\n        }\n    }\n});\n\n\nrequire([&#39;jquery1&#39;], function($){\n    alert($(&#39;html&#39;).html());\n});\n</code></pre>\n<p>æˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼ŒæŠ¥é”™äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111414.pic.jpg\" alt=\"æŠ¥é”™\"></p>\n<p>æŸ¥çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œä»–è¯´$æ²¡æœ‰å®šä¹‰ï¼Œè¨€å¤–ä¹‹æ„å°±æ˜¯è¯´æˆ‘ä»¬jQueryæ¨¡å—æ ¹æœ¬æ²¡æœ‰å¼•å…¥è¿›æ¥ï¼Œæ€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬åœ¨pathsä¸­é…ç½®jqueryæ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨åˆ«åï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªèƒ½ä½¿ç”¨ jquery è€Œä¸èƒ½ä½¿ç”¨ jquery1å’Œjquery2ï¼Œä¸ä¿¡ä½ å°†requirejs.config()ä¸­çš„pathsä¿®æ”¹å¦‚ä¸‹ï¼š</p>\n<pre><code>paths : {\n    jquery : &#39;jquery-1.11.3&#39;\n}\n</code></pre><p>åˆ·æ–°é¡µé¢å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯ä¿®æ”¹æˆä¸‹é¢è¿™æ ·å°±ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼š</p>\n<pre><code>paths : {\n    jq : &#39;jquery-1.11.3&#39;\n}\n</code></pre><p>å› ä¸ºä½ åªèƒ½ç”¨jqueryè€Œä¸èƒ½ç”¨ä»»ä½•å…¶ä»–åˆ«åï¼Œä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬æ‰“å¼€jqueryçš„æºç ï¼Œå¼€å…¶ä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111415.pic.jpg\" alt=\"jQueryæºç ä¸­å¯¹AMDå…¼å®¹åšæ³•\"></p>\n<p>è¿™æ®µä»£ç å…¶å®å°±æ˜¯jQueryåº“å¯¹AMDæ¨¡å—çš„å…¼å®¹åšæ³•ï¼Œæˆ‘ä»¬å‘ç°ï¼ŒjQueryå»ä½¿ç”¨defineå®šä¹‰æ¨¡å—çš„æ—¶å€™ï¼Œä»–æ˜¾ç¤ºçš„ä¼ é€’äº†ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² â€˜jqueryâ€™ï¼Œè¿™ä¸ªå‚æ•°åœ¨æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„æ¨¡å—ä¸­ä¸€èˆ¬æ˜¯ä¸å»æ‰‹åŠ¨å†™æ­»å¾—ï¼Œä¸€èˆ¬ç”±æ„å»ºå·¥å…·åœ¨ä¼˜åŒ–æ¨¡å—æ—¶è‡ªåŠ¨å¡«å……çš„ï¼Œä»¥å…æ¨¡å—å†²çªï¼Œå› ä¸ºè¿™ä¸ªå‚æ•°ä»£è¡¨äº†æ¨¡å—idï¼Œé‚£ä¹ˆjqueryä¸ºä»€ä¹ˆè¦å†™æ­»å‘¢ï¼Ÿ</p>\n<p>ç½‘ä¸Šæœ‰ç§è¯´æ³•æ˜¯å‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œå› ä¸ºåƒjQueryè¿™ç§åº“æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨æ˜¯å¾ˆé¢‘ç¹çš„ï¼Œå¾ˆå¤šæ¨¡å—éƒ½è¦ä¾èµ–è¿™ä¸ªæ¨¡å—ï¼Œå¦‚æœidè¿™ä¸ªå‚æ•°ä¸å†™æ­»å¾—è¯ï¼Œæ„å‘³ç€æˆ‘ä»¬åœ¨ä¾èµ–jQueryçš„æ—¶å€™å¯ä»¥éšæ„èµ·åå­—ï¼Œè€Œéå¿…é¡»ä½¿ç”¨ â€˜jqueryâ€™ ï¼Œè¿™æ ·å…¶ä»–æ¨¡å—å°±å¯ä»¥ç»™jQueryèµ·ä¸åŒçš„æ¨¡å—åï¼Œè¿™å°±ä¼šå¯¼è‡´å¤šæ¬¡å¼•å…¥jQueryã€‚</p>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“äº†ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨pathsé…ç½®ä¸­é…ç½®jQueryçš„æ—¶å€™ä¸ºä»€ä¹ˆåªèƒ½ä½¿ç”¨ â€˜jqueryâ€™ äº†ï¼Œæˆ‘ä»¬å›åˆ°ä¹‹å‰çš„é—®é¢˜ï¼Œå³åœ¨ä¸åŒçš„æ¨¡å—å¼•å…¥ä¸åŒç‰ˆæœ¬çš„jQueryï¼Œæƒ³ä¸€æƒ³æˆ‘ä»¬è¿˜èƒ½è¿™æ ·å»é…ç½®äº†å˜›ï¼š</p>\n<pre><code>paths : {\n    jquery1 : &#39;jquery-1.11.3&#39;,\n    jquery2 : &#39;jquery-2.1.4&#39;\n}\n</code></pre><p>ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸ºæˆ‘ä»¬åªèƒ½ç”¨ jquery è€Œä¸èƒ½ç”¨ jquery1 æˆ– jquery2ï¼Œé‚£éš¾é“æˆ‘ä»¬è¿™æ ·é…ç½®å—ï¼Ÿå¦‚ä¸‹ï¼š</p>\n<pre><code>paths : {\n    jquery : &#39;jquery-1.11.3&#39;,\n    jquery : &#39;jquery-2.1.4&#39;\n}\n</code></pre><p>ç®€ç›´å°±æ˜¯ç¬‘è¯ï¼Œè¿™æ ·ç¬¬äºŒä¸ªjqueryå±æ€§ä¼šè¦†ç›–ç¬¬ä¸€ä¸ªjqueryå±æ€§ï¼Œé‚£æ€ä¹ˆåŠï¼Ÿè¿™å°±æ¶‰åŠrequirejsçš„å¦ä¸€ä¸ªé…ç½®äº†ï¼Œmapé…ç½®é¡¹ï¼Œmapé…ç½®é¡¹çš„ä½œç”¨æ˜¯ï¼Œåœ¨ä¸åŒçš„æ¨¡å—ä¸­ï¼Œå³jsæ–‡ä»¶ä¸­ï¼Œä¾èµ–ç›¸åŒçš„æ¨¡å—åï¼Œç¼ºåŠ è½½ä¸åŒçš„æ¨¡å—ã€‚</p>\n<p>æˆ‘ä»¬å…ˆåœ¨config.jsä¸­å¢åŠ mapé…ç½®å¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    baseUrl : &#39;./js&#39;,\n    paths : {\n        jquery : &#39;jquery-1.11.3&#39;\n    },\n\n    shim : {\n        c : {\n            init : function(){\n                return {\n                    aaa : show,\n                    bbb : hide\n                }\n            }\n        }\n    },\n\n    map : {\n        &#39;a&#39; : {\n            jquery : &#39;jquery-1.11.3&#39;\n        },\n\n        &#39;b&#39; : {\n            jquery : &#39;jquery-2.1.4&#39;\n        }\n    }\n});\n</code></pre><p>æˆ‘ä»¬åœ¨mapä¸­å¯ä»¥å¯¹æ¯ä¸€ä¸ªæ¨¡å—è¿›è¡Œé…ç½®ï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬é…ç½®äº†å½“åœ¨ a æ¨¡å—ä¸­ä¾èµ– â€˜jqueryâ€™ æ—¶ï¼Œæˆ‘ä»¬åŠ è½½çš„æ˜¯ 1.11.3 ç‰ˆæœ¬ï¼Œå½“æˆ‘ä»¬åœ¨ b æ¨¡å—ä¸­ä¾èµ– â€˜jqueryâ€™ æ—¶ï¼Œæˆ‘ä»¬åŠ è½½çš„æ˜¯ 2.1.4 ç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥å°è¯•ä¸€ä¸‹ï¼Œåˆ†åˆ«ä¿®æ”¹a.jså’Œb.jsè¿™ä¸¤ä¸ªæ¨¡å—ï¼Œè®©ä»–ä»¬éƒ½å»ä¾èµ–jqueryï¼Œç„¶ååˆ†åˆ«è¿”å›æ‰€ä¾èµ–jqueryçš„ç‰ˆæœ¬ï¼Œå¦‚ä¸‹ï¼š</p>\n<p>a.js</p>\n<pre><code>define([&#39;jquery&#39;], function(jquery){\n    var a = {\n        content : $().jquery\n    }\n\n    return a;\n});\n</code></pre><p>b.js</p>\n<pre><code>define([&#39;jquery&#39;], function(jquery){\n    var b = {\n        content : $().jquery\n    }\n\n    return b;\n\n});\n</code></pre><p>ç„¶åæˆ‘ä»¬åœ¨config.jsä¸­æ‰“å°æ¨¡å—aå’Œbï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>require([&#39;a&#39;, &#39;b&#39;], function(A, B){\n    console.log(&#39;æ¨¡å—aå¼•ç”¨çš„jQueryç‰ˆæœ¬æ˜¯&#39; + A.content);\n    console.log(&#39;æ¨¡å—bå¼•ç”¨çš„jQueryç‰ˆæœ¬æ˜¯&#39; + B.content);\n});\n</code></pre><p>åˆ·æ–°æµè§ˆå™¨ï¼Œæˆ‘ä»¬çœ‹åˆ°å¦‚ä¸‹ï¼Œçš„ç¡®åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ä¾èµ–äº†ä¸åŒç‰ˆæœ¬çš„jQueryï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111416.pic.jpg\" alt=\"ä¸åŒæ–‡ä»¶ä¸­ä¾èµ–äº†ä¸åŒç‰ˆæœ¬çš„jQuery\"></p>\n<p>ä½†æ˜¯æœ‰ä¸€ç‚¹è¯·è¯»è€…çœ‹æ¸…æ¥šï¼Œåœ¨a.jså’Œb.jsä¸­æˆ‘éƒ½ä¾èµ–äº†jqueryï¼Œåœ¨å½¢å¼å‚æ•°ä¸­æˆ‘ä½¿ç”¨çš„æ˜¯jqueryï¼Œä½†æ˜¯åœ¨ä¸‹é¢æˆ‘ç”¨åˆ°çš„å´æ˜¯(ç¾å…ƒç¬¦å·)ï¼Œå› ä¸ºç¬”è€…åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå½¢å¼å‚æ•°ä¹Ÿå†™æˆ(ç¾å…ƒç¬¦å·)ï¼Œé‚£ä¹ˆä½¿ç”¨(ç¾å…ƒç¬¦å·)å‚æ•°æ‰“å°å‡ºæ¥çš„å§‹ç»ˆéƒ½æ˜¯undefinedï¼Œä½†æ˜¯ç»è¿‡åˆ†æçš„ç¡®æ­£å¸¸å¯¼å…¥æ¨¡å—å¹¶ä¸”æ²¡æœ‰æŠ¥é”™ï¼Œæˆ‘ä¸çŸ¥é“è¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Œæˆ–è€…requirejsçš„BUGï¼Œå¦‚æœè¯»è€…æœ‰çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› çš„æ¬¢è¿åœ¨ä¸‹é¢è¯„è®ºæŒ‡é’ˆï¼Œå…±åŒè¿›æ­¥ã€‚</p>\n<p>è¿™æ ·ï¼Œrequirejsä¸­ä¸€äº›å¿…å¤‡ä¸”ä¸æ˜“ç†è§£çš„é…ç½®ä»¥åŠä¸€äº›é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆå°±è®²è§£çš„å·®ä¸å¤šäº†ï¼Œå…¶å®requirejsä¸­çš„é…ç½®ä¸åªè¿™äº›ï¼Œè¯»è€…å¯ä»¥æŸ¥é˜…<a href=\"http://www.requirejs.cn/\" target=\"_blank\" rel=\"external\">å®˜æ–¹æ–‡æ¡£</a> æŸ¥çœ‹å…¶ä»–é…ç½®ï¼Œéƒ½æ¯”è¾ƒç®€å•ï¼ŒæŒæ¡ç¬”è€…è®²å¾—è¿™äº›åŸºæœ¬å¤Ÿç”¨äº†ã€‚</p>\n<p>ä¸‹ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬å°±æ¥è®²ä¸€è®²å¦‚ä½•ä¼˜åŒ–é¡¹ç›®çš„äº‹ï¼ŒåŒ…æ‹¬ä½¿ç”¨rjsé…åˆgulpæ„å»ºå·¥å…·ç­‰ï¼Œå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå°±çœ‹çœ‹æˆ‘çš„è¯è”ç½‘ç¥ˆç¥·æ€ç»´çš„è¿ç”¨å§ï¼Œå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511122.pic.jpg\" alt=\"æ”¯ä»˜å®äºŒç»´ç \"></p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>ä¸Šä¸€ç¯‡ä»‹ç»äº†jsæ¨¡å—åŒ–çš„å†ç¨‹å’ŒAMDè§„èŒƒä¸­è§„å®šæ¨¡å—çš„å®šä¹‰å’Œå¼•ç”¨ï¼Œè¿™ç¯‡æ–‡ç« å°±ä»¥requirejsè¿™ä¸ªAMDè§„èŒƒçš„å®ç°æ¥è®²è§£jsä¸­çš„æ¨¡å—åŒ–å¼€å‘</p>\n</blockquote>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20151109amd.jpg\" alt=\"requirejs\"></p>","more":"<p>å¦‚æœä½ çŸ¥é“äº†AMDè§„èŒƒä¸­è§„å®šçš„jsæ¨¡å—çš„å®šä¹‰æ–¹æ³•å’Œå¦‚ä½•å¼•ç”¨ä¸€ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆrequirejsçš„ä½¿ç”¨å‡ ä¹æ˜¯é›¶æˆæœ¬çš„ï¼Œå› ä¸ºrequirejså°±æ˜¯AMDè§„èŒƒçš„å®ç°ï¼Œä½ å”¯ä¸€éœ€è¦å­¦ä¹ çš„å¯èƒ½å°±æ˜¯ä¸€äº›ä¾¿äºæˆ‘ä»¬ä½¿ç”¨æ¨¡å—çš„é…ç½®ï¼Œå’Œrequirejsçš„ä¸€äº›ç‰¹æ€§ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç”¨ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œæ¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨requirejsã€‚</p>\n<p>æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¾ˆå¯èƒ½ä¼šå¼•ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚jQueryç­‰ï¼Œè¿˜è¦å¼•ç”¨æˆ‘ä»¬è‡ªå·±å†™çš„ä¸€äº›jsæ–‡ä»¶ï¼Œåœ¨æœ€åˆï¼Œæˆ‘ä»¬çš„ç›®å½•ç»“æ„çœ‹ä¸Šå»æ˜¯è¿™æ ·çš„ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511141.pic.jpg\" alt=\"åŸå§‹ç›®å½•ç»“æ„\"></p>\n<p>æˆ‘ä»¬æœ‰ä¸€ä¸ªindex.htmlæ–‡ä»¶ï¼Œç„¶åå†å»ºç«‹ä¸€ä¸ªåä¸ºjsçš„æ–‡ä»¶å¤¹ï¼ŒæŠŠjQueryåº“å’Œæˆ‘ä»¬è‡ªå·±å†™çš„jsæ–‡ä»¶éƒ½æ”¾åœ¨é‡Œé¢ï¼Œæˆ–è€…å¯èƒ½ä½ è¿˜ä¼šä¸ºjQueryç­‰ç¬¬ä¸‰æ–¹åº“å•ç‹¬å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä½†æœ€ç»ˆåœ¨htmlé¡µé¢ä¸­å¼•ç”¨çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œå³éœ€è¦å‡ ä¸ªjsæ–‡ä»¶ï¼Œå°±éœ€è¦å‡ ä¸ªscriptæ ‡ç­¾ï¼Œå¦‚ä¸‹æ˜¯index.htmlçš„å†…å®¹ï¼š</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;script src=&quot;js/jquery.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;js/a.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;js/b.js&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>æˆ‘ä»¬å·²ç»äº†è§£äº†ä¸Šé¢ä»£ç çš„ç¼ºç‚¹ï¼š</p>\n<ul>\n<li>æ±¡æŸ“äº†å…¨å±€å˜é‡ï¼Œä¸åŒæ–‡ä»¶ä¹‹é—´å¯èƒ½ä¼šå‘½åå†²çª</li>\n<li>æ–‡ä»¶ä¾èµ–å…³ç³»éš¾ä»¥ç»´æŠ¤</li>\n<li>å‘å‡ºæ›´å¤šçš„httpè¯·æ±‚ï¼Œå½±å“æ€§èƒ½</li>\n</ul>\n<p>å†æ¥çœ‹çœ‹æˆ‘ä»¬çš„a.jså’Œb.jsæ–‡ä»¶ï¼š</p>\n<p>a.js</p>\n<pre><code>var a = {\n    content : &#39;a.js&#39;\n}\n</code></pre><p>b.js</p>\n<pre><code>var b = {\n    content : &#39;b.js&#39;\n}\n</code></pre><p>è¿™ä¸¤ä¸ªæ–‡ä»¶å¾ˆç®€å•ï¼Œåˆ†åˆ«å®šä¹‰äº†ä¸¤ä¸ªæ±¡æŸ“å…¨å±€çš„å˜é‡aå’Œbã€‚</p>\n<p>é‚£æˆ‘ä»¬é€šè¿‡requirejsæ¥è§£å†³è¿™äº›é—®é¢˜å‘¢ï¼Ÿé¦–å…ˆï¼Œä½ å¾—æœ‰ä¸ªå¥³æœ‹å‹ï¼Œå“¦ä¸å¯¹ï¼Œä½ å¾—å…ˆæœ‰requirejsåº“ï¼Œæ‰€ä»¥ï¼Œä¸‹è½½è¿æ¥ <a href=\"http://www.requirejs.cn/docs/download.html#requirejs\" target=\"_blank\" rel=\"external\">requirejsä¸‹è½½</a></p>\n<p>ä¸‹è½½ä¸‹æ¥ä¹‹åï¼Œæˆ‘ä»¬æŠŠrequirejsæ”¾åœ¨ä¸æˆ‘ä»¬index.htmlåŒçº§çš„ç›®å½•ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511142.pic.jpg\" alt=\"requirejsä¸htmlåŒçº§\"></p>\n<p>ä¿®æ”¹æˆ‘ä»¬çš„index.htmlï¼Œåªéœ€å¼•å…¥æˆ‘ä»¬åˆšåˆšä¸‹è½½ä¸‹æ¥çš„requirejsï¼š</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;script src=&quot;require.js&quot; data-main=&quot;config&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼Œscriptæ ‡ç­¾ä¸­data-mainæ˜¯ä»€ä¹ˆï¼Ÿæ˜¯è¿™æ ·çš„ï¼Œrequirejséœ€è¦ä¸€ä¸ªå…¥å£æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸Šæ¥å°±å»æ‰§è¡Œçš„æ¨¡å—ï¼Œç±»ä¼¼äºCè¯­è¨€ä¸­çš„mainå‡½æ•°ã€‚ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å‘Šè¯‰requirejsæˆ‘ä»¬çš„å…¥å£æ¨¡å—æ˜¯config.jsï¼Œç”±äºrequirejsé»˜è®¤æ¨¡å—éƒ½æ˜¯ä»¥.jsä¸ºåç¼€çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœç•¥ï¼Œåªéœ€è¦å†™configå°±å¯ä»¥äº†ï¼Œç„¶åæˆ‘ä»¬åœ¨index.htmlåŒçº§ç›®å½•ä¸‹åˆ›å»ºconfig.jsæ–‡ä»¶å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511143.pic.jpg\" alt=\"config.jsæ–‡ä»¶ä¸index.htmlåŒçº§ç›®å½•\"></p>\n<p>è¿™ä¸ªconfig.jså¯ä»¥çœ‹åšæ˜¯æˆ‘ä»¬çš„å…¥å£æ¨¡å—ï¼Œæˆ–è€…ä¸»æ¨¡å—ï¼Œå½“requirejsåŠ è½½å®Œæˆåï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œconfig.jsæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨config.jsæ–‡ä»¶ä¸­å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>alert(&#39;è¿™æ˜¯config.jsæ–‡ä»¶&#39;);\n</code></pre><p>åŒå‡»æ‰“å¼€requirejsæ–‡ä»¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå¦‚ä¸‹å›¾ï¼Œå¦‚æˆ‘ä»¬æ‰€æ„¿ï¼Œconfig.jsè¢«æ‰§è¡Œäº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20151114c.png\" alt=\"config.jsæ–‡ä»¶è¢«æ‰§è¡Œäº†\"></p>\n<p>å¦‚æœconfigæ¨¡å—åªæ˜¯ç®€å•çš„alertä¸€å¥è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ²¡æœ‰å¿…è¦ç”¨requirejsäº†ï¼Œä¸€èˆ¬æ¥è®²ï¼Œæˆ‘ä»¬åœ¨ä¸»æ¨¡å—ä¸­å»å¼•ç”¨å…¶ä»–æ¨¡å—ï¼Œå¼€å‘æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼Œåœ¨ä¹‹å‰çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†jQueryåº“ï¼Œa.jså’Œb.jsï¼Œç°åœ¨æˆ‘ä»¬åªå¼•å…¥äº†requirejså¹¶ä¸”å‘Šè¯‰å®ƒæˆ‘ä»¬çš„ä¸»æ¨¡å—æ˜¯config.jsï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨requirejså»åŠ è½½a.jsã€b.jså’ŒjQueryåº“å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“config.jsç¬¦åˆAMDæ¨¡å—ç¼–å†™è§„èŒƒï¼Œä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬å·²ç»è®²è¿‡äº†AMDè§„èŒƒä¸­å¦‚ä½•ç¼–å†™å’Œå¼•ç”¨æ¨¡å—ï¼Œä¸‹é¢æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æŠŠæˆ‘ä»¬çš„æ–‡ä»¶éƒ½ç¼–å†™æˆä¸€ä¸ªä¸ªæ¨¡å—å°±å¥½äº†ï¼Œç”±äºæˆ‘ä»¬å¤šåœ¨ä¸»æ¨¡å—å³config.jsä¸­å»å¼•ç”¨å…¶ä»–æ¨¡å—ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹config.jså¦‚ä¸‹ï¼š</p>\n<pre><code>require([&#39;a&#39;, &#39;b&#39;], function(A, B){\n    console.log(A);\n    console.log(B);\n});\n</code></pre><p>æˆ‘ä»¬åœ¨config.jsä¸­ä½¿ç”¨requireå‡½æ•°å»åŠ è½½æ¨¡å—aå’Œæ¨¡å—bï¼Œæ³¨æ„ï¼Œrequirejsé»˜è®¤æ¨¡å—æ˜¯.jsåç¼€ç»“å°¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å†™aå’Œbå³å¯ï¼Œå®ƒä¼šè‡ªåŠ¨å»åŠ è½½a.jså’Œb.jsï¼Œä½†æ˜¯è¿™æ ·å†™å°±å¯ä»¥äº†å˜›ï¼Ÿæˆ‘ä»¬åˆ·æ–°æµè§ˆå™¨ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111422.pic.jpg\" alt=\"æŠ¥é”™\"></p>\n<p>æˆ‘ä»¬ä»”ç»†çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œâ€œnet::ERR_FILE_NOT_FOUNDâ€ï¼Œå†çœ‹æ¨¡å—åŠ è½½çš„è·¯å¾„ â€œfile:///Users/huochunyang/hcyObj/temp/a.jsâ€ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬åˆšåˆšåœ¨config.jsä¸­åŠ è½½æ¨¡å—aå’Œbçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä»…ä»…å†™äº†aå’Œbåˆ°ä¾èµ–æ•°ç»„ä¸­ï¼Œå¯æ˜¯requirejsæ€ä¹ˆçŸ¥é“ä½ è¿™ä¸¤ä¸ªæ¨¡å—åœ¨å“ªé‡Œï¼Ÿæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ï¼Œrequirejsé»˜è®¤ä¼šåœ¨å¼•ç”¨requirejsçš„htmlæ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œæ³¨æ„ï¼Œæ˜¯htmlåŒçº§ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œä¸æ˜¯requirejsåŒçº§ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œå½“ç„¶ï¼Œç”±äºæˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­index.htmlå’Œrequirejsæ˜¯åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œæ‰€ä»¥æ€•å¤§å®¶æ··æ·†ã€‚æ—¢ç„¶è¿™æ ·ï¼Œé—®é¢˜å°±å¥½è¯´äº†ï¼Œæˆ‘ä»¬index.htmlåŒçº§ç›®å½•ä¸‹å¹¶æ²¡æœ‰a.jså’Œb.jsè¿™ä¸¤ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ªæ¨¡å—æ”¾åˆ°äº†jsç›®å½•ä¸‹ï¼Œæ‰€ä»¥ï¼Œå½“ç„¶ä¼šæŠ¥é”™å•¦ï¼Œæ—¢ç„¶æ‰¾åˆ°äº†é—®é¢˜çš„åŸå› ï¼Œæˆ‘ä»¬ä¿®æ”¹config.jsæ–‡ä»¶ï¼š</p>\n<pre><code>require([&#39;js/a&#39;, &#39;js/b&#39;], function(A, B){\n    console.log(A);\n    console.log(B);\n});\n</code></pre><p>å†åˆ·æ–°æµè§ˆå™¨ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511144.pic.jpg\" alt=\"ä¸æŠ¥é”™ï¼Œä½†è¾“å‡ºundefined\"></p>\n<p>æ€ä¹ˆæ ·ï¼Ÿä¸æŠ¥é”™äº†å§ï¼Ÿé‚£æ˜¯å› ä¸ºæˆ‘ä»¬å®¶åœ¨æ¨¡å—çš„æ—¶å€™è·¯å¾„å†™çš„æ­£ç¡®ï¼Œrequirejsèƒ½å¤Ÿæ­£ç¡®åŠ è½½æ¨¡å—ï¼Œæ‰€ä»¥å°±ä¸ä¼šæŠ¥é”™äº†ï¼Œä½†æ˜¯ç»†å¿ƒçš„åŒå­¦ä¼šå‘ç°ï¼Œæ€ä¹ˆè¾“å‡ºä¸¤ä¸ªundefinedï¼Ÿåœ¨config.jsä¸­æˆ‘ä»¬åŠ è½½äº†aã€bä¸¤ä¸ªæ¨¡å—åï¼Œåˆ†åˆ«åœ¨logä¸­è¾“å‡ºäº†Aã€Bæ¨¡å—å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä½¿ç”¨requirejsåŠ è½½è¿‡æ¥çš„ä¸¤ä¸ªæ¨¡å—ç«Ÿç„¶æ˜¯undefinedã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬a.jså’Œb.jsä¸­ï¼Œå¹¶æ²¡æœ‰æš—ä¸­AMDè§„èŒƒå»ç¼–å†™æ¨¡å—ä»£ç ï¼Œä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ä»‹ç»äº†å¦‚æœç¼–å†™ä¸€ä¸ªæ¨¡å—ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ”¹å†™a.jså’Œb.jsä¸ºæ¨¡å—çš„å†™æ³•ï¼Œå¦‚ä¸‹ï¼š</p>\n<p>a.js</p>\n<pre><code>define(function(){\n    var a = {\n        content : &#39;a.js&#39;\n    }\n\n    return a;\n});\n</code></pre><p>b.js</p>\n<pre><code>define(function(){\n\n    var b = {\n        content : &#39;b.js&#39;\n    }\n\n    return b;\n\n});\n</code></pre><p>è¿™ä¸¤ä¸ªæ¨¡å—å¾ˆç®€å•ï¼Œæˆ‘ä»¬ä½¿ç”¨returnè¯­å¥è¿”å›ä¸¤ä¸ªå¯¹è±¡ï¼Œè¢«è¿”å›çš„å¯¹è±¡å°±æ˜¯æ¨¡å—å¯¹è±¡ï¼Œä»£è¡¨äº†è¿™ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬åˆ·æ–°æµè§ˆå™¨ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511145.pic.jpg\" alt=\"è¾“å‡ºæ¨¡å—Aå’ŒB\"></p>\n<p>å¦‚ä½•æˆ‘ä»¬çš„æ¨¡å—Béœ€è¦ä¾èµ–æ¨¡å—Aï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å†™æ¨¡å—Bä¸ºå¦‚ä¸‹ä»£ç ï¼Œåœ¨ä¾èµ–æ•°ç»„ä¸­ä¾èµ–æ¨¡å—Aï¼š</p>\n<pre><code>define([&#39;js/a&#39;], function(A){\n\n    var b = {\n        content : &#39;b.js&#39;\n    }\n\n    return b;\n\n});\n</code></pre><p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œæˆ‘ä»¬æ¯æ¬¡å»åŠ è½½æ¨¡å—çš„æ—¶å€™ï¼Œéƒ½è¦å†™å¯¹æ¨¡å—æ‰€åœ¨è·¯å¾„ï¼Œæ¯”å¦‚åŠ è½½æ¨¡å—aï¼Œæˆ‘ä»¬å°±è¦è¿™æ ·å»åŠ è½½ â€œjs/a.jsâ€ ï¼Œå‡å¦‚æˆ‘ä»¬çš„é¡¹ç›®åšçš„æ¯”è¾ƒå¤§ï¼Œæ¨¡å—åˆ†çš„æ¯”è¾ƒæ·±ï¼ŒåŠç›®å½•å±‚çº§æ·±ï¼Œå¦‚æœæˆ‘ä»¬è¿˜è¿™æ ·å»åŠ è½½çš„è¯ï¼Œå¯èƒ½ä¼šå†™æˆä¸‹é¢è¿™æ ·ï¼š</p>\n<ul>\n<li>â€œmodules/dom/XXX/aaa.jsâ€ *</li>\n</ul>\n<p>å¦‚æœæ¯æ¬¡ä¸ºäº†åŠ è½½ä¸€ä¸ªæ¨¡å—éƒ½è¦è¿™æ ·å»å†™çš„è¯ï¼Œç¬¬ä¸€æˆ‘ä»¬è¿˜è¦è®°ä½æ¨¡å—æ‰€åœ¨è·¯å¾„ï¼Œå¦‚æœè®°ä¸ä½çš„è¯è¿˜è¦å»æŸ¥çœ‹ï¼Œå¾ˆå½±å“å¼€å‘æ•ˆç‡ï¼Œç¬¬äºŒå†™èµ·æ¥æ€»æ˜¯æ„Ÿè§‰å¾ˆä¸çˆ½ï¼Œä»£ç çœ‹ç€å¾ˆæ¶å¿ƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°requirejsçš„é…ç½®äº†ï¼Œrequirejsæœ‰ä¸€ä¸ªconfigå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªjsonå¯¹è±¡ï¼Œè®¾ç½®ä¸€äº›é…ç½®é€‰é¡¹ï¼Œæˆ‘ä»¬ä¿®æ”¹config.jså¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    paths : {\n        a : &#39;js/a&#39;,\n        b : &#39;js/b&#39;\n    }\n});\n\n\nrequire([&#39;a&#39;, &#39;b&#39;], function(A, B){\n    console.log(A);\n    console.log(B);\n});\n</code></pre><p>é¦–å…ˆæˆ‘ä»¬åœ¨ä½¿ç”¨require()å‡½æ•°å»åŠ è½½æ¨¡å—ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨requirejs.config()æ–¹æ³•å»å¯¹requirejsè¿›è¡Œé…ç½®ï¼Œrequirejs.configæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªpathsé…ç½®é¡¹ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™æ˜¯ä¸€é¡¹è·¯å¾„é…ç½®ï¼Œå†çœ‹ä¸‹é¢ä½¿ç”¨require()å‡½æ•°å»åŠ è½½æ¨¡å—æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥å»åŠ è½½aå’Œbï¼Œè¿™æ ·æ˜¯å¯ä»¥æ­£å¸¸åŠ è½½æ¨¡å—çš„ï¼Œå› ä¸ºåœ¨åŠ è½½aæ¨¡å—çš„æ—¶å€™ï¼Œrequirejså‘ç°åœ¨pathsä¸­é…ç½®çš„è·¯å¾„ä¸­aå¯¹åº”â€œjs/aâ€ï¼Œæ‰€ä»¥ï¼Œrequireä¼šè‡ªåŠ¨å»åŠ è½½js/aæ¨¡å—ï¼Œè€Œä¸æ˜¯åœ¨index.htmlåŒçº§ç›®å½•ä¸‹å»æ‰¾ï¼Œæ‰€ä»¥pathsé…ç½®å°±åƒä¸€ä¸ªè·¯ç”±ï¼Œåˆ·æ–°é¡µé¢ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ä¸­çš„è¾“å‡ºï¼Œæˆ‘ä»¬ç­‰å¾…ç‰‡åˆ»ä¼šå‘ç°ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511146.pic.jpg\" alt=\"åŠ è½½è¶…æ—¶\"></p>\n<p>ä»€ä¹ˆï¼ŸåŠ è½½è¶…æ—¶ï¼Ÿä»€ä¹ˆæƒ…å†µï¼Ÿåˆ«ç´§å¼ ï¼Œè¿˜è®°æˆ‘ä»¬çš„b.jsä¸­å—ï¼Ÿæˆ‘ä»¬åœ¨b.jsä¸­ä¾èµ–äº†a.jsï¼Œå¯æ˜¯æˆ‘ä»¬çš„ä»£ç æ˜¯æ€ä¹ˆä¾èµ–çš„å‘¢ï¼Ÿæ‰“å¼€b.jsï¼š</p>\n<pre><code>define([&#39;js/a&#39;], function(A){\n\n    var b = {\n        content : &#39;b.js&#39;\n    }\n\n    return b;\n\n});\n</code></pre><p>æˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬ä¾èµ–aï¼Œæ¨¡å—çš„æ—¶å€™ä¾ç„¶ä½¿ç”¨â€™js/aâ€™è¿›è¡Œä¾èµ–ï¼Œè€Œå½“requirejsåœ¨è§£æâ€™js/aâ€™çš„æ—¶å€™ï¼Œå‘ç°æœ‰ä¸€ä¸ªâ€™aâ€™ï¼Œç„¶ååˆå†pathsé…ç½®ä¸­å‘ç°â€™aâ€™å¯¹åº”â€™js/aâ€™,äºæ˜¯ï¼Œrequirejså°±æŠŠâ€™aâ€™æ¢æˆäº†â€™js/aâ€™ï¼Œæ‰€ä»¥æ•´ä½“çš„â€™js/aâ€™æœ€ç»ˆè¢«æ¢æˆäº†â€™js/js/aâ€™ï¼Œç„¶ååˆå†è·¯å¾„ä¸­å‘ç°äº†aï¼Œäºæ˜¯åŠ è½½è·¯å¾„åˆè¢«æ›¿æ¢æˆäº†â€™js/js/js/aâ€™ï¼Œå¦‚æ­¤ä¸‹å»ï¼Œæœ€ç»ˆæˆäº†æ­»å¾ªç¯ï¼Œè€Œè¶…è¿‡ä¸€å®šçš„æ—¶é—´ä¹‹åï¼Œå°±ä¼šæŠ¥é”™åŠ è½½è¶…æ—¶ï¼Œæ˜ç™½äº†å§ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æŠŠb.jsä¸­ä¾èµ–a.jsçš„å­—ç¬¦åˆ›ç›´æ¥å†™æˆâ€™aâ€™å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>define([&#39;a&#39;], function(A){\n\n    var b = {\n        content : &#39;b.js&#39;\n    }\n\n    return b;\n\n});\n</code></pre><p>å†æ¬¡åˆ·æ–°æµè§ˆå™¨ï¼Œæ€ä¹ˆæ ·ï¼Ÿæ­£å¸¸åŠ è½½äº†å§ï¼Ÿè¿™æ ·ä»¥åæˆ‘ä»¬åªè¦éœ€è¦ä¾èµ–aæ¨¡å—ï¼Œæˆ‘ä»¬å°±ç›´æ¥å†™â€™aâ€™å°±å¯ä»¥äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511147.pic.jpg\" alt=\"æ­£å¸¸åŠ è½½\"></p>\n<p>é‚£ä¹ˆå¥½ï¼Œa.jså’Œb.jsæˆ‘ä»¬éƒ½æ”¹æˆäº†æ¨¡å—çš„ç¼–å†™æ–¹å¼ï¼Œå¹¶ä¸”ä¹Ÿåšäº†pathsé…ç½®ï¼Œæœ€ç»ˆä¹ŸæˆåŠŸåŠ è½½äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜é—æ¼äº†ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯jQueryè¿™ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œé‚£ä¹ˆrequirejsèƒ½å¤ŸåŠ è½½ç¬¬ä¸‰æ–¹åº“å—ï¼Ÿç­”æ¡ˆæ˜¯ï¼šåªè¦ç¬¬ä¸‰æ–¹åº“æä¾›äº†AMDæ¥å£ï¼Œé‚£ä¹ˆrequirejså°±å¯ä»¥åŠ è½½ï¼Œè€ŒjQueryæœ¬èº«ä¹Ÿæä¾›äº†è¿™ä¸ªæ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥åŠ è½½å°±å¥½äº†ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¾ç„¶åœ¨pathsä¸­é…ç½®ä¸€ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    paths : {\n        a : &#39;js/a&#39;,\n        b : &#39;js/b&#39;,\n        $ : &#39;js/jquery.min&#39;\n    }\n});\n</code></pre><p>ç„¶ååœ¨configä¸­å»åŠ è½½jQueryå¹¶è¯•ç€ä½¿ç”¨jQueryï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä¿®æ”¹æˆ‘ä»¬çš„config.jså¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    paths : {\n        a : &#39;js/a&#39;,\n        b : &#39;js/b&#39;,\n        jquery : &#39;js/jquery.min&#39;\n    }\n});\n\nrequire([&#39;a&#39;, &#39;b&#39;, &#39;jquery&#39;], function(A, B, $){\n    alert($(&#39;html&#39;).html());\n    console.log(A);\n    console.log(B);\n});\n</code></pre><p>åˆ·æ–°é¡µé¢ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511148.pic.jpg\" alt=\"ç¬¬ä¸‰æ–¹åº“åŠ è½½æˆåŠŸ\"></p>\n<p>å¼¹å‡ºå¼¹çª—ï¼Œè¯æ˜æˆ‘ä»¬åŠ è½½jQueryæˆåŠŸå¹¶æˆåŠŸä½¿ç”¨ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬å†æ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆèƒ½å¤Ÿç›´æ¥é€šè¿‡requirejsåŠ è½½jQueryï¼Ÿæ˜¯å› ä¸ºjQueryè¿™ä¸ªç¬¬ä¸‰æ–¹åº“æä¾›äº†AMDæ”¯æŒï¼Œå¯æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“éƒ½æä¾›äº†AMDæ”¯æŒï¼Œé‚£ä¹ˆrequireå°±ä¸èƒ½åŠ è½½é‚£äº›ç¬¬ä¸‰æ–¹åº“äº†å—ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¾ç„¶èƒ½å¤ŸåŠ è½½ã€‚ä¸è¿‡ï¼Œè¿™å°±æ¶‰åŠåˆ°å¦‚ä½•åŠ è½½éAMDæ¨¡å—å†™æ³•çš„æ¨¡å—äº†ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¨¡å—cï¼Œä½†æ˜¯c.jså¹¶æ²¡æœ‰æŒ‰ç…§AMDè§„èŒƒå°è£…ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬åœ¨jsæ–‡ä»¶åŠ ä¸‹åˆ›å»ºc.jsï¼Œå¹¶å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>var show = function(){\n    alert(&#39;è°ƒç”¨äº†c&#39;);\n}\n</code></pre><p>æˆ‘ä»¬çš„c.jså¾ˆç®€å•ã€‚åªæ˜¯å•çº¯çš„å®šä¹‰äº†ä¸€ä¸ªcå‡½æ•°ï¼Œå¹¶å¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†ï¼Œæ˜¾ç¤ºâ€œè°ƒç”¨äº†câ€ï¼Œæ‰€ä»¥è¿™ä¸ªc.jså¹¶ä¸æ˜¯ä¸€ä¸ªAMDæ¨¡å—ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨requirejsåŠ è½½è¿™ä¸ªcï¼Œè¯¥å¦‚ä½•åŠ è½½å‘¢ï¼Ÿè¿™å°±è¦è®²åˆ°requirejs.config()ä¸­çš„å¦ä¸€ä¸ªé…ç½®é¡¹ shim äº†ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†pathsæ˜¯ç”¨æ¥é…ç½®åŠ è½½æ¨¡å—è·¯å¾„çš„ï¼Œshimåˆ™æ˜¯ç”¨æ¥åŠ è½½éAMDæ¨¡å—è§„èŒƒçš„â€œæ¨¡å—â€çš„ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†åŠ è½½c.jsï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹config.jså¹¶æ·»åŠ shimé…ç½®ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    paths : {\n        a : &#39;js/a&#39;,\n        b : &#39;js/b&#39;,\n        c : &#39;js/c&#39;,\n        jquery : &#39;js/jquery.min&#39;\n    },\n\n    shim : {\n        c : {\n            exports : &#39;show&#39;\n        }\n    }\n});\n\n\nrequire([&#39;a&#39;, &#39;b&#39;, &#39;jquery&#39;, &#39;c&#39;], function(A, B, $, c){\n    console.log(c);\n});\n</code></pre><p>æˆ‘ä»¬æ·»åŠ äº†shimé…ç½®ï¼Œé…ç½®ä¸­ï¼Œc ä»£è¡¨æˆ‘ä»¬åœ¨requireä¸­å¼•å…¥æ¨¡å—æ—¶çš„åå­—ï¼Œå³æˆ‘ä»¬å¯ä»¥é€šè¿‡require([â€˜câ€™])å»å¼•ç”¨cæ¨¡å—ï¼Œcå¯¹åº”ä¸€ä¸ªjsonå¯¹è±¡ï¼Œå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªexportså±æ€§ï¼Œexportså±æ€§çš„å€¼å°±æ˜¯æˆ‘ä»¬è¦åˆ°å¤„çš„æ¥å£ï¼Œæ³¨æ„ï¼Œæˆ‘ä»¬ä¾ç„¶è¦åœ¨pathsä¸­æ·»åŠ æ¨¡å—cçš„é…ç½®ï¼Œè¿™æ ·æ‰èƒ½æ­£å¸¸åŠ è½½æ¨¡å—ï¼Œæœ€åï¼Œæˆ‘ä»¬åœ¨æ§åˆ¶å°ä¸­è¾“å‡ºäº†æ¨¡å—cï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œåˆ·æ–°ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511149.pic.jpg\" alt=\"è¾“å‡ºæ¨¡å—c\"></p>\n<p>æˆ‘ä»¬çœ‹åˆ°ï¼Œæ‰“å°å‡ºæ¥çš„å°±æ˜¯æˆ‘ä»¬çš„å‡½æ•°showï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åˆ°å¤„çš„æ¥å£å°±æ˜¯showå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä¸€ä¸‹è¯•è¯•ï¼Œä¿®æ”¹config.jsï¼š</p>\n<pre><code>require([&#39;a&#39;, &#39;b&#39;, &#39;jquery&#39;, &#39;c&#39;], function(A, B, $, c){\n    c();\n});\n</code></pre><p>åˆ·æ–°é¡µé¢ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111410.pic.jpg\" alt=\"è°ƒç”¨äº†showå‡½æ•°\"></p>\n<p>æ€ä¹ˆæ ·ï¼Œå¼¹å‡ºå¼¹çª—äº†å§ï¼Œå®é™…ä¸Šï¼Œç»è¿‡shimé…ç½®åï¼Œrequirejsä¼šè‡ªåŠ¨ä¿®æ”¹c.jsä¸ºä¸€ä¸ªAMDæ¨¡å—ï¼Œä¸ºå…¶æ·»åŠ å°è£…ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>define(function(){\n    var show = function(){\n        alert(&#39;è°ƒç”¨äº†c&#39;);\n    }    \n\n    return show;\n});\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œreturnè¿”å›çš„æ˜¯showå‡½æ•°ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨shimä¸­ä¸ºcæ¨¡å—é…ç½®çš„å¯¼å‡ºæ¥å£ä¸ºshowï¼Œå³exportsçš„å€¼æ˜¯showï¼Œæ‰€ä»¥åŠ å…¥æˆ‘ä»¬ä¿®æ”¹exportsçš„å€¼ä¸ºå…¶ä»–å€¼ï¼Œæ˜¯æ²¡æœ‰åŠæ³•å¯¼å‡ºæˆåŠŸçš„ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¿®æ”¹config.jsä¸­cæ¨¡å—çš„shimé…ç½®ï¼Œå¦‚ä¸‹ï¼Œæˆ‘ä»¬å¯¼å‡ºçš„æ¥å£ä¸æ˜¯showè€Œæ˜¯éšæ„çš„aaa:</p>\n<pre><code>shim : {\n    c : {\n        exports : &#39;aaa&#39;\n    }\n}\n</code></pre><p>åˆ·æ–°é¡µé¢ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111411.pic.jpg\" alt=\"æŠ¥é”™\"></p>\n<p>æŠ¥é”™ï¼Œcä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬å¯¼å‡ºçš„æ¥å£æ˜¯aaaï¼Œé¬¼çŸ¥é“ä½ è¿™ä¸ªaaaæ˜¯ä»€ä¹ˆå•Šã€‚æ‰€ä»¥æœ€åè°ƒç”¨çš„æ—¶å€™å½“ç„¶ä¼šæŠ¥é”™ã€‚</p>\n<p>æˆ‘ä»¬è¿˜å¯ä»¥å¯¼å‡ºå¤šä¸ªæ¥å£ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„c.jsä¸­æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«æ˜¯showå‡½æ•°å’Œhideå‡½æ•°ï¼Œä¿®æ”¹æˆ‘ä»¬çš„c.jså¦‚ä¸‹ï¼š</p>\n<pre><code>var show = function(){\n    alert(&#39;showå‡½æ•°&#39;);\n}    \n\nvar hide = function(){\n    alert(&#39;hideå‡½æ•°&#39;);\n}\n</code></pre><p>å¦‚æœæˆ‘ä»¬ç»§ç»­ä½¿ç”¨ä¸Šé¢çš„shimé…ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†åªèƒ½å¯¼å‡ºshowå‡½æ•°ï¼Œæ²¡æœ‰åŠæ³•å¯¼å‡ºhideï¼Œå¦‚ä½•æ‰èƒ½å°†ä¸¤ä¸ªæ¥å£éƒ½å¯¼å‡ºæ¥å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±ä¸èƒ½ä½¿ç”¨exportså±æ€§äº†ï¼Œæˆ‘ä»¬è¦ç”¨initå±æ€§ï¼Œåˆ†åˆ«å°†ä¸¤ä¸ªæ¥å£å¯¼å‡ºï¼Œä¿®æ”¹config.jså¦‚ä¸‹ï¼š</p>\n<pre><code>shim : {\n    c : {\n        init : function(){\n            return {\n                aaa : show,\n                bbb : hide\n            }\n        }\n    }\n}\n</code></pre><p>initå±æ€§å¯¹åº”ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œé¢å¯¹åº”æˆ‘ä»¬è¦å¯¼å‡ºçš„æ¥å£ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æŠŠä¸¤ä¸ªæ¥å£éƒ½å¯¼å‡ºäº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡å—çš„aaaè°ƒç”¨showå‡½æ•°ï¼Œæ¨¡å—çš„bbbè°ƒç”¨hideå‡½æ•°ï¼Œä¿®æ”¹config.jså»å°è¯•è°ƒç”¨ä¸€ä¸‹ï¼š</p>\n<pre><code>require([&#39;a&#39;, &#39;b&#39;, &#39;jquery&#39;, &#39;c&#39;], function(A, B, $, c){\n    c.aaa();\n    c.bbb();\n});\n</code></pre><p>æ‰“å¼€æµè§ˆå™¨åˆ·æ–°ï¼Œæ€ä¹ˆæ ·ï¼Œä¸¤ä¸ªå‡½æ•°æ­£å¸¸è°ƒç”¨äº†å§ï¼Œä¸è¿‡è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œinitå±æ€§å¯¹åº”çš„å‡½æ•°ä¸­ï¼Œè¿”å›çš„å¯¹è±¡é‡Œé¢ï¼Œshowå’Œhideä¸èƒ½ç”¨å¼•å·å¼•èµ·æ¥ï¼Œä¸‹é¢çš„å†™æ³•æ˜¯é”™è¯¯çš„ï¼š</p>\n<pre><code>shim : {\n    c : {\n        init : function(){\n            return {\n                aaa : &#39;show&#39;,\n                bbb : &#39;hide&#39;\n            }\n        }\n    }\n}\n</code></pre><p>åˆ·æ–°æµè§ˆå™¨ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111412.pic.jpg\" alt=\"åŠ å¼•å·åæŠ¥é”™\"></p>\n<p>é‚£ä¹ˆä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬è®¾ç½®äº†initå±æ€§åï¼Œrequirejsç›¸å½“äºè‡ªåŠ¨ä¸ºæˆ‘ä»¬å°è£…äº†c.jså¦‚ä¸‹é¢è¿™æ ·ï¼š</p>\n<pre><code>define(function(){\n    var show = function(){\n        alert(&#39;showå‡½æ•°&#39;);\n    }    \n\n    var hide = function(){\n        alert(&#39;hideå‡½æ•°&#39;);\n    }\n\n    return {\n        aaa : show,\n        bbb : hide\n    }\n});\n</code></pre><p>ä¸Šé¢ä»£ç ä¸­showå’Œhideæ²¡æœ‰åŠ å¼•å·ï¼Œæ‰€ä»¥æ˜¯å˜é‡ï¼Œåˆ†åˆ«å¼•ç”¨ä¸Šé¢çš„showå‡½æ•°å’Œhideå‡½æ•°ï¼Œå¦‚æœæˆ‘ä»¬åŠ äº†å¼•å·ï¼Œrequirejså°è£…ä¹‹åå°±ä¼šæƒ³è¿™æ ·ï¼š</p>\n<pre><code>define(function(){\n    var show = function(){\n        alert(&#39;showå‡½æ•°&#39;);\n    }    \n\n    var hide = function(){\n        alert(&#39;hideå‡½æ•°&#39;);\n    }\n\n    return {\n        aaa : &#39;show&#39;,\n        bbb : &#39;hide&#39;\n    }\n});\n</code></pre><p>æˆ‘ä»¬çœ‹ä¸Šé¢çš„ä»£ç ï¼Œâ€™showâ€™å’Œâ€™hideâ€™éƒ½åŠ äº†å¼•å·ï¼Œæ‰€ä»¥ä»–ä»¬æ˜¯å­—ç¬¦ä¸²ï¼Œå¹¶æ²¡æœ‰å¼•ç”¨ä¸Šé¢çš„showå‡½æ•°å’Œhideå‡½æ•°ï¼Œåªæ˜¯å¯¼å‡ºä¸€ä¸ªå­—ç¬¦ä¸²è€Œå·²ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æŠŠå­—ç¬¦ä¸²å½“åšå‡½æ•°æ¥è°ƒç”¨çš„æ—¶å€™ï¼Œå½“ç„¶ä¼šæŠ¥é”™ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥éªŒè¯è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨å¸¦å¼•å·çš„é…ç½®ï¼Œç„¶åæ‰“å°å‡ºc.aaaçš„ç±»å‹ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    paths : {\n        a : &#39;js/a&#39;,\n        b : &#39;js/b&#39;,\n        c : &#39;js/c&#39;,\n        jquery : &#39;js/jquery.min&#39;\n    },\n\n    shim : {\n        c : {\n            init : function(){\n                return {\n                    aaa : &#39;show&#39;,\n                    bbb : &#39;hide&#39;\n                }\n            }\n        }\n    }\n});\n\n\nrequire([&#39;a&#39;, &#39;b&#39;, &#39;jquery&#39;, &#39;c&#39;], function(A, B, $, c){\n    console.log(typeof c.aaa);\n});\n</code></pre><p>åˆ·æ–°æµè§ˆå™¨ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œc.aaaçš„ç¡®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111413.pic.jpg\" alt=\"æ‰“å°å‡ºæ¥çš„æ˜¯å­—ç¬¦ä¸²\"></p>\n<p>å¦å¤–ï¼Œæˆ‘ä»¬æ³¨æ„ä¸€ç‚¹ï¼Œpathsé‡Œé¢çš„é…ç½®ï¼Œè·¯å¾„ä¸­éƒ½å¸¦æœ‰â€™js/â€˜ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>paths : {\n    a : &#39;js/a&#39;,\n    b : &#39;js/b&#39;,\n    c : &#39;js/c&#39;,\n    jquery : &#39;js/jquery.min&#39;\n}\n</code></pre><p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„æ¨¡å—éƒ½æ”¾åœ¨jsç›®å½•ä¸‹ï¼Œæ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä¸å¯ä»¥é€šè¿‡ä¸€ä¸ªé…ç½®ï¼Œæ¥å‘Šè¯‰æˆ‘ä»¬çš„requirejsï¼Œæ¯æ¬¡æŸ¥æ‰¾æ¨¡å—çš„æ—¶å€™éƒ½åŸºäºjsç›®å½•æŸ¥æ‰¾å‘¢ï¼Ÿè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ¯æ¬¡ç¼–å†™pathsé…ç½®çš„æ—¶å€™éƒ½è¦å†™ä¸Šâ€™js/â€˜äº†ï¼Œå®é™…ä¸Šæ˜¯å¯ä»¥çš„ï¼Œrequirejs.config()çš„é…ç½®å¯¹è±¡ä¸­è¿˜æœ‰ä¸€ä¸ª baseUrl å±æ€§ï¼Œç”¨æ¥åˆ¶å®šæ¨¡å—çš„æŸ¥æ‰¾ç›®å½•ï¼Œä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    baseUrl : &#39;./js&#39;,\n    paths : {\n        a : &#39;a&#39;,\n        b : &#39;b&#39;,\n        c : &#39;c&#39;,\n        jquery : &#39;jquery.min&#39;\n    },\n\n    shim : {\n        c : {\n            init : function(){\n                return {\n                    aaa : show,\n                    bbb : hide\n                }\n            }\n        }\n    }\n});\n</code></pre><p>å½“ç„¶ï¼ŒbaseUrlæœ¬çœæ˜¯åŸºäºå¼•å…¥requirejsçš„htmlæ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ï¼Œåœ¨æœ¬ä¾‹ä¸­å³index.htmlæ‰€åœ¨ç›®å½•çš„ã€‚</p>\n<p>å¦å¤–ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå½“æˆ‘ä»¬é…ç½®å®ŒbaseUrlä¹‹åï¼Œpathsä¸­aã€bã€cä¸‰ä¸ªæ¨¡å—å¯ä»¥ä¸ç”¨é…ç½®ï¼Œå› ä¸ºå·²ç»æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ï¼Œä½†æ˜¯jqueryéœ€è¦ä¿ç•™ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    baseUrl : &#39;./js&#39;,\n    paths : {\n        jquery : &#39;jquery.min&#39;\n    },\n\n    shim : {\n        c : {\n            init : function(){\n                return {\n                    aaa : show,\n                    bbb : hide\n                }\n            }\n        }\n    }\n});\n</code></pre><p>è¿™æ ·ï¼Œå½“requirejså»åŠ è½½çš„aã€bã€cæ¨¡å—çš„æ—¶å€™ï¼Œå°±è‡ªåŠ¨ä¼šæ ¹æ®baseUrlä¸­çš„é…ç½®å»æŸ¥æ‰¾æ¨¡å—ï¼Œè€Œæˆ‘ä»¬çš„ä¸‰ä¸ªæ¨¡å—ä¹Ÿæ°å¥½åœ¨jsç›®å½•ä¸‹ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨é…ç½®äº†ï¼Œæ€»è€Œè¨€ä¹‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆçµå¥½å¥½ç”¨çš„é…ç½®ï¼Œå…·ä½“æ ¹æ®ä½ çš„é¡¹ç›®æ¥ã€‚</p>\n<p>ä¸‹é¢ï¼Œæˆ‘ä»¬åœ¨è€ƒè™‘ä¸€ç§æƒ…æ™¯ï¼Œå‡å¦‚ä½ çš„é¡¹ç›®å¾ˆå¤§ï¼Œåœ¨æœ€åˆé˜¶æ®µï¼Œä½ çš„é¡¹ç›®é‡Œå¼•ç”¨äº†jQuery1.xç‰ˆæœ¬ï¼Œåæ¥éšç€é¡¹ç›®çš„å‘å±•ï¼Œé¡¹ç›®éœ€è¦å¼•å…¥jQuery2.xçš„ç‰ˆæœ¬ï¼Œä½†æ˜¯åˆä¸èƒ½åˆ é™¤æ‰åŸæ¥çš„1.xç‰ˆæœ¬ï¼Œå› ä¸ºé¡¹ç›®ä¸­æœ‰å¾ˆå¤šæ¨¡å—éƒ½åœ¨ä½¿ç”¨1.xçš„ç‰ˆæœ¬ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¸Œæœ›åœ¨æŸäº›æ–‡ä»¶ä¸­å¼•å…¥jQueryæ—¶ä½¿ç”¨çš„1.xç‰ˆæœ¬ï¼Œè€Œåœ¨å¦å¤–ä¸€äº›æ–‡ä»¶ä¸­ä½¿ç”¨çš„æ˜¯2.xçš„ç‰ˆæœ¬ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿæœ‰çš„åŒå­¦å¯èƒ½ä¼šè¿™æ ·æƒ³ï¼Œå¦‚ä¸‹é…ç½®ï¼š</p>\n<pre><code>requirejs.config({\n    baseUrl : &#39;./js&#39;,\n    paths : {\n        jquery1 : &#39;jquery-1.11.3&#39;\n        jquery2 : &#39;jquery-2.1.4&#39;\n    },\n\n    shim : {\n        c : {\n            init : function(){\n                return {\n                    aaa : show,\n                    bbb : hide\n                }\n            }\n        }\n    }\n});\n</code></pre><p>é…ç½®ä¸¤ä¸ªjqueryï¼Œä¸€ä¸ªjquery1ï¼Œä¸€ä¸ªjquery2ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒçš„ç‰ˆæœ¬ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨1.xç‰ˆæœ¬çš„æ—¶å€™ï¼Œå°±å¼•ç”¨â€™jquery1â€™ï¼Œå½“æˆ‘ä»¬æƒ³ä½¿ç”¨2.xç‰ˆæœ¬çš„æ—¶å€™å°±å¼•ç”¨â€™jquery2â€™ï¼Œè¿™æ ·çœ‹ä¸Šå»å¥½åƒå¾ˆåˆç†ï¼Œè¯•ç€ä½¿ç”¨ä¸€ä¸‹ï¼Œä¿®æ”¹config.jsä¸­requireä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"requirejs.config({\">    baseUrl : &#39;./js&#39;,\n    paths : {\n        jquery1 : &#39;jquery-1.11.3&#39;,\n        jquery2 : &#39;jquery-2.1.4&#39;\n    },\n\n    shim : {\n        c : {\n            init : function(){\n                return {\n                    aaa : show,\n                    bbb : hide\n                }\n            }\n        }\n    }\n});\n\n\nrequire([&#39;jquery1&#39;], function($){\n    alert($(&#39;html&#39;).html());\n});\n</code></pre>\n<p>æˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼ŒæŠ¥é”™äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111414.pic.jpg\" alt=\"æŠ¥é”™\"></p>\n<p>æŸ¥çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œä»–è¯´$æ²¡æœ‰å®šä¹‰ï¼Œè¨€å¤–ä¹‹æ„å°±æ˜¯è¯´æˆ‘ä»¬jQueryæ¨¡å—æ ¹æœ¬æ²¡æœ‰å¼•å…¥è¿›æ¥ï¼Œæ€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬åœ¨pathsä¸­é…ç½®jqueryæ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨åˆ«åï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªèƒ½ä½¿ç”¨ jquery è€Œä¸èƒ½ä½¿ç”¨ jquery1å’Œjquery2ï¼Œä¸ä¿¡ä½ å°†requirejs.config()ä¸­çš„pathsä¿®æ”¹å¦‚ä¸‹ï¼š</p>\n<pre><code>paths : {\n    jquery : &#39;jquery-1.11.3&#39;\n}\n</code></pre><p>åˆ·æ–°é¡µé¢å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯ä¿®æ”¹æˆä¸‹é¢è¿™æ ·å°±ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼š</p>\n<pre><code>paths : {\n    jq : &#39;jquery-1.11.3&#39;\n}\n</code></pre><p>å› ä¸ºä½ åªèƒ½ç”¨jqueryè€Œä¸èƒ½ç”¨ä»»ä½•å…¶ä»–åˆ«åï¼Œä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬æ‰“å¼€jqueryçš„æºç ï¼Œå¼€å…¶ä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111415.pic.jpg\" alt=\"jQueryæºç ä¸­å¯¹AMDå…¼å®¹åšæ³•\"></p>\n<p>è¿™æ®µä»£ç å…¶å®å°±æ˜¯jQueryåº“å¯¹AMDæ¨¡å—çš„å…¼å®¹åšæ³•ï¼Œæˆ‘ä»¬å‘ç°ï¼ŒjQueryå»ä½¿ç”¨defineå®šä¹‰æ¨¡å—çš„æ—¶å€™ï¼Œä»–æ˜¾ç¤ºçš„ä¼ é€’äº†ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² â€˜jqueryâ€™ï¼Œè¿™ä¸ªå‚æ•°åœ¨æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„æ¨¡å—ä¸­ä¸€èˆ¬æ˜¯ä¸å»æ‰‹åŠ¨å†™æ­»å¾—ï¼Œä¸€èˆ¬ç”±æ„å»ºå·¥å…·åœ¨ä¼˜åŒ–æ¨¡å—æ—¶è‡ªåŠ¨å¡«å……çš„ï¼Œä»¥å…æ¨¡å—å†²çªï¼Œå› ä¸ºè¿™ä¸ªå‚æ•°ä»£è¡¨äº†æ¨¡å—idï¼Œé‚£ä¹ˆjqueryä¸ºä»€ä¹ˆè¦å†™æ­»å‘¢ï¼Ÿ</p>\n<p>ç½‘ä¸Šæœ‰ç§è¯´æ³•æ˜¯å‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œå› ä¸ºåƒjQueryè¿™ç§åº“æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨æ˜¯å¾ˆé¢‘ç¹çš„ï¼Œå¾ˆå¤šæ¨¡å—éƒ½è¦ä¾èµ–è¿™ä¸ªæ¨¡å—ï¼Œå¦‚æœidè¿™ä¸ªå‚æ•°ä¸å†™æ­»å¾—è¯ï¼Œæ„å‘³ç€æˆ‘ä»¬åœ¨ä¾èµ–jQueryçš„æ—¶å€™å¯ä»¥éšæ„èµ·åå­—ï¼Œè€Œéå¿…é¡»ä½¿ç”¨ â€˜jqueryâ€™ ï¼Œè¿™æ ·å…¶ä»–æ¨¡å—å°±å¯ä»¥ç»™jQueryèµ·ä¸åŒçš„æ¨¡å—åï¼Œè¿™å°±ä¼šå¯¼è‡´å¤šæ¬¡å¼•å…¥jQueryã€‚</p>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“äº†ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨pathsé…ç½®ä¸­é…ç½®jQueryçš„æ—¶å€™ä¸ºä»€ä¹ˆåªèƒ½ä½¿ç”¨ â€˜jqueryâ€™ äº†ï¼Œæˆ‘ä»¬å›åˆ°ä¹‹å‰çš„é—®é¢˜ï¼Œå³åœ¨ä¸åŒçš„æ¨¡å—å¼•å…¥ä¸åŒç‰ˆæœ¬çš„jQueryï¼Œæƒ³ä¸€æƒ³æˆ‘ä»¬è¿˜èƒ½è¿™æ ·å»é…ç½®äº†å˜›ï¼š</p>\n<pre><code>paths : {\n    jquery1 : &#39;jquery-1.11.3&#39;,\n    jquery2 : &#39;jquery-2.1.4&#39;\n}\n</code></pre><p>ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸ºæˆ‘ä»¬åªèƒ½ç”¨ jquery è€Œä¸èƒ½ç”¨ jquery1 æˆ– jquery2ï¼Œé‚£éš¾é“æˆ‘ä»¬è¿™æ ·é…ç½®å—ï¼Ÿå¦‚ä¸‹ï¼š</p>\n<pre><code>paths : {\n    jquery : &#39;jquery-1.11.3&#39;,\n    jquery : &#39;jquery-2.1.4&#39;\n}\n</code></pre><p>ç®€ç›´å°±æ˜¯ç¬‘è¯ï¼Œè¿™æ ·ç¬¬äºŒä¸ªjqueryå±æ€§ä¼šè¦†ç›–ç¬¬ä¸€ä¸ªjqueryå±æ€§ï¼Œé‚£æ€ä¹ˆåŠï¼Ÿè¿™å°±æ¶‰åŠrequirejsçš„å¦ä¸€ä¸ªé…ç½®äº†ï¼Œmapé…ç½®é¡¹ï¼Œmapé…ç½®é¡¹çš„ä½œç”¨æ˜¯ï¼Œåœ¨ä¸åŒçš„æ¨¡å—ä¸­ï¼Œå³jsæ–‡ä»¶ä¸­ï¼Œä¾èµ–ç›¸åŒçš„æ¨¡å—åï¼Œç¼ºåŠ è½½ä¸åŒçš„æ¨¡å—ã€‚</p>\n<p>æˆ‘ä»¬å…ˆåœ¨config.jsä¸­å¢åŠ mapé…ç½®å¦‚ä¸‹ï¼š</p>\n<pre><code>requirejs.config({\n    baseUrl : &#39;./js&#39;,\n    paths : {\n        jquery : &#39;jquery-1.11.3&#39;\n    },\n\n    shim : {\n        c : {\n            init : function(){\n                return {\n                    aaa : show,\n                    bbb : hide\n                }\n            }\n        }\n    },\n\n    map : {\n        &#39;a&#39; : {\n            jquery : &#39;jquery-1.11.3&#39;\n        },\n\n        &#39;b&#39; : {\n            jquery : &#39;jquery-2.1.4&#39;\n        }\n    }\n});\n</code></pre><p>æˆ‘ä»¬åœ¨mapä¸­å¯ä»¥å¯¹æ¯ä¸€ä¸ªæ¨¡å—è¿›è¡Œé…ç½®ï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬é…ç½®äº†å½“åœ¨ a æ¨¡å—ä¸­ä¾èµ– â€˜jqueryâ€™ æ—¶ï¼Œæˆ‘ä»¬åŠ è½½çš„æ˜¯ 1.11.3 ç‰ˆæœ¬ï¼Œå½“æˆ‘ä»¬åœ¨ b æ¨¡å—ä¸­ä¾èµ– â€˜jqueryâ€™ æ—¶ï¼Œæˆ‘ä»¬åŠ è½½çš„æ˜¯ 2.1.4 ç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥å°è¯•ä¸€ä¸‹ï¼Œåˆ†åˆ«ä¿®æ”¹a.jså’Œb.jsè¿™ä¸¤ä¸ªæ¨¡å—ï¼Œè®©ä»–ä»¬éƒ½å»ä¾èµ–jqueryï¼Œç„¶ååˆ†åˆ«è¿”å›æ‰€ä¾èµ–jqueryçš„ç‰ˆæœ¬ï¼Œå¦‚ä¸‹ï¼š</p>\n<p>a.js</p>\n<pre><code>define([&#39;jquery&#39;], function(jquery){\n    var a = {\n        content : $().jquery\n    }\n\n    return a;\n});\n</code></pre><p>b.js</p>\n<pre><code>define([&#39;jquery&#39;], function(jquery){\n    var b = {\n        content : $().jquery\n    }\n\n    return b;\n\n});\n</code></pre><p>ç„¶åæˆ‘ä»¬åœ¨config.jsä¸­æ‰“å°æ¨¡å—aå’Œbï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>require([&#39;a&#39;, &#39;b&#39;], function(A, B){\n    console.log(&#39;æ¨¡å—aå¼•ç”¨çš„jQueryç‰ˆæœ¬æ˜¯&#39; + A.content);\n    console.log(&#39;æ¨¡å—bå¼•ç”¨çš„jQueryç‰ˆæœ¬æ˜¯&#39; + B.content);\n});\n</code></pre><p>åˆ·æ–°æµè§ˆå™¨ï¼Œæˆ‘ä»¬çœ‹åˆ°å¦‚ä¸‹ï¼Œçš„ç¡®åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ä¾èµ–äº†ä¸åŒç‰ˆæœ¬çš„jQueryï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2015111416.pic.jpg\" alt=\"ä¸åŒæ–‡ä»¶ä¸­ä¾èµ–äº†ä¸åŒç‰ˆæœ¬çš„jQuery\"></p>\n<p>ä½†æ˜¯æœ‰ä¸€ç‚¹è¯·è¯»è€…çœ‹æ¸…æ¥šï¼Œåœ¨a.jså’Œb.jsä¸­æˆ‘éƒ½ä¾èµ–äº†jqueryï¼Œåœ¨å½¢å¼å‚æ•°ä¸­æˆ‘ä½¿ç”¨çš„æ˜¯jqueryï¼Œä½†æ˜¯åœ¨ä¸‹é¢æˆ‘ç”¨åˆ°çš„å´æ˜¯(ç¾å…ƒç¬¦å·)ï¼Œå› ä¸ºç¬”è€…åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå½¢å¼å‚æ•°ä¹Ÿå†™æˆ(ç¾å…ƒç¬¦å·)ï¼Œé‚£ä¹ˆä½¿ç”¨(ç¾å…ƒç¬¦å·)å‚æ•°æ‰“å°å‡ºæ¥çš„å§‹ç»ˆéƒ½æ˜¯undefinedï¼Œä½†æ˜¯ç»è¿‡åˆ†æçš„ç¡®æ­£å¸¸å¯¼å…¥æ¨¡å—å¹¶ä¸”æ²¡æœ‰æŠ¥é”™ï¼Œæˆ‘ä¸çŸ¥é“è¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Œæˆ–è€…requirejsçš„BUGï¼Œå¦‚æœè¯»è€…æœ‰çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› çš„æ¬¢è¿åœ¨ä¸‹é¢è¯„è®ºæŒ‡é’ˆï¼Œå…±åŒè¿›æ­¥ã€‚</p>\n<p>è¿™æ ·ï¼Œrequirejsä¸­ä¸€äº›å¿…å¤‡ä¸”ä¸æ˜“ç†è§£çš„é…ç½®ä»¥åŠä¸€äº›é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆå°±è®²è§£çš„å·®ä¸å¤šäº†ï¼Œå…¶å®requirejsä¸­çš„é…ç½®ä¸åªè¿™äº›ï¼Œè¯»è€…å¯ä»¥æŸ¥é˜…<a href=\"http://www.requirejs.cn/\" target=\"_blank\" rel=\"external\">å®˜æ–¹æ–‡æ¡£</a> æŸ¥çœ‹å…¶ä»–é…ç½®ï¼Œéƒ½æ¯”è¾ƒç®€å•ï¼ŒæŒæ¡ç¬”è€…è®²å¾—è¿™äº›åŸºæœ¬å¤Ÿç”¨äº†ã€‚</p>\n<p>ä¸‹ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬å°±æ¥è®²ä¸€è®²å¦‚ä½•ä¼˜åŒ–é¡¹ç›®çš„äº‹ï¼ŒåŒ…æ‹¬ä½¿ç”¨rjsé…åˆgulpæ„å»ºå·¥å…·ç­‰ï¼Œå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå°±çœ‹çœ‹æˆ‘çš„è¯è”ç½‘ç¥ˆç¥·æ€ç»´çš„è¿ç”¨å§ï¼Œå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511122.pic.jpg\" alt=\"æ”¯ä»˜å®äºŒç»´ç \"></p>"},{"title":"aæ ‡ç­¾çš„hrefå±æ€§ä¸clickäº‹ä»¶çš„çƒ¦æ¼","date":"2015-11-26T13:48:05.000Z","_content":"\n> æœ€è¿‘å…¬å¸åšé¡¹ç›®ï¼ŒHybrid Appï¼Œæˆ‘è´Ÿè´£é¦–é¡µH5çš„å¼€å‘å·¥ä½œï¼Œé¦–é¡µæ˜¯ä¸€ä¸ªå¸¸è§„appçš„é¦–é¡µï¼Œé¡¶éƒ¨æ˜¯è½®æ’­å›¾ï¼Œç„¶åæ˜¯ä¸‰ä¸ªæŒ‰é’®ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨æ˜¯aæ ‡ç­¾ï¼Œç‚¹å‡»aæ ‡ç­¾ä¼šè·³è½¬ï¼Œç„¶è€Œè®©æˆ‘é•¿äº†å§¿åŠ¿ã€‚ã€‚ã€‚\n\n<!-- more -->\n\né¦–å…ˆæ¥çœ‹ä¸€å¼ å›¾ï¼Œæ˜¯æˆ‘ä»¬ç›®å‰å¼€å‘çš„appé¦–é¡µï¼š\n\n![appé¦–é¡µï¼Œå¯ç‚¹å‡»çš„åˆ—è¡¨å…ƒç´ ](http://7xlolm.com1.z0.glb.clouddn.com/201511271.pic.jpg)\n\nçº¢è‰²åŒºåŸŸå°±æ˜¯å¯ç‚¹å‡»çš„åˆ—è¡¨å…ƒç´ ï¼Œå½“ç‚¹å‡»çš„æ—¶å€™ï¼Œä¼šé€šè¿‡aæ ‡ç­¾çš„hrefå†…çš„è¿æ¥è¿›è¡Œè·³è½¬ï¼ˆhrefå±æ€§å†…çš„è¿æ¥ä¸æ˜¯httpåè®®ï¼Œæ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„åè®®ï¼Œnativeç«¯é€šè¿‡æˆªè·åè®®å®ç°nativeè·³è½¬ï¼‰ï¼Œä½†æ˜¯å‘ç°å¾ˆè¿Ÿé’ï¼Œå³ç‚¹å‡»ä¹‹åä¼šæœ‰ä¸€ç‚¹å»¶è¿Ÿæ‰ä¼šæ‰§è¡Œè·³è½¬ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”å°±æ˜¯clickäº‹ä»¶å»¶è¿Ÿ300æ¯«ç§’çš„åŸå› ï¼Œä½†æ˜¯å½“æ—¶è‡ªå·±æ¯”è¾ƒlowï¼Œè§‰å¾—è¿™æ˜¯ä¸€ä¸ªaæ ‡ç­¾ï¼Œåªæ˜¯ç®€å•çš„åŠ ä¸€ä¸ªhrefå±æ€§ï¼Œä»–å¾—è·³è½¬æˆ‘ä»¬æ€ä¹ˆå»æ§åˆ¶äº†ï¼Œè€Œä¸”è¿™å’Œclickè²Œä¼¼æ²¡ä»€ä¹ˆå…³ç³»å§ï¼Œæ‰€ä»¥ä¸€ç›´è¿™ä¹ˆæƒ³å½“ç„¶ç€ã€‚\n\né—®é¢˜çš„è½¬æœºå‡ºç°åœ¨åˆ—è¡¨é¡µé¢ï¼Œåˆ—è¡¨é¡µé¢çš„DOMç»“æ„å’Œé¦–é¡µä¸­çš„åˆ—è¡¨DOMç»“æ„å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯åˆ—è¡¨é¡µé¢ç‚¹å‡»è·³è½¬çš„ååº”é€Ÿåº¦ç›¸å½“çš„å¿«ï¼Œè¿™è®©æˆ‘ä»¬æ›´åŠ ä¸è§£ï¼Œåæ¥é“äº†å¿ƒçš„è§‰å¾—è¦å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶åˆ°åº•å“ªé‡Œä¸ä¸€æ ·ï¼ˆç›¸å½“è´¹åŠ›ï¼‰ï¼Œæœ€ç»ˆï¼Œå‘ç°åˆ—è¡¨é¡µé¢åº”ç”¨äº†fastclickæ¨¡å—ï¼Œä»…æ­¤åŒºåˆ«ï¼Œäºæ˜¯ä¹‹å‰çš„å£°éŸ³åˆå›è¡äºè€³é™…ï¼šâ€œéš¾é“aæ ‡ç­¾çš„hrefå±æ€§åœ¨è·³è½¬çš„æ—¶å€™ä¸clickäº‹ä»¶æœ‰å…³ï¼Ÿâ€ï¼Œç»è¿‡éªŒè¯çš„ç¡®å¦‚æ­¤ï¼š\n\n## å½“ç‚¹å‡»æµè§ˆå™¨aæ ‡ç­¾çš„æ—¶å€™ï¼Œæµè§ˆå™¨çš„é»˜è®¤æœºåˆ¶å¦‚ä¸‹ï¼š ##\n\n1ã€è§¦å‘açš„clickäº‹ä»¶\n2ã€è¯»å–hrefå±æ€§çš„å€¼\n3ã€å¦‚æœæ˜¯URIåˆ™è·³è½¬\n4ã€å¦‚æœæ˜¯javascriptä»£ç åˆ™æ‰§è¡Œè¯¥ä»£ç \n\nä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥åšä¸€ä¸ªå®éªŒï¼š\n\næˆ‘ä»¬åœ¨ä¸€ä¸ªhtmlé¡µé¢ä¸­å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š\n\n```\n<a href=\"http://www.baidu.com\" id=\"a\">è¿™æ˜¯ä¸€ä¸ªaæ ‡ç­¾</a>\n```\n\nä»£ç åªæœ‰ä¸€ä¸ªaæ ‡ç­¾ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨jsåˆ†åˆ«ç»™aæ ‡ç­¾è§¦å‘ touchstartã€touchendã€mousedownã€mouseupã€click äº‹ä»¶ï¼Œæµ‹è¯•ä¸€ä¸‹èƒ½å¤Ÿæ˜¯aæ ‡ç­¾è·³è½¬çš„éƒ½æœ‰å“ªäº›äº‹ä»¶ï¼Œæˆ‘ä»¬çš„jsä»£ç å¦‚ä¸‹ï¼š\n\n```\n// äº‹ä»¶æ•°ç»„\nvar events = 'touchstart touchend mousedown mouseup click'.split(' ');\nvar n = 0;\n// å¼€å¯å®šæ—¶å™¨ï¼Œæ¯ä¸¤ç§’é’Ÿä¸ºaæ ‡ç­¾è§¦å‘ç›¸åº”äº‹ä»¶\nvar timer = setInterval(function(){\n    var event = new Event(events[n]);\n    document.getElementById('a').dispatchEvent(event); // è§¦å‘äº‹ä»¶ã€‚\n    console.log(event.type);\n    n++;\n    if (n == events.length) {\n        clearInterval(timer);\n    }\n},2000);\n```\n\næµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š\n\n![æ¯éš”ä¸¤ç§’è§¦å‘ä¸€æ¬¡äº‹ä»¶ï¼Œåªæœ‰clickäº‹ä»¶è§¦å‘æ—¶ï¼Œaæ ‡ç­¾æ‰ä¼šè·³è½¬](http://7xlolm.com1.z0.glb.clouddn.com/20151127a.gif)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ§åˆ¶å°ä¸­æ¯éš”ä¸¤ç§’é’Ÿå°±ä¼šæ‰“å°å‡ºå½“å‰aæ ‡ç­¾è§¦å‘çš„äº‹ä»¶ï¼Œå½“æœ€åä¸€ä¸ªclickäº‹ä»¶è§¦å‘æ—¶ï¼Œaæ ‡ç­¾æ‰§è¡Œäº†è·³è½¬ï¼Œè·³è½¬åˆ°äº†ç™¾åº¦ï¼Œè¿™ä¹Ÿå°±è¯´æ˜ï¼Œaæ ‡ç­¾çš„è·³è½¬åªæœ‰clickäº‹ä»¶èƒ½å¤Ÿè§¦å‘ï¼Œæ‰€ä»¥å½“ç‚¹å‡»aæ ‡ç­¾ï¼Œå‘å‡ºè¯·æ±‚çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šå…ˆå»è§¦å‘açš„clickäº‹ä»¶ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œclickäº‹ä»¶åœ¨ç§»åŠ¨ç«¯ä¼šæœ‰300æ¯«ç§’çš„å»¶è¿Ÿï¼Œæ‰€ä»¥è¿™å°±æ˜¯é¦–é¡µä¸­åˆ—è¡¨ç‚¹å‡»è¿Ÿé’çš„åŸå› ï¼Œè€Œæˆ‘ä¹‹å‰ä¸€ç›´è®¤ä¸ºçš„æ˜¯ï¼Œaæ ‡ç­¾çš„è·³è½¬ä¸clickäº‹ä»¶æ— å…³ã€‚æˆ‘æ€ä¹ˆè¿™ä¹ˆlowå‘¢ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ\n\næ‰€ä»¥æœ€åï¼šå¤§å®¶ä»¥åå¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ—¶å€™ï¼Œä¸è¦è§‰å¾—ä½ æ²¡æœ‰æ˜¾ç¤ºçš„å»ç»™æŸä¸ªå…ƒç´ ç»‘å®šclickäº‹ä»¶å°±ä¸ä¼šå­˜åœ¨300æ¯«ç§’å»¶è¿Ÿçš„é—®é¢˜ï¼Œå®é™…ä¸Šaæ ‡ç­¾çš„è·³è½¬ä¹Ÿä¼šè§¦å‘clickäº‹ä»¶ï¼Œå¦‚æœä¸åŠ å¤„ç†çš„è¯ï¼Œä¹Ÿä¼šæœ‰300æ¯«ç§’å»¶è¿Ÿçš„é—®é¢˜ï¼Œè¿™å¯¹äºç”¨æˆ·ä½“éªŒæ˜¯æå…¶ä¸å¥½çš„ã€‚åœ¨è¿™ä¸ªåˆ†äº«ç»™å¤§å®¶ï¼Œè¿˜æ˜¯é‚£å¥è€è¯ï¼šå…±å‹‰ã€‚\n\n\n\n","source":"_posts/2015/11/26/aæ ‡ç­¾çš„hrefå±æ€§ä¸clickäº‹ä»¶çš„çƒ¦æ¼.md","raw":"title: aæ ‡ç­¾çš„hrefå±æ€§ä¸clickäº‹ä»¶çš„çƒ¦æ¼\ndate: 2015-11-26 21:48:05\ncategories:\n- WebFrontEnd\ntags:\n- html\n- js\n---\n\n> æœ€è¿‘å…¬å¸åšé¡¹ç›®ï¼ŒHybrid Appï¼Œæˆ‘è´Ÿè´£é¦–é¡µH5çš„å¼€å‘å·¥ä½œï¼Œé¦–é¡µæ˜¯ä¸€ä¸ªå¸¸è§„appçš„é¦–é¡µï¼Œé¡¶éƒ¨æ˜¯è½®æ’­å›¾ï¼Œç„¶åæ˜¯ä¸‰ä¸ªæŒ‰é’®ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨æ˜¯aæ ‡ç­¾ï¼Œç‚¹å‡»aæ ‡ç­¾ä¼šè·³è½¬ï¼Œç„¶è€Œè®©æˆ‘é•¿äº†å§¿åŠ¿ã€‚ã€‚ã€‚\n\n<!-- more -->\n\né¦–å…ˆæ¥çœ‹ä¸€å¼ å›¾ï¼Œæ˜¯æˆ‘ä»¬ç›®å‰å¼€å‘çš„appé¦–é¡µï¼š\n\n![appé¦–é¡µï¼Œå¯ç‚¹å‡»çš„åˆ—è¡¨å…ƒç´ ](http://7xlolm.com1.z0.glb.clouddn.com/201511271.pic.jpg)\n\nçº¢è‰²åŒºåŸŸå°±æ˜¯å¯ç‚¹å‡»çš„åˆ—è¡¨å…ƒç´ ï¼Œå½“ç‚¹å‡»çš„æ—¶å€™ï¼Œä¼šé€šè¿‡aæ ‡ç­¾çš„hrefå†…çš„è¿æ¥è¿›è¡Œè·³è½¬ï¼ˆhrefå±æ€§å†…çš„è¿æ¥ä¸æ˜¯httpåè®®ï¼Œæ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„åè®®ï¼Œnativeç«¯é€šè¿‡æˆªè·åè®®å®ç°nativeè·³è½¬ï¼‰ï¼Œä½†æ˜¯å‘ç°å¾ˆè¿Ÿé’ï¼Œå³ç‚¹å‡»ä¹‹åä¼šæœ‰ä¸€ç‚¹å»¶è¿Ÿæ‰ä¼šæ‰§è¡Œè·³è½¬ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”å°±æ˜¯clickäº‹ä»¶å»¶è¿Ÿ300æ¯«ç§’çš„åŸå› ï¼Œä½†æ˜¯å½“æ—¶è‡ªå·±æ¯”è¾ƒlowï¼Œè§‰å¾—è¿™æ˜¯ä¸€ä¸ªaæ ‡ç­¾ï¼Œåªæ˜¯ç®€å•çš„åŠ ä¸€ä¸ªhrefå±æ€§ï¼Œä»–å¾—è·³è½¬æˆ‘ä»¬æ€ä¹ˆå»æ§åˆ¶äº†ï¼Œè€Œä¸”è¿™å’Œclickè²Œä¼¼æ²¡ä»€ä¹ˆå…³ç³»å§ï¼Œæ‰€ä»¥ä¸€ç›´è¿™ä¹ˆæƒ³å½“ç„¶ç€ã€‚\n\né—®é¢˜çš„è½¬æœºå‡ºç°åœ¨åˆ—è¡¨é¡µé¢ï¼Œåˆ—è¡¨é¡µé¢çš„DOMç»“æ„å’Œé¦–é¡µä¸­çš„åˆ—è¡¨DOMç»“æ„å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯åˆ—è¡¨é¡µé¢ç‚¹å‡»è·³è½¬çš„ååº”é€Ÿåº¦ç›¸å½“çš„å¿«ï¼Œè¿™è®©æˆ‘ä»¬æ›´åŠ ä¸è§£ï¼Œåæ¥é“äº†å¿ƒçš„è§‰å¾—è¦å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶åˆ°åº•å“ªé‡Œä¸ä¸€æ ·ï¼ˆç›¸å½“è´¹åŠ›ï¼‰ï¼Œæœ€ç»ˆï¼Œå‘ç°åˆ—è¡¨é¡µé¢åº”ç”¨äº†fastclickæ¨¡å—ï¼Œä»…æ­¤åŒºåˆ«ï¼Œäºæ˜¯ä¹‹å‰çš„å£°éŸ³åˆå›è¡äºè€³é™…ï¼šâ€œéš¾é“aæ ‡ç­¾çš„hrefå±æ€§åœ¨è·³è½¬çš„æ—¶å€™ä¸clickäº‹ä»¶æœ‰å…³ï¼Ÿâ€ï¼Œç»è¿‡éªŒè¯çš„ç¡®å¦‚æ­¤ï¼š\n\n## å½“ç‚¹å‡»æµè§ˆå™¨aæ ‡ç­¾çš„æ—¶å€™ï¼Œæµè§ˆå™¨çš„é»˜è®¤æœºåˆ¶å¦‚ä¸‹ï¼š ##\n\n1ã€è§¦å‘açš„clickäº‹ä»¶\n2ã€è¯»å–hrefå±æ€§çš„å€¼\n3ã€å¦‚æœæ˜¯URIåˆ™è·³è½¬\n4ã€å¦‚æœæ˜¯javascriptä»£ç åˆ™æ‰§è¡Œè¯¥ä»£ç \n\nä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥åšä¸€ä¸ªå®éªŒï¼š\n\næˆ‘ä»¬åœ¨ä¸€ä¸ªhtmlé¡µé¢ä¸­å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š\n\n```\n<a href=\"http://www.baidu.com\" id=\"a\">è¿™æ˜¯ä¸€ä¸ªaæ ‡ç­¾</a>\n```\n\nä»£ç åªæœ‰ä¸€ä¸ªaæ ‡ç­¾ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨jsåˆ†åˆ«ç»™aæ ‡ç­¾è§¦å‘ touchstartã€touchendã€mousedownã€mouseupã€click äº‹ä»¶ï¼Œæµ‹è¯•ä¸€ä¸‹èƒ½å¤Ÿæ˜¯aæ ‡ç­¾è·³è½¬çš„éƒ½æœ‰å“ªäº›äº‹ä»¶ï¼Œæˆ‘ä»¬çš„jsä»£ç å¦‚ä¸‹ï¼š\n\n```\n// äº‹ä»¶æ•°ç»„\nvar events = 'touchstart touchend mousedown mouseup click'.split(' ');\nvar n = 0;\n// å¼€å¯å®šæ—¶å™¨ï¼Œæ¯ä¸¤ç§’é’Ÿä¸ºaæ ‡ç­¾è§¦å‘ç›¸åº”äº‹ä»¶\nvar timer = setInterval(function(){\n    var event = new Event(events[n]);\n    document.getElementById('a').dispatchEvent(event); // è§¦å‘äº‹ä»¶ã€‚\n    console.log(event.type);\n    n++;\n    if (n == events.length) {\n        clearInterval(timer);\n    }\n},2000);\n```\n\næµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š\n\n![æ¯éš”ä¸¤ç§’è§¦å‘ä¸€æ¬¡äº‹ä»¶ï¼Œåªæœ‰clickäº‹ä»¶è§¦å‘æ—¶ï¼Œaæ ‡ç­¾æ‰ä¼šè·³è½¬](http://7xlolm.com1.z0.glb.clouddn.com/20151127a.gif)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ§åˆ¶å°ä¸­æ¯éš”ä¸¤ç§’é’Ÿå°±ä¼šæ‰“å°å‡ºå½“å‰aæ ‡ç­¾è§¦å‘çš„äº‹ä»¶ï¼Œå½“æœ€åä¸€ä¸ªclickäº‹ä»¶è§¦å‘æ—¶ï¼Œaæ ‡ç­¾æ‰§è¡Œäº†è·³è½¬ï¼Œè·³è½¬åˆ°äº†ç™¾åº¦ï¼Œè¿™ä¹Ÿå°±è¯´æ˜ï¼Œaæ ‡ç­¾çš„è·³è½¬åªæœ‰clickäº‹ä»¶èƒ½å¤Ÿè§¦å‘ï¼Œæ‰€ä»¥å½“ç‚¹å‡»aæ ‡ç­¾ï¼Œå‘å‡ºè¯·æ±‚çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šå…ˆå»è§¦å‘açš„clickäº‹ä»¶ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œclickäº‹ä»¶åœ¨ç§»åŠ¨ç«¯ä¼šæœ‰300æ¯«ç§’çš„å»¶è¿Ÿï¼Œæ‰€ä»¥è¿™å°±æ˜¯é¦–é¡µä¸­åˆ—è¡¨ç‚¹å‡»è¿Ÿé’çš„åŸå› ï¼Œè€Œæˆ‘ä¹‹å‰ä¸€ç›´è®¤ä¸ºçš„æ˜¯ï¼Œaæ ‡ç­¾çš„è·³è½¬ä¸clickäº‹ä»¶æ— å…³ã€‚æˆ‘æ€ä¹ˆè¿™ä¹ˆlowå‘¢ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ\n\næ‰€ä»¥æœ€åï¼šå¤§å®¶ä»¥åå¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ—¶å€™ï¼Œä¸è¦è§‰å¾—ä½ æ²¡æœ‰æ˜¾ç¤ºçš„å»ç»™æŸä¸ªå…ƒç´ ç»‘å®šclickäº‹ä»¶å°±ä¸ä¼šå­˜åœ¨300æ¯«ç§’å»¶è¿Ÿçš„é—®é¢˜ï¼Œå®é™…ä¸Šaæ ‡ç­¾çš„è·³è½¬ä¹Ÿä¼šè§¦å‘clickäº‹ä»¶ï¼Œå¦‚æœä¸åŠ å¤„ç†çš„è¯ï¼Œä¹Ÿä¼šæœ‰300æ¯«ç§’å»¶è¿Ÿçš„é—®é¢˜ï¼Œè¿™å¯¹äºç”¨æˆ·ä½“éªŒæ˜¯æå…¶ä¸å¥½çš„ã€‚åœ¨è¿™ä¸ªåˆ†äº«ç»™å¤§å®¶ï¼Œè¿˜æ˜¯é‚£å¥è€è¯ï¼šå…±å‹‰ã€‚\n\n\n\n","slug":"aæ ‡ç­¾çš„hrefå±æ€§ä¸clickäº‹ä»¶çš„çƒ¦æ¼","published":1,"updated":"2015-11-27T03:09:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx51c000d47fy58fg3um5","content":"<blockquote>\n<p>æœ€è¿‘å…¬å¸åšé¡¹ç›®ï¼ŒHybrid Appï¼Œæˆ‘è´Ÿè´£é¦–é¡µH5çš„å¼€å‘å·¥ä½œï¼Œé¦–é¡µæ˜¯ä¸€ä¸ªå¸¸è§„appçš„é¦–é¡µï¼Œé¡¶éƒ¨æ˜¯è½®æ’­å›¾ï¼Œç„¶åæ˜¯ä¸‰ä¸ªæŒ‰é’®ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨æ˜¯aæ ‡ç­¾ï¼Œç‚¹å‡»aæ ‡ç­¾ä¼šè·³è½¬ï¼Œç„¶è€Œè®©æˆ‘é•¿äº†å§¿åŠ¿ã€‚ã€‚ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n<p>é¦–å…ˆæ¥çœ‹ä¸€å¼ å›¾ï¼Œæ˜¯æˆ‘ä»¬ç›®å‰å¼€å‘çš„appé¦–é¡µï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511271.pic.jpg\" alt=\"appé¦–é¡µï¼Œå¯ç‚¹å‡»çš„åˆ—è¡¨å…ƒç´ \"></p>\n<p>çº¢è‰²åŒºåŸŸå°±æ˜¯å¯ç‚¹å‡»çš„åˆ—è¡¨å…ƒç´ ï¼Œå½“ç‚¹å‡»çš„æ—¶å€™ï¼Œä¼šé€šè¿‡aæ ‡ç­¾çš„hrefå†…çš„è¿æ¥è¿›è¡Œè·³è½¬ï¼ˆhrefå±æ€§å†…çš„è¿æ¥ä¸æ˜¯httpåè®®ï¼Œæ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„åè®®ï¼Œnativeç«¯é€šè¿‡æˆªè·åè®®å®ç°nativeè·³è½¬ï¼‰ï¼Œä½†æ˜¯å‘ç°å¾ˆè¿Ÿé’ï¼Œå³ç‚¹å‡»ä¹‹åä¼šæœ‰ä¸€ç‚¹å»¶è¿Ÿæ‰ä¼šæ‰§è¡Œè·³è½¬ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”å°±æ˜¯clickäº‹ä»¶å»¶è¿Ÿ300æ¯«ç§’çš„åŸå› ï¼Œä½†æ˜¯å½“æ—¶è‡ªå·±æ¯”è¾ƒlowï¼Œè§‰å¾—è¿™æ˜¯ä¸€ä¸ªaæ ‡ç­¾ï¼Œåªæ˜¯ç®€å•çš„åŠ ä¸€ä¸ªhrefå±æ€§ï¼Œä»–å¾—è·³è½¬æˆ‘ä»¬æ€ä¹ˆå»æ§åˆ¶äº†ï¼Œè€Œä¸”è¿™å’Œclickè²Œä¼¼æ²¡ä»€ä¹ˆå…³ç³»å§ï¼Œæ‰€ä»¥ä¸€ç›´è¿™ä¹ˆæƒ³å½“ç„¶ç€ã€‚</p>\n<p>é—®é¢˜çš„è½¬æœºå‡ºç°åœ¨åˆ—è¡¨é¡µé¢ï¼Œåˆ—è¡¨é¡µé¢çš„DOMç»“æ„å’Œé¦–é¡µä¸­çš„åˆ—è¡¨DOMç»“æ„å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯åˆ—è¡¨é¡µé¢ç‚¹å‡»è·³è½¬çš„ååº”é€Ÿåº¦ç›¸å½“çš„å¿«ï¼Œè¿™è®©æˆ‘ä»¬æ›´åŠ ä¸è§£ï¼Œåæ¥é“äº†å¿ƒçš„è§‰å¾—è¦å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶åˆ°åº•å“ªé‡Œä¸ä¸€æ ·ï¼ˆç›¸å½“è´¹åŠ›ï¼‰ï¼Œæœ€ç»ˆï¼Œå‘ç°åˆ—è¡¨é¡µé¢åº”ç”¨äº†fastclickæ¨¡å—ï¼Œä»…æ­¤åŒºåˆ«ï¼Œäºæ˜¯ä¹‹å‰çš„å£°éŸ³åˆå›è¡äºè€³é™…ï¼šâ€œéš¾é“aæ ‡ç­¾çš„hrefå±æ€§åœ¨è·³è½¬çš„æ—¶å€™ä¸clickäº‹ä»¶æœ‰å…³ï¼Ÿâ€ï¼Œç»è¿‡éªŒè¯çš„ç¡®å¦‚æ­¤ï¼š</p>\n<h2 id=\"å½“ç‚¹å‡»æµè§ˆå™¨aæ ‡ç­¾çš„æ—¶å€™ï¼Œæµè§ˆå™¨çš„é»˜è®¤æœºåˆ¶å¦‚ä¸‹ï¼š\"><a href=\"#å½“ç‚¹å‡»æµè§ˆå™¨aæ ‡ç­¾çš„æ—¶å€™ï¼Œæµè§ˆå™¨çš„é»˜è®¤æœºåˆ¶å¦‚ä¸‹ï¼š\" class=\"headerlink\" title=\"å½“ç‚¹å‡»æµè§ˆå™¨aæ ‡ç­¾çš„æ—¶å€™ï¼Œæµè§ˆå™¨çš„é»˜è®¤æœºåˆ¶å¦‚ä¸‹ï¼š\"></a>å½“ç‚¹å‡»æµè§ˆå™¨aæ ‡ç­¾çš„æ—¶å€™ï¼Œæµè§ˆå™¨çš„é»˜è®¤æœºåˆ¶å¦‚ä¸‹ï¼š</h2><p>1ã€è§¦å‘açš„clickäº‹ä»¶<br>2ã€è¯»å–hrefå±æ€§çš„å€¼<br>3ã€å¦‚æœæ˜¯URIåˆ™è·³è½¬<br>4ã€å¦‚æœæ˜¯javascriptä»£ç åˆ™æ‰§è¡Œè¯¥ä»£ç </p>\n<p>ä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥åšä¸€ä¸ªå®éªŒï¼š</p>\n<p>æˆ‘ä»¬åœ¨ä¸€ä¸ªhtmlé¡µé¢ä¸­å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>&lt;a href=&quot;http://www.baidu.com&quot; id=&quot;a&quot;&gt;è¿™æ˜¯ä¸€ä¸ªaæ ‡ç­¾&lt;/a&gt;\n</code></pre><p>ä»£ç åªæœ‰ä¸€ä¸ªaæ ‡ç­¾ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨jsåˆ†åˆ«ç»™aæ ‡ç­¾è§¦å‘ touchstartã€touchendã€mousedownã€mouseupã€click äº‹ä»¶ï¼Œæµ‹è¯•ä¸€ä¸‹èƒ½å¤Ÿæ˜¯aæ ‡ç­¾è·³è½¬çš„éƒ½æœ‰å“ªäº›äº‹ä»¶ï¼Œæˆ‘ä»¬çš„jsä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code>// äº‹ä»¶æ•°ç»„\nvar events = &#39;touchstart touchend mousedown mouseup click&#39;.split(&#39; &#39;);\nvar n = 0;\n// å¼€å¯å®šæ—¶å™¨ï¼Œæ¯ä¸¤ç§’é’Ÿä¸ºaæ ‡ç­¾è§¦å‘ç›¸åº”äº‹ä»¶\nvar timer = setInterval(function(){\n    var event = new Event(events[n]);\n    document.getElementById(&#39;a&#39;).dispatchEvent(event); // è§¦å‘äº‹ä»¶ã€‚\n    console.log(event.type);\n    n++;\n    if (n == events.length) {\n        clearInterval(timer);\n    }\n},2000);\n</code></pre><p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20151127a.gif\" alt=\"æ¯éš”ä¸¤ç§’è§¦å‘ä¸€æ¬¡äº‹ä»¶ï¼Œåªæœ‰clickäº‹ä»¶è§¦å‘æ—¶ï¼Œaæ ‡ç­¾æ‰ä¼šè·³è½¬\"></p>\n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ§åˆ¶å°ä¸­æ¯éš”ä¸¤ç§’é’Ÿå°±ä¼šæ‰“å°å‡ºå½“å‰aæ ‡ç­¾è§¦å‘çš„äº‹ä»¶ï¼Œå½“æœ€åä¸€ä¸ªclickäº‹ä»¶è§¦å‘æ—¶ï¼Œaæ ‡ç­¾æ‰§è¡Œäº†è·³è½¬ï¼Œè·³è½¬åˆ°äº†ç™¾åº¦ï¼Œè¿™ä¹Ÿå°±è¯´æ˜ï¼Œaæ ‡ç­¾çš„è·³è½¬åªæœ‰clickäº‹ä»¶èƒ½å¤Ÿè§¦å‘ï¼Œæ‰€ä»¥å½“ç‚¹å‡»aæ ‡ç­¾ï¼Œå‘å‡ºè¯·æ±‚çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šå…ˆå»è§¦å‘açš„clickäº‹ä»¶ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œclickäº‹ä»¶åœ¨ç§»åŠ¨ç«¯ä¼šæœ‰300æ¯«ç§’çš„å»¶è¿Ÿï¼Œæ‰€ä»¥è¿™å°±æ˜¯é¦–é¡µä¸­åˆ—è¡¨ç‚¹å‡»è¿Ÿé’çš„åŸå› ï¼Œè€Œæˆ‘ä¹‹å‰ä¸€ç›´è®¤ä¸ºçš„æ˜¯ï¼Œaæ ‡ç­¾çš„è·³è½¬ä¸clickäº‹ä»¶æ— å…³ã€‚æˆ‘æ€ä¹ˆè¿™ä¹ˆlowå‘¢ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</p>\n<p>æ‰€ä»¥æœ€åï¼šå¤§å®¶ä»¥åå¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ—¶å€™ï¼Œä¸è¦è§‰å¾—ä½ æ²¡æœ‰æ˜¾ç¤ºçš„å»ç»™æŸä¸ªå…ƒç´ ç»‘å®šclickäº‹ä»¶å°±ä¸ä¼šå­˜åœ¨300æ¯«ç§’å»¶è¿Ÿçš„é—®é¢˜ï¼Œå®é™…ä¸Šaæ ‡ç­¾çš„è·³è½¬ä¹Ÿä¼šè§¦å‘clickäº‹ä»¶ï¼Œå¦‚æœä¸åŠ å¤„ç†çš„è¯ï¼Œä¹Ÿä¼šæœ‰300æ¯«ç§’å»¶è¿Ÿçš„é—®é¢˜ï¼Œè¿™å¯¹äºç”¨æˆ·ä½“éªŒæ˜¯æå…¶ä¸å¥½çš„ã€‚åœ¨è¿™ä¸ªåˆ†äº«ç»™å¤§å®¶ï¼Œè¿˜æ˜¯é‚£å¥è€è¯ï¼šå…±å‹‰ã€‚</p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>æœ€è¿‘å…¬å¸åšé¡¹ç›®ï¼ŒHybrid Appï¼Œæˆ‘è´Ÿè´£é¦–é¡µH5çš„å¼€å‘å·¥ä½œï¼Œé¦–é¡µæ˜¯ä¸€ä¸ªå¸¸è§„appçš„é¦–é¡µï¼Œé¡¶éƒ¨æ˜¯è½®æ’­å›¾ï¼Œç„¶åæ˜¯ä¸‰ä¸ªæŒ‰é’®ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨æ˜¯aæ ‡ç­¾ï¼Œç‚¹å‡»aæ ‡ç­¾ä¼šè·³è½¬ï¼Œç„¶è€Œè®©æˆ‘é•¿äº†å§¿åŠ¿ã€‚ã€‚ã€‚</p>\n</blockquote>","more":"<p>é¦–å…ˆæ¥çœ‹ä¸€å¼ å›¾ï¼Œæ˜¯æˆ‘ä»¬ç›®å‰å¼€å‘çš„appé¦–é¡µï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511271.pic.jpg\" alt=\"appé¦–é¡µï¼Œå¯ç‚¹å‡»çš„åˆ—è¡¨å…ƒç´ \"></p>\n<p>çº¢è‰²åŒºåŸŸå°±æ˜¯å¯ç‚¹å‡»çš„åˆ—è¡¨å…ƒç´ ï¼Œå½“ç‚¹å‡»çš„æ—¶å€™ï¼Œä¼šé€šè¿‡aæ ‡ç­¾çš„hrefå†…çš„è¿æ¥è¿›è¡Œè·³è½¬ï¼ˆhrefå±æ€§å†…çš„è¿æ¥ä¸æ˜¯httpåè®®ï¼Œæ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„åè®®ï¼Œnativeç«¯é€šè¿‡æˆªè·åè®®å®ç°nativeè·³è½¬ï¼‰ï¼Œä½†æ˜¯å‘ç°å¾ˆè¿Ÿé’ï¼Œå³ç‚¹å‡»ä¹‹åä¼šæœ‰ä¸€ç‚¹å»¶è¿Ÿæ‰ä¼šæ‰§è¡Œè·³è½¬ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”å°±æ˜¯clickäº‹ä»¶å»¶è¿Ÿ300æ¯«ç§’çš„åŸå› ï¼Œä½†æ˜¯å½“æ—¶è‡ªå·±æ¯”è¾ƒlowï¼Œè§‰å¾—è¿™æ˜¯ä¸€ä¸ªaæ ‡ç­¾ï¼Œåªæ˜¯ç®€å•çš„åŠ ä¸€ä¸ªhrefå±æ€§ï¼Œä»–å¾—è·³è½¬æˆ‘ä»¬æ€ä¹ˆå»æ§åˆ¶äº†ï¼Œè€Œä¸”è¿™å’Œclickè²Œä¼¼æ²¡ä»€ä¹ˆå…³ç³»å§ï¼Œæ‰€ä»¥ä¸€ç›´è¿™ä¹ˆæƒ³å½“ç„¶ç€ã€‚</p>\n<p>é—®é¢˜çš„è½¬æœºå‡ºç°åœ¨åˆ—è¡¨é¡µé¢ï¼Œåˆ—è¡¨é¡µé¢çš„DOMç»“æ„å’Œé¦–é¡µä¸­çš„åˆ—è¡¨DOMç»“æ„å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯åˆ—è¡¨é¡µé¢ç‚¹å‡»è·³è½¬çš„ååº”é€Ÿåº¦ç›¸å½“çš„å¿«ï¼Œè¿™è®©æˆ‘ä»¬æ›´åŠ ä¸è§£ï¼Œåæ¥é“äº†å¿ƒçš„è§‰å¾—è¦å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶åˆ°åº•å“ªé‡Œä¸ä¸€æ ·ï¼ˆç›¸å½“è´¹åŠ›ï¼‰ï¼Œæœ€ç»ˆï¼Œå‘ç°åˆ—è¡¨é¡µé¢åº”ç”¨äº†fastclickæ¨¡å—ï¼Œä»…æ­¤åŒºåˆ«ï¼Œäºæ˜¯ä¹‹å‰çš„å£°éŸ³åˆå›è¡äºè€³é™…ï¼šâ€œéš¾é“aæ ‡ç­¾çš„hrefå±æ€§åœ¨è·³è½¬çš„æ—¶å€™ä¸clickäº‹ä»¶æœ‰å…³ï¼Ÿâ€ï¼Œç»è¿‡éªŒè¯çš„ç¡®å¦‚æ­¤ï¼š</p>\n<h2 id=\"å½“ç‚¹å‡»æµè§ˆå™¨aæ ‡ç­¾çš„æ—¶å€™ï¼Œæµè§ˆå™¨çš„é»˜è®¤æœºåˆ¶å¦‚ä¸‹ï¼š\"><a href=\"#å½“ç‚¹å‡»æµè§ˆå™¨aæ ‡ç­¾çš„æ—¶å€™ï¼Œæµè§ˆå™¨çš„é»˜è®¤æœºåˆ¶å¦‚ä¸‹ï¼š\" class=\"headerlink\" title=\"å½“ç‚¹å‡»æµè§ˆå™¨aæ ‡ç­¾çš„æ—¶å€™ï¼Œæµè§ˆå™¨çš„é»˜è®¤æœºåˆ¶å¦‚ä¸‹ï¼š\"></a>å½“ç‚¹å‡»æµè§ˆå™¨aæ ‡ç­¾çš„æ—¶å€™ï¼Œæµè§ˆå™¨çš„é»˜è®¤æœºåˆ¶å¦‚ä¸‹ï¼š</h2><p>1ã€è§¦å‘açš„clickäº‹ä»¶<br>2ã€è¯»å–hrefå±æ€§çš„å€¼<br>3ã€å¦‚æœæ˜¯URIåˆ™è·³è½¬<br>4ã€å¦‚æœæ˜¯javascriptä»£ç åˆ™æ‰§è¡Œè¯¥ä»£ç </p>\n<p>ä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥åšä¸€ä¸ªå®éªŒï¼š</p>\n<p>æˆ‘ä»¬åœ¨ä¸€ä¸ªhtmlé¡µé¢ä¸­å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>&lt;a href=&quot;http://www.baidu.com&quot; id=&quot;a&quot;&gt;è¿™æ˜¯ä¸€ä¸ªaæ ‡ç­¾&lt;/a&gt;\n</code></pre><p>ä»£ç åªæœ‰ä¸€ä¸ªaæ ‡ç­¾ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨jsåˆ†åˆ«ç»™aæ ‡ç­¾è§¦å‘ touchstartã€touchendã€mousedownã€mouseupã€click äº‹ä»¶ï¼Œæµ‹è¯•ä¸€ä¸‹èƒ½å¤Ÿæ˜¯aæ ‡ç­¾è·³è½¬çš„éƒ½æœ‰å“ªäº›äº‹ä»¶ï¼Œæˆ‘ä»¬çš„jsä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code>// äº‹ä»¶æ•°ç»„\nvar events = &#39;touchstart touchend mousedown mouseup click&#39;.split(&#39; &#39;);\nvar n = 0;\n// å¼€å¯å®šæ—¶å™¨ï¼Œæ¯ä¸¤ç§’é’Ÿä¸ºaæ ‡ç­¾è§¦å‘ç›¸åº”äº‹ä»¶\nvar timer = setInterval(function(){\n    var event = new Event(events[n]);\n    document.getElementById(&#39;a&#39;).dispatchEvent(event); // è§¦å‘äº‹ä»¶ã€‚\n    console.log(event.type);\n    n++;\n    if (n == events.length) {\n        clearInterval(timer);\n    }\n},2000);\n</code></pre><p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20151127a.gif\" alt=\"æ¯éš”ä¸¤ç§’è§¦å‘ä¸€æ¬¡äº‹ä»¶ï¼Œåªæœ‰clickäº‹ä»¶è§¦å‘æ—¶ï¼Œaæ ‡ç­¾æ‰ä¼šè·³è½¬\"></p>\n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ§åˆ¶å°ä¸­æ¯éš”ä¸¤ç§’é’Ÿå°±ä¼šæ‰“å°å‡ºå½“å‰aæ ‡ç­¾è§¦å‘çš„äº‹ä»¶ï¼Œå½“æœ€åä¸€ä¸ªclickäº‹ä»¶è§¦å‘æ—¶ï¼Œaæ ‡ç­¾æ‰§è¡Œäº†è·³è½¬ï¼Œè·³è½¬åˆ°äº†ç™¾åº¦ï¼Œè¿™ä¹Ÿå°±è¯´æ˜ï¼Œaæ ‡ç­¾çš„è·³è½¬åªæœ‰clickäº‹ä»¶èƒ½å¤Ÿè§¦å‘ï¼Œæ‰€ä»¥å½“ç‚¹å‡»aæ ‡ç­¾ï¼Œå‘å‡ºè¯·æ±‚çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šå…ˆå»è§¦å‘açš„clickäº‹ä»¶ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œclickäº‹ä»¶åœ¨ç§»åŠ¨ç«¯ä¼šæœ‰300æ¯«ç§’çš„å»¶è¿Ÿï¼Œæ‰€ä»¥è¿™å°±æ˜¯é¦–é¡µä¸­åˆ—è¡¨ç‚¹å‡»è¿Ÿé’çš„åŸå› ï¼Œè€Œæˆ‘ä¹‹å‰ä¸€ç›´è®¤ä¸ºçš„æ˜¯ï¼Œaæ ‡ç­¾çš„è·³è½¬ä¸clickäº‹ä»¶æ— å…³ã€‚æˆ‘æ€ä¹ˆè¿™ä¹ˆlowå‘¢ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</p>\n<p>æ‰€ä»¥æœ€åï¼šå¤§å®¶ä»¥åå¼€å‘ç§»åŠ¨ç«¯é¡µé¢çš„æ—¶å€™ï¼Œä¸è¦è§‰å¾—ä½ æ²¡æœ‰æ˜¾ç¤ºçš„å»ç»™æŸä¸ªå…ƒç´ ç»‘å®šclickäº‹ä»¶å°±ä¸ä¼šå­˜åœ¨300æ¯«ç§’å»¶è¿Ÿçš„é—®é¢˜ï¼Œå®é™…ä¸Šaæ ‡ç­¾çš„è·³è½¬ä¹Ÿä¼šè§¦å‘clickäº‹ä»¶ï¼Œå¦‚æœä¸åŠ å¤„ç†çš„è¯ï¼Œä¹Ÿä¼šæœ‰300æ¯«ç§’å»¶è¿Ÿçš„é—®é¢˜ï¼Œè¿™å¯¹äºç”¨æˆ·ä½“éªŒæ˜¯æå…¶ä¸å¥½çš„ã€‚åœ¨è¿™ä¸ªåˆ†äº«ç»™å¤§å®¶ï¼Œè¿˜æ˜¯é‚£å¥è€è¯ï¼šå…±å‹‰ã€‚</p>"},{"title":"Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb","date":"2015-11-21T08:57:48.000Z","_content":"\n> Homebrewæ˜¯Macä¸‹å¾—å¥—ä»¶ç®¡ç†å™¨ï¼Œç±»ä¼¼äºLinuxç³»ç»Ÿä¸­çš„ yum æˆ–è€… apt-get ï¼Œå®ƒèƒ½è®©ä½ çš„Macæ›´å®Œç¾ã€‚mongodbåˆ™æ˜¯NOSQLæ•°æ®åº“ï¼Œä¸€ç§æ–‡æ¡£æ•°æ®åº“ï¼Œä¸åŒäºä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“(mysql,orcalç­‰)ï¼Œè¿™ç¯‡æ–‡ç« å¯¹brewåšäº†åŸºæœ¬ä»‹ç»å¹¶ä½¿ç”¨brewåœ¨Macä¸‹å®‰è£…mongoddbä»¥åŠå…¶ä¸­çš„é—®é¢˜å’Œæ³¨æ„äº‹é¡¹ï¼ˆç¬”è€…ç¬”è®°ï¼‰\n\n<!-- more -->\n\næœ€è¿‘å·¥ä½œéœ€è¦å®Œæˆçš„ä»»åŠ¡æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥å‰ä¸€ç¯‡ç³»åˆ—åšå®¢ï¼ˆåŸºäºgulp requirejs rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºç³»åˆ—æ–‡ç« ï¼‰è¿˜æ²¡å®Œæˆï¼Œå…ˆåœ¨æ­¤æ’ä¸€ç¯‡åšå®¢ï¼Œè®°å½•ä¸€äº›ä¸œè¥¿ï¼Œç”±äºæœ€è¿‘åœ¨å·¥ä½œä¸­éœ€è¦é’ˆå¯¹æˆ‘ä»¬çš„ç°æœ‰å‰ç«¯æ¡†æ¶æ­å»ºä¸€å¥—é…åˆè¾“å‡ºçš„åå°ç³»ç»Ÿï¼Œç”¨æ¥å®Œæˆå‰ç«¯æ„å»ºï¼Œè¾“å‡ºé¡¹ç›®ç­‰å·¥ä½œï¼Œäºæ˜¯å‡†å¤‡ä½¿ç”¨node + expressåšé¡¹ç›®ä¼°ä»·ï¼ŒmongodbåšæŒä¹…åŒ–ï¼Œè€Œæœ¬ç¯‡æ–‡ç« ï¼Œè®°å½•äº†Macä¸‹ä½¿ç”¨brewå®‰è£…mongodbçš„æœ‰å…³ä¸œè¥¿ã€‚\n\n# Homebrew #\n\n[Homebrew](http://brew.sh/index_zh-cn.html) æ˜¯Macä¸‹å¾—è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒåœ¨æˆ‘ä»¬çš„Macä¸‹å®‰è£…è½¯ä»¶ï¼Œå¸è½½è½¯ä»¶ç­‰ã€‚è¦æ˜¯ç”¨Homebrewï¼Œé¦–å…ˆæˆ‘ä»¬è¦åœ¨æˆ‘ä»¬çš„Macä¸‹å®‰è£…Homebrewï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š\n\n```\nruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n```\n\nHomebrewçš„å®‰è£…å¾ˆç®€å•ï¼Œä½¿ç”¨ä¸€æ¡rubyå‘½ä»¤ï¼Œæˆ‘ä»¬çš„Macç”µè„‘è‡ªå¸¦rubyï¼Œä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¯•ä¸€ä¸‹ï¼š\n\n```\nruby -v\n```\n\nå¦‚ä¸‹ï¼Œè¾“å‡ºrubyçš„ç‰ˆæœ¬ï¼š\n\n![Macç»ˆç«¯ä¸‹æŸ¥çœ‹rubyç‰ˆæœ¬](http://7xlolm.com1.z0.glb.clouddn.com/201511211.pic.jpg)\n\næ‰§è¡Œå®‰è£…å‘½ä»¤ï¼Œå®‰è£…brewï¼Œå®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨brewå®‰è£…Macä¸‹å¾—è½¯ä»¶äº†ï¼Œåœ¨å®‰è£…mongodbä¹‹å‰ï¼Œæˆ‘ä»¬å†äº†è§£äº†è§£brewï¼Œé¦–å…ˆå¦‚ä½•å¸è½½brew?å¦‚æœä½ ä¸çŸ¥é“æ€ä¹ˆå»å¸è½½çš„è¯ï¼Œä½ å¯ä»¥å†æ¬¡æ‰§è¡Œä¸€æ¬¡brewçš„å®‰è£…å‘½ä»¤ï¼Œå¦‚æœä½ å·²ç»å®‰è£…äº†brewå†æ¬¡æ‰§è¡Œå®‰è£…å‘½ä»¤çš„è¯ï¼Œä¼šç»™ä½ ä¸€ä¸ªæç¤ºï¼Œå‘Šè¯‰ä½ ä½ çš„ç³»ç»Ÿå·²ç»å®‰è£…è¿‡brewäº†ï¼Œå¦‚æœæƒ³è¦é‡å¤å®‰è£…å°±æ‰§è¡Œå¸è½½å‘½ä»¤ï¼Œè¿™æ ·ï¼Œä½ æ ¹æ®ç»ˆç«¯çš„æç¤ºæ‰§è¡Œä»¥ä¸‹å¸è½½å‘½ä»¤å°±å¯ä»¥äº†ï¼Œå¦å¤–æˆ‘ä¹ŸæŠŠbrewçš„å¸è½½å‘½ä»¤è´´å‡ºæ¥ï¼š\n\n```\nruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)\"\n```\n\nå…¶å®å°±æ˜¯æŠŠå®‰è£…å‘½ä»¤ä¸­çš„installæ”¹æˆuninstallå°±okäº†ã€‚\n\nä¸‹é¢åˆ—å‡ºä¸€äº›brewçš„å¸¸ç”¨å‘½ä»¤ï¼š\n\n1ã€è·Ÿæ–°brewæœ¬èº«\n\n```\nbrew update\n```\n\n2ã€ä½¿ç”¨brewå®‰è£…è½¯ä»¶\n\n```\nbrew install soft_name\n// soft_nameä¸ºä½ æ‰€è¦å®‰è£…è½¯ä»¶çš„æ ‡å¿—ï¼Œå¦‚ä½¿ç”¨brewå®‰è£…git\nbrew install git\n```\n\n3ã€ä½¿ç”¨brewå¸è½½è½¯ä»¶\n\n```\nbrew uninstall soft_name\n// soft_nameä¸ºä½ æ‰€è¦å¸è½½è½¯ä»¶çš„æ ‡å¿—ï¼Œå¦‚ä½¿ç”¨brewå¸è½½git\nbrew uninstall git\n```\n\n4ã€æ˜¾ç¤ºä½¿ç”¨brewå®‰è£…çš„è½¯ä»¶åˆ—è¡¨\n\n```\nbrew list\n```\n\n5ã€æ›´æ–°è½¯ä»¶\n\n```\nbrew upgrade\t\t// æ›´æ–°æ‰€æœ‰ä½¿ç”¨brewå®‰è£…çš„è½¯ä»¶\nbrew upgrade git\t// æ›´æ–°æŸä¸ªä½¿ç”¨brewå®‰è£…çš„è½¯ä»¶\n```\n\n6ã€æŸ¥çœ‹å“ªäº›è½¯ä»¶éœ€è¦æ›´æ–°\n\n```\nbrew outdated\n```\n\n7ã€æŸ¥æ‰¾è½¯ä»¶\n\n```\n// å½“ä½ è®°ä¸æ¸…è½¯ä»¶çš„åå­—çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨searchï¼Œåªéœ€è¦å†™å»å‡ ä¸ªå­—æ¯ï¼Œä»–å°±ä¼šå¸®ä½ è”æƒ³ï¼Œå¹¶æŠŠæ‰€æœ‰å¯èƒ½çš„ç»“æœè¾“å‡ºç»™ä½ \nbrew search \n```\n\nä¸‹å›¾ä¸ºä½¿ç”¨brew search giçš„è¾“å‡ºç»“æœï¼š\n\n![ä½¿ç”¨brew search gi](http://7xlolm.com1.z0.glb.clouddn.com/201511212.pic_hd.jpg)\n\n8ã€æŸ¥çœ‹ä½¿ç”¨brewå®‰è£…çš„ä¸œè¥¿ï¼Œå®‰è£…åœ¨å“ªé‡Œ\n\n```\nbrew --cache\n```\n\n[æ›´å¤šå‘½ä»¤](https://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/FAQ.md)\n\n# ä½¿ç”¨brewå®‰è£…mongodb #\n\n1ã€æœ‰äº†brewï¼Œæˆ‘ä»¬å®‰è£…mongodbå°±å˜å¾—å¾ˆç®€å•äº†ï¼š\n\n```\nbrew install mongodb\n```\n\n![å®‰è£…å®Œæˆ](http://7xlolm.com1.z0.glb.clouddn.com/201511213.pic.jpg)\n\n2ã€ä¹‹åå°†æˆ‘ä»¬çš„mongodbå‡çº§ä¸€ä¸‹ï¼Œç¡®ä¿ç‰ˆæœ¬æœ€æ–°çš„\n\n```\nbrew upgrade mongodb\n```\n\nå¦‚æœä½ ç°åœ¨å°±å¯åŠ¨mongoä½ å¹¶ä¸ä¼šæˆåŠŸï¼Œå¦‚ä¸‹ï¼š\n\n```\nFailed to connect to 127.0.0.1:27017, reason: errno:61 Connection refused\n\nError: couldn't connect to server 127.0.0.1:27017 (127.0.0.1), connection attempt failed at src/mongo/shell/mongo.js:146\n\nexception: connect failed\n```\n\n3ã€åœ¨å¯åŠ¨mongoä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œä¸ºmongoé»˜è®¤çš„æ•°æ®å†™å…¥ç›®å½•\n\n```\nmkdir -p /data/db\n```\n\n4ã€ç„¶åç»™åˆšåˆšåˆ›å»ºçš„ç›®å½•ä»¥å¯è¯»å¯å†™çš„æƒé™\n\n```\nchown `id -u` /data/db\n```\n\n5ã€ä¿®æ”¹ç›®å½•\n\n```\n// /data/db ç›®å½•æ˜¯mongoçš„é»˜è®¤ç›®å½•ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨å…¶ä»–ç›®å½•ï¼Œå¯ä»¥ä½¿ --dbpath å‚æ•°\nmongo --dbpath dir_name\n// dir_name ä¸ºä½ çš„ç›®å½•åå­—\n```\n\nç°åœ¨ï¼Œä½ å¯ä»¥æ”¾å¿ƒçš„å¯åŠ¨mongodbäº†ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š\n\n```\nmongod\n```\n\nå‡å¦‚ä¾ç„¶åŒ…ä¸Šé¢é‚£ä¸ªé”™è¯¯çš„è¯ï¼Œæˆ–è®¸ä½ å¯ä»¥è¯•è¯•ä¸‹é¢çš„å‘½ä»¤ï¼š\n\n```\nbrew services start mongodb\n```\n\nä¸è¿‡ï¼Œbrew services å·²ç»å°†è¦åºŸé™¤äº†ï¼Œå¹¶ä¸”å·²ç»æ²¡æœ‰äººç»´æŠ¤äº†ï¼Œå…·ä½“æŸ¥çœ‹[ç‚¹å‡»è¿™é‡Œ](https://github.com/Homebrew/homebrew/issues/30628)\n\nç°åœ¨å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯åº”è¯¥åƒä¸‹é¢è¿™æ ·ï¼š\n\n![å¯åŠ¨mongodbæˆåŠŸ](http://7xlolm.com1.z0.glb.clouddn.com/201511214.pic.jpg)\n\nå¦‚æœæœ‰ä¸€å¤©ä½ å‘ç°ä½ çš„æ•°æ®åº“çªç„¶å¯åŠ¨ä¸äº†äº†ï¼Œå¯èƒ½æ˜¯ä½ ä¸ºæ­£å¸¸å…³é—­å¯¼è‡´çš„ï¼Œä½ å¯ä»¥åˆ é™¤æ‰mongod.lockæ–‡ä»¶ï¼Œç„¶åé‡æ–°å¯åŠ¨ï¼Œå¦‚æœè¿˜æ˜¯ä¸å¯ä»¥ï¼Œä½ å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹è¿›ç¨‹ï¼Œç„¶åæ€æ‰ï¼š\n\n```\nps -aef | grep mongo\n```\n\nå¦‚ä¸‹ï¼š\n\n![è¿›ç¨‹](http://7xlolm.com1.z0.glb.clouddn.com/201512031.pic.jpg)\n\nç„¶åæ ¹æ®è¿›ç¨‹IDæ€æ‰è¿›ç¨‹ï¼š\n\n```\nsudo kill 6955\n```\n\né‡æ–°å¯åŠ¨mongodbæœåŠ¡ï¼Œå³å¯ï¼š\n\n```\nmongod\n```\n\næˆ‘ä»¬å¯ä»¥æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£è¿æ¥æ•°æ®åº“å¹¶è¯•ç€æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®åº“ï¼š\n\n```\nmongo\n\nshow dbs\n```\n\n![æŸ¥çœ‹æ•°æ®åº“](http://7xlolm.com1.z0.glb.clouddn.com/201511215.pic.jpg)\n\næœ€åï¼Œåƒå¤§å®¶æ¨èä¸€ä¸ªè¿æ¥mongoçš„å®¢æˆ·ç«¯å¯è§†åŒ–å·¥å…· [robomongodb](http://www.robomongo.org/)ï¼Œå®ƒæ˜¯è·¨å¹³å°çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ä¸‹è½½Macç‰ˆçš„ï¼Œå®‰è£…åæ‰“å¼€ï¼Œç•Œé¢æ˜¯è¿™ä¸ªæ ·å­ï¼š\n\n![robomongodbç•Œé¢](http://7xlolm.com1.z0.glb.clouddn.com/201511216.pic.jpg)\n\nç‚¹å‡»createæŒ‰é’®ï¼Œåˆ›å»ºæ–°çš„è¿æ¥ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªè¿æ¥çš„é…ç½®æ¡†ï¼Œé‡Œé¢æœ‰ä¸€äº›é»˜è®¤çš„å‚æ•°ï¼Œæˆ‘ä»¬ä¿æŒé»˜è®¤ï¼Œç›´æ¥ç‚¹å‡»saveï¼Œå†ç‚¹å‡»connectæŒ‰é’®å°±å¥½äº†ï¼š\n\n![ç‚¹å‡»createåˆ›å»ºè¿æ¥](http://7xlolm.com1.z0.glb.clouddn.com/201511217.pic.jpg)\n\nä¸‹å›¾æ˜¯ç‚¹å‡»connectè¿æ¥æ•°æ®åº“æˆåŠŸåçš„ç•Œé¢\n\n![ç‚¹å‡»connectè¿æ¥æ•°æ®åº“](http://7xlolm.com1.z0.glb.clouddn.com/201511218.pic.jpg)\n\nå¥½äº†ï¼Œå…¶ä»–çš„ä½œè€…è¿˜è¦ç»§ç»­æ£é¼“æ£é¼“ï¼Œå¤§å®¶å…±å‹‰ï¼ŒåŠªåŠ›å­¦ä¹ å§éªšå¹´ã€‚\n\n","source":"_posts/2015/11/21/Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb.md","raw":"title: Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb\ndate: 2015-11-21 16:57:48\ncategories:\n- WebFrontEnd\ntags:\n- mongodb\n- æ•°æ®åº“\n- brew\n---\n\n> Homebrewæ˜¯Macä¸‹å¾—å¥—ä»¶ç®¡ç†å™¨ï¼Œç±»ä¼¼äºLinuxç³»ç»Ÿä¸­çš„ yum æˆ–è€… apt-get ï¼Œå®ƒèƒ½è®©ä½ çš„Macæ›´å®Œç¾ã€‚mongodbåˆ™æ˜¯NOSQLæ•°æ®åº“ï¼Œä¸€ç§æ–‡æ¡£æ•°æ®åº“ï¼Œä¸åŒäºä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“(mysql,orcalç­‰)ï¼Œè¿™ç¯‡æ–‡ç« å¯¹brewåšäº†åŸºæœ¬ä»‹ç»å¹¶ä½¿ç”¨brewåœ¨Macä¸‹å®‰è£…mongoddbä»¥åŠå…¶ä¸­çš„é—®é¢˜å’Œæ³¨æ„äº‹é¡¹ï¼ˆç¬”è€…ç¬”è®°ï¼‰\n\n<!-- more -->\n\næœ€è¿‘å·¥ä½œéœ€è¦å®Œæˆçš„ä»»åŠ¡æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥å‰ä¸€ç¯‡ç³»åˆ—åšå®¢ï¼ˆåŸºäºgulp requirejs rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºç³»åˆ—æ–‡ç« ï¼‰è¿˜æ²¡å®Œæˆï¼Œå…ˆåœ¨æ­¤æ’ä¸€ç¯‡åšå®¢ï¼Œè®°å½•ä¸€äº›ä¸œè¥¿ï¼Œç”±äºæœ€è¿‘åœ¨å·¥ä½œä¸­éœ€è¦é’ˆå¯¹æˆ‘ä»¬çš„ç°æœ‰å‰ç«¯æ¡†æ¶æ­å»ºä¸€å¥—é…åˆè¾“å‡ºçš„åå°ç³»ç»Ÿï¼Œç”¨æ¥å®Œæˆå‰ç«¯æ„å»ºï¼Œè¾“å‡ºé¡¹ç›®ç­‰å·¥ä½œï¼Œäºæ˜¯å‡†å¤‡ä½¿ç”¨node + expressåšé¡¹ç›®ä¼°ä»·ï¼ŒmongodbåšæŒä¹…åŒ–ï¼Œè€Œæœ¬ç¯‡æ–‡ç« ï¼Œè®°å½•äº†Macä¸‹ä½¿ç”¨brewå®‰è£…mongodbçš„æœ‰å…³ä¸œè¥¿ã€‚\n\n# Homebrew #\n\n[Homebrew](http://brew.sh/index_zh-cn.html) æ˜¯Macä¸‹å¾—è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒåœ¨æˆ‘ä»¬çš„Macä¸‹å®‰è£…è½¯ä»¶ï¼Œå¸è½½è½¯ä»¶ç­‰ã€‚è¦æ˜¯ç”¨Homebrewï¼Œé¦–å…ˆæˆ‘ä»¬è¦åœ¨æˆ‘ä»¬çš„Macä¸‹å®‰è£…Homebrewï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š\n\n```\nruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n```\n\nHomebrewçš„å®‰è£…å¾ˆç®€å•ï¼Œä½¿ç”¨ä¸€æ¡rubyå‘½ä»¤ï¼Œæˆ‘ä»¬çš„Macç”µè„‘è‡ªå¸¦rubyï¼Œä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¯•ä¸€ä¸‹ï¼š\n\n```\nruby -v\n```\n\nå¦‚ä¸‹ï¼Œè¾“å‡ºrubyçš„ç‰ˆæœ¬ï¼š\n\n![Macç»ˆç«¯ä¸‹æŸ¥çœ‹rubyç‰ˆæœ¬](http://7xlolm.com1.z0.glb.clouddn.com/201511211.pic.jpg)\n\næ‰§è¡Œå®‰è£…å‘½ä»¤ï¼Œå®‰è£…brewï¼Œå®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨brewå®‰è£…Macä¸‹å¾—è½¯ä»¶äº†ï¼Œåœ¨å®‰è£…mongodbä¹‹å‰ï¼Œæˆ‘ä»¬å†äº†è§£äº†è§£brewï¼Œé¦–å…ˆå¦‚ä½•å¸è½½brew?å¦‚æœä½ ä¸çŸ¥é“æ€ä¹ˆå»å¸è½½çš„è¯ï¼Œä½ å¯ä»¥å†æ¬¡æ‰§è¡Œä¸€æ¬¡brewçš„å®‰è£…å‘½ä»¤ï¼Œå¦‚æœä½ å·²ç»å®‰è£…äº†brewå†æ¬¡æ‰§è¡Œå®‰è£…å‘½ä»¤çš„è¯ï¼Œä¼šç»™ä½ ä¸€ä¸ªæç¤ºï¼Œå‘Šè¯‰ä½ ä½ çš„ç³»ç»Ÿå·²ç»å®‰è£…è¿‡brewäº†ï¼Œå¦‚æœæƒ³è¦é‡å¤å®‰è£…å°±æ‰§è¡Œå¸è½½å‘½ä»¤ï¼Œè¿™æ ·ï¼Œä½ æ ¹æ®ç»ˆç«¯çš„æç¤ºæ‰§è¡Œä»¥ä¸‹å¸è½½å‘½ä»¤å°±å¯ä»¥äº†ï¼Œå¦å¤–æˆ‘ä¹ŸæŠŠbrewçš„å¸è½½å‘½ä»¤è´´å‡ºæ¥ï¼š\n\n```\nruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)\"\n```\n\nå…¶å®å°±æ˜¯æŠŠå®‰è£…å‘½ä»¤ä¸­çš„installæ”¹æˆuninstallå°±okäº†ã€‚\n\nä¸‹é¢åˆ—å‡ºä¸€äº›brewçš„å¸¸ç”¨å‘½ä»¤ï¼š\n\n1ã€è·Ÿæ–°brewæœ¬èº«\n\n```\nbrew update\n```\n\n2ã€ä½¿ç”¨brewå®‰è£…è½¯ä»¶\n\n```\nbrew install soft_name\n// soft_nameä¸ºä½ æ‰€è¦å®‰è£…è½¯ä»¶çš„æ ‡å¿—ï¼Œå¦‚ä½¿ç”¨brewå®‰è£…git\nbrew install git\n```\n\n3ã€ä½¿ç”¨brewå¸è½½è½¯ä»¶\n\n```\nbrew uninstall soft_name\n// soft_nameä¸ºä½ æ‰€è¦å¸è½½è½¯ä»¶çš„æ ‡å¿—ï¼Œå¦‚ä½¿ç”¨brewå¸è½½git\nbrew uninstall git\n```\n\n4ã€æ˜¾ç¤ºä½¿ç”¨brewå®‰è£…çš„è½¯ä»¶åˆ—è¡¨\n\n```\nbrew list\n```\n\n5ã€æ›´æ–°è½¯ä»¶\n\n```\nbrew upgrade\t\t// æ›´æ–°æ‰€æœ‰ä½¿ç”¨brewå®‰è£…çš„è½¯ä»¶\nbrew upgrade git\t// æ›´æ–°æŸä¸ªä½¿ç”¨brewå®‰è£…çš„è½¯ä»¶\n```\n\n6ã€æŸ¥çœ‹å“ªäº›è½¯ä»¶éœ€è¦æ›´æ–°\n\n```\nbrew outdated\n```\n\n7ã€æŸ¥æ‰¾è½¯ä»¶\n\n```\n// å½“ä½ è®°ä¸æ¸…è½¯ä»¶çš„åå­—çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨searchï¼Œåªéœ€è¦å†™å»å‡ ä¸ªå­—æ¯ï¼Œä»–å°±ä¼šå¸®ä½ è”æƒ³ï¼Œå¹¶æŠŠæ‰€æœ‰å¯èƒ½çš„ç»“æœè¾“å‡ºç»™ä½ \nbrew search \n```\n\nä¸‹å›¾ä¸ºä½¿ç”¨brew search giçš„è¾“å‡ºç»“æœï¼š\n\n![ä½¿ç”¨brew search gi](http://7xlolm.com1.z0.glb.clouddn.com/201511212.pic_hd.jpg)\n\n8ã€æŸ¥çœ‹ä½¿ç”¨brewå®‰è£…çš„ä¸œè¥¿ï¼Œå®‰è£…åœ¨å“ªé‡Œ\n\n```\nbrew --cache\n```\n\n[æ›´å¤šå‘½ä»¤](https://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/FAQ.md)\n\n# ä½¿ç”¨brewå®‰è£…mongodb #\n\n1ã€æœ‰äº†brewï¼Œæˆ‘ä»¬å®‰è£…mongodbå°±å˜å¾—å¾ˆç®€å•äº†ï¼š\n\n```\nbrew install mongodb\n```\n\n![å®‰è£…å®Œæˆ](http://7xlolm.com1.z0.glb.clouddn.com/201511213.pic.jpg)\n\n2ã€ä¹‹åå°†æˆ‘ä»¬çš„mongodbå‡çº§ä¸€ä¸‹ï¼Œç¡®ä¿ç‰ˆæœ¬æœ€æ–°çš„\n\n```\nbrew upgrade mongodb\n```\n\nå¦‚æœä½ ç°åœ¨å°±å¯åŠ¨mongoä½ å¹¶ä¸ä¼šæˆåŠŸï¼Œå¦‚ä¸‹ï¼š\n\n```\nFailed to connect to 127.0.0.1:27017, reason: errno:61 Connection refused\n\nError: couldn't connect to server 127.0.0.1:27017 (127.0.0.1), connection attempt failed at src/mongo/shell/mongo.js:146\n\nexception: connect failed\n```\n\n3ã€åœ¨å¯åŠ¨mongoä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œä¸ºmongoé»˜è®¤çš„æ•°æ®å†™å…¥ç›®å½•\n\n```\nmkdir -p /data/db\n```\n\n4ã€ç„¶åç»™åˆšåˆšåˆ›å»ºçš„ç›®å½•ä»¥å¯è¯»å¯å†™çš„æƒé™\n\n```\nchown `id -u` /data/db\n```\n\n5ã€ä¿®æ”¹ç›®å½•\n\n```\n// /data/db ç›®å½•æ˜¯mongoçš„é»˜è®¤ç›®å½•ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨å…¶ä»–ç›®å½•ï¼Œå¯ä»¥ä½¿ --dbpath å‚æ•°\nmongo --dbpath dir_name\n// dir_name ä¸ºä½ çš„ç›®å½•åå­—\n```\n\nç°åœ¨ï¼Œä½ å¯ä»¥æ”¾å¿ƒçš„å¯åŠ¨mongodbäº†ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š\n\n```\nmongod\n```\n\nå‡å¦‚ä¾ç„¶åŒ…ä¸Šé¢é‚£ä¸ªé”™è¯¯çš„è¯ï¼Œæˆ–è®¸ä½ å¯ä»¥è¯•è¯•ä¸‹é¢çš„å‘½ä»¤ï¼š\n\n```\nbrew services start mongodb\n```\n\nä¸è¿‡ï¼Œbrew services å·²ç»å°†è¦åºŸé™¤äº†ï¼Œå¹¶ä¸”å·²ç»æ²¡æœ‰äººç»´æŠ¤äº†ï¼Œå…·ä½“æŸ¥çœ‹[ç‚¹å‡»è¿™é‡Œ](https://github.com/Homebrew/homebrew/issues/30628)\n\nç°åœ¨å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯åº”è¯¥åƒä¸‹é¢è¿™æ ·ï¼š\n\n![å¯åŠ¨mongodbæˆåŠŸ](http://7xlolm.com1.z0.glb.clouddn.com/201511214.pic.jpg)\n\nå¦‚æœæœ‰ä¸€å¤©ä½ å‘ç°ä½ çš„æ•°æ®åº“çªç„¶å¯åŠ¨ä¸äº†äº†ï¼Œå¯èƒ½æ˜¯ä½ ä¸ºæ­£å¸¸å…³é—­å¯¼è‡´çš„ï¼Œä½ å¯ä»¥åˆ é™¤æ‰mongod.lockæ–‡ä»¶ï¼Œç„¶åé‡æ–°å¯åŠ¨ï¼Œå¦‚æœè¿˜æ˜¯ä¸å¯ä»¥ï¼Œä½ å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹è¿›ç¨‹ï¼Œç„¶åæ€æ‰ï¼š\n\n```\nps -aef | grep mongo\n```\n\nå¦‚ä¸‹ï¼š\n\n![è¿›ç¨‹](http://7xlolm.com1.z0.glb.clouddn.com/201512031.pic.jpg)\n\nç„¶åæ ¹æ®è¿›ç¨‹IDæ€æ‰è¿›ç¨‹ï¼š\n\n```\nsudo kill 6955\n```\n\né‡æ–°å¯åŠ¨mongodbæœåŠ¡ï¼Œå³å¯ï¼š\n\n```\nmongod\n```\n\næˆ‘ä»¬å¯ä»¥æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£è¿æ¥æ•°æ®åº“å¹¶è¯•ç€æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®åº“ï¼š\n\n```\nmongo\n\nshow dbs\n```\n\n![æŸ¥çœ‹æ•°æ®åº“](http://7xlolm.com1.z0.glb.clouddn.com/201511215.pic.jpg)\n\næœ€åï¼Œåƒå¤§å®¶æ¨èä¸€ä¸ªè¿æ¥mongoçš„å®¢æˆ·ç«¯å¯è§†åŒ–å·¥å…· [robomongodb](http://www.robomongo.org/)ï¼Œå®ƒæ˜¯è·¨å¹³å°çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ä¸‹è½½Macç‰ˆçš„ï¼Œå®‰è£…åæ‰“å¼€ï¼Œç•Œé¢æ˜¯è¿™ä¸ªæ ·å­ï¼š\n\n![robomongodbç•Œé¢](http://7xlolm.com1.z0.glb.clouddn.com/201511216.pic.jpg)\n\nç‚¹å‡»createæŒ‰é’®ï¼Œåˆ›å»ºæ–°çš„è¿æ¥ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªè¿æ¥çš„é…ç½®æ¡†ï¼Œé‡Œé¢æœ‰ä¸€äº›é»˜è®¤çš„å‚æ•°ï¼Œæˆ‘ä»¬ä¿æŒé»˜è®¤ï¼Œç›´æ¥ç‚¹å‡»saveï¼Œå†ç‚¹å‡»connectæŒ‰é’®å°±å¥½äº†ï¼š\n\n![ç‚¹å‡»createåˆ›å»ºè¿æ¥](http://7xlolm.com1.z0.glb.clouddn.com/201511217.pic.jpg)\n\nä¸‹å›¾æ˜¯ç‚¹å‡»connectè¿æ¥æ•°æ®åº“æˆåŠŸåçš„ç•Œé¢\n\n![ç‚¹å‡»connectè¿æ¥æ•°æ®åº“](http://7xlolm.com1.z0.glb.clouddn.com/201511218.pic.jpg)\n\nå¥½äº†ï¼Œå…¶ä»–çš„ä½œè€…è¿˜è¦ç»§ç»­æ£é¼“æ£é¼“ï¼Œå¤§å®¶å…±å‹‰ï¼ŒåŠªåŠ›å­¦ä¹ å§éªšå¹´ã€‚\n\n","slug":"Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb","published":1,"updated":"2015-12-03T10:12:14.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx51g000h47fys20ks4l9","content":"<blockquote>\n<p>Homebrewæ˜¯Macä¸‹å¾—å¥—ä»¶ç®¡ç†å™¨ï¼Œç±»ä¼¼äºLinuxç³»ç»Ÿä¸­çš„ yum æˆ–è€… apt-get ï¼Œå®ƒèƒ½è®©ä½ çš„Macæ›´å®Œç¾ã€‚mongodbåˆ™æ˜¯NOSQLæ•°æ®åº“ï¼Œä¸€ç§æ–‡æ¡£æ•°æ®åº“ï¼Œä¸åŒäºä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“(mysql,orcalç­‰)ï¼Œè¿™ç¯‡æ–‡ç« å¯¹brewåšäº†åŸºæœ¬ä»‹ç»å¹¶ä½¿ç”¨brewåœ¨Macä¸‹å®‰è£…mongoddbä»¥åŠå…¶ä¸­çš„é—®é¢˜å’Œæ³¨æ„äº‹é¡¹ï¼ˆç¬”è€…ç¬”è®°ï¼‰</p>\n</blockquote>\n<a id=\"more\"></a>\n<p>æœ€è¿‘å·¥ä½œéœ€è¦å®Œæˆçš„ä»»åŠ¡æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥å‰ä¸€ç¯‡ç³»åˆ—åšå®¢ï¼ˆåŸºäºgulp requirejs rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºç³»åˆ—æ–‡ç« ï¼‰è¿˜æ²¡å®Œæˆï¼Œå…ˆåœ¨æ­¤æ’ä¸€ç¯‡åšå®¢ï¼Œè®°å½•ä¸€äº›ä¸œè¥¿ï¼Œç”±äºæœ€è¿‘åœ¨å·¥ä½œä¸­éœ€è¦é’ˆå¯¹æˆ‘ä»¬çš„ç°æœ‰å‰ç«¯æ¡†æ¶æ­å»ºä¸€å¥—é…åˆè¾“å‡ºçš„åå°ç³»ç»Ÿï¼Œç”¨æ¥å®Œæˆå‰ç«¯æ„å»ºï¼Œè¾“å‡ºé¡¹ç›®ç­‰å·¥ä½œï¼Œäºæ˜¯å‡†å¤‡ä½¿ç”¨node + expressåšé¡¹ç›®ä¼°ä»·ï¼ŒmongodbåšæŒä¹…åŒ–ï¼Œè€Œæœ¬ç¯‡æ–‡ç« ï¼Œè®°å½•äº†Macä¸‹ä½¿ç”¨brewå®‰è£…mongodbçš„æœ‰å…³ä¸œè¥¿ã€‚</p>\n<h1 id=\"Homebrew\"><a href=\"#Homebrew\" class=\"headerlink\" title=\"Homebrew\"></a>Homebrew</h1><p><a href=\"http://brew.sh/index_zh-cn.html\" target=\"_blank\" rel=\"external\">Homebrew</a> æ˜¯Macä¸‹å¾—è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒåœ¨æˆ‘ä»¬çš„Macä¸‹å®‰è£…è½¯ä»¶ï¼Œå¸è½½è½¯ä»¶ç­‰ã€‚è¦æ˜¯ç”¨Homebrewï¼Œé¦–å…ˆæˆ‘ä»¬è¦åœ¨æˆ‘ä»¬çš„Macä¸‹å®‰è£…Homebrewï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p>\n<pre><code>ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;\n</code></pre><p>Homebrewçš„å®‰è£…å¾ˆç®€å•ï¼Œä½¿ç”¨ä¸€æ¡rubyå‘½ä»¤ï¼Œæˆ‘ä»¬çš„Macç”µè„‘è‡ªå¸¦rubyï¼Œä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¯•ä¸€ä¸‹ï¼š</p>\n<pre><code>ruby -v\n</code></pre><p>å¦‚ä¸‹ï¼Œè¾“å‡ºrubyçš„ç‰ˆæœ¬ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511211.pic.jpg\" alt=\"Macç»ˆç«¯ä¸‹æŸ¥çœ‹rubyç‰ˆæœ¬\"></p>\n<p>æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼Œå®‰è£…brewï¼Œå®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨brewå®‰è£…Macä¸‹å¾—è½¯ä»¶äº†ï¼Œåœ¨å®‰è£…mongodbä¹‹å‰ï¼Œæˆ‘ä»¬å†äº†è§£äº†è§£brewï¼Œé¦–å…ˆå¦‚ä½•å¸è½½brew?å¦‚æœä½ ä¸çŸ¥é“æ€ä¹ˆå»å¸è½½çš„è¯ï¼Œä½ å¯ä»¥å†æ¬¡æ‰§è¡Œä¸€æ¬¡brewçš„å®‰è£…å‘½ä»¤ï¼Œå¦‚æœä½ å·²ç»å®‰è£…äº†brewå†æ¬¡æ‰§è¡Œå®‰è£…å‘½ä»¤çš„è¯ï¼Œä¼šç»™ä½ ä¸€ä¸ªæç¤ºï¼Œå‘Šè¯‰ä½ ä½ çš„ç³»ç»Ÿå·²ç»å®‰è£…è¿‡brewäº†ï¼Œå¦‚æœæƒ³è¦é‡å¤å®‰è£…å°±æ‰§è¡Œå¸è½½å‘½ä»¤ï¼Œè¿™æ ·ï¼Œä½ æ ¹æ®ç»ˆç«¯çš„æç¤ºæ‰§è¡Œä»¥ä¸‹å¸è½½å‘½ä»¤å°±å¯ä»¥äº†ï¼Œå¦å¤–æˆ‘ä¹ŸæŠŠbrewçš„å¸è½½å‘½ä»¤è´´å‡ºæ¥ï¼š</p>\n<pre><code>ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)&quot;\n</code></pre><p>å…¶å®å°±æ˜¯æŠŠå®‰è£…å‘½ä»¤ä¸­çš„installæ”¹æˆuninstallå°±okäº†ã€‚</p>\n<p>ä¸‹é¢åˆ—å‡ºä¸€äº›brewçš„å¸¸ç”¨å‘½ä»¤ï¼š</p>\n<p>1ã€è·Ÿæ–°brewæœ¬èº«</p>\n<pre><code>brew update\n</code></pre><p>2ã€ä½¿ç”¨brewå®‰è£…è½¯ä»¶</p>\n<pre><code>brew install soft_name\n// soft_nameä¸ºä½ æ‰€è¦å®‰è£…è½¯ä»¶çš„æ ‡å¿—ï¼Œå¦‚ä½¿ç”¨brewå®‰è£…git\nbrew install git\n</code></pre><p>3ã€ä½¿ç”¨brewå¸è½½è½¯ä»¶</p>\n<pre><code>brew uninstall soft_name\n// soft_nameä¸ºä½ æ‰€è¦å¸è½½è½¯ä»¶çš„æ ‡å¿—ï¼Œå¦‚ä½¿ç”¨brewå¸è½½git\nbrew uninstall git\n</code></pre><p>4ã€æ˜¾ç¤ºä½¿ç”¨brewå®‰è£…çš„è½¯ä»¶åˆ—è¡¨</p>\n<pre><code>brew list\n</code></pre><p>5ã€æ›´æ–°è½¯ä»¶</p>\n<pre><code>brew upgrade        // æ›´æ–°æ‰€æœ‰ä½¿ç”¨brewå®‰è£…çš„è½¯ä»¶\nbrew upgrade git    // æ›´æ–°æŸä¸ªä½¿ç”¨brewå®‰è£…çš„è½¯ä»¶\n</code></pre><p>6ã€æŸ¥çœ‹å“ªäº›è½¯ä»¶éœ€è¦æ›´æ–°</p>\n<pre><code>brew outdated\n</code></pre><p>7ã€æŸ¥æ‰¾è½¯ä»¶</p>\n<pre><code>// å½“ä½ è®°ä¸æ¸…è½¯ä»¶çš„åå­—çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨searchï¼Œåªéœ€è¦å†™å»å‡ ä¸ªå­—æ¯ï¼Œä»–å°±ä¼šå¸®ä½ è”æƒ³ï¼Œå¹¶æŠŠæ‰€æœ‰å¯èƒ½çš„ç»“æœè¾“å‡ºç»™ä½ \nbrew search\n</code></pre><p>ä¸‹å›¾ä¸ºä½¿ç”¨brew search giçš„è¾“å‡ºç»“æœï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511212.pic_hd.jpg\" alt=\"ä½¿ç”¨brew search gi\"></p>\n<p>8ã€æŸ¥çœ‹ä½¿ç”¨brewå®‰è£…çš„ä¸œè¥¿ï¼Œå®‰è£…åœ¨å“ªé‡Œ</p>\n<pre><code>brew --cache\n</code></pre><p><a href=\"https://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/FAQ.md\" target=\"_blank\" rel=\"external\">æ›´å¤šå‘½ä»¤</a></p>\n<h1 id=\"ä½¿ç”¨brewå®‰è£…mongodb\"><a href=\"#ä½¿ç”¨brewå®‰è£…mongodb\" class=\"headerlink\" title=\"ä½¿ç”¨brewå®‰è£…mongodb\"></a>ä½¿ç”¨brewå®‰è£…mongodb</h1><p>1ã€æœ‰äº†brewï¼Œæˆ‘ä»¬å®‰è£…mongodbå°±å˜å¾—å¾ˆç®€å•äº†ï¼š</p>\n<pre><code>brew install mongodb\n</code></pre><p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511213.pic.jpg\" alt=\"å®‰è£…å®Œæˆ\"></p>\n<p>2ã€ä¹‹åå°†æˆ‘ä»¬çš„mongodbå‡çº§ä¸€ä¸‹ï¼Œç¡®ä¿ç‰ˆæœ¬æœ€æ–°çš„</p>\n<pre><code>brew upgrade mongodb\n</code></pre><p>å¦‚æœä½ ç°åœ¨å°±å¯åŠ¨mongoä½ å¹¶ä¸ä¼šæˆåŠŸï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>Failed to connect to 127.0.0.1:27017, reason: errno:61 Connection refused\n\nError: couldn&#39;t connect to server 127.0.0.1:27017 (127.0.0.1), connection attempt failed at src/mongo/shell/mongo.js:146\n\nexception: connect failed\n</code></pre><p>3ã€åœ¨å¯åŠ¨mongoä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œä¸ºmongoé»˜è®¤çš„æ•°æ®å†™å…¥ç›®å½•</p>\n<pre><code>mkdir -p /data/db\n</code></pre><p>4ã€ç„¶åç»™åˆšåˆšåˆ›å»ºçš„ç›®å½•ä»¥å¯è¯»å¯å†™çš„æƒé™</p>\n<pre><code>chown `id -u` /data/db\n</code></pre><p>5ã€ä¿®æ”¹ç›®å½•</p>\n<pre><code>// /data/db ç›®å½•æ˜¯mongoçš„é»˜è®¤ç›®å½•ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨å…¶ä»–ç›®å½•ï¼Œå¯ä»¥ä½¿ --dbpath å‚æ•°\nmongo --dbpath dir_name\n// dir_name ä¸ºä½ çš„ç›®å½•åå­—\n</code></pre><p>ç°åœ¨ï¼Œä½ å¯ä»¥æ”¾å¿ƒçš„å¯åŠ¨mongodbäº†ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>\n<pre><code>mongod\n</code></pre><p>å‡å¦‚ä¾ç„¶åŒ…ä¸Šé¢é‚£ä¸ªé”™è¯¯çš„è¯ï¼Œæˆ–è®¸ä½ å¯ä»¥è¯•è¯•ä¸‹é¢çš„å‘½ä»¤ï¼š</p>\n<pre><code>brew services start mongodb\n</code></pre><p>ä¸è¿‡ï¼Œbrew services å·²ç»å°†è¦åºŸé™¤äº†ï¼Œå¹¶ä¸”å·²ç»æ²¡æœ‰äººç»´æŠ¤äº†ï¼Œå…·ä½“æŸ¥çœ‹<a href=\"https://github.com/Homebrew/homebrew/issues/30628\" target=\"_blank\" rel=\"external\">ç‚¹å‡»è¿™é‡Œ</a></p>\n<p>ç°åœ¨å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯åº”è¯¥åƒä¸‹é¢è¿™æ ·ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511214.pic.jpg\" alt=\"å¯åŠ¨mongodbæˆåŠŸ\"></p>\n<p>å¦‚æœæœ‰ä¸€å¤©ä½ å‘ç°ä½ çš„æ•°æ®åº“çªç„¶å¯åŠ¨ä¸äº†äº†ï¼Œå¯èƒ½æ˜¯ä½ ä¸ºæ­£å¸¸å…³é—­å¯¼è‡´çš„ï¼Œä½ å¯ä»¥åˆ é™¤æ‰mongod.lockæ–‡ä»¶ï¼Œç„¶åé‡æ–°å¯åŠ¨ï¼Œå¦‚æœè¿˜æ˜¯ä¸å¯ä»¥ï¼Œä½ å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹è¿›ç¨‹ï¼Œç„¶åæ€æ‰ï¼š</p>\n<pre><code>ps -aef | grep mongo\n</code></pre><p>å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512031.pic.jpg\" alt=\"è¿›ç¨‹\"></p>\n<p>ç„¶åæ ¹æ®è¿›ç¨‹IDæ€æ‰è¿›ç¨‹ï¼š</p>\n<pre><code>sudo kill 6955\n</code></pre><p>é‡æ–°å¯åŠ¨mongodbæœåŠ¡ï¼Œå³å¯ï¼š</p>\n<pre><code>mongod\n</code></pre><p>æˆ‘ä»¬å¯ä»¥æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£è¿æ¥æ•°æ®åº“å¹¶è¯•ç€æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®åº“ï¼š</p>\n<pre><code>mongo\n\nshow dbs\n</code></pre><p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511215.pic.jpg\" alt=\"æŸ¥çœ‹æ•°æ®åº“\"></p>\n<p>æœ€åï¼Œåƒå¤§å®¶æ¨èä¸€ä¸ªè¿æ¥mongoçš„å®¢æˆ·ç«¯å¯è§†åŒ–å·¥å…· <a href=\"http://www.robomongo.org/\" target=\"_blank\" rel=\"external\">robomongodb</a>ï¼Œå®ƒæ˜¯è·¨å¹³å°çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ä¸‹è½½Macç‰ˆçš„ï¼Œå®‰è£…åæ‰“å¼€ï¼Œç•Œé¢æ˜¯è¿™ä¸ªæ ·å­ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511216.pic.jpg\" alt=\"robomongodbç•Œé¢\"></p>\n<p>ç‚¹å‡»createæŒ‰é’®ï¼Œåˆ›å»ºæ–°çš„è¿æ¥ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªè¿æ¥çš„é…ç½®æ¡†ï¼Œé‡Œé¢æœ‰ä¸€äº›é»˜è®¤çš„å‚æ•°ï¼Œæˆ‘ä»¬ä¿æŒé»˜è®¤ï¼Œç›´æ¥ç‚¹å‡»saveï¼Œå†ç‚¹å‡»connectæŒ‰é’®å°±å¥½äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511217.pic.jpg\" alt=\"ç‚¹å‡»createåˆ›å»ºè¿æ¥\"></p>\n<p>ä¸‹å›¾æ˜¯ç‚¹å‡»connectè¿æ¥æ•°æ®åº“æˆåŠŸåçš„ç•Œé¢</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511218.pic.jpg\" alt=\"ç‚¹å‡»connectè¿æ¥æ•°æ®åº“\"></p>\n<p>å¥½äº†ï¼Œå…¶ä»–çš„ä½œè€…è¿˜è¦ç»§ç»­æ£é¼“æ£é¼“ï¼Œå¤§å®¶å…±å‹‰ï¼ŒåŠªåŠ›å­¦ä¹ å§éªšå¹´ã€‚</p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>Homebrewæ˜¯Macä¸‹å¾—å¥—ä»¶ç®¡ç†å™¨ï¼Œç±»ä¼¼äºLinuxç³»ç»Ÿä¸­çš„ yum æˆ–è€… apt-get ï¼Œå®ƒèƒ½è®©ä½ çš„Macæ›´å®Œç¾ã€‚mongodbåˆ™æ˜¯NOSQLæ•°æ®åº“ï¼Œä¸€ç§æ–‡æ¡£æ•°æ®åº“ï¼Œä¸åŒäºä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“(mysql,orcalç­‰)ï¼Œè¿™ç¯‡æ–‡ç« å¯¹brewåšäº†åŸºæœ¬ä»‹ç»å¹¶ä½¿ç”¨brewåœ¨Macä¸‹å®‰è£…mongoddbä»¥åŠå…¶ä¸­çš„é—®é¢˜å’Œæ³¨æ„äº‹é¡¹ï¼ˆç¬”è€…ç¬”è®°ï¼‰</p>\n</blockquote>","more":"<p>æœ€è¿‘å·¥ä½œéœ€è¦å®Œæˆçš„ä»»åŠ¡æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥å‰ä¸€ç¯‡ç³»åˆ—åšå®¢ï¼ˆåŸºäºgulp requirejs rjsçš„å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºç³»åˆ—æ–‡ç« ï¼‰è¿˜æ²¡å®Œæˆï¼Œå…ˆåœ¨æ­¤æ’ä¸€ç¯‡åšå®¢ï¼Œè®°å½•ä¸€äº›ä¸œè¥¿ï¼Œç”±äºæœ€è¿‘åœ¨å·¥ä½œä¸­éœ€è¦é’ˆå¯¹æˆ‘ä»¬çš„ç°æœ‰å‰ç«¯æ¡†æ¶æ­å»ºä¸€å¥—é…åˆè¾“å‡ºçš„åå°ç³»ç»Ÿï¼Œç”¨æ¥å®Œæˆå‰ç«¯æ„å»ºï¼Œè¾“å‡ºé¡¹ç›®ç­‰å·¥ä½œï¼Œäºæ˜¯å‡†å¤‡ä½¿ç”¨node + expressåšé¡¹ç›®ä¼°ä»·ï¼ŒmongodbåšæŒä¹…åŒ–ï¼Œè€Œæœ¬ç¯‡æ–‡ç« ï¼Œè®°å½•äº†Macä¸‹ä½¿ç”¨brewå®‰è£…mongodbçš„æœ‰å…³ä¸œè¥¿ã€‚</p>\n<h1 id=\"Homebrew\"><a href=\"#Homebrew\" class=\"headerlink\" title=\"Homebrew\"></a>Homebrew</h1><p><a href=\"http://brew.sh/index_zh-cn.html\" target=\"_blank\" rel=\"external\">Homebrew</a> æ˜¯Macä¸‹å¾—è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒåœ¨æˆ‘ä»¬çš„Macä¸‹å®‰è£…è½¯ä»¶ï¼Œå¸è½½è½¯ä»¶ç­‰ã€‚è¦æ˜¯ç”¨Homebrewï¼Œé¦–å…ˆæˆ‘ä»¬è¦åœ¨æˆ‘ä»¬çš„Macä¸‹å®‰è£…Homebrewï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p>\n<pre><code>ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;\n</code></pre><p>Homebrewçš„å®‰è£…å¾ˆç®€å•ï¼Œä½¿ç”¨ä¸€æ¡rubyå‘½ä»¤ï¼Œæˆ‘ä»¬çš„Macç”µè„‘è‡ªå¸¦rubyï¼Œä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¯•ä¸€ä¸‹ï¼š</p>\n<pre><code>ruby -v\n</code></pre><p>å¦‚ä¸‹ï¼Œè¾“å‡ºrubyçš„ç‰ˆæœ¬ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511211.pic.jpg\" alt=\"Macç»ˆç«¯ä¸‹æŸ¥çœ‹rubyç‰ˆæœ¬\"></p>\n<p>æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼Œå®‰è£…brewï¼Œå®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨brewå®‰è£…Macä¸‹å¾—è½¯ä»¶äº†ï¼Œåœ¨å®‰è£…mongodbä¹‹å‰ï¼Œæˆ‘ä»¬å†äº†è§£äº†è§£brewï¼Œé¦–å…ˆå¦‚ä½•å¸è½½brew?å¦‚æœä½ ä¸çŸ¥é“æ€ä¹ˆå»å¸è½½çš„è¯ï¼Œä½ å¯ä»¥å†æ¬¡æ‰§è¡Œä¸€æ¬¡brewçš„å®‰è£…å‘½ä»¤ï¼Œå¦‚æœä½ å·²ç»å®‰è£…äº†brewå†æ¬¡æ‰§è¡Œå®‰è£…å‘½ä»¤çš„è¯ï¼Œä¼šç»™ä½ ä¸€ä¸ªæç¤ºï¼Œå‘Šè¯‰ä½ ä½ çš„ç³»ç»Ÿå·²ç»å®‰è£…è¿‡brewäº†ï¼Œå¦‚æœæƒ³è¦é‡å¤å®‰è£…å°±æ‰§è¡Œå¸è½½å‘½ä»¤ï¼Œè¿™æ ·ï¼Œä½ æ ¹æ®ç»ˆç«¯çš„æç¤ºæ‰§è¡Œä»¥ä¸‹å¸è½½å‘½ä»¤å°±å¯ä»¥äº†ï¼Œå¦å¤–æˆ‘ä¹ŸæŠŠbrewçš„å¸è½½å‘½ä»¤è´´å‡ºæ¥ï¼š</p>\n<pre><code>ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)&quot;\n</code></pre><p>å…¶å®å°±æ˜¯æŠŠå®‰è£…å‘½ä»¤ä¸­çš„installæ”¹æˆuninstallå°±okäº†ã€‚</p>\n<p>ä¸‹é¢åˆ—å‡ºä¸€äº›brewçš„å¸¸ç”¨å‘½ä»¤ï¼š</p>\n<p>1ã€è·Ÿæ–°brewæœ¬èº«</p>\n<pre><code>brew update\n</code></pre><p>2ã€ä½¿ç”¨brewå®‰è£…è½¯ä»¶</p>\n<pre><code>brew install soft_name\n// soft_nameä¸ºä½ æ‰€è¦å®‰è£…è½¯ä»¶çš„æ ‡å¿—ï¼Œå¦‚ä½¿ç”¨brewå®‰è£…git\nbrew install git\n</code></pre><p>3ã€ä½¿ç”¨brewå¸è½½è½¯ä»¶</p>\n<pre><code>brew uninstall soft_name\n// soft_nameä¸ºä½ æ‰€è¦å¸è½½è½¯ä»¶çš„æ ‡å¿—ï¼Œå¦‚ä½¿ç”¨brewå¸è½½git\nbrew uninstall git\n</code></pre><p>4ã€æ˜¾ç¤ºä½¿ç”¨brewå®‰è£…çš„è½¯ä»¶åˆ—è¡¨</p>\n<pre><code>brew list\n</code></pre><p>5ã€æ›´æ–°è½¯ä»¶</p>\n<pre><code>brew upgrade        // æ›´æ–°æ‰€æœ‰ä½¿ç”¨brewå®‰è£…çš„è½¯ä»¶\nbrew upgrade git    // æ›´æ–°æŸä¸ªä½¿ç”¨brewå®‰è£…çš„è½¯ä»¶\n</code></pre><p>6ã€æŸ¥çœ‹å“ªäº›è½¯ä»¶éœ€è¦æ›´æ–°</p>\n<pre><code>brew outdated\n</code></pre><p>7ã€æŸ¥æ‰¾è½¯ä»¶</p>\n<pre><code>// å½“ä½ è®°ä¸æ¸…è½¯ä»¶çš„åå­—çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨searchï¼Œåªéœ€è¦å†™å»å‡ ä¸ªå­—æ¯ï¼Œä»–å°±ä¼šå¸®ä½ è”æƒ³ï¼Œå¹¶æŠŠæ‰€æœ‰å¯èƒ½çš„ç»“æœè¾“å‡ºç»™ä½ \nbrew search\n</code></pre><p>ä¸‹å›¾ä¸ºä½¿ç”¨brew search giçš„è¾“å‡ºç»“æœï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511212.pic_hd.jpg\" alt=\"ä½¿ç”¨brew search gi\"></p>\n<p>8ã€æŸ¥çœ‹ä½¿ç”¨brewå®‰è£…çš„ä¸œè¥¿ï¼Œå®‰è£…åœ¨å“ªé‡Œ</p>\n<pre><code>brew --cache\n</code></pre><p><a href=\"https://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/FAQ.md\" target=\"_blank\" rel=\"external\">æ›´å¤šå‘½ä»¤</a></p>\n<h1 id=\"ä½¿ç”¨brewå®‰è£…mongodb\"><a href=\"#ä½¿ç”¨brewå®‰è£…mongodb\" class=\"headerlink\" title=\"ä½¿ç”¨brewå®‰è£…mongodb\"></a>ä½¿ç”¨brewå®‰è£…mongodb</h1><p>1ã€æœ‰äº†brewï¼Œæˆ‘ä»¬å®‰è£…mongodbå°±å˜å¾—å¾ˆç®€å•äº†ï¼š</p>\n<pre><code>brew install mongodb\n</code></pre><p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511213.pic.jpg\" alt=\"å®‰è£…å®Œæˆ\"></p>\n<p>2ã€ä¹‹åå°†æˆ‘ä»¬çš„mongodbå‡çº§ä¸€ä¸‹ï¼Œç¡®ä¿ç‰ˆæœ¬æœ€æ–°çš„</p>\n<pre><code>brew upgrade mongodb\n</code></pre><p>å¦‚æœä½ ç°åœ¨å°±å¯åŠ¨mongoä½ å¹¶ä¸ä¼šæˆåŠŸï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>Failed to connect to 127.0.0.1:27017, reason: errno:61 Connection refused\n\nError: couldn&#39;t connect to server 127.0.0.1:27017 (127.0.0.1), connection attempt failed at src/mongo/shell/mongo.js:146\n\nexception: connect failed\n</code></pre><p>3ã€åœ¨å¯åŠ¨mongoä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œä¸ºmongoé»˜è®¤çš„æ•°æ®å†™å…¥ç›®å½•</p>\n<pre><code>mkdir -p /data/db\n</code></pre><p>4ã€ç„¶åç»™åˆšåˆšåˆ›å»ºçš„ç›®å½•ä»¥å¯è¯»å¯å†™çš„æƒé™</p>\n<pre><code>chown `id -u` /data/db\n</code></pre><p>5ã€ä¿®æ”¹ç›®å½•</p>\n<pre><code>// /data/db ç›®å½•æ˜¯mongoçš„é»˜è®¤ç›®å½•ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨å…¶ä»–ç›®å½•ï¼Œå¯ä»¥ä½¿ --dbpath å‚æ•°\nmongo --dbpath dir_name\n// dir_name ä¸ºä½ çš„ç›®å½•åå­—\n</code></pre><p>ç°åœ¨ï¼Œä½ å¯ä»¥æ”¾å¿ƒçš„å¯åŠ¨mongodbäº†ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>\n<pre><code>mongod\n</code></pre><p>å‡å¦‚ä¾ç„¶åŒ…ä¸Šé¢é‚£ä¸ªé”™è¯¯çš„è¯ï¼Œæˆ–è®¸ä½ å¯ä»¥è¯•è¯•ä¸‹é¢çš„å‘½ä»¤ï¼š</p>\n<pre><code>brew services start mongodb\n</code></pre><p>ä¸è¿‡ï¼Œbrew services å·²ç»å°†è¦åºŸé™¤äº†ï¼Œå¹¶ä¸”å·²ç»æ²¡æœ‰äººç»´æŠ¤äº†ï¼Œå…·ä½“æŸ¥çœ‹<a href=\"https://github.com/Homebrew/homebrew/issues/30628\" target=\"_blank\" rel=\"external\">ç‚¹å‡»è¿™é‡Œ</a></p>\n<p>ç°åœ¨å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯åº”è¯¥åƒä¸‹é¢è¿™æ ·ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511214.pic.jpg\" alt=\"å¯åŠ¨mongodbæˆåŠŸ\"></p>\n<p>å¦‚æœæœ‰ä¸€å¤©ä½ å‘ç°ä½ çš„æ•°æ®åº“çªç„¶å¯åŠ¨ä¸äº†äº†ï¼Œå¯èƒ½æ˜¯ä½ ä¸ºæ­£å¸¸å…³é—­å¯¼è‡´çš„ï¼Œä½ å¯ä»¥åˆ é™¤æ‰mongod.lockæ–‡ä»¶ï¼Œç„¶åé‡æ–°å¯åŠ¨ï¼Œå¦‚æœè¿˜æ˜¯ä¸å¯ä»¥ï¼Œä½ å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹è¿›ç¨‹ï¼Œç„¶åæ€æ‰ï¼š</p>\n<pre><code>ps -aef | grep mongo\n</code></pre><p>å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512031.pic.jpg\" alt=\"è¿›ç¨‹\"></p>\n<p>ç„¶åæ ¹æ®è¿›ç¨‹IDæ€æ‰è¿›ç¨‹ï¼š</p>\n<pre><code>sudo kill 6955\n</code></pre><p>é‡æ–°å¯åŠ¨mongodbæœåŠ¡ï¼Œå³å¯ï¼š</p>\n<pre><code>mongod\n</code></pre><p>æˆ‘ä»¬å¯ä»¥æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£è¿æ¥æ•°æ®åº“å¹¶è¯•ç€æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®åº“ï¼š</p>\n<pre><code>mongo\n\nshow dbs\n</code></pre><p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511215.pic.jpg\" alt=\"æŸ¥çœ‹æ•°æ®åº“\"></p>\n<p>æœ€åï¼Œåƒå¤§å®¶æ¨èä¸€ä¸ªè¿æ¥mongoçš„å®¢æˆ·ç«¯å¯è§†åŒ–å·¥å…· <a href=\"http://www.robomongo.org/\" target=\"_blank\" rel=\"external\">robomongodb</a>ï¼Œå®ƒæ˜¯è·¨å¹³å°çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ä¸‹è½½Macç‰ˆçš„ï¼Œå®‰è£…åæ‰“å¼€ï¼Œç•Œé¢æ˜¯è¿™ä¸ªæ ·å­ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511216.pic.jpg\" alt=\"robomongodbç•Œé¢\"></p>\n<p>ç‚¹å‡»createæŒ‰é’®ï¼Œåˆ›å»ºæ–°çš„è¿æ¥ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªè¿æ¥çš„é…ç½®æ¡†ï¼Œé‡Œé¢æœ‰ä¸€äº›é»˜è®¤çš„å‚æ•°ï¼Œæˆ‘ä»¬ä¿æŒé»˜è®¤ï¼Œç›´æ¥ç‚¹å‡»saveï¼Œå†ç‚¹å‡»connectæŒ‰é’®å°±å¥½äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511217.pic.jpg\" alt=\"ç‚¹å‡»createåˆ›å»ºè¿æ¥\"></p>\n<p>ä¸‹å›¾æ˜¯ç‚¹å‡»connectè¿æ¥æ•°æ®åº“æˆåŠŸåçš„ç•Œé¢</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201511218.pic.jpg\" alt=\"ç‚¹å‡»connectè¿æ¥æ•°æ®åº“\"></p>\n<p>å¥½äº†ï¼Œå…¶ä»–çš„ä½œè€…è¿˜è¦ç»§ç»­æ£é¼“æ£é¼“ï¼Œå¤§å®¶å…±å‹‰ï¼ŒåŠªåŠ›å­¦ä¹ å§éªšå¹´ã€‚</p>"},{"title":"nodejsä½¿ç”¨mongodbåšæ•°æ®æŒä¹…åŒ–","date":"2015-12-02T06:30:47.000Z","_content":"\n>å‰æ®µæ—¶é—´ï¼Œå†™äº†ä¸€ç¯‡åšå®¢ï¼Œè®²è§£äº†åœ¨[Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb](http://hcysun.me/2015/11/21/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8brew%E5%AE%89%E8%A3%85mongodb/)ï¼Œè¿™ç¯‡æ–‡ç« å¯ä»¥çœ‹åšæ˜¯ç»­ç¯‡ï¼Œä½¿ç”¨nodejsæ“ä½œmongodbï¼Œå¹¶å°è£…ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•ã€‚\n\n<!-- more -->\n\nnodejsæ“ä½œmongodbï¼Œé¦–å…ˆè¦ä½¿ç”¨npmå®‰è£…æ“ä½œmongodbæ•°æ®åº“çš„åŒ…ï¼Œæœ‰ä¸¤ä¸ªé€‰æ‹© [mongoose](https://www.npmjs.com/package/mongoose) å’Œ [mongodb](https://www.npmjs.com/package/mongodb)ï¼Œç”±äºmongodbçš„ä½¿ç”¨æ–¹å¼æ›´æ¥è¿‘mongodbåŸç”Ÿçš„è¯­æ³•ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨[mongodb](https://www.npmjs.com/package/mongodb)æ¨¡å—ï¼Œæ“ä½œæ•°æ®åº“ã€‚\n\nåœ¨[Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb](http://hcysun.me/2015/11/21/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8brew%E5%AE%89%E8%A3%85mongodb/)è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå·²ç»è®²è§£äº†mongodbæ•°æ®åº“çš„æ€§è´¨å’Œå®‰è£…ï¼Œä¹Ÿä»‹ç»äº†ä¸€ä¸ªè¿æ¥mongodbçš„å®¢æˆ·ç«¯å·¥å…· Robomongo ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸åœ¨èµ˜è¿°ã€‚\n\nä¸è¿‡ï¼Œç®€å•ä»‹ç»ä¸‹mongodbæ•°æ®åº“çš„è¯­æ³•è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œå¦‚æœä½ å·²ç»äº†è§£ï¼Œé‚£ä¹ˆå¯ä»¥è·³è¿‡è¿™é‡Œï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨åŸç”Ÿçš„è¯­æ³•æ¥åšä¸€æ¬¡CURDæ“ä½œã€‚\n\n## 1ã€å¯åŠ¨mongodbæœåŠ¡ ##\n\n```\nmongo\n```\n\nåœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ mongo å°±å¯ä»¥å¯åŠ¨mongodbæœåŠ¡äº†ï¼Œæˆ‘ä»¬ä¼šè¿›å…¥åˆ°mongoçš„äº¤äº’æ¨¡å¼ï¼Œå¦‚å›¾ï¼š\n\n![å¯åŠ¨mongodbæœåŠ¡](http://7xlolm.com1.z0.glb.clouddn.com/201512021.pic.jpg)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œmongoå¯åŠ¨åï¼Œé»˜è®¤è¿æ¥çš„æ˜¯testæ•°æ®åº“ï¼Œæ³¨æ„ï¼Œmongodbæ˜¯éå…³ç³»å‹æ•°æ®åº“ï¼Œå’ŒMySQLä¸åŒï¼Œåœ¨mongodbä¸­ï¼š\n\n```\nnodql       \t<=====>\t\tsql\næ•°æ®åº“(database) <=====> æ•°æ®åº“(database)\né›†åˆ(collection) <=====> è¡¨(table)\næ–‡æ¡£(docs) \t\t<=====> è¡Œ(rows)\nå­—æ®µ(field) \t\t<=====> åˆ—(field)\n```\n\næˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹æˆ‘ä»¬å½“å‰æ“ä½œçš„æ•°æ®åº“ï¼š\n\n```\ndb\n```\n\nå¦‚ä¸‹ï¼Œæˆ‘ä»¬å½“å‰æ“ä½œçš„æ•°æ®åº“æ˜¯ test åº“ï¼š\n\n![æ˜¾ç¤ºå½“å‰æˆ‘ä»¬æ‰€æ“ä½œçš„æ•°æ®åº“](http://7xlolm.com1.z0.glb.clouddn.com/201512026.pic.jpg)\n\nä¹Ÿå¯ä»¥æ‰§è¡Œä¸‹é¢è¿™æ¡å‘½ä»¤æ¥æŸ¥çœ‹æ‰€ä»¥æ•°æ®åº“ï¼š\n\n```\nshow dbs\n```\n\nå¦‚ä¸‹å›¾ï¼Œå±•ç¤ºå‡ºæˆ‘ä»¬æ‰€æœ‰çš„æ•°æ®åº“ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼Œå¦‚æœä½ çš„æ•°æ®åº“é‡Œé¢æ²¡æœ‰ä»»ä½•æ•°æ®ï¼Œæ˜¯ä¸ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥çš„ï¼š\n\n![æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“ï¼Œç©ºæ•°æ®åº“æ²¡æœ‰æ˜¾ç¤º](http://7xlolm.com1.z0.glb.clouddn.com/201512023.pic.jpg)\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤åˆ‡æ¢æ•°æ®åº“ï¼š\n\n```\nuse hcy\n```\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±åˆ‡æ¢åˆ°äº†æ•°æ®åº“åå­—ä¸ºhcyçš„æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œ db å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦åˆ‡æ¢æˆåŠŸï¼š\n\n![åˆ‡æ¢æ•°æ®åº“](http://7xlolm.com1.z0.glb.clouddn.com/201512024.pic.jpg)\n\næ³¨æ„ï¼Œä½¿ç”¨use db_nameæ¥åˆ‡æ¢æ•°æ®åº“çš„æ—¶å€™ï¼Œå¦‚æœè¯¥æ•°æ®åº“ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šåˆ›å»ºè¯¥æ•°æ®åº“ï¼Œæ‰€ä»¥å¦‚æœä½ è¦åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œä¹Ÿæ˜¯ç”¨useå‘½ä»¤å°±å¥½å•¦ã€‚\n\nå¦‚æœè¦åˆ é™¤ä¸€ä¸ªæ•°æ®åº“ï¼Œæˆ‘ä»¬é¦–å…ˆè¦åˆ‡æ¢åˆ°å½“å‰æ•°æ®åº“ä¸‹ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥åˆ é™¤è¿™ä¸ªæ•°æ®åº“äº†ï¼š\n\n```\nuse hcy\n\ndb.dropDatabase()\n```\n\nè¿™æ ·å°±ä¼šåˆ é™¤hcyè¿™ä¸ªæ•°æ®åº“ï¼Œæˆ‘ä»¬å†æ¥æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼Œå‘ç°hcyåº“å·²ç»ä¸è§äº†ï¼Œè¢«æˆ‘ä»¬åˆ æ‰äº†ï¼š\n\n![åˆ é™¤æ•°æ®åº“](http://7xlolm.com1.z0.glb.clouddn.com/201512025.pic.jpg)\n\nä¸‹é¢ï¼Œæˆ‘ä»¬è®²è¿°æœ€ç®€å•çš„curdæ“ä½œï¼š\n\n### 1ã€å‘hcyæ•°æ®åº“ä¸­çš„usersé›†åˆæ’å…¥ä¸€ä¸ªæ–‡æ¡£ ###\n\næ ‡é¢˜ä¸­çš„è¯å¦‚æœç¿»è¯‘æˆsqlæ•°æ®åº“çš„è¯­è¨€å°±æ˜¯ï¼šâ€œå‘hcyæ•°æ®åº“ä¸­çš„usersè¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆå‘mongodbæ•°æ®åº“çš„é›†åˆä¸­æ’å…¥æ–‡æ¡£ï¼š\n\n```\nuse hcy\n\ndb.users.insert({\n\tname : 'hcy',\n\tage : 21\n})\n```\n\né¦–å…ˆï¼Œæˆ‘ä»¬åˆ‡æ¢åˆ°hcyæ•°æ®åº“ï¼Œå¦‚æœæ²¡æœ‰è¯¥æ•°æ®åº“å°±ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥æ•°æ®åº“ï¼Œç„¶åæ‰§è¡Œæ’å…¥æ•°æ®æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥è¯¢ä¸€ä¸ªé›†åˆä¸­çš„æ•°æ®ï¼š\n\n```\ndb.users.find()\n```\n\nè¿™æ ·ä¼šæŸ¥è¯¢å‡ºhcyåº“ä¸­usersé›†åˆä¸‹é¢çš„æ‰€æœ‰æ•°æ®ï¼Œå¦‚æœéœ€è¦æ¡ä»¶æŸ¥æ‰¾ï¼Œåƒä¸‹é¢è¿™æ¡å‘½ä»¤ï¼Œåªéœ€è¦åœ¨find()æ–¹æ³•ä¸­ä¼ å…¥ä¸€ä¸ªjsonå¯¹è±¡ä½œä¸ºç­›é€‰æ¡ä»¶å³å¯ï¼š\n\n```\ndb.users.find({name:'hcy'})\n```\n\nåˆ é™¤æ•°æ®ï¼š\n\n```\ndb.users.remove()\n```\n\nä¸Šé¢çš„æ•°æ®ä¼šåˆ é™¤usersé›†åˆä¸‹å¾—æ‰€æœ‰æ–‡æ¡£(æ•°æ®)ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä½œä¸ºç­›é€‰æ¡ä»¶ï¼š\n\n```\ndb.users.remove({\n\tname : 'hcy'\n})\n```\n\nä¸Šé¢çš„å‘½ä»¤ä¼šåˆ é™¤æ‰usersé›†åˆä¸­ï¼Œæ‰€æœ‰nameå€¼ä¸ºhcyçš„æ‰€æœ‰æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªbooleanå€¼ï¼Œtrueä¸ºåªåˆ é™¤ä¸€æ¡ï¼š\n\n```\ndb.users.remove({\n\tname : 'hcy'\n}, true)\n```\n\nä¿®æ”¹æ•°æ®æœ‰ä¸¤ç§æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ update()æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨save()æ–¹æ³•ï¼Œå…ˆæ¥çœ‹update()æ–¹æ³•:\n\n```\ndb.collection.update(\n   <query>,\n   <update>,\n   {\n     upsert: <boolean>,\n     multi: <boolean>,\n     writeConcern: <document>\n   }\n)\n```\n\n>query : updateçš„æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼sql updateæŸ¥è¯¢å†…whereåé¢çš„ã€‚\n>update : updateçš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚$,$inc...ï¼‰ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsql updateæŸ¥è¯¢å†…setåé¢çš„\n>upsert : å¯é€‰ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸å­˜åœ¨updateçš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥objNew,trueä¸ºæ’å…¥ï¼Œé»˜è®¤æ˜¯falseï¼Œä¸æ’å…¥ã€‚\n>multi : å¯é€‰ï¼Œmongodb é»˜è®¤æ˜¯false,åªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸ºtrue,å°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°ã€‚\n>writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚\n\nè¿™é‡Œæˆ‘åªä»‹ç»äº†è¯­æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨save()æ–¹æ³•ï¼š\n\n```\ndb.collection.save(\n   <document>,\n   {\n     writeConcern: <document>\n   }\n)\n```\n\n>document : æ–‡æ¡£æ•°æ®ã€‚\n>writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚\n\nä¾‹å­å¦‚ä¸‹ï¼š\n\n```\ndb.users.save({\n\t\"_id\" : ObjectId(\"56064f89ade2f21f36b03136\"),\n    \"name\" : \"aaaa\",\n    \"age\" : \"100\"\n})\n```\n\nä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ›¿æ¢äº† _id ä¸º 56064f89ade2f21f36b03136 çš„æ–‡æ¡£æ•°æ®ã€‚\n\nå¦‚æœæƒ³äº†è§£æ›´å¤šmongodbåŸç”Ÿè¯­æ³•çŸ¥è¯†ï¼Œ[è¿™é‡Œ](http://www.runoob.com/mongodb/mongodb-tutorial.html)æ˜¯ä¸€ä¸ªå¥½å»å¤„\n\nç°åœ¨ï¼Œä½ åº”è¯¥å¯¹mongodbæœ‰äº†ä¸€å®šçš„äº†è§£äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åœ¨nodejsä¸­æ“ä½œmongodbå‘¢ï¼Ÿ\n\né¦–å…ˆåœ¨é¡¹ç›®ä¸­ä½¿ç”¨npmå®‰è£…mongodbæ¨¡å—\n\n```\nnpm install --save mongodb\n```\n\nå½“æˆ‘ä»¬æƒ³è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿™ä¸ªæ¨¡å—æ“ä½œæ•°æ®åº“çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼•å…¥è¯¥æ¨¡å—\n\n```\nvar MongoClient = require('mongodb').MongoClient;\n```\n\nä¸Šé¢çš„ä»£ç è¿”å›ä¸€ä¸ªmongodbå®¢æˆ·ç«¯å®ä¾‹ï¼Œè¿æ¥æ•°æ®åº“ï¼š\n\n```\nvar mongoConnectUrl = 'mongodb://localhost:27017/hcy';\nMongoClient.connect(mongoConnectUrl, function(err, db){\n\tif(err) return console.log(err);\n\tconsole.log('è¿æ¥æˆåŠŸ');\n});\n```\n\nä¸Šé¢çš„mongoConnectUrlæ˜¯æˆ‘ä»¬è¿æ¥mongodbæ•°æ®åº“çš„ä¸€ä¸ªurlï¼Œæ³¨æ„ï¼Œmongodbé»˜è®¤ç›‘å¬çš„ç«¯å£æ˜¯27017ï¼Œå¦å¤–ï¼Œå¦‚æœå§‹ç»ˆè¿æ¥ä¸æˆåŠŸï¼Œä½ å¯ä»¥æŠŠlocalhostæ¢æˆä½ ç”µè„‘çš„ipåœ°å€è¯•ä¸€è¯•ï¼Œç¬”è€…åœ¨æµ‹è¯•çš„æ—¶å€™åªèƒ½ä½¿ç”¨ipåœ°å€ï¼Œä½¿ç”¨localhostå§‹ç»ˆè¿æ¥å¤±è´¥ï¼Œåœ¨urlçš„æœ€åæ˜¯ä½ è¦è¿æ¥çš„æ•°æ®åº“ï¼Œè¿™é‡Œæˆ‘ä»¬è¿æ¥åˆ°hcyæ•°æ®åº“ã€‚\n\nè¿æ¥æ•°æ®åº“æˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå¹¶æ“ä½œé‡Œé¢çš„æ•°æ®ï¼Œæˆ‘ä»¬å°è£…ä¸€ä¸ªæ–¹æ³•ï¼š\n\n## æ’å…¥æ•°æ® ##\n\n```\n/**\n * æ’å…¥æ•°æ®\n * @method insertData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Array} data æ’å…¥çš„æ•°æ®\n * @param {Function} callback å›è°ƒå‡½æ•°\n * @return {Null}\n *\n */\nfunction insertData(mongoConnectUrl, coll, data, callback){\n\tMongoClient.connect(mongoConnectUrl, function(err, db){\n\t\tif(err) return console.log(err);\n\t\t// æ‰“å¼€é›†åˆ\n\t\tvar collection = db.collection(coll);\n\t\t// æ’å…¥æ•°æ®\n\t\tcollection.insertMany(data, function(err, result){\n\t\t\t//console.log(result)\n\t\t\t// è®°å¾—è¦å…³é—­æ•°æ®åº“\n\t\t\tdb.close();\n\t\t\tcallback(result);\n\t\t});\n\n\t});\n}\n```\n\n## æŸ¥è¯¢æ•°æ® ##\n\n```\n/**\n * æŸ¥è¯¢æ•°æ®\n * @method findData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Object} opation æ¡ä»¶\n * @param {Function} callback å›è°ƒå‡½æ•°\n * @return {Null}\n *\n */\nfunction findData(mongoConnectUrl, coll, opation, callback){\n\tMongoClient.connect(mongoConnectUrl, function(err, db){\n\t\tif(err) return console.log(err);\n\t\t// æ‰“å¼€é›†åˆ\n\t\tvar collection = db.collection(coll);\n\t\t// æ ¹æ®æ¡ä»¶æŸ¥è¯¢æ•°æ®\n\t\tvar userData = collection.find(opation);\n\t\t// éå†æ•°æ®\n\t\tuserData.toArray(function(err2, docs) {\n\t\t\t// docsæ˜¯æŸ¥è¯¢å‡ºæ¥çš„æ–‡æ¡£ï¼Œjsonå¯¹è±¡ï¼Œå¯ä»¥æ‰“å°å‡ºæ¥çœ‹çœ‹\n\t\t\tdb.close();\n\t\t\tcallback(docs);\n\t\t});\n\n\t});\n}\n```\n\n## åˆ é™¤æ•°æ® ##\n\n```\n/**\n * @method deleteData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Object} opation æ¡ä»¶\n * @param {Number} num åˆ é™¤æ•°æ®çš„æ•°é‡ï¼Œå³åˆ é™¤å‡ æ¡\n * @return {Null}\n *\n */\nfunction deleteData(mongoConnectUrl, coll, opation, num, callback){\n\tvar i = num;\n\tvar res = [];\n\tvar tempRes = [];\n\tvar thisFn = arguments.callee;\n\tMongoClient.connect(mongoConnectUrl, function(err, db){\n\t\tif(err) return console.log(err);\n\n\t\tvar collection = db.collection(coll);\n\t\tif(i > 0){\n\t\t\ti--;\n\t\t\tcollection.deleteOne(opation, function(err, result){\n\t\t\t\t// console.log(result)\n\t\t\t\tres.push(result);\n\t\t\t\tthisFn(mongoConnectUrl, coll, opation, i, callback);\n\t\t\t\tif(i == 0){\n\t\t\t\t\tdb.close();\n\t\t\t\t\ttempRes = res;\n\t\t\t\t\tres = []\n\t\t\t\t\ti = 0;\n\t\t\t\t\tcallback(tempRes);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t});\n\t\t}\n\n\t});\n},\n```\n\n## ä¿®æ”¹ä¸€æ¡æ•°æ® ##\n\n```\n/**\n * @method deleteData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Object} opation æ¡ä»¶\n * @param {Object} data æ›´æ–°çš„æ•°æ®\n * @return {Null}\n *\n */\nfunction deleteData(mongoConnectUrl, coll, opation, data, callback){\n\tMongoClient.connect(mongoConnectUrl, function(err, db){\n\t\tif(err) return console.log(err);\n\n\t\tvar collection = db.collection(coll);\n\t\t\n\t\tcollection.updateOne(opation, { $set: data }, function(err, result) {\n\t\t\tdb.close();\n\t\t\tcallback(result);\n\t\t});\n\n\t});\n},\n```\n\n\n\n\n\n\n","source":"_posts/2015/12/02/nodejsä½¿ç”¨mongodbåšæ•°æ®æŒä¹…åŒ–.md","raw":"title: nodejsä½¿ç”¨mongodbåšæ•°æ®æŒä¹…åŒ–\ndate: 2015-12-02 14:30:47\ncategories:\n- WebFrontEnd\ntags:\n- mongodb\n- nodejs\n---\n\n>å‰æ®µæ—¶é—´ï¼Œå†™äº†ä¸€ç¯‡åšå®¢ï¼Œè®²è§£äº†åœ¨[Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb](http://hcysun.me/2015/11/21/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8brew%E5%AE%89%E8%A3%85mongodb/)ï¼Œè¿™ç¯‡æ–‡ç« å¯ä»¥çœ‹åšæ˜¯ç»­ç¯‡ï¼Œä½¿ç”¨nodejsæ“ä½œmongodbï¼Œå¹¶å°è£…ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•ã€‚\n\n<!-- more -->\n\nnodejsæ“ä½œmongodbï¼Œé¦–å…ˆè¦ä½¿ç”¨npmå®‰è£…æ“ä½œmongodbæ•°æ®åº“çš„åŒ…ï¼Œæœ‰ä¸¤ä¸ªé€‰æ‹© [mongoose](https://www.npmjs.com/package/mongoose) å’Œ [mongodb](https://www.npmjs.com/package/mongodb)ï¼Œç”±äºmongodbçš„ä½¿ç”¨æ–¹å¼æ›´æ¥è¿‘mongodbåŸç”Ÿçš„è¯­æ³•ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨[mongodb](https://www.npmjs.com/package/mongodb)æ¨¡å—ï¼Œæ“ä½œæ•°æ®åº“ã€‚\n\nåœ¨[Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb](http://hcysun.me/2015/11/21/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8brew%E5%AE%89%E8%A3%85mongodb/)è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå·²ç»è®²è§£äº†mongodbæ•°æ®åº“çš„æ€§è´¨å’Œå®‰è£…ï¼Œä¹Ÿä»‹ç»äº†ä¸€ä¸ªè¿æ¥mongodbçš„å®¢æˆ·ç«¯å·¥å…· Robomongo ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸åœ¨èµ˜è¿°ã€‚\n\nä¸è¿‡ï¼Œç®€å•ä»‹ç»ä¸‹mongodbæ•°æ®åº“çš„è¯­æ³•è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œå¦‚æœä½ å·²ç»äº†è§£ï¼Œé‚£ä¹ˆå¯ä»¥è·³è¿‡è¿™é‡Œï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨åŸç”Ÿçš„è¯­æ³•æ¥åšä¸€æ¬¡CURDæ“ä½œã€‚\n\n## 1ã€å¯åŠ¨mongodbæœåŠ¡ ##\n\n```\nmongo\n```\n\nåœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ mongo å°±å¯ä»¥å¯åŠ¨mongodbæœåŠ¡äº†ï¼Œæˆ‘ä»¬ä¼šè¿›å…¥åˆ°mongoçš„äº¤äº’æ¨¡å¼ï¼Œå¦‚å›¾ï¼š\n\n![å¯åŠ¨mongodbæœåŠ¡](http://7xlolm.com1.z0.glb.clouddn.com/201512021.pic.jpg)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œmongoå¯åŠ¨åï¼Œé»˜è®¤è¿æ¥çš„æ˜¯testæ•°æ®åº“ï¼Œæ³¨æ„ï¼Œmongodbæ˜¯éå…³ç³»å‹æ•°æ®åº“ï¼Œå’ŒMySQLä¸åŒï¼Œåœ¨mongodbä¸­ï¼š\n\n```\nnodql       \t<=====>\t\tsql\næ•°æ®åº“(database) <=====> æ•°æ®åº“(database)\né›†åˆ(collection) <=====> è¡¨(table)\næ–‡æ¡£(docs) \t\t<=====> è¡Œ(rows)\nå­—æ®µ(field) \t\t<=====> åˆ—(field)\n```\n\næˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹æˆ‘ä»¬å½“å‰æ“ä½œçš„æ•°æ®åº“ï¼š\n\n```\ndb\n```\n\nå¦‚ä¸‹ï¼Œæˆ‘ä»¬å½“å‰æ“ä½œçš„æ•°æ®åº“æ˜¯ test åº“ï¼š\n\n![æ˜¾ç¤ºå½“å‰æˆ‘ä»¬æ‰€æ“ä½œçš„æ•°æ®åº“](http://7xlolm.com1.z0.glb.clouddn.com/201512026.pic.jpg)\n\nä¹Ÿå¯ä»¥æ‰§è¡Œä¸‹é¢è¿™æ¡å‘½ä»¤æ¥æŸ¥çœ‹æ‰€ä»¥æ•°æ®åº“ï¼š\n\n```\nshow dbs\n```\n\nå¦‚ä¸‹å›¾ï¼Œå±•ç¤ºå‡ºæˆ‘ä»¬æ‰€æœ‰çš„æ•°æ®åº“ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼Œå¦‚æœä½ çš„æ•°æ®åº“é‡Œé¢æ²¡æœ‰ä»»ä½•æ•°æ®ï¼Œæ˜¯ä¸ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥çš„ï¼š\n\n![æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“ï¼Œç©ºæ•°æ®åº“æ²¡æœ‰æ˜¾ç¤º](http://7xlolm.com1.z0.glb.clouddn.com/201512023.pic.jpg)\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤åˆ‡æ¢æ•°æ®åº“ï¼š\n\n```\nuse hcy\n```\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±åˆ‡æ¢åˆ°äº†æ•°æ®åº“åå­—ä¸ºhcyçš„æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œ db å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦åˆ‡æ¢æˆåŠŸï¼š\n\n![åˆ‡æ¢æ•°æ®åº“](http://7xlolm.com1.z0.glb.clouddn.com/201512024.pic.jpg)\n\næ³¨æ„ï¼Œä½¿ç”¨use db_nameæ¥åˆ‡æ¢æ•°æ®åº“çš„æ—¶å€™ï¼Œå¦‚æœè¯¥æ•°æ®åº“ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šåˆ›å»ºè¯¥æ•°æ®åº“ï¼Œæ‰€ä»¥å¦‚æœä½ è¦åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œä¹Ÿæ˜¯ç”¨useå‘½ä»¤å°±å¥½å•¦ã€‚\n\nå¦‚æœè¦åˆ é™¤ä¸€ä¸ªæ•°æ®åº“ï¼Œæˆ‘ä»¬é¦–å…ˆè¦åˆ‡æ¢åˆ°å½“å‰æ•°æ®åº“ä¸‹ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥åˆ é™¤è¿™ä¸ªæ•°æ®åº“äº†ï¼š\n\n```\nuse hcy\n\ndb.dropDatabase()\n```\n\nè¿™æ ·å°±ä¼šåˆ é™¤hcyè¿™ä¸ªæ•°æ®åº“ï¼Œæˆ‘ä»¬å†æ¥æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼Œå‘ç°hcyåº“å·²ç»ä¸è§äº†ï¼Œè¢«æˆ‘ä»¬åˆ æ‰äº†ï¼š\n\n![åˆ é™¤æ•°æ®åº“](http://7xlolm.com1.z0.glb.clouddn.com/201512025.pic.jpg)\n\nä¸‹é¢ï¼Œæˆ‘ä»¬è®²è¿°æœ€ç®€å•çš„curdæ“ä½œï¼š\n\n### 1ã€å‘hcyæ•°æ®åº“ä¸­çš„usersé›†åˆæ’å…¥ä¸€ä¸ªæ–‡æ¡£ ###\n\næ ‡é¢˜ä¸­çš„è¯å¦‚æœç¿»è¯‘æˆsqlæ•°æ®åº“çš„è¯­è¨€å°±æ˜¯ï¼šâ€œå‘hcyæ•°æ®åº“ä¸­çš„usersè¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆå‘mongodbæ•°æ®åº“çš„é›†åˆä¸­æ’å…¥æ–‡æ¡£ï¼š\n\n```\nuse hcy\n\ndb.users.insert({\n\tname : 'hcy',\n\tage : 21\n})\n```\n\né¦–å…ˆï¼Œæˆ‘ä»¬åˆ‡æ¢åˆ°hcyæ•°æ®åº“ï¼Œå¦‚æœæ²¡æœ‰è¯¥æ•°æ®åº“å°±ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥æ•°æ®åº“ï¼Œç„¶åæ‰§è¡Œæ’å…¥æ•°æ®æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥è¯¢ä¸€ä¸ªé›†åˆä¸­çš„æ•°æ®ï¼š\n\n```\ndb.users.find()\n```\n\nè¿™æ ·ä¼šæŸ¥è¯¢å‡ºhcyåº“ä¸­usersé›†åˆä¸‹é¢çš„æ‰€æœ‰æ•°æ®ï¼Œå¦‚æœéœ€è¦æ¡ä»¶æŸ¥æ‰¾ï¼Œåƒä¸‹é¢è¿™æ¡å‘½ä»¤ï¼Œåªéœ€è¦åœ¨find()æ–¹æ³•ä¸­ä¼ å…¥ä¸€ä¸ªjsonå¯¹è±¡ä½œä¸ºç­›é€‰æ¡ä»¶å³å¯ï¼š\n\n```\ndb.users.find({name:'hcy'})\n```\n\nåˆ é™¤æ•°æ®ï¼š\n\n```\ndb.users.remove()\n```\n\nä¸Šé¢çš„æ•°æ®ä¼šåˆ é™¤usersé›†åˆä¸‹å¾—æ‰€æœ‰æ–‡æ¡£(æ•°æ®)ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä½œä¸ºç­›é€‰æ¡ä»¶ï¼š\n\n```\ndb.users.remove({\n\tname : 'hcy'\n})\n```\n\nä¸Šé¢çš„å‘½ä»¤ä¼šåˆ é™¤æ‰usersé›†åˆä¸­ï¼Œæ‰€æœ‰nameå€¼ä¸ºhcyçš„æ‰€æœ‰æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªbooleanå€¼ï¼Œtrueä¸ºåªåˆ é™¤ä¸€æ¡ï¼š\n\n```\ndb.users.remove({\n\tname : 'hcy'\n}, true)\n```\n\nä¿®æ”¹æ•°æ®æœ‰ä¸¤ç§æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ update()æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨save()æ–¹æ³•ï¼Œå…ˆæ¥çœ‹update()æ–¹æ³•:\n\n```\ndb.collection.update(\n   <query>,\n   <update>,\n   {\n     upsert: <boolean>,\n     multi: <boolean>,\n     writeConcern: <document>\n   }\n)\n```\n\n>query : updateçš„æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼sql updateæŸ¥è¯¢å†…whereåé¢çš„ã€‚\n>update : updateçš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚$,$inc...ï¼‰ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsql updateæŸ¥è¯¢å†…setåé¢çš„\n>upsert : å¯é€‰ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸å­˜åœ¨updateçš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥objNew,trueä¸ºæ’å…¥ï¼Œé»˜è®¤æ˜¯falseï¼Œä¸æ’å…¥ã€‚\n>multi : å¯é€‰ï¼Œmongodb é»˜è®¤æ˜¯false,åªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸ºtrue,å°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°ã€‚\n>writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚\n\nè¿™é‡Œæˆ‘åªä»‹ç»äº†è¯­æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨save()æ–¹æ³•ï¼š\n\n```\ndb.collection.save(\n   <document>,\n   {\n     writeConcern: <document>\n   }\n)\n```\n\n>document : æ–‡æ¡£æ•°æ®ã€‚\n>writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚\n\nä¾‹å­å¦‚ä¸‹ï¼š\n\n```\ndb.users.save({\n\t\"_id\" : ObjectId(\"56064f89ade2f21f36b03136\"),\n    \"name\" : \"aaaa\",\n    \"age\" : \"100\"\n})\n```\n\nä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ›¿æ¢äº† _id ä¸º 56064f89ade2f21f36b03136 çš„æ–‡æ¡£æ•°æ®ã€‚\n\nå¦‚æœæƒ³äº†è§£æ›´å¤šmongodbåŸç”Ÿè¯­æ³•çŸ¥è¯†ï¼Œ[è¿™é‡Œ](http://www.runoob.com/mongodb/mongodb-tutorial.html)æ˜¯ä¸€ä¸ªå¥½å»å¤„\n\nç°åœ¨ï¼Œä½ åº”è¯¥å¯¹mongodbæœ‰äº†ä¸€å®šçš„äº†è§£äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åœ¨nodejsä¸­æ“ä½œmongodbå‘¢ï¼Ÿ\n\né¦–å…ˆåœ¨é¡¹ç›®ä¸­ä½¿ç”¨npmå®‰è£…mongodbæ¨¡å—\n\n```\nnpm install --save mongodb\n```\n\nå½“æˆ‘ä»¬æƒ³è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿™ä¸ªæ¨¡å—æ“ä½œæ•°æ®åº“çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼•å…¥è¯¥æ¨¡å—\n\n```\nvar MongoClient = require('mongodb').MongoClient;\n```\n\nä¸Šé¢çš„ä»£ç è¿”å›ä¸€ä¸ªmongodbå®¢æˆ·ç«¯å®ä¾‹ï¼Œè¿æ¥æ•°æ®åº“ï¼š\n\n```\nvar mongoConnectUrl = 'mongodb://localhost:27017/hcy';\nMongoClient.connect(mongoConnectUrl, function(err, db){\n\tif(err) return console.log(err);\n\tconsole.log('è¿æ¥æˆåŠŸ');\n});\n```\n\nä¸Šé¢çš„mongoConnectUrlæ˜¯æˆ‘ä»¬è¿æ¥mongodbæ•°æ®åº“çš„ä¸€ä¸ªurlï¼Œæ³¨æ„ï¼Œmongodbé»˜è®¤ç›‘å¬çš„ç«¯å£æ˜¯27017ï¼Œå¦å¤–ï¼Œå¦‚æœå§‹ç»ˆè¿æ¥ä¸æˆåŠŸï¼Œä½ å¯ä»¥æŠŠlocalhostæ¢æˆä½ ç”µè„‘çš„ipåœ°å€è¯•ä¸€è¯•ï¼Œç¬”è€…åœ¨æµ‹è¯•çš„æ—¶å€™åªèƒ½ä½¿ç”¨ipåœ°å€ï¼Œä½¿ç”¨localhostå§‹ç»ˆè¿æ¥å¤±è´¥ï¼Œåœ¨urlçš„æœ€åæ˜¯ä½ è¦è¿æ¥çš„æ•°æ®åº“ï¼Œè¿™é‡Œæˆ‘ä»¬è¿æ¥åˆ°hcyæ•°æ®åº“ã€‚\n\nè¿æ¥æ•°æ®åº“æˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå¹¶æ“ä½œé‡Œé¢çš„æ•°æ®ï¼Œæˆ‘ä»¬å°è£…ä¸€ä¸ªæ–¹æ³•ï¼š\n\n## æ’å…¥æ•°æ® ##\n\n```\n/**\n * æ’å…¥æ•°æ®\n * @method insertData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Array} data æ’å…¥çš„æ•°æ®\n * @param {Function} callback å›è°ƒå‡½æ•°\n * @return {Null}\n *\n */\nfunction insertData(mongoConnectUrl, coll, data, callback){\n\tMongoClient.connect(mongoConnectUrl, function(err, db){\n\t\tif(err) return console.log(err);\n\t\t// æ‰“å¼€é›†åˆ\n\t\tvar collection = db.collection(coll);\n\t\t// æ’å…¥æ•°æ®\n\t\tcollection.insertMany(data, function(err, result){\n\t\t\t//console.log(result)\n\t\t\t// è®°å¾—è¦å…³é—­æ•°æ®åº“\n\t\t\tdb.close();\n\t\t\tcallback(result);\n\t\t});\n\n\t});\n}\n```\n\n## æŸ¥è¯¢æ•°æ® ##\n\n```\n/**\n * æŸ¥è¯¢æ•°æ®\n * @method findData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Object} opation æ¡ä»¶\n * @param {Function} callback å›è°ƒå‡½æ•°\n * @return {Null}\n *\n */\nfunction findData(mongoConnectUrl, coll, opation, callback){\n\tMongoClient.connect(mongoConnectUrl, function(err, db){\n\t\tif(err) return console.log(err);\n\t\t// æ‰“å¼€é›†åˆ\n\t\tvar collection = db.collection(coll);\n\t\t// æ ¹æ®æ¡ä»¶æŸ¥è¯¢æ•°æ®\n\t\tvar userData = collection.find(opation);\n\t\t// éå†æ•°æ®\n\t\tuserData.toArray(function(err2, docs) {\n\t\t\t// docsæ˜¯æŸ¥è¯¢å‡ºæ¥çš„æ–‡æ¡£ï¼Œjsonå¯¹è±¡ï¼Œå¯ä»¥æ‰“å°å‡ºæ¥çœ‹çœ‹\n\t\t\tdb.close();\n\t\t\tcallback(docs);\n\t\t});\n\n\t});\n}\n```\n\n## åˆ é™¤æ•°æ® ##\n\n```\n/**\n * @method deleteData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Object} opation æ¡ä»¶\n * @param {Number} num åˆ é™¤æ•°æ®çš„æ•°é‡ï¼Œå³åˆ é™¤å‡ æ¡\n * @return {Null}\n *\n */\nfunction deleteData(mongoConnectUrl, coll, opation, num, callback){\n\tvar i = num;\n\tvar res = [];\n\tvar tempRes = [];\n\tvar thisFn = arguments.callee;\n\tMongoClient.connect(mongoConnectUrl, function(err, db){\n\t\tif(err) return console.log(err);\n\n\t\tvar collection = db.collection(coll);\n\t\tif(i > 0){\n\t\t\ti--;\n\t\t\tcollection.deleteOne(opation, function(err, result){\n\t\t\t\t// console.log(result)\n\t\t\t\tres.push(result);\n\t\t\t\tthisFn(mongoConnectUrl, coll, opation, i, callback);\n\t\t\t\tif(i == 0){\n\t\t\t\t\tdb.close();\n\t\t\t\t\ttempRes = res;\n\t\t\t\t\tres = []\n\t\t\t\t\ti = 0;\n\t\t\t\t\tcallback(tempRes);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t});\n\t\t}\n\n\t});\n},\n```\n\n## ä¿®æ”¹ä¸€æ¡æ•°æ® ##\n\n```\n/**\n * @method deleteData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Object} opation æ¡ä»¶\n * @param {Object} data æ›´æ–°çš„æ•°æ®\n * @return {Null}\n *\n */\nfunction deleteData(mongoConnectUrl, coll, opation, data, callback){\n\tMongoClient.connect(mongoConnectUrl, function(err, db){\n\t\tif(err) return console.log(err);\n\n\t\tvar collection = db.collection(coll);\n\t\t\n\t\tcollection.updateOne(opation, { $set: data }, function(err, result) {\n\t\t\tdb.close();\n\t\t\tcallback(result);\n\t\t});\n\n\t});\n},\n```\n\n\n\n\n\n\n","slug":"nodejsä½¿ç”¨mongodbåšæ•°æ®æŒä¹…åŒ–","published":1,"updated":"2015-12-02T08:59:56.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx51i000k47fyw2lra49p","content":"<blockquote>\n<p>å‰æ®µæ—¶é—´ï¼Œå†™äº†ä¸€ç¯‡åšå®¢ï¼Œè®²è§£äº†åœ¨<a href=\"http://hcysun.me/2015/11/21/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8brew%E5%AE%89%E8%A3%85mongodb/\">Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb</a>ï¼Œè¿™ç¯‡æ–‡ç« å¯ä»¥çœ‹åšæ˜¯ç»­ç¯‡ï¼Œä½¿ç”¨nodejsæ“ä½œmongodbï¼Œå¹¶å°è£…ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n<p>nodejsæ“ä½œmongodbï¼Œé¦–å…ˆè¦ä½¿ç”¨npmå®‰è£…æ“ä½œmongodbæ•°æ®åº“çš„åŒ…ï¼Œæœ‰ä¸¤ä¸ªé€‰æ‹© <a href=\"https://www.npmjs.com/package/mongoose\" target=\"_blank\" rel=\"external\">mongoose</a> å’Œ <a href=\"https://www.npmjs.com/package/mongodb\" target=\"_blank\" rel=\"external\">mongodb</a>ï¼Œç”±äºmongodbçš„ä½¿ç”¨æ–¹å¼æ›´æ¥è¿‘mongodbåŸç”Ÿçš„è¯­æ³•ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<a href=\"https://www.npmjs.com/package/mongodb\" target=\"_blank\" rel=\"external\">mongodb</a>æ¨¡å—ï¼Œæ“ä½œæ•°æ®åº“ã€‚</p>\n<p>åœ¨<a href=\"http://hcysun.me/2015/11/21/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8brew%E5%AE%89%E8%A3%85mongodb/\">Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb</a>è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå·²ç»è®²è§£äº†mongodbæ•°æ®åº“çš„æ€§è´¨å’Œå®‰è£…ï¼Œä¹Ÿä»‹ç»äº†ä¸€ä¸ªè¿æ¥mongodbçš„å®¢æˆ·ç«¯å·¥å…· Robomongo ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸åœ¨èµ˜è¿°ã€‚</p>\n<p>ä¸è¿‡ï¼Œç®€å•ä»‹ç»ä¸‹mongodbæ•°æ®åº“çš„è¯­æ³•è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œå¦‚æœä½ å·²ç»äº†è§£ï¼Œé‚£ä¹ˆå¯ä»¥è·³è¿‡è¿™é‡Œï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨åŸç”Ÿçš„è¯­æ³•æ¥åšä¸€æ¬¡CURDæ“ä½œã€‚</p>\n<h2 id=\"1ã€å¯åŠ¨mongodbæœåŠ¡\"><a href=\"#1ã€å¯åŠ¨mongodbæœåŠ¡\" class=\"headerlink\" title=\"1ã€å¯åŠ¨mongodbæœåŠ¡\"></a>1ã€å¯åŠ¨mongodbæœåŠ¡</h2><pre><code>mongo\n</code></pre><p>åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ mongo å°±å¯ä»¥å¯åŠ¨mongodbæœåŠ¡äº†ï¼Œæˆ‘ä»¬ä¼šè¿›å…¥åˆ°mongoçš„äº¤äº’æ¨¡å¼ï¼Œå¦‚å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512021.pic.jpg\" alt=\"å¯åŠ¨mongodbæœåŠ¡\"></p>\n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œmongoå¯åŠ¨åï¼Œé»˜è®¤è¿æ¥çš„æ˜¯testæ•°æ®åº“ï¼Œæ³¨æ„ï¼Œmongodbæ˜¯éå…³ç³»å‹æ•°æ®åº“ï¼Œå’ŒMySQLä¸åŒï¼Œåœ¨mongodbä¸­ï¼š</p>\n<pre><code>nodql           &lt;=====&gt;        sql\næ•°æ®åº“(database) &lt;=====&gt; æ•°æ®åº“(database)\né›†åˆ(collection) &lt;=====&gt; è¡¨(table)\næ–‡æ¡£(docs)         &lt;=====&gt; è¡Œ(rows)\nå­—æ®µ(field)         &lt;=====&gt; åˆ—(field)\n</code></pre><p>æˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹æˆ‘ä»¬å½“å‰æ“ä½œçš„æ•°æ®åº“ï¼š</p>\n<pre><code>db\n</code></pre><p>å¦‚ä¸‹ï¼Œæˆ‘ä»¬å½“å‰æ“ä½œçš„æ•°æ®åº“æ˜¯ test åº“ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512026.pic.jpg\" alt=\"æ˜¾ç¤ºå½“å‰æˆ‘ä»¬æ‰€æ“ä½œçš„æ•°æ®åº“\"></p>\n<p>ä¹Ÿå¯ä»¥æ‰§è¡Œä¸‹é¢è¿™æ¡å‘½ä»¤æ¥æŸ¥çœ‹æ‰€ä»¥æ•°æ®åº“ï¼š</p>\n<pre><code>show dbs\n</code></pre><p>å¦‚ä¸‹å›¾ï¼Œå±•ç¤ºå‡ºæˆ‘ä»¬æ‰€æœ‰çš„æ•°æ®åº“ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼Œå¦‚æœä½ çš„æ•°æ®åº“é‡Œé¢æ²¡æœ‰ä»»ä½•æ•°æ®ï¼Œæ˜¯ä¸ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512023.pic.jpg\" alt=\"æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“ï¼Œç©ºæ•°æ®åº“æ²¡æœ‰æ˜¾ç¤º\"></p>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤åˆ‡æ¢æ•°æ®åº“ï¼š</p>\n<pre><code>use hcy\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±åˆ‡æ¢åˆ°äº†æ•°æ®åº“åå­—ä¸ºhcyçš„æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œ db å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦åˆ‡æ¢æˆåŠŸï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512024.pic.jpg\" alt=\"åˆ‡æ¢æ•°æ®åº“\"></p>\n<p>æ³¨æ„ï¼Œä½¿ç”¨use db_nameæ¥åˆ‡æ¢æ•°æ®åº“çš„æ—¶å€™ï¼Œå¦‚æœè¯¥æ•°æ®åº“ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šåˆ›å»ºè¯¥æ•°æ®åº“ï¼Œæ‰€ä»¥å¦‚æœä½ è¦åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œä¹Ÿæ˜¯ç”¨useå‘½ä»¤å°±å¥½å•¦ã€‚</p>\n<p>å¦‚æœè¦åˆ é™¤ä¸€ä¸ªæ•°æ®åº“ï¼Œæˆ‘ä»¬é¦–å…ˆè¦åˆ‡æ¢åˆ°å½“å‰æ•°æ®åº“ä¸‹ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥åˆ é™¤è¿™ä¸ªæ•°æ®åº“äº†ï¼š</p>\n<pre><code>use hcy\n\ndb.dropDatabase()\n</code></pre><p>è¿™æ ·å°±ä¼šåˆ é™¤hcyè¿™ä¸ªæ•°æ®åº“ï¼Œæˆ‘ä»¬å†æ¥æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼Œå‘ç°hcyåº“å·²ç»ä¸è§äº†ï¼Œè¢«æˆ‘ä»¬åˆ æ‰äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512025.pic.jpg\" alt=\"åˆ é™¤æ•°æ®åº“\"></p>\n<p>ä¸‹é¢ï¼Œæˆ‘ä»¬è®²è¿°æœ€ç®€å•çš„curdæ“ä½œï¼š</p>\n<h3 id=\"1ã€å‘hcyæ•°æ®åº“ä¸­çš„usersé›†åˆæ’å…¥ä¸€ä¸ªæ–‡æ¡£\"><a href=\"#1ã€å‘hcyæ•°æ®åº“ä¸­çš„usersé›†åˆæ’å…¥ä¸€ä¸ªæ–‡æ¡£\" class=\"headerlink\" title=\"1ã€å‘hcyæ•°æ®åº“ä¸­çš„usersé›†åˆæ’å…¥ä¸€ä¸ªæ–‡æ¡£\"></a>1ã€å‘hcyæ•°æ®åº“ä¸­çš„usersé›†åˆæ’å…¥ä¸€ä¸ªæ–‡æ¡£</h3><p>æ ‡é¢˜ä¸­çš„è¯å¦‚æœç¿»è¯‘æˆsqlæ•°æ®åº“çš„è¯­è¨€å°±æ˜¯ï¼šâ€œå‘hcyæ•°æ®åº“ä¸­çš„usersè¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆå‘mongodbæ•°æ®åº“çš„é›†åˆä¸­æ’å…¥æ–‡æ¡£ï¼š</p>\n<pre><code>use hcy\n\ndb.users.insert({\n    name : &#39;hcy&#39;,\n    age : 21\n})\n</code></pre><p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ‡æ¢åˆ°hcyæ•°æ®åº“ï¼Œå¦‚æœæ²¡æœ‰è¯¥æ•°æ®åº“å°±ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥æ•°æ®åº“ï¼Œç„¶åæ‰§è¡Œæ’å…¥æ•°æ®æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥è¯¢ä¸€ä¸ªé›†åˆä¸­çš„æ•°æ®ï¼š</p>\n<pre><code>db.users.find()\n</code></pre><p>è¿™æ ·ä¼šæŸ¥è¯¢å‡ºhcyåº“ä¸­usersé›†åˆä¸‹é¢çš„æ‰€æœ‰æ•°æ®ï¼Œå¦‚æœéœ€è¦æ¡ä»¶æŸ¥æ‰¾ï¼Œåƒä¸‹é¢è¿™æ¡å‘½ä»¤ï¼Œåªéœ€è¦åœ¨find()æ–¹æ³•ä¸­ä¼ å…¥ä¸€ä¸ªjsonå¯¹è±¡ä½œä¸ºç­›é€‰æ¡ä»¶å³å¯ï¼š</p>\n<pre><code>db.users.find({name:&#39;hcy&#39;})\n</code></pre><p>åˆ é™¤æ•°æ®ï¼š</p>\n<pre><code>db.users.remove()\n</code></pre><p>ä¸Šé¢çš„æ•°æ®ä¼šåˆ é™¤usersé›†åˆä¸‹å¾—æ‰€æœ‰æ–‡æ¡£(æ•°æ®)ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä½œä¸ºç­›é€‰æ¡ä»¶ï¼š</p>\n<pre><code>db.users.remove({\n    name : &#39;hcy&#39;\n})\n</code></pre><p>ä¸Šé¢çš„å‘½ä»¤ä¼šåˆ é™¤æ‰usersé›†åˆä¸­ï¼Œæ‰€æœ‰nameå€¼ä¸ºhcyçš„æ‰€æœ‰æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªbooleanå€¼ï¼Œtrueä¸ºåªåˆ é™¤ä¸€æ¡ï¼š</p>\n<pre><code>db.users.remove({\n    name : &#39;hcy&#39;\n}, true)\n</code></pre><p>ä¿®æ”¹æ•°æ®æœ‰ä¸¤ç§æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ update()æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨save()æ–¹æ³•ï¼Œå…ˆæ¥çœ‹update()æ–¹æ³•:</p>\n<pre><code>db.collection.update(\n   &lt;query&gt;,\n   &lt;update&gt;,\n   {\n     upsert: &lt;boolean&gt;,\n     multi: &lt;boolean&gt;,\n     writeConcern: &lt;document&gt;\n   }\n)\n</code></pre><blockquote>\n<p>query : updateçš„æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼sql updateæŸ¥è¯¢å†…whereåé¢çš„ã€‚<br>update : updateçš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚$,$incâ€¦ï¼‰ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsql updateæŸ¥è¯¢å†…setåé¢çš„<br>upsert : å¯é€‰ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸å­˜åœ¨updateçš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥objNew,trueä¸ºæ’å…¥ï¼Œé»˜è®¤æ˜¯falseï¼Œä¸æ’å…¥ã€‚<br>multi : å¯é€‰ï¼Œmongodb é»˜è®¤æ˜¯false,åªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸ºtrue,å°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°ã€‚<br>writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚</p>\n</blockquote>\n<p>è¿™é‡Œæˆ‘åªä»‹ç»äº†è¯­æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨save()æ–¹æ³•ï¼š</p>\n<pre><code>db.collection.save(\n   &lt;document&gt;,\n   {\n     writeConcern: &lt;document&gt;\n   }\n)\n</code></pre><blockquote>\n<p>document : æ–‡æ¡£æ•°æ®ã€‚<br>writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚</p>\n</blockquote>\n<p>ä¾‹å­å¦‚ä¸‹ï¼š</p>\n<pre><code>db.users.save({\n    &quot;_id&quot; : ObjectId(&quot;56064f89ade2f21f36b03136&quot;),\n    &quot;name&quot; : &quot;aaaa&quot;,\n    &quot;age&quot; : &quot;100&quot;\n})\n</code></pre><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ›¿æ¢äº† _id ä¸º 56064f89ade2f21f36b03136 çš„æ–‡æ¡£æ•°æ®ã€‚</p>\n<p>å¦‚æœæƒ³äº†è§£æ›´å¤šmongodbåŸç”Ÿè¯­æ³•çŸ¥è¯†ï¼Œ<a href=\"http://www.runoob.com/mongodb/mongodb-tutorial.html\" target=\"_blank\" rel=\"external\">è¿™é‡Œ</a>æ˜¯ä¸€ä¸ªå¥½å»å¤„</p>\n<p>ç°åœ¨ï¼Œä½ åº”è¯¥å¯¹mongodbæœ‰äº†ä¸€å®šçš„äº†è§£äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åœ¨nodejsä¸­æ“ä½œmongodbå‘¢ï¼Ÿ</p>\n<p>é¦–å…ˆåœ¨é¡¹ç›®ä¸­ä½¿ç”¨npmå®‰è£…mongodbæ¨¡å—</p>\n<pre><code>npm install --save mongodb\n</code></pre><p>å½“æˆ‘ä»¬æƒ³è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿™ä¸ªæ¨¡å—æ“ä½œæ•°æ®åº“çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼•å…¥è¯¥æ¨¡å—</p>\n<pre><code>var MongoClient = require(&#39;mongodb&#39;).MongoClient;\n</code></pre><p>ä¸Šé¢çš„ä»£ç è¿”å›ä¸€ä¸ªmongodbå®¢æˆ·ç«¯å®ä¾‹ï¼Œè¿æ¥æ•°æ®åº“ï¼š</p>\n<pre><code>var mongoConnectUrl = &#39;mongodb://localhost:27017/hcy&#39;;\nMongoClient.connect(mongoConnectUrl, function(err, db){\n    if(err) return console.log(err);\n    console.log(&#39;è¿æ¥æˆåŠŸ&#39;);\n});\n</code></pre><p>ä¸Šé¢çš„mongoConnectUrlæ˜¯æˆ‘ä»¬è¿æ¥mongodbæ•°æ®åº“çš„ä¸€ä¸ªurlï¼Œæ³¨æ„ï¼Œmongodbé»˜è®¤ç›‘å¬çš„ç«¯å£æ˜¯27017ï¼Œå¦å¤–ï¼Œå¦‚æœå§‹ç»ˆè¿æ¥ä¸æˆåŠŸï¼Œä½ å¯ä»¥æŠŠlocalhostæ¢æˆä½ ç”µè„‘çš„ipåœ°å€è¯•ä¸€è¯•ï¼Œç¬”è€…åœ¨æµ‹è¯•çš„æ—¶å€™åªèƒ½ä½¿ç”¨ipåœ°å€ï¼Œä½¿ç”¨localhostå§‹ç»ˆè¿æ¥å¤±è´¥ï¼Œåœ¨urlçš„æœ€åæ˜¯ä½ è¦è¿æ¥çš„æ•°æ®åº“ï¼Œè¿™é‡Œæˆ‘ä»¬è¿æ¥åˆ°hcyæ•°æ®åº“ã€‚</p>\n<p>è¿æ¥æ•°æ®åº“æˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå¹¶æ“ä½œé‡Œé¢çš„æ•°æ®ï¼Œæˆ‘ä»¬å°è£…ä¸€ä¸ªæ–¹æ³•ï¼š</p>\n<h2 id=\"æ’å…¥æ•°æ®\"><a href=\"#æ’å…¥æ•°æ®\" class=\"headerlink\" title=\"æ’å…¥æ•°æ®\"></a>æ’å…¥æ•°æ®</h2><pre><code>/**\n * æ’å…¥æ•°æ®\n * @method insertData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Array} data æ’å…¥çš„æ•°æ®\n * @param {Function} callback å›è°ƒå‡½æ•°\n * @return {Null}\n *\n */\nfunction insertData(mongoConnectUrl, coll, data, callback){\n    MongoClient.connect(mongoConnectUrl, function(err, db){\n        if(err) return console.log(err);\n        // æ‰“å¼€é›†åˆ\n        var collection = db.collection(coll);\n        // æ’å…¥æ•°æ®\n        collection.insertMany(data, function(err, result){\n            //console.log(result)\n            // è®°å¾—è¦å…³é—­æ•°æ®åº“\n            db.close();\n            callback(result);\n        });\n\n    });\n}\n</code></pre><h2 id=\"æŸ¥è¯¢æ•°æ®\"><a href=\"#æŸ¥è¯¢æ•°æ®\" class=\"headerlink\" title=\"æŸ¥è¯¢æ•°æ®\"></a>æŸ¥è¯¢æ•°æ®</h2><pre><code>/**\n * æŸ¥è¯¢æ•°æ®\n * @method findData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Object} opation æ¡ä»¶\n * @param {Function} callback å›è°ƒå‡½æ•°\n * @return {Null}\n *\n */\nfunction findData(mongoConnectUrl, coll, opation, callback){\n    MongoClient.connect(mongoConnectUrl, function(err, db){\n        if(err) return console.log(err);\n        // æ‰“å¼€é›†åˆ\n        var collection = db.collection(coll);\n        // æ ¹æ®æ¡ä»¶æŸ¥è¯¢æ•°æ®\n        var userData = collection.find(opation);\n        // éå†æ•°æ®\n        userData.toArray(function(err2, docs) {\n            // docsæ˜¯æŸ¥è¯¢å‡ºæ¥çš„æ–‡æ¡£ï¼Œjsonå¯¹è±¡ï¼Œå¯ä»¥æ‰“å°å‡ºæ¥çœ‹çœ‹\n            db.close();\n            callback(docs);\n        });\n\n    });\n}\n</code></pre><h2 id=\"åˆ é™¤æ•°æ®\"><a href=\"#åˆ é™¤æ•°æ®\" class=\"headerlink\" title=\"åˆ é™¤æ•°æ®\"></a>åˆ é™¤æ•°æ®</h2><pre><code>/**\n * @method deleteData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Object} opation æ¡ä»¶\n * @param {Number} num åˆ é™¤æ•°æ®çš„æ•°é‡ï¼Œå³åˆ é™¤å‡ æ¡\n * @return {Null}\n *\n */\nfunction deleteData(mongoConnectUrl, coll, opation, num, callback){\n    var i = num;\n    var res = [];\n    var tempRes = [];\n    var thisFn = arguments.callee;\n    MongoClient.connect(mongoConnectUrl, function(err, db){\n        if(err) return console.log(err);\n\n        var collection = db.collection(coll);\n        if(i &gt; 0){\n            i--;\n            collection.deleteOne(opation, function(err, result){\n                // console.log(result)\n                res.push(result);\n                thisFn(mongoConnectUrl, coll, opation, i, callback);\n                if(i == 0){\n                    db.close();\n                    tempRes = res;\n                    res = []\n                    i = 0;\n                    callback(tempRes);\n                }\n\n            });\n        }\n\n    });\n},\n</code></pre><h2 id=\"ä¿®æ”¹ä¸€æ¡æ•°æ®\"><a href=\"#ä¿®æ”¹ä¸€æ¡æ•°æ®\" class=\"headerlink\" title=\"ä¿®æ”¹ä¸€æ¡æ•°æ®\"></a>ä¿®æ”¹ä¸€æ¡æ•°æ®</h2><pre><code>/**\n * @method deleteData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Object} opation æ¡ä»¶\n * @param {Object} data æ›´æ–°çš„æ•°æ®\n * @return {Null}\n *\n */\nfunction deleteData(mongoConnectUrl, coll, opation, data, callback){\n    MongoClient.connect(mongoConnectUrl, function(err, db){\n        if(err) return console.log(err);\n\n        var collection = db.collection(coll);\n\n        collection.updateOne(opation, { $set: data }, function(err, result) {\n            db.close();\n            callback(result);\n        });\n\n    });\n},\n</code></pre>","site":{"data":{}},"excerpt":"<blockquote>\n<p>å‰æ®µæ—¶é—´ï¼Œå†™äº†ä¸€ç¯‡åšå®¢ï¼Œè®²è§£äº†åœ¨<a href=\"http://hcysun.me/2015/11/21/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8brew%E5%AE%89%E8%A3%85mongodb/\">Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb</a>ï¼Œè¿™ç¯‡æ–‡ç« å¯ä»¥çœ‹åšæ˜¯ç»­ç¯‡ï¼Œä½¿ç”¨nodejsæ“ä½œmongodbï¼Œå¹¶å°è£…ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•ã€‚</p>\n</blockquote>","more":"<p>nodejsæ“ä½œmongodbï¼Œé¦–å…ˆè¦ä½¿ç”¨npmå®‰è£…æ“ä½œmongodbæ•°æ®åº“çš„åŒ…ï¼Œæœ‰ä¸¤ä¸ªé€‰æ‹© <a href=\"https://www.npmjs.com/package/mongoose\" target=\"_blank\" rel=\"external\">mongoose</a> å’Œ <a href=\"https://www.npmjs.com/package/mongodb\" target=\"_blank\" rel=\"external\">mongodb</a>ï¼Œç”±äºmongodbçš„ä½¿ç”¨æ–¹å¼æ›´æ¥è¿‘mongodbåŸç”Ÿçš„è¯­æ³•ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<a href=\"https://www.npmjs.com/package/mongodb\" target=\"_blank\" rel=\"external\">mongodb</a>æ¨¡å—ï¼Œæ“ä½œæ•°æ®åº“ã€‚</p>\n<p>åœ¨<a href=\"http://hcysun.me/2015/11/21/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8brew%E5%AE%89%E8%A3%85mongodb/\">Macä¸‹ä½¿ç”¨brewå®‰è£…mongodb</a>è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå·²ç»è®²è§£äº†mongodbæ•°æ®åº“çš„æ€§è´¨å’Œå®‰è£…ï¼Œä¹Ÿä»‹ç»äº†ä¸€ä¸ªè¿æ¥mongodbçš„å®¢æˆ·ç«¯å·¥å…· Robomongo ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸åœ¨èµ˜è¿°ã€‚</p>\n<p>ä¸è¿‡ï¼Œç®€å•ä»‹ç»ä¸‹mongodbæ•°æ®åº“çš„è¯­æ³•è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œå¦‚æœä½ å·²ç»äº†è§£ï¼Œé‚£ä¹ˆå¯ä»¥è·³è¿‡è¿™é‡Œï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨åŸç”Ÿçš„è¯­æ³•æ¥åšä¸€æ¬¡CURDæ“ä½œã€‚</p>\n<h2 id=\"1ã€å¯åŠ¨mongodbæœåŠ¡\"><a href=\"#1ã€å¯åŠ¨mongodbæœåŠ¡\" class=\"headerlink\" title=\"1ã€å¯åŠ¨mongodbæœåŠ¡\"></a>1ã€å¯åŠ¨mongodbæœåŠ¡</h2><pre><code>mongo\n</code></pre><p>åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ mongo å°±å¯ä»¥å¯åŠ¨mongodbæœåŠ¡äº†ï¼Œæˆ‘ä»¬ä¼šè¿›å…¥åˆ°mongoçš„äº¤äº’æ¨¡å¼ï¼Œå¦‚å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512021.pic.jpg\" alt=\"å¯åŠ¨mongodbæœåŠ¡\"></p>\n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œmongoå¯åŠ¨åï¼Œé»˜è®¤è¿æ¥çš„æ˜¯testæ•°æ®åº“ï¼Œæ³¨æ„ï¼Œmongodbæ˜¯éå…³ç³»å‹æ•°æ®åº“ï¼Œå’ŒMySQLä¸åŒï¼Œåœ¨mongodbä¸­ï¼š</p>\n<pre><code>nodql           &lt;=====&gt;        sql\næ•°æ®åº“(database) &lt;=====&gt; æ•°æ®åº“(database)\né›†åˆ(collection) &lt;=====&gt; è¡¨(table)\næ–‡æ¡£(docs)         &lt;=====&gt; è¡Œ(rows)\nå­—æ®µ(field)         &lt;=====&gt; åˆ—(field)\n</code></pre><p>æˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹æˆ‘ä»¬å½“å‰æ“ä½œçš„æ•°æ®åº“ï¼š</p>\n<pre><code>db\n</code></pre><p>å¦‚ä¸‹ï¼Œæˆ‘ä»¬å½“å‰æ“ä½œçš„æ•°æ®åº“æ˜¯ test åº“ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512026.pic.jpg\" alt=\"æ˜¾ç¤ºå½“å‰æˆ‘ä»¬æ‰€æ“ä½œçš„æ•°æ®åº“\"></p>\n<p>ä¹Ÿå¯ä»¥æ‰§è¡Œä¸‹é¢è¿™æ¡å‘½ä»¤æ¥æŸ¥çœ‹æ‰€ä»¥æ•°æ®åº“ï¼š</p>\n<pre><code>show dbs\n</code></pre><p>å¦‚ä¸‹å›¾ï¼Œå±•ç¤ºå‡ºæˆ‘ä»¬æ‰€æœ‰çš„æ•°æ®åº“ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼Œå¦‚æœä½ çš„æ•°æ®åº“é‡Œé¢æ²¡æœ‰ä»»ä½•æ•°æ®ï¼Œæ˜¯ä¸ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512023.pic.jpg\" alt=\"æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“ï¼Œç©ºæ•°æ®åº“æ²¡æœ‰æ˜¾ç¤º\"></p>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤åˆ‡æ¢æ•°æ®åº“ï¼š</p>\n<pre><code>use hcy\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±åˆ‡æ¢åˆ°äº†æ•°æ®åº“åå­—ä¸ºhcyçš„æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œ db å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦åˆ‡æ¢æˆåŠŸï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512024.pic.jpg\" alt=\"åˆ‡æ¢æ•°æ®åº“\"></p>\n<p>æ³¨æ„ï¼Œä½¿ç”¨use db_nameæ¥åˆ‡æ¢æ•°æ®åº“çš„æ—¶å€™ï¼Œå¦‚æœè¯¥æ•°æ®åº“ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šåˆ›å»ºè¯¥æ•°æ®åº“ï¼Œæ‰€ä»¥å¦‚æœä½ è¦åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œä¹Ÿæ˜¯ç”¨useå‘½ä»¤å°±å¥½å•¦ã€‚</p>\n<p>å¦‚æœè¦åˆ é™¤ä¸€ä¸ªæ•°æ®åº“ï¼Œæˆ‘ä»¬é¦–å…ˆè¦åˆ‡æ¢åˆ°å½“å‰æ•°æ®åº“ä¸‹ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥åˆ é™¤è¿™ä¸ªæ•°æ®åº“äº†ï¼š</p>\n<pre><code>use hcy\n\ndb.dropDatabase()\n</code></pre><p>è¿™æ ·å°±ä¼šåˆ é™¤hcyè¿™ä¸ªæ•°æ®åº“ï¼Œæˆ‘ä»¬å†æ¥æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼Œå‘ç°hcyåº“å·²ç»ä¸è§äº†ï¼Œè¢«æˆ‘ä»¬åˆ æ‰äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512025.pic.jpg\" alt=\"åˆ é™¤æ•°æ®åº“\"></p>\n<p>ä¸‹é¢ï¼Œæˆ‘ä»¬è®²è¿°æœ€ç®€å•çš„curdæ“ä½œï¼š</p>\n<h3 id=\"1ã€å‘hcyæ•°æ®åº“ä¸­çš„usersé›†åˆæ’å…¥ä¸€ä¸ªæ–‡æ¡£\"><a href=\"#1ã€å‘hcyæ•°æ®åº“ä¸­çš„usersé›†åˆæ’å…¥ä¸€ä¸ªæ–‡æ¡£\" class=\"headerlink\" title=\"1ã€å‘hcyæ•°æ®åº“ä¸­çš„usersé›†åˆæ’å…¥ä¸€ä¸ªæ–‡æ¡£\"></a>1ã€å‘hcyæ•°æ®åº“ä¸­çš„usersé›†åˆæ’å…¥ä¸€ä¸ªæ–‡æ¡£</h3><p>æ ‡é¢˜ä¸­çš„è¯å¦‚æœç¿»è¯‘æˆsqlæ•°æ®åº“çš„è¯­è¨€å°±æ˜¯ï¼šâ€œå‘hcyæ•°æ®åº“ä¸­çš„usersè¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆå‘mongodbæ•°æ®åº“çš„é›†åˆä¸­æ’å…¥æ–‡æ¡£ï¼š</p>\n<pre><code>use hcy\n\ndb.users.insert({\n    name : &#39;hcy&#39;,\n    age : 21\n})\n</code></pre><p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ‡æ¢åˆ°hcyæ•°æ®åº“ï¼Œå¦‚æœæ²¡æœ‰è¯¥æ•°æ®åº“å°±ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥æ•°æ®åº“ï¼Œç„¶åæ‰§è¡Œæ’å…¥æ•°æ®æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥è¯¢ä¸€ä¸ªé›†åˆä¸­çš„æ•°æ®ï¼š</p>\n<pre><code>db.users.find()\n</code></pre><p>è¿™æ ·ä¼šæŸ¥è¯¢å‡ºhcyåº“ä¸­usersé›†åˆä¸‹é¢çš„æ‰€æœ‰æ•°æ®ï¼Œå¦‚æœéœ€è¦æ¡ä»¶æŸ¥æ‰¾ï¼Œåƒä¸‹é¢è¿™æ¡å‘½ä»¤ï¼Œåªéœ€è¦åœ¨find()æ–¹æ³•ä¸­ä¼ å…¥ä¸€ä¸ªjsonå¯¹è±¡ä½œä¸ºç­›é€‰æ¡ä»¶å³å¯ï¼š</p>\n<pre><code>db.users.find({name:&#39;hcy&#39;})\n</code></pre><p>åˆ é™¤æ•°æ®ï¼š</p>\n<pre><code>db.users.remove()\n</code></pre><p>ä¸Šé¢çš„æ•°æ®ä¼šåˆ é™¤usersé›†åˆä¸‹å¾—æ‰€æœ‰æ–‡æ¡£(æ•°æ®)ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä½œä¸ºç­›é€‰æ¡ä»¶ï¼š</p>\n<pre><code>db.users.remove({\n    name : &#39;hcy&#39;\n})\n</code></pre><p>ä¸Šé¢çš„å‘½ä»¤ä¼šåˆ é™¤æ‰usersé›†åˆä¸­ï¼Œæ‰€æœ‰nameå€¼ä¸ºhcyçš„æ‰€æœ‰æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªbooleanå€¼ï¼Œtrueä¸ºåªåˆ é™¤ä¸€æ¡ï¼š</p>\n<pre><code>db.users.remove({\n    name : &#39;hcy&#39;\n}, true)\n</code></pre><p>ä¿®æ”¹æ•°æ®æœ‰ä¸¤ç§æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ update()æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨save()æ–¹æ³•ï¼Œå…ˆæ¥çœ‹update()æ–¹æ³•:</p>\n<pre><code>db.collection.update(\n   &lt;query&gt;,\n   &lt;update&gt;,\n   {\n     upsert: &lt;boolean&gt;,\n     multi: &lt;boolean&gt;,\n     writeConcern: &lt;document&gt;\n   }\n)\n</code></pre><blockquote>\n<p>query : updateçš„æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼sql updateæŸ¥è¯¢å†…whereåé¢çš„ã€‚<br>update : updateçš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚$,$incâ€¦ï¼‰ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsql updateæŸ¥è¯¢å†…setåé¢çš„<br>upsert : å¯é€‰ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸å­˜åœ¨updateçš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥objNew,trueä¸ºæ’å…¥ï¼Œé»˜è®¤æ˜¯falseï¼Œä¸æ’å…¥ã€‚<br>multi : å¯é€‰ï¼Œmongodb é»˜è®¤æ˜¯false,åªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸ºtrue,å°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°ã€‚<br>writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚</p>\n</blockquote>\n<p>è¿™é‡Œæˆ‘åªä»‹ç»äº†è¯­æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨save()æ–¹æ³•ï¼š</p>\n<pre><code>db.collection.save(\n   &lt;document&gt;,\n   {\n     writeConcern: &lt;document&gt;\n   }\n)\n</code></pre><blockquote>\n<p>document : æ–‡æ¡£æ•°æ®ã€‚<br>writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚</p>\n</blockquote>\n<p>ä¾‹å­å¦‚ä¸‹ï¼š</p>\n<pre><code>db.users.save({\n    &quot;_id&quot; : ObjectId(&quot;56064f89ade2f21f36b03136&quot;),\n    &quot;name&quot; : &quot;aaaa&quot;,\n    &quot;age&quot; : &quot;100&quot;\n})\n</code></pre><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ›¿æ¢äº† _id ä¸º 56064f89ade2f21f36b03136 çš„æ–‡æ¡£æ•°æ®ã€‚</p>\n<p>å¦‚æœæƒ³äº†è§£æ›´å¤šmongodbåŸç”Ÿè¯­æ³•çŸ¥è¯†ï¼Œ<a href=\"http://www.runoob.com/mongodb/mongodb-tutorial.html\" target=\"_blank\" rel=\"external\">è¿™é‡Œ</a>æ˜¯ä¸€ä¸ªå¥½å»å¤„</p>\n<p>ç°åœ¨ï¼Œä½ åº”è¯¥å¯¹mongodbæœ‰äº†ä¸€å®šçš„äº†è§£äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åœ¨nodejsä¸­æ“ä½œmongodbå‘¢ï¼Ÿ</p>\n<p>é¦–å…ˆåœ¨é¡¹ç›®ä¸­ä½¿ç”¨npmå®‰è£…mongodbæ¨¡å—</p>\n<pre><code>npm install --save mongodb\n</code></pre><p>å½“æˆ‘ä»¬æƒ³è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿™ä¸ªæ¨¡å—æ“ä½œæ•°æ®åº“çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼•å…¥è¯¥æ¨¡å—</p>\n<pre><code>var MongoClient = require(&#39;mongodb&#39;).MongoClient;\n</code></pre><p>ä¸Šé¢çš„ä»£ç è¿”å›ä¸€ä¸ªmongodbå®¢æˆ·ç«¯å®ä¾‹ï¼Œè¿æ¥æ•°æ®åº“ï¼š</p>\n<pre><code>var mongoConnectUrl = &#39;mongodb://localhost:27017/hcy&#39;;\nMongoClient.connect(mongoConnectUrl, function(err, db){\n    if(err) return console.log(err);\n    console.log(&#39;è¿æ¥æˆåŠŸ&#39;);\n});\n</code></pre><p>ä¸Šé¢çš„mongoConnectUrlæ˜¯æˆ‘ä»¬è¿æ¥mongodbæ•°æ®åº“çš„ä¸€ä¸ªurlï¼Œæ³¨æ„ï¼Œmongodbé»˜è®¤ç›‘å¬çš„ç«¯å£æ˜¯27017ï¼Œå¦å¤–ï¼Œå¦‚æœå§‹ç»ˆè¿æ¥ä¸æˆåŠŸï¼Œä½ å¯ä»¥æŠŠlocalhostæ¢æˆä½ ç”µè„‘çš„ipåœ°å€è¯•ä¸€è¯•ï¼Œç¬”è€…åœ¨æµ‹è¯•çš„æ—¶å€™åªèƒ½ä½¿ç”¨ipåœ°å€ï¼Œä½¿ç”¨localhostå§‹ç»ˆè¿æ¥å¤±è´¥ï¼Œåœ¨urlçš„æœ€åæ˜¯ä½ è¦è¿æ¥çš„æ•°æ®åº“ï¼Œè¿™é‡Œæˆ‘ä»¬è¿æ¥åˆ°hcyæ•°æ®åº“ã€‚</p>\n<p>è¿æ¥æ•°æ®åº“æˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå¹¶æ“ä½œé‡Œé¢çš„æ•°æ®ï¼Œæˆ‘ä»¬å°è£…ä¸€ä¸ªæ–¹æ³•ï¼š</p>\n<h2 id=\"æ’å…¥æ•°æ®\"><a href=\"#æ’å…¥æ•°æ®\" class=\"headerlink\" title=\"æ’å…¥æ•°æ®\"></a>æ’å…¥æ•°æ®</h2><pre><code>/**\n * æ’å…¥æ•°æ®\n * @method insertData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Array} data æ’å…¥çš„æ•°æ®\n * @param {Function} callback å›è°ƒå‡½æ•°\n * @return {Null}\n *\n */\nfunction insertData(mongoConnectUrl, coll, data, callback){\n    MongoClient.connect(mongoConnectUrl, function(err, db){\n        if(err) return console.log(err);\n        // æ‰“å¼€é›†åˆ\n        var collection = db.collection(coll);\n        // æ’å…¥æ•°æ®\n        collection.insertMany(data, function(err, result){\n            //console.log(result)\n            // è®°å¾—è¦å…³é—­æ•°æ®åº“\n            db.close();\n            callback(result);\n        });\n\n    });\n}\n</code></pre><h2 id=\"æŸ¥è¯¢æ•°æ®\"><a href=\"#æŸ¥è¯¢æ•°æ®\" class=\"headerlink\" title=\"æŸ¥è¯¢æ•°æ®\"></a>æŸ¥è¯¢æ•°æ®</h2><pre><code>/**\n * æŸ¥è¯¢æ•°æ®\n * @method findData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Object} opation æ¡ä»¶\n * @param {Function} callback å›è°ƒå‡½æ•°\n * @return {Null}\n *\n */\nfunction findData(mongoConnectUrl, coll, opation, callback){\n    MongoClient.connect(mongoConnectUrl, function(err, db){\n        if(err) return console.log(err);\n        // æ‰“å¼€é›†åˆ\n        var collection = db.collection(coll);\n        // æ ¹æ®æ¡ä»¶æŸ¥è¯¢æ•°æ®\n        var userData = collection.find(opation);\n        // éå†æ•°æ®\n        userData.toArray(function(err2, docs) {\n            // docsæ˜¯æŸ¥è¯¢å‡ºæ¥çš„æ–‡æ¡£ï¼Œjsonå¯¹è±¡ï¼Œå¯ä»¥æ‰“å°å‡ºæ¥çœ‹çœ‹\n            db.close();\n            callback(docs);\n        });\n\n    });\n}\n</code></pre><h2 id=\"åˆ é™¤æ•°æ®\"><a href=\"#åˆ é™¤æ•°æ®\" class=\"headerlink\" title=\"åˆ é™¤æ•°æ®\"></a>åˆ é™¤æ•°æ®</h2><pre><code>/**\n * @method deleteData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Object} opation æ¡ä»¶\n * @param {Number} num åˆ é™¤æ•°æ®çš„æ•°é‡ï¼Œå³åˆ é™¤å‡ æ¡\n * @return {Null}\n *\n */\nfunction deleteData(mongoConnectUrl, coll, opation, num, callback){\n    var i = num;\n    var res = [];\n    var tempRes = [];\n    var thisFn = arguments.callee;\n    MongoClient.connect(mongoConnectUrl, function(err, db){\n        if(err) return console.log(err);\n\n        var collection = db.collection(coll);\n        if(i &gt; 0){\n            i--;\n            collection.deleteOne(opation, function(err, result){\n                // console.log(result)\n                res.push(result);\n                thisFn(mongoConnectUrl, coll, opation, i, callback);\n                if(i == 0){\n                    db.close();\n                    tempRes = res;\n                    res = []\n                    i = 0;\n                    callback(tempRes);\n                }\n\n            });\n        }\n\n    });\n},\n</code></pre><h2 id=\"ä¿®æ”¹ä¸€æ¡æ•°æ®\"><a href=\"#ä¿®æ”¹ä¸€æ¡æ•°æ®\" class=\"headerlink\" title=\"ä¿®æ”¹ä¸€æ¡æ•°æ®\"></a>ä¿®æ”¹ä¸€æ¡æ•°æ®</h2><pre><code>/**\n * @method deleteData\n * @param {String} mongoConnectUrl æ•°æ®åº“è¿æ¥\n * @param {String} coll é›†åˆåç§°\n * @param {Object} opation æ¡ä»¶\n * @param {Object} data æ›´æ–°çš„æ•°æ®\n * @return {Null}\n *\n */\nfunction deleteData(mongoConnectUrl, coll, opation, data, callback){\n    MongoClient.connect(mongoConnectUrl, function(err, db){\n        if(err) return console.log(err);\n\n        var collection = db.collection(coll);\n\n        collection.updateOne(opation, { $set: data }, function(err, result) {\n            db.close();\n            callback(result);\n        });\n\n    });\n},\n</code></pre>"},{"title":"é¡¹ç›®è¿ç§»é—®é¢˜æ€»ç»“","date":"2015-12-26T02:53:12.000Z","_content":"\n>ä¹‹å‰åœ¨Macç³»ç»Ÿä¸‹æ­å»ºäº†ä¸€å¥—ç”¨äºè‡ªåŠ¨åŒ–æ„å»ºH5é¡¹ç›®çš„å¹³å°ï¼Œä¸€ç›´ç”¨MacåšserviceæœåŠ¡ï¼Œç°åœ¨è¦å°†é¡¹ç›®è¿ç§»åˆ°Ubuntuä¸Šé¢ï¼Œä¸‹é¢æ˜¯æ•´ç†äº†è¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œä¾›ä»¥åæŸ¥é˜…\n\n![Ubuntu](http://7xlolm.com1.z0.glb.clouddn.com/20151226Ubuntu.jpg)\n\n<!-- more -->\n\n# Ubuntuä¸‹å®‰è£…gitå’Œnode #\n\nå½“æ—¶åœ¨åšé¡¹ç›®è¿ç§»çš„æ—¶å€™å¹¶æ²¡æœ‰æœåŠ¡å™¨ï¼Œæ‰€ä»¥åªèƒ½ç”¨æ—è¾¹çš„ä¸€å°windowså®‰è£…ä¸ªåŒç³»ç»Ÿï¼Œæ¥å……å½“æœåŠ¡å™¨äº†ï¼Œå®‰è£…æ–¹æ³•ç½‘ä¸Šå¾ˆå¤šï¼Œä¸è¿‡æˆ‘æ¨èä¸€ä¸ªæœ‹å‹çš„åšå®¢ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘æ‰€å®‰è£…çš„Ubuntuçš„ç‰ˆæœ¬æ˜¯14.04çš„ï¼Œå¹¶ä¸”æ˜¯serverç‰ˆçš„ï¼Œä¸è¯¥åšå®¢ä¸ç¬¦ï¼Œä½†æ˜¯åŸç†ç›¸åŒï¼Œè´´å‡º[åšå®¢åœ°å€](https://xuri.me/2013/04/09/easybcd-install-ubuntu.html)ã€‚\n\n## Ubuntu ä¸‹å®‰è£… git ##\n\nUbuntuçš„åŒ…ç®¡ç†æ˜¯apt-getï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…git:\n\n```\nsudo apt-get install git\n```\n\nä½†æ˜¯è¿™æ ·å®‰è£…çš„gitç‰ˆæœ¬æ˜¯æ¯”è¾ƒè€çš„ï¼Œå¹¶ä¸æ¨èè¿™æ ·å®‰è£…ï¼Œå¦‚æœæƒ³å®‰è£…æœ€æ–°å¯ç”¨ç‰ˆæœ¬çš„å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š\n\n```\nsudo add-apt-repository ppa:git-core/ppa\nsudo apt-get update\nsudo apt-get install git\n```\n\nå®‰è£…å®Œæˆåå¯ä»¥æŸ¥çœ‹gitç‰ˆæœ¬ï¼Œç¡®å®šå®‰è£…æ˜¯å¦æˆåŠŸ\n\n```\ngit --version\n```\n\n## Ubuntu ä¸‹å®‰è£… node ##\n\næˆ‘é‡‡ç”¨çš„æºç ç¼–è¯‘å®‰è£…çš„æ–¹å¼ï¼Œé¦–å…ˆå»[nodeå¾—èµ„æºåˆ—è¡¨](https://nodejs.org/dist/)æ‰¾åˆ°ä½ è¦ç°åœ¨çš„èµ„æºåŒ…ï¼Œå¦‚æˆ‘æ‰€é€‰æ‹©çš„èµ„æºåŒ…æ˜¯ï¼š\n\nhttps://nodejs.org/dist/v5.0.0/node-v5.0.0.tar.gz\n\né€‰æ‹©å¥½èµ„æºåŒ…åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å³å¯ï¼š\n\n```\n# ä¸‹è½½èµ„æº\nwget https://nodejs.org/dist/v5.0.0/node-v5.0.0.tar.gz\n# è§£å‹\ntar zxvf node-v5.0.0.tar.gz\n# ç¼–è¯‘å®‰è£…\ncd node-v5.0.0\n./configure \nmake \nmake install\ncp /usr/local/bin/node /usr/sbin/\n```\n\næŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\n\n```\nnode -v\n```\n\nå¦‚æœæ­£ç¡®è¾“å‡ºç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆè¯´æ˜æˆ‘ä»¬å®‰è£…æˆåŠŸäº†ï¼Œä¹Ÿæœ‰å…¶ä»–å®‰è£…æ–¹å¼ï¼Œå¤§å®¶å»ç½‘ä¸Šçœ‹çœ‹å§\n\n# Ubuntué»˜è®¤æ˜¯ç”¨dashè§£æshellè„šæœ¬ #\n\nç”±äºé¡¹ç›®ä¸­æˆ‘ä½¿ç”¨åˆ°äº†shellè„šæœ¬ï¼Œæ‰€ä»¥å½“é¡¹ç›®è¿ç§»åˆ°Ubuntuçš„æ—¶å€™æŠ¥é”™ï¼š\n\n```\nsource xxx.shæ—¶æç¤º source: not found\n```\n\nåŸå› æ˜¯å½“æ—¶é¡¹ç›®åœ¨Macä¸‹è·‘å¾—ï¼ŒMacè§£æshellè„šæœ¬ä½¿ç”¨çš„æ˜¯bashï¼Œè€ŒUbuntué»˜è®¤æ˜¯ç”¨çš„dashï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ï¼š\n\n```\nls -l `which sh`\n```\n\nå¦‚ä¸‹å›¾\n![Ubuntué»˜è®¤ä½¿ç”¨dashè§£æshellè„šæœ¬](http://7xlolm.com1.z0.glb.clouddn.com/201512266.pic.jpg)\n\næˆ‘ä»¬å¯ä»¥ä¿®æ”¹Ubuntuè§£æshellçš„æ–¹å¼ï¼š\n\n```\nsudo dpkg-reconfigure dash\n```\n\næ‰§è¡Œè¯¥å‘½ä»¤åä¼šå‡ºç°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„é€‰é¡¹ï¼Œæˆ‘ä»¬åªéœ€è¦é€‰æ‹©å¦å³å¯ï¼š\n![é€‰æ‹©å¦](http://7xlolm.com1.z0.glb.clouddn.com/201512264.pic.jpg)\n\nè¿™æ—¶åœ¨æŸ¥çœ‹ä¸€ä¸‹Ubuntuè§£æshellçš„æ–¹å¼ï¼š\n\n```\nls -l `which sh`\n```\n\nå¦‚ä¸‹å›¾ï¼Œå·²ç»å˜ä¸ºäº† bash\n\n![bash](http://7xlolm.com1.z0.glb.clouddn.com/201512263.pic.jpg)\n\n# gitçš„ä¸€äº›å°äº‹å„¿ #\n\nå¦å¤–ï¼Œæ€»ç»“ä¸¤ç‚¹gitä¸­çš„ä¸€äº›ä¸œè¥¿\n\n## 1ã€è®©gitå¿½ç•¥æ–‡ä»¶æƒé™ ##\n\né¡¹ç›®å¹»æƒ³æ­å»ºå¥½äº†ä¹‹åï¼Œæˆ‘å°±æŠŠä»£ç ä½¿ç”¨gitå…‹éš†äº†ä¸‹æ¥ï¼Œç”±äºè¿è¡Œé¡¹ç›®çš„æ—¶å€™æŠ¥é”™æç¤ºæ–‡ä»¶æƒé™æœ‰é—®é¢˜ï¼Œäºæ˜¯æˆ‘å°±ä¿®æ”¹äº†æ•´ä¸ªé¡¹ç›®ç›®å½•çš„æƒé™ï¼Œå½“æˆ‘ä½¿ç”¨git pullæ‹‰å–é¡¹ç›®çš„æ—¶å€™æç¤ºæˆ‘æœ¬åœ°ä»“åº“æœ‰ä¿®æ”¹ï¼Œè®©æˆ‘æäº¤åå†æ‹‰å–ï¼Œæˆ‘å¾ˆç–‘æƒ‘å› ä¸ºæˆ‘åˆšåˆšcloneä¸‹æ¥ï¼Œæ¯›å„¿éƒ½æ²¡åŠ¨ï¼Œæˆ‘æ”¹ä»€ä¹ˆäº†æˆ‘ï¼Ÿåæ¥æ˜¯ç”¨git statusæŸ¥çœ‹å‘ç°ï¼Œä¸€å¤§ç‰‡çº¢è‰²(ä¿®æ”¹æœªæäº¤çš„æ–‡ä»¶)ï¼Œåæ¥æˆ‘çŒœæƒ³åº”è¯¥æ˜¯gitæŠŠæ–‡ä»¶æƒé™ä¹Ÿçº³å…¥ç®¡ç†çš„èŒƒå›´å†…äº†ï¼Œåæ¥ä¸Šç½‘ä¸€æŸ¥ï¼Œæœç„¶ï¼Œä¸è¿‡å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä½¿gitå¿½ç•¥å¯¹æ–‡ä»¶æƒé™çš„ç®¡ç†ï¼š\n\n```\ngit config core.filemode false\n```\n\nè¿™æ˜¯åœ¨ä½¿ç”¨ git status æŸ¥çœ‹ï¼Œä¼šå‘ç°å·¥ä½œåŒºå¹²å‡€äº†ï¼Œæå®šã€‚\n\n## 2ã€httpsæ–¹å¼å…‹éš†çš„é¡¹ç›®æ¯æ¬¡éƒ½æç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç  ##\n\nå¦å¤–è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“æ—¶å…‹éš†é¡¹ç›®çš„æ—¶å€™æˆ‘ä½¿ç”¨çš„æ˜¯httpsçš„æ–¹å¼ï¼Œå¹¶ä¸æ˜¯sshçš„æ–¹å¼ï¼Œhttpsçš„å¥½å¤„å°±æ˜¯å‘Šè¯‰ï¼Œè€Œsshçš„å¥½å¤„æ˜¯å®‰å…¨ï¼Œæ­£å› å¦‚æ­¤ï¼Œä½¿ç”¨httpså…‹éš†çš„é¡¹ç›®æ¯æ¬¡pushã€pullç­‰æ“ä½œéƒ½è¦æç¤ºè¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\nç¬¬ä¸€æ­¥ï¼šåˆ‡æ¢åˆ°å®¶ç›®å½• â€œ~â€\n\n```\ncd ~\n```\n\nç¬¬äºŒæ­¥ï¼šåˆ›å»ºå¹¶ç¼–è¾‘ .git-credentials æ–‡ä»¶\n\n```\ntouch .git-credentials\n\nvim .git-credentials\n```\n\nç¬¬ä¸‰æ­¥ï¼šæŠŠå¦‚ä¸‹å†…å®¹å†™å…¥.git-credentialsæ–‡ä»¶ä¸­ï¼ŒæŠ¥é”™å¹¶é€€å‡º\n\n```\n# {username} ä½ çš„gitè´¦æˆ·å\n# {password} ä½ çš„gitå¯†ç \n# example.com ä½ çš„gitä»“åº“åŸŸå\n# ä¾‹å­ï¼šhttps://hcysunyang:12345678@github.com\n\nhttps://{username}:{password}@example.com\n```\n\nç¬¬å››æ­¥ï¼šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\n\n```\ngit config --global credential.helper store\n```\n\næ¥ä¸‹æ¥ä½ å°±å¯ä»¥æ‰§è¡Œpushã€pullç­‰æ“ä½œäº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šæç¤ºä½ è¾“å…¥ä¸€æ¬¡è´¦å·å¯†ç çš„ï¼Œåˆ«ç€æ€¥ï¼Œä»…æ­¤ä¸€æ¬¡è€Œå·²ï¼Œä»¥åå°±ä¸ä¼šå†è®©ä½ è¾“å…¥äº†ï¼Œæå®šã€‚\n\n# Ubuntuä¸‹mongodbå¯åŠ¨å¤±è´¥ #\n\nå¦‚ä¸‹å›¾ï¼š\n\n![mongodbå¯åŠ¨å¤±è´¥](http://7xlolm.com1.z0.glb.clouddn.com/201512267.pic_hd.jpg)\n\né€ æˆå¯åŠ¨å¤±è´¥çš„åŸå› æœ‰å¾ˆå¤šï¼Œå…¶ä¸­æœ€å¸¸è§çš„å°±æ˜¯éæ­£å¸¸é€€å‡ºï¼Œä¸‹ä¸€æ¬¡å†å¯åŠ¨çš„æ—¶å€™å°±ä¼šé‡åˆ°å¦‚ä¸Šæƒ…å†µï¼Œåœ¨Macä¸‹æˆ–è€…windowsä¸‹ï¼Œä¸€èˆ¬æˆ‘ä»¬éœ€è¦æŠŠmongod.lockæ–‡ä»¶åˆ é™¤å°±å¯ä»¥æˆåŠŸé‡å¯äº†ï¼Œä½†æ˜¯ä»Šå¤©åœ¨Ubuntuä¸‹å´ä¸è¡Œï¼Œåœ¨Ubuntuä¸‹è®°å¾—è¦æŠŠmongodb-27017.sockæ–‡ä»¶ä¹Ÿåˆ é™¤æ‰ï¼š\n\n```\nsudo rm -rf /var/lib/mongodb/mongod.lock\nsudo rm -rf /tmp/mongodb-27017.sock\n```\n\nä¹‹åé‡å¯ï¼š\n\n```\nsudo service mongod start\n```\n\nå°±å¯ä»¥æ­£å¸¸å¯åŠ¨äº†\n\n# nohup å‘½ä»¤è®©è¿›ç¨‹åœ¨åå°è¿è¡Œ #\n\nå½“æ—¶æˆ‘æ˜¯ä½¿ç”¨sshè¿œç¨‹ç™»å½•çš„ï¼Œåˆä¸æƒ³å¤šå¼€çª—å£ï¼Œæ‰€ä»¥å¸Œæœ›nodeæœåŠ¡åœ¨åå°è¿è¡Œï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨nohupå‘½ä»¤ï¼Œè¯¥å‘½ä»¤èƒ½å¤Ÿè®©è¿›ç¨‹åœ¨åå°è¿è¡Œï¼Œnohupå‘½ä»¤çš„æ ¼å¼å¦‚ä¸‹ï¼š\n\n```\nnohup Command [ Arg ... ] [ã€€& ] \n```\n\nä¾‹å¦‚æˆ‘æƒ³è¦nodeçš„webæœåŠ¡åœ¨åå°è¿è¡Œï¼Œåœ¨æˆ‘çš„é¡¹ç›®ä¸­å¯ä»¥æ‰§è¡Œä¸‹é¢çš„ä»£ç å¸¦åˆ°ç›®çš„ï¼š\n\n```\nnohup node admin.js &\n```\n\n# Ubuntuä¸‹æ·»åŠ ç”¨æˆ·å¹¶èµ‹äºˆrootæƒé™ #\n\nåœ¨Ubuntuä¸‹å¯ä»¥ä½¿ç”¨ adduser å‘½ä»¤æ·»åŠ ä¸€ä¸ªç”¨æˆ·ï¼š\n\n```\nadduser <username>\n```\n\næ‰§è¡Œè¯¥å‘½ä»¤ä¹‹åä¼šè®©ä½ ä¸ºè¯¥ç”¨æˆ·è®¾ç½®å¯†ç ï¼Œä½†æ˜¯è¿™æ ·æ·»åŠ çš„ç”¨æˆ·æ˜¯æ²¡æœ‰ä½¿ç”¨rootæƒé™çš„ç”¨æˆ·ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›é…ç½®æ¥èµ‹äºˆè¯¥ç”¨æˆ·ä½¿ç”¨rootæƒé™çš„èƒ½åŠ›ï¼Œä¿®æ”¹é…ç½®éœ€è¦ç¼–è¾‘ /etc/sudoers æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é»˜è®¤æ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥ä¿®æ”¹æ–‡ä»¶ä¸ºå¯å†™ï¼š\n\n```\nchmod u+w /etc/sudoers\n```\n\nç„¶åç¼–è¾‘è¯¥æ–‡ä»¶ï¼š\n\n```\nsudo vim /etc/sudoers\n```\n\næ‰¾åˆ°ä¸‹é¢è¿™å¥è¯ï¼š\n\n```\n# Allow members of group sudo to execute any command\n%sudo   ALL=(ALL:ALL) ALL\n```\n\nåœ¨å…¶ %sudo   ALL=(ALL:ALL) ALL ä¸‹é¢å†æ·»åŠ ä¸€è¡Œï¼š\n\n```\n%username   ALL=(ALL:ALL) ALL\n```\n\nusernameä¸ºä½ åˆ›å»ºç”¨æˆ·çš„ç”¨æˆ·åï¼Œä¹‹åä¿å­˜é€€å‡ºï¼Œå¹¶è¿˜åŸ sudoers æ–‡ä»¶åªè¯»çš„æƒé™ï¼š\n\n```\nchmod u-w /etc/sudoers\n```\n\næ¥ä¸‹æ¥æ–°ç”¨æˆ·å°±å¯ä»¥ç™»å½•å¹¶ä½¿ç”¨rootæƒé™äº†ã€‚\n\n# å®‰è£…å®ŒUbuntuåä¹±ç  #\n\nä¿®æ”¹/etc/default/locale\n\n```\nsudo vim /etc/default/locale\n```\n\nå°†ï¼š\n\n```\nLANG=zh_CN.UTF-8\nLANGUAGE=zh_CN:zh\n```\n\nä¿®æ”¹ä¸ºï¼š\n\n```\nLANG=\"en_US.UTF-8\"\nLANGUAGE=\"en_US:en\"\n```\n\næœ€årebootä¸€ä¸‹å°±å¯ä»¥äº†ï¼š\n\n```\nsudo reboot\n```\n","source":"_posts/2015/12/26/é¡¹ç›®è¿ç§»é—®é¢˜æ€»ç»“.md","raw":"title: é¡¹ç›®è¿ç§»é—®é¢˜æ€»ç»“\ndate: 2015-12-26 10:53:12\ncategories:\n- WebFrontEnd\ntags:\n- Ubuntu\n- git\n- nodejs\n---\n\n>ä¹‹å‰åœ¨Macç³»ç»Ÿä¸‹æ­å»ºäº†ä¸€å¥—ç”¨äºè‡ªåŠ¨åŒ–æ„å»ºH5é¡¹ç›®çš„å¹³å°ï¼Œä¸€ç›´ç”¨MacåšserviceæœåŠ¡ï¼Œç°åœ¨è¦å°†é¡¹ç›®è¿ç§»åˆ°Ubuntuä¸Šé¢ï¼Œä¸‹é¢æ˜¯æ•´ç†äº†è¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œä¾›ä»¥åæŸ¥é˜…\n\n![Ubuntu](http://7xlolm.com1.z0.glb.clouddn.com/20151226Ubuntu.jpg)\n\n<!-- more -->\n\n# Ubuntuä¸‹å®‰è£…gitå’Œnode #\n\nå½“æ—¶åœ¨åšé¡¹ç›®è¿ç§»çš„æ—¶å€™å¹¶æ²¡æœ‰æœåŠ¡å™¨ï¼Œæ‰€ä»¥åªèƒ½ç”¨æ—è¾¹çš„ä¸€å°windowså®‰è£…ä¸ªåŒç³»ç»Ÿï¼Œæ¥å……å½“æœåŠ¡å™¨äº†ï¼Œå®‰è£…æ–¹æ³•ç½‘ä¸Šå¾ˆå¤šï¼Œä¸è¿‡æˆ‘æ¨èä¸€ä¸ªæœ‹å‹çš„åšå®¢ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘æ‰€å®‰è£…çš„Ubuntuçš„ç‰ˆæœ¬æ˜¯14.04çš„ï¼Œå¹¶ä¸”æ˜¯serverç‰ˆçš„ï¼Œä¸è¯¥åšå®¢ä¸ç¬¦ï¼Œä½†æ˜¯åŸç†ç›¸åŒï¼Œè´´å‡º[åšå®¢åœ°å€](https://xuri.me/2013/04/09/easybcd-install-ubuntu.html)ã€‚\n\n## Ubuntu ä¸‹å®‰è£… git ##\n\nUbuntuçš„åŒ…ç®¡ç†æ˜¯apt-getï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…git:\n\n```\nsudo apt-get install git\n```\n\nä½†æ˜¯è¿™æ ·å®‰è£…çš„gitç‰ˆæœ¬æ˜¯æ¯”è¾ƒè€çš„ï¼Œå¹¶ä¸æ¨èè¿™æ ·å®‰è£…ï¼Œå¦‚æœæƒ³å®‰è£…æœ€æ–°å¯ç”¨ç‰ˆæœ¬çš„å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š\n\n```\nsudo add-apt-repository ppa:git-core/ppa\nsudo apt-get update\nsudo apt-get install git\n```\n\nå®‰è£…å®Œæˆåå¯ä»¥æŸ¥çœ‹gitç‰ˆæœ¬ï¼Œç¡®å®šå®‰è£…æ˜¯å¦æˆåŠŸ\n\n```\ngit --version\n```\n\n## Ubuntu ä¸‹å®‰è£… node ##\n\næˆ‘é‡‡ç”¨çš„æºç ç¼–è¯‘å®‰è£…çš„æ–¹å¼ï¼Œé¦–å…ˆå»[nodeå¾—èµ„æºåˆ—è¡¨](https://nodejs.org/dist/)æ‰¾åˆ°ä½ è¦ç°åœ¨çš„èµ„æºåŒ…ï¼Œå¦‚æˆ‘æ‰€é€‰æ‹©çš„èµ„æºåŒ…æ˜¯ï¼š\n\nhttps://nodejs.org/dist/v5.0.0/node-v5.0.0.tar.gz\n\né€‰æ‹©å¥½èµ„æºåŒ…åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å³å¯ï¼š\n\n```\n# ä¸‹è½½èµ„æº\nwget https://nodejs.org/dist/v5.0.0/node-v5.0.0.tar.gz\n# è§£å‹\ntar zxvf node-v5.0.0.tar.gz\n# ç¼–è¯‘å®‰è£…\ncd node-v5.0.0\n./configure \nmake \nmake install\ncp /usr/local/bin/node /usr/sbin/\n```\n\næŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\n\n```\nnode -v\n```\n\nå¦‚æœæ­£ç¡®è¾“å‡ºç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆè¯´æ˜æˆ‘ä»¬å®‰è£…æˆåŠŸäº†ï¼Œä¹Ÿæœ‰å…¶ä»–å®‰è£…æ–¹å¼ï¼Œå¤§å®¶å»ç½‘ä¸Šçœ‹çœ‹å§\n\n# Ubuntué»˜è®¤æ˜¯ç”¨dashè§£æshellè„šæœ¬ #\n\nç”±äºé¡¹ç›®ä¸­æˆ‘ä½¿ç”¨åˆ°äº†shellè„šæœ¬ï¼Œæ‰€ä»¥å½“é¡¹ç›®è¿ç§»åˆ°Ubuntuçš„æ—¶å€™æŠ¥é”™ï¼š\n\n```\nsource xxx.shæ—¶æç¤º source: not found\n```\n\nåŸå› æ˜¯å½“æ—¶é¡¹ç›®åœ¨Macä¸‹è·‘å¾—ï¼ŒMacè§£æshellè„šæœ¬ä½¿ç”¨çš„æ˜¯bashï¼Œè€ŒUbuntué»˜è®¤æ˜¯ç”¨çš„dashï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ï¼š\n\n```\nls -l `which sh`\n```\n\nå¦‚ä¸‹å›¾\n![Ubuntué»˜è®¤ä½¿ç”¨dashè§£æshellè„šæœ¬](http://7xlolm.com1.z0.glb.clouddn.com/201512266.pic.jpg)\n\næˆ‘ä»¬å¯ä»¥ä¿®æ”¹Ubuntuè§£æshellçš„æ–¹å¼ï¼š\n\n```\nsudo dpkg-reconfigure dash\n```\n\næ‰§è¡Œè¯¥å‘½ä»¤åä¼šå‡ºç°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„é€‰é¡¹ï¼Œæˆ‘ä»¬åªéœ€è¦é€‰æ‹©å¦å³å¯ï¼š\n![é€‰æ‹©å¦](http://7xlolm.com1.z0.glb.clouddn.com/201512264.pic.jpg)\n\nè¿™æ—¶åœ¨æŸ¥çœ‹ä¸€ä¸‹Ubuntuè§£æshellçš„æ–¹å¼ï¼š\n\n```\nls -l `which sh`\n```\n\nå¦‚ä¸‹å›¾ï¼Œå·²ç»å˜ä¸ºäº† bash\n\n![bash](http://7xlolm.com1.z0.glb.clouddn.com/201512263.pic.jpg)\n\n# gitçš„ä¸€äº›å°äº‹å„¿ #\n\nå¦å¤–ï¼Œæ€»ç»“ä¸¤ç‚¹gitä¸­çš„ä¸€äº›ä¸œè¥¿\n\n## 1ã€è®©gitå¿½ç•¥æ–‡ä»¶æƒé™ ##\n\né¡¹ç›®å¹»æƒ³æ­å»ºå¥½äº†ä¹‹åï¼Œæˆ‘å°±æŠŠä»£ç ä½¿ç”¨gitå…‹éš†äº†ä¸‹æ¥ï¼Œç”±äºè¿è¡Œé¡¹ç›®çš„æ—¶å€™æŠ¥é”™æç¤ºæ–‡ä»¶æƒé™æœ‰é—®é¢˜ï¼Œäºæ˜¯æˆ‘å°±ä¿®æ”¹äº†æ•´ä¸ªé¡¹ç›®ç›®å½•çš„æƒé™ï¼Œå½“æˆ‘ä½¿ç”¨git pullæ‹‰å–é¡¹ç›®çš„æ—¶å€™æç¤ºæˆ‘æœ¬åœ°ä»“åº“æœ‰ä¿®æ”¹ï¼Œè®©æˆ‘æäº¤åå†æ‹‰å–ï¼Œæˆ‘å¾ˆç–‘æƒ‘å› ä¸ºæˆ‘åˆšåˆšcloneä¸‹æ¥ï¼Œæ¯›å„¿éƒ½æ²¡åŠ¨ï¼Œæˆ‘æ”¹ä»€ä¹ˆäº†æˆ‘ï¼Ÿåæ¥æ˜¯ç”¨git statusæŸ¥çœ‹å‘ç°ï¼Œä¸€å¤§ç‰‡çº¢è‰²(ä¿®æ”¹æœªæäº¤çš„æ–‡ä»¶)ï¼Œåæ¥æˆ‘çŒœæƒ³åº”è¯¥æ˜¯gitæŠŠæ–‡ä»¶æƒé™ä¹Ÿçº³å…¥ç®¡ç†çš„èŒƒå›´å†…äº†ï¼Œåæ¥ä¸Šç½‘ä¸€æŸ¥ï¼Œæœç„¶ï¼Œä¸è¿‡å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä½¿gitå¿½ç•¥å¯¹æ–‡ä»¶æƒé™çš„ç®¡ç†ï¼š\n\n```\ngit config core.filemode false\n```\n\nè¿™æ˜¯åœ¨ä½¿ç”¨ git status æŸ¥çœ‹ï¼Œä¼šå‘ç°å·¥ä½œåŒºå¹²å‡€äº†ï¼Œæå®šã€‚\n\n## 2ã€httpsæ–¹å¼å…‹éš†çš„é¡¹ç›®æ¯æ¬¡éƒ½æç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç  ##\n\nå¦å¤–è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“æ—¶å…‹éš†é¡¹ç›®çš„æ—¶å€™æˆ‘ä½¿ç”¨çš„æ˜¯httpsçš„æ–¹å¼ï¼Œå¹¶ä¸æ˜¯sshçš„æ–¹å¼ï¼Œhttpsçš„å¥½å¤„å°±æ˜¯å‘Šè¯‰ï¼Œè€Œsshçš„å¥½å¤„æ˜¯å®‰å…¨ï¼Œæ­£å› å¦‚æ­¤ï¼Œä½¿ç”¨httpså…‹éš†çš„é¡¹ç›®æ¯æ¬¡pushã€pullç­‰æ“ä½œéƒ½è¦æç¤ºè¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\nç¬¬ä¸€æ­¥ï¼šåˆ‡æ¢åˆ°å®¶ç›®å½• â€œ~â€\n\n```\ncd ~\n```\n\nç¬¬äºŒæ­¥ï¼šåˆ›å»ºå¹¶ç¼–è¾‘ .git-credentials æ–‡ä»¶\n\n```\ntouch .git-credentials\n\nvim .git-credentials\n```\n\nç¬¬ä¸‰æ­¥ï¼šæŠŠå¦‚ä¸‹å†…å®¹å†™å…¥.git-credentialsæ–‡ä»¶ä¸­ï¼ŒæŠ¥é”™å¹¶é€€å‡º\n\n```\n# {username} ä½ çš„gitè´¦æˆ·å\n# {password} ä½ çš„gitå¯†ç \n# example.com ä½ çš„gitä»“åº“åŸŸå\n# ä¾‹å­ï¼šhttps://hcysunyang:12345678@github.com\n\nhttps://{username}:{password}@example.com\n```\n\nç¬¬å››æ­¥ï¼šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\n\n```\ngit config --global credential.helper store\n```\n\næ¥ä¸‹æ¥ä½ å°±å¯ä»¥æ‰§è¡Œpushã€pullç­‰æ“ä½œäº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šæç¤ºä½ è¾“å…¥ä¸€æ¬¡è´¦å·å¯†ç çš„ï¼Œåˆ«ç€æ€¥ï¼Œä»…æ­¤ä¸€æ¬¡è€Œå·²ï¼Œä»¥åå°±ä¸ä¼šå†è®©ä½ è¾“å…¥äº†ï¼Œæå®šã€‚\n\n# Ubuntuä¸‹mongodbå¯åŠ¨å¤±è´¥ #\n\nå¦‚ä¸‹å›¾ï¼š\n\n![mongodbå¯åŠ¨å¤±è´¥](http://7xlolm.com1.z0.glb.clouddn.com/201512267.pic_hd.jpg)\n\né€ æˆå¯åŠ¨å¤±è´¥çš„åŸå› æœ‰å¾ˆå¤šï¼Œå…¶ä¸­æœ€å¸¸è§çš„å°±æ˜¯éæ­£å¸¸é€€å‡ºï¼Œä¸‹ä¸€æ¬¡å†å¯åŠ¨çš„æ—¶å€™å°±ä¼šé‡åˆ°å¦‚ä¸Šæƒ…å†µï¼Œåœ¨Macä¸‹æˆ–è€…windowsä¸‹ï¼Œä¸€èˆ¬æˆ‘ä»¬éœ€è¦æŠŠmongod.lockæ–‡ä»¶åˆ é™¤å°±å¯ä»¥æˆåŠŸé‡å¯äº†ï¼Œä½†æ˜¯ä»Šå¤©åœ¨Ubuntuä¸‹å´ä¸è¡Œï¼Œåœ¨Ubuntuä¸‹è®°å¾—è¦æŠŠmongodb-27017.sockæ–‡ä»¶ä¹Ÿåˆ é™¤æ‰ï¼š\n\n```\nsudo rm -rf /var/lib/mongodb/mongod.lock\nsudo rm -rf /tmp/mongodb-27017.sock\n```\n\nä¹‹åé‡å¯ï¼š\n\n```\nsudo service mongod start\n```\n\nå°±å¯ä»¥æ­£å¸¸å¯åŠ¨äº†\n\n# nohup å‘½ä»¤è®©è¿›ç¨‹åœ¨åå°è¿è¡Œ #\n\nå½“æ—¶æˆ‘æ˜¯ä½¿ç”¨sshè¿œç¨‹ç™»å½•çš„ï¼Œåˆä¸æƒ³å¤šå¼€çª—å£ï¼Œæ‰€ä»¥å¸Œæœ›nodeæœåŠ¡åœ¨åå°è¿è¡Œï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨nohupå‘½ä»¤ï¼Œè¯¥å‘½ä»¤èƒ½å¤Ÿè®©è¿›ç¨‹åœ¨åå°è¿è¡Œï¼Œnohupå‘½ä»¤çš„æ ¼å¼å¦‚ä¸‹ï¼š\n\n```\nnohup Command [ Arg ... ] [ã€€& ] \n```\n\nä¾‹å¦‚æˆ‘æƒ³è¦nodeçš„webæœåŠ¡åœ¨åå°è¿è¡Œï¼Œåœ¨æˆ‘çš„é¡¹ç›®ä¸­å¯ä»¥æ‰§è¡Œä¸‹é¢çš„ä»£ç å¸¦åˆ°ç›®çš„ï¼š\n\n```\nnohup node admin.js &\n```\n\n# Ubuntuä¸‹æ·»åŠ ç”¨æˆ·å¹¶èµ‹äºˆrootæƒé™ #\n\nåœ¨Ubuntuä¸‹å¯ä»¥ä½¿ç”¨ adduser å‘½ä»¤æ·»åŠ ä¸€ä¸ªç”¨æˆ·ï¼š\n\n```\nadduser <username>\n```\n\næ‰§è¡Œè¯¥å‘½ä»¤ä¹‹åä¼šè®©ä½ ä¸ºè¯¥ç”¨æˆ·è®¾ç½®å¯†ç ï¼Œä½†æ˜¯è¿™æ ·æ·»åŠ çš„ç”¨æˆ·æ˜¯æ²¡æœ‰ä½¿ç”¨rootæƒé™çš„ç”¨æˆ·ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›é…ç½®æ¥èµ‹äºˆè¯¥ç”¨æˆ·ä½¿ç”¨rootæƒé™çš„èƒ½åŠ›ï¼Œä¿®æ”¹é…ç½®éœ€è¦ç¼–è¾‘ /etc/sudoers æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é»˜è®¤æ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥ä¿®æ”¹æ–‡ä»¶ä¸ºå¯å†™ï¼š\n\n```\nchmod u+w /etc/sudoers\n```\n\nç„¶åç¼–è¾‘è¯¥æ–‡ä»¶ï¼š\n\n```\nsudo vim /etc/sudoers\n```\n\næ‰¾åˆ°ä¸‹é¢è¿™å¥è¯ï¼š\n\n```\n# Allow members of group sudo to execute any command\n%sudo   ALL=(ALL:ALL) ALL\n```\n\nåœ¨å…¶ %sudo   ALL=(ALL:ALL) ALL ä¸‹é¢å†æ·»åŠ ä¸€è¡Œï¼š\n\n```\n%username   ALL=(ALL:ALL) ALL\n```\n\nusernameä¸ºä½ åˆ›å»ºç”¨æˆ·çš„ç”¨æˆ·åï¼Œä¹‹åä¿å­˜é€€å‡ºï¼Œå¹¶è¿˜åŸ sudoers æ–‡ä»¶åªè¯»çš„æƒé™ï¼š\n\n```\nchmod u-w /etc/sudoers\n```\n\næ¥ä¸‹æ¥æ–°ç”¨æˆ·å°±å¯ä»¥ç™»å½•å¹¶ä½¿ç”¨rootæƒé™äº†ã€‚\n\n# å®‰è£…å®ŒUbuntuåä¹±ç  #\n\nä¿®æ”¹/etc/default/locale\n\n```\nsudo vim /etc/default/locale\n```\n\nå°†ï¼š\n\n```\nLANG=zh_CN.UTF-8\nLANGUAGE=zh_CN:zh\n```\n\nä¿®æ”¹ä¸ºï¼š\n\n```\nLANG=\"en_US.UTF-8\"\nLANGUAGE=\"en_US:en\"\n```\n\næœ€årebootä¸€ä¸‹å°±å¯ä»¥äº†ï¼š\n\n```\nsudo reboot\n```\n","slug":"é¡¹ç›®è¿ç§»é—®é¢˜æ€»ç»“","published":1,"updated":"2015-12-29T09:42:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx51j000o47fytfe47noy","content":"<blockquote>\n<p>ä¹‹å‰åœ¨Macç³»ç»Ÿä¸‹æ­å»ºäº†ä¸€å¥—ç”¨äºè‡ªåŠ¨åŒ–æ„å»ºH5é¡¹ç›®çš„å¹³å°ï¼Œä¸€ç›´ç”¨MacåšserviceæœåŠ¡ï¼Œç°åœ¨è¦å°†é¡¹ç›®è¿ç§»åˆ°Ubuntuä¸Šé¢ï¼Œä¸‹é¢æ˜¯æ•´ç†äº†è¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œä¾›ä»¥åæŸ¥é˜…</p>\n</blockquote>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20151226Ubuntu.jpg\" alt=\"Ubuntu\"></p>\n<a id=\"more\"></a>\n<h1 id=\"Ubuntuä¸‹å®‰è£…gitå’Œnode\"><a href=\"#Ubuntuä¸‹å®‰è£…gitå’Œnode\" class=\"headerlink\" title=\"Ubuntuä¸‹å®‰è£…gitå’Œnode\"></a>Ubuntuä¸‹å®‰è£…gitå’Œnode</h1><p>å½“æ—¶åœ¨åšé¡¹ç›®è¿ç§»çš„æ—¶å€™å¹¶æ²¡æœ‰æœåŠ¡å™¨ï¼Œæ‰€ä»¥åªèƒ½ç”¨æ—è¾¹çš„ä¸€å°windowså®‰è£…ä¸ªåŒç³»ç»Ÿï¼Œæ¥å……å½“æœåŠ¡å™¨äº†ï¼Œå®‰è£…æ–¹æ³•ç½‘ä¸Šå¾ˆå¤šï¼Œä¸è¿‡æˆ‘æ¨èä¸€ä¸ªæœ‹å‹çš„åšå®¢ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘æ‰€å®‰è£…çš„Ubuntuçš„ç‰ˆæœ¬æ˜¯14.04çš„ï¼Œå¹¶ä¸”æ˜¯serverç‰ˆçš„ï¼Œä¸è¯¥åšå®¢ä¸ç¬¦ï¼Œä½†æ˜¯åŸç†ç›¸åŒï¼Œè´´å‡º<a href=\"https://xuri.me/2013/04/09/easybcd-install-ubuntu.html\" target=\"_blank\" rel=\"external\">åšå®¢åœ°å€</a>ã€‚</p>\n<h2 id=\"Ubuntu-ä¸‹å®‰è£…-git\"><a href=\"#Ubuntu-ä¸‹å®‰è£…-git\" class=\"headerlink\" title=\"Ubuntu ä¸‹å®‰è£… git\"></a>Ubuntu ä¸‹å®‰è£… git</h2><p>Ubuntuçš„åŒ…ç®¡ç†æ˜¯apt-getï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…git:</p>\n<pre><code>sudo apt-get install git\n</code></pre><p>ä½†æ˜¯è¿™æ ·å®‰è£…çš„gitç‰ˆæœ¬æ˜¯æ¯”è¾ƒè€çš„ï¼Œå¹¶ä¸æ¨èè¿™æ ·å®‰è£…ï¼Œå¦‚æœæƒ³å®‰è£…æœ€æ–°å¯ç”¨ç‰ˆæœ¬çš„å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>\n<pre><code>sudo add-apt-repository ppa:git-core/ppa\nsudo apt-get update\nsudo apt-get install git\n</code></pre><p>å®‰è£…å®Œæˆåå¯ä»¥æŸ¥çœ‹gitç‰ˆæœ¬ï¼Œç¡®å®šå®‰è£…æ˜¯å¦æˆåŠŸ</p>\n<pre><code>git --version\n</code></pre><h2 id=\"Ubuntu-ä¸‹å®‰è£…-node\"><a href=\"#Ubuntu-ä¸‹å®‰è£…-node\" class=\"headerlink\" title=\"Ubuntu ä¸‹å®‰è£… node\"></a>Ubuntu ä¸‹å®‰è£… node</h2><p>æˆ‘é‡‡ç”¨çš„æºç ç¼–è¯‘å®‰è£…çš„æ–¹å¼ï¼Œé¦–å…ˆå»<a href=\"https://nodejs.org/dist/\" target=\"_blank\" rel=\"external\">nodeå¾—èµ„æºåˆ—è¡¨</a>æ‰¾åˆ°ä½ è¦ç°åœ¨çš„èµ„æºåŒ…ï¼Œå¦‚æˆ‘æ‰€é€‰æ‹©çš„èµ„æºåŒ…æ˜¯ï¼š</p>\n<p><a href=\"https://nodejs.org/dist/v5.0.0/node-v5.0.0.tar.gz\" target=\"_blank\" rel=\"external\">https://nodejs.org/dist/v5.0.0/node-v5.0.0.tar.gz</a></p>\n<p>é€‰æ‹©å¥½èµ„æºåŒ…åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å³å¯ï¼š</p>\n<pre><code># ä¸‹è½½èµ„æº\nwget https://nodejs.org/dist/v5.0.0/node-v5.0.0.tar.gz\n# è§£å‹\ntar zxvf node-v5.0.0.tar.gz\n# ç¼–è¯‘å®‰è£…\ncd node-v5.0.0\n./configure \nmake \nmake install\ncp /usr/local/bin/node /usr/sbin/\n</code></pre><p>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p>\n<pre><code>node -v\n</code></pre><p>å¦‚æœæ­£ç¡®è¾“å‡ºç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆè¯´æ˜æˆ‘ä»¬å®‰è£…æˆåŠŸäº†ï¼Œä¹Ÿæœ‰å…¶ä»–å®‰è£…æ–¹å¼ï¼Œå¤§å®¶å»ç½‘ä¸Šçœ‹çœ‹å§</p>\n<h1 id=\"Ubuntué»˜è®¤æ˜¯ç”¨dashè§£æshellè„šæœ¬\"><a href=\"#Ubuntué»˜è®¤æ˜¯ç”¨dashè§£æshellè„šæœ¬\" class=\"headerlink\" title=\"Ubuntué»˜è®¤æ˜¯ç”¨dashè§£æshellè„šæœ¬\"></a>Ubuntué»˜è®¤æ˜¯ç”¨dashè§£æshellè„šæœ¬</h1><p>ç”±äºé¡¹ç›®ä¸­æˆ‘ä½¿ç”¨åˆ°äº†shellè„šæœ¬ï¼Œæ‰€ä»¥å½“é¡¹ç›®è¿ç§»åˆ°Ubuntuçš„æ—¶å€™æŠ¥é”™ï¼š</p>\n<pre><code>source xxx.shæ—¶æç¤º source: not found\n</code></pre><p>åŸå› æ˜¯å½“æ—¶é¡¹ç›®åœ¨Macä¸‹è·‘å¾—ï¼ŒMacè§£æshellè„šæœ¬ä½¿ç”¨çš„æ˜¯bashï¼Œè€ŒUbuntué»˜è®¤æ˜¯ç”¨çš„dashï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ï¼š</p>\n<pre><code>ls -l `which sh`\n</code></pre><p>å¦‚ä¸‹å›¾<br><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512266.pic.jpg\" alt=\"Ubuntué»˜è®¤ä½¿ç”¨dashè§£æshellè„šæœ¬\"></p>\n<p>æˆ‘ä»¬å¯ä»¥ä¿®æ”¹Ubuntuè§£æshellçš„æ–¹å¼ï¼š</p>\n<pre><code>sudo dpkg-reconfigure dash\n</code></pre><p>æ‰§è¡Œè¯¥å‘½ä»¤åä¼šå‡ºç°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„é€‰é¡¹ï¼Œæˆ‘ä»¬åªéœ€è¦é€‰æ‹©å¦å³å¯ï¼š<br><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512264.pic.jpg\" alt=\"é€‰æ‹©å¦\"></p>\n<p>è¿™æ—¶åœ¨æŸ¥çœ‹ä¸€ä¸‹Ubuntuè§£æshellçš„æ–¹å¼ï¼š</p>\n<pre><code>ls -l `which sh`\n</code></pre><p>å¦‚ä¸‹å›¾ï¼Œå·²ç»å˜ä¸ºäº† bash</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512263.pic.jpg\" alt=\"bash\"></p>\n<h1 id=\"gitçš„ä¸€äº›å°äº‹å„¿\"><a href=\"#gitçš„ä¸€äº›å°äº‹å„¿\" class=\"headerlink\" title=\"gitçš„ä¸€äº›å°äº‹å„¿\"></a>gitçš„ä¸€äº›å°äº‹å„¿</h1><p>å¦å¤–ï¼Œæ€»ç»“ä¸¤ç‚¹gitä¸­çš„ä¸€äº›ä¸œè¥¿</p>\n<h2 id=\"1ã€è®©gitå¿½ç•¥æ–‡ä»¶æƒé™\"><a href=\"#1ã€è®©gitå¿½ç•¥æ–‡ä»¶æƒé™\" class=\"headerlink\" title=\"1ã€è®©gitå¿½ç•¥æ–‡ä»¶æƒé™\"></a>1ã€è®©gitå¿½ç•¥æ–‡ä»¶æƒé™</h2><p>é¡¹ç›®å¹»æƒ³æ­å»ºå¥½äº†ä¹‹åï¼Œæˆ‘å°±æŠŠä»£ç ä½¿ç”¨gitå…‹éš†äº†ä¸‹æ¥ï¼Œç”±äºè¿è¡Œé¡¹ç›®çš„æ—¶å€™æŠ¥é”™æç¤ºæ–‡ä»¶æƒé™æœ‰é—®é¢˜ï¼Œäºæ˜¯æˆ‘å°±ä¿®æ”¹äº†æ•´ä¸ªé¡¹ç›®ç›®å½•çš„æƒé™ï¼Œå½“æˆ‘ä½¿ç”¨git pullæ‹‰å–é¡¹ç›®çš„æ—¶å€™æç¤ºæˆ‘æœ¬åœ°ä»“åº“æœ‰ä¿®æ”¹ï¼Œè®©æˆ‘æäº¤åå†æ‹‰å–ï¼Œæˆ‘å¾ˆç–‘æƒ‘å› ä¸ºæˆ‘åˆšåˆšcloneä¸‹æ¥ï¼Œæ¯›å„¿éƒ½æ²¡åŠ¨ï¼Œæˆ‘æ”¹ä»€ä¹ˆäº†æˆ‘ï¼Ÿåæ¥æ˜¯ç”¨git statusæŸ¥çœ‹å‘ç°ï¼Œä¸€å¤§ç‰‡çº¢è‰²(ä¿®æ”¹æœªæäº¤çš„æ–‡ä»¶)ï¼Œåæ¥æˆ‘çŒœæƒ³åº”è¯¥æ˜¯gitæŠŠæ–‡ä»¶æƒé™ä¹Ÿçº³å…¥ç®¡ç†çš„èŒƒå›´å†…äº†ï¼Œåæ¥ä¸Šç½‘ä¸€æŸ¥ï¼Œæœç„¶ï¼Œä¸è¿‡å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä½¿gitå¿½ç•¥å¯¹æ–‡ä»¶æƒé™çš„ç®¡ç†ï¼š</p>\n<pre><code>git config core.filemode false\n</code></pre><p>è¿™æ˜¯åœ¨ä½¿ç”¨ git status æŸ¥çœ‹ï¼Œä¼šå‘ç°å·¥ä½œåŒºå¹²å‡€äº†ï¼Œæå®šã€‚</p>\n<h2 id=\"2ã€httpsæ–¹å¼å…‹éš†çš„é¡¹ç›®æ¯æ¬¡éƒ½æç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç \"><a href=\"#2ã€httpsæ–¹å¼å…‹éš†çš„é¡¹ç›®æ¯æ¬¡éƒ½æç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç \" class=\"headerlink\" title=\"2ã€httpsæ–¹å¼å…‹éš†çš„é¡¹ç›®æ¯æ¬¡éƒ½æç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç \"></a>2ã€httpsæ–¹å¼å…‹éš†çš„é¡¹ç›®æ¯æ¬¡éƒ½æç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç </h2><p>å¦å¤–è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“æ—¶å…‹éš†é¡¹ç›®çš„æ—¶å€™æˆ‘ä½¿ç”¨çš„æ˜¯httpsçš„æ–¹å¼ï¼Œå¹¶ä¸æ˜¯sshçš„æ–¹å¼ï¼Œhttpsçš„å¥½å¤„å°±æ˜¯å‘Šè¯‰ï¼Œè€Œsshçš„å¥½å¤„æ˜¯å®‰å…¨ï¼Œæ­£å› å¦‚æ­¤ï¼Œä½¿ç”¨httpså…‹éš†çš„é¡¹ç›®æ¯æ¬¡pushã€pullç­‰æ“ä½œéƒ½è¦æç¤ºè¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n<p>ç¬¬ä¸€æ­¥ï¼šåˆ‡æ¢åˆ°å®¶ç›®å½• â€œ~â€</p>\n<pre><code>cd ~\n</code></pre><p>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå¹¶ç¼–è¾‘ .git-credentials æ–‡ä»¶</p>\n<pre><code>touch .git-credentials\n\nvim .git-credentials\n</code></pre><p>ç¬¬ä¸‰æ­¥ï¼šæŠŠå¦‚ä¸‹å†…å®¹å†™å…¥.git-credentialsæ–‡ä»¶ä¸­ï¼ŒæŠ¥é”™å¹¶é€€å‡º</p>\n<pre><code># {username} ä½ çš„gitè´¦æˆ·å\n# {password} ä½ çš„gitå¯†ç \n# example.com ä½ çš„gitä»“åº“åŸŸå\n# ä¾‹å­ï¼šhttps://hcysunyang:12345678@github.com\n\nhttps://{username}:{password}@example.com\n</code></pre><p>ç¬¬å››æ­¥ï¼šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p>\n<pre><code>git config --global credential.helper store\n</code></pre><p>æ¥ä¸‹æ¥ä½ å°±å¯ä»¥æ‰§è¡Œpushã€pullç­‰æ“ä½œäº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šæç¤ºä½ è¾“å…¥ä¸€æ¬¡è´¦å·å¯†ç çš„ï¼Œåˆ«ç€æ€¥ï¼Œä»…æ­¤ä¸€æ¬¡è€Œå·²ï¼Œä»¥åå°±ä¸ä¼šå†è®©ä½ è¾“å…¥äº†ï¼Œæå®šã€‚</p>\n<h1 id=\"Ubuntuä¸‹mongodbå¯åŠ¨å¤±è´¥\"><a href=\"#Ubuntuä¸‹mongodbå¯åŠ¨å¤±è´¥\" class=\"headerlink\" title=\"Ubuntuä¸‹mongodbå¯åŠ¨å¤±è´¥\"></a>Ubuntuä¸‹mongodbå¯åŠ¨å¤±è´¥</h1><p>å¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512267.pic_hd.jpg\" alt=\"mongodbå¯åŠ¨å¤±è´¥\"></p>\n<p>é€ æˆå¯åŠ¨å¤±è´¥çš„åŸå› æœ‰å¾ˆå¤šï¼Œå…¶ä¸­æœ€å¸¸è§çš„å°±æ˜¯éæ­£å¸¸é€€å‡ºï¼Œä¸‹ä¸€æ¬¡å†å¯åŠ¨çš„æ—¶å€™å°±ä¼šé‡åˆ°å¦‚ä¸Šæƒ…å†µï¼Œåœ¨Macä¸‹æˆ–è€…windowsä¸‹ï¼Œä¸€èˆ¬æˆ‘ä»¬éœ€è¦æŠŠmongod.lockæ–‡ä»¶åˆ é™¤å°±å¯ä»¥æˆåŠŸé‡å¯äº†ï¼Œä½†æ˜¯ä»Šå¤©åœ¨Ubuntuä¸‹å´ä¸è¡Œï¼Œåœ¨Ubuntuä¸‹è®°å¾—è¦æŠŠmongodb-27017.sockæ–‡ä»¶ä¹Ÿåˆ é™¤æ‰ï¼š</p>\n<pre><code>sudo rm -rf /var/lib/mongodb/mongod.lock\nsudo rm -rf /tmp/mongodb-27017.sock\n</code></pre><p>ä¹‹åé‡å¯ï¼š</p>\n<pre><code>sudo service mongod start\n</code></pre><p>å°±å¯ä»¥æ­£å¸¸å¯åŠ¨äº†</p>\n<h1 id=\"nohup-å‘½ä»¤è®©è¿›ç¨‹åœ¨åå°è¿è¡Œ\"><a href=\"#nohup-å‘½ä»¤è®©è¿›ç¨‹åœ¨åå°è¿è¡Œ\" class=\"headerlink\" title=\"nohup å‘½ä»¤è®©è¿›ç¨‹åœ¨åå°è¿è¡Œ\"></a>nohup å‘½ä»¤è®©è¿›ç¨‹åœ¨åå°è¿è¡Œ</h1><p>å½“æ—¶æˆ‘æ˜¯ä½¿ç”¨sshè¿œç¨‹ç™»å½•çš„ï¼Œåˆä¸æƒ³å¤šå¼€çª—å£ï¼Œæ‰€ä»¥å¸Œæœ›nodeæœåŠ¡åœ¨åå°è¿è¡Œï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨nohupå‘½ä»¤ï¼Œè¯¥å‘½ä»¤èƒ½å¤Ÿè®©è¿›ç¨‹åœ¨åå°è¿è¡Œï¼Œnohupå‘½ä»¤çš„æ ¼å¼å¦‚ä¸‹ï¼š</p>\n<pre><code>nohup Command [ Arg ... ] [ã€€&amp; ]\n</code></pre><p>ä¾‹å¦‚æˆ‘æƒ³è¦nodeçš„webæœåŠ¡åœ¨åå°è¿è¡Œï¼Œåœ¨æˆ‘çš„é¡¹ç›®ä¸­å¯ä»¥æ‰§è¡Œä¸‹é¢çš„ä»£ç å¸¦åˆ°ç›®çš„ï¼š</p>\n<pre><code>nohup node admin.js &amp;\n</code></pre><h1 id=\"Ubuntuä¸‹æ·»åŠ ç”¨æˆ·å¹¶èµ‹äºˆrootæƒé™\"><a href=\"#Ubuntuä¸‹æ·»åŠ ç”¨æˆ·å¹¶èµ‹äºˆrootæƒé™\" class=\"headerlink\" title=\"Ubuntuä¸‹æ·»åŠ ç”¨æˆ·å¹¶èµ‹äºˆrootæƒé™\"></a>Ubuntuä¸‹æ·»åŠ ç”¨æˆ·å¹¶èµ‹äºˆrootæƒé™</h1><p>åœ¨Ubuntuä¸‹å¯ä»¥ä½¿ç”¨ adduser å‘½ä»¤æ·»åŠ ä¸€ä¸ªç”¨æˆ·ï¼š</p>\n<pre><code>adduser &lt;username&gt;\n</code></pre><p>æ‰§è¡Œè¯¥å‘½ä»¤ä¹‹åä¼šè®©ä½ ä¸ºè¯¥ç”¨æˆ·è®¾ç½®å¯†ç ï¼Œä½†æ˜¯è¿™æ ·æ·»åŠ çš„ç”¨æˆ·æ˜¯æ²¡æœ‰ä½¿ç”¨rootæƒé™çš„ç”¨æˆ·ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›é…ç½®æ¥èµ‹äºˆè¯¥ç”¨æˆ·ä½¿ç”¨rootæƒé™çš„èƒ½åŠ›ï¼Œä¿®æ”¹é…ç½®éœ€è¦ç¼–è¾‘ /etc/sudoers æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é»˜è®¤æ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥ä¿®æ”¹æ–‡ä»¶ä¸ºå¯å†™ï¼š</p>\n<pre><code>chmod u+w /etc/sudoers\n</code></pre><p>ç„¶åç¼–è¾‘è¯¥æ–‡ä»¶ï¼š</p>\n<pre><code>sudo vim /etc/sudoers\n</code></pre><p>æ‰¾åˆ°ä¸‹é¢è¿™å¥è¯ï¼š</p>\n<pre><code># Allow members of group sudo to execute any command\n%sudo   ALL=(ALL:ALL) ALL\n</code></pre><p>åœ¨å…¶ %sudo   ALL=(ALL:ALL) ALL ä¸‹é¢å†æ·»åŠ ä¸€è¡Œï¼š</p>\n<pre><code>%username   ALL=(ALL:ALL) ALL\n</code></pre><p>usernameä¸ºä½ åˆ›å»ºç”¨æˆ·çš„ç”¨æˆ·åï¼Œä¹‹åä¿å­˜é€€å‡ºï¼Œå¹¶è¿˜åŸ sudoers æ–‡ä»¶åªè¯»çš„æƒé™ï¼š</p>\n<pre><code>chmod u-w /etc/sudoers\n</code></pre><p>æ¥ä¸‹æ¥æ–°ç”¨æˆ·å°±å¯ä»¥ç™»å½•å¹¶ä½¿ç”¨rootæƒé™äº†ã€‚</p>\n<h1 id=\"å®‰è£…å®ŒUbuntuåä¹±ç \"><a href=\"#å®‰è£…å®ŒUbuntuåä¹±ç \" class=\"headerlink\" title=\"å®‰è£…å®ŒUbuntuåä¹±ç \"></a>å®‰è£…å®ŒUbuntuåä¹±ç </h1><p>ä¿®æ”¹/etc/default/locale</p>\n<pre><code>sudo vim /etc/default/locale\n</code></pre><p>å°†ï¼š</p>\n<pre><code>LANG=zh_CN.UTF-8\nLANGUAGE=zh_CN:zh\n</code></pre><p>ä¿®æ”¹ä¸ºï¼š</p>\n<pre><code>LANG=&quot;en_US.UTF-8&quot;\nLANGUAGE=&quot;en_US:en&quot;\n</code></pre><p>æœ€årebootä¸€ä¸‹å°±å¯ä»¥äº†ï¼š</p>\n<pre><code>sudo reboot\n</code></pre>","site":{"data":{}},"excerpt":"<blockquote>\n<p>ä¹‹å‰åœ¨Macç³»ç»Ÿä¸‹æ­å»ºäº†ä¸€å¥—ç”¨äºè‡ªåŠ¨åŒ–æ„å»ºH5é¡¹ç›®çš„å¹³å°ï¼Œä¸€ç›´ç”¨MacåšserviceæœåŠ¡ï¼Œç°åœ¨è¦å°†é¡¹ç›®è¿ç§»åˆ°Ubuntuä¸Šé¢ï¼Œä¸‹é¢æ˜¯æ•´ç†äº†è¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œä¾›ä»¥åæŸ¥é˜…</p>\n</blockquote>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20151226Ubuntu.jpg\" alt=\"Ubuntu\"></p>","more":"<h1 id=\"Ubuntuä¸‹å®‰è£…gitå’Œnode\"><a href=\"#Ubuntuä¸‹å®‰è£…gitå’Œnode\" class=\"headerlink\" title=\"Ubuntuä¸‹å®‰è£…gitå’Œnode\"></a>Ubuntuä¸‹å®‰è£…gitå’Œnode</h1><p>å½“æ—¶åœ¨åšé¡¹ç›®è¿ç§»çš„æ—¶å€™å¹¶æ²¡æœ‰æœåŠ¡å™¨ï¼Œæ‰€ä»¥åªèƒ½ç”¨æ—è¾¹çš„ä¸€å°windowså®‰è£…ä¸ªåŒç³»ç»Ÿï¼Œæ¥å……å½“æœåŠ¡å™¨äº†ï¼Œå®‰è£…æ–¹æ³•ç½‘ä¸Šå¾ˆå¤šï¼Œä¸è¿‡æˆ‘æ¨èä¸€ä¸ªæœ‹å‹çš„åšå®¢ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘æ‰€å®‰è£…çš„Ubuntuçš„ç‰ˆæœ¬æ˜¯14.04çš„ï¼Œå¹¶ä¸”æ˜¯serverç‰ˆçš„ï¼Œä¸è¯¥åšå®¢ä¸ç¬¦ï¼Œä½†æ˜¯åŸç†ç›¸åŒï¼Œè´´å‡º<a href=\"https://xuri.me/2013/04/09/easybcd-install-ubuntu.html\" target=\"_blank\" rel=\"external\">åšå®¢åœ°å€</a>ã€‚</p>\n<h2 id=\"Ubuntu-ä¸‹å®‰è£…-git\"><a href=\"#Ubuntu-ä¸‹å®‰è£…-git\" class=\"headerlink\" title=\"Ubuntu ä¸‹å®‰è£… git\"></a>Ubuntu ä¸‹å®‰è£… git</h2><p>Ubuntuçš„åŒ…ç®¡ç†æ˜¯apt-getï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…git:</p>\n<pre><code>sudo apt-get install git\n</code></pre><p>ä½†æ˜¯è¿™æ ·å®‰è£…çš„gitç‰ˆæœ¬æ˜¯æ¯”è¾ƒè€çš„ï¼Œå¹¶ä¸æ¨èè¿™æ ·å®‰è£…ï¼Œå¦‚æœæƒ³å®‰è£…æœ€æ–°å¯ç”¨ç‰ˆæœ¬çš„å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>\n<pre><code>sudo add-apt-repository ppa:git-core/ppa\nsudo apt-get update\nsudo apt-get install git\n</code></pre><p>å®‰è£…å®Œæˆåå¯ä»¥æŸ¥çœ‹gitç‰ˆæœ¬ï¼Œç¡®å®šå®‰è£…æ˜¯å¦æˆåŠŸ</p>\n<pre><code>git --version\n</code></pre><h2 id=\"Ubuntu-ä¸‹å®‰è£…-node\"><a href=\"#Ubuntu-ä¸‹å®‰è£…-node\" class=\"headerlink\" title=\"Ubuntu ä¸‹å®‰è£… node\"></a>Ubuntu ä¸‹å®‰è£… node</h2><p>æˆ‘é‡‡ç”¨çš„æºç ç¼–è¯‘å®‰è£…çš„æ–¹å¼ï¼Œé¦–å…ˆå»<a href=\"https://nodejs.org/dist/\" target=\"_blank\" rel=\"external\">nodeå¾—èµ„æºåˆ—è¡¨</a>æ‰¾åˆ°ä½ è¦ç°åœ¨çš„èµ„æºåŒ…ï¼Œå¦‚æˆ‘æ‰€é€‰æ‹©çš„èµ„æºåŒ…æ˜¯ï¼š</p>\n<p><a href=\"https://nodejs.org/dist/v5.0.0/node-v5.0.0.tar.gz\" target=\"_blank\" rel=\"external\">https://nodejs.org/dist/v5.0.0/node-v5.0.0.tar.gz</a></p>\n<p>é€‰æ‹©å¥½èµ„æºåŒ…åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å³å¯ï¼š</p>\n<pre><code># ä¸‹è½½èµ„æº\nwget https://nodejs.org/dist/v5.0.0/node-v5.0.0.tar.gz\n# è§£å‹\ntar zxvf node-v5.0.0.tar.gz\n# ç¼–è¯‘å®‰è£…\ncd node-v5.0.0\n./configure \nmake \nmake install\ncp /usr/local/bin/node /usr/sbin/\n</code></pre><p>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p>\n<pre><code>node -v\n</code></pre><p>å¦‚æœæ­£ç¡®è¾“å‡ºç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆè¯´æ˜æˆ‘ä»¬å®‰è£…æˆåŠŸäº†ï¼Œä¹Ÿæœ‰å…¶ä»–å®‰è£…æ–¹å¼ï¼Œå¤§å®¶å»ç½‘ä¸Šçœ‹çœ‹å§</p>\n<h1 id=\"Ubuntué»˜è®¤æ˜¯ç”¨dashè§£æshellè„šæœ¬\"><a href=\"#Ubuntué»˜è®¤æ˜¯ç”¨dashè§£æshellè„šæœ¬\" class=\"headerlink\" title=\"Ubuntué»˜è®¤æ˜¯ç”¨dashè§£æshellè„šæœ¬\"></a>Ubuntué»˜è®¤æ˜¯ç”¨dashè§£æshellè„šæœ¬</h1><p>ç”±äºé¡¹ç›®ä¸­æˆ‘ä½¿ç”¨åˆ°äº†shellè„šæœ¬ï¼Œæ‰€ä»¥å½“é¡¹ç›®è¿ç§»åˆ°Ubuntuçš„æ—¶å€™æŠ¥é”™ï¼š</p>\n<pre><code>source xxx.shæ—¶æç¤º source: not found\n</code></pre><p>åŸå› æ˜¯å½“æ—¶é¡¹ç›®åœ¨Macä¸‹è·‘å¾—ï¼ŒMacè§£æshellè„šæœ¬ä½¿ç”¨çš„æ˜¯bashï¼Œè€ŒUbuntué»˜è®¤æ˜¯ç”¨çš„dashï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ï¼š</p>\n<pre><code>ls -l `which sh`\n</code></pre><p>å¦‚ä¸‹å›¾<br><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512266.pic.jpg\" alt=\"Ubuntué»˜è®¤ä½¿ç”¨dashè§£æshellè„šæœ¬\"></p>\n<p>æˆ‘ä»¬å¯ä»¥ä¿®æ”¹Ubuntuè§£æshellçš„æ–¹å¼ï¼š</p>\n<pre><code>sudo dpkg-reconfigure dash\n</code></pre><p>æ‰§è¡Œè¯¥å‘½ä»¤åä¼šå‡ºç°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„é€‰é¡¹ï¼Œæˆ‘ä»¬åªéœ€è¦é€‰æ‹©å¦å³å¯ï¼š<br><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512264.pic.jpg\" alt=\"é€‰æ‹©å¦\"></p>\n<p>è¿™æ—¶åœ¨æŸ¥çœ‹ä¸€ä¸‹Ubuntuè§£æshellçš„æ–¹å¼ï¼š</p>\n<pre><code>ls -l `which sh`\n</code></pre><p>å¦‚ä¸‹å›¾ï¼Œå·²ç»å˜ä¸ºäº† bash</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512263.pic.jpg\" alt=\"bash\"></p>\n<h1 id=\"gitçš„ä¸€äº›å°äº‹å„¿\"><a href=\"#gitçš„ä¸€äº›å°äº‹å„¿\" class=\"headerlink\" title=\"gitçš„ä¸€äº›å°äº‹å„¿\"></a>gitçš„ä¸€äº›å°äº‹å„¿</h1><p>å¦å¤–ï¼Œæ€»ç»“ä¸¤ç‚¹gitä¸­çš„ä¸€äº›ä¸œè¥¿</p>\n<h2 id=\"1ã€è®©gitå¿½ç•¥æ–‡ä»¶æƒé™\"><a href=\"#1ã€è®©gitå¿½ç•¥æ–‡ä»¶æƒé™\" class=\"headerlink\" title=\"1ã€è®©gitå¿½ç•¥æ–‡ä»¶æƒé™\"></a>1ã€è®©gitå¿½ç•¥æ–‡ä»¶æƒé™</h2><p>é¡¹ç›®å¹»æƒ³æ­å»ºå¥½äº†ä¹‹åï¼Œæˆ‘å°±æŠŠä»£ç ä½¿ç”¨gitå…‹éš†äº†ä¸‹æ¥ï¼Œç”±äºè¿è¡Œé¡¹ç›®çš„æ—¶å€™æŠ¥é”™æç¤ºæ–‡ä»¶æƒé™æœ‰é—®é¢˜ï¼Œäºæ˜¯æˆ‘å°±ä¿®æ”¹äº†æ•´ä¸ªé¡¹ç›®ç›®å½•çš„æƒé™ï¼Œå½“æˆ‘ä½¿ç”¨git pullæ‹‰å–é¡¹ç›®çš„æ—¶å€™æç¤ºæˆ‘æœ¬åœ°ä»“åº“æœ‰ä¿®æ”¹ï¼Œè®©æˆ‘æäº¤åå†æ‹‰å–ï¼Œæˆ‘å¾ˆç–‘æƒ‘å› ä¸ºæˆ‘åˆšåˆšcloneä¸‹æ¥ï¼Œæ¯›å„¿éƒ½æ²¡åŠ¨ï¼Œæˆ‘æ”¹ä»€ä¹ˆäº†æˆ‘ï¼Ÿåæ¥æ˜¯ç”¨git statusæŸ¥çœ‹å‘ç°ï¼Œä¸€å¤§ç‰‡çº¢è‰²(ä¿®æ”¹æœªæäº¤çš„æ–‡ä»¶)ï¼Œåæ¥æˆ‘çŒœæƒ³åº”è¯¥æ˜¯gitæŠŠæ–‡ä»¶æƒé™ä¹Ÿçº³å…¥ç®¡ç†çš„èŒƒå›´å†…äº†ï¼Œåæ¥ä¸Šç½‘ä¸€æŸ¥ï¼Œæœç„¶ï¼Œä¸è¿‡å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä½¿gitå¿½ç•¥å¯¹æ–‡ä»¶æƒé™çš„ç®¡ç†ï¼š</p>\n<pre><code>git config core.filemode false\n</code></pre><p>è¿™æ˜¯åœ¨ä½¿ç”¨ git status æŸ¥çœ‹ï¼Œä¼šå‘ç°å·¥ä½œåŒºå¹²å‡€äº†ï¼Œæå®šã€‚</p>\n<h2 id=\"2ã€httpsæ–¹å¼å…‹éš†çš„é¡¹ç›®æ¯æ¬¡éƒ½æç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç \"><a href=\"#2ã€httpsæ–¹å¼å…‹éš†çš„é¡¹ç›®æ¯æ¬¡éƒ½æç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç \" class=\"headerlink\" title=\"2ã€httpsæ–¹å¼å…‹éš†çš„é¡¹ç›®æ¯æ¬¡éƒ½æç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç \"></a>2ã€httpsæ–¹å¼å…‹éš†çš„é¡¹ç›®æ¯æ¬¡éƒ½æç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç </h2><p>å¦å¤–è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“æ—¶å…‹éš†é¡¹ç›®çš„æ—¶å€™æˆ‘ä½¿ç”¨çš„æ˜¯httpsçš„æ–¹å¼ï¼Œå¹¶ä¸æ˜¯sshçš„æ–¹å¼ï¼Œhttpsçš„å¥½å¤„å°±æ˜¯å‘Šè¯‰ï¼Œè€Œsshçš„å¥½å¤„æ˜¯å®‰å…¨ï¼Œæ­£å› å¦‚æ­¤ï¼Œä½¿ç”¨httpså…‹éš†çš„é¡¹ç›®æ¯æ¬¡pushã€pullç­‰æ“ä½œéƒ½è¦æç¤ºè¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n<p>ç¬¬ä¸€æ­¥ï¼šåˆ‡æ¢åˆ°å®¶ç›®å½• â€œ~â€</p>\n<pre><code>cd ~\n</code></pre><p>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå¹¶ç¼–è¾‘ .git-credentials æ–‡ä»¶</p>\n<pre><code>touch .git-credentials\n\nvim .git-credentials\n</code></pre><p>ç¬¬ä¸‰æ­¥ï¼šæŠŠå¦‚ä¸‹å†…å®¹å†™å…¥.git-credentialsæ–‡ä»¶ä¸­ï¼ŒæŠ¥é”™å¹¶é€€å‡º</p>\n<pre><code># {username} ä½ çš„gitè´¦æˆ·å\n# {password} ä½ çš„gitå¯†ç \n# example.com ä½ çš„gitä»“åº“åŸŸå\n# ä¾‹å­ï¼šhttps://hcysunyang:12345678@github.com\n\nhttps://{username}:{password}@example.com\n</code></pre><p>ç¬¬å››æ­¥ï¼šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p>\n<pre><code>git config --global credential.helper store\n</code></pre><p>æ¥ä¸‹æ¥ä½ å°±å¯ä»¥æ‰§è¡Œpushã€pullç­‰æ“ä½œäº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šæç¤ºä½ è¾“å…¥ä¸€æ¬¡è´¦å·å¯†ç çš„ï¼Œåˆ«ç€æ€¥ï¼Œä»…æ­¤ä¸€æ¬¡è€Œå·²ï¼Œä»¥åå°±ä¸ä¼šå†è®©ä½ è¾“å…¥äº†ï¼Œæå®šã€‚</p>\n<h1 id=\"Ubuntuä¸‹mongodbå¯åŠ¨å¤±è´¥\"><a href=\"#Ubuntuä¸‹mongodbå¯åŠ¨å¤±è´¥\" class=\"headerlink\" title=\"Ubuntuä¸‹mongodbå¯åŠ¨å¤±è´¥\"></a>Ubuntuä¸‹mongodbå¯åŠ¨å¤±è´¥</h1><p>å¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201512267.pic_hd.jpg\" alt=\"mongodbå¯åŠ¨å¤±è´¥\"></p>\n<p>é€ æˆå¯åŠ¨å¤±è´¥çš„åŸå› æœ‰å¾ˆå¤šï¼Œå…¶ä¸­æœ€å¸¸è§çš„å°±æ˜¯éæ­£å¸¸é€€å‡ºï¼Œä¸‹ä¸€æ¬¡å†å¯åŠ¨çš„æ—¶å€™å°±ä¼šé‡åˆ°å¦‚ä¸Šæƒ…å†µï¼Œåœ¨Macä¸‹æˆ–è€…windowsä¸‹ï¼Œä¸€èˆ¬æˆ‘ä»¬éœ€è¦æŠŠmongod.lockæ–‡ä»¶åˆ é™¤å°±å¯ä»¥æˆåŠŸé‡å¯äº†ï¼Œä½†æ˜¯ä»Šå¤©åœ¨Ubuntuä¸‹å´ä¸è¡Œï¼Œåœ¨Ubuntuä¸‹è®°å¾—è¦æŠŠmongodb-27017.sockæ–‡ä»¶ä¹Ÿåˆ é™¤æ‰ï¼š</p>\n<pre><code>sudo rm -rf /var/lib/mongodb/mongod.lock\nsudo rm -rf /tmp/mongodb-27017.sock\n</code></pre><p>ä¹‹åé‡å¯ï¼š</p>\n<pre><code>sudo service mongod start\n</code></pre><p>å°±å¯ä»¥æ­£å¸¸å¯åŠ¨äº†</p>\n<h1 id=\"nohup-å‘½ä»¤è®©è¿›ç¨‹åœ¨åå°è¿è¡Œ\"><a href=\"#nohup-å‘½ä»¤è®©è¿›ç¨‹åœ¨åå°è¿è¡Œ\" class=\"headerlink\" title=\"nohup å‘½ä»¤è®©è¿›ç¨‹åœ¨åå°è¿è¡Œ\"></a>nohup å‘½ä»¤è®©è¿›ç¨‹åœ¨åå°è¿è¡Œ</h1><p>å½“æ—¶æˆ‘æ˜¯ä½¿ç”¨sshè¿œç¨‹ç™»å½•çš„ï¼Œåˆä¸æƒ³å¤šå¼€çª—å£ï¼Œæ‰€ä»¥å¸Œæœ›nodeæœåŠ¡åœ¨åå°è¿è¡Œï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨nohupå‘½ä»¤ï¼Œè¯¥å‘½ä»¤èƒ½å¤Ÿè®©è¿›ç¨‹åœ¨åå°è¿è¡Œï¼Œnohupå‘½ä»¤çš„æ ¼å¼å¦‚ä¸‹ï¼š</p>\n<pre><code>nohup Command [ Arg ... ] [ã€€&amp; ]\n</code></pre><p>ä¾‹å¦‚æˆ‘æƒ³è¦nodeçš„webæœåŠ¡åœ¨åå°è¿è¡Œï¼Œåœ¨æˆ‘çš„é¡¹ç›®ä¸­å¯ä»¥æ‰§è¡Œä¸‹é¢çš„ä»£ç å¸¦åˆ°ç›®çš„ï¼š</p>\n<pre><code>nohup node admin.js &amp;\n</code></pre><h1 id=\"Ubuntuä¸‹æ·»åŠ ç”¨æˆ·å¹¶èµ‹äºˆrootæƒé™\"><a href=\"#Ubuntuä¸‹æ·»åŠ ç”¨æˆ·å¹¶èµ‹äºˆrootæƒé™\" class=\"headerlink\" title=\"Ubuntuä¸‹æ·»åŠ ç”¨æˆ·å¹¶èµ‹äºˆrootæƒé™\"></a>Ubuntuä¸‹æ·»åŠ ç”¨æˆ·å¹¶èµ‹äºˆrootæƒé™</h1><p>åœ¨Ubuntuä¸‹å¯ä»¥ä½¿ç”¨ adduser å‘½ä»¤æ·»åŠ ä¸€ä¸ªç”¨æˆ·ï¼š</p>\n<pre><code>adduser &lt;username&gt;\n</code></pre><p>æ‰§è¡Œè¯¥å‘½ä»¤ä¹‹åä¼šè®©ä½ ä¸ºè¯¥ç”¨æˆ·è®¾ç½®å¯†ç ï¼Œä½†æ˜¯è¿™æ ·æ·»åŠ çš„ç”¨æˆ·æ˜¯æ²¡æœ‰ä½¿ç”¨rootæƒé™çš„ç”¨æˆ·ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›é…ç½®æ¥èµ‹äºˆè¯¥ç”¨æˆ·ä½¿ç”¨rootæƒé™çš„èƒ½åŠ›ï¼Œä¿®æ”¹é…ç½®éœ€è¦ç¼–è¾‘ /etc/sudoers æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é»˜è®¤æ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥ä¿®æ”¹æ–‡ä»¶ä¸ºå¯å†™ï¼š</p>\n<pre><code>chmod u+w /etc/sudoers\n</code></pre><p>ç„¶åç¼–è¾‘è¯¥æ–‡ä»¶ï¼š</p>\n<pre><code>sudo vim /etc/sudoers\n</code></pre><p>æ‰¾åˆ°ä¸‹é¢è¿™å¥è¯ï¼š</p>\n<pre><code># Allow members of group sudo to execute any command\n%sudo   ALL=(ALL:ALL) ALL\n</code></pre><p>åœ¨å…¶ %sudo   ALL=(ALL:ALL) ALL ä¸‹é¢å†æ·»åŠ ä¸€è¡Œï¼š</p>\n<pre><code>%username   ALL=(ALL:ALL) ALL\n</code></pre><p>usernameä¸ºä½ åˆ›å»ºç”¨æˆ·çš„ç”¨æˆ·åï¼Œä¹‹åä¿å­˜é€€å‡ºï¼Œå¹¶è¿˜åŸ sudoers æ–‡ä»¶åªè¯»çš„æƒé™ï¼š</p>\n<pre><code>chmod u-w /etc/sudoers\n</code></pre><p>æ¥ä¸‹æ¥æ–°ç”¨æˆ·å°±å¯ä»¥ç™»å½•å¹¶ä½¿ç”¨rootæƒé™äº†ã€‚</p>\n<h1 id=\"å®‰è£…å®ŒUbuntuåä¹±ç \"><a href=\"#å®‰è£…å®ŒUbuntuåä¹±ç \" class=\"headerlink\" title=\"å®‰è£…å®ŒUbuntuåä¹±ç \"></a>å®‰è£…å®ŒUbuntuåä¹±ç </h1><p>ä¿®æ”¹/etc/default/locale</p>\n<pre><code>sudo vim /etc/default/locale\n</code></pre><p>å°†ï¼š</p>\n<pre><code>LANG=zh_CN.UTF-8\nLANGUAGE=zh_CN:zh\n</code></pre><p>ä¿®æ”¹ä¸ºï¼š</p>\n<pre><code>LANG=&quot;en_US.UTF-8&quot;\nLANGUAGE=&quot;en_US:en&quot;\n</code></pre><p>æœ€årebootä¸€ä¸‹å°±å¯ä»¥äº†ï¼š</p>\n<pre><code>sudo reboot\n</code></pre>"},{"title":"ä½¿ç”¨gulpå®ç°é¡¹ç›®æ¨¡æ¿åŒ–","date":"2016-01-06T07:30:32.000Z","_content":"\n> å½“ä¸€ä¸ªå¤§é¡¹ç›®é€æ¸æˆå‹ï¼Œæˆ–è€…ä¸€ä¸ªæ¡†æ¶åˆæˆ–è€…ä¸€ä¸ªå¼€å‘æ–¹å¼é€æ¸æˆå‹çš„æ—¶å€™ï¼Œæ€»ä¼šæœ‰ä¸€ä¸ªæ‰€è°“çš„â€œå¥—è·¯â€ï¼Œæˆ‘ä»¬åœ¨å·¥ä½œä¸­å¾€å¾€éµå¾ªç€è¿™ä¸ªå¥—è·¯èµ°ã€‚æ‰€ä»¥æ›´æ¢ä¸€å®¶å…¬å¸æˆ–è€…ä¸€ä¸ªéƒ¨é—¨å›¢é˜Ÿçš„æ—¶å€™ï¼Œä¸Šæ‰‹é¡¹ç›®å¹¶ä¸éš¾ï¼Œä½ åªéœ€è¦æŒæ¡è¿™ä¸ªå›¢é˜Ÿç®¡ç”¨çš„â€œå¥—è·¯â€å°±okäº†ï¼Œå…³é”®æ˜¯ï¼šè¦æƒ³åŠæ³•ä¼˜åŒ–è¿™ä¸ªâ€œå¥—è·¯â€ã€‚\n\n<!-- more -->\n\nä¹‹å‰ä¸€ç›´åœ¨åšå†…éƒ¨æ¡†æ¶çš„è·¨å¹³å°å’Œè‡ªåŠ¨åŒ–æ„å»ºçš„äº‹ï¼ŒåŠ ä¸Šå¼€å‘ä¸šåŠ¡é€»è¾‘çš„é¡µé¢å·²ç»å®Œæˆï¼Œå°±æ²¡å»ä¼˜åŒ–è¿™ä¸ªå¼€å‘å¥—è·¯ï¼Œä»€ä¹ˆå¥—è·¯å‘¢ï¼Ÿå½“é¡¹ç›®ä¸­éœ€è¦ä¸€ä¸ªæ–°çš„H5é¡µé¢çš„æ—¶å€™ï¼Œå°±éœ€è¦æ‰‹åŠ¨å»copyä¹‹å‰çš„ä¸€ä¸ªé¡µé¢ä»£ç ï¼Œç„¶åé€ä¸ªä¿®æ”¹ï¼Œæ”¹æˆå¦å¤–ä¸€ä¸ªé¡µé¢ã€‚å»æ‰ä»£ç ä¸­çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¼šå‘ç°é™¤äº†åç§°ä¸åŒï¼Œå…¶ä½™çš„ä»£ç å…¨éƒ¨ç›¸åŒï¼Œç§‰æ‰¿ç€â€œä¸Šçº§å‘½ä»¤ä¸€å®šè¦å®Œæˆâ€æ€»å®—æ—¨ï¼Œéä¹Ÿï¼Œæ˜¯ç§‰æ‰¿ç€â€œæˆ‘æ˜¯ä¸€ä¸ªç¨‹åºå‘˜â€çš„å®—æ—¨ï¼Œå°±åº”è¯¥å°†ä¸€åˆ‡éœ€è¦æ‰‹å·¥å®Œæˆçš„å·¥ä½œå˜æˆè‡ªåŠ¨åŒ–çš„ã€‚æ‰€ä»¥......æ‰€ä»¥å°±ä¸å¹NBäº†ï¼Œå¥½å¥½å†™......\n\nä¸€ä¸ªå¤è€çš„æ€è·¯æ˜¯ï¼Œä½ åº”è¯¥æœ‰ä¸€å¥—æ¨¡æ¿ï¼Œå½“æœ‰æ–°çš„é¡µé¢éœ€è¦å¼€å‘çš„æ—¶å€™ï¼Œåªéœ€ä¸€æ¡å‘½ä»¤æˆ–è€…ä¸€ä¸ªæŒ‰é’®å°±å¯ä»¥è‡ªåŠ¨å¸®ä½ åŸºäºè¿™å¥—æ¨¡æ¿åˆ›å»ºä¸€ä¸ªå¯ç›´æ¥ç”¨äºå¼€å‘çš„ç¯å¢ƒã€‚ä¸ºäº†è¾¾æˆè¿™ä¸ªç›®çš„ï¼Œæˆ‘æ˜¯ç”¨åˆ°äº†ï¼š\n\n1.gulp\n\ngulpçš„æ•™ç¨‹è¿™é‡Œå°±ä¸å†™äº†ï¼Œè¿™é‡Œè®²çš„å¾ˆæ¸…æ¥š [gulpæ•™ç¨‹](http://www.gulpjs.com.cn/docs/api/)\n\n2.è¯¥åŠŸèƒ½ä¸»è¦ä½¿ç”¨åˆ°çš„gulpæ’ä»¶\n\n[gulp-load-plugins](https://www.npmjs.com/package/gulp-load-plugins) åŠ è½½gulpæ’ä»¶çš„æ’ä»¶\n\n[gulp-file-include](https://www.npmjs.com/package/gulp-file-include) æ–‡ä»¶åŒ…å«æ’ä»¶\n\n[gulp-data](https://www.npmjs.com/package/gulp-data) æä¾›æ•°æ®ï¼Œè¯¥æ•°æ®å¯è¢«å…¶ä»–gulpæ’ä»¶ä½¿ç”¨\n\n[gulp-rename](https://www.npmjs.com/package/gulp-rename) é‡å‘½åæ–‡ä»¶\n\n[gulp-template](https://www.npmjs.com/package/gulp-template) æ¸²æŸ“æ¨¡æ¿\n\nä¸Šé¢çš„æ’ä»¶è¿æ¥ï¼Œç‚¹å‡»è¿›å»å°±æ˜¯æ–‡æ¡£ã€‚\n\nç¬”è€…è®¤ä¸ºæœ€å¥½çš„å­¦ä¹ æ–¹å¼å°±æ˜¯æœ‰ä¸€ä¸ªèƒ½è¿è¡Œèµ·æ¥çš„é¡¹ç›®ï¼Œç„¶åçœ‹ç€ä»£ç ä¸€æ­¥æ­¥èµ°ï¼Œæ‰€ä»¥æˆ‘æŠŠæ¨¡æ¿åŒ–ä»å…¬å¸çš„é¡¹ç›®ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œå¹¶åšäº†åˆ å‡ï¼Œæç‚¼å‡ºä¸€ä¸ªå®Œæ•´çš„å¯è¿è¡Œçš„é¡¹ç›®ï¼Œå¹¶æ”¾åœ¨æˆ‘çš„gitä»“åº“ï¼Œå¯ä»¥è¿è¡Œä¸€ä¸‹å‘½ä»¤æŸ¥çœ‹æ•ˆæœï¼Œè°ƒè¯•å¹¶å­¦ä¹ ï¼š\n\n```\ngit clone git@github.com:HcySunYang/modapp.git\n\nnpm install\n\ngulp createapp --name=aaa\n```\n\nä¸‹é¢æ˜¯gulpfile.jsæ–‡ä»¶å’Œpackage.jsonæ–‡ä»¶\n\n# gulpfile.js #\n\n```\nvar gulp = require('gulp');\nvar gulpLoadPlugins = require(\"gulp-load-plugins\");\nvar plugins = gulpLoadPlugins();\nvar util     = require(\"gulp-util\");\nvar devPath = './html';\nvar appData = {};\n\n/*\n * @desc ç»„è£…æ¨¡æ¿\n * @src  devPath \n * @deps \n * @dest devPath + '/tmod/app/dest'\n */\ngulp.task('includeTpl',function () {\n    // è·å– gulp å‘½ä»¤çš„ --nameå‚æ•°çš„å€¼ ï¼ˆgulp createapp --name=aaaï¼‰\n    var appName = util.env.name || 'special';\n    \n    // é¦–å­—æ¯å¤§å†™\n    var appNameBig = appName.replace((/\\w/), function(char){\n        return char.toUpperCase();\n    });\n\n    appData={\n        app: appName,\n        appapi: appNameBig,\n        appDo: appName + \"Do\",\n        title: appName\n    }\n    return gulp.src([\n            devPath + '/tmod/app/app.tpl',\n            devPath + '/tmod/app/appDo.tpl',\n            devPath + '/tmod/app/app.html',\n            devPath + '/tmod/app/appApi.tpl',\n            devPath + '/tmod/app/appapiInterFace.tpl'\n        ])\n        .pipe(plugins.fileInclude({\n            prefix: '@@',\n            basepath: '@file'\n        }))\n        .pipe(gulp.dest(devPath + '/tmod/app/dest'));\n});\n\n/*\n * @desc è§£ææ¨¡æ¿\n * @src  devPath \n * @deps includeTpl\n * @dest devPath + '/tmod/app/dest'\n */\ngulp.task('resolveTpl',[\"includeTpl\"],function () {\n    return gulp.src([\n            devPath + '/tmod/app/dest/app.tpl',\n            devPath + '/tmod/app/dest/appDo.tpl',\n            devPath + '/tmod/app/dest/app.html',\n            devPath + '/tmod/app/dest/appApi.tpl',\n            devPath + '/tmod/app/dest/appapiInterFace.tpl'\n        ])\n        .pipe(plugins.data(function () {\n            return {app: appData.app, appDo:appData.appDo,title:appData.title, appapi : appData.appapi};\n        }))\n        .pipe(plugins.template())\n        .pipe(gulp.dest(devPath + '/tmod/app/dest'));\n});\n\n/*\n * @desc åˆ›å»ºéƒ¨ç½²\n * @src  devPath + '/tmod/app/dest \n * @deps resolveTpl\n * @dest devPath + '/modules/'\n */\ngulp.task('createapp', [\"resolveTpl\"], function () {\n    // åˆ›å»ºéƒ¨ç½²å…¥å£jsæ–‡ä»¶ï¼Œå¦‚ index.js\n    gulp.src(devPath + '/tmod/app/dest/app.tpl')\n        .pipe(plugins.rename({\n            basename: appData.app,\n            extname: \".js\"\n        }))\n        .pipe(gulp.dest(devPath + '/target/'+appData.app));\n\n    // åˆ›å»ºéƒ¨ç½²ä¸šåŠ¡é€»è¾‘jsæ–‡ä»¶ï¼Œå¦‚ indexDo.js\n    gulp.src(devPath + '/tmod/app/dest/appDo.tpl')\n        .pipe(plugins.rename({\n            basename: appData.appDo,\n            extname: \".js\"\n        }))\n        .pipe(gulp.dest(devPath + '/target/'+appData.app));\n\n    // åˆ›å»ºéƒ¨ç½²htmlé¡µé¢æ–‡ä»¶ï¼Œå¦‚ index.html\n    gulp.src([devPath + '/tmod/app/dest/*.html'])\n        .pipe(plugins.rename({\n            basename: appData.app,\n            extname: \".html\"\n        }))\n        .pipe(gulp.dest(devPath + '/target/'+appData.app));\n\n    // åˆ›å»ºéƒ¨ç½²apiæ¥å£jsæ–‡ä»¶ï¼Œå¦‚ indexApi.js\n    gulp.src(devPath + '/tmod/app/dest/appApi.tpl')\n        .pipe(plugins.rename({\n            basename: appData.app + 'Api',\n            extname: \".js\"\n        }))\n        .pipe(gulp.dest(devPath + '/target/clientApi'));\n\n    // åˆ›å»ºéƒ¨ç½²è·¨å¹³å°æ¥å£jsæ–‡ä»¶ï¼Œå¦‚ indexapiInterFace.js\n    gulp.src(devPath + '/tmod/app/dest/appapiInterFace.tpl')\n        .pipe(plugins.rename({\n            basename: appData.app + 'apiInterFace',\n            extname: \".js\"\n        }))\n        .pipe(gulp.dest(devPath + '/target/clientApi'));\n});\n\n```\n\n# package.json #\n\n```\n{\n  \"name\": \"app\",\n  \"project\": \"app\",\n  \"version\": \"1.0.0\",\n  \"host\": \"http://10.0.69.79\",\n  \"path\": \"/home/huangjian/workstation/bridge/newssdk/bin\",\n  \"devDependencies\": {\n    \"gulp\": \"^3.9.0\",\n    \"gulp-data\": \"^1.2.0\",\n    \"gulp-file-include\": \"^0.13.7\",\n    \"gulp-load-plugins\": \"^0.10.0\",\n    \"gulp-rename\": \"^1.2.0\",\n    \"gulp-template\": \"^2.1.0\",\n    \"gulp-util\": \"^3.0.6\"\n  }\n}\n\n```\n\nå¤§å®¶é‡åœ¨ç ”ç©¶ä»£ç çš„æ€è·¯å’Œå„ä¸ªç»„ä»¶çš„ç”¨æ³•åŠé…åˆï¼Œä¸è¦å»ç ”ç©¶ä»£ç çš„ç»†èŠ‚ï¼Œæ¯”å¦‚è¿™ä¸ªæ„å»ºå‡ºæ¥çš„é¡¹ç›®æœ‰ä»€ä¹ˆç”¨å•Šï¼Ÿå½“ç„¶å¯¹äºä½ æ¥è¯´æ²¡ä»€ä¹ˆç”¨ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯åº”ç”¨åœ¨å…¬å¸é¡¹ç›®ä¸­çš„ï¼Œè¿™ä¸ªæ˜¯ä¸ºäº†ç»™å¤§å®¶æ–¹ä¾¿ï¼ŒæŠ½ç¦»å‡ºæ¥çš„ï¼Œæ‰€ä»¥å¤§å®¶æŠŠæ¡å¥½é‡ç‚¹ã€‚\n\n\n\n","source":"_posts/2016/01/06/ä½¿ç”¨gulpå®ç°é¡¹ç›®æ¨¡æ¿åŒ–.md","raw":"title: ä½¿ç”¨gulpå®ç°é¡¹ç›®æ¨¡æ¿åŒ–\ndate: 2016-01-06 15:30:32\ncategories:\n- WebFrontEnd\ntags:\n- gulp\n- nodejs\n- è‡ªåŠ¨åŒ–\n- æ’ä»¶\n---\n\n> å½“ä¸€ä¸ªå¤§é¡¹ç›®é€æ¸æˆå‹ï¼Œæˆ–è€…ä¸€ä¸ªæ¡†æ¶åˆæˆ–è€…ä¸€ä¸ªå¼€å‘æ–¹å¼é€æ¸æˆå‹çš„æ—¶å€™ï¼Œæ€»ä¼šæœ‰ä¸€ä¸ªæ‰€è°“çš„â€œå¥—è·¯â€ï¼Œæˆ‘ä»¬åœ¨å·¥ä½œä¸­å¾€å¾€éµå¾ªç€è¿™ä¸ªå¥—è·¯èµ°ã€‚æ‰€ä»¥æ›´æ¢ä¸€å®¶å…¬å¸æˆ–è€…ä¸€ä¸ªéƒ¨é—¨å›¢é˜Ÿçš„æ—¶å€™ï¼Œä¸Šæ‰‹é¡¹ç›®å¹¶ä¸éš¾ï¼Œä½ åªéœ€è¦æŒæ¡è¿™ä¸ªå›¢é˜Ÿç®¡ç”¨çš„â€œå¥—è·¯â€å°±okäº†ï¼Œå…³é”®æ˜¯ï¼šè¦æƒ³åŠæ³•ä¼˜åŒ–è¿™ä¸ªâ€œå¥—è·¯â€ã€‚\n\n<!-- more -->\n\nä¹‹å‰ä¸€ç›´åœ¨åšå†…éƒ¨æ¡†æ¶çš„è·¨å¹³å°å’Œè‡ªåŠ¨åŒ–æ„å»ºçš„äº‹ï¼ŒåŠ ä¸Šå¼€å‘ä¸šåŠ¡é€»è¾‘çš„é¡µé¢å·²ç»å®Œæˆï¼Œå°±æ²¡å»ä¼˜åŒ–è¿™ä¸ªå¼€å‘å¥—è·¯ï¼Œä»€ä¹ˆå¥—è·¯å‘¢ï¼Ÿå½“é¡¹ç›®ä¸­éœ€è¦ä¸€ä¸ªæ–°çš„H5é¡µé¢çš„æ—¶å€™ï¼Œå°±éœ€è¦æ‰‹åŠ¨å»copyä¹‹å‰çš„ä¸€ä¸ªé¡µé¢ä»£ç ï¼Œç„¶åé€ä¸ªä¿®æ”¹ï¼Œæ”¹æˆå¦å¤–ä¸€ä¸ªé¡µé¢ã€‚å»æ‰ä»£ç ä¸­çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¼šå‘ç°é™¤äº†åç§°ä¸åŒï¼Œå…¶ä½™çš„ä»£ç å…¨éƒ¨ç›¸åŒï¼Œç§‰æ‰¿ç€â€œä¸Šçº§å‘½ä»¤ä¸€å®šè¦å®Œæˆâ€æ€»å®—æ—¨ï¼Œéä¹Ÿï¼Œæ˜¯ç§‰æ‰¿ç€â€œæˆ‘æ˜¯ä¸€ä¸ªç¨‹åºå‘˜â€çš„å®—æ—¨ï¼Œå°±åº”è¯¥å°†ä¸€åˆ‡éœ€è¦æ‰‹å·¥å®Œæˆçš„å·¥ä½œå˜æˆè‡ªåŠ¨åŒ–çš„ã€‚æ‰€ä»¥......æ‰€ä»¥å°±ä¸å¹NBäº†ï¼Œå¥½å¥½å†™......\n\nä¸€ä¸ªå¤è€çš„æ€è·¯æ˜¯ï¼Œä½ åº”è¯¥æœ‰ä¸€å¥—æ¨¡æ¿ï¼Œå½“æœ‰æ–°çš„é¡µé¢éœ€è¦å¼€å‘çš„æ—¶å€™ï¼Œåªéœ€ä¸€æ¡å‘½ä»¤æˆ–è€…ä¸€ä¸ªæŒ‰é’®å°±å¯ä»¥è‡ªåŠ¨å¸®ä½ åŸºäºè¿™å¥—æ¨¡æ¿åˆ›å»ºä¸€ä¸ªå¯ç›´æ¥ç”¨äºå¼€å‘çš„ç¯å¢ƒã€‚ä¸ºäº†è¾¾æˆè¿™ä¸ªç›®çš„ï¼Œæˆ‘æ˜¯ç”¨åˆ°äº†ï¼š\n\n1.gulp\n\ngulpçš„æ•™ç¨‹è¿™é‡Œå°±ä¸å†™äº†ï¼Œè¿™é‡Œè®²çš„å¾ˆæ¸…æ¥š [gulpæ•™ç¨‹](http://www.gulpjs.com.cn/docs/api/)\n\n2.è¯¥åŠŸèƒ½ä¸»è¦ä½¿ç”¨åˆ°çš„gulpæ’ä»¶\n\n[gulp-load-plugins](https://www.npmjs.com/package/gulp-load-plugins) åŠ è½½gulpæ’ä»¶çš„æ’ä»¶\n\n[gulp-file-include](https://www.npmjs.com/package/gulp-file-include) æ–‡ä»¶åŒ…å«æ’ä»¶\n\n[gulp-data](https://www.npmjs.com/package/gulp-data) æä¾›æ•°æ®ï¼Œè¯¥æ•°æ®å¯è¢«å…¶ä»–gulpæ’ä»¶ä½¿ç”¨\n\n[gulp-rename](https://www.npmjs.com/package/gulp-rename) é‡å‘½åæ–‡ä»¶\n\n[gulp-template](https://www.npmjs.com/package/gulp-template) æ¸²æŸ“æ¨¡æ¿\n\nä¸Šé¢çš„æ’ä»¶è¿æ¥ï¼Œç‚¹å‡»è¿›å»å°±æ˜¯æ–‡æ¡£ã€‚\n\nç¬”è€…è®¤ä¸ºæœ€å¥½çš„å­¦ä¹ æ–¹å¼å°±æ˜¯æœ‰ä¸€ä¸ªèƒ½è¿è¡Œèµ·æ¥çš„é¡¹ç›®ï¼Œç„¶åçœ‹ç€ä»£ç ä¸€æ­¥æ­¥èµ°ï¼Œæ‰€ä»¥æˆ‘æŠŠæ¨¡æ¿åŒ–ä»å…¬å¸çš„é¡¹ç›®ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œå¹¶åšäº†åˆ å‡ï¼Œæç‚¼å‡ºä¸€ä¸ªå®Œæ•´çš„å¯è¿è¡Œçš„é¡¹ç›®ï¼Œå¹¶æ”¾åœ¨æˆ‘çš„gitä»“åº“ï¼Œå¯ä»¥è¿è¡Œä¸€ä¸‹å‘½ä»¤æŸ¥çœ‹æ•ˆæœï¼Œè°ƒè¯•å¹¶å­¦ä¹ ï¼š\n\n```\ngit clone git@github.com:HcySunYang/modapp.git\n\nnpm install\n\ngulp createapp --name=aaa\n```\n\nä¸‹é¢æ˜¯gulpfile.jsæ–‡ä»¶å’Œpackage.jsonæ–‡ä»¶\n\n# gulpfile.js #\n\n```\nvar gulp = require('gulp');\nvar gulpLoadPlugins = require(\"gulp-load-plugins\");\nvar plugins = gulpLoadPlugins();\nvar util     = require(\"gulp-util\");\nvar devPath = './html';\nvar appData = {};\n\n/*\n * @desc ç»„è£…æ¨¡æ¿\n * @src  devPath \n * @deps \n * @dest devPath + '/tmod/app/dest'\n */\ngulp.task('includeTpl',function () {\n    // è·å– gulp å‘½ä»¤çš„ --nameå‚æ•°çš„å€¼ ï¼ˆgulp createapp --name=aaaï¼‰\n    var appName = util.env.name || 'special';\n    \n    // é¦–å­—æ¯å¤§å†™\n    var appNameBig = appName.replace((/\\w/), function(char){\n        return char.toUpperCase();\n    });\n\n    appData={\n        app: appName,\n        appapi: appNameBig,\n        appDo: appName + \"Do\",\n        title: appName\n    }\n    return gulp.src([\n            devPath + '/tmod/app/app.tpl',\n            devPath + '/tmod/app/appDo.tpl',\n            devPath + '/tmod/app/app.html',\n            devPath + '/tmod/app/appApi.tpl',\n            devPath + '/tmod/app/appapiInterFace.tpl'\n        ])\n        .pipe(plugins.fileInclude({\n            prefix: '@@',\n            basepath: '@file'\n        }))\n        .pipe(gulp.dest(devPath + '/tmod/app/dest'));\n});\n\n/*\n * @desc è§£ææ¨¡æ¿\n * @src  devPath \n * @deps includeTpl\n * @dest devPath + '/tmod/app/dest'\n */\ngulp.task('resolveTpl',[\"includeTpl\"],function () {\n    return gulp.src([\n            devPath + '/tmod/app/dest/app.tpl',\n            devPath + '/tmod/app/dest/appDo.tpl',\n            devPath + '/tmod/app/dest/app.html',\n            devPath + '/tmod/app/dest/appApi.tpl',\n            devPath + '/tmod/app/dest/appapiInterFace.tpl'\n        ])\n        .pipe(plugins.data(function () {\n            return {app: appData.app, appDo:appData.appDo,title:appData.title, appapi : appData.appapi};\n        }))\n        .pipe(plugins.template())\n        .pipe(gulp.dest(devPath + '/tmod/app/dest'));\n});\n\n/*\n * @desc åˆ›å»ºéƒ¨ç½²\n * @src  devPath + '/tmod/app/dest \n * @deps resolveTpl\n * @dest devPath + '/modules/'\n */\ngulp.task('createapp', [\"resolveTpl\"], function () {\n    // åˆ›å»ºéƒ¨ç½²å…¥å£jsæ–‡ä»¶ï¼Œå¦‚ index.js\n    gulp.src(devPath + '/tmod/app/dest/app.tpl')\n        .pipe(plugins.rename({\n            basename: appData.app,\n            extname: \".js\"\n        }))\n        .pipe(gulp.dest(devPath + '/target/'+appData.app));\n\n    // åˆ›å»ºéƒ¨ç½²ä¸šåŠ¡é€»è¾‘jsæ–‡ä»¶ï¼Œå¦‚ indexDo.js\n    gulp.src(devPath + '/tmod/app/dest/appDo.tpl')\n        .pipe(plugins.rename({\n            basename: appData.appDo,\n            extname: \".js\"\n        }))\n        .pipe(gulp.dest(devPath + '/target/'+appData.app));\n\n    // åˆ›å»ºéƒ¨ç½²htmlé¡µé¢æ–‡ä»¶ï¼Œå¦‚ index.html\n    gulp.src([devPath + '/tmod/app/dest/*.html'])\n        .pipe(plugins.rename({\n            basename: appData.app,\n            extname: \".html\"\n        }))\n        .pipe(gulp.dest(devPath + '/target/'+appData.app));\n\n    // åˆ›å»ºéƒ¨ç½²apiæ¥å£jsæ–‡ä»¶ï¼Œå¦‚ indexApi.js\n    gulp.src(devPath + '/tmod/app/dest/appApi.tpl')\n        .pipe(plugins.rename({\n            basename: appData.app + 'Api',\n            extname: \".js\"\n        }))\n        .pipe(gulp.dest(devPath + '/target/clientApi'));\n\n    // åˆ›å»ºéƒ¨ç½²è·¨å¹³å°æ¥å£jsæ–‡ä»¶ï¼Œå¦‚ indexapiInterFace.js\n    gulp.src(devPath + '/tmod/app/dest/appapiInterFace.tpl')\n        .pipe(plugins.rename({\n            basename: appData.app + 'apiInterFace',\n            extname: \".js\"\n        }))\n        .pipe(gulp.dest(devPath + '/target/clientApi'));\n});\n\n```\n\n# package.json #\n\n```\n{\n  \"name\": \"app\",\n  \"project\": \"app\",\n  \"version\": \"1.0.0\",\n  \"host\": \"http://10.0.69.79\",\n  \"path\": \"/home/huangjian/workstation/bridge/newssdk/bin\",\n  \"devDependencies\": {\n    \"gulp\": \"^3.9.0\",\n    \"gulp-data\": \"^1.2.0\",\n    \"gulp-file-include\": \"^0.13.7\",\n    \"gulp-load-plugins\": \"^0.10.0\",\n    \"gulp-rename\": \"^1.2.0\",\n    \"gulp-template\": \"^2.1.0\",\n    \"gulp-util\": \"^3.0.6\"\n  }\n}\n\n```\n\nå¤§å®¶é‡åœ¨ç ”ç©¶ä»£ç çš„æ€è·¯å’Œå„ä¸ªç»„ä»¶çš„ç”¨æ³•åŠé…åˆï¼Œä¸è¦å»ç ”ç©¶ä»£ç çš„ç»†èŠ‚ï¼Œæ¯”å¦‚è¿™ä¸ªæ„å»ºå‡ºæ¥çš„é¡¹ç›®æœ‰ä»€ä¹ˆç”¨å•Šï¼Ÿå½“ç„¶å¯¹äºä½ æ¥è¯´æ²¡ä»€ä¹ˆç”¨ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯åº”ç”¨åœ¨å…¬å¸é¡¹ç›®ä¸­çš„ï¼Œè¿™ä¸ªæ˜¯ä¸ºäº†ç»™å¤§å®¶æ–¹ä¾¿ï¼ŒæŠ½ç¦»å‡ºæ¥çš„ï¼Œæ‰€ä»¥å¤§å®¶æŠŠæ¡å¥½é‡ç‚¹ã€‚\n\n\n\n","slug":"ä½¿ç”¨gulpå®ç°é¡¹ç›®æ¨¡æ¿åŒ–","published":1,"updated":"2016-01-06T11:24:41.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx51l000q47fy210itng8","content":"<blockquote>\n<p>å½“ä¸€ä¸ªå¤§é¡¹ç›®é€æ¸æˆå‹ï¼Œæˆ–è€…ä¸€ä¸ªæ¡†æ¶åˆæˆ–è€…ä¸€ä¸ªå¼€å‘æ–¹å¼é€æ¸æˆå‹çš„æ—¶å€™ï¼Œæ€»ä¼šæœ‰ä¸€ä¸ªæ‰€è°“çš„â€œå¥—è·¯â€ï¼Œæˆ‘ä»¬åœ¨å·¥ä½œä¸­å¾€å¾€éµå¾ªç€è¿™ä¸ªå¥—è·¯èµ°ã€‚æ‰€ä»¥æ›´æ¢ä¸€å®¶å…¬å¸æˆ–è€…ä¸€ä¸ªéƒ¨é—¨å›¢é˜Ÿçš„æ—¶å€™ï¼Œä¸Šæ‰‹é¡¹ç›®å¹¶ä¸éš¾ï¼Œä½ åªéœ€è¦æŒæ¡è¿™ä¸ªå›¢é˜Ÿç®¡ç”¨çš„â€œå¥—è·¯â€å°±okäº†ï¼Œå…³é”®æ˜¯ï¼šè¦æƒ³åŠæ³•ä¼˜åŒ–è¿™ä¸ªâ€œå¥—è·¯â€ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n<p>ä¹‹å‰ä¸€ç›´åœ¨åšå†…éƒ¨æ¡†æ¶çš„è·¨å¹³å°å’Œè‡ªåŠ¨åŒ–æ„å»ºçš„äº‹ï¼ŒåŠ ä¸Šå¼€å‘ä¸šåŠ¡é€»è¾‘çš„é¡µé¢å·²ç»å®Œæˆï¼Œå°±æ²¡å»ä¼˜åŒ–è¿™ä¸ªå¼€å‘å¥—è·¯ï¼Œä»€ä¹ˆå¥—è·¯å‘¢ï¼Ÿå½“é¡¹ç›®ä¸­éœ€è¦ä¸€ä¸ªæ–°çš„H5é¡µé¢çš„æ—¶å€™ï¼Œå°±éœ€è¦æ‰‹åŠ¨å»copyä¹‹å‰çš„ä¸€ä¸ªé¡µé¢ä»£ç ï¼Œç„¶åé€ä¸ªä¿®æ”¹ï¼Œæ”¹æˆå¦å¤–ä¸€ä¸ªé¡µé¢ã€‚å»æ‰ä»£ç ä¸­çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¼šå‘ç°é™¤äº†åç§°ä¸åŒï¼Œå…¶ä½™çš„ä»£ç å…¨éƒ¨ç›¸åŒï¼Œç§‰æ‰¿ç€â€œä¸Šçº§å‘½ä»¤ä¸€å®šè¦å®Œæˆâ€æ€»å®—æ—¨ï¼Œéä¹Ÿï¼Œæ˜¯ç§‰æ‰¿ç€â€œæˆ‘æ˜¯ä¸€ä¸ªç¨‹åºå‘˜â€çš„å®—æ—¨ï¼Œå°±åº”è¯¥å°†ä¸€åˆ‡éœ€è¦æ‰‹å·¥å®Œæˆçš„å·¥ä½œå˜æˆè‡ªåŠ¨åŒ–çš„ã€‚æ‰€ä»¥â€¦â€¦æ‰€ä»¥å°±ä¸å¹NBäº†ï¼Œå¥½å¥½å†™â€¦â€¦</p>\n<p>ä¸€ä¸ªå¤è€çš„æ€è·¯æ˜¯ï¼Œä½ åº”è¯¥æœ‰ä¸€å¥—æ¨¡æ¿ï¼Œå½“æœ‰æ–°çš„é¡µé¢éœ€è¦å¼€å‘çš„æ—¶å€™ï¼Œåªéœ€ä¸€æ¡å‘½ä»¤æˆ–è€…ä¸€ä¸ªæŒ‰é’®å°±å¯ä»¥è‡ªåŠ¨å¸®ä½ åŸºäºè¿™å¥—æ¨¡æ¿åˆ›å»ºä¸€ä¸ªå¯ç›´æ¥ç”¨äºå¼€å‘çš„ç¯å¢ƒã€‚ä¸ºäº†è¾¾æˆè¿™ä¸ªç›®çš„ï¼Œæˆ‘æ˜¯ç”¨åˆ°äº†ï¼š</p>\n<p>1.gulp</p>\n<p>gulpçš„æ•™ç¨‹è¿™é‡Œå°±ä¸å†™äº†ï¼Œè¿™é‡Œè®²çš„å¾ˆæ¸…æ¥š <a href=\"http://www.gulpjs.com.cn/docs/api/\" target=\"_blank\" rel=\"external\">gulpæ•™ç¨‹</a></p>\n<p>2.è¯¥åŠŸèƒ½ä¸»è¦ä½¿ç”¨åˆ°çš„gulpæ’ä»¶</p>\n<p><a href=\"https://www.npmjs.com/package/gulp-load-plugins\" target=\"_blank\" rel=\"external\">gulp-load-plugins</a> åŠ è½½gulpæ’ä»¶çš„æ’ä»¶</p>\n<p><a href=\"https://www.npmjs.com/package/gulp-file-include\" target=\"_blank\" rel=\"external\">gulp-file-include</a> æ–‡ä»¶åŒ…å«æ’ä»¶</p>\n<p><a href=\"https://www.npmjs.com/package/gulp-data\" target=\"_blank\" rel=\"external\">gulp-data</a> æä¾›æ•°æ®ï¼Œè¯¥æ•°æ®å¯è¢«å…¶ä»–gulpæ’ä»¶ä½¿ç”¨</p>\n<p><a href=\"https://www.npmjs.com/package/gulp-rename\" target=\"_blank\" rel=\"external\">gulp-rename</a> é‡å‘½åæ–‡ä»¶</p>\n<p><a href=\"https://www.npmjs.com/package/gulp-template\" target=\"_blank\" rel=\"external\">gulp-template</a> æ¸²æŸ“æ¨¡æ¿</p>\n<p>ä¸Šé¢çš„æ’ä»¶è¿æ¥ï¼Œç‚¹å‡»è¿›å»å°±æ˜¯æ–‡æ¡£ã€‚</p>\n<p>ç¬”è€…è®¤ä¸ºæœ€å¥½çš„å­¦ä¹ æ–¹å¼å°±æ˜¯æœ‰ä¸€ä¸ªèƒ½è¿è¡Œèµ·æ¥çš„é¡¹ç›®ï¼Œç„¶åçœ‹ç€ä»£ç ä¸€æ­¥æ­¥èµ°ï¼Œæ‰€ä»¥æˆ‘æŠŠæ¨¡æ¿åŒ–ä»å…¬å¸çš„é¡¹ç›®ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œå¹¶åšäº†åˆ å‡ï¼Œæç‚¼å‡ºä¸€ä¸ªå®Œæ•´çš„å¯è¿è¡Œçš„é¡¹ç›®ï¼Œå¹¶æ”¾åœ¨æˆ‘çš„gitä»“åº“ï¼Œå¯ä»¥è¿è¡Œä¸€ä¸‹å‘½ä»¤æŸ¥çœ‹æ•ˆæœï¼Œè°ƒè¯•å¹¶å­¦ä¹ ï¼š</p>\n<pre><code>git clone git@github.com:HcySunYang/modapp.git\n\nnpm install\n\ngulp createapp --name=aaa\n</code></pre><p>ä¸‹é¢æ˜¯gulpfile.jsæ–‡ä»¶å’Œpackage.jsonæ–‡ä»¶</p>\n<h1 id=\"gulpfile-js\"><a href=\"#gulpfile-js\" class=\"headerlink\" title=\"gulpfile.js\"></a>gulpfile.js</h1><pre><code>var gulp = require(&#39;gulp&#39;);\nvar gulpLoadPlugins = require(&quot;gulp-load-plugins&quot;);\nvar plugins = gulpLoadPlugins();\nvar util     = require(&quot;gulp-util&quot;);\nvar devPath = &#39;./html&#39;;\nvar appData = {};\n\n/*\n * @desc ç»„è£…æ¨¡æ¿\n * @src  devPath \n * @deps \n * @dest devPath + &#39;/tmod/app/dest&#39;\n */\ngulp.task(&#39;includeTpl&#39;,function () {\n    // è·å– gulp å‘½ä»¤çš„ --nameå‚æ•°çš„å€¼ ï¼ˆgulp createapp --name=aaaï¼‰\n    var appName = util.env.name || &#39;special&#39;;\n\n    // é¦–å­—æ¯å¤§å†™\n    var appNameBig = appName.replace((/\\w/), function(char){\n        return char.toUpperCase();\n    });\n\n    appData={\n        app: appName,\n        appapi: appNameBig,\n        appDo: appName + &quot;Do&quot;,\n        title: appName\n    }\n    return gulp.src([\n            devPath + &#39;/tmod/app/app.tpl&#39;,\n            devPath + &#39;/tmod/app/appDo.tpl&#39;,\n            devPath + &#39;/tmod/app/app.html&#39;,\n            devPath + &#39;/tmod/app/appApi.tpl&#39;,\n            devPath + &#39;/tmod/app/appapiInterFace.tpl&#39;\n        ])\n        .pipe(plugins.fileInclude({\n            prefix: &#39;@@&#39;,\n            basepath: &#39;@file&#39;\n        }))\n        .pipe(gulp.dest(devPath + &#39;/tmod/app/dest&#39;));\n});\n\n/*\n * @desc è§£ææ¨¡æ¿\n * @src  devPath \n * @deps includeTpl\n * @dest devPath + &#39;/tmod/app/dest&#39;\n */\ngulp.task(&#39;resolveTpl&#39;,[&quot;includeTpl&quot;],function () {\n    return gulp.src([\n            devPath + &#39;/tmod/app/dest/app.tpl&#39;,\n            devPath + &#39;/tmod/app/dest/appDo.tpl&#39;,\n            devPath + &#39;/tmod/app/dest/app.html&#39;,\n            devPath + &#39;/tmod/app/dest/appApi.tpl&#39;,\n            devPath + &#39;/tmod/app/dest/appapiInterFace.tpl&#39;\n        ])\n        .pipe(plugins.data(function () {\n            return {app: appData.app, appDo:appData.appDo,title:appData.title, appapi : appData.appapi};\n        }))\n        .pipe(plugins.template())\n        .pipe(gulp.dest(devPath + &#39;/tmod/app/dest&#39;));\n});\n\n/*\n * @desc åˆ›å»ºéƒ¨ç½²\n * @src  devPath + &#39;/tmod/app/dest \n * @deps resolveTpl\n * @dest devPath + &#39;/modules/&#39;\n */\ngulp.task(&#39;createapp&#39;, [&quot;resolveTpl&quot;], function () {\n    // åˆ›å»ºéƒ¨ç½²å…¥å£jsæ–‡ä»¶ï¼Œå¦‚ index.js\n    gulp.src(devPath + &#39;/tmod/app/dest/app.tpl&#39;)\n        .pipe(plugins.rename({\n            basename: appData.app,\n            extname: &quot;.js&quot;\n        }))\n        .pipe(gulp.dest(devPath + &#39;/target/&#39;+appData.app));\n\n    // åˆ›å»ºéƒ¨ç½²ä¸šåŠ¡é€»è¾‘jsæ–‡ä»¶ï¼Œå¦‚ indexDo.js\n    gulp.src(devPath + &#39;/tmod/app/dest/appDo.tpl&#39;)\n        .pipe(plugins.rename({\n            basename: appData.appDo,\n            extname: &quot;.js&quot;\n        }))\n        .pipe(gulp.dest(devPath + &#39;/target/&#39;+appData.app));\n\n    // åˆ›å»ºéƒ¨ç½²htmlé¡µé¢æ–‡ä»¶ï¼Œå¦‚ index.html\n    gulp.src([devPath + &#39;/tmod/app/dest/*.html&#39;])\n        .pipe(plugins.rename({\n            basename: appData.app,\n            extname: &quot;.html&quot;\n        }))\n        .pipe(gulp.dest(devPath + &#39;/target/&#39;+appData.app));\n\n    // åˆ›å»ºéƒ¨ç½²apiæ¥å£jsæ–‡ä»¶ï¼Œå¦‚ indexApi.js\n    gulp.src(devPath + &#39;/tmod/app/dest/appApi.tpl&#39;)\n        .pipe(plugins.rename({\n            basename: appData.app + &#39;Api&#39;,\n            extname: &quot;.js&quot;\n        }))\n        .pipe(gulp.dest(devPath + &#39;/target/clientApi&#39;));\n\n    // åˆ›å»ºéƒ¨ç½²è·¨å¹³å°æ¥å£jsæ–‡ä»¶ï¼Œå¦‚ indexapiInterFace.js\n    gulp.src(devPath + &#39;/tmod/app/dest/appapiInterFace.tpl&#39;)\n        .pipe(plugins.rename({\n            basename: appData.app + &#39;apiInterFace&#39;,\n            extname: &quot;.js&quot;\n        }))\n        .pipe(gulp.dest(devPath + &#39;/target/clientApi&#39;));\n});\n</code></pre><h1 id=\"package-json\"><a href=\"#package-json\" class=\"headerlink\" title=\"package.json\"></a>package.json</h1><pre><code>{\n  &quot;name&quot;: &quot;app&quot;,\n  &quot;project&quot;: &quot;app&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;host&quot;: &quot;http://10.0.69.79&quot;,\n  &quot;path&quot;: &quot;/home/huangjian/workstation/bridge/newssdk/bin&quot;,\n  &quot;devDependencies&quot;: {\n    &quot;gulp&quot;: &quot;^3.9.0&quot;,\n    &quot;gulp-data&quot;: &quot;^1.2.0&quot;,\n    &quot;gulp-file-include&quot;: &quot;^0.13.7&quot;,\n    &quot;gulp-load-plugins&quot;: &quot;^0.10.0&quot;,\n    &quot;gulp-rename&quot;: &quot;^1.2.0&quot;,\n    &quot;gulp-template&quot;: &quot;^2.1.0&quot;,\n    &quot;gulp-util&quot;: &quot;^3.0.6&quot;\n  }\n}\n</code></pre><p>å¤§å®¶é‡åœ¨ç ”ç©¶ä»£ç çš„æ€è·¯å’Œå„ä¸ªç»„ä»¶çš„ç”¨æ³•åŠé…åˆï¼Œä¸è¦å»ç ”ç©¶ä»£ç çš„ç»†èŠ‚ï¼Œæ¯”å¦‚è¿™ä¸ªæ„å»ºå‡ºæ¥çš„é¡¹ç›®æœ‰ä»€ä¹ˆç”¨å•Šï¼Ÿå½“ç„¶å¯¹äºä½ æ¥è¯´æ²¡ä»€ä¹ˆç”¨ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯åº”ç”¨åœ¨å…¬å¸é¡¹ç›®ä¸­çš„ï¼Œè¿™ä¸ªæ˜¯ä¸ºäº†ç»™å¤§å®¶æ–¹ä¾¿ï¼ŒæŠ½ç¦»å‡ºæ¥çš„ï¼Œæ‰€ä»¥å¤§å®¶æŠŠæ¡å¥½é‡ç‚¹ã€‚</p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>å½“ä¸€ä¸ªå¤§é¡¹ç›®é€æ¸æˆå‹ï¼Œæˆ–è€…ä¸€ä¸ªæ¡†æ¶åˆæˆ–è€…ä¸€ä¸ªå¼€å‘æ–¹å¼é€æ¸æˆå‹çš„æ—¶å€™ï¼Œæ€»ä¼šæœ‰ä¸€ä¸ªæ‰€è°“çš„â€œå¥—è·¯â€ï¼Œæˆ‘ä»¬åœ¨å·¥ä½œä¸­å¾€å¾€éµå¾ªç€è¿™ä¸ªå¥—è·¯èµ°ã€‚æ‰€ä»¥æ›´æ¢ä¸€å®¶å…¬å¸æˆ–è€…ä¸€ä¸ªéƒ¨é—¨å›¢é˜Ÿçš„æ—¶å€™ï¼Œä¸Šæ‰‹é¡¹ç›®å¹¶ä¸éš¾ï¼Œä½ åªéœ€è¦æŒæ¡è¿™ä¸ªå›¢é˜Ÿç®¡ç”¨çš„â€œå¥—è·¯â€å°±okäº†ï¼Œå…³é”®æ˜¯ï¼šè¦æƒ³åŠæ³•ä¼˜åŒ–è¿™ä¸ªâ€œå¥—è·¯â€ã€‚</p>\n</blockquote>","more":"<p>ä¹‹å‰ä¸€ç›´åœ¨åšå†…éƒ¨æ¡†æ¶çš„è·¨å¹³å°å’Œè‡ªåŠ¨åŒ–æ„å»ºçš„äº‹ï¼ŒåŠ ä¸Šå¼€å‘ä¸šåŠ¡é€»è¾‘çš„é¡µé¢å·²ç»å®Œæˆï¼Œå°±æ²¡å»ä¼˜åŒ–è¿™ä¸ªå¼€å‘å¥—è·¯ï¼Œä»€ä¹ˆå¥—è·¯å‘¢ï¼Ÿå½“é¡¹ç›®ä¸­éœ€è¦ä¸€ä¸ªæ–°çš„H5é¡µé¢çš„æ—¶å€™ï¼Œå°±éœ€è¦æ‰‹åŠ¨å»copyä¹‹å‰çš„ä¸€ä¸ªé¡µé¢ä»£ç ï¼Œç„¶åé€ä¸ªä¿®æ”¹ï¼Œæ”¹æˆå¦å¤–ä¸€ä¸ªé¡µé¢ã€‚å»æ‰ä»£ç ä¸­çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¼šå‘ç°é™¤äº†åç§°ä¸åŒï¼Œå…¶ä½™çš„ä»£ç å…¨éƒ¨ç›¸åŒï¼Œç§‰æ‰¿ç€â€œä¸Šçº§å‘½ä»¤ä¸€å®šè¦å®Œæˆâ€æ€»å®—æ—¨ï¼Œéä¹Ÿï¼Œæ˜¯ç§‰æ‰¿ç€â€œæˆ‘æ˜¯ä¸€ä¸ªç¨‹åºå‘˜â€çš„å®—æ—¨ï¼Œå°±åº”è¯¥å°†ä¸€åˆ‡éœ€è¦æ‰‹å·¥å®Œæˆçš„å·¥ä½œå˜æˆè‡ªåŠ¨åŒ–çš„ã€‚æ‰€ä»¥â€¦â€¦æ‰€ä»¥å°±ä¸å¹NBäº†ï¼Œå¥½å¥½å†™â€¦â€¦</p>\n<p>ä¸€ä¸ªå¤è€çš„æ€è·¯æ˜¯ï¼Œä½ åº”è¯¥æœ‰ä¸€å¥—æ¨¡æ¿ï¼Œå½“æœ‰æ–°çš„é¡µé¢éœ€è¦å¼€å‘çš„æ—¶å€™ï¼Œåªéœ€ä¸€æ¡å‘½ä»¤æˆ–è€…ä¸€ä¸ªæŒ‰é’®å°±å¯ä»¥è‡ªåŠ¨å¸®ä½ åŸºäºè¿™å¥—æ¨¡æ¿åˆ›å»ºä¸€ä¸ªå¯ç›´æ¥ç”¨äºå¼€å‘çš„ç¯å¢ƒã€‚ä¸ºäº†è¾¾æˆè¿™ä¸ªç›®çš„ï¼Œæˆ‘æ˜¯ç”¨åˆ°äº†ï¼š</p>\n<p>1.gulp</p>\n<p>gulpçš„æ•™ç¨‹è¿™é‡Œå°±ä¸å†™äº†ï¼Œè¿™é‡Œè®²çš„å¾ˆæ¸…æ¥š <a href=\"http://www.gulpjs.com.cn/docs/api/\" target=\"_blank\" rel=\"external\">gulpæ•™ç¨‹</a></p>\n<p>2.è¯¥åŠŸèƒ½ä¸»è¦ä½¿ç”¨åˆ°çš„gulpæ’ä»¶</p>\n<p><a href=\"https://www.npmjs.com/package/gulp-load-plugins\" target=\"_blank\" rel=\"external\">gulp-load-plugins</a> åŠ è½½gulpæ’ä»¶çš„æ’ä»¶</p>\n<p><a href=\"https://www.npmjs.com/package/gulp-file-include\" target=\"_blank\" rel=\"external\">gulp-file-include</a> æ–‡ä»¶åŒ…å«æ’ä»¶</p>\n<p><a href=\"https://www.npmjs.com/package/gulp-data\" target=\"_blank\" rel=\"external\">gulp-data</a> æä¾›æ•°æ®ï¼Œè¯¥æ•°æ®å¯è¢«å…¶ä»–gulpæ’ä»¶ä½¿ç”¨</p>\n<p><a href=\"https://www.npmjs.com/package/gulp-rename\" target=\"_blank\" rel=\"external\">gulp-rename</a> é‡å‘½åæ–‡ä»¶</p>\n<p><a href=\"https://www.npmjs.com/package/gulp-template\" target=\"_blank\" rel=\"external\">gulp-template</a> æ¸²æŸ“æ¨¡æ¿</p>\n<p>ä¸Šé¢çš„æ’ä»¶è¿æ¥ï¼Œç‚¹å‡»è¿›å»å°±æ˜¯æ–‡æ¡£ã€‚</p>\n<p>ç¬”è€…è®¤ä¸ºæœ€å¥½çš„å­¦ä¹ æ–¹å¼å°±æ˜¯æœ‰ä¸€ä¸ªèƒ½è¿è¡Œèµ·æ¥çš„é¡¹ç›®ï¼Œç„¶åçœ‹ç€ä»£ç ä¸€æ­¥æ­¥èµ°ï¼Œæ‰€ä»¥æˆ‘æŠŠæ¨¡æ¿åŒ–ä»å…¬å¸çš„é¡¹ç›®ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œå¹¶åšäº†åˆ å‡ï¼Œæç‚¼å‡ºä¸€ä¸ªå®Œæ•´çš„å¯è¿è¡Œçš„é¡¹ç›®ï¼Œå¹¶æ”¾åœ¨æˆ‘çš„gitä»“åº“ï¼Œå¯ä»¥è¿è¡Œä¸€ä¸‹å‘½ä»¤æŸ¥çœ‹æ•ˆæœï¼Œè°ƒè¯•å¹¶å­¦ä¹ ï¼š</p>\n<pre><code>git clone git@github.com:HcySunYang/modapp.git\n\nnpm install\n\ngulp createapp --name=aaa\n</code></pre><p>ä¸‹é¢æ˜¯gulpfile.jsæ–‡ä»¶å’Œpackage.jsonæ–‡ä»¶</p>\n<h1 id=\"gulpfile-js\"><a href=\"#gulpfile-js\" class=\"headerlink\" title=\"gulpfile.js\"></a>gulpfile.js</h1><pre><code>var gulp = require(&#39;gulp&#39;);\nvar gulpLoadPlugins = require(&quot;gulp-load-plugins&quot;);\nvar plugins = gulpLoadPlugins();\nvar util     = require(&quot;gulp-util&quot;);\nvar devPath = &#39;./html&#39;;\nvar appData = {};\n\n/*\n * @desc ç»„è£…æ¨¡æ¿\n * @src  devPath \n * @deps \n * @dest devPath + &#39;/tmod/app/dest&#39;\n */\ngulp.task(&#39;includeTpl&#39;,function () {\n    // è·å– gulp å‘½ä»¤çš„ --nameå‚æ•°çš„å€¼ ï¼ˆgulp createapp --name=aaaï¼‰\n    var appName = util.env.name || &#39;special&#39;;\n\n    // é¦–å­—æ¯å¤§å†™\n    var appNameBig = appName.replace((/\\w/), function(char){\n        return char.toUpperCase();\n    });\n\n    appData={\n        app: appName,\n        appapi: appNameBig,\n        appDo: appName + &quot;Do&quot;,\n        title: appName\n    }\n    return gulp.src([\n            devPath + &#39;/tmod/app/app.tpl&#39;,\n            devPath + &#39;/tmod/app/appDo.tpl&#39;,\n            devPath + &#39;/tmod/app/app.html&#39;,\n            devPath + &#39;/tmod/app/appApi.tpl&#39;,\n            devPath + &#39;/tmod/app/appapiInterFace.tpl&#39;\n        ])\n        .pipe(plugins.fileInclude({\n            prefix: &#39;@@&#39;,\n            basepath: &#39;@file&#39;\n        }))\n        .pipe(gulp.dest(devPath + &#39;/tmod/app/dest&#39;));\n});\n\n/*\n * @desc è§£ææ¨¡æ¿\n * @src  devPath \n * @deps includeTpl\n * @dest devPath + &#39;/tmod/app/dest&#39;\n */\ngulp.task(&#39;resolveTpl&#39;,[&quot;includeTpl&quot;],function () {\n    return gulp.src([\n            devPath + &#39;/tmod/app/dest/app.tpl&#39;,\n            devPath + &#39;/tmod/app/dest/appDo.tpl&#39;,\n            devPath + &#39;/tmod/app/dest/app.html&#39;,\n            devPath + &#39;/tmod/app/dest/appApi.tpl&#39;,\n            devPath + &#39;/tmod/app/dest/appapiInterFace.tpl&#39;\n        ])\n        .pipe(plugins.data(function () {\n            return {app: appData.app, appDo:appData.appDo,title:appData.title, appapi : appData.appapi};\n        }))\n        .pipe(plugins.template())\n        .pipe(gulp.dest(devPath + &#39;/tmod/app/dest&#39;));\n});\n\n/*\n * @desc åˆ›å»ºéƒ¨ç½²\n * @src  devPath + &#39;/tmod/app/dest \n * @deps resolveTpl\n * @dest devPath + &#39;/modules/&#39;\n */\ngulp.task(&#39;createapp&#39;, [&quot;resolveTpl&quot;], function () {\n    // åˆ›å»ºéƒ¨ç½²å…¥å£jsæ–‡ä»¶ï¼Œå¦‚ index.js\n    gulp.src(devPath + &#39;/tmod/app/dest/app.tpl&#39;)\n        .pipe(plugins.rename({\n            basename: appData.app,\n            extname: &quot;.js&quot;\n        }))\n        .pipe(gulp.dest(devPath + &#39;/target/&#39;+appData.app));\n\n    // åˆ›å»ºéƒ¨ç½²ä¸šåŠ¡é€»è¾‘jsæ–‡ä»¶ï¼Œå¦‚ indexDo.js\n    gulp.src(devPath + &#39;/tmod/app/dest/appDo.tpl&#39;)\n        .pipe(plugins.rename({\n            basename: appData.appDo,\n            extname: &quot;.js&quot;\n        }))\n        .pipe(gulp.dest(devPath + &#39;/target/&#39;+appData.app));\n\n    // åˆ›å»ºéƒ¨ç½²htmlé¡µé¢æ–‡ä»¶ï¼Œå¦‚ index.html\n    gulp.src([devPath + &#39;/tmod/app/dest/*.html&#39;])\n        .pipe(plugins.rename({\n            basename: appData.app,\n            extname: &quot;.html&quot;\n        }))\n        .pipe(gulp.dest(devPath + &#39;/target/&#39;+appData.app));\n\n    // åˆ›å»ºéƒ¨ç½²apiæ¥å£jsæ–‡ä»¶ï¼Œå¦‚ indexApi.js\n    gulp.src(devPath + &#39;/tmod/app/dest/appApi.tpl&#39;)\n        .pipe(plugins.rename({\n            basename: appData.app + &#39;Api&#39;,\n            extname: &quot;.js&quot;\n        }))\n        .pipe(gulp.dest(devPath + &#39;/target/clientApi&#39;));\n\n    // åˆ›å»ºéƒ¨ç½²è·¨å¹³å°æ¥å£jsæ–‡ä»¶ï¼Œå¦‚ indexapiInterFace.js\n    gulp.src(devPath + &#39;/tmod/app/dest/appapiInterFace.tpl&#39;)\n        .pipe(plugins.rename({\n            basename: appData.app + &#39;apiInterFace&#39;,\n            extname: &quot;.js&quot;\n        }))\n        .pipe(gulp.dest(devPath + &#39;/target/clientApi&#39;));\n});\n</code></pre><h1 id=\"package-json\"><a href=\"#package-json\" class=\"headerlink\" title=\"package.json\"></a>package.json</h1><pre><code>{\n  &quot;name&quot;: &quot;app&quot;,\n  &quot;project&quot;: &quot;app&quot;,\n  &quot;version&quot;: &quot;1.0.0&quot;,\n  &quot;host&quot;: &quot;http://10.0.69.79&quot;,\n  &quot;path&quot;: &quot;/home/huangjian/workstation/bridge/newssdk/bin&quot;,\n  &quot;devDependencies&quot;: {\n    &quot;gulp&quot;: &quot;^3.9.0&quot;,\n    &quot;gulp-data&quot;: &quot;^1.2.0&quot;,\n    &quot;gulp-file-include&quot;: &quot;^0.13.7&quot;,\n    &quot;gulp-load-plugins&quot;: &quot;^0.10.0&quot;,\n    &quot;gulp-rename&quot;: &quot;^1.2.0&quot;,\n    &quot;gulp-template&quot;: &quot;^2.1.0&quot;,\n    &quot;gulp-util&quot;: &quot;^3.0.6&quot;\n  }\n}\n</code></pre><p>å¤§å®¶é‡åœ¨ç ”ç©¶ä»£ç çš„æ€è·¯å’Œå„ä¸ªç»„ä»¶çš„ç”¨æ³•åŠé…åˆï¼Œä¸è¦å»ç ”ç©¶ä»£ç çš„ç»†èŠ‚ï¼Œæ¯”å¦‚è¿™ä¸ªæ„å»ºå‡ºæ¥çš„é¡¹ç›®æœ‰ä»€ä¹ˆç”¨å•Šï¼Ÿå½“ç„¶å¯¹äºä½ æ¥è¯´æ²¡ä»€ä¹ˆç”¨ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯åº”ç”¨åœ¨å…¬å¸é¡¹ç›®ä¸­çš„ï¼Œè¿™ä¸ªæ˜¯ä¸ºäº†ç»™å¤§å®¶æ–¹ä¾¿ï¼ŒæŠ½ç¦»å‡ºæ¥çš„ï¼Œæ‰€ä»¥å¤§å®¶æŠŠæ¡å¥½é‡ç‚¹ã€‚</p>"},{"title":"Ubuntuè¿æ¥çš„ç½‘ç»œéœ€è¦ç™»é™†è®¤è¯åæ‰èƒ½ä½¿ç”¨çš„è§£å†³åŠæ³•","date":"2016-01-14T06:51:34.000Z","_content":"\n> å…¬å¸å›¢é˜Ÿå†…éƒ¨ç»§ç»­ä¸€å°æœåŠ¡å™¨ï¼Œåšä¸€äº›å¯¹å†…ä½¿ç”¨çš„ç½‘ç«™çš„éƒ¨ç½²å·¥ä½œï¼Œäºæ˜¯æŠŠæ—è¾¹çš„ä¸€å°windowsç”µè„‘å®‰è£…æˆäº†åŒç³»ç»Ÿ----ä¸€ä¸ªserverç‰ˆæœ¬çš„Ubuntuï¼Œä½†æ˜¯å…¬å¸çš„ç½‘ç»œæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ¯å¤©æ—©ä¸Šæ¥äº†éƒ½è¦é‡æ–°ç™»å½•è®¤è¯ï¼Œä¹‹åæ‰èƒ½æ­£å¸¸ä½¿ç”¨ç½‘ç»œï¼Œä¸€å¼€å§‹è¿˜å¥½ï¼Œæ¯å¤©æ—©ä¸Šæ¥äº†å…ˆå¯åŠ¨windowsç³»ç»Ÿè®¤è¯å®Œç½‘ç»œä¹‹åå†å¯åŠ¨Ubuntuï¼Œè¿™æ ·å°±èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä¸è¿‡åæ¥çªç„¶ä¸å¥½ä½¿äº†ï¼Œäºæ˜¯æƒ³äº†ä¸ªåŠæ³•ï¼Œä½¿ç”¨Pythonå†™ä¸ªè„šæœ¬ï¼Œå†è®¾ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©å®šæ—¶æ‰§è¡Œä¸€æ¬¡è¯¥è„šæœ¬ï¼Œä»æ­¤å‘Šåˆ«ç½‘ç»œçš„çƒ¦æ¼äº†ï¼Œè¿™ç¯‡æ–‡ç« å°±è®°äº†è¿™æ¬¡ç½‘ç»œå¤„ç†çš„è¿‡ç¨‹ï¼Œç”¨åˆ°çš„ä¸€äº›ä¸œè¥¿ã€‚\n\n<!-- more -->\n\n# Ubuntuä¸‹ä½¿ç”¨Uç›˜ #\n\nç”±äºè¦æ‰§è¡ŒPythonè„šæœ¬ï¼Œè€Œè¿™å°ç”µè„‘åˆæ²¡æœ‰å®‰è£…Pythonï¼Œæœ‰æ²¡æœ‰ç½‘ç»œï¼Œæ‰€ä»¥åªèƒ½æœ‰ç½‘ç»œçš„ç”µè„‘ä¸‹è½½Pythonä»¥åŠä¸€ä¸ªPythonåº“----pycurlï¼Œç„¶åä½¿ç”¨Uç›˜æ‹·è´åˆ°è¿™å°Ubuntuä¸‹ï¼Œä¸‹é¢ä»‹ç»äº†Ubuntuä¸‹å¦‚æœä½¿ç”¨Uç›˜ã€‚\n\né¦–å…ˆæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹ä½ çš„ç£ç›˜åŒºå—ï¼š\n\n```$\nls /dev/ | grep sd\n```\n\nç„¶åæ’å…¥Uç›˜ï¼Œå†æ¬¡æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œå†æ¬¡æŸ¥çœ‹ï¼š\n\n```$\nls /dev/ | grep sd\n```\n\nè§‚å¯Ÿå¤šå‡ºæ¥äº†ä»€ä¹ˆï¼Œä¸€èˆ¬ä¼šæœ‰ä¸¤ä¸ªï¼Œå…¶ä¸­ä¸€ä¸ªçš„åå­—æ¯”å¦ä¸€ä¸ªå¤šä¸€ä¸ªæ•°å­—1ï¼Œæ¯”å¦‚sdbå’Œsdb1 \n\nè¿™æ—¶å€™è¯´æ˜Uç›˜è¢«è¯†åˆ«äº†ï¼Œæ¥ä¸‹æ¥åˆ›å»ºæŒ‚è½½ç›®å½•ï¼š\n\n```$\nsudo mkdir -p /mnt/usb\n```\n\nç„¶åä½¿ç”¨mountå‘½ä»¤æŒ‚è½½ï¼ˆå‡è®¾ä½ çš„Uç›˜ä¸ºsdbå’Œsdb1ï¼‰ï¼š\n\n```$\nsudo mount /dev/sdb1 /mnt/usb\n```\n\nç„¶åå°±å¯ä»¥ä½¿ç”¨ /mnt/usb ç›®å½•è®¿é—®Uç›˜å†…å®¹äº†ï¼š\n\n```$\ncd /mnt/usb\nls\n```\n\nå¤„ç†å®Œä½ æƒ³è¦åšçš„äº‹æƒ…ä¹‹åï¼Œæ¯”å¦‚æˆ‘å°†Uç›˜é‡Œä¸‹è½½å¥½çš„Pythonå’Œpycurlæ‹·è´åˆ°Ubuntuä¸Šï¼Œæ‹”å‡ºUç›˜ä¹‹å‰è®°å¾—å¸è½½ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š\n\n```$\nsudo amount  /dev/sdb1 /mnt/usb\n```\n\næ‹”å‡ºUç›˜å³å¯\n\n# Ubuntuç¼–è¯‘å®‰è£…è½¯ä»¶ #\n\nåœ¨ä½¿ç”¨Linuxæ—¶ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦ç¼–è¯‘å®‰è£…è½¯ä»¶ï¼Œæˆ‘å®‰è£…Pythonä¹Ÿæ˜¯ç¼–è¯‘å®‰è£…çš„ï¼Œå€Ÿç€è¿™ä¸ªå°±å¥½å¥½æŠŠUbuntuä¸‹ç¼–è¯‘å®‰è£…çš„ä¸€äº›äº‹é¡¹ä»‹ç»ä¸€ä¸‹ã€‚\n\n## 1ã€è·å–æºç åŒ…ï¼ˆtar.gzã€tar.gz2ã€zipã€tgzï¼‰ï¼Œå¹¶è§£å‹ ##\n\nå¦‚æœæœ‰ç½‘ç»œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡curlä¸‹è½½ï¼Œå¦‚æœæ²¡æœ‰ç½‘ç»œï¼Œå°±åƒæˆ‘ä¸€æ ·ï¼Œä½¿ç”¨Uç›˜ï¼Œæ€»ä¹‹ï¼Œä½ è¦è·å–åˆ°æºç åŒ…ï¼Œç„¶åè§£å‹ï¼š\n\n```$\ntar -zxvf Python-3.5.1.tgz\t// æˆ‘ä¸‹è½½çš„æ˜¯3.5.1ç‰ˆæœ¬çš„\n```\n\n## 2ã€configure ##\n\nç»å¤§å¤šæ•°linuxä¸Šéœ€è¦æºç å®‰è£…çš„ç¨‹åºå¯ä»¥é€šè¿‡./configureï¼›makeï¼›make installè¿™ä¸‰æ­¥æ¥å®ç°å®‰è£…ï¼Œè€Œæœ€å›°éš¾çš„ä¸€æ­¥å¾€å¾€éƒ½åœ¨./configureè¿™ä¸€æ­¥ï¼Œé‚£åé¢çš„å‡ æ­¥æ˜¯å¯ä»¥å¾ˆè½»æ¾çš„å®Œæˆçš„ã€‚\n\nconfigureæ˜¯ç”¨æ¥åšä¸‹é¢è¿™äº›äº‹çš„ä¸€ä¸ªè„šæœ¬ï¼š\n\n>1ã€ç”¨ä»¥æ£€æŸ¥è®¡ç®—æœºå»ºç«‹åŒ…æ‰€å¿…é¡»çš„å®Œæ•´æ€§ï¼›\n2ã€å¸®åŠ©ä½ æ ¹æ®éœ€è¦æ”¹å˜é»˜è®¤çš„è·¯å¾„ï¼›\n3ã€ç”¨ä»¥æ¿€æ´»/ç¦ç”¨ç¼–è¯‘ç¨‹åºä¸­çš„å„ç§é€‰é¡¹ï¼›\n4ã€ç”¨ä»¥æ”¹å˜ç¨‹åºå°†è¦è¢«å®‰è£…çš„è·¯å¾„ï¼›\n\nä½ å¯ä»¥é€šè¿‡æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹ç‰¹å®šconfigureè„šæœ¬æ‰€æä¾›çš„é€‰é¡¹ä¸ªåŠŸèƒ½ï¼š\n\n```$\n./configure --help | less\n```\n\nä¾‹å¦‚ï¼Œé»˜è®¤çš„configureè„šæœ¬ä¼šæŒ‡å®šå®‰è£…åˆ°/usr/localä¸‹é¢ï¼Œå¦‚æœä½ æƒ³æ”¹å˜è·¯å¾„ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢æ˜¾ç¤ºçš„configureè„šæœ¬å‘½ä»¤ï¼š\n\n```$\n./configure --PREFIX=/opt\n```\n\nå¦‚æœä½ çœŸçš„æƒ³ä»é›¶å¼€å§‹ç¼–è¯‘ï¼Œå¯ä»¥è®¤çœŸç ”è¯»ä¸€ä¸‹READMEæˆ–è€…INSTALLæ–‡ä»¶ã€‚ä½ ä¼šçœ‹åˆ°éœ€è¦ä»€ä¹ˆæ ·çš„è½¯ä»¶ç¢ç‰‡ï¼Œæ¯”èµ·åœ¨åŒ…ç³»ç»Ÿä¸­ï¼Œåœ¨è¿™äº›æ–‡ä»¶ä¸­ä»–ä»¬é€šå¸¸æœ‰ç€ä¸ä¸€æ ·çš„åå­—ã€‚æ¥ä¸‹æ¥ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨apt-cacheå·¥å…·æ¥å¯»æ‰¾ç›¸åº”çš„åŒ…ã€‚å¦‚æœä½ å·²ç»é€šè¿‡ä»“åº“ä¸­ç¼–è¯‘åŒ…ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸€ä¸ªè¯€çªï¼Œå°±æ˜¯é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…åŒ…çš„ä¾èµ–ï¼š\n\n```#\nsudo apt-get build-dep <package>\n```\n\nè¿™å¯ä»¥ç¡®ä¿æ‰€æœ‰æ‰€éœ€çš„åŒ…ä»¥æ¥éƒ½å¯ä»¥è¢«å®‰è£…ï¼Œä»¥æœŸconfigureä¸ä¼šç”±äºè¿‡æ—§çš„ä¾èµ–åŒ…è€ŒæŠ¥é”™ï¼Œå¦åˆ™ä½ å°†ä¸å¾—ä¸ç»§ç»­ç¼–è¯‘ç›¸å…³çš„ä¾èµ–ã€‚\n\nå¯»æ‰¾å¹¶ä¿®å¤configureçš„æ•…éšœ\n\næ°å·§åœ¨ä¸‹é¢è¿™å‡ ç§æƒ…å†µä¸‹ï¼Œconfigureå¯èƒ½ä¼šå¤±è´¥ï¼š\n\n>1ã€ç¼–è¯‘çš„æ—¶å€™éœ€è¦-devåŒ…ï¼›\n2ã€è¦ç¼–è¯‘GNOMEåº”ç”¨é‚£ä¹ˆéœ€è¦ç›¸åº”çš„gnome-levelï¼›è€Œç¼–è¯‘KDEåº”ç”¨åˆ™éœ€è¦kde-levelï¼›\n3ã€Cå’ŒC++åº“çš„åç§°æ€»æ˜¯ä»¥libå¼€å¤´ï¼Œå› æ­¤ï¼Œå¦‚æœ./configureæŠ¥é”™è¯´ä¸¢å¤±äº†åº“fooï¼Œé‚£ä¹ˆä½ éœ€è¦å®‰è£…libfoo-devåŒ…ï¼›\n4ã€å¦‚æœconfigureè¯´è¦â€œX includesâ€ï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦å®‰è£…ä¸‹é¢è¿™äº›åŒ…â€œxlibs-dev,xlibs-static-dev,x-window-system-devâ€ï¼Œæ³¨æ„ï¼Œæœ‰æ—¶å€™ï¼Œä»…ä»…éœ€è¦xorg-devå’Œx-devå°±å¯ä»¥äº†ã€‚-Racecar56 Under Jauntyåˆ™éœ€è¦å®‰è£…xorg-devå’Œlibx11-devã€‚\n5ã€æŸ¥çœ‹å“ªäº›åŒ…è¢«éœ€è¦çš„æŠ€å·§ï¼Œå¯ä»¥ä½¿ç”¨auto-aptå·¥å…·æˆ–è€…apt-fileå·¥å…·ï¼ˆauto-aptå¯èƒ½æ›´å¿«ä¸€äº›ï¼‰ï¼š\n```$\nsudo apt-get install auto-apt\nsudo auto-apt update\nauto-apt search missing-file.h\n```\n6ã€å¦‚æœç¼–è¯‘è½¯ä»¶ç¦ç”¨å¤±è´¥çš„é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨./configure â€“disable-FEATUREé€‰é¡¹ã€‚\n7ã€å¦‚æœä½ è‡ªå·±æ²¡èƒ½ä¿®å¤ä½ é‡åˆ°çš„é—®é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥å¯»æ±‚ubuntuå®˜æ–¹çš„å¸®åŠ©å“¦ã€‚\n\nå¦‚æœæ ¹æœ¬ä¸å­˜åœ¨configureçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆæœ€å¥½æŸ¥çœ‹ä¸€ä¸‹configure.acæ–‡ä»¶ï¼ˆæœ‰å¿…è¦è®¤çœŸé˜…è¯»ä¸€ä¸‹INSTALLå’ŒREADMEæ–‡ä»¶ï¼‰ï¼Œå¦‚æœconfigure.acæ–‡ä»¶å­˜åœ¨ï¼Œé‚£å°±æ˜¯å¼€å‘è€…å¿˜è®°åˆ›å»ºæœ€ç»ˆconfigureæ–‡ä»¶äº†ï¼Œä½ å¯ä»¥è‡ªå·±åˆ›å»ºï¼Œä¸è¿‡éœ€è¦autoconfåŒ…ï¼š\n\n```$\nsudo apt-get install autoconf\n```\n\nå®‰è£…æˆåŠŸä¹‹åï¼Œé”®å…¥ï¼š\n\n```$\nautoconf\n```\n\nå¦‚æœå¹¸è¿çš„è¯ï¼Œä¸€ä¸ªå¯å·¥ä½œçš„configureæ–‡ä»¶åº”è¯¥è¢«åˆ›å»ºäº†ã€‚\n\n## ç¼–è¯‘ ##\n\nå¯å–œå¯å–ï¼Œconfigureæ­¥éª¤å·²ç»å®Œæˆäº†ï¼ŒçœŸæ­£çš„ç¼–è¯‘å®‰è£…å¯ä»¥å¼€å§‹äº†ã€‚éå¸¸ç®€å•ï¼š\n\n```$\nmake\n```\n\nç°åœ¨å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œä½ åº”è¯¥çš„åˆ°äº†ä¸€ä¸ªå¯å·¥ä½œçš„ç¨‹åºcopyåœ¨ä½ çš„æºç›®å½•ä¸‹ï¼Œä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥è¯•ç”¨ä¸€ä¸‹ï¼š\n\n```\nsrc/program_name\n```\n\nå¦‚æœç¨‹åºè¿™ä¸€æ­¥å¤±è´¥äº†ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½æ˜¯ç¨‹åºçš„bugï¼Œè¿™æ—¶å€™ä½ æœ€å¥½è”ç³»ä¸€ä¸‹ä½œè€…ï¼Œå‘Šè¯‰ä»–ç¨‹åºçš„é—®é¢˜ã€‚\n\nå®‰è£…è½¯ä»¶åŒ…\n\nå¦‚æœä¸€åˆ‡è¿›å±•é¡ºåˆ©çš„è¯ï¼Œä½ å¯ä»¥é”®å…¥ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…ç¨‹åºï¼š\n\n```$\nsudo checkinstall\n```\n\nä½¿ç”¨CheckInstallå¯ä»¥åˆ›å»ºä¸€ä¸ª.debåŒ…ï¼Œè¿™è´§ç¨åå¯ä»¥å¾ˆå®¹æ˜“è¢«ç§»é™¤å“¦ï¼\n\nç„¶è€Œï¼Œç”±äºæŸäº›åŸå› ï¼Œä½ ä¸æƒ³ä½¿ç”¨CheckInstallï¼Œè¿™æ˜¯å®‰è£…çš„æœ€åæ–¹æ³•ï¼ˆä¸æ¨èï¼‰ï¼š\n\n```$\nsudo make install\n```\n\n# å®‰è£…Python #\n\nå›åˆ°æ­£é¢˜ï¼Œå®‰è£…Pythonï¼Œå‰é¢è®²å®Œäº†Ubuntuä¸‹ç¼–è¯‘å®‰è£…è½¯ä»¶çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä¸‹è½½å®‰è£…èµ·æ¥å°±æ–¹ä¾¿å¤šäº†ï¼š\n\né¦–å…ˆåœ¨è¿™é‡Œä¸‹è½½PythonåŒ… [python.tgz](https://www.python.org/getit/)ã€‚\n\nè§£å‹å®‰è£…ï¼š\n\n```$\ntar -zvxf Python-3.5.1.tgz\ncd Python-3.5.1\n./configure\nsudo make\nsudo make install\n```\n\næ‰§è¡Œpythonï¼ŒæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\n\n```$\npython\n```\n\n# å®‰è£…pycurl #\n\nåœ¨è¿™é‡Œä¸‹è½½èµ„æºåŒ…ï¼š[pycurl.tgz](http://pycurl.sourceforge.net/) ä¸‹è½½ï¼Œå¯èƒ½éœ€è¦ç¿»å¢™ï¼Œç„¶åè§£å‹å®‰è£…ï¼Œæ³¨æ„ï¼Œä»–æœ‰è‡ªå·±çš„å®‰è£…æ–¹å¼ï¼š\n\n```$\ntar -zxvf pycurl-$VER.tar.gz\ncd pycurl-$VER\npython setup.py install\n```\n\nç»è¿‡å¦‚ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™å°Ubuntuä¸Šæ‰§è¡Œè‡ªåŠ¨ç™»å½•è®¤è¯ç½‘ç»œçš„Pythonè„šæœ¬äº†ï¼š\n\n```$\npython xxx.py\n```\n\n# Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡ #\n\nåœ¨Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨åˆ° cronï¼Œä»€ä¹ˆäº‹cronå‘¢ï¼Ÿç‚¹å‡»ä¸‹é¢çš„è¿æ¥äº†è§£ï¼š\n\n[cronæ•™ç¨‹](http://wiki.ubuntu.org.cn/UbuntuHelp:CronHowto/zh)\n\nä¸Šé¢çš„æ•™ç¨‹å¹¶ä¸é•¿ï¼Œå¦‚æœä½ è¯»å®Œäº†æ•™ç¨‹ï¼Œé‚£ä¹ˆçœ‹çœ‹æˆ‘æ˜¯æ€ä¹ˆåšçš„å§ï¼Œé¦–å…ˆæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ç¼–è¾‘crontabæ–‡ä»¶ï¼š\n\n```$\ncrontab -e\n```\n\nç„¶åå†™ä¸‹ä¸€ä¸‹å†…å®¹ï¼š\n\n```\n8 8 * * * sh ~/test/test.sh\n```\n\nä¸Šé¢çš„å‘½ä»¤çš„æ„æ€æ˜¯ï¼šæ¯å¤©æ—©ä¸Šçš„8ç‚¹8åˆ†æ—¶ï¼Œæ‰§è¡Œ tesh.shè„šæœ¬ï¼Œä¹‹åä¿å­˜é€€å‡ºï¼ˆCtrl + x  ->  y  ->  enterå›è½¦ï¼‰ï¼Œä¿å­˜é€€å‡ºçš„æ–¹å¼æ ¹æ®ä½ ä½¿ç”¨ç¼–è¾‘å™¨å†³å®šï¼Œè‡ªå·±çœ‹å§ã€‚ä¿å­˜ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯åŠ¨cronæœåŠ¡ï¼š\n\n```$\nsudo service cron start\n```\n\næ›´å¤šå‘½ä»¤ï¼š\n\n```$\nsudo service cron stop \t\t// åœæ­¢cronæœåŠ¡\nsudo service cron restart \t// é‡å¯cronæœåŠ¡\n```\n\nå¥½äº†ï¼Œä»æ­¤æ— å¿§äº†ï¼Œä¸ç”¨æ‰‹åŠ¨XXOOäº†ã€‚\n","source":"_posts/2016/01/14/Ubuntuè¿æ¥çš„ç½‘ç»œéœ€è¦ç™»é™†è®¤è¯åæ‰èƒ½ä½¿ç”¨çš„è§£å†³åŠæ³•.md","raw":"title: Ubuntuè¿æ¥çš„ç½‘ç»œéœ€è¦ç™»é™†è®¤è¯åæ‰èƒ½ä½¿ç”¨çš„è§£å†³åŠæ³•\ndate: 2016-01-14 14:51:34\ncategories:\n- WebFrontEnd\ntags:\n- Ubuntu\n- python\n- pycurl\n---\n\n> å…¬å¸å›¢é˜Ÿå†…éƒ¨ç»§ç»­ä¸€å°æœåŠ¡å™¨ï¼Œåšä¸€äº›å¯¹å†…ä½¿ç”¨çš„ç½‘ç«™çš„éƒ¨ç½²å·¥ä½œï¼Œäºæ˜¯æŠŠæ—è¾¹çš„ä¸€å°windowsç”µè„‘å®‰è£…æˆäº†åŒç³»ç»Ÿ----ä¸€ä¸ªserverç‰ˆæœ¬çš„Ubuntuï¼Œä½†æ˜¯å…¬å¸çš„ç½‘ç»œæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ¯å¤©æ—©ä¸Šæ¥äº†éƒ½è¦é‡æ–°ç™»å½•è®¤è¯ï¼Œä¹‹åæ‰èƒ½æ­£å¸¸ä½¿ç”¨ç½‘ç»œï¼Œä¸€å¼€å§‹è¿˜å¥½ï¼Œæ¯å¤©æ—©ä¸Šæ¥äº†å…ˆå¯åŠ¨windowsç³»ç»Ÿè®¤è¯å®Œç½‘ç»œä¹‹åå†å¯åŠ¨Ubuntuï¼Œè¿™æ ·å°±èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä¸è¿‡åæ¥çªç„¶ä¸å¥½ä½¿äº†ï¼Œäºæ˜¯æƒ³äº†ä¸ªåŠæ³•ï¼Œä½¿ç”¨Pythonå†™ä¸ªè„šæœ¬ï¼Œå†è®¾ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©å®šæ—¶æ‰§è¡Œä¸€æ¬¡è¯¥è„šæœ¬ï¼Œä»æ­¤å‘Šåˆ«ç½‘ç»œçš„çƒ¦æ¼äº†ï¼Œè¿™ç¯‡æ–‡ç« å°±è®°äº†è¿™æ¬¡ç½‘ç»œå¤„ç†çš„è¿‡ç¨‹ï¼Œç”¨åˆ°çš„ä¸€äº›ä¸œè¥¿ã€‚\n\n<!-- more -->\n\n# Ubuntuä¸‹ä½¿ç”¨Uç›˜ #\n\nç”±äºè¦æ‰§è¡ŒPythonè„šæœ¬ï¼Œè€Œè¿™å°ç”µè„‘åˆæ²¡æœ‰å®‰è£…Pythonï¼Œæœ‰æ²¡æœ‰ç½‘ç»œï¼Œæ‰€ä»¥åªèƒ½æœ‰ç½‘ç»œçš„ç”µè„‘ä¸‹è½½Pythonä»¥åŠä¸€ä¸ªPythonåº“----pycurlï¼Œç„¶åä½¿ç”¨Uç›˜æ‹·è´åˆ°è¿™å°Ubuntuä¸‹ï¼Œä¸‹é¢ä»‹ç»äº†Ubuntuä¸‹å¦‚æœä½¿ç”¨Uç›˜ã€‚\n\né¦–å…ˆæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹ä½ çš„ç£ç›˜åŒºå—ï¼š\n\n```$\nls /dev/ | grep sd\n```\n\nç„¶åæ’å…¥Uç›˜ï¼Œå†æ¬¡æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œå†æ¬¡æŸ¥çœ‹ï¼š\n\n```$\nls /dev/ | grep sd\n```\n\nè§‚å¯Ÿå¤šå‡ºæ¥äº†ä»€ä¹ˆï¼Œä¸€èˆ¬ä¼šæœ‰ä¸¤ä¸ªï¼Œå…¶ä¸­ä¸€ä¸ªçš„åå­—æ¯”å¦ä¸€ä¸ªå¤šä¸€ä¸ªæ•°å­—1ï¼Œæ¯”å¦‚sdbå’Œsdb1 \n\nè¿™æ—¶å€™è¯´æ˜Uç›˜è¢«è¯†åˆ«äº†ï¼Œæ¥ä¸‹æ¥åˆ›å»ºæŒ‚è½½ç›®å½•ï¼š\n\n```$\nsudo mkdir -p /mnt/usb\n```\n\nç„¶åä½¿ç”¨mountå‘½ä»¤æŒ‚è½½ï¼ˆå‡è®¾ä½ çš„Uç›˜ä¸ºsdbå’Œsdb1ï¼‰ï¼š\n\n```$\nsudo mount /dev/sdb1 /mnt/usb\n```\n\nç„¶åå°±å¯ä»¥ä½¿ç”¨ /mnt/usb ç›®å½•è®¿é—®Uç›˜å†…å®¹äº†ï¼š\n\n```$\ncd /mnt/usb\nls\n```\n\nå¤„ç†å®Œä½ æƒ³è¦åšçš„äº‹æƒ…ä¹‹åï¼Œæ¯”å¦‚æˆ‘å°†Uç›˜é‡Œä¸‹è½½å¥½çš„Pythonå’Œpycurlæ‹·è´åˆ°Ubuntuä¸Šï¼Œæ‹”å‡ºUç›˜ä¹‹å‰è®°å¾—å¸è½½ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š\n\n```$\nsudo amount  /dev/sdb1 /mnt/usb\n```\n\næ‹”å‡ºUç›˜å³å¯\n\n# Ubuntuç¼–è¯‘å®‰è£…è½¯ä»¶ #\n\nåœ¨ä½¿ç”¨Linuxæ—¶ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦ç¼–è¯‘å®‰è£…è½¯ä»¶ï¼Œæˆ‘å®‰è£…Pythonä¹Ÿæ˜¯ç¼–è¯‘å®‰è£…çš„ï¼Œå€Ÿç€è¿™ä¸ªå°±å¥½å¥½æŠŠUbuntuä¸‹ç¼–è¯‘å®‰è£…çš„ä¸€äº›äº‹é¡¹ä»‹ç»ä¸€ä¸‹ã€‚\n\n## 1ã€è·å–æºç åŒ…ï¼ˆtar.gzã€tar.gz2ã€zipã€tgzï¼‰ï¼Œå¹¶è§£å‹ ##\n\nå¦‚æœæœ‰ç½‘ç»œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡curlä¸‹è½½ï¼Œå¦‚æœæ²¡æœ‰ç½‘ç»œï¼Œå°±åƒæˆ‘ä¸€æ ·ï¼Œä½¿ç”¨Uç›˜ï¼Œæ€»ä¹‹ï¼Œä½ è¦è·å–åˆ°æºç åŒ…ï¼Œç„¶åè§£å‹ï¼š\n\n```$\ntar -zxvf Python-3.5.1.tgz\t// æˆ‘ä¸‹è½½çš„æ˜¯3.5.1ç‰ˆæœ¬çš„\n```\n\n## 2ã€configure ##\n\nç»å¤§å¤šæ•°linuxä¸Šéœ€è¦æºç å®‰è£…çš„ç¨‹åºå¯ä»¥é€šè¿‡./configureï¼›makeï¼›make installè¿™ä¸‰æ­¥æ¥å®ç°å®‰è£…ï¼Œè€Œæœ€å›°éš¾çš„ä¸€æ­¥å¾€å¾€éƒ½åœ¨./configureè¿™ä¸€æ­¥ï¼Œé‚£åé¢çš„å‡ æ­¥æ˜¯å¯ä»¥å¾ˆè½»æ¾çš„å®Œæˆçš„ã€‚\n\nconfigureæ˜¯ç”¨æ¥åšä¸‹é¢è¿™äº›äº‹çš„ä¸€ä¸ªè„šæœ¬ï¼š\n\n>1ã€ç”¨ä»¥æ£€æŸ¥è®¡ç®—æœºå»ºç«‹åŒ…æ‰€å¿…é¡»çš„å®Œæ•´æ€§ï¼›\n2ã€å¸®åŠ©ä½ æ ¹æ®éœ€è¦æ”¹å˜é»˜è®¤çš„è·¯å¾„ï¼›\n3ã€ç”¨ä»¥æ¿€æ´»/ç¦ç”¨ç¼–è¯‘ç¨‹åºä¸­çš„å„ç§é€‰é¡¹ï¼›\n4ã€ç”¨ä»¥æ”¹å˜ç¨‹åºå°†è¦è¢«å®‰è£…çš„è·¯å¾„ï¼›\n\nä½ å¯ä»¥é€šè¿‡æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹ç‰¹å®šconfigureè„šæœ¬æ‰€æä¾›çš„é€‰é¡¹ä¸ªåŠŸèƒ½ï¼š\n\n```$\n./configure --help | less\n```\n\nä¾‹å¦‚ï¼Œé»˜è®¤çš„configureè„šæœ¬ä¼šæŒ‡å®šå®‰è£…åˆ°/usr/localä¸‹é¢ï¼Œå¦‚æœä½ æƒ³æ”¹å˜è·¯å¾„ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢æ˜¾ç¤ºçš„configureè„šæœ¬å‘½ä»¤ï¼š\n\n```$\n./configure --PREFIX=/opt\n```\n\nå¦‚æœä½ çœŸçš„æƒ³ä»é›¶å¼€å§‹ç¼–è¯‘ï¼Œå¯ä»¥è®¤çœŸç ”è¯»ä¸€ä¸‹READMEæˆ–è€…INSTALLæ–‡ä»¶ã€‚ä½ ä¼šçœ‹åˆ°éœ€è¦ä»€ä¹ˆæ ·çš„è½¯ä»¶ç¢ç‰‡ï¼Œæ¯”èµ·åœ¨åŒ…ç³»ç»Ÿä¸­ï¼Œåœ¨è¿™äº›æ–‡ä»¶ä¸­ä»–ä»¬é€šå¸¸æœ‰ç€ä¸ä¸€æ ·çš„åå­—ã€‚æ¥ä¸‹æ¥ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨apt-cacheå·¥å…·æ¥å¯»æ‰¾ç›¸åº”çš„åŒ…ã€‚å¦‚æœä½ å·²ç»é€šè¿‡ä»“åº“ä¸­ç¼–è¯‘åŒ…ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸€ä¸ªè¯€çªï¼Œå°±æ˜¯é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…åŒ…çš„ä¾èµ–ï¼š\n\n```#\nsudo apt-get build-dep <package>\n```\n\nè¿™å¯ä»¥ç¡®ä¿æ‰€æœ‰æ‰€éœ€çš„åŒ…ä»¥æ¥éƒ½å¯ä»¥è¢«å®‰è£…ï¼Œä»¥æœŸconfigureä¸ä¼šç”±äºè¿‡æ—§çš„ä¾èµ–åŒ…è€ŒæŠ¥é”™ï¼Œå¦åˆ™ä½ å°†ä¸å¾—ä¸ç»§ç»­ç¼–è¯‘ç›¸å…³çš„ä¾èµ–ã€‚\n\nå¯»æ‰¾å¹¶ä¿®å¤configureçš„æ•…éšœ\n\næ°å·§åœ¨ä¸‹é¢è¿™å‡ ç§æƒ…å†µä¸‹ï¼Œconfigureå¯èƒ½ä¼šå¤±è´¥ï¼š\n\n>1ã€ç¼–è¯‘çš„æ—¶å€™éœ€è¦-devåŒ…ï¼›\n2ã€è¦ç¼–è¯‘GNOMEåº”ç”¨é‚£ä¹ˆéœ€è¦ç›¸åº”çš„gnome-levelï¼›è€Œç¼–è¯‘KDEåº”ç”¨åˆ™éœ€è¦kde-levelï¼›\n3ã€Cå’ŒC++åº“çš„åç§°æ€»æ˜¯ä»¥libå¼€å¤´ï¼Œå› æ­¤ï¼Œå¦‚æœ./configureæŠ¥é”™è¯´ä¸¢å¤±äº†åº“fooï¼Œé‚£ä¹ˆä½ éœ€è¦å®‰è£…libfoo-devåŒ…ï¼›\n4ã€å¦‚æœconfigureè¯´è¦â€œX includesâ€ï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦å®‰è£…ä¸‹é¢è¿™äº›åŒ…â€œxlibs-dev,xlibs-static-dev,x-window-system-devâ€ï¼Œæ³¨æ„ï¼Œæœ‰æ—¶å€™ï¼Œä»…ä»…éœ€è¦xorg-devå’Œx-devå°±å¯ä»¥äº†ã€‚-Racecar56 Under Jauntyåˆ™éœ€è¦å®‰è£…xorg-devå’Œlibx11-devã€‚\n5ã€æŸ¥çœ‹å“ªäº›åŒ…è¢«éœ€è¦çš„æŠ€å·§ï¼Œå¯ä»¥ä½¿ç”¨auto-aptå·¥å…·æˆ–è€…apt-fileå·¥å…·ï¼ˆauto-aptå¯èƒ½æ›´å¿«ä¸€äº›ï¼‰ï¼š\n```$\nsudo apt-get install auto-apt\nsudo auto-apt update\nauto-apt search missing-file.h\n```\n6ã€å¦‚æœç¼–è¯‘è½¯ä»¶ç¦ç”¨å¤±è´¥çš„é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨./configure â€“disable-FEATUREé€‰é¡¹ã€‚\n7ã€å¦‚æœä½ è‡ªå·±æ²¡èƒ½ä¿®å¤ä½ é‡åˆ°çš„é—®é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥å¯»æ±‚ubuntuå®˜æ–¹çš„å¸®åŠ©å“¦ã€‚\n\nå¦‚æœæ ¹æœ¬ä¸å­˜åœ¨configureçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆæœ€å¥½æŸ¥çœ‹ä¸€ä¸‹configure.acæ–‡ä»¶ï¼ˆæœ‰å¿…è¦è®¤çœŸé˜…è¯»ä¸€ä¸‹INSTALLå’ŒREADMEæ–‡ä»¶ï¼‰ï¼Œå¦‚æœconfigure.acæ–‡ä»¶å­˜åœ¨ï¼Œé‚£å°±æ˜¯å¼€å‘è€…å¿˜è®°åˆ›å»ºæœ€ç»ˆconfigureæ–‡ä»¶äº†ï¼Œä½ å¯ä»¥è‡ªå·±åˆ›å»ºï¼Œä¸è¿‡éœ€è¦autoconfåŒ…ï¼š\n\n```$\nsudo apt-get install autoconf\n```\n\nå®‰è£…æˆåŠŸä¹‹åï¼Œé”®å…¥ï¼š\n\n```$\nautoconf\n```\n\nå¦‚æœå¹¸è¿çš„è¯ï¼Œä¸€ä¸ªå¯å·¥ä½œçš„configureæ–‡ä»¶åº”è¯¥è¢«åˆ›å»ºäº†ã€‚\n\n## ç¼–è¯‘ ##\n\nå¯å–œå¯å–ï¼Œconfigureæ­¥éª¤å·²ç»å®Œæˆäº†ï¼ŒçœŸæ­£çš„ç¼–è¯‘å®‰è£…å¯ä»¥å¼€å§‹äº†ã€‚éå¸¸ç®€å•ï¼š\n\n```$\nmake\n```\n\nç°åœ¨å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œä½ åº”è¯¥çš„åˆ°äº†ä¸€ä¸ªå¯å·¥ä½œçš„ç¨‹åºcopyåœ¨ä½ çš„æºç›®å½•ä¸‹ï¼Œä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥è¯•ç”¨ä¸€ä¸‹ï¼š\n\n```\nsrc/program_name\n```\n\nå¦‚æœç¨‹åºè¿™ä¸€æ­¥å¤±è´¥äº†ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½æ˜¯ç¨‹åºçš„bugï¼Œè¿™æ—¶å€™ä½ æœ€å¥½è”ç³»ä¸€ä¸‹ä½œè€…ï¼Œå‘Šè¯‰ä»–ç¨‹åºçš„é—®é¢˜ã€‚\n\nå®‰è£…è½¯ä»¶åŒ…\n\nå¦‚æœä¸€åˆ‡è¿›å±•é¡ºåˆ©çš„è¯ï¼Œä½ å¯ä»¥é”®å…¥ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…ç¨‹åºï¼š\n\n```$\nsudo checkinstall\n```\n\nä½¿ç”¨CheckInstallå¯ä»¥åˆ›å»ºä¸€ä¸ª.debåŒ…ï¼Œè¿™è´§ç¨åå¯ä»¥å¾ˆå®¹æ˜“è¢«ç§»é™¤å“¦ï¼\n\nç„¶è€Œï¼Œç”±äºæŸäº›åŸå› ï¼Œä½ ä¸æƒ³ä½¿ç”¨CheckInstallï¼Œè¿™æ˜¯å®‰è£…çš„æœ€åæ–¹æ³•ï¼ˆä¸æ¨èï¼‰ï¼š\n\n```$\nsudo make install\n```\n\n# å®‰è£…Python #\n\nå›åˆ°æ­£é¢˜ï¼Œå®‰è£…Pythonï¼Œå‰é¢è®²å®Œäº†Ubuntuä¸‹ç¼–è¯‘å®‰è£…è½¯ä»¶çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä¸‹è½½å®‰è£…èµ·æ¥å°±æ–¹ä¾¿å¤šäº†ï¼š\n\né¦–å…ˆåœ¨è¿™é‡Œä¸‹è½½PythonåŒ… [python.tgz](https://www.python.org/getit/)ã€‚\n\nè§£å‹å®‰è£…ï¼š\n\n```$\ntar -zvxf Python-3.5.1.tgz\ncd Python-3.5.1\n./configure\nsudo make\nsudo make install\n```\n\næ‰§è¡Œpythonï¼ŒæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\n\n```$\npython\n```\n\n# å®‰è£…pycurl #\n\nåœ¨è¿™é‡Œä¸‹è½½èµ„æºåŒ…ï¼š[pycurl.tgz](http://pycurl.sourceforge.net/) ä¸‹è½½ï¼Œå¯èƒ½éœ€è¦ç¿»å¢™ï¼Œç„¶åè§£å‹å®‰è£…ï¼Œæ³¨æ„ï¼Œä»–æœ‰è‡ªå·±çš„å®‰è£…æ–¹å¼ï¼š\n\n```$\ntar -zxvf pycurl-$VER.tar.gz\ncd pycurl-$VER\npython setup.py install\n```\n\nç»è¿‡å¦‚ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™å°Ubuntuä¸Šæ‰§è¡Œè‡ªåŠ¨ç™»å½•è®¤è¯ç½‘ç»œçš„Pythonè„šæœ¬äº†ï¼š\n\n```$\npython xxx.py\n```\n\n# Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡ #\n\nåœ¨Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨åˆ° cronï¼Œä»€ä¹ˆäº‹cronå‘¢ï¼Ÿç‚¹å‡»ä¸‹é¢çš„è¿æ¥äº†è§£ï¼š\n\n[cronæ•™ç¨‹](http://wiki.ubuntu.org.cn/UbuntuHelp:CronHowto/zh)\n\nä¸Šé¢çš„æ•™ç¨‹å¹¶ä¸é•¿ï¼Œå¦‚æœä½ è¯»å®Œäº†æ•™ç¨‹ï¼Œé‚£ä¹ˆçœ‹çœ‹æˆ‘æ˜¯æ€ä¹ˆåšçš„å§ï¼Œé¦–å…ˆæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ç¼–è¾‘crontabæ–‡ä»¶ï¼š\n\n```$\ncrontab -e\n```\n\nç„¶åå†™ä¸‹ä¸€ä¸‹å†…å®¹ï¼š\n\n```\n8 8 * * * sh ~/test/test.sh\n```\n\nä¸Šé¢çš„å‘½ä»¤çš„æ„æ€æ˜¯ï¼šæ¯å¤©æ—©ä¸Šçš„8ç‚¹8åˆ†æ—¶ï¼Œæ‰§è¡Œ tesh.shè„šæœ¬ï¼Œä¹‹åä¿å­˜é€€å‡ºï¼ˆCtrl + x  ->  y  ->  enterå›è½¦ï¼‰ï¼Œä¿å­˜é€€å‡ºçš„æ–¹å¼æ ¹æ®ä½ ä½¿ç”¨ç¼–è¾‘å™¨å†³å®šï¼Œè‡ªå·±çœ‹å§ã€‚ä¿å­˜ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯åŠ¨cronæœåŠ¡ï¼š\n\n```$\nsudo service cron start\n```\n\næ›´å¤šå‘½ä»¤ï¼š\n\n```$\nsudo service cron stop \t\t// åœæ­¢cronæœåŠ¡\nsudo service cron restart \t// é‡å¯cronæœåŠ¡\n```\n\nå¥½äº†ï¼Œä»æ­¤æ— å¿§äº†ï¼Œä¸ç”¨æ‰‹åŠ¨XXOOäº†ã€‚\n","slug":"Ubuntuè¿æ¥çš„ç½‘ç»œéœ€è¦ç™»é™†è®¤è¯åæ‰èƒ½ä½¿ç”¨çš„è§£å†³åŠæ³•","published":1,"updated":"2016-01-14T10:58:16.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx51s000t47fysjiu5lcx","content":"<blockquote>\n<p>å…¬å¸å›¢é˜Ÿå†…éƒ¨ç»§ç»­ä¸€å°æœåŠ¡å™¨ï¼Œåšä¸€äº›å¯¹å†…ä½¿ç”¨çš„ç½‘ç«™çš„éƒ¨ç½²å·¥ä½œï¼Œäºæ˜¯æŠŠæ—è¾¹çš„ä¸€å°windowsç”µè„‘å®‰è£…æˆäº†åŒç³»ç»Ÿâ€”-ä¸€ä¸ªserverç‰ˆæœ¬çš„Ubuntuï¼Œä½†æ˜¯å…¬å¸çš„ç½‘ç»œæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ¯å¤©æ—©ä¸Šæ¥äº†éƒ½è¦é‡æ–°ç™»å½•è®¤è¯ï¼Œä¹‹åæ‰èƒ½æ­£å¸¸ä½¿ç”¨ç½‘ç»œï¼Œä¸€å¼€å§‹è¿˜å¥½ï¼Œæ¯å¤©æ—©ä¸Šæ¥äº†å…ˆå¯åŠ¨windowsç³»ç»Ÿè®¤è¯å®Œç½‘ç»œä¹‹åå†å¯åŠ¨Ubuntuï¼Œè¿™æ ·å°±èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä¸è¿‡åæ¥çªç„¶ä¸å¥½ä½¿äº†ï¼Œäºæ˜¯æƒ³äº†ä¸ªåŠæ³•ï¼Œä½¿ç”¨Pythonå†™ä¸ªè„šæœ¬ï¼Œå†è®¾ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©å®šæ—¶æ‰§è¡Œä¸€æ¬¡è¯¥è„šæœ¬ï¼Œä»æ­¤å‘Šåˆ«ç½‘ç»œçš„çƒ¦æ¼äº†ï¼Œè¿™ç¯‡æ–‡ç« å°±è®°äº†è¿™æ¬¡ç½‘ç»œå¤„ç†çš„è¿‡ç¨‹ï¼Œç”¨åˆ°çš„ä¸€äº›ä¸œè¥¿ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n<h1 id=\"Ubuntuä¸‹ä½¿ç”¨Uç›˜\"><a href=\"#Ubuntuä¸‹ä½¿ç”¨Uç›˜\" class=\"headerlink\" title=\"Ubuntuä¸‹ä½¿ç”¨Uç›˜\"></a>Ubuntuä¸‹ä½¿ç”¨Uç›˜</h1><p>ç”±äºè¦æ‰§è¡ŒPythonè„šæœ¬ï¼Œè€Œè¿™å°ç”µè„‘åˆæ²¡æœ‰å®‰è£…Pythonï¼Œæœ‰æ²¡æœ‰ç½‘ç»œï¼Œæ‰€ä»¥åªèƒ½æœ‰ç½‘ç»œçš„ç”µè„‘ä¸‹è½½Pythonä»¥åŠä¸€ä¸ªPythonåº“â€”-pycurlï¼Œç„¶åä½¿ç”¨Uç›˜æ‹·è´åˆ°è¿™å°Ubuntuä¸‹ï¼Œä¸‹é¢ä»‹ç»äº†Ubuntuä¸‹å¦‚æœä½¿ç”¨Uç›˜ã€‚</p>\n<p>é¦–å…ˆæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹ä½ çš„ç£ç›˜åŒºå—ï¼š</p>\n<pre><code class=\"$\">ls /dev/ | grep sd\n</code></pre>\n<p>ç„¶åæ’å…¥Uç›˜ï¼Œå†æ¬¡æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œå†æ¬¡æŸ¥çœ‹ï¼š</p>\n<pre><code class=\"$\">ls /dev/ | grep sd\n</code></pre>\n<p>è§‚å¯Ÿå¤šå‡ºæ¥äº†ä»€ä¹ˆï¼Œä¸€èˆ¬ä¼šæœ‰ä¸¤ä¸ªï¼Œå…¶ä¸­ä¸€ä¸ªçš„åå­—æ¯”å¦ä¸€ä¸ªå¤šä¸€ä¸ªæ•°å­—1ï¼Œæ¯”å¦‚sdbå’Œsdb1 </p>\n<p>è¿™æ—¶å€™è¯´æ˜Uç›˜è¢«è¯†åˆ«äº†ï¼Œæ¥ä¸‹æ¥åˆ›å»ºæŒ‚è½½ç›®å½•ï¼š</p>\n<pre><code class=\"$\">sudo mkdir -p /mnt/usb\n</code></pre>\n<p>ç„¶åä½¿ç”¨mountå‘½ä»¤æŒ‚è½½ï¼ˆå‡è®¾ä½ çš„Uç›˜ä¸ºsdbå’Œsdb1ï¼‰ï¼š</p>\n<pre><code class=\"$\">sudo mount /dev/sdb1 /mnt/usb\n</code></pre>\n<p>ç„¶åå°±å¯ä»¥ä½¿ç”¨ /mnt/usb ç›®å½•è®¿é—®Uç›˜å†…å®¹äº†ï¼š</p>\n<pre><code class=\"$\">cd /mnt/usb\nls\n</code></pre>\n<p>å¤„ç†å®Œä½ æƒ³è¦åšçš„äº‹æƒ…ä¹‹åï¼Œæ¯”å¦‚æˆ‘å°†Uç›˜é‡Œä¸‹è½½å¥½çš„Pythonå’Œpycurlæ‹·è´åˆ°Ubuntuä¸Šï¼Œæ‹”å‡ºUç›˜ä¹‹å‰è®°å¾—å¸è½½ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>\n<pre><code class=\"$\">sudo amount  /dev/sdb1 /mnt/usb\n</code></pre>\n<p>æ‹”å‡ºUç›˜å³å¯</p>\n<h1 id=\"Ubuntuç¼–è¯‘å®‰è£…è½¯ä»¶\"><a href=\"#Ubuntuç¼–è¯‘å®‰è£…è½¯ä»¶\" class=\"headerlink\" title=\"Ubuntuç¼–è¯‘å®‰è£…è½¯ä»¶\"></a>Ubuntuç¼–è¯‘å®‰è£…è½¯ä»¶</h1><p>åœ¨ä½¿ç”¨Linuxæ—¶ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦ç¼–è¯‘å®‰è£…è½¯ä»¶ï¼Œæˆ‘å®‰è£…Pythonä¹Ÿæ˜¯ç¼–è¯‘å®‰è£…çš„ï¼Œå€Ÿç€è¿™ä¸ªå°±å¥½å¥½æŠŠUbuntuä¸‹ç¼–è¯‘å®‰è£…çš„ä¸€äº›äº‹é¡¹ä»‹ç»ä¸€ä¸‹ã€‚</p>\n<h2 id=\"1ã€è·å–æºç åŒ…ï¼ˆtar-gzã€tar-gz2ã€zipã€tgzï¼‰ï¼Œå¹¶è§£å‹\"><a href=\"#1ã€è·å–æºç åŒ…ï¼ˆtar-gzã€tar-gz2ã€zipã€tgzï¼‰ï¼Œå¹¶è§£å‹\" class=\"headerlink\" title=\"1ã€è·å–æºç åŒ…ï¼ˆtar.gzã€tar.gz2ã€zipã€tgzï¼‰ï¼Œå¹¶è§£å‹\"></a>1ã€è·å–æºç åŒ…ï¼ˆtar.gzã€tar.gz2ã€zipã€tgzï¼‰ï¼Œå¹¶è§£å‹</h2><p>å¦‚æœæœ‰ç½‘ç»œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡curlä¸‹è½½ï¼Œå¦‚æœæ²¡æœ‰ç½‘ç»œï¼Œå°±åƒæˆ‘ä¸€æ ·ï¼Œä½¿ç”¨Uç›˜ï¼Œæ€»ä¹‹ï¼Œä½ è¦è·å–åˆ°æºç åŒ…ï¼Œç„¶åè§£å‹ï¼š</p>\n<pre><code class=\"$\">tar -zxvf Python-3.5.1.tgz    // æˆ‘ä¸‹è½½çš„æ˜¯3.5.1ç‰ˆæœ¬çš„\n</code></pre>\n<h2 id=\"2ã€configure\"><a href=\"#2ã€configure\" class=\"headerlink\" title=\"2ã€configure\"></a>2ã€configure</h2><p>ç»å¤§å¤šæ•°linuxä¸Šéœ€è¦æºç å®‰è£…çš„ç¨‹åºå¯ä»¥é€šè¿‡./configureï¼›makeï¼›make installè¿™ä¸‰æ­¥æ¥å®ç°å®‰è£…ï¼Œè€Œæœ€å›°éš¾çš„ä¸€æ­¥å¾€å¾€éƒ½åœ¨./configureè¿™ä¸€æ­¥ï¼Œé‚£åé¢çš„å‡ æ­¥æ˜¯å¯ä»¥å¾ˆè½»æ¾çš„å®Œæˆçš„ã€‚</p>\n<p>configureæ˜¯ç”¨æ¥åšä¸‹é¢è¿™äº›äº‹çš„ä¸€ä¸ªè„šæœ¬ï¼š</p>\n<blockquote>\n<p>1ã€ç”¨ä»¥æ£€æŸ¥è®¡ç®—æœºå»ºç«‹åŒ…æ‰€å¿…é¡»çš„å®Œæ•´æ€§ï¼›<br>2ã€å¸®åŠ©ä½ æ ¹æ®éœ€è¦æ”¹å˜é»˜è®¤çš„è·¯å¾„ï¼›<br>3ã€ç”¨ä»¥æ¿€æ´»/ç¦ç”¨ç¼–è¯‘ç¨‹åºä¸­çš„å„ç§é€‰é¡¹ï¼›<br>4ã€ç”¨ä»¥æ”¹å˜ç¨‹åºå°†è¦è¢«å®‰è£…çš„è·¯å¾„ï¼›</p>\n</blockquote>\n<p>ä½ å¯ä»¥é€šè¿‡æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹ç‰¹å®šconfigureè„šæœ¬æ‰€æä¾›çš„é€‰é¡¹ä¸ªåŠŸèƒ½ï¼š</p>\n<pre><code class=\"$\">./configure --help | less\n</code></pre>\n<p>ä¾‹å¦‚ï¼Œé»˜è®¤çš„configureè„šæœ¬ä¼šæŒ‡å®šå®‰è£…åˆ°/usr/localä¸‹é¢ï¼Œå¦‚æœä½ æƒ³æ”¹å˜è·¯å¾„ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢æ˜¾ç¤ºçš„configureè„šæœ¬å‘½ä»¤ï¼š</p>\n<pre><code class=\"$\">./configure --PREFIX=/opt\n</code></pre>\n<p>å¦‚æœä½ çœŸçš„æƒ³ä»é›¶å¼€å§‹ç¼–è¯‘ï¼Œå¯ä»¥è®¤çœŸç ”è¯»ä¸€ä¸‹READMEæˆ–è€…INSTALLæ–‡ä»¶ã€‚ä½ ä¼šçœ‹åˆ°éœ€è¦ä»€ä¹ˆæ ·çš„è½¯ä»¶ç¢ç‰‡ï¼Œæ¯”èµ·åœ¨åŒ…ç³»ç»Ÿä¸­ï¼Œåœ¨è¿™äº›æ–‡ä»¶ä¸­ä»–ä»¬é€šå¸¸æœ‰ç€ä¸ä¸€æ ·çš„åå­—ã€‚æ¥ä¸‹æ¥ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨apt-cacheå·¥å…·æ¥å¯»æ‰¾ç›¸åº”çš„åŒ…ã€‚å¦‚æœä½ å·²ç»é€šè¿‡ä»“åº“ä¸­ç¼–è¯‘åŒ…ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸€ä¸ªè¯€çªï¼Œå°±æ˜¯é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…åŒ…çš„ä¾èµ–ï¼š</p>\n<pre><code class=\"#\">sudo apt-get build-dep &lt;package&gt;\n</code></pre>\n<p>è¿™å¯ä»¥ç¡®ä¿æ‰€æœ‰æ‰€éœ€çš„åŒ…ä»¥æ¥éƒ½å¯ä»¥è¢«å®‰è£…ï¼Œä»¥æœŸconfigureä¸ä¼šç”±äºè¿‡æ—§çš„ä¾èµ–åŒ…è€ŒæŠ¥é”™ï¼Œå¦åˆ™ä½ å°†ä¸å¾—ä¸ç»§ç»­ç¼–è¯‘ç›¸å…³çš„ä¾èµ–ã€‚</p>\n<p>å¯»æ‰¾å¹¶ä¿®å¤configureçš„æ•…éšœ</p>\n<p>æ°å·§åœ¨ä¸‹é¢è¿™å‡ ç§æƒ…å†µä¸‹ï¼Œconfigureå¯èƒ½ä¼šå¤±è´¥ï¼š</p>\n<blockquote>\n<p>1ã€ç¼–è¯‘çš„æ—¶å€™éœ€è¦-devåŒ…ï¼›<br>2ã€è¦ç¼–è¯‘GNOMEåº”ç”¨é‚£ä¹ˆéœ€è¦ç›¸åº”çš„gnome-levelï¼›è€Œç¼–è¯‘KDEåº”ç”¨åˆ™éœ€è¦kde-levelï¼›<br>3ã€Cå’ŒC++åº“çš„åç§°æ€»æ˜¯ä»¥libå¼€å¤´ï¼Œå› æ­¤ï¼Œå¦‚æœ./configureæŠ¥é”™è¯´ä¸¢å¤±äº†åº“fooï¼Œé‚£ä¹ˆä½ éœ€è¦å®‰è£…libfoo-devåŒ…ï¼›<br>4ã€å¦‚æœconfigureè¯´è¦â€œX includesâ€ï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦å®‰è£…ä¸‹é¢è¿™äº›åŒ…â€œxlibs-dev,xlibs-static-dev,x-window-system-devâ€ï¼Œæ³¨æ„ï¼Œæœ‰æ—¶å€™ï¼Œä»…ä»…éœ€è¦xorg-devå’Œx-devå°±å¯ä»¥äº†ã€‚-Racecar56 Under Jauntyåˆ™éœ€è¦å®‰è£…xorg-devå’Œlibx11-devã€‚<br>5ã€æŸ¥çœ‹å“ªäº›åŒ…è¢«éœ€è¦çš„æŠ€å·§ï¼Œå¯ä»¥ä½¿ç”¨auto-aptå·¥å…·æˆ–è€…apt-fileå·¥å…·ï¼ˆauto-aptå¯èƒ½æ›´å¿«ä¸€äº›ï¼‰ï¼š</p>\n<pre><code class=\"$\">sudo apt-get install auto-apt\nsudo auto-apt update\nauto-apt search missing-file.h\n</code></pre>\n<p>6ã€å¦‚æœç¼–è¯‘è½¯ä»¶ç¦ç”¨å¤±è´¥çš„é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨./configure â€“disable-FEATUREé€‰é¡¹ã€‚<br>7ã€å¦‚æœä½ è‡ªå·±æ²¡èƒ½ä¿®å¤ä½ é‡åˆ°çš„é—®é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥å¯»æ±‚ubuntuå®˜æ–¹çš„å¸®åŠ©å“¦ã€‚</p>\n</blockquote>\n<p>å¦‚æœæ ¹æœ¬ä¸å­˜åœ¨configureçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆæœ€å¥½æŸ¥çœ‹ä¸€ä¸‹configure.acæ–‡ä»¶ï¼ˆæœ‰å¿…è¦è®¤çœŸé˜…è¯»ä¸€ä¸‹INSTALLå’ŒREADMEæ–‡ä»¶ï¼‰ï¼Œå¦‚æœconfigure.acæ–‡ä»¶å­˜åœ¨ï¼Œé‚£å°±æ˜¯å¼€å‘è€…å¿˜è®°åˆ›å»ºæœ€ç»ˆconfigureæ–‡ä»¶äº†ï¼Œä½ å¯ä»¥è‡ªå·±åˆ›å»ºï¼Œä¸è¿‡éœ€è¦autoconfåŒ…ï¼š</p>\n<pre><code class=\"$\">sudo apt-get install autoconf\n</code></pre>\n<p>å®‰è£…æˆåŠŸä¹‹åï¼Œé”®å…¥ï¼š</p>\n<pre><code class=\"$\">autoconf\n</code></pre>\n<p>å¦‚æœå¹¸è¿çš„è¯ï¼Œä¸€ä¸ªå¯å·¥ä½œçš„configureæ–‡ä»¶åº”è¯¥è¢«åˆ›å»ºäº†ã€‚</p>\n<h2 id=\"ç¼–è¯‘\"><a href=\"#ç¼–è¯‘\" class=\"headerlink\" title=\"ç¼–è¯‘\"></a>ç¼–è¯‘</h2><p>å¯å–œå¯å–ï¼Œconfigureæ­¥éª¤å·²ç»å®Œæˆäº†ï¼ŒçœŸæ­£çš„ç¼–è¯‘å®‰è£…å¯ä»¥å¼€å§‹äº†ã€‚éå¸¸ç®€å•ï¼š</p>\n<pre><code class=\"$\">make\n</code></pre>\n<p>ç°åœ¨å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œä½ åº”è¯¥çš„åˆ°äº†ä¸€ä¸ªå¯å·¥ä½œçš„ç¨‹åºcopyåœ¨ä½ çš„æºç›®å½•ä¸‹ï¼Œä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥è¯•ç”¨ä¸€ä¸‹ï¼š</p>\n<pre><code>src/program_name\n</code></pre><p>å¦‚æœç¨‹åºè¿™ä¸€æ­¥å¤±è´¥äº†ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½æ˜¯ç¨‹åºçš„bugï¼Œè¿™æ—¶å€™ä½ æœ€å¥½è”ç³»ä¸€ä¸‹ä½œè€…ï¼Œå‘Šè¯‰ä»–ç¨‹åºçš„é—®é¢˜ã€‚</p>\n<p>å®‰è£…è½¯ä»¶åŒ…</p>\n<p>å¦‚æœä¸€åˆ‡è¿›å±•é¡ºåˆ©çš„è¯ï¼Œä½ å¯ä»¥é”®å…¥ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…ç¨‹åºï¼š</p>\n<pre><code class=\"$\">sudo checkinstall\n</code></pre>\n<p>ä½¿ç”¨CheckInstallå¯ä»¥åˆ›å»ºä¸€ä¸ª.debåŒ…ï¼Œè¿™è´§ç¨åå¯ä»¥å¾ˆå®¹æ˜“è¢«ç§»é™¤å“¦ï¼</p>\n<p>ç„¶è€Œï¼Œç”±äºæŸäº›åŸå› ï¼Œä½ ä¸æƒ³ä½¿ç”¨CheckInstallï¼Œè¿™æ˜¯å®‰è£…çš„æœ€åæ–¹æ³•ï¼ˆä¸æ¨èï¼‰ï¼š</p>\n<pre><code class=\"$\">sudo make install\n</code></pre>\n<h1 id=\"å®‰è£…Python\"><a href=\"#å®‰è£…Python\" class=\"headerlink\" title=\"å®‰è£…Python\"></a>å®‰è£…Python</h1><p>å›åˆ°æ­£é¢˜ï¼Œå®‰è£…Pythonï¼Œå‰é¢è®²å®Œäº†Ubuntuä¸‹ç¼–è¯‘å®‰è£…è½¯ä»¶çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä¸‹è½½å®‰è£…èµ·æ¥å°±æ–¹ä¾¿å¤šäº†ï¼š</p>\n<p>é¦–å…ˆåœ¨è¿™é‡Œä¸‹è½½PythonåŒ… <a href=\"https://www.python.org/getit/\" target=\"_blank\" rel=\"external\">python.tgz</a>ã€‚</p>\n<p>è§£å‹å®‰è£…ï¼š</p>\n<pre><code class=\"$\">tar -zvxf Python-3.5.1.tgz\ncd Python-3.5.1\n./configure\nsudo make\nsudo make install\n</code></pre>\n<p>æ‰§è¡Œpythonï¼ŒæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p>\n<pre><code class=\"$\">python\n</code></pre>\n<h1 id=\"å®‰è£…pycurl\"><a href=\"#å®‰è£…pycurl\" class=\"headerlink\" title=\"å®‰è£…pycurl\"></a>å®‰è£…pycurl</h1><p>åœ¨è¿™é‡Œä¸‹è½½èµ„æºåŒ…ï¼š<a href=\"http://pycurl.sourceforge.net/\" target=\"_blank\" rel=\"external\">pycurl.tgz</a> ä¸‹è½½ï¼Œå¯èƒ½éœ€è¦ç¿»å¢™ï¼Œç„¶åè§£å‹å®‰è£…ï¼Œæ³¨æ„ï¼Œä»–æœ‰è‡ªå·±çš„å®‰è£…æ–¹å¼ï¼š</p>\n<pre><code class=\"$\">tar -zxvf pycurl-$VER.tar.gz\ncd pycurl-$VER\npython setup.py install\n</code></pre>\n<p>ç»è¿‡å¦‚ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™å°Ubuntuä¸Šæ‰§è¡Œè‡ªåŠ¨ç™»å½•è®¤è¯ç½‘ç»œçš„Pythonè„šæœ¬äº†ï¼š</p>\n<pre><code class=\"$\">python xxx.py\n</code></pre>\n<h1 id=\"Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡\"><a href=\"#Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡\" class=\"headerlink\" title=\"Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡\"></a>Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡</h1><p>åœ¨Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨åˆ° cronï¼Œä»€ä¹ˆäº‹cronå‘¢ï¼Ÿç‚¹å‡»ä¸‹é¢çš„è¿æ¥äº†è§£ï¼š</p>\n<p><a href=\"http://wiki.ubuntu.org.cn/UbuntuHelp:CronHowto/zh\" target=\"_blank\" rel=\"external\">cronæ•™ç¨‹</a></p>\n<p>ä¸Šé¢çš„æ•™ç¨‹å¹¶ä¸é•¿ï¼Œå¦‚æœä½ è¯»å®Œäº†æ•™ç¨‹ï¼Œé‚£ä¹ˆçœ‹çœ‹æˆ‘æ˜¯æ€ä¹ˆåšçš„å§ï¼Œé¦–å…ˆæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ç¼–è¾‘crontabæ–‡ä»¶ï¼š</p>\n<pre><code class=\"$\">crontab -e\n</code></pre>\n<p>ç„¶åå†™ä¸‹ä¸€ä¸‹å†…å®¹ï¼š</p>\n<pre><code>8 8 * * * sh ~/test/test.sh\n</code></pre><p>ä¸Šé¢çš„å‘½ä»¤çš„æ„æ€æ˜¯ï¼šæ¯å¤©æ—©ä¸Šçš„8ç‚¹8åˆ†æ—¶ï¼Œæ‰§è¡Œ tesh.shè„šæœ¬ï¼Œä¹‹åä¿å­˜é€€å‡ºï¼ˆCtrl + x  -&gt;  y  -&gt;  enterå›è½¦ï¼‰ï¼Œä¿å­˜é€€å‡ºçš„æ–¹å¼æ ¹æ®ä½ ä½¿ç”¨ç¼–è¾‘å™¨å†³å®šï¼Œè‡ªå·±çœ‹å§ã€‚ä¿å­˜ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯åŠ¨cronæœåŠ¡ï¼š</p>\n<pre><code class=\"$\">sudo service cron start\n</code></pre>\n<p>æ›´å¤šå‘½ä»¤ï¼š</p>\n<pre><code class=\"$\">sudo service cron stop         // åœæ­¢cronæœåŠ¡\nsudo service cron restart     // é‡å¯cronæœåŠ¡\n</code></pre>\n<p>å¥½äº†ï¼Œä»æ­¤æ— å¿§äº†ï¼Œä¸ç”¨æ‰‹åŠ¨XXOOäº†ã€‚</p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>å…¬å¸å›¢é˜Ÿå†…éƒ¨ç»§ç»­ä¸€å°æœåŠ¡å™¨ï¼Œåšä¸€äº›å¯¹å†…ä½¿ç”¨çš„ç½‘ç«™çš„éƒ¨ç½²å·¥ä½œï¼Œäºæ˜¯æŠŠæ—è¾¹çš„ä¸€å°windowsç”µè„‘å®‰è£…æˆäº†åŒç³»ç»Ÿâ€”-ä¸€ä¸ªserverç‰ˆæœ¬çš„Ubuntuï¼Œä½†æ˜¯å…¬å¸çš„ç½‘ç»œæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ¯å¤©æ—©ä¸Šæ¥äº†éƒ½è¦é‡æ–°ç™»å½•è®¤è¯ï¼Œä¹‹åæ‰èƒ½æ­£å¸¸ä½¿ç”¨ç½‘ç»œï¼Œä¸€å¼€å§‹è¿˜å¥½ï¼Œæ¯å¤©æ—©ä¸Šæ¥äº†å…ˆå¯åŠ¨windowsç³»ç»Ÿè®¤è¯å®Œç½‘ç»œä¹‹åå†å¯åŠ¨Ubuntuï¼Œè¿™æ ·å°±èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä¸è¿‡åæ¥çªç„¶ä¸å¥½ä½¿äº†ï¼Œäºæ˜¯æƒ³äº†ä¸ªåŠæ³•ï¼Œä½¿ç”¨Pythonå†™ä¸ªè„šæœ¬ï¼Œå†è®¾ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©å®šæ—¶æ‰§è¡Œä¸€æ¬¡è¯¥è„šæœ¬ï¼Œä»æ­¤å‘Šåˆ«ç½‘ç»œçš„çƒ¦æ¼äº†ï¼Œè¿™ç¯‡æ–‡ç« å°±è®°äº†è¿™æ¬¡ç½‘ç»œå¤„ç†çš„è¿‡ç¨‹ï¼Œç”¨åˆ°çš„ä¸€äº›ä¸œè¥¿ã€‚</p>\n</blockquote>","more":"<h1 id=\"Ubuntuä¸‹ä½¿ç”¨Uç›˜\"><a href=\"#Ubuntuä¸‹ä½¿ç”¨Uç›˜\" class=\"headerlink\" title=\"Ubuntuä¸‹ä½¿ç”¨Uç›˜\"></a>Ubuntuä¸‹ä½¿ç”¨Uç›˜</h1><p>ç”±äºè¦æ‰§è¡ŒPythonè„šæœ¬ï¼Œè€Œè¿™å°ç”µè„‘åˆæ²¡æœ‰å®‰è£…Pythonï¼Œæœ‰æ²¡æœ‰ç½‘ç»œï¼Œæ‰€ä»¥åªèƒ½æœ‰ç½‘ç»œçš„ç”µè„‘ä¸‹è½½Pythonä»¥åŠä¸€ä¸ªPythonåº“â€”-pycurlï¼Œç„¶åä½¿ç”¨Uç›˜æ‹·è´åˆ°è¿™å°Ubuntuä¸‹ï¼Œä¸‹é¢ä»‹ç»äº†Ubuntuä¸‹å¦‚æœä½¿ç”¨Uç›˜ã€‚</p>\n<p>é¦–å…ˆæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹ä½ çš„ç£ç›˜åŒºå—ï¼š</p>\n<pre><code class=\"$\">ls /dev/ | grep sd\n</code></pre>\n<p>ç„¶åæ’å…¥Uç›˜ï¼Œå†æ¬¡æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œå†æ¬¡æŸ¥çœ‹ï¼š</p>\n<pre><code class=\"$\">ls /dev/ | grep sd\n</code></pre>\n<p>è§‚å¯Ÿå¤šå‡ºæ¥äº†ä»€ä¹ˆï¼Œä¸€èˆ¬ä¼šæœ‰ä¸¤ä¸ªï¼Œå…¶ä¸­ä¸€ä¸ªçš„åå­—æ¯”å¦ä¸€ä¸ªå¤šä¸€ä¸ªæ•°å­—1ï¼Œæ¯”å¦‚sdbå’Œsdb1 </p>\n<p>è¿™æ—¶å€™è¯´æ˜Uç›˜è¢«è¯†åˆ«äº†ï¼Œæ¥ä¸‹æ¥åˆ›å»ºæŒ‚è½½ç›®å½•ï¼š</p>\n<pre><code class=\"$\">sudo mkdir -p /mnt/usb\n</code></pre>\n<p>ç„¶åä½¿ç”¨mountå‘½ä»¤æŒ‚è½½ï¼ˆå‡è®¾ä½ çš„Uç›˜ä¸ºsdbå’Œsdb1ï¼‰ï¼š</p>\n<pre><code class=\"$\">sudo mount /dev/sdb1 /mnt/usb\n</code></pre>\n<p>ç„¶åå°±å¯ä»¥ä½¿ç”¨ /mnt/usb ç›®å½•è®¿é—®Uç›˜å†…å®¹äº†ï¼š</p>\n<pre><code class=\"$\">cd /mnt/usb\nls\n</code></pre>\n<p>å¤„ç†å®Œä½ æƒ³è¦åšçš„äº‹æƒ…ä¹‹åï¼Œæ¯”å¦‚æˆ‘å°†Uç›˜é‡Œä¸‹è½½å¥½çš„Pythonå’Œpycurlæ‹·è´åˆ°Ubuntuä¸Šï¼Œæ‹”å‡ºUç›˜ä¹‹å‰è®°å¾—å¸è½½ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>\n<pre><code class=\"$\">sudo amount  /dev/sdb1 /mnt/usb\n</code></pre>\n<p>æ‹”å‡ºUç›˜å³å¯</p>\n<h1 id=\"Ubuntuç¼–è¯‘å®‰è£…è½¯ä»¶\"><a href=\"#Ubuntuç¼–è¯‘å®‰è£…è½¯ä»¶\" class=\"headerlink\" title=\"Ubuntuç¼–è¯‘å®‰è£…è½¯ä»¶\"></a>Ubuntuç¼–è¯‘å®‰è£…è½¯ä»¶</h1><p>åœ¨ä½¿ç”¨Linuxæ—¶ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦ç¼–è¯‘å®‰è£…è½¯ä»¶ï¼Œæˆ‘å®‰è£…Pythonä¹Ÿæ˜¯ç¼–è¯‘å®‰è£…çš„ï¼Œå€Ÿç€è¿™ä¸ªå°±å¥½å¥½æŠŠUbuntuä¸‹ç¼–è¯‘å®‰è£…çš„ä¸€äº›äº‹é¡¹ä»‹ç»ä¸€ä¸‹ã€‚</p>\n<h2 id=\"1ã€è·å–æºç åŒ…ï¼ˆtar-gzã€tar-gz2ã€zipã€tgzï¼‰ï¼Œå¹¶è§£å‹\"><a href=\"#1ã€è·å–æºç åŒ…ï¼ˆtar-gzã€tar-gz2ã€zipã€tgzï¼‰ï¼Œå¹¶è§£å‹\" class=\"headerlink\" title=\"1ã€è·å–æºç åŒ…ï¼ˆtar.gzã€tar.gz2ã€zipã€tgzï¼‰ï¼Œå¹¶è§£å‹\"></a>1ã€è·å–æºç åŒ…ï¼ˆtar.gzã€tar.gz2ã€zipã€tgzï¼‰ï¼Œå¹¶è§£å‹</h2><p>å¦‚æœæœ‰ç½‘ç»œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡curlä¸‹è½½ï¼Œå¦‚æœæ²¡æœ‰ç½‘ç»œï¼Œå°±åƒæˆ‘ä¸€æ ·ï¼Œä½¿ç”¨Uç›˜ï¼Œæ€»ä¹‹ï¼Œä½ è¦è·å–åˆ°æºç åŒ…ï¼Œç„¶åè§£å‹ï¼š</p>\n<pre><code class=\"$\">tar -zxvf Python-3.5.1.tgz    // æˆ‘ä¸‹è½½çš„æ˜¯3.5.1ç‰ˆæœ¬çš„\n</code></pre>\n<h2 id=\"2ã€configure\"><a href=\"#2ã€configure\" class=\"headerlink\" title=\"2ã€configure\"></a>2ã€configure</h2><p>ç»å¤§å¤šæ•°linuxä¸Šéœ€è¦æºç å®‰è£…çš„ç¨‹åºå¯ä»¥é€šè¿‡./configureï¼›makeï¼›make installè¿™ä¸‰æ­¥æ¥å®ç°å®‰è£…ï¼Œè€Œæœ€å›°éš¾çš„ä¸€æ­¥å¾€å¾€éƒ½åœ¨./configureè¿™ä¸€æ­¥ï¼Œé‚£åé¢çš„å‡ æ­¥æ˜¯å¯ä»¥å¾ˆè½»æ¾çš„å®Œæˆçš„ã€‚</p>\n<p>configureæ˜¯ç”¨æ¥åšä¸‹é¢è¿™äº›äº‹çš„ä¸€ä¸ªè„šæœ¬ï¼š</p>\n<blockquote>\n<p>1ã€ç”¨ä»¥æ£€æŸ¥è®¡ç®—æœºå»ºç«‹åŒ…æ‰€å¿…é¡»çš„å®Œæ•´æ€§ï¼›<br>2ã€å¸®åŠ©ä½ æ ¹æ®éœ€è¦æ”¹å˜é»˜è®¤çš„è·¯å¾„ï¼›<br>3ã€ç”¨ä»¥æ¿€æ´»/ç¦ç”¨ç¼–è¯‘ç¨‹åºä¸­çš„å„ç§é€‰é¡¹ï¼›<br>4ã€ç”¨ä»¥æ”¹å˜ç¨‹åºå°†è¦è¢«å®‰è£…çš„è·¯å¾„ï¼›</p>\n</blockquote>\n<p>ä½ å¯ä»¥é€šè¿‡æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹ç‰¹å®šconfigureè„šæœ¬æ‰€æä¾›çš„é€‰é¡¹ä¸ªåŠŸèƒ½ï¼š</p>\n<pre><code class=\"$\">./configure --help | less\n</code></pre>\n<p>ä¾‹å¦‚ï¼Œé»˜è®¤çš„configureè„šæœ¬ä¼šæŒ‡å®šå®‰è£…åˆ°/usr/localä¸‹é¢ï¼Œå¦‚æœä½ æƒ³æ”¹å˜è·¯å¾„ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢æ˜¾ç¤ºçš„configureè„šæœ¬å‘½ä»¤ï¼š</p>\n<pre><code class=\"$\">./configure --PREFIX=/opt\n</code></pre>\n<p>å¦‚æœä½ çœŸçš„æƒ³ä»é›¶å¼€å§‹ç¼–è¯‘ï¼Œå¯ä»¥è®¤çœŸç ”è¯»ä¸€ä¸‹READMEæˆ–è€…INSTALLæ–‡ä»¶ã€‚ä½ ä¼šçœ‹åˆ°éœ€è¦ä»€ä¹ˆæ ·çš„è½¯ä»¶ç¢ç‰‡ï¼Œæ¯”èµ·åœ¨åŒ…ç³»ç»Ÿä¸­ï¼Œåœ¨è¿™äº›æ–‡ä»¶ä¸­ä»–ä»¬é€šå¸¸æœ‰ç€ä¸ä¸€æ ·çš„åå­—ã€‚æ¥ä¸‹æ¥ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨apt-cacheå·¥å…·æ¥å¯»æ‰¾ç›¸åº”çš„åŒ…ã€‚å¦‚æœä½ å·²ç»é€šè¿‡ä»“åº“ä¸­ç¼–è¯‘åŒ…ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸€ä¸ªè¯€çªï¼Œå°±æ˜¯é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…åŒ…çš„ä¾èµ–ï¼š</p>\n<pre><code class=\"#\">sudo apt-get build-dep &lt;package&gt;\n</code></pre>\n<p>è¿™å¯ä»¥ç¡®ä¿æ‰€æœ‰æ‰€éœ€çš„åŒ…ä»¥æ¥éƒ½å¯ä»¥è¢«å®‰è£…ï¼Œä»¥æœŸconfigureä¸ä¼šç”±äºè¿‡æ—§çš„ä¾èµ–åŒ…è€ŒæŠ¥é”™ï¼Œå¦åˆ™ä½ å°†ä¸å¾—ä¸ç»§ç»­ç¼–è¯‘ç›¸å…³çš„ä¾èµ–ã€‚</p>\n<p>å¯»æ‰¾å¹¶ä¿®å¤configureçš„æ•…éšœ</p>\n<p>æ°å·§åœ¨ä¸‹é¢è¿™å‡ ç§æƒ…å†µä¸‹ï¼Œconfigureå¯èƒ½ä¼šå¤±è´¥ï¼š</p>\n<blockquote>\n<p>1ã€ç¼–è¯‘çš„æ—¶å€™éœ€è¦-devåŒ…ï¼›<br>2ã€è¦ç¼–è¯‘GNOMEåº”ç”¨é‚£ä¹ˆéœ€è¦ç›¸åº”çš„gnome-levelï¼›è€Œç¼–è¯‘KDEåº”ç”¨åˆ™éœ€è¦kde-levelï¼›<br>3ã€Cå’ŒC++åº“çš„åç§°æ€»æ˜¯ä»¥libå¼€å¤´ï¼Œå› æ­¤ï¼Œå¦‚æœ./configureæŠ¥é”™è¯´ä¸¢å¤±äº†åº“fooï¼Œé‚£ä¹ˆä½ éœ€è¦å®‰è£…libfoo-devåŒ…ï¼›<br>4ã€å¦‚æœconfigureè¯´è¦â€œX includesâ€ï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦å®‰è£…ä¸‹é¢è¿™äº›åŒ…â€œxlibs-dev,xlibs-static-dev,x-window-system-devâ€ï¼Œæ³¨æ„ï¼Œæœ‰æ—¶å€™ï¼Œä»…ä»…éœ€è¦xorg-devå’Œx-devå°±å¯ä»¥äº†ã€‚-Racecar56 Under Jauntyåˆ™éœ€è¦å®‰è£…xorg-devå’Œlibx11-devã€‚<br>5ã€æŸ¥çœ‹å“ªäº›åŒ…è¢«éœ€è¦çš„æŠ€å·§ï¼Œå¯ä»¥ä½¿ç”¨auto-aptå·¥å…·æˆ–è€…apt-fileå·¥å…·ï¼ˆauto-aptå¯èƒ½æ›´å¿«ä¸€äº›ï¼‰ï¼š</p>\n<pre><code class=\"$\">sudo apt-get install auto-apt\nsudo auto-apt update\nauto-apt search missing-file.h\n</code></pre>\n<p>6ã€å¦‚æœç¼–è¯‘è½¯ä»¶ç¦ç”¨å¤±è´¥çš„é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨./configure â€“disable-FEATUREé€‰é¡¹ã€‚<br>7ã€å¦‚æœä½ è‡ªå·±æ²¡èƒ½ä¿®å¤ä½ é‡åˆ°çš„é—®é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥å¯»æ±‚ubuntuå®˜æ–¹çš„å¸®åŠ©å“¦ã€‚</p>\n</blockquote>\n<p>å¦‚æœæ ¹æœ¬ä¸å­˜åœ¨configureçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆæœ€å¥½æŸ¥çœ‹ä¸€ä¸‹configure.acæ–‡ä»¶ï¼ˆæœ‰å¿…è¦è®¤çœŸé˜…è¯»ä¸€ä¸‹INSTALLå’ŒREADMEæ–‡ä»¶ï¼‰ï¼Œå¦‚æœconfigure.acæ–‡ä»¶å­˜åœ¨ï¼Œé‚£å°±æ˜¯å¼€å‘è€…å¿˜è®°åˆ›å»ºæœ€ç»ˆconfigureæ–‡ä»¶äº†ï¼Œä½ å¯ä»¥è‡ªå·±åˆ›å»ºï¼Œä¸è¿‡éœ€è¦autoconfåŒ…ï¼š</p>\n<pre><code class=\"$\">sudo apt-get install autoconf\n</code></pre>\n<p>å®‰è£…æˆåŠŸä¹‹åï¼Œé”®å…¥ï¼š</p>\n<pre><code class=\"$\">autoconf\n</code></pre>\n<p>å¦‚æœå¹¸è¿çš„è¯ï¼Œä¸€ä¸ªå¯å·¥ä½œçš„configureæ–‡ä»¶åº”è¯¥è¢«åˆ›å»ºäº†ã€‚</p>\n<h2 id=\"ç¼–è¯‘\"><a href=\"#ç¼–è¯‘\" class=\"headerlink\" title=\"ç¼–è¯‘\"></a>ç¼–è¯‘</h2><p>å¯å–œå¯å–ï¼Œconfigureæ­¥éª¤å·²ç»å®Œæˆäº†ï¼ŒçœŸæ­£çš„ç¼–è¯‘å®‰è£…å¯ä»¥å¼€å§‹äº†ã€‚éå¸¸ç®€å•ï¼š</p>\n<pre><code class=\"$\">make\n</code></pre>\n<p>ç°åœ¨å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œä½ åº”è¯¥çš„åˆ°äº†ä¸€ä¸ªå¯å·¥ä½œçš„ç¨‹åºcopyåœ¨ä½ çš„æºç›®å½•ä¸‹ï¼Œä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥è¯•ç”¨ä¸€ä¸‹ï¼š</p>\n<pre><code>src/program_name\n</code></pre><p>å¦‚æœç¨‹åºè¿™ä¸€æ­¥å¤±è´¥äº†ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½æ˜¯ç¨‹åºçš„bugï¼Œè¿™æ—¶å€™ä½ æœ€å¥½è”ç³»ä¸€ä¸‹ä½œè€…ï¼Œå‘Šè¯‰ä»–ç¨‹åºçš„é—®é¢˜ã€‚</p>\n<p>å®‰è£…è½¯ä»¶åŒ…</p>\n<p>å¦‚æœä¸€åˆ‡è¿›å±•é¡ºåˆ©çš„è¯ï¼Œä½ å¯ä»¥é”®å…¥ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…ç¨‹åºï¼š</p>\n<pre><code class=\"$\">sudo checkinstall\n</code></pre>\n<p>ä½¿ç”¨CheckInstallå¯ä»¥åˆ›å»ºä¸€ä¸ª.debåŒ…ï¼Œè¿™è´§ç¨åå¯ä»¥å¾ˆå®¹æ˜“è¢«ç§»é™¤å“¦ï¼</p>\n<p>ç„¶è€Œï¼Œç”±äºæŸäº›åŸå› ï¼Œä½ ä¸æƒ³ä½¿ç”¨CheckInstallï¼Œè¿™æ˜¯å®‰è£…çš„æœ€åæ–¹æ³•ï¼ˆä¸æ¨èï¼‰ï¼š</p>\n<pre><code class=\"$\">sudo make install\n</code></pre>\n<h1 id=\"å®‰è£…Python\"><a href=\"#å®‰è£…Python\" class=\"headerlink\" title=\"å®‰è£…Python\"></a>å®‰è£…Python</h1><p>å›åˆ°æ­£é¢˜ï¼Œå®‰è£…Pythonï¼Œå‰é¢è®²å®Œäº†Ubuntuä¸‹ç¼–è¯‘å®‰è£…è½¯ä»¶çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä¸‹è½½å®‰è£…èµ·æ¥å°±æ–¹ä¾¿å¤šäº†ï¼š</p>\n<p>é¦–å…ˆåœ¨è¿™é‡Œä¸‹è½½PythonåŒ… <a href=\"https://www.python.org/getit/\" target=\"_blank\" rel=\"external\">python.tgz</a>ã€‚</p>\n<p>è§£å‹å®‰è£…ï¼š</p>\n<pre><code class=\"$\">tar -zvxf Python-3.5.1.tgz\ncd Python-3.5.1\n./configure\nsudo make\nsudo make install\n</code></pre>\n<p>æ‰§è¡Œpythonï¼ŒæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p>\n<pre><code class=\"$\">python\n</code></pre>\n<h1 id=\"å®‰è£…pycurl\"><a href=\"#å®‰è£…pycurl\" class=\"headerlink\" title=\"å®‰è£…pycurl\"></a>å®‰è£…pycurl</h1><p>åœ¨è¿™é‡Œä¸‹è½½èµ„æºåŒ…ï¼š<a href=\"http://pycurl.sourceforge.net/\" target=\"_blank\" rel=\"external\">pycurl.tgz</a> ä¸‹è½½ï¼Œå¯èƒ½éœ€è¦ç¿»å¢™ï¼Œç„¶åè§£å‹å®‰è£…ï¼Œæ³¨æ„ï¼Œä»–æœ‰è‡ªå·±çš„å®‰è£…æ–¹å¼ï¼š</p>\n<pre><code class=\"$\">tar -zxvf pycurl-$VER.tar.gz\ncd pycurl-$VER\npython setup.py install\n</code></pre>\n<p>ç»è¿‡å¦‚ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™å°Ubuntuä¸Šæ‰§è¡Œè‡ªåŠ¨ç™»å½•è®¤è¯ç½‘ç»œçš„Pythonè„šæœ¬äº†ï¼š</p>\n<pre><code class=\"$\">python xxx.py\n</code></pre>\n<h1 id=\"Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡\"><a href=\"#Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡\" class=\"headerlink\" title=\"Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡\"></a>Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡</h1><p>åœ¨Ubuntuä¸‹å¼€å¯å®šæ—¶ä»»åŠ¡ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨åˆ° cronï¼Œä»€ä¹ˆäº‹cronå‘¢ï¼Ÿç‚¹å‡»ä¸‹é¢çš„è¿æ¥äº†è§£ï¼š</p>\n<p><a href=\"http://wiki.ubuntu.org.cn/UbuntuHelp:CronHowto/zh\" target=\"_blank\" rel=\"external\">cronæ•™ç¨‹</a></p>\n<p>ä¸Šé¢çš„æ•™ç¨‹å¹¶ä¸é•¿ï¼Œå¦‚æœä½ è¯»å®Œäº†æ•™ç¨‹ï¼Œé‚£ä¹ˆçœ‹çœ‹æˆ‘æ˜¯æ€ä¹ˆåšçš„å§ï¼Œé¦–å…ˆæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ç¼–è¾‘crontabæ–‡ä»¶ï¼š</p>\n<pre><code class=\"$\">crontab -e\n</code></pre>\n<p>ç„¶åå†™ä¸‹ä¸€ä¸‹å†…å®¹ï¼š</p>\n<pre><code>8 8 * * * sh ~/test/test.sh\n</code></pre><p>ä¸Šé¢çš„å‘½ä»¤çš„æ„æ€æ˜¯ï¼šæ¯å¤©æ—©ä¸Šçš„8ç‚¹8åˆ†æ—¶ï¼Œæ‰§è¡Œ tesh.shè„šæœ¬ï¼Œä¹‹åä¿å­˜é€€å‡ºï¼ˆCtrl + x  -&gt;  y  -&gt;  enterå›è½¦ï¼‰ï¼Œä¿å­˜é€€å‡ºçš„æ–¹å¼æ ¹æ®ä½ ä½¿ç”¨ç¼–è¾‘å™¨å†³å®šï¼Œè‡ªå·±çœ‹å§ã€‚ä¿å­˜ä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯åŠ¨cronæœåŠ¡ï¼š</p>\n<pre><code class=\"$\">sudo service cron start\n</code></pre>\n<p>æ›´å¤šå‘½ä»¤ï¼š</p>\n<pre><code class=\"$\">sudo service cron stop         // åœæ­¢cronæœåŠ¡\nsudo service cron restart     // é‡å¯cronæœåŠ¡\n</code></pre>\n<p>å¥½äº†ï¼Œä»æ­¤æ— å¿§äº†ï¼Œä¸ç”¨æ‰‹åŠ¨XXOOäº†ã€‚</p>"},{"title":"ä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·å¹¶ä½¿ç”¨npmç®¡ç†ä½ çš„åŒ…","date":"2016-01-14T06:51:34.000Z","_content":"\n> å¯¹äºå‰ç«¯å¼€å‘è€…æ¥è®²ï¼Œç©å„¿jsçš„ä½ ä»¬è‚¯å®šå¯¹nodejså·²ç»npmå¹¶ä¸é™Œç”Ÿï¼Œç°åœ¨npmå·²ç»é›†æˆåˆ°äº†nodeé‡Œï¼Œæ‰€ä»¥å½“ä½ å®‰è£…äº†nodeä¹‹åä¹Ÿå°±é»˜è®¤å®‰è£…äº†npmï¼Œnpmçš„å…¨ç§°æ˜¯node package manager : node åŒ…ç®¡ç†å™¨ï¼Œæä¾›ä¸€ä¸ªregistryï¼Œä½ åªè¦æ³¨å†Œä¸€ä¸ªnpmè´¦å·ï¼Œå°±å¯æ˜¯ä½¿ç”¨npmè¿›è¡ŒåŒ…ç®¡ç†äº†ï¼Œæ¯”å¦‚å‘å¸ƒï¼Œå®‰è£…ï¼Œæ›´æ–°...ç­‰ç­‰ã€‚æœ€è¿‘å†åšå…¬å¸å†…éƒ¨æ¡†æ¶çš„é‡æ„ï¼Œå‡†å¤‡ä½¿ç”¨npmå¼€å‘ä¸€å¥—å‘½ä»¤è¡Œå·¥å…·ï¼Œç®¡ç†æ ¸å¿ƒä»£ç ï¼Œåªè¾“å‡ºä¸šåŠ¡ç›®å½•ç»™æ¡†æ¶ä½¿ç”¨è€…ï¼Œä¸€æ–¹é¢å‡è½»äº†é¡¹ç›®ä½“ç§¯ï¼Œå¦ä¸€æ–¹é¢ç»™å¼€å‘è€…ä¸€ä¸ªæ›´å¥½çš„å¼€å‘ä½“éªŒï¼ŒåŒæ—¶ä¿è¯äº†æ ¸å¿ƒä»£ç çš„å®‰å…¨ï¼Œè¿™ç¯‡æ–‡ç« è®°å½•äº†ä½¿ç”¨npmè¿›è¡ŒåŒ…ç®¡ç†çš„äº‹é¡¹ã€å·²ç»ä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·çš„æ–¹æ³•ã€‚\n\n<!-- more -->\n\næƒ³è¦ä½¿ç”¨npmè¿›è¡ŒåŒ…ç®¡ç†ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯ä½¿ç”¨npmå®˜æ–¹ï¼Œå³[https://www.npmjs.com/](https://www.npmjs.com/)ï¼Œæ³¨å†Œä½ è‡ªå·±çš„è´¦å·ç„¶åè¿›è¡Œç®¡ç†ï¼Œä½†æ˜¯å¦‚æœä¸ä½¿ç”¨ç§æœ‰åŒ…çš„è¯ï¼Œä½ çš„ä»£ç æ˜¯æš´éœ²çš„ï¼Œå¦‚æœæ˜¯ä¼ä¸šå†…éƒ¨çš„ç§æœ‰åŒ…ï¼Œä¸æƒ³å¯¹å¤–æš´éœ²ï¼Œé¿å…æ½œåœ¨çš„é£é™©ï¼Œé‚£ä¹ˆå°±å¿…é¡»ä½¿ç”¨ç§æœ‰åŒ…ç®¡ç†ï¼Œä¸è¿‡ï¼Œæ˜¯è¦äº¤ä¿æŠ¤è´¹çš„ï¼Œè™½ç„¶ä¹Ÿä¸å¤šï¼Œå¦‚æœä½ è¿ä¿æŠ¤è´¹éƒ½ä¸æƒ³äº¤çš„è¯ï¼Œé‚£ä¹ˆä¹Ÿæœ‰åŠæ³•ï¼Œæ­å»ºç§æœ‰npmæœåŠ¡ï¼Œå›½å†…æ¯”å¦‚[cnpm](https://github.com/cnpm/cnpmjs.org)ï¼Œæˆ–è€…ä½¿ç”¨npmå®˜æ–¹æä¾›çš„ [On-Site](https://www.npmjs.com/npm/on-site)ï¼Œéƒ½å¯ä»¥æ­å»ºä¼ä¸šå†…éƒ¨çš„ç§æœ‰npmæœåŠ¡ï¼Œä½†æ˜¯æˆ‘å¯ä»¥åœ¨è¿™é‡Œç»™å¤§å®¶æä¸ªé†’ï¼Œå¦‚æœä½ çœŸçš„è¦è‡ªå·±æ­å»ºç§æœ‰npmæœåŠ¡ï¼Œé‚£ä¹ˆä½ å‡†å¤‡å¥½æ¥å—å„ç§æŠ˜ç£¨ï¼Œè®©æˆ‘å·ä¹ä¸€ä¼šå„¿......\n\nä¹å®Œäº†ï¼Œå›åˆ°æ­£é¢˜ï¼Œä¸ºäº†ç»™å¤§å®¶è®²è§£ï¼Œæˆ‘è¿™é‡Œå°±é‡‡ç”¨npmå®˜æ–¹registryè¿›è¡ŒnpmåŒ…ç®¡ç†çš„æ“ä½œï¼Œé¦–å…ˆï¼Œä½ è¦æœ‰ä¸ªå¥³æœ‹å‹ï¼Œå“¦ sorryï¼Œæ˜¯æœ‰ä¸€ä¸ªnpmè´¦å·ï¼š\n\n# æ³¨å†Œnpmè´¦å· #\n\nå¡«å†™ä½ çš„ä¿¡æ¯æ³¨å†Œè´¦å·ï¼Œç„¶åä¼šç»™ä½ å‘ä¸€å°æ¿€æ´»é‚®ä»¶ï¼Œæ¿€æ´»ä½ çš„è´¦å·å°±okäº†ï¼Œå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ä¸èƒ½å†æ™®é€šçš„æ³¨å†Œæµç¨‹äº†ï¼š\n\n![æ³¨å†Œnpmè´¦å·](http://7xlolm.com1.z0.glb.clouddn.com/201501301.pic.jpg)\n\næœ‰äº†è´¦å·ï¼Œå°±å¯ä»¥ç™»å½•ï¼Œæ³¨æ„ï¼Œæˆ‘è¯´çš„æ˜¯åœ¨ç»ˆç«¯ç™»å½•ï¼Œä¸æ˜¯åœ¨ç½‘ç«™ç™»å½•ï¼Œæ‰“å¼€ä½ çš„ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š\n\n```$\nnpm login\n```\n\nä¼šè®©ä½ è¾“å…¥ä½ åˆšæ‰æ³¨å†Œçš„ç”¨æˆ·åå¯†ç å·²ç»é‚®ç®±ï¼Œä½ å°±å®è¯å®è¯´å°±okäº†ï¼Œå®ƒä¸ä¼šä¸ºéš¾ä½ çš„ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![ç»ˆç«¯ä¸­ç™»å½•npm](http://7xlolm.com1.z0.glb.clouddn.com/201501302.pic.jpg)\n\nå¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œé‚£ä¹ˆä¸ä¼šæœ‰ä»»ä½•æç¤ºä¿¡æ¯ï¼Œè¯´æ˜ä½ ç™»å½•æˆåŠŸäº†ã€‚\n\næˆ‘ä»¬å†™ä¸€ä¸ªæµ‹è¯•åŒ…ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼š\n\næ‰§è¡Œï¼š\n\n```$\nmkdir test\ncd test\nnpm init\n```\n\nç”Ÿæˆpackage.jsonæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¾ˆé‡è¦ï¼Œnpmå°±æ˜¯ä¾æ®è¿™ä¸ªæ–‡ä»¶è¿›è¡ŒåŒ…ç®¡ç†å·¥ä½œçš„ï¼Œç„¶åæˆ‘ä»¬æˆ‘ä»¬æ–°å»ºä¸€ä¸ªhtmlæ–‡ä»¶ï¼š\n\n```$\ntouch index.html\n```\n\nè¿™ä¸ªhtmlæ–‡ä»¶æ˜¯æˆ‘éšä¾¿å»ºçš„ï¼Œä½œä¸ºæˆ‘ä»¬è¿™ä¸ªæµ‹è¯•åŒ…çš„å†…å®¹ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªæœ€ç®€å•çš„åŒ…äº†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæˆ‘ä»¬çš„åŒ…ï¼Œé€šè¿‡npmæ¨é€åˆ°è¿œç¨‹ï¼Œè¿›è¡Œç®¡ç†ï¼Œæ‰§è¡Œï¼š\n\n```$\nnpm publish\n```\n\nè¿™æ¡å‘½ä»¤çš„æ„æ€æ˜¯å‘å¸ƒæˆ‘ä»¬çš„åŒ…ï¼Œå¦‚æœä½ çœŸçš„æŒ‰ç…§æˆ‘çš„æ•™ç¨‹æ•²ä»£ç ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š\n\n![npm publishå‘å¸ƒé”™è¯¯](http://7xlolm.com1.z0.glb.clouddn.com/201501303.pic.jpg)\n\nå¦‚æœä½ å¯ä»¥ç¡®è®¤ä½ å·²ç»ä½¿ç”¨äº†æ­£ç¡®çš„è´¦å·ç™»é™†ï¼Œé‚£ä¹ˆå°±ä¸è¦è¢«æç¤ºä¿¡æ¯æ‰€è¿·æƒ‘ç€ï¼Œè¿™å¯èƒ½æ˜¯ä½ æ‰€è¦å‘å¸ƒçš„åŒ…çš„åå­—ï¼Œå·²ç»æœ‰äººä½¿ç”¨å¹¶å‘å¸ƒäº†ï¼Œç¼–è¾‘ä½ çš„package.jsonæ–‡ä»¶ï¼Œæ‰¾åˆ°nameå­—æ®µï¼Œä¿®æ”¹ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„åå­—ï¼š\n\n![ä¿®æ”¹nameå­—æ®µ](http://7xlolm.com1.z0.glb.clouddn.com/201501304.pic.jpg)\n\nå¥½å§ï¼Œæˆ‘æ‰¿è®¤è¿™ä¸ªåå­—99.99999999%å¯ä»¥ç”¨äº†ã€‚\n\nç„¶åå†å‘å¸ƒï¼Œå°±å¯ä»¥æˆåŠŸäº†ï¼Œæ‰§è¡Œï¼š\n\n```$\nnpm publish\n```\n\nå¦‚ä¸‹ï¼š\n\n![å‘å¸ƒæˆåŠŸ](http://7xlolm.com1.z0.glb.clouddn.com/201501305.pic.jpg)\n\nå‘å¸ƒæˆåŠŸåï¼Œåœ¨npmå®˜ç½‘ç™»é™†ä½ çš„è´¦å·ï¼Œä½ æ˜¯å¯ä»¥çœ‹åˆ°ä½ è‡ªå·±çš„åŒ…çš„ï¼š\n\n![ä½ å‘å¸ƒçš„åŒ…](http://7xlolm.com1.z0.glb.clouddn.com/201501306.pic.jpg)\n\nå‘å¸ƒäº†åŒ…ä¹‹åï¼Œä½ å°±å¯ä»¥åƒå®‰è£…å…¶ä»–ç¬¬ä¸‰æ–¹åŒ…ä¸€ä¸‹æ¥å®‰è£…ä½ çš„åŒ…äº†ï¼š\n\n```\nnpm install <you package name>\n```\n\nå¦‚æœä½ çš„æœ¬åœ°åŒ…æœ‰æ›´æ–°ï¼Œéœ€è¦å†æ¬¡å‘å¸ƒçš„è¯ï¼Œç›´æ¥æ‰§è¡Œ npm publish æ˜¯ä¸å¯ä»¥çš„ï¼Œä½ è¿˜è¦æ›´æ–°ä¸€ä¸‹åŒ…çš„ç‰ˆæœ¬å·ï¼Œç„¶åå†æ‰§è¡Œå‘å¸ƒå‘½ä»¤æ‰è¡Œï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹ä¸€ä¸‹package.jsonæ–‡ä»¶çš„ version å­—æ®µï¼Œä¸è¿‡ï¼Œä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ï¼Œæ‰§è¡Œï¼š\n\n```\nnpm version <update_type>\n```\n\nupdate_type å¯ä»¥å–ä¸‰ä¸ªå€¼ï¼šmajor minor patch\n\næˆ‘ä»¬çŸ¥é“ï¼Œç‰ˆæœ¬å·çš„æ ¼å¼æ˜¯è¿™æ ·çš„ 1.0.0\n\nå…¶ä¸­ 1 æ˜¯ä¸»è¦ç‰ˆæœ¬ï¼Œåªæœ‰é‡å¤§çš„æ›´æ–°æ‰ä¼šä¿®æ”¹å®ƒçš„å€¼ï¼ˆmajorï¼‰ï¼Œç¬¬äºŒä¸ªä½ç½®æ˜¯æ¬¡è¦çš„(minor)ï¼Œç¬¬ä¸‰ä¸ªä½ç½®æ˜¯è¡¥ä¸(patch)ï¼Œæ ¹æ®åŒ…ä¿®æ”¹çš„ç¨‹åº¦æ¥å®šä½ è¦ä¿®æ”¹é‚£ä¸ªä½ç½®çš„æ•°å­—ï¼Œä¸ºäº†æµ‹è¯•ï¼Œæˆ‘ä»¬å°±æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š\n\n```$\nnpm version patch\n```\n\n![æ›´æ–°ç‰ˆæœ¬](http://7xlolm.com1.z0.glb.clouddn.com/201501307.pic.jpg)\n\næˆ‘ä»¬çœ‹åˆ°ï¼Œç‰ˆæœ¬ç”±åŸæ¥çš„ 1.0.0 å˜æˆäº† 1.0.1ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œ npm publish å‘½ä»¤æ›´æ–°æˆ‘ä»¬çš„åŒ…äº†ã€‚\n\nä¸Šé¢æè¿°äº†æœ€åŸºæœ¬çš„ç®¡ç†å‘½ä»¤ï¼Œnpmè¿œä¸æ­¢è¿™äº›ï¼Œå®˜æ–¹æ–‡æ¡£å†™çš„å¾ˆè¯¦ç»†ï¼š[npm](https://docs.npmjs.com/getting-started/what-is-npm)\n\n# å¦‚æœä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…· #\n\nä»€ä¹ˆæ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼Ÿæœ€é€šä¿—çš„è§£é‡Šå°±æ˜¯ï¼Œæ•²ä¸€ä¸²å­—ç¬¦ï¼Œå‘½ä»¤è¡Œèƒ½å¤Ÿè¯†åˆ«ï¼Œå¹¶åšä¸€äº›äº‹ã€‚æ¯”å¦‚ ls æŸ¥çœ‹æ–‡ä»¶ï¼Œ cd åˆ‡æ¢ç›®å½•ç­‰ç­‰ï¼Œéƒ½æ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼ŒåŠå¯æ‰§è¡Œçš„æ–‡ä»¶ã€‚\n\nå…¶å®ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·ç‰¹åˆ«ç®€å•ï¼Œæˆ‘ä»¬è¿˜ç»§ç»­ä½¿ç”¨ä¸Šé¢çš„ä¾‹å­ã€‚\n\n## ç¬¬ä¸€æ­¥ï¼šç¼–å†™ä¸€ä¸ªnodejsæ–‡ä»¶ ##\n\nåå­—ä½ éšä¾¿èµ·ï¼Œè¿™é‡Œæˆ‘ä»¬å°±å« test.jsï¼Œåœ¨package.jsonçš„åŒçº§ç›®å½•æ–°å»ºä¸€ä¸ªtest.jsæ–‡ä»¶ï¼Œå¹¶ç¼–è¾‘å¦‚ä¸‹å†…å®¹ï¼š\n\n```test.js\n#! /usr/bin/env node\n\nconsole.log('test command line!');\n```\n\næ³¨æ„ï¼Œç¬¬ä¸€è¡Œçš„ #! /usr/bin/env node ä¸å¯ä»¥çœç•¥ï¼Œè¿™æ˜¯å‘Šè¯‰æœºå™¨ï¼Œè¿™ä¸ªæ–‡ä»¶è¦åœ¨nodeç¯å¢ƒä¸‹è¿è¡Œï¼Œå½“æˆ‘ä»¬ç›´æ¥æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œç›¸å½“äºä½¿ç”¨nodeå»æ‰§è¡Œå®ƒï¼Œå³ï¼š\n\n```\n./test.js\n```\n\nç›¸å½“äº\n\n```\nnode ./test.js\n```\n\n## ç¬¬äºŒéƒ¨ï¼šåœ¨package.jsonæ–‡ä»¶ä¸­æ·»åŠ binå­—æ®µ ##\n\n```package.json\n\"bin\": {\n    \"hcy-cmd\": \"./test.js\"\n}\n```\n\nbinå­—æ®µæ˜¯ä¸€ä¸ªjsonå¯¹è±¡ï¼Œé”®æ˜¯å‘½ä»¤çš„åç§°ï¼Œå³æˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œçš„å‘½ä»¤åç§°ï¼Œå€¼æ˜¯è¯¥å‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯å½“å‰ç›®å½•ä¸‹çš„ test.js æ–‡ä»¶ï¼Œå…¶ä¸­ï¼Œå‘½ä»¤çš„åç§°ä½ è‡ªå·±éšä¾¿å®šä¹‰ã€‚\n\nè‡´æ­¤ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ç»“æŸï¼Œå¦‚æœç°åœ¨å°±åœ¨ç»ˆç«¯æ•² hcy-cmd çš„è¯ï¼Œæ˜¯ä¸è¡Œçš„ï¼Œè¿˜éœ€è¦æœ€åä¸€æ­¥ã€‚\n\n## ç¬¬ä¸‰éƒ¨ï¼šè¿æ¥åˆ°å…¨å±€ ##\n\nå¦‚ä½•è¿æ¥åˆ°å…¨å±€ï¼Œå¾ˆç®€å•ï¼Œåªéœ€ä¸€æ¡å‘½ä»¤ï¼Œæ‰§è¡Œï¼š\n\n```$\nnpm link\n```\n\nè¿™æ˜¯åœ¨ç»ˆç«¯æ•²å…¥æˆ‘ä»¬è‡ªå®šä¹‰çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹ç»“æœï¼š\n\n![æ‰§è¡Œå‘½ä»¤](http://7xlolm.com1.z0.glb.clouddn.com/201501308.pic.jpg)\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘æŒ¥æˆ‘ä»¬çš„åˆ›é€ åŠ›ï¼Œåˆ©ç”¨å®ƒåšä¸€äº›æœ‰è¶£çš„äº‹æƒ…ï¼Œå¿«å»å®ç°ä½ çš„æƒ³è±¡å§ï¼Œå¦å¤–æ¨èä¸¤ä¸ªåº“ï¼Œé…åˆå®ƒä»¬ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å‘å‡ºå¾ˆå¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼š\n\n[shelljs - å¼ºå¤§çš„æ‰§è¡Œunixç³»ç»Ÿå‘½ä»¤çš„npmåŒ…](https://www.npmjs.com/package/shelljs)\n\n[yargs - å‘½ä»¤è¡Œå‚æ•°çš„å¤„ç†](https://www.npmjs.com/package/yargs)\n\n\n\n\n\n\n","source":"_posts/2016/01/30/ä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·å¹¶ä½¿ç”¨npmç®¡ç†ä½ çš„åŒ….md","raw":"title: ä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·å¹¶ä½¿ç”¨npmç®¡ç†ä½ çš„åŒ…\ndate: 2016-01-14 14:51:34\ncategories:\n- WebFrontEnd\ntags:\n- node\n- npm\n- å‘½ä»¤è¡Œå·¥å…·\n---\n\n> å¯¹äºå‰ç«¯å¼€å‘è€…æ¥è®²ï¼Œç©å„¿jsçš„ä½ ä»¬è‚¯å®šå¯¹nodejså·²ç»npmå¹¶ä¸é™Œç”Ÿï¼Œç°åœ¨npmå·²ç»é›†æˆåˆ°äº†nodeé‡Œï¼Œæ‰€ä»¥å½“ä½ å®‰è£…äº†nodeä¹‹åä¹Ÿå°±é»˜è®¤å®‰è£…äº†npmï¼Œnpmçš„å…¨ç§°æ˜¯node package manager : node åŒ…ç®¡ç†å™¨ï¼Œæä¾›ä¸€ä¸ªregistryï¼Œä½ åªè¦æ³¨å†Œä¸€ä¸ªnpmè´¦å·ï¼Œå°±å¯æ˜¯ä½¿ç”¨npmè¿›è¡ŒåŒ…ç®¡ç†äº†ï¼Œæ¯”å¦‚å‘å¸ƒï¼Œå®‰è£…ï¼Œæ›´æ–°...ç­‰ç­‰ã€‚æœ€è¿‘å†åšå…¬å¸å†…éƒ¨æ¡†æ¶çš„é‡æ„ï¼Œå‡†å¤‡ä½¿ç”¨npmå¼€å‘ä¸€å¥—å‘½ä»¤è¡Œå·¥å…·ï¼Œç®¡ç†æ ¸å¿ƒä»£ç ï¼Œåªè¾“å‡ºä¸šåŠ¡ç›®å½•ç»™æ¡†æ¶ä½¿ç”¨è€…ï¼Œä¸€æ–¹é¢å‡è½»äº†é¡¹ç›®ä½“ç§¯ï¼Œå¦ä¸€æ–¹é¢ç»™å¼€å‘è€…ä¸€ä¸ªæ›´å¥½çš„å¼€å‘ä½“éªŒï¼ŒåŒæ—¶ä¿è¯äº†æ ¸å¿ƒä»£ç çš„å®‰å…¨ï¼Œè¿™ç¯‡æ–‡ç« è®°å½•äº†ä½¿ç”¨npmè¿›è¡ŒåŒ…ç®¡ç†çš„äº‹é¡¹ã€å·²ç»ä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·çš„æ–¹æ³•ã€‚\n\n<!-- more -->\n\næƒ³è¦ä½¿ç”¨npmè¿›è¡ŒåŒ…ç®¡ç†ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯ä½¿ç”¨npmå®˜æ–¹ï¼Œå³[https://www.npmjs.com/](https://www.npmjs.com/)ï¼Œæ³¨å†Œä½ è‡ªå·±çš„è´¦å·ç„¶åè¿›è¡Œç®¡ç†ï¼Œä½†æ˜¯å¦‚æœä¸ä½¿ç”¨ç§æœ‰åŒ…çš„è¯ï¼Œä½ çš„ä»£ç æ˜¯æš´éœ²çš„ï¼Œå¦‚æœæ˜¯ä¼ä¸šå†…éƒ¨çš„ç§æœ‰åŒ…ï¼Œä¸æƒ³å¯¹å¤–æš´éœ²ï¼Œé¿å…æ½œåœ¨çš„é£é™©ï¼Œé‚£ä¹ˆå°±å¿…é¡»ä½¿ç”¨ç§æœ‰åŒ…ç®¡ç†ï¼Œä¸è¿‡ï¼Œæ˜¯è¦äº¤ä¿æŠ¤è´¹çš„ï¼Œè™½ç„¶ä¹Ÿä¸å¤šï¼Œå¦‚æœä½ è¿ä¿æŠ¤è´¹éƒ½ä¸æƒ³äº¤çš„è¯ï¼Œé‚£ä¹ˆä¹Ÿæœ‰åŠæ³•ï¼Œæ­å»ºç§æœ‰npmæœåŠ¡ï¼Œå›½å†…æ¯”å¦‚[cnpm](https://github.com/cnpm/cnpmjs.org)ï¼Œæˆ–è€…ä½¿ç”¨npmå®˜æ–¹æä¾›çš„ [On-Site](https://www.npmjs.com/npm/on-site)ï¼Œéƒ½å¯ä»¥æ­å»ºä¼ä¸šå†…éƒ¨çš„ç§æœ‰npmæœåŠ¡ï¼Œä½†æ˜¯æˆ‘å¯ä»¥åœ¨è¿™é‡Œç»™å¤§å®¶æä¸ªé†’ï¼Œå¦‚æœä½ çœŸçš„è¦è‡ªå·±æ­å»ºç§æœ‰npmæœåŠ¡ï¼Œé‚£ä¹ˆä½ å‡†å¤‡å¥½æ¥å—å„ç§æŠ˜ç£¨ï¼Œè®©æˆ‘å·ä¹ä¸€ä¼šå„¿......\n\nä¹å®Œäº†ï¼Œå›åˆ°æ­£é¢˜ï¼Œä¸ºäº†ç»™å¤§å®¶è®²è§£ï¼Œæˆ‘è¿™é‡Œå°±é‡‡ç”¨npmå®˜æ–¹registryè¿›è¡ŒnpmåŒ…ç®¡ç†çš„æ“ä½œï¼Œé¦–å…ˆï¼Œä½ è¦æœ‰ä¸ªå¥³æœ‹å‹ï¼Œå“¦ sorryï¼Œæ˜¯æœ‰ä¸€ä¸ªnpmè´¦å·ï¼š\n\n# æ³¨å†Œnpmè´¦å· #\n\nå¡«å†™ä½ çš„ä¿¡æ¯æ³¨å†Œè´¦å·ï¼Œç„¶åä¼šç»™ä½ å‘ä¸€å°æ¿€æ´»é‚®ä»¶ï¼Œæ¿€æ´»ä½ çš„è´¦å·å°±okäº†ï¼Œå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ä¸èƒ½å†æ™®é€šçš„æ³¨å†Œæµç¨‹äº†ï¼š\n\n![æ³¨å†Œnpmè´¦å·](http://7xlolm.com1.z0.glb.clouddn.com/201501301.pic.jpg)\n\næœ‰äº†è´¦å·ï¼Œå°±å¯ä»¥ç™»å½•ï¼Œæ³¨æ„ï¼Œæˆ‘è¯´çš„æ˜¯åœ¨ç»ˆç«¯ç™»å½•ï¼Œä¸æ˜¯åœ¨ç½‘ç«™ç™»å½•ï¼Œæ‰“å¼€ä½ çš„ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š\n\n```$\nnpm login\n```\n\nä¼šè®©ä½ è¾“å…¥ä½ åˆšæ‰æ³¨å†Œçš„ç”¨æˆ·åå¯†ç å·²ç»é‚®ç®±ï¼Œä½ å°±å®è¯å®è¯´å°±okäº†ï¼Œå®ƒä¸ä¼šä¸ºéš¾ä½ çš„ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![ç»ˆç«¯ä¸­ç™»å½•npm](http://7xlolm.com1.z0.glb.clouddn.com/201501302.pic.jpg)\n\nå¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œé‚£ä¹ˆä¸ä¼šæœ‰ä»»ä½•æç¤ºä¿¡æ¯ï¼Œè¯´æ˜ä½ ç™»å½•æˆåŠŸäº†ã€‚\n\næˆ‘ä»¬å†™ä¸€ä¸ªæµ‹è¯•åŒ…ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼š\n\næ‰§è¡Œï¼š\n\n```$\nmkdir test\ncd test\nnpm init\n```\n\nç”Ÿæˆpackage.jsonæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¾ˆé‡è¦ï¼Œnpmå°±æ˜¯ä¾æ®è¿™ä¸ªæ–‡ä»¶è¿›è¡ŒåŒ…ç®¡ç†å·¥ä½œçš„ï¼Œç„¶åæˆ‘ä»¬æˆ‘ä»¬æ–°å»ºä¸€ä¸ªhtmlæ–‡ä»¶ï¼š\n\n```$\ntouch index.html\n```\n\nè¿™ä¸ªhtmlæ–‡ä»¶æ˜¯æˆ‘éšä¾¿å»ºçš„ï¼Œä½œä¸ºæˆ‘ä»¬è¿™ä¸ªæµ‹è¯•åŒ…çš„å†…å®¹ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªæœ€ç®€å•çš„åŒ…äº†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæˆ‘ä»¬çš„åŒ…ï¼Œé€šè¿‡npmæ¨é€åˆ°è¿œç¨‹ï¼Œè¿›è¡Œç®¡ç†ï¼Œæ‰§è¡Œï¼š\n\n```$\nnpm publish\n```\n\nè¿™æ¡å‘½ä»¤çš„æ„æ€æ˜¯å‘å¸ƒæˆ‘ä»¬çš„åŒ…ï¼Œå¦‚æœä½ çœŸçš„æŒ‰ç…§æˆ‘çš„æ•™ç¨‹æ•²ä»£ç ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š\n\n![npm publishå‘å¸ƒé”™è¯¯](http://7xlolm.com1.z0.glb.clouddn.com/201501303.pic.jpg)\n\nå¦‚æœä½ å¯ä»¥ç¡®è®¤ä½ å·²ç»ä½¿ç”¨äº†æ­£ç¡®çš„è´¦å·ç™»é™†ï¼Œé‚£ä¹ˆå°±ä¸è¦è¢«æç¤ºä¿¡æ¯æ‰€è¿·æƒ‘ç€ï¼Œè¿™å¯èƒ½æ˜¯ä½ æ‰€è¦å‘å¸ƒçš„åŒ…çš„åå­—ï¼Œå·²ç»æœ‰äººä½¿ç”¨å¹¶å‘å¸ƒäº†ï¼Œç¼–è¾‘ä½ çš„package.jsonæ–‡ä»¶ï¼Œæ‰¾åˆ°nameå­—æ®µï¼Œä¿®æ”¹ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„åå­—ï¼š\n\n![ä¿®æ”¹nameå­—æ®µ](http://7xlolm.com1.z0.glb.clouddn.com/201501304.pic.jpg)\n\nå¥½å§ï¼Œæˆ‘æ‰¿è®¤è¿™ä¸ªåå­—99.99999999%å¯ä»¥ç”¨äº†ã€‚\n\nç„¶åå†å‘å¸ƒï¼Œå°±å¯ä»¥æˆåŠŸäº†ï¼Œæ‰§è¡Œï¼š\n\n```$\nnpm publish\n```\n\nå¦‚ä¸‹ï¼š\n\n![å‘å¸ƒæˆåŠŸ](http://7xlolm.com1.z0.glb.clouddn.com/201501305.pic.jpg)\n\nå‘å¸ƒæˆåŠŸåï¼Œåœ¨npmå®˜ç½‘ç™»é™†ä½ çš„è´¦å·ï¼Œä½ æ˜¯å¯ä»¥çœ‹åˆ°ä½ è‡ªå·±çš„åŒ…çš„ï¼š\n\n![ä½ å‘å¸ƒçš„åŒ…](http://7xlolm.com1.z0.glb.clouddn.com/201501306.pic.jpg)\n\nå‘å¸ƒäº†åŒ…ä¹‹åï¼Œä½ å°±å¯ä»¥åƒå®‰è£…å…¶ä»–ç¬¬ä¸‰æ–¹åŒ…ä¸€ä¸‹æ¥å®‰è£…ä½ çš„åŒ…äº†ï¼š\n\n```\nnpm install <you package name>\n```\n\nå¦‚æœä½ çš„æœ¬åœ°åŒ…æœ‰æ›´æ–°ï¼Œéœ€è¦å†æ¬¡å‘å¸ƒçš„è¯ï¼Œç›´æ¥æ‰§è¡Œ npm publish æ˜¯ä¸å¯ä»¥çš„ï¼Œä½ è¿˜è¦æ›´æ–°ä¸€ä¸‹åŒ…çš„ç‰ˆæœ¬å·ï¼Œç„¶åå†æ‰§è¡Œå‘å¸ƒå‘½ä»¤æ‰è¡Œï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹ä¸€ä¸‹package.jsonæ–‡ä»¶çš„ version å­—æ®µï¼Œä¸è¿‡ï¼Œä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ï¼Œæ‰§è¡Œï¼š\n\n```\nnpm version <update_type>\n```\n\nupdate_type å¯ä»¥å–ä¸‰ä¸ªå€¼ï¼šmajor minor patch\n\næˆ‘ä»¬çŸ¥é“ï¼Œç‰ˆæœ¬å·çš„æ ¼å¼æ˜¯è¿™æ ·çš„ 1.0.0\n\nå…¶ä¸­ 1 æ˜¯ä¸»è¦ç‰ˆæœ¬ï¼Œåªæœ‰é‡å¤§çš„æ›´æ–°æ‰ä¼šä¿®æ”¹å®ƒçš„å€¼ï¼ˆmajorï¼‰ï¼Œç¬¬äºŒä¸ªä½ç½®æ˜¯æ¬¡è¦çš„(minor)ï¼Œç¬¬ä¸‰ä¸ªä½ç½®æ˜¯è¡¥ä¸(patch)ï¼Œæ ¹æ®åŒ…ä¿®æ”¹çš„ç¨‹åº¦æ¥å®šä½ è¦ä¿®æ”¹é‚£ä¸ªä½ç½®çš„æ•°å­—ï¼Œä¸ºäº†æµ‹è¯•ï¼Œæˆ‘ä»¬å°±æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š\n\n```$\nnpm version patch\n```\n\n![æ›´æ–°ç‰ˆæœ¬](http://7xlolm.com1.z0.glb.clouddn.com/201501307.pic.jpg)\n\næˆ‘ä»¬çœ‹åˆ°ï¼Œç‰ˆæœ¬ç”±åŸæ¥çš„ 1.0.0 å˜æˆäº† 1.0.1ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œ npm publish å‘½ä»¤æ›´æ–°æˆ‘ä»¬çš„åŒ…äº†ã€‚\n\nä¸Šé¢æè¿°äº†æœ€åŸºæœ¬çš„ç®¡ç†å‘½ä»¤ï¼Œnpmè¿œä¸æ­¢è¿™äº›ï¼Œå®˜æ–¹æ–‡æ¡£å†™çš„å¾ˆè¯¦ç»†ï¼š[npm](https://docs.npmjs.com/getting-started/what-is-npm)\n\n# å¦‚æœä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…· #\n\nä»€ä¹ˆæ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼Ÿæœ€é€šä¿—çš„è§£é‡Šå°±æ˜¯ï¼Œæ•²ä¸€ä¸²å­—ç¬¦ï¼Œå‘½ä»¤è¡Œèƒ½å¤Ÿè¯†åˆ«ï¼Œå¹¶åšä¸€äº›äº‹ã€‚æ¯”å¦‚ ls æŸ¥çœ‹æ–‡ä»¶ï¼Œ cd åˆ‡æ¢ç›®å½•ç­‰ç­‰ï¼Œéƒ½æ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼ŒåŠå¯æ‰§è¡Œçš„æ–‡ä»¶ã€‚\n\nå…¶å®ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·ç‰¹åˆ«ç®€å•ï¼Œæˆ‘ä»¬è¿˜ç»§ç»­ä½¿ç”¨ä¸Šé¢çš„ä¾‹å­ã€‚\n\n## ç¬¬ä¸€æ­¥ï¼šç¼–å†™ä¸€ä¸ªnodejsæ–‡ä»¶ ##\n\nåå­—ä½ éšä¾¿èµ·ï¼Œè¿™é‡Œæˆ‘ä»¬å°±å« test.jsï¼Œåœ¨package.jsonçš„åŒçº§ç›®å½•æ–°å»ºä¸€ä¸ªtest.jsæ–‡ä»¶ï¼Œå¹¶ç¼–è¾‘å¦‚ä¸‹å†…å®¹ï¼š\n\n```test.js\n#! /usr/bin/env node\n\nconsole.log('test command line!');\n```\n\næ³¨æ„ï¼Œç¬¬ä¸€è¡Œçš„ #! /usr/bin/env node ä¸å¯ä»¥çœç•¥ï¼Œè¿™æ˜¯å‘Šè¯‰æœºå™¨ï¼Œè¿™ä¸ªæ–‡ä»¶è¦åœ¨nodeç¯å¢ƒä¸‹è¿è¡Œï¼Œå½“æˆ‘ä»¬ç›´æ¥æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œç›¸å½“äºä½¿ç”¨nodeå»æ‰§è¡Œå®ƒï¼Œå³ï¼š\n\n```\n./test.js\n```\n\nç›¸å½“äº\n\n```\nnode ./test.js\n```\n\n## ç¬¬äºŒéƒ¨ï¼šåœ¨package.jsonæ–‡ä»¶ä¸­æ·»åŠ binå­—æ®µ ##\n\n```package.json\n\"bin\": {\n    \"hcy-cmd\": \"./test.js\"\n}\n```\n\nbinå­—æ®µæ˜¯ä¸€ä¸ªjsonå¯¹è±¡ï¼Œé”®æ˜¯å‘½ä»¤çš„åç§°ï¼Œå³æˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œçš„å‘½ä»¤åç§°ï¼Œå€¼æ˜¯è¯¥å‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯å½“å‰ç›®å½•ä¸‹çš„ test.js æ–‡ä»¶ï¼Œå…¶ä¸­ï¼Œå‘½ä»¤çš„åç§°ä½ è‡ªå·±éšä¾¿å®šä¹‰ã€‚\n\nè‡´æ­¤ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ç»“æŸï¼Œå¦‚æœç°åœ¨å°±åœ¨ç»ˆç«¯æ•² hcy-cmd çš„è¯ï¼Œæ˜¯ä¸è¡Œçš„ï¼Œè¿˜éœ€è¦æœ€åä¸€æ­¥ã€‚\n\n## ç¬¬ä¸‰éƒ¨ï¼šè¿æ¥åˆ°å…¨å±€ ##\n\nå¦‚ä½•è¿æ¥åˆ°å…¨å±€ï¼Œå¾ˆç®€å•ï¼Œåªéœ€ä¸€æ¡å‘½ä»¤ï¼Œæ‰§è¡Œï¼š\n\n```$\nnpm link\n```\n\nè¿™æ˜¯åœ¨ç»ˆç«¯æ•²å…¥æˆ‘ä»¬è‡ªå®šä¹‰çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹ç»“æœï¼š\n\n![æ‰§è¡Œå‘½ä»¤](http://7xlolm.com1.z0.glb.clouddn.com/201501308.pic.jpg)\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘æŒ¥æˆ‘ä»¬çš„åˆ›é€ åŠ›ï¼Œåˆ©ç”¨å®ƒåšä¸€äº›æœ‰è¶£çš„äº‹æƒ…ï¼Œå¿«å»å®ç°ä½ çš„æƒ³è±¡å§ï¼Œå¦å¤–æ¨èä¸¤ä¸ªåº“ï¼Œé…åˆå®ƒä»¬ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å‘å‡ºå¾ˆå¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼š\n\n[shelljs - å¼ºå¤§çš„æ‰§è¡Œunixç³»ç»Ÿå‘½ä»¤çš„npmåŒ…](https://www.npmjs.com/package/shelljs)\n\n[yargs - å‘½ä»¤è¡Œå‚æ•°çš„å¤„ç†](https://www.npmjs.com/package/yargs)\n\n\n\n\n\n\n","slug":"ä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·å¹¶ä½¿ç”¨npmç®¡ç†ä½ çš„åŒ…","published":1,"updated":"2016-01-30T07:44:07.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx51v000v47fyzswlx4qs","content":"<blockquote>\n<p>å¯¹äºå‰ç«¯å¼€å‘è€…æ¥è®²ï¼Œç©å„¿jsçš„ä½ ä»¬è‚¯å®šå¯¹nodejså·²ç»npmå¹¶ä¸é™Œç”Ÿï¼Œç°åœ¨npmå·²ç»é›†æˆåˆ°äº†nodeé‡Œï¼Œæ‰€ä»¥å½“ä½ å®‰è£…äº†nodeä¹‹åä¹Ÿå°±é»˜è®¤å®‰è£…äº†npmï¼Œnpmçš„å…¨ç§°æ˜¯node package manager : node åŒ…ç®¡ç†å™¨ï¼Œæä¾›ä¸€ä¸ªregistryï¼Œä½ åªè¦æ³¨å†Œä¸€ä¸ªnpmè´¦å·ï¼Œå°±å¯æ˜¯ä½¿ç”¨npmè¿›è¡ŒåŒ…ç®¡ç†äº†ï¼Œæ¯”å¦‚å‘å¸ƒï¼Œå®‰è£…ï¼Œæ›´æ–°â€¦ç­‰ç­‰ã€‚æœ€è¿‘å†åšå…¬å¸å†…éƒ¨æ¡†æ¶çš„é‡æ„ï¼Œå‡†å¤‡ä½¿ç”¨npmå¼€å‘ä¸€å¥—å‘½ä»¤è¡Œå·¥å…·ï¼Œç®¡ç†æ ¸å¿ƒä»£ç ï¼Œåªè¾“å‡ºä¸šåŠ¡ç›®å½•ç»™æ¡†æ¶ä½¿ç”¨è€…ï¼Œä¸€æ–¹é¢å‡è½»äº†é¡¹ç›®ä½“ç§¯ï¼Œå¦ä¸€æ–¹é¢ç»™å¼€å‘è€…ä¸€ä¸ªæ›´å¥½çš„å¼€å‘ä½“éªŒï¼ŒåŒæ—¶ä¿è¯äº†æ ¸å¿ƒä»£ç çš„å®‰å…¨ï¼Œè¿™ç¯‡æ–‡ç« è®°å½•äº†ä½¿ç”¨npmè¿›è¡ŒåŒ…ç®¡ç†çš„äº‹é¡¹ã€å·²ç»ä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·çš„æ–¹æ³•ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n<p>æƒ³è¦ä½¿ç”¨npmè¿›è¡ŒåŒ…ç®¡ç†ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯ä½¿ç”¨npmå®˜æ–¹ï¼Œå³<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"external\">https://www.npmjs.com/</a>ï¼Œæ³¨å†Œä½ è‡ªå·±çš„è´¦å·ç„¶åè¿›è¡Œç®¡ç†ï¼Œä½†æ˜¯å¦‚æœä¸ä½¿ç”¨ç§æœ‰åŒ…çš„è¯ï¼Œä½ çš„ä»£ç æ˜¯æš´éœ²çš„ï¼Œå¦‚æœæ˜¯ä¼ä¸šå†…éƒ¨çš„ç§æœ‰åŒ…ï¼Œä¸æƒ³å¯¹å¤–æš´éœ²ï¼Œé¿å…æ½œåœ¨çš„é£é™©ï¼Œé‚£ä¹ˆå°±å¿…é¡»ä½¿ç”¨ç§æœ‰åŒ…ç®¡ç†ï¼Œä¸è¿‡ï¼Œæ˜¯è¦äº¤ä¿æŠ¤è´¹çš„ï¼Œè™½ç„¶ä¹Ÿä¸å¤šï¼Œå¦‚æœä½ è¿ä¿æŠ¤è´¹éƒ½ä¸æƒ³äº¤çš„è¯ï¼Œé‚£ä¹ˆä¹Ÿæœ‰åŠæ³•ï¼Œæ­å»ºç§æœ‰npmæœåŠ¡ï¼Œå›½å†…æ¯”å¦‚<a href=\"https://github.com/cnpm/cnpmjs.org\" target=\"_blank\" rel=\"external\">cnpm</a>ï¼Œæˆ–è€…ä½¿ç”¨npmå®˜æ–¹æä¾›çš„ <a href=\"https://www.npmjs.com/npm/on-site\" target=\"_blank\" rel=\"external\">On-Site</a>ï¼Œéƒ½å¯ä»¥æ­å»ºä¼ä¸šå†…éƒ¨çš„ç§æœ‰npmæœåŠ¡ï¼Œä½†æ˜¯æˆ‘å¯ä»¥åœ¨è¿™é‡Œç»™å¤§å®¶æä¸ªé†’ï¼Œå¦‚æœä½ çœŸçš„è¦è‡ªå·±æ­å»ºç§æœ‰npmæœåŠ¡ï¼Œé‚£ä¹ˆä½ å‡†å¤‡å¥½æ¥å—å„ç§æŠ˜ç£¨ï¼Œè®©æˆ‘å·ä¹ä¸€ä¼šå„¿â€¦â€¦</p>\n<p>ä¹å®Œäº†ï¼Œå›åˆ°æ­£é¢˜ï¼Œä¸ºäº†ç»™å¤§å®¶è®²è§£ï¼Œæˆ‘è¿™é‡Œå°±é‡‡ç”¨npmå®˜æ–¹registryè¿›è¡ŒnpmåŒ…ç®¡ç†çš„æ“ä½œï¼Œé¦–å…ˆï¼Œä½ è¦æœ‰ä¸ªå¥³æœ‹å‹ï¼Œå“¦ sorryï¼Œæ˜¯æœ‰ä¸€ä¸ªnpmè´¦å·ï¼š</p>\n<h1 id=\"æ³¨å†Œnpmè´¦å·\"><a href=\"#æ³¨å†Œnpmè´¦å·\" class=\"headerlink\" title=\"æ³¨å†Œnpmè´¦å·\"></a>æ³¨å†Œnpmè´¦å·</h1><p>å¡«å†™ä½ çš„ä¿¡æ¯æ³¨å†Œè´¦å·ï¼Œç„¶åä¼šç»™ä½ å‘ä¸€å°æ¿€æ´»é‚®ä»¶ï¼Œæ¿€æ´»ä½ çš„è´¦å·å°±okäº†ï¼Œå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ä¸èƒ½å†æ™®é€šçš„æ³¨å†Œæµç¨‹äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501301.pic.jpg\" alt=\"æ³¨å†Œnpmè´¦å·\"></p>\n<p>æœ‰äº†è´¦å·ï¼Œå°±å¯ä»¥ç™»å½•ï¼Œæ³¨æ„ï¼Œæˆ‘è¯´çš„æ˜¯åœ¨ç»ˆç«¯ç™»å½•ï¼Œä¸æ˜¯åœ¨ç½‘ç«™ç™»å½•ï¼Œæ‰“å¼€ä½ çš„ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p>\n<pre><code class=\"$\">npm login\n</code></pre>\n<p>ä¼šè®©ä½ è¾“å…¥ä½ åˆšæ‰æ³¨å†Œçš„ç”¨æˆ·åå¯†ç å·²ç»é‚®ç®±ï¼Œä½ å°±å®è¯å®è¯´å°±okäº†ï¼Œå®ƒä¸ä¼šä¸ºéš¾ä½ çš„ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501302.pic.jpg\" alt=\"ç»ˆç«¯ä¸­ç™»å½•npm\"></p>\n<p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œé‚£ä¹ˆä¸ä¼šæœ‰ä»»ä½•æç¤ºä¿¡æ¯ï¼Œè¯´æ˜ä½ ç™»å½•æˆåŠŸäº†ã€‚</p>\n<p>æˆ‘ä»¬å†™ä¸€ä¸ªæµ‹è¯•åŒ…ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼š</p>\n<p>æ‰§è¡Œï¼š</p>\n<pre><code class=\"$\">mkdir test\ncd test\nnpm init\n</code></pre>\n<p>ç”Ÿæˆpackage.jsonæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¾ˆé‡è¦ï¼Œnpmå°±æ˜¯ä¾æ®è¿™ä¸ªæ–‡ä»¶è¿›è¡ŒåŒ…ç®¡ç†å·¥ä½œçš„ï¼Œç„¶åæˆ‘ä»¬æˆ‘ä»¬æ–°å»ºä¸€ä¸ªhtmlæ–‡ä»¶ï¼š</p>\n<pre><code class=\"$\">touch index.html\n</code></pre>\n<p>è¿™ä¸ªhtmlæ–‡ä»¶æ˜¯æˆ‘éšä¾¿å»ºçš„ï¼Œä½œä¸ºæˆ‘ä»¬è¿™ä¸ªæµ‹è¯•åŒ…çš„å†…å®¹ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªæœ€ç®€å•çš„åŒ…äº†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæˆ‘ä»¬çš„åŒ…ï¼Œé€šè¿‡npmæ¨é€åˆ°è¿œç¨‹ï¼Œè¿›è¡Œç®¡ç†ï¼Œæ‰§è¡Œï¼š</p>\n<pre><code class=\"$\">npm publish\n</code></pre>\n<p>è¿™æ¡å‘½ä»¤çš„æ„æ€æ˜¯å‘å¸ƒæˆ‘ä»¬çš„åŒ…ï¼Œå¦‚æœä½ çœŸçš„æŒ‰ç…§æˆ‘çš„æ•™ç¨‹æ•²ä»£ç ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501303.pic.jpg\" alt=\"npm publishå‘å¸ƒé”™è¯¯\"></p>\n<p>å¦‚æœä½ å¯ä»¥ç¡®è®¤ä½ å·²ç»ä½¿ç”¨äº†æ­£ç¡®çš„è´¦å·ç™»é™†ï¼Œé‚£ä¹ˆå°±ä¸è¦è¢«æç¤ºä¿¡æ¯æ‰€è¿·æƒ‘ç€ï¼Œè¿™å¯èƒ½æ˜¯ä½ æ‰€è¦å‘å¸ƒçš„åŒ…çš„åå­—ï¼Œå·²ç»æœ‰äººä½¿ç”¨å¹¶å‘å¸ƒäº†ï¼Œç¼–è¾‘ä½ çš„package.jsonæ–‡ä»¶ï¼Œæ‰¾åˆ°nameå­—æ®µï¼Œä¿®æ”¹ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„åå­—ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501304.pic.jpg\" alt=\"ä¿®æ”¹nameå­—æ®µ\"></p>\n<p>å¥½å§ï¼Œæˆ‘æ‰¿è®¤è¿™ä¸ªåå­—99.99999999%å¯ä»¥ç”¨äº†ã€‚</p>\n<p>ç„¶åå†å‘å¸ƒï¼Œå°±å¯ä»¥æˆåŠŸäº†ï¼Œæ‰§è¡Œï¼š</p>\n<pre><code class=\"$\">npm publish\n</code></pre>\n<p>å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501305.pic.jpg\" alt=\"å‘å¸ƒæˆåŠŸ\"></p>\n<p>å‘å¸ƒæˆåŠŸåï¼Œåœ¨npmå®˜ç½‘ç™»é™†ä½ çš„è´¦å·ï¼Œä½ æ˜¯å¯ä»¥çœ‹åˆ°ä½ è‡ªå·±çš„åŒ…çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501306.pic.jpg\" alt=\"ä½ å‘å¸ƒçš„åŒ…\"></p>\n<p>å‘å¸ƒäº†åŒ…ä¹‹åï¼Œä½ å°±å¯ä»¥åƒå®‰è£…å…¶ä»–ç¬¬ä¸‰æ–¹åŒ…ä¸€ä¸‹æ¥å®‰è£…ä½ çš„åŒ…äº†ï¼š</p>\n<pre><code>npm install &lt;you package name&gt;\n</code></pre><p>å¦‚æœä½ çš„æœ¬åœ°åŒ…æœ‰æ›´æ–°ï¼Œéœ€è¦å†æ¬¡å‘å¸ƒçš„è¯ï¼Œç›´æ¥æ‰§è¡Œ npm publish æ˜¯ä¸å¯ä»¥çš„ï¼Œä½ è¿˜è¦æ›´æ–°ä¸€ä¸‹åŒ…çš„ç‰ˆæœ¬å·ï¼Œç„¶åå†æ‰§è¡Œå‘å¸ƒå‘½ä»¤æ‰è¡Œï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹ä¸€ä¸‹package.jsonæ–‡ä»¶çš„ version å­—æ®µï¼Œä¸è¿‡ï¼Œä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ï¼Œæ‰§è¡Œï¼š</p>\n<pre><code>npm version &lt;update_type&gt;\n</code></pre><p>update_type å¯ä»¥å–ä¸‰ä¸ªå€¼ï¼šmajor minor patch</p>\n<p>æˆ‘ä»¬çŸ¥é“ï¼Œç‰ˆæœ¬å·çš„æ ¼å¼æ˜¯è¿™æ ·çš„ 1.0.0</p>\n<p>å…¶ä¸­ 1 æ˜¯ä¸»è¦ç‰ˆæœ¬ï¼Œåªæœ‰é‡å¤§çš„æ›´æ–°æ‰ä¼šä¿®æ”¹å®ƒçš„å€¼ï¼ˆmajorï¼‰ï¼Œç¬¬äºŒä¸ªä½ç½®æ˜¯æ¬¡è¦çš„(minor)ï¼Œç¬¬ä¸‰ä¸ªä½ç½®æ˜¯è¡¥ä¸(patch)ï¼Œæ ¹æ®åŒ…ä¿®æ”¹çš„ç¨‹åº¦æ¥å®šä½ è¦ä¿®æ”¹é‚£ä¸ªä½ç½®çš„æ•°å­—ï¼Œä¸ºäº†æµ‹è¯•ï¼Œæˆ‘ä»¬å°±æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>\n<pre><code class=\"$\">npm version patch\n</code></pre>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501307.pic.jpg\" alt=\"æ›´æ–°ç‰ˆæœ¬\"></p>\n<p>æˆ‘ä»¬çœ‹åˆ°ï¼Œç‰ˆæœ¬ç”±åŸæ¥çš„ 1.0.0 å˜æˆäº† 1.0.1ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œ npm publish å‘½ä»¤æ›´æ–°æˆ‘ä»¬çš„åŒ…äº†ã€‚</p>\n<p>ä¸Šé¢æè¿°äº†æœ€åŸºæœ¬çš„ç®¡ç†å‘½ä»¤ï¼Œnpmè¿œä¸æ­¢è¿™äº›ï¼Œå®˜æ–¹æ–‡æ¡£å†™çš„å¾ˆè¯¦ç»†ï¼š<a href=\"https://docs.npmjs.com/getting-started/what-is-npm\" target=\"_blank\" rel=\"external\">npm</a></p>\n<h1 id=\"å¦‚æœä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·\"><a href=\"#å¦‚æœä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·\" class=\"headerlink\" title=\"å¦‚æœä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·\"></a>å¦‚æœä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·</h1><p>ä»€ä¹ˆæ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼Ÿæœ€é€šä¿—çš„è§£é‡Šå°±æ˜¯ï¼Œæ•²ä¸€ä¸²å­—ç¬¦ï¼Œå‘½ä»¤è¡Œèƒ½å¤Ÿè¯†åˆ«ï¼Œå¹¶åšä¸€äº›äº‹ã€‚æ¯”å¦‚ ls æŸ¥çœ‹æ–‡ä»¶ï¼Œ cd åˆ‡æ¢ç›®å½•ç­‰ç­‰ï¼Œéƒ½æ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼ŒåŠå¯æ‰§è¡Œçš„æ–‡ä»¶ã€‚</p>\n<p>å…¶å®ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·ç‰¹åˆ«ç®€å•ï¼Œæˆ‘ä»¬è¿˜ç»§ç»­ä½¿ç”¨ä¸Šé¢çš„ä¾‹å­ã€‚</p>\n<h2 id=\"ç¬¬ä¸€æ­¥ï¼šç¼–å†™ä¸€ä¸ªnodejsæ–‡ä»¶\"><a href=\"#ç¬¬ä¸€æ­¥ï¼šç¼–å†™ä¸€ä¸ªnodejsæ–‡ä»¶\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šç¼–å†™ä¸€ä¸ªnodejsæ–‡ä»¶\"></a>ç¬¬ä¸€æ­¥ï¼šç¼–å†™ä¸€ä¸ªnodejsæ–‡ä»¶</h2><p>åå­—ä½ éšä¾¿èµ·ï¼Œè¿™é‡Œæˆ‘ä»¬å°±å« test.jsï¼Œåœ¨package.jsonçš„åŒçº§ç›®å½•æ–°å»ºä¸€ä¸ªtest.jsæ–‡ä»¶ï¼Œå¹¶ç¼–è¾‘å¦‚ä¸‹å†…å®¹ï¼š</p>\n<pre><code class=\"test.js\">#! /usr/bin/env node\n\nconsole.log(&#39;test command line!&#39;);\n</code></pre>\n<p>æ³¨æ„ï¼Œç¬¬ä¸€è¡Œçš„ #! /usr/bin/env node ä¸å¯ä»¥çœç•¥ï¼Œè¿™æ˜¯å‘Šè¯‰æœºå™¨ï¼Œè¿™ä¸ªæ–‡ä»¶è¦åœ¨nodeç¯å¢ƒä¸‹è¿è¡Œï¼Œå½“æˆ‘ä»¬ç›´æ¥æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œç›¸å½“äºä½¿ç”¨nodeå»æ‰§è¡Œå®ƒï¼Œå³ï¼š</p>\n<pre><code>./test.js\n</code></pre><p>ç›¸å½“äº</p>\n<pre><code>node ./test.js\n</code></pre><h2 id=\"ç¬¬äºŒéƒ¨ï¼šåœ¨package-jsonæ–‡ä»¶ä¸­æ·»åŠ binå­—æ®µ\"><a href=\"#ç¬¬äºŒéƒ¨ï¼šåœ¨package-jsonæ–‡ä»¶ä¸­æ·»åŠ binå­—æ®µ\" class=\"headerlink\" title=\"ç¬¬äºŒéƒ¨ï¼šåœ¨package.jsonæ–‡ä»¶ä¸­æ·»åŠ binå­—æ®µ\"></a>ç¬¬äºŒéƒ¨ï¼šåœ¨package.jsonæ–‡ä»¶ä¸­æ·»åŠ binå­—æ®µ</h2><pre><code class=\"package.json\">&quot;bin&quot;: {\n    &quot;hcy-cmd&quot;: &quot;./test.js&quot;\n}\n</code></pre>\n<p>binå­—æ®µæ˜¯ä¸€ä¸ªjsonå¯¹è±¡ï¼Œé”®æ˜¯å‘½ä»¤çš„åç§°ï¼Œå³æˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œçš„å‘½ä»¤åç§°ï¼Œå€¼æ˜¯è¯¥å‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯å½“å‰ç›®å½•ä¸‹çš„ test.js æ–‡ä»¶ï¼Œå…¶ä¸­ï¼Œå‘½ä»¤çš„åç§°ä½ è‡ªå·±éšä¾¿å®šä¹‰ã€‚</p>\n<p>è‡´æ­¤ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ç»“æŸï¼Œå¦‚æœç°åœ¨å°±åœ¨ç»ˆç«¯æ•² hcy-cmd çš„è¯ï¼Œæ˜¯ä¸è¡Œçš„ï¼Œè¿˜éœ€è¦æœ€åä¸€æ­¥ã€‚</p>\n<h2 id=\"ç¬¬ä¸‰éƒ¨ï¼šè¿æ¥åˆ°å…¨å±€\"><a href=\"#ç¬¬ä¸‰éƒ¨ï¼šè¿æ¥åˆ°å…¨å±€\" class=\"headerlink\" title=\"ç¬¬ä¸‰éƒ¨ï¼šè¿æ¥åˆ°å…¨å±€\"></a>ç¬¬ä¸‰éƒ¨ï¼šè¿æ¥åˆ°å…¨å±€</h2><p>å¦‚ä½•è¿æ¥åˆ°å…¨å±€ï¼Œå¾ˆç®€å•ï¼Œåªéœ€ä¸€æ¡å‘½ä»¤ï¼Œæ‰§è¡Œï¼š</p>\n<pre><code class=\"$\">npm link\n</code></pre>\n<p>è¿™æ˜¯åœ¨ç»ˆç«¯æ•²å…¥æˆ‘ä»¬è‡ªå®šä¹‰çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹ç»“æœï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501308.pic.jpg\" alt=\"æ‰§è¡Œå‘½ä»¤\"></p>\n<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘æŒ¥æˆ‘ä»¬çš„åˆ›é€ åŠ›ï¼Œåˆ©ç”¨å®ƒåšä¸€äº›æœ‰è¶£çš„äº‹æƒ…ï¼Œå¿«å»å®ç°ä½ çš„æƒ³è±¡å§ï¼Œå¦å¤–æ¨èä¸¤ä¸ªåº“ï¼Œé…åˆå®ƒä»¬ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å‘å‡ºå¾ˆå¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼š</p>\n<p><a href=\"https://www.npmjs.com/package/shelljs\" target=\"_blank\" rel=\"external\">shelljs - å¼ºå¤§çš„æ‰§è¡Œunixç³»ç»Ÿå‘½ä»¤çš„npmåŒ…</a></p>\n<p><a href=\"https://www.npmjs.com/package/yargs\" target=\"_blank\" rel=\"external\">yargs - å‘½ä»¤è¡Œå‚æ•°çš„å¤„ç†</a></p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>å¯¹äºå‰ç«¯å¼€å‘è€…æ¥è®²ï¼Œç©å„¿jsçš„ä½ ä»¬è‚¯å®šå¯¹nodejså·²ç»npmå¹¶ä¸é™Œç”Ÿï¼Œç°åœ¨npmå·²ç»é›†æˆåˆ°äº†nodeé‡Œï¼Œæ‰€ä»¥å½“ä½ å®‰è£…äº†nodeä¹‹åä¹Ÿå°±é»˜è®¤å®‰è£…äº†npmï¼Œnpmçš„å…¨ç§°æ˜¯node package manager : node åŒ…ç®¡ç†å™¨ï¼Œæä¾›ä¸€ä¸ªregistryï¼Œä½ åªè¦æ³¨å†Œä¸€ä¸ªnpmè´¦å·ï¼Œå°±å¯æ˜¯ä½¿ç”¨npmè¿›è¡ŒåŒ…ç®¡ç†äº†ï¼Œæ¯”å¦‚å‘å¸ƒï¼Œå®‰è£…ï¼Œæ›´æ–°â€¦ç­‰ç­‰ã€‚æœ€è¿‘å†åšå…¬å¸å†…éƒ¨æ¡†æ¶çš„é‡æ„ï¼Œå‡†å¤‡ä½¿ç”¨npmå¼€å‘ä¸€å¥—å‘½ä»¤è¡Œå·¥å…·ï¼Œç®¡ç†æ ¸å¿ƒä»£ç ï¼Œåªè¾“å‡ºä¸šåŠ¡ç›®å½•ç»™æ¡†æ¶ä½¿ç”¨è€…ï¼Œä¸€æ–¹é¢å‡è½»äº†é¡¹ç›®ä½“ç§¯ï¼Œå¦ä¸€æ–¹é¢ç»™å¼€å‘è€…ä¸€ä¸ªæ›´å¥½çš„å¼€å‘ä½“éªŒï¼ŒåŒæ—¶ä¿è¯äº†æ ¸å¿ƒä»£ç çš„å®‰å…¨ï¼Œè¿™ç¯‡æ–‡ç« è®°å½•äº†ä½¿ç”¨npmè¿›è¡ŒåŒ…ç®¡ç†çš„äº‹é¡¹ã€å·²ç»ä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·çš„æ–¹æ³•ã€‚</p>\n</blockquote>","more":"<p>æƒ³è¦ä½¿ç”¨npmè¿›è¡ŒåŒ…ç®¡ç†ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯ä½¿ç”¨npmå®˜æ–¹ï¼Œå³<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"external\">https://www.npmjs.com/</a>ï¼Œæ³¨å†Œä½ è‡ªå·±çš„è´¦å·ç„¶åè¿›è¡Œç®¡ç†ï¼Œä½†æ˜¯å¦‚æœä¸ä½¿ç”¨ç§æœ‰åŒ…çš„è¯ï¼Œä½ çš„ä»£ç æ˜¯æš´éœ²çš„ï¼Œå¦‚æœæ˜¯ä¼ä¸šå†…éƒ¨çš„ç§æœ‰åŒ…ï¼Œä¸æƒ³å¯¹å¤–æš´éœ²ï¼Œé¿å…æ½œåœ¨çš„é£é™©ï¼Œé‚£ä¹ˆå°±å¿…é¡»ä½¿ç”¨ç§æœ‰åŒ…ç®¡ç†ï¼Œä¸è¿‡ï¼Œæ˜¯è¦äº¤ä¿æŠ¤è´¹çš„ï¼Œè™½ç„¶ä¹Ÿä¸å¤šï¼Œå¦‚æœä½ è¿ä¿æŠ¤è´¹éƒ½ä¸æƒ³äº¤çš„è¯ï¼Œé‚£ä¹ˆä¹Ÿæœ‰åŠæ³•ï¼Œæ­å»ºç§æœ‰npmæœåŠ¡ï¼Œå›½å†…æ¯”å¦‚<a href=\"https://github.com/cnpm/cnpmjs.org\" target=\"_blank\" rel=\"external\">cnpm</a>ï¼Œæˆ–è€…ä½¿ç”¨npmå®˜æ–¹æä¾›çš„ <a href=\"https://www.npmjs.com/npm/on-site\" target=\"_blank\" rel=\"external\">On-Site</a>ï¼Œéƒ½å¯ä»¥æ­å»ºä¼ä¸šå†…éƒ¨çš„ç§æœ‰npmæœåŠ¡ï¼Œä½†æ˜¯æˆ‘å¯ä»¥åœ¨è¿™é‡Œç»™å¤§å®¶æä¸ªé†’ï¼Œå¦‚æœä½ çœŸçš„è¦è‡ªå·±æ­å»ºç§æœ‰npmæœåŠ¡ï¼Œé‚£ä¹ˆä½ å‡†å¤‡å¥½æ¥å—å„ç§æŠ˜ç£¨ï¼Œè®©æˆ‘å·ä¹ä¸€ä¼šå„¿â€¦â€¦</p>\n<p>ä¹å®Œäº†ï¼Œå›åˆ°æ­£é¢˜ï¼Œä¸ºäº†ç»™å¤§å®¶è®²è§£ï¼Œæˆ‘è¿™é‡Œå°±é‡‡ç”¨npmå®˜æ–¹registryè¿›è¡ŒnpmåŒ…ç®¡ç†çš„æ“ä½œï¼Œé¦–å…ˆï¼Œä½ è¦æœ‰ä¸ªå¥³æœ‹å‹ï¼Œå“¦ sorryï¼Œæ˜¯æœ‰ä¸€ä¸ªnpmè´¦å·ï¼š</p>\n<h1 id=\"æ³¨å†Œnpmè´¦å·\"><a href=\"#æ³¨å†Œnpmè´¦å·\" class=\"headerlink\" title=\"æ³¨å†Œnpmè´¦å·\"></a>æ³¨å†Œnpmè´¦å·</h1><p>å¡«å†™ä½ çš„ä¿¡æ¯æ³¨å†Œè´¦å·ï¼Œç„¶åä¼šç»™ä½ å‘ä¸€å°æ¿€æ´»é‚®ä»¶ï¼Œæ¿€æ´»ä½ çš„è´¦å·å°±okäº†ï¼Œå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ä¸èƒ½å†æ™®é€šçš„æ³¨å†Œæµç¨‹äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501301.pic.jpg\" alt=\"æ³¨å†Œnpmè´¦å·\"></p>\n<p>æœ‰äº†è´¦å·ï¼Œå°±å¯ä»¥ç™»å½•ï¼Œæ³¨æ„ï¼Œæˆ‘è¯´çš„æ˜¯åœ¨ç»ˆç«¯ç™»å½•ï¼Œä¸æ˜¯åœ¨ç½‘ç«™ç™»å½•ï¼Œæ‰“å¼€ä½ çš„ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p>\n<pre><code class=\"$\">npm login\n</code></pre>\n<p>ä¼šè®©ä½ è¾“å…¥ä½ åˆšæ‰æ³¨å†Œçš„ç”¨æˆ·åå¯†ç å·²ç»é‚®ç®±ï¼Œä½ å°±å®è¯å®è¯´å°±okäº†ï¼Œå®ƒä¸ä¼šä¸ºéš¾ä½ çš„ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501302.pic.jpg\" alt=\"ç»ˆç«¯ä¸­ç™»å½•npm\"></p>\n<p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œé‚£ä¹ˆä¸ä¼šæœ‰ä»»ä½•æç¤ºä¿¡æ¯ï¼Œè¯´æ˜ä½ ç™»å½•æˆåŠŸäº†ã€‚</p>\n<p>æˆ‘ä»¬å†™ä¸€ä¸ªæµ‹è¯•åŒ…ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼š</p>\n<p>æ‰§è¡Œï¼š</p>\n<pre><code class=\"$\">mkdir test\ncd test\nnpm init\n</code></pre>\n<p>ç”Ÿæˆpackage.jsonæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¾ˆé‡è¦ï¼Œnpmå°±æ˜¯ä¾æ®è¿™ä¸ªæ–‡ä»¶è¿›è¡ŒåŒ…ç®¡ç†å·¥ä½œçš„ï¼Œç„¶åæˆ‘ä»¬æˆ‘ä»¬æ–°å»ºä¸€ä¸ªhtmlæ–‡ä»¶ï¼š</p>\n<pre><code class=\"$\">touch index.html\n</code></pre>\n<p>è¿™ä¸ªhtmlæ–‡ä»¶æ˜¯æˆ‘éšä¾¿å»ºçš„ï¼Œä½œä¸ºæˆ‘ä»¬è¿™ä¸ªæµ‹è¯•åŒ…çš„å†…å®¹ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªæœ€ç®€å•çš„åŒ…äº†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæˆ‘ä»¬çš„åŒ…ï¼Œé€šè¿‡npmæ¨é€åˆ°è¿œç¨‹ï¼Œè¿›è¡Œç®¡ç†ï¼Œæ‰§è¡Œï¼š</p>\n<pre><code class=\"$\">npm publish\n</code></pre>\n<p>è¿™æ¡å‘½ä»¤çš„æ„æ€æ˜¯å‘å¸ƒæˆ‘ä»¬çš„åŒ…ï¼Œå¦‚æœä½ çœŸçš„æŒ‰ç…§æˆ‘çš„æ•™ç¨‹æ•²ä»£ç ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501303.pic.jpg\" alt=\"npm publishå‘å¸ƒé”™è¯¯\"></p>\n<p>å¦‚æœä½ å¯ä»¥ç¡®è®¤ä½ å·²ç»ä½¿ç”¨äº†æ­£ç¡®çš„è´¦å·ç™»é™†ï¼Œé‚£ä¹ˆå°±ä¸è¦è¢«æç¤ºä¿¡æ¯æ‰€è¿·æƒ‘ç€ï¼Œè¿™å¯èƒ½æ˜¯ä½ æ‰€è¦å‘å¸ƒçš„åŒ…çš„åå­—ï¼Œå·²ç»æœ‰äººä½¿ç”¨å¹¶å‘å¸ƒäº†ï¼Œç¼–è¾‘ä½ çš„package.jsonæ–‡ä»¶ï¼Œæ‰¾åˆ°nameå­—æ®µï¼Œä¿®æ”¹ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„åå­—ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501304.pic.jpg\" alt=\"ä¿®æ”¹nameå­—æ®µ\"></p>\n<p>å¥½å§ï¼Œæˆ‘æ‰¿è®¤è¿™ä¸ªåå­—99.99999999%å¯ä»¥ç”¨äº†ã€‚</p>\n<p>ç„¶åå†å‘å¸ƒï¼Œå°±å¯ä»¥æˆåŠŸäº†ï¼Œæ‰§è¡Œï¼š</p>\n<pre><code class=\"$\">npm publish\n</code></pre>\n<p>å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501305.pic.jpg\" alt=\"å‘å¸ƒæˆåŠŸ\"></p>\n<p>å‘å¸ƒæˆåŠŸåï¼Œåœ¨npmå®˜ç½‘ç™»é™†ä½ çš„è´¦å·ï¼Œä½ æ˜¯å¯ä»¥çœ‹åˆ°ä½ è‡ªå·±çš„åŒ…çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501306.pic.jpg\" alt=\"ä½ å‘å¸ƒçš„åŒ…\"></p>\n<p>å‘å¸ƒäº†åŒ…ä¹‹åï¼Œä½ å°±å¯ä»¥åƒå®‰è£…å…¶ä»–ç¬¬ä¸‰æ–¹åŒ…ä¸€ä¸‹æ¥å®‰è£…ä½ çš„åŒ…äº†ï¼š</p>\n<pre><code>npm install &lt;you package name&gt;\n</code></pre><p>å¦‚æœä½ çš„æœ¬åœ°åŒ…æœ‰æ›´æ–°ï¼Œéœ€è¦å†æ¬¡å‘å¸ƒçš„è¯ï¼Œç›´æ¥æ‰§è¡Œ npm publish æ˜¯ä¸å¯ä»¥çš„ï¼Œä½ è¿˜è¦æ›´æ–°ä¸€ä¸‹åŒ…çš„ç‰ˆæœ¬å·ï¼Œç„¶åå†æ‰§è¡Œå‘å¸ƒå‘½ä»¤æ‰è¡Œï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹ä¸€ä¸‹package.jsonæ–‡ä»¶çš„ version å­—æ®µï¼Œä¸è¿‡ï¼Œä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ï¼Œæ‰§è¡Œï¼š</p>\n<pre><code>npm version &lt;update_type&gt;\n</code></pre><p>update_type å¯ä»¥å–ä¸‰ä¸ªå€¼ï¼šmajor minor patch</p>\n<p>æˆ‘ä»¬çŸ¥é“ï¼Œç‰ˆæœ¬å·çš„æ ¼å¼æ˜¯è¿™æ ·çš„ 1.0.0</p>\n<p>å…¶ä¸­ 1 æ˜¯ä¸»è¦ç‰ˆæœ¬ï¼Œåªæœ‰é‡å¤§çš„æ›´æ–°æ‰ä¼šä¿®æ”¹å®ƒçš„å€¼ï¼ˆmajorï¼‰ï¼Œç¬¬äºŒä¸ªä½ç½®æ˜¯æ¬¡è¦çš„(minor)ï¼Œç¬¬ä¸‰ä¸ªä½ç½®æ˜¯è¡¥ä¸(patch)ï¼Œæ ¹æ®åŒ…ä¿®æ”¹çš„ç¨‹åº¦æ¥å®šä½ è¦ä¿®æ”¹é‚£ä¸ªä½ç½®çš„æ•°å­—ï¼Œä¸ºäº†æµ‹è¯•ï¼Œæˆ‘ä»¬å°±æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>\n<pre><code class=\"$\">npm version patch\n</code></pre>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501307.pic.jpg\" alt=\"æ›´æ–°ç‰ˆæœ¬\"></p>\n<p>æˆ‘ä»¬çœ‹åˆ°ï¼Œç‰ˆæœ¬ç”±åŸæ¥çš„ 1.0.0 å˜æˆäº† 1.0.1ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œ npm publish å‘½ä»¤æ›´æ–°æˆ‘ä»¬çš„åŒ…äº†ã€‚</p>\n<p>ä¸Šé¢æè¿°äº†æœ€åŸºæœ¬çš„ç®¡ç†å‘½ä»¤ï¼Œnpmè¿œä¸æ­¢è¿™äº›ï¼Œå®˜æ–¹æ–‡æ¡£å†™çš„å¾ˆè¯¦ç»†ï¼š<a href=\"https://docs.npmjs.com/getting-started/what-is-npm\" target=\"_blank\" rel=\"external\">npm</a></p>\n<h1 id=\"å¦‚æœä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·\"><a href=\"#å¦‚æœä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·\" class=\"headerlink\" title=\"å¦‚æœä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·\"></a>å¦‚æœä½¿ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·</h1><p>ä»€ä¹ˆæ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼Ÿæœ€é€šä¿—çš„è§£é‡Šå°±æ˜¯ï¼Œæ•²ä¸€ä¸²å­—ç¬¦ï¼Œå‘½ä»¤è¡Œèƒ½å¤Ÿè¯†åˆ«ï¼Œå¹¶åšä¸€äº›äº‹ã€‚æ¯”å¦‚ ls æŸ¥çœ‹æ–‡ä»¶ï¼Œ cd åˆ‡æ¢ç›®å½•ç­‰ç­‰ï¼Œéƒ½æ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼ŒåŠå¯æ‰§è¡Œçš„æ–‡ä»¶ã€‚</p>\n<p>å…¶å®ç”¨npmå’Œnodeå¼€å‘å‘½ä»¤è¡Œå·¥å…·ç‰¹åˆ«ç®€å•ï¼Œæˆ‘ä»¬è¿˜ç»§ç»­ä½¿ç”¨ä¸Šé¢çš„ä¾‹å­ã€‚</p>\n<h2 id=\"ç¬¬ä¸€æ­¥ï¼šç¼–å†™ä¸€ä¸ªnodejsæ–‡ä»¶\"><a href=\"#ç¬¬ä¸€æ­¥ï¼šç¼–å†™ä¸€ä¸ªnodejsæ–‡ä»¶\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šç¼–å†™ä¸€ä¸ªnodejsæ–‡ä»¶\"></a>ç¬¬ä¸€æ­¥ï¼šç¼–å†™ä¸€ä¸ªnodejsæ–‡ä»¶</h2><p>åå­—ä½ éšä¾¿èµ·ï¼Œè¿™é‡Œæˆ‘ä»¬å°±å« test.jsï¼Œåœ¨package.jsonçš„åŒçº§ç›®å½•æ–°å»ºä¸€ä¸ªtest.jsæ–‡ä»¶ï¼Œå¹¶ç¼–è¾‘å¦‚ä¸‹å†…å®¹ï¼š</p>\n<pre><code class=\"test.js\">#! /usr/bin/env node\n\nconsole.log(&#39;test command line!&#39;);\n</code></pre>\n<p>æ³¨æ„ï¼Œç¬¬ä¸€è¡Œçš„ #! /usr/bin/env node ä¸å¯ä»¥çœç•¥ï¼Œè¿™æ˜¯å‘Šè¯‰æœºå™¨ï¼Œè¿™ä¸ªæ–‡ä»¶è¦åœ¨nodeç¯å¢ƒä¸‹è¿è¡Œï¼Œå½“æˆ‘ä»¬ç›´æ¥æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œç›¸å½“äºä½¿ç”¨nodeå»æ‰§è¡Œå®ƒï¼Œå³ï¼š</p>\n<pre><code>./test.js\n</code></pre><p>ç›¸å½“äº</p>\n<pre><code>node ./test.js\n</code></pre><h2 id=\"ç¬¬äºŒéƒ¨ï¼šåœ¨package-jsonæ–‡ä»¶ä¸­æ·»åŠ binå­—æ®µ\"><a href=\"#ç¬¬äºŒéƒ¨ï¼šåœ¨package-jsonæ–‡ä»¶ä¸­æ·»åŠ binå­—æ®µ\" class=\"headerlink\" title=\"ç¬¬äºŒéƒ¨ï¼šåœ¨package.jsonæ–‡ä»¶ä¸­æ·»åŠ binå­—æ®µ\"></a>ç¬¬äºŒéƒ¨ï¼šåœ¨package.jsonæ–‡ä»¶ä¸­æ·»åŠ binå­—æ®µ</h2><pre><code class=\"package.json\">&quot;bin&quot;: {\n    &quot;hcy-cmd&quot;: &quot;./test.js&quot;\n}\n</code></pre>\n<p>binå­—æ®µæ˜¯ä¸€ä¸ªjsonå¯¹è±¡ï¼Œé”®æ˜¯å‘½ä»¤çš„åç§°ï¼Œå³æˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œçš„å‘½ä»¤åç§°ï¼Œå€¼æ˜¯è¯¥å‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯å½“å‰ç›®å½•ä¸‹çš„ test.js æ–‡ä»¶ï¼Œå…¶ä¸­ï¼Œå‘½ä»¤çš„åç§°ä½ è‡ªå·±éšä¾¿å®šä¹‰ã€‚</p>\n<p>è‡´æ­¤ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ç»“æŸï¼Œå¦‚æœç°åœ¨å°±åœ¨ç»ˆç«¯æ•² hcy-cmd çš„è¯ï¼Œæ˜¯ä¸è¡Œçš„ï¼Œè¿˜éœ€è¦æœ€åä¸€æ­¥ã€‚</p>\n<h2 id=\"ç¬¬ä¸‰éƒ¨ï¼šè¿æ¥åˆ°å…¨å±€\"><a href=\"#ç¬¬ä¸‰éƒ¨ï¼šè¿æ¥åˆ°å…¨å±€\" class=\"headerlink\" title=\"ç¬¬ä¸‰éƒ¨ï¼šè¿æ¥åˆ°å…¨å±€\"></a>ç¬¬ä¸‰éƒ¨ï¼šè¿æ¥åˆ°å…¨å±€</h2><p>å¦‚ä½•è¿æ¥åˆ°å…¨å±€ï¼Œå¾ˆç®€å•ï¼Œåªéœ€ä¸€æ¡å‘½ä»¤ï¼Œæ‰§è¡Œï¼š</p>\n<pre><code class=\"$\">npm link\n</code></pre>\n<p>è¿™æ˜¯åœ¨ç»ˆç«¯æ•²å…¥æˆ‘ä»¬è‡ªå®šä¹‰çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹ç»“æœï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201501308.pic.jpg\" alt=\"æ‰§è¡Œå‘½ä»¤\"></p>\n<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘æŒ¥æˆ‘ä»¬çš„åˆ›é€ åŠ›ï¼Œåˆ©ç”¨å®ƒåšä¸€äº›æœ‰è¶£çš„äº‹æƒ…ï¼Œå¿«å»å®ç°ä½ çš„æƒ³è±¡å§ï¼Œå¦å¤–æ¨èä¸¤ä¸ªåº“ï¼Œé…åˆå®ƒä»¬ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å‘å‡ºå¾ˆå¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼š</p>\n<p><a href=\"https://www.npmjs.com/package/shelljs\" target=\"_blank\" rel=\"external\">shelljs - å¼ºå¤§çš„æ‰§è¡Œunixç³»ç»Ÿå‘½ä»¤çš„npmåŒ…</a></p>\n<p><a href=\"https://www.npmjs.com/package/yargs\" target=\"_blank\" rel=\"external\">yargs - å‘½ä»¤è¡Œå‚æ•°çš„å¤„ç†</a></p>"},{"title":"ç­–ç•¥æ¨¡å¼åœ¨è¡¨å•éªŒè¯ä¸­çš„åº”ç”¨","date":"2016-02-21T11:58:19.000Z","_content":"\n> åœ¨ä»»ä½•ä¸€ä¸ªç³»ç»Ÿé‡Œé¢ï¼Œå‡ ä¹éƒ½ç¼ºå°‘ä¸äº†æäº¤è¡¨å•çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚æ³¨å†Œã€ç™»é™†ã€ä¸‹è®¢å•ç­‰ç­‰ã€‚è¿™ç¯‡æ–‡ç« å°±é˜è¿°äº†å¦‚ä½•ç¼–å†™çœ‹ç€èˆ’æœçš„è¡¨å•éªŒè¯ä»£ç ã€‚\n\n<!-- more -->\n\n# 1ã€é—®é¢˜ #\n\nç›¸ä¿¡å¤§å®¶å¹³æ—¶å†åšè¡¨å•éªŒè¯çš„æ—¶å€™åŸºæœ¬ä¸å¦‚ä¸‹ä»£ç ç›¸åŒï¼š\n\n```js\nif(input1.value === ''){\n\talert('xxxä¸èƒ½ä¸ºç©º');\n\treturn false;\n}else if(input2.length < 6){\n\talert('xxxæœ€å°‘6ä¸ªå­—ç¬¦');\n\treturn false;\n}else if(...){\n\t...\n\treturn false;\n}\n```\n\nè¿™æ ·ç¼–å†™ä»£ç ï¼Œçš„ç¡®èƒ½å¤Ÿå®Œæˆä¸šåŠ¡çš„éœ€æ±‚ï¼Œèƒ½å¤Ÿå®Œæˆè¡¨å•çš„éªŒè¯ï¼Œä½†æ˜¯å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚ï¼š\n\n> 1ã€ä»£ç ä¸­åŒ…å«å¤ªå¤šçš„ if - else è¯­å¥ï¼Œå¦‚æœéªŒè¯è§„åˆ™è¾ƒå¤šçš„è¯ï¼Œçœ‹ä¸Šå»å¤ªè¿‡äºæ¶å¿ƒ......\n\n> 2ã€éªŒè¯è§„åˆ™ä¸å¯å¤ç”¨ï¼Œå¦‚æœæˆ‘ä»¬å¦å¤–ä¸€ä¸ªé¡µé¢ä¹Ÿéœ€è¦éªŒè¯ç›¸ä¼¼çš„è¡¨å•ï¼Œæˆ‘ä»¬å”¯ä¸€çš„åšæ³•å°±æ˜¯ï¼Œå¤åˆ¶ä¸€ä»½ï¼Œç²˜è´´è¿‡å»......\n\n> 3ã€ä»£ç ä¸æ˜“ç»´æŠ¤ï¼Œä¸éœ€è¦è§£é‡Šäº†å§......\n\n# 2ã€è§£å†³åŠæ³• #\n\næ‰€è°“åŠæ³•æ€»æ¯”é—®é¢˜å¤šï¼ŒåŠæ³•æ˜¯æœ‰çš„ï¼Œæ¯”å¦‚é©¬ä¸Šè¦è®²è§£çš„ä½¿ç”¨ ç­–ç•¥æ¨¡å¼ ä½¿è¡¨å•éªŒè¯æ›´ä¼˜é›…æ›´å®Œç¾ï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šäººå¾ˆæŠµè§¦è®¾è®¡æ¨¡å¼ï¼Œä¸€å¬è®¾è®¡æ¨¡å¼å°±è§‰å¾—å¾ˆé¥è¿œï¼Œè§‰å¾—è‡ªå·±åœ¨å·¥ä½œä¸­å¾ˆå°‘ç”¨åˆ°è®¾è®¡æ¨¡å¼ï¼Œé‚£ä¹ˆä½ å°±é”™äº†ï¼Œç‰¹åˆ«æ˜¯jsè¿™ç§çµæ´»çš„è¯­è¨€ï¼Œæœ‰çš„æ—¶å€™ä½ å·²ç»åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨äº†è®¾è®¡æ¨¡å¼ï¼Œåªæ˜¯ä½ ä¸çŸ¥é“è€Œå·²ã€‚æ›´å¤šå…³äºè®¾è®¡æ¨¡å¼çš„ä¸œè¥¿ï¼Œä»¥åä¼šé™†ç»­å†™åšå®¢æè¿°ï¼Œè¿™é‡Œåªå¸Œæœ›å¤§å®¶æŠ›å¼ƒè®¾è®¡æ¨¡å¼ç¥ç§˜çš„æ„Ÿè§‰ï¼Œé€šä¿—çš„è®²ï¼Œå®ƒæ— éå°±æ˜¯å®Œæˆä¸€ä»¶äº‹æƒ…é€šç”¨çš„åŠæ³•è€Œå·²ã€‚\n\n# 3ã€ç•…æƒ³ #\n\nå›åˆ°æ­£é¢˜ï¼Œå‡å¦‚æˆ‘ä»¬ä¸æƒ³ä½¿ç”¨è¿‡å¤šçš„ if - else è¯­å¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿ƒä¸­æ¯”è¾ƒç†æƒ³çš„ä»£ç ç¼–å†™æ–¹å¼æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬èƒ½ä¸èƒ½åƒç¼–å†™é…ç½®ä¸€æ ·çš„å»åšè¡¨å•éªŒè¯å‘¢ï¼Ÿå†æ¥ä¸€ä¸ªâ€ä¸€é”®éªŒè¯â€œçš„åŠŸèƒ½ï¼Œæ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿ƒä¸­ç†æƒ³çš„ç¼–å†™ä»£ç çš„æ–¹å¼å¦‚ä¸‹ï¼š\n\n```js\n\n// è·å–è¡¨å•formå…ƒç´ \nvar form = document.getElementById('f1');\n\n// åˆ›å»ºè¡¨å•æ ¡éªŒå®ä¾‹\nvar validation = new Formvalidation(VerifiPolicy);\n// ç¼–å†™æ ¡éªŒé…ç½®\nvalidation.add(form.username, 'isNoEmpty', 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º');\nvalidation.add(form.password, 'minLength: 6', 'å¯†ç é•¿åº¦ä¸èƒ½å°äº6ä¸ªå­—ç¬¦');\nvalidation.add(form.code, 'isMobile', 'è¯·å¡«å†™æ­£ç¡®çš„æ‰‹æœºå·');\n\n// å¼€å§‹æ ¡éªŒï¼Œå¹¶æ¥æ”¶é”™è¯¯ä¿¡æ¯\nvar errorMsg = validation.start();\n\n// å¦‚æœæœ‰é”™è¯¯ä¿¡æ¯è¾“å‡ºï¼Œè¯´æ˜æ ¡éªŒæœªé€šè¿‡\nif(errorMsg){\n\t// åšä¸€äº›å…¶ä»–çš„äº‹\n\treturn false;\n}\n```\n\næ€ä¹ˆæ ·ï¼Ÿæ„Ÿå—æ„Ÿå—ï¼Œæ˜¯ä¸æ˜¯çœ‹ä¸Šå»ä¼˜é›…å¤šäº†ï¼Ÿå¥½äº†ï¼Œæœ‰äº†å¿ƒä¸­çš„ç•…æƒ³ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç›®æ ‡è¿ˆè¿›äº†ï¼Œä¸‹ä¸€æ­¥å°±è¦äº†è§£äº†è§£ä»€ä¹ˆäº‹ç­–ç•¥æ¨¡å¼äº†ã€‚\n\n# 4ã€ç­–ç•¥æ¨¡å¼ #\n\nç­–ç•¥æ¨¡å¼ï¼Œå•çº¯çš„çœ‹å®ƒçš„åå­—â€ç­–ç•¥â€œï¼ŒæŒ‡çš„æ˜¯åšäº‹æƒ…çš„æ–¹æ³•ï¼Œæ¯”å¦‚ä½ ä»åŒ—äº¬åˆ°å“ˆå°”æ»¨ï¼ˆä¸ºä»€ä¹ˆåˆ°å“ˆå°”æ»¨å‘¢ï¼Ÿå› ä¸ºæˆ‘è€å®¶æ˜¯å“ˆå°”æ»¨çš„[å·ç¬‘]ï¼‰ï¼Œä½ å¯ä»¥æœ‰å‡ ç§ç­–ç•¥ä¾›é€‰æ‹©ï¼š\n\n1ã€é£æœºï¼Œå—–å—–å—–ç›´æ¥å°±åˆ°äº†ï¼ŒèŠ‚çœæ—¶é—´ã€‚\n2ã€ç«è½¦ï¼Œå¯ä»¥é€‰æ‹©é«˜é“å‡ºè¡Œï¼Œä¸“ä¸ºé£æœºææƒ§ç—‡è€…æä¾›ã€‚\n3ã€å¾’æ­¥ï¼Œä¸å¤±ä¸ºä¸€ä¸ªé”»ç‚¼èº«ä½“çš„é€‰æ‹©ã€‚\n4ã€other method......\n\næ‰€ä»¥ï¼Œåšä¸€ä»¶äº‹ä½ ä¼šæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ç­–ç•¥ï¼Œè€Œæˆ‘ä»¬ä»Šå¤©è¦è®²çš„ç­–ç•¥æ¨¡å¼ä¹Ÿå°±æ˜¯è¿™ä¸ªæ„æ€ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå°†åšä»€ä¹ˆå’Œè°å»åšç›¸åˆ†ç¦»ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªå®Œæ•´çš„ç­–ç•¥æ¨¡å¼è¦æœ‰ä¸¤ä¸ªç±»ï¼Œä¸€ä¸ªæ˜¯ç­–ç•¥ç±»ï¼Œä¸€ä¸ªæ˜¯ç¯å¢ƒç±»(ä¸»è¦ç±»)ï¼Œç¯å¢ƒç±»æ¥æ”¶è¯·æ±‚ï¼Œä½†ä¸å¤„ç†è¯·æ±‚ï¼Œå®ƒä¼šæŠŠè¯·æ±‚å§”æ‰˜ç»™ç­–ç•¥ç±»ï¼Œè®©ç­–ç•¥ç±»å»å¤„ç†ï¼Œè€Œç­–ç•¥ç±»çš„æ‰©å±•æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œè¿™æ ·ï¼Œä½¿å¾—æˆ‘ä»¬çš„ä»£ç æ˜“äºæ‰©å±•ã€‚\n\nåœ¨è¡¨å•éªŒè¯çš„ä¾‹å­ä¸­ï¼Œå„ç§éªŒè¯çš„æ–¹æ³•ç»„æˆäº†ç­–ç•¥ç±»ï¼Œæ¯”å¦‚ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºç©ºçš„æ–¹æ³•(å¦‚ï¼šisNoEmpty)ï¼Œåˆ¤æ–­æœ€å°é•¿åº¦çš„æ–¹æ³•(å¦‚ï¼šminLength)ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ‰‹æœºå·çš„æ–¹æ³•(isMobule)ç­‰ç­‰ï¼Œä»–ä»¬ç»„æˆäº†ç­–ç•¥ç±»ï¼Œä¾›ç»™ç¯å¢ƒç±»å»å§”æ‰˜è¯·æ±‚ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥å®æˆ˜ä¸€ä¸‹ã€‚\n\n# 5ã€ç¼–å†™ç­–ç•¥ç±» #\n\nç­–ç•¥ç±»å¾ˆç®€å•ï¼Œå®ƒæ˜¯ç”±ä¸€ç»„éªŒè¯æ–¹æ³•ç»„æˆçš„å¯¹è±¡ï¼Œå³ç­–ç•¥å¯¹è±¡\n\n```js\n// ç­–ç•¥å¯¹è±¡\nvar VerifiPolicy = {\n\t// åˆ¤æ–­æ˜¯å¦ä¸ºç©º\n\tisNoEmpty : function(value, errorMsg){\n\t\tif(value == ''){\n\t\t\treturn errorMsg;\n\t\t}\n\t},\n\t// åˆ¤æ–­æœ€å°é•¿åº¦\n\tminLength : function(value, length, errorMsg){\n\t\tif(value.length < length){\n\t\t\treturn errorMsg;\n\t\t}\n\t},\n\t// åˆ¤æ–­æ˜¯å¦ä¸ºæ‰‹æœºå·\n\tisMobile : function(value, errorMsg){\n\t\tif(!/(^1[3|5|8][0-9]{9}$)/.test(value)){\n\t\t\treturn errorMsg;\n\t\t}\n\t}\n\t// å…¶ä»–\n}\n\n```\n\n# 6ã€ç¼–å†™ç¯å¢ƒç±» #\n\næ ¹æ®æˆ‘ä»¬çš„ç•…æƒ³ï¼Œæˆ‘ä»¬ä½¿ç”¨addæ–¹æ³•æ·»åŠ éªŒè¯é…ç½®ï¼Œå¦‚ä¸‹ï¼š\n\n```js\nvalidation.add(form.username, 'isNoEmpty', 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º');\n```\n\naddæ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨å•å­—æ®µï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç­–ç•¥å¯¹è±¡ä¸­ç­–ç•¥æ–¹æ³•çš„åå­—ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯éªŒè¯æœªé€šè¿‡çš„é”™è¯¯ä¿¡æ¯ã€‚\n\nç„¶åä½¿ç”¨ start æ–¹æ³•å¼€å§‹éªŒè¯ï¼Œè‹¥éªŒè¯æœªé€šè¿‡ï¼Œè¿”å›éªŒè¯é”™è¯¯ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š\n\n```js\nvar errorMsg = validation.start();\n```\n\nå¦å¤–ï¼Œå†è§£é‡Šä¸€ä¸‹ä¸‹é¢è¿™å¥ä»£ç ï¼š\n\n```\nvalidation.add(form.password, 'minLength: 6', 'å¯†ç é•¿åº¦ä¸èƒ½å°äº6ä¸ªå­—ç¬¦');\n```\n\naddæ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æˆ‘ä»¬è¯´è¿‡äº†ï¼Œæ˜¯è¦éªŒè¯çš„è¡¨å•å…ƒç´ ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ å†’å·(:) åˆ†å‰²ï¼Œå‰é¢æ˜¯ç­–ç•¥æ–¹æ³•åç§°ï¼Œåé¢æ˜¯ä¼ ç»™è¿™ä¸ªæ–¹æ³•çš„å‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä»ç„¶æ˜¯é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä»¬å¸Œæœ›å®Œæˆè¿™æ ·çš„ä»£ç ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼Œå¦‚ä¸‹ï¼š\n\n```\n// æ„é€ å‡½æ•°\nvar Formvalidation = function(VerifiPolicy){\n\t// ä¿å­˜ç­–ç•¥å¯¹è±¡\n\tthis.strategies = VerifiPolicy;\n\t// éªŒè¯ç¼“å­˜\n\tthis.validationFns = [];\n}\n\n// add æ–¹æ³•\nFormvalidation.prototype.add = function(dom, rule, errorMsg){\n\t\n\tvar ary = rule.split(':');\n\tvar arg = [];\n\tvar self = this;\n\tthis.validationFns.push(function(){\n\t\targ = [];\t// é‡ç½®å‚æ•°\n\t\tvar ruleName = ary[0];\t// ç­–ç•¥å¯¹è±¡æ–¹æ³•å\n\t\t\n\t\t// ç»„è£…å‚æ•°\n\t\targ.push(dom.value);\n\t\tif(ary[1]){\n\t\t\targ.push(ary[1]);\n\t\t}\n\t\targ.push(errorMsg);\n\t\t\n\t\t// è°ƒç”¨ç­–ç•¥å‡½æ•°\n\t\treturn self.strategies[ruleName].apply(dom, arg);\n\t});\n}\n\n// å¼€å§‹éªŒè¯\nFormvalidation.prototype.start = function(){\n\tfor(var i = 0; ; i++){\n\t\tvar msg = this.validationFns[i]();\n\t\tif(msg){\n\t\t\treturn msg;\n\t\t}\n\t}\n}\n```\n\nè‡³æ­¤ï¼Œä¸€ä¸ªæœ€ç®€å•çš„åº”ç”¨å°±å®Œæˆäº†ï¼Œå¦å¤–ä½ è¿˜å¯ä»¥å¯¹è¿™ä¸ªç¯å¢ƒç±»è¿›è¡Œæ‰©å±•ï¼Œæ¯”å¦‚æ”¯æŒå¤é€‰æ¡†ã€å•é€‰æ¡†ç­‰è¡¨å•çš„éªŒè¯ï¼Œè¿˜å¯ä»¥æ”¯æŒä¸€ä¸ªè¡¨å•å¤šè§„åˆ™çš„éªŒè¯æ–¹å¼ï¼Œæ€»ä¹‹ï¼Œåªè¦ä½ è§‰å¾—å¯ä»¥ï¼Œå°±okã€‚ç¨‹åºä¸–ç•Œä»æ¥éƒ½æ¬¢è¿åˆ›é€ ï¼Œå»å‘æŒ¥ä½ çš„æƒ³è±¡å§ã€‚\n\n\n","source":"_posts/2016/02/21/ç­–ç•¥æ¨¡å¼åœ¨è¡¨å•éªŒè¯ä¸­çš„åº”ç”¨.md","raw":"title: ç­–ç•¥æ¨¡å¼åœ¨è¡¨å•éªŒè¯ä¸­çš„åº”ç”¨\ndate: 2016-02-21 19:58:19\ncategories:\n- WebFrontEnd\ntags:\n- è®¾è®¡æ¨¡å¼\n- è¡¨å•éªŒè¯\n---\n\n> åœ¨ä»»ä½•ä¸€ä¸ªç³»ç»Ÿé‡Œé¢ï¼Œå‡ ä¹éƒ½ç¼ºå°‘ä¸äº†æäº¤è¡¨å•çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚æ³¨å†Œã€ç™»é™†ã€ä¸‹è®¢å•ç­‰ç­‰ã€‚è¿™ç¯‡æ–‡ç« å°±é˜è¿°äº†å¦‚ä½•ç¼–å†™çœ‹ç€èˆ’æœçš„è¡¨å•éªŒè¯ä»£ç ã€‚\n\n<!-- more -->\n\n# 1ã€é—®é¢˜ #\n\nç›¸ä¿¡å¤§å®¶å¹³æ—¶å†åšè¡¨å•éªŒè¯çš„æ—¶å€™åŸºæœ¬ä¸å¦‚ä¸‹ä»£ç ç›¸åŒï¼š\n\n```js\nif(input1.value === ''){\n\talert('xxxä¸èƒ½ä¸ºç©º');\n\treturn false;\n}else if(input2.length < 6){\n\talert('xxxæœ€å°‘6ä¸ªå­—ç¬¦');\n\treturn false;\n}else if(...){\n\t...\n\treturn false;\n}\n```\n\nè¿™æ ·ç¼–å†™ä»£ç ï¼Œçš„ç¡®èƒ½å¤Ÿå®Œæˆä¸šåŠ¡çš„éœ€æ±‚ï¼Œèƒ½å¤Ÿå®Œæˆè¡¨å•çš„éªŒè¯ï¼Œä½†æ˜¯å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚ï¼š\n\n> 1ã€ä»£ç ä¸­åŒ…å«å¤ªå¤šçš„ if - else è¯­å¥ï¼Œå¦‚æœéªŒè¯è§„åˆ™è¾ƒå¤šçš„è¯ï¼Œçœ‹ä¸Šå»å¤ªè¿‡äºæ¶å¿ƒ......\n\n> 2ã€éªŒè¯è§„åˆ™ä¸å¯å¤ç”¨ï¼Œå¦‚æœæˆ‘ä»¬å¦å¤–ä¸€ä¸ªé¡µé¢ä¹Ÿéœ€è¦éªŒè¯ç›¸ä¼¼çš„è¡¨å•ï¼Œæˆ‘ä»¬å”¯ä¸€çš„åšæ³•å°±æ˜¯ï¼Œå¤åˆ¶ä¸€ä»½ï¼Œç²˜è´´è¿‡å»......\n\n> 3ã€ä»£ç ä¸æ˜“ç»´æŠ¤ï¼Œä¸éœ€è¦è§£é‡Šäº†å§......\n\n# 2ã€è§£å†³åŠæ³• #\n\næ‰€è°“åŠæ³•æ€»æ¯”é—®é¢˜å¤šï¼ŒåŠæ³•æ˜¯æœ‰çš„ï¼Œæ¯”å¦‚é©¬ä¸Šè¦è®²è§£çš„ä½¿ç”¨ ç­–ç•¥æ¨¡å¼ ä½¿è¡¨å•éªŒè¯æ›´ä¼˜é›…æ›´å®Œç¾ï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šäººå¾ˆæŠµè§¦è®¾è®¡æ¨¡å¼ï¼Œä¸€å¬è®¾è®¡æ¨¡å¼å°±è§‰å¾—å¾ˆé¥è¿œï¼Œè§‰å¾—è‡ªå·±åœ¨å·¥ä½œä¸­å¾ˆå°‘ç”¨åˆ°è®¾è®¡æ¨¡å¼ï¼Œé‚£ä¹ˆä½ å°±é”™äº†ï¼Œç‰¹åˆ«æ˜¯jsè¿™ç§çµæ´»çš„è¯­è¨€ï¼Œæœ‰çš„æ—¶å€™ä½ å·²ç»åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨äº†è®¾è®¡æ¨¡å¼ï¼Œåªæ˜¯ä½ ä¸çŸ¥é“è€Œå·²ã€‚æ›´å¤šå…³äºè®¾è®¡æ¨¡å¼çš„ä¸œè¥¿ï¼Œä»¥åä¼šé™†ç»­å†™åšå®¢æè¿°ï¼Œè¿™é‡Œåªå¸Œæœ›å¤§å®¶æŠ›å¼ƒè®¾è®¡æ¨¡å¼ç¥ç§˜çš„æ„Ÿè§‰ï¼Œé€šä¿—çš„è®²ï¼Œå®ƒæ— éå°±æ˜¯å®Œæˆä¸€ä»¶äº‹æƒ…é€šç”¨çš„åŠæ³•è€Œå·²ã€‚\n\n# 3ã€ç•…æƒ³ #\n\nå›åˆ°æ­£é¢˜ï¼Œå‡å¦‚æˆ‘ä»¬ä¸æƒ³ä½¿ç”¨è¿‡å¤šçš„ if - else è¯­å¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿ƒä¸­æ¯”è¾ƒç†æƒ³çš„ä»£ç ç¼–å†™æ–¹å¼æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬èƒ½ä¸èƒ½åƒç¼–å†™é…ç½®ä¸€æ ·çš„å»åšè¡¨å•éªŒè¯å‘¢ï¼Ÿå†æ¥ä¸€ä¸ªâ€ä¸€é”®éªŒè¯â€œçš„åŠŸèƒ½ï¼Œæ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿ƒä¸­ç†æƒ³çš„ç¼–å†™ä»£ç çš„æ–¹å¼å¦‚ä¸‹ï¼š\n\n```js\n\n// è·å–è¡¨å•formå…ƒç´ \nvar form = document.getElementById('f1');\n\n// åˆ›å»ºè¡¨å•æ ¡éªŒå®ä¾‹\nvar validation = new Formvalidation(VerifiPolicy);\n// ç¼–å†™æ ¡éªŒé…ç½®\nvalidation.add(form.username, 'isNoEmpty', 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º');\nvalidation.add(form.password, 'minLength: 6', 'å¯†ç é•¿åº¦ä¸èƒ½å°äº6ä¸ªå­—ç¬¦');\nvalidation.add(form.code, 'isMobile', 'è¯·å¡«å†™æ­£ç¡®çš„æ‰‹æœºå·');\n\n// å¼€å§‹æ ¡éªŒï¼Œå¹¶æ¥æ”¶é”™è¯¯ä¿¡æ¯\nvar errorMsg = validation.start();\n\n// å¦‚æœæœ‰é”™è¯¯ä¿¡æ¯è¾“å‡ºï¼Œè¯´æ˜æ ¡éªŒæœªé€šè¿‡\nif(errorMsg){\n\t// åšä¸€äº›å…¶ä»–çš„äº‹\n\treturn false;\n}\n```\n\næ€ä¹ˆæ ·ï¼Ÿæ„Ÿå—æ„Ÿå—ï¼Œæ˜¯ä¸æ˜¯çœ‹ä¸Šå»ä¼˜é›…å¤šäº†ï¼Ÿå¥½äº†ï¼Œæœ‰äº†å¿ƒä¸­çš„ç•…æƒ³ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç›®æ ‡è¿ˆè¿›äº†ï¼Œä¸‹ä¸€æ­¥å°±è¦äº†è§£äº†è§£ä»€ä¹ˆäº‹ç­–ç•¥æ¨¡å¼äº†ã€‚\n\n# 4ã€ç­–ç•¥æ¨¡å¼ #\n\nç­–ç•¥æ¨¡å¼ï¼Œå•çº¯çš„çœ‹å®ƒçš„åå­—â€ç­–ç•¥â€œï¼ŒæŒ‡çš„æ˜¯åšäº‹æƒ…çš„æ–¹æ³•ï¼Œæ¯”å¦‚ä½ ä»åŒ—äº¬åˆ°å“ˆå°”æ»¨ï¼ˆä¸ºä»€ä¹ˆåˆ°å“ˆå°”æ»¨å‘¢ï¼Ÿå› ä¸ºæˆ‘è€å®¶æ˜¯å“ˆå°”æ»¨çš„[å·ç¬‘]ï¼‰ï¼Œä½ å¯ä»¥æœ‰å‡ ç§ç­–ç•¥ä¾›é€‰æ‹©ï¼š\n\n1ã€é£æœºï¼Œå—–å—–å—–ç›´æ¥å°±åˆ°äº†ï¼ŒèŠ‚çœæ—¶é—´ã€‚\n2ã€ç«è½¦ï¼Œå¯ä»¥é€‰æ‹©é«˜é“å‡ºè¡Œï¼Œä¸“ä¸ºé£æœºææƒ§ç—‡è€…æä¾›ã€‚\n3ã€å¾’æ­¥ï¼Œä¸å¤±ä¸ºä¸€ä¸ªé”»ç‚¼èº«ä½“çš„é€‰æ‹©ã€‚\n4ã€other method......\n\næ‰€ä»¥ï¼Œåšä¸€ä»¶äº‹ä½ ä¼šæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ç­–ç•¥ï¼Œè€Œæˆ‘ä»¬ä»Šå¤©è¦è®²çš„ç­–ç•¥æ¨¡å¼ä¹Ÿå°±æ˜¯è¿™ä¸ªæ„æ€ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå°†åšä»€ä¹ˆå’Œè°å»åšç›¸åˆ†ç¦»ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªå®Œæ•´çš„ç­–ç•¥æ¨¡å¼è¦æœ‰ä¸¤ä¸ªç±»ï¼Œä¸€ä¸ªæ˜¯ç­–ç•¥ç±»ï¼Œä¸€ä¸ªæ˜¯ç¯å¢ƒç±»(ä¸»è¦ç±»)ï¼Œç¯å¢ƒç±»æ¥æ”¶è¯·æ±‚ï¼Œä½†ä¸å¤„ç†è¯·æ±‚ï¼Œå®ƒä¼šæŠŠè¯·æ±‚å§”æ‰˜ç»™ç­–ç•¥ç±»ï¼Œè®©ç­–ç•¥ç±»å»å¤„ç†ï¼Œè€Œç­–ç•¥ç±»çš„æ‰©å±•æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œè¿™æ ·ï¼Œä½¿å¾—æˆ‘ä»¬çš„ä»£ç æ˜“äºæ‰©å±•ã€‚\n\nåœ¨è¡¨å•éªŒè¯çš„ä¾‹å­ä¸­ï¼Œå„ç§éªŒè¯çš„æ–¹æ³•ç»„æˆäº†ç­–ç•¥ç±»ï¼Œæ¯”å¦‚ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºç©ºçš„æ–¹æ³•(å¦‚ï¼šisNoEmpty)ï¼Œåˆ¤æ–­æœ€å°é•¿åº¦çš„æ–¹æ³•(å¦‚ï¼šminLength)ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ‰‹æœºå·çš„æ–¹æ³•(isMobule)ç­‰ç­‰ï¼Œä»–ä»¬ç»„æˆäº†ç­–ç•¥ç±»ï¼Œä¾›ç»™ç¯å¢ƒç±»å»å§”æ‰˜è¯·æ±‚ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥å®æˆ˜ä¸€ä¸‹ã€‚\n\n# 5ã€ç¼–å†™ç­–ç•¥ç±» #\n\nç­–ç•¥ç±»å¾ˆç®€å•ï¼Œå®ƒæ˜¯ç”±ä¸€ç»„éªŒè¯æ–¹æ³•ç»„æˆçš„å¯¹è±¡ï¼Œå³ç­–ç•¥å¯¹è±¡\n\n```js\n// ç­–ç•¥å¯¹è±¡\nvar VerifiPolicy = {\n\t// åˆ¤æ–­æ˜¯å¦ä¸ºç©º\n\tisNoEmpty : function(value, errorMsg){\n\t\tif(value == ''){\n\t\t\treturn errorMsg;\n\t\t}\n\t},\n\t// åˆ¤æ–­æœ€å°é•¿åº¦\n\tminLength : function(value, length, errorMsg){\n\t\tif(value.length < length){\n\t\t\treturn errorMsg;\n\t\t}\n\t},\n\t// åˆ¤æ–­æ˜¯å¦ä¸ºæ‰‹æœºå·\n\tisMobile : function(value, errorMsg){\n\t\tif(!/(^1[3|5|8][0-9]{9}$)/.test(value)){\n\t\t\treturn errorMsg;\n\t\t}\n\t}\n\t// å…¶ä»–\n}\n\n```\n\n# 6ã€ç¼–å†™ç¯å¢ƒç±» #\n\næ ¹æ®æˆ‘ä»¬çš„ç•…æƒ³ï¼Œæˆ‘ä»¬ä½¿ç”¨addæ–¹æ³•æ·»åŠ éªŒè¯é…ç½®ï¼Œå¦‚ä¸‹ï¼š\n\n```js\nvalidation.add(form.username, 'isNoEmpty', 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º');\n```\n\naddæ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨å•å­—æ®µï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç­–ç•¥å¯¹è±¡ä¸­ç­–ç•¥æ–¹æ³•çš„åå­—ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯éªŒè¯æœªé€šè¿‡çš„é”™è¯¯ä¿¡æ¯ã€‚\n\nç„¶åä½¿ç”¨ start æ–¹æ³•å¼€å§‹éªŒè¯ï¼Œè‹¥éªŒè¯æœªé€šè¿‡ï¼Œè¿”å›éªŒè¯é”™è¯¯ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š\n\n```js\nvar errorMsg = validation.start();\n```\n\nå¦å¤–ï¼Œå†è§£é‡Šä¸€ä¸‹ä¸‹é¢è¿™å¥ä»£ç ï¼š\n\n```\nvalidation.add(form.password, 'minLength: 6', 'å¯†ç é•¿åº¦ä¸èƒ½å°äº6ä¸ªå­—ç¬¦');\n```\n\naddæ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æˆ‘ä»¬è¯´è¿‡äº†ï¼Œæ˜¯è¦éªŒè¯çš„è¡¨å•å…ƒç´ ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ å†’å·(:) åˆ†å‰²ï¼Œå‰é¢æ˜¯ç­–ç•¥æ–¹æ³•åç§°ï¼Œåé¢æ˜¯ä¼ ç»™è¿™ä¸ªæ–¹æ³•çš„å‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä»ç„¶æ˜¯é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä»¬å¸Œæœ›å®Œæˆè¿™æ ·çš„ä»£ç ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼Œå¦‚ä¸‹ï¼š\n\n```\n// æ„é€ å‡½æ•°\nvar Formvalidation = function(VerifiPolicy){\n\t// ä¿å­˜ç­–ç•¥å¯¹è±¡\n\tthis.strategies = VerifiPolicy;\n\t// éªŒè¯ç¼“å­˜\n\tthis.validationFns = [];\n}\n\n// add æ–¹æ³•\nFormvalidation.prototype.add = function(dom, rule, errorMsg){\n\t\n\tvar ary = rule.split(':');\n\tvar arg = [];\n\tvar self = this;\n\tthis.validationFns.push(function(){\n\t\targ = [];\t// é‡ç½®å‚æ•°\n\t\tvar ruleName = ary[0];\t// ç­–ç•¥å¯¹è±¡æ–¹æ³•å\n\t\t\n\t\t// ç»„è£…å‚æ•°\n\t\targ.push(dom.value);\n\t\tif(ary[1]){\n\t\t\targ.push(ary[1]);\n\t\t}\n\t\targ.push(errorMsg);\n\t\t\n\t\t// è°ƒç”¨ç­–ç•¥å‡½æ•°\n\t\treturn self.strategies[ruleName].apply(dom, arg);\n\t});\n}\n\n// å¼€å§‹éªŒè¯\nFormvalidation.prototype.start = function(){\n\tfor(var i = 0; ; i++){\n\t\tvar msg = this.validationFns[i]();\n\t\tif(msg){\n\t\t\treturn msg;\n\t\t}\n\t}\n}\n```\n\nè‡³æ­¤ï¼Œä¸€ä¸ªæœ€ç®€å•çš„åº”ç”¨å°±å®Œæˆäº†ï¼Œå¦å¤–ä½ è¿˜å¯ä»¥å¯¹è¿™ä¸ªç¯å¢ƒç±»è¿›è¡Œæ‰©å±•ï¼Œæ¯”å¦‚æ”¯æŒå¤é€‰æ¡†ã€å•é€‰æ¡†ç­‰è¡¨å•çš„éªŒè¯ï¼Œè¿˜å¯ä»¥æ”¯æŒä¸€ä¸ªè¡¨å•å¤šè§„åˆ™çš„éªŒè¯æ–¹å¼ï¼Œæ€»ä¹‹ï¼Œåªè¦ä½ è§‰å¾—å¯ä»¥ï¼Œå°±okã€‚ç¨‹åºä¸–ç•Œä»æ¥éƒ½æ¬¢è¿åˆ›é€ ï¼Œå»å‘æŒ¥ä½ çš„æƒ³è±¡å§ã€‚\n\n\n","slug":"ç­–ç•¥æ¨¡å¼åœ¨è¡¨å•éªŒè¯ä¸­çš„åº”ç”¨","published":1,"updated":"2016-02-22T02:22:26.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx51w000x47fy6ff58evv","content":"<blockquote>\n<p>åœ¨ä»»ä½•ä¸€ä¸ªç³»ç»Ÿé‡Œé¢ï¼Œå‡ ä¹éƒ½ç¼ºå°‘ä¸äº†æäº¤è¡¨å•çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚æ³¨å†Œã€ç™»é™†ã€ä¸‹è®¢å•ç­‰ç­‰ã€‚è¿™ç¯‡æ–‡ç« å°±é˜è¿°äº†å¦‚ä½•ç¼–å†™çœ‹ç€èˆ’æœçš„è¡¨å•éªŒè¯ä»£ç ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n<h1 id=\"1ã€é—®é¢˜\"><a href=\"#1ã€é—®é¢˜\" class=\"headerlink\" title=\"1ã€é—®é¢˜\"></a>1ã€é—®é¢˜</h1><p>ç›¸ä¿¡å¤§å®¶å¹³æ—¶å†åšè¡¨å•éªŒè¯çš„æ—¶å€™åŸºæœ¬ä¸å¦‚ä¸‹ä»£ç ç›¸åŒï¼š</p>\n<pre><code class=\"js\">if(input1.value === &#39;&#39;){\n    alert(&#39;xxxä¸èƒ½ä¸ºç©º&#39;);\n    return false;\n}else if(input2.length &lt; 6){\n    alert(&#39;xxxæœ€å°‘6ä¸ªå­—ç¬¦&#39;);\n    return false;\n}else if(...){\n    ...\n    return false;\n}\n</code></pre>\n<p>è¿™æ ·ç¼–å†™ä»£ç ï¼Œçš„ç¡®èƒ½å¤Ÿå®Œæˆä¸šåŠ¡çš„éœ€æ±‚ï¼Œèƒ½å¤Ÿå®Œæˆè¡¨å•çš„éªŒè¯ï¼Œä½†æ˜¯å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p>\n<blockquote>\n<p>1ã€ä»£ç ä¸­åŒ…å«å¤ªå¤šçš„ if - else è¯­å¥ï¼Œå¦‚æœéªŒè¯è§„åˆ™è¾ƒå¤šçš„è¯ï¼Œçœ‹ä¸Šå»å¤ªè¿‡äºæ¶å¿ƒâ€¦â€¦</p>\n<p>2ã€éªŒè¯è§„åˆ™ä¸å¯å¤ç”¨ï¼Œå¦‚æœæˆ‘ä»¬å¦å¤–ä¸€ä¸ªé¡µé¢ä¹Ÿéœ€è¦éªŒè¯ç›¸ä¼¼çš„è¡¨å•ï¼Œæˆ‘ä»¬å”¯ä¸€çš„åšæ³•å°±æ˜¯ï¼Œå¤åˆ¶ä¸€ä»½ï¼Œç²˜è´´è¿‡å»â€¦â€¦</p>\n<p>3ã€ä»£ç ä¸æ˜“ç»´æŠ¤ï¼Œä¸éœ€è¦è§£é‡Šäº†å§â€¦â€¦</p>\n</blockquote>\n<h1 id=\"2ã€è§£å†³åŠæ³•\"><a href=\"#2ã€è§£å†³åŠæ³•\" class=\"headerlink\" title=\"2ã€è§£å†³åŠæ³•\"></a>2ã€è§£å†³åŠæ³•</h1><p>æ‰€è°“åŠæ³•æ€»æ¯”é—®é¢˜å¤šï¼ŒåŠæ³•æ˜¯æœ‰çš„ï¼Œæ¯”å¦‚é©¬ä¸Šè¦è®²è§£çš„ä½¿ç”¨ ç­–ç•¥æ¨¡å¼ ä½¿è¡¨å•éªŒè¯æ›´ä¼˜é›…æ›´å®Œç¾ï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šäººå¾ˆæŠµè§¦è®¾è®¡æ¨¡å¼ï¼Œä¸€å¬è®¾è®¡æ¨¡å¼å°±è§‰å¾—å¾ˆé¥è¿œï¼Œè§‰å¾—è‡ªå·±åœ¨å·¥ä½œä¸­å¾ˆå°‘ç”¨åˆ°è®¾è®¡æ¨¡å¼ï¼Œé‚£ä¹ˆä½ å°±é”™äº†ï¼Œç‰¹åˆ«æ˜¯jsè¿™ç§çµæ´»çš„è¯­è¨€ï¼Œæœ‰çš„æ—¶å€™ä½ å·²ç»åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨äº†è®¾è®¡æ¨¡å¼ï¼Œåªæ˜¯ä½ ä¸çŸ¥é“è€Œå·²ã€‚æ›´å¤šå…³äºè®¾è®¡æ¨¡å¼çš„ä¸œè¥¿ï¼Œä»¥åä¼šé™†ç»­å†™åšå®¢æè¿°ï¼Œè¿™é‡Œåªå¸Œæœ›å¤§å®¶æŠ›å¼ƒè®¾è®¡æ¨¡å¼ç¥ç§˜çš„æ„Ÿè§‰ï¼Œé€šä¿—çš„è®²ï¼Œå®ƒæ— éå°±æ˜¯å®Œæˆä¸€ä»¶äº‹æƒ…é€šç”¨çš„åŠæ³•è€Œå·²ã€‚</p>\n<h1 id=\"3ã€ç•…æƒ³\"><a href=\"#3ã€ç•…æƒ³\" class=\"headerlink\" title=\"3ã€ç•…æƒ³\"></a>3ã€ç•…æƒ³</h1><p>å›åˆ°æ­£é¢˜ï¼Œå‡å¦‚æˆ‘ä»¬ä¸æƒ³ä½¿ç”¨è¿‡å¤šçš„ if - else è¯­å¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿ƒä¸­æ¯”è¾ƒç†æƒ³çš„ä»£ç ç¼–å†™æ–¹å¼æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬èƒ½ä¸èƒ½åƒç¼–å†™é…ç½®ä¸€æ ·çš„å»åšè¡¨å•éªŒè¯å‘¢ï¼Ÿå†æ¥ä¸€ä¸ªâ€ä¸€é”®éªŒè¯â€œçš„åŠŸèƒ½ï¼Œæ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿ƒä¸­ç†æƒ³çš„ç¼–å†™ä»£ç çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">\n// è·å–è¡¨å•formå…ƒç´ \nvar form = document.getElementById(&#39;f1&#39;);\n\n// åˆ›å»ºè¡¨å•æ ¡éªŒå®ä¾‹\nvar validation = new Formvalidation(VerifiPolicy);\n// ç¼–å†™æ ¡éªŒé…ç½®\nvalidation.add(form.username, &#39;isNoEmpty&#39;, &#39;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&#39;);\nvalidation.add(form.password, &#39;minLength: 6&#39;, &#39;å¯†ç é•¿åº¦ä¸èƒ½å°äº6ä¸ªå­—ç¬¦&#39;);\nvalidation.add(form.code, &#39;isMobile&#39;, &#39;è¯·å¡«å†™æ­£ç¡®çš„æ‰‹æœºå·&#39;);\n\n// å¼€å§‹æ ¡éªŒï¼Œå¹¶æ¥æ”¶é”™è¯¯ä¿¡æ¯\nvar errorMsg = validation.start();\n\n// å¦‚æœæœ‰é”™è¯¯ä¿¡æ¯è¾“å‡ºï¼Œè¯´æ˜æ ¡éªŒæœªé€šè¿‡\nif(errorMsg){\n    // åšä¸€äº›å…¶ä»–çš„äº‹\n    return false;\n}\n</code></pre>\n<p>æ€ä¹ˆæ ·ï¼Ÿæ„Ÿå—æ„Ÿå—ï¼Œæ˜¯ä¸æ˜¯çœ‹ä¸Šå»ä¼˜é›…å¤šäº†ï¼Ÿå¥½äº†ï¼Œæœ‰äº†å¿ƒä¸­çš„ç•…æƒ³ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç›®æ ‡è¿ˆè¿›äº†ï¼Œä¸‹ä¸€æ­¥å°±è¦äº†è§£äº†è§£ä»€ä¹ˆäº‹ç­–ç•¥æ¨¡å¼äº†ã€‚</p>\n<h1 id=\"4ã€ç­–ç•¥æ¨¡å¼\"><a href=\"#4ã€ç­–ç•¥æ¨¡å¼\" class=\"headerlink\" title=\"4ã€ç­–ç•¥æ¨¡å¼\"></a>4ã€ç­–ç•¥æ¨¡å¼</h1><p>ç­–ç•¥æ¨¡å¼ï¼Œå•çº¯çš„çœ‹å®ƒçš„åå­—â€ç­–ç•¥â€œï¼ŒæŒ‡çš„æ˜¯åšäº‹æƒ…çš„æ–¹æ³•ï¼Œæ¯”å¦‚ä½ ä»åŒ—äº¬åˆ°å“ˆå°”æ»¨ï¼ˆä¸ºä»€ä¹ˆåˆ°å“ˆå°”æ»¨å‘¢ï¼Ÿå› ä¸ºæˆ‘è€å®¶æ˜¯å“ˆå°”æ»¨çš„[å·ç¬‘]ï¼‰ï¼Œä½ å¯ä»¥æœ‰å‡ ç§ç­–ç•¥ä¾›é€‰æ‹©ï¼š</p>\n<p>1ã€é£æœºï¼Œå—–å—–å—–ç›´æ¥å°±åˆ°äº†ï¼ŒèŠ‚çœæ—¶é—´ã€‚<br>2ã€ç«è½¦ï¼Œå¯ä»¥é€‰æ‹©é«˜é“å‡ºè¡Œï¼Œä¸“ä¸ºé£æœºææƒ§ç—‡è€…æä¾›ã€‚<br>3ã€å¾’æ­¥ï¼Œä¸å¤±ä¸ºä¸€ä¸ªé”»ç‚¼èº«ä½“çš„é€‰æ‹©ã€‚<br>4ã€other methodâ€¦â€¦</p>\n<p>æ‰€ä»¥ï¼Œåšä¸€ä»¶äº‹ä½ ä¼šæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ç­–ç•¥ï¼Œè€Œæˆ‘ä»¬ä»Šå¤©è¦è®²çš„ç­–ç•¥æ¨¡å¼ä¹Ÿå°±æ˜¯è¿™ä¸ªæ„æ€ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå°†åšä»€ä¹ˆå’Œè°å»åšç›¸åˆ†ç¦»ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªå®Œæ•´çš„ç­–ç•¥æ¨¡å¼è¦æœ‰ä¸¤ä¸ªç±»ï¼Œä¸€ä¸ªæ˜¯ç­–ç•¥ç±»ï¼Œä¸€ä¸ªæ˜¯ç¯å¢ƒç±»(ä¸»è¦ç±»)ï¼Œç¯å¢ƒç±»æ¥æ”¶è¯·æ±‚ï¼Œä½†ä¸å¤„ç†è¯·æ±‚ï¼Œå®ƒä¼šæŠŠè¯·æ±‚å§”æ‰˜ç»™ç­–ç•¥ç±»ï¼Œè®©ç­–ç•¥ç±»å»å¤„ç†ï¼Œè€Œç­–ç•¥ç±»çš„æ‰©å±•æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œè¿™æ ·ï¼Œä½¿å¾—æˆ‘ä»¬çš„ä»£ç æ˜“äºæ‰©å±•ã€‚</p>\n<p>åœ¨è¡¨å•éªŒè¯çš„ä¾‹å­ä¸­ï¼Œå„ç§éªŒè¯çš„æ–¹æ³•ç»„æˆäº†ç­–ç•¥ç±»ï¼Œæ¯”å¦‚ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºç©ºçš„æ–¹æ³•(å¦‚ï¼šisNoEmpty)ï¼Œåˆ¤æ–­æœ€å°é•¿åº¦çš„æ–¹æ³•(å¦‚ï¼šminLength)ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ‰‹æœºå·çš„æ–¹æ³•(isMobule)ç­‰ç­‰ï¼Œä»–ä»¬ç»„æˆäº†ç­–ç•¥ç±»ï¼Œä¾›ç»™ç¯å¢ƒç±»å»å§”æ‰˜è¯·æ±‚ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥å®æˆ˜ä¸€ä¸‹ã€‚</p>\n<h1 id=\"5ã€ç¼–å†™ç­–ç•¥ç±»\"><a href=\"#5ã€ç¼–å†™ç­–ç•¥ç±»\" class=\"headerlink\" title=\"5ã€ç¼–å†™ç­–ç•¥ç±»\"></a>5ã€ç¼–å†™ç­–ç•¥ç±»</h1><p>ç­–ç•¥ç±»å¾ˆç®€å•ï¼Œå®ƒæ˜¯ç”±ä¸€ç»„éªŒè¯æ–¹æ³•ç»„æˆçš„å¯¹è±¡ï¼Œå³ç­–ç•¥å¯¹è±¡</p>\n<pre><code class=\"js\">// ç­–ç•¥å¯¹è±¡\nvar VerifiPolicy = {\n    // åˆ¤æ–­æ˜¯å¦ä¸ºç©º\n    isNoEmpty : function(value, errorMsg){\n        if(value == &#39;&#39;){\n            return errorMsg;\n        }\n    },\n    // åˆ¤æ–­æœ€å°é•¿åº¦\n    minLength : function(value, length, errorMsg){\n        if(value.length &lt; length){\n            return errorMsg;\n        }\n    },\n    // åˆ¤æ–­æ˜¯å¦ä¸ºæ‰‹æœºå·\n    isMobile : function(value, errorMsg){\n        if(!/(^1[3|5|8][0-9]{9}$)/.test(value)){\n            return errorMsg;\n        }\n    }\n    // å…¶ä»–\n}\n</code></pre>\n<h1 id=\"6ã€ç¼–å†™ç¯å¢ƒç±»\"><a href=\"#6ã€ç¼–å†™ç¯å¢ƒç±»\" class=\"headerlink\" title=\"6ã€ç¼–å†™ç¯å¢ƒç±»\"></a>6ã€ç¼–å†™ç¯å¢ƒç±»</h1><p>æ ¹æ®æˆ‘ä»¬çš„ç•…æƒ³ï¼Œæˆ‘ä»¬ä½¿ç”¨addæ–¹æ³•æ·»åŠ éªŒè¯é…ç½®ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">validation.add(form.username, &#39;isNoEmpty&#39;, &#39;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&#39;);\n</code></pre>\n<p>addæ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨å•å­—æ®µï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç­–ç•¥å¯¹è±¡ä¸­ç­–ç•¥æ–¹æ³•çš„åå­—ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯éªŒè¯æœªé€šè¿‡çš„é”™è¯¯ä¿¡æ¯ã€‚</p>\n<p>ç„¶åä½¿ç”¨ start æ–¹æ³•å¼€å§‹éªŒè¯ï¼Œè‹¥éªŒè¯æœªé€šè¿‡ï¼Œè¿”å›éªŒè¯é”™è¯¯ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">var errorMsg = validation.start();\n</code></pre>\n<p>å¦å¤–ï¼Œå†è§£é‡Šä¸€ä¸‹ä¸‹é¢è¿™å¥ä»£ç ï¼š</p>\n<pre><code>validation.add(form.password, &#39;minLength: 6&#39;, &#39;å¯†ç é•¿åº¦ä¸èƒ½å°äº6ä¸ªå­—ç¬¦&#39;);\n</code></pre><p>addæ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æˆ‘ä»¬è¯´è¿‡äº†ï¼Œæ˜¯è¦éªŒè¯çš„è¡¨å•å…ƒç´ ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ å†’å·(:) åˆ†å‰²ï¼Œå‰é¢æ˜¯ç­–ç•¥æ–¹æ³•åç§°ï¼Œåé¢æ˜¯ä¼ ç»™è¿™ä¸ªæ–¹æ³•çš„å‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä»ç„¶æ˜¯é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä»¬å¸Œæœ›å®Œæˆè¿™æ ·çš„ä»£ç ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>// æ„é€ å‡½æ•°\nvar Formvalidation = function(VerifiPolicy){\n    // ä¿å­˜ç­–ç•¥å¯¹è±¡\n    this.strategies = VerifiPolicy;\n    // éªŒè¯ç¼“å­˜\n    this.validationFns = [];\n}\n\n// add æ–¹æ³•\nFormvalidation.prototype.add = function(dom, rule, errorMsg){\n\n    var ary = rule.split(&#39;:&#39;);\n    var arg = [];\n    var self = this;\n    this.validationFns.push(function(){\n        arg = [];    // é‡ç½®å‚æ•°\n        var ruleName = ary[0];    // ç­–ç•¥å¯¹è±¡æ–¹æ³•å\n\n        // ç»„è£…å‚æ•°\n        arg.push(dom.value);\n        if(ary[1]){\n            arg.push(ary[1]);\n        }\n        arg.push(errorMsg);\n\n        // è°ƒç”¨ç­–ç•¥å‡½æ•°\n        return self.strategies[ruleName].apply(dom, arg);\n    });\n}\n\n// å¼€å§‹éªŒè¯\nFormvalidation.prototype.start = function(){\n    for(var i = 0; ; i++){\n        var msg = this.validationFns[i]();\n        if(msg){\n            return msg;\n        }\n    }\n}\n</code></pre><p>è‡³æ­¤ï¼Œä¸€ä¸ªæœ€ç®€å•çš„åº”ç”¨å°±å®Œæˆäº†ï¼Œå¦å¤–ä½ è¿˜å¯ä»¥å¯¹è¿™ä¸ªç¯å¢ƒç±»è¿›è¡Œæ‰©å±•ï¼Œæ¯”å¦‚æ”¯æŒå¤é€‰æ¡†ã€å•é€‰æ¡†ç­‰è¡¨å•çš„éªŒè¯ï¼Œè¿˜å¯ä»¥æ”¯æŒä¸€ä¸ªè¡¨å•å¤šè§„åˆ™çš„éªŒè¯æ–¹å¼ï¼Œæ€»ä¹‹ï¼Œåªè¦ä½ è§‰å¾—å¯ä»¥ï¼Œå°±okã€‚ç¨‹åºä¸–ç•Œä»æ¥éƒ½æ¬¢è¿åˆ›é€ ï¼Œå»å‘æŒ¥ä½ çš„æƒ³è±¡å§ã€‚</p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>åœ¨ä»»ä½•ä¸€ä¸ªç³»ç»Ÿé‡Œé¢ï¼Œå‡ ä¹éƒ½ç¼ºå°‘ä¸äº†æäº¤è¡¨å•çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚æ³¨å†Œã€ç™»é™†ã€ä¸‹è®¢å•ç­‰ç­‰ã€‚è¿™ç¯‡æ–‡ç« å°±é˜è¿°äº†å¦‚ä½•ç¼–å†™çœ‹ç€èˆ’æœçš„è¡¨å•éªŒè¯ä»£ç ã€‚</p>\n</blockquote>","more":"<h1 id=\"1ã€é—®é¢˜\"><a href=\"#1ã€é—®é¢˜\" class=\"headerlink\" title=\"1ã€é—®é¢˜\"></a>1ã€é—®é¢˜</h1><p>ç›¸ä¿¡å¤§å®¶å¹³æ—¶å†åšè¡¨å•éªŒè¯çš„æ—¶å€™åŸºæœ¬ä¸å¦‚ä¸‹ä»£ç ç›¸åŒï¼š</p>\n<pre><code class=\"js\">if(input1.value === &#39;&#39;){\n    alert(&#39;xxxä¸èƒ½ä¸ºç©º&#39;);\n    return false;\n}else if(input2.length &lt; 6){\n    alert(&#39;xxxæœ€å°‘6ä¸ªå­—ç¬¦&#39;);\n    return false;\n}else if(...){\n    ...\n    return false;\n}\n</code></pre>\n<p>è¿™æ ·ç¼–å†™ä»£ç ï¼Œçš„ç¡®èƒ½å¤Ÿå®Œæˆä¸šåŠ¡çš„éœ€æ±‚ï¼Œèƒ½å¤Ÿå®Œæˆè¡¨å•çš„éªŒè¯ï¼Œä½†æ˜¯å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p>\n<blockquote>\n<p>1ã€ä»£ç ä¸­åŒ…å«å¤ªå¤šçš„ if - else è¯­å¥ï¼Œå¦‚æœéªŒè¯è§„åˆ™è¾ƒå¤šçš„è¯ï¼Œçœ‹ä¸Šå»å¤ªè¿‡äºæ¶å¿ƒâ€¦â€¦</p>\n<p>2ã€éªŒè¯è§„åˆ™ä¸å¯å¤ç”¨ï¼Œå¦‚æœæˆ‘ä»¬å¦å¤–ä¸€ä¸ªé¡µé¢ä¹Ÿéœ€è¦éªŒè¯ç›¸ä¼¼çš„è¡¨å•ï¼Œæˆ‘ä»¬å”¯ä¸€çš„åšæ³•å°±æ˜¯ï¼Œå¤åˆ¶ä¸€ä»½ï¼Œç²˜è´´è¿‡å»â€¦â€¦</p>\n<p>3ã€ä»£ç ä¸æ˜“ç»´æŠ¤ï¼Œä¸éœ€è¦è§£é‡Šäº†å§â€¦â€¦</p>\n</blockquote>\n<h1 id=\"2ã€è§£å†³åŠæ³•\"><a href=\"#2ã€è§£å†³åŠæ³•\" class=\"headerlink\" title=\"2ã€è§£å†³åŠæ³•\"></a>2ã€è§£å†³åŠæ³•</h1><p>æ‰€è°“åŠæ³•æ€»æ¯”é—®é¢˜å¤šï¼ŒåŠæ³•æ˜¯æœ‰çš„ï¼Œæ¯”å¦‚é©¬ä¸Šè¦è®²è§£çš„ä½¿ç”¨ ç­–ç•¥æ¨¡å¼ ä½¿è¡¨å•éªŒè¯æ›´ä¼˜é›…æ›´å®Œç¾ï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šäººå¾ˆæŠµè§¦è®¾è®¡æ¨¡å¼ï¼Œä¸€å¬è®¾è®¡æ¨¡å¼å°±è§‰å¾—å¾ˆé¥è¿œï¼Œè§‰å¾—è‡ªå·±åœ¨å·¥ä½œä¸­å¾ˆå°‘ç”¨åˆ°è®¾è®¡æ¨¡å¼ï¼Œé‚£ä¹ˆä½ å°±é”™äº†ï¼Œç‰¹åˆ«æ˜¯jsè¿™ç§çµæ´»çš„è¯­è¨€ï¼Œæœ‰çš„æ—¶å€™ä½ å·²ç»åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨äº†è®¾è®¡æ¨¡å¼ï¼Œåªæ˜¯ä½ ä¸çŸ¥é“è€Œå·²ã€‚æ›´å¤šå…³äºè®¾è®¡æ¨¡å¼çš„ä¸œè¥¿ï¼Œä»¥åä¼šé™†ç»­å†™åšå®¢æè¿°ï¼Œè¿™é‡Œåªå¸Œæœ›å¤§å®¶æŠ›å¼ƒè®¾è®¡æ¨¡å¼ç¥ç§˜çš„æ„Ÿè§‰ï¼Œé€šä¿—çš„è®²ï¼Œå®ƒæ— éå°±æ˜¯å®Œæˆä¸€ä»¶äº‹æƒ…é€šç”¨çš„åŠæ³•è€Œå·²ã€‚</p>\n<h1 id=\"3ã€ç•…æƒ³\"><a href=\"#3ã€ç•…æƒ³\" class=\"headerlink\" title=\"3ã€ç•…æƒ³\"></a>3ã€ç•…æƒ³</h1><p>å›åˆ°æ­£é¢˜ï¼Œå‡å¦‚æˆ‘ä»¬ä¸æƒ³ä½¿ç”¨è¿‡å¤šçš„ if - else è¯­å¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿ƒä¸­æ¯”è¾ƒç†æƒ³çš„ä»£ç ç¼–å†™æ–¹å¼æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬èƒ½ä¸èƒ½åƒç¼–å†™é…ç½®ä¸€æ ·çš„å»åšè¡¨å•éªŒè¯å‘¢ï¼Ÿå†æ¥ä¸€ä¸ªâ€ä¸€é”®éªŒè¯â€œçš„åŠŸèƒ½ï¼Œæ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿ƒä¸­ç†æƒ³çš„ç¼–å†™ä»£ç çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">\n// è·å–è¡¨å•formå…ƒç´ \nvar form = document.getElementById(&#39;f1&#39;);\n\n// åˆ›å»ºè¡¨å•æ ¡éªŒå®ä¾‹\nvar validation = new Formvalidation(VerifiPolicy);\n// ç¼–å†™æ ¡éªŒé…ç½®\nvalidation.add(form.username, &#39;isNoEmpty&#39;, &#39;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&#39;);\nvalidation.add(form.password, &#39;minLength: 6&#39;, &#39;å¯†ç é•¿åº¦ä¸èƒ½å°äº6ä¸ªå­—ç¬¦&#39;);\nvalidation.add(form.code, &#39;isMobile&#39;, &#39;è¯·å¡«å†™æ­£ç¡®çš„æ‰‹æœºå·&#39;);\n\n// å¼€å§‹æ ¡éªŒï¼Œå¹¶æ¥æ”¶é”™è¯¯ä¿¡æ¯\nvar errorMsg = validation.start();\n\n// å¦‚æœæœ‰é”™è¯¯ä¿¡æ¯è¾“å‡ºï¼Œè¯´æ˜æ ¡éªŒæœªé€šè¿‡\nif(errorMsg){\n    // åšä¸€äº›å…¶ä»–çš„äº‹\n    return false;\n}\n</code></pre>\n<p>æ€ä¹ˆæ ·ï¼Ÿæ„Ÿå—æ„Ÿå—ï¼Œæ˜¯ä¸æ˜¯çœ‹ä¸Šå»ä¼˜é›…å¤šäº†ï¼Ÿå¥½äº†ï¼Œæœ‰äº†å¿ƒä¸­çš„ç•…æƒ³ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç›®æ ‡è¿ˆè¿›äº†ï¼Œä¸‹ä¸€æ­¥å°±è¦äº†è§£äº†è§£ä»€ä¹ˆäº‹ç­–ç•¥æ¨¡å¼äº†ã€‚</p>\n<h1 id=\"4ã€ç­–ç•¥æ¨¡å¼\"><a href=\"#4ã€ç­–ç•¥æ¨¡å¼\" class=\"headerlink\" title=\"4ã€ç­–ç•¥æ¨¡å¼\"></a>4ã€ç­–ç•¥æ¨¡å¼</h1><p>ç­–ç•¥æ¨¡å¼ï¼Œå•çº¯çš„çœ‹å®ƒçš„åå­—â€ç­–ç•¥â€œï¼ŒæŒ‡çš„æ˜¯åšäº‹æƒ…çš„æ–¹æ³•ï¼Œæ¯”å¦‚ä½ ä»åŒ—äº¬åˆ°å“ˆå°”æ»¨ï¼ˆä¸ºä»€ä¹ˆåˆ°å“ˆå°”æ»¨å‘¢ï¼Ÿå› ä¸ºæˆ‘è€å®¶æ˜¯å“ˆå°”æ»¨çš„[å·ç¬‘]ï¼‰ï¼Œä½ å¯ä»¥æœ‰å‡ ç§ç­–ç•¥ä¾›é€‰æ‹©ï¼š</p>\n<p>1ã€é£æœºï¼Œå—–å—–å—–ç›´æ¥å°±åˆ°äº†ï¼ŒèŠ‚çœæ—¶é—´ã€‚<br>2ã€ç«è½¦ï¼Œå¯ä»¥é€‰æ‹©é«˜é“å‡ºè¡Œï¼Œä¸“ä¸ºé£æœºææƒ§ç—‡è€…æä¾›ã€‚<br>3ã€å¾’æ­¥ï¼Œä¸å¤±ä¸ºä¸€ä¸ªé”»ç‚¼èº«ä½“çš„é€‰æ‹©ã€‚<br>4ã€other methodâ€¦â€¦</p>\n<p>æ‰€ä»¥ï¼Œåšä¸€ä»¶äº‹ä½ ä¼šæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ç­–ç•¥ï¼Œè€Œæˆ‘ä»¬ä»Šå¤©è¦è®²çš„ç­–ç•¥æ¨¡å¼ä¹Ÿå°±æ˜¯è¿™ä¸ªæ„æ€ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå°†åšä»€ä¹ˆå’Œè°å»åšç›¸åˆ†ç¦»ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªå®Œæ•´çš„ç­–ç•¥æ¨¡å¼è¦æœ‰ä¸¤ä¸ªç±»ï¼Œä¸€ä¸ªæ˜¯ç­–ç•¥ç±»ï¼Œä¸€ä¸ªæ˜¯ç¯å¢ƒç±»(ä¸»è¦ç±»)ï¼Œç¯å¢ƒç±»æ¥æ”¶è¯·æ±‚ï¼Œä½†ä¸å¤„ç†è¯·æ±‚ï¼Œå®ƒä¼šæŠŠè¯·æ±‚å§”æ‰˜ç»™ç­–ç•¥ç±»ï¼Œè®©ç­–ç•¥ç±»å»å¤„ç†ï¼Œè€Œç­–ç•¥ç±»çš„æ‰©å±•æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œè¿™æ ·ï¼Œä½¿å¾—æˆ‘ä»¬çš„ä»£ç æ˜“äºæ‰©å±•ã€‚</p>\n<p>åœ¨è¡¨å•éªŒè¯çš„ä¾‹å­ä¸­ï¼Œå„ç§éªŒè¯çš„æ–¹æ³•ç»„æˆäº†ç­–ç•¥ç±»ï¼Œæ¯”å¦‚ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºç©ºçš„æ–¹æ³•(å¦‚ï¼šisNoEmpty)ï¼Œåˆ¤æ–­æœ€å°é•¿åº¦çš„æ–¹æ³•(å¦‚ï¼šminLength)ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ‰‹æœºå·çš„æ–¹æ³•(isMobule)ç­‰ç­‰ï¼Œä»–ä»¬ç»„æˆäº†ç­–ç•¥ç±»ï¼Œä¾›ç»™ç¯å¢ƒç±»å»å§”æ‰˜è¯·æ±‚ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥å®æˆ˜ä¸€ä¸‹ã€‚</p>\n<h1 id=\"5ã€ç¼–å†™ç­–ç•¥ç±»\"><a href=\"#5ã€ç¼–å†™ç­–ç•¥ç±»\" class=\"headerlink\" title=\"5ã€ç¼–å†™ç­–ç•¥ç±»\"></a>5ã€ç¼–å†™ç­–ç•¥ç±»</h1><p>ç­–ç•¥ç±»å¾ˆç®€å•ï¼Œå®ƒæ˜¯ç”±ä¸€ç»„éªŒè¯æ–¹æ³•ç»„æˆçš„å¯¹è±¡ï¼Œå³ç­–ç•¥å¯¹è±¡</p>\n<pre><code class=\"js\">// ç­–ç•¥å¯¹è±¡\nvar VerifiPolicy = {\n    // åˆ¤æ–­æ˜¯å¦ä¸ºç©º\n    isNoEmpty : function(value, errorMsg){\n        if(value == &#39;&#39;){\n            return errorMsg;\n        }\n    },\n    // åˆ¤æ–­æœ€å°é•¿åº¦\n    minLength : function(value, length, errorMsg){\n        if(value.length &lt; length){\n            return errorMsg;\n        }\n    },\n    // åˆ¤æ–­æ˜¯å¦ä¸ºæ‰‹æœºå·\n    isMobile : function(value, errorMsg){\n        if(!/(^1[3|5|8][0-9]{9}$)/.test(value)){\n            return errorMsg;\n        }\n    }\n    // å…¶ä»–\n}\n</code></pre>\n<h1 id=\"6ã€ç¼–å†™ç¯å¢ƒç±»\"><a href=\"#6ã€ç¼–å†™ç¯å¢ƒç±»\" class=\"headerlink\" title=\"6ã€ç¼–å†™ç¯å¢ƒç±»\"></a>6ã€ç¼–å†™ç¯å¢ƒç±»</h1><p>æ ¹æ®æˆ‘ä»¬çš„ç•…æƒ³ï¼Œæˆ‘ä»¬ä½¿ç”¨addæ–¹æ³•æ·»åŠ éªŒè¯é…ç½®ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">validation.add(form.username, &#39;isNoEmpty&#39;, &#39;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&#39;);\n</code></pre>\n<p>addæ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨å•å­—æ®µï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç­–ç•¥å¯¹è±¡ä¸­ç­–ç•¥æ–¹æ³•çš„åå­—ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯éªŒè¯æœªé€šè¿‡çš„é”™è¯¯ä¿¡æ¯ã€‚</p>\n<p>ç„¶åä½¿ç”¨ start æ–¹æ³•å¼€å§‹éªŒè¯ï¼Œè‹¥éªŒè¯æœªé€šè¿‡ï¼Œè¿”å›éªŒè¯é”™è¯¯ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">var errorMsg = validation.start();\n</code></pre>\n<p>å¦å¤–ï¼Œå†è§£é‡Šä¸€ä¸‹ä¸‹é¢è¿™å¥ä»£ç ï¼š</p>\n<pre><code>validation.add(form.password, &#39;minLength: 6&#39;, &#39;å¯†ç é•¿åº¦ä¸èƒ½å°äº6ä¸ªå­—ç¬¦&#39;);\n</code></pre><p>addæ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æˆ‘ä»¬è¯´è¿‡äº†ï¼Œæ˜¯è¦éªŒè¯çš„è¡¨å•å…ƒç´ ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ å†’å·(:) åˆ†å‰²ï¼Œå‰é¢æ˜¯ç­–ç•¥æ–¹æ³•åç§°ï¼Œåé¢æ˜¯ä¼ ç»™è¿™ä¸ªæ–¹æ³•çš„å‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä»ç„¶æ˜¯é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä»¬å¸Œæœ›å®Œæˆè¿™æ ·çš„ä»£ç ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>// æ„é€ å‡½æ•°\nvar Formvalidation = function(VerifiPolicy){\n    // ä¿å­˜ç­–ç•¥å¯¹è±¡\n    this.strategies = VerifiPolicy;\n    // éªŒè¯ç¼“å­˜\n    this.validationFns = [];\n}\n\n// add æ–¹æ³•\nFormvalidation.prototype.add = function(dom, rule, errorMsg){\n\n    var ary = rule.split(&#39;:&#39;);\n    var arg = [];\n    var self = this;\n    this.validationFns.push(function(){\n        arg = [];    // é‡ç½®å‚æ•°\n        var ruleName = ary[0];    // ç­–ç•¥å¯¹è±¡æ–¹æ³•å\n\n        // ç»„è£…å‚æ•°\n        arg.push(dom.value);\n        if(ary[1]){\n            arg.push(ary[1]);\n        }\n        arg.push(errorMsg);\n\n        // è°ƒç”¨ç­–ç•¥å‡½æ•°\n        return self.strategies[ruleName].apply(dom, arg);\n    });\n}\n\n// å¼€å§‹éªŒè¯\nFormvalidation.prototype.start = function(){\n    for(var i = 0; ; i++){\n        var msg = this.validationFns[i]();\n        if(msg){\n            return msg;\n        }\n    }\n}\n</code></pre><p>è‡³æ­¤ï¼Œä¸€ä¸ªæœ€ç®€å•çš„åº”ç”¨å°±å®Œæˆäº†ï¼Œå¦å¤–ä½ è¿˜å¯ä»¥å¯¹è¿™ä¸ªç¯å¢ƒç±»è¿›è¡Œæ‰©å±•ï¼Œæ¯”å¦‚æ”¯æŒå¤é€‰æ¡†ã€å•é€‰æ¡†ç­‰è¡¨å•çš„éªŒè¯ï¼Œè¿˜å¯ä»¥æ”¯æŒä¸€ä¸ªè¡¨å•å¤šè§„åˆ™çš„éªŒè¯æ–¹å¼ï¼Œæ€»ä¹‹ï¼Œåªè¦ä½ è§‰å¾—å¯ä»¥ï¼Œå°±okã€‚ç¨‹åºä¸–ç•Œä»æ¥éƒ½æ¬¢è¿åˆ›é€ ï¼Œå»å‘æŒ¥ä½ çš„æƒ³è±¡å§ã€‚</p>"},{"title":"JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–","date":"2016-04-28T02:51:17.000Z","_content":"\næˆ‘çš„åšå®¢å§‹ç»ˆéƒ½æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å–œæ¬¢ä»0å¼€å§‹ï¼ŒåŠªåŠ›è®©å°ç™½éƒ½èƒ½çœ‹çš„æ˜ç™½ï¼Œå³ä½¿çœ‹ä¸æ˜ç™½ï¼Œä¹Ÿèƒ½çŸ¥é“æ•´ä½“çš„æ¥é¾™å»è„‰ï¼Œè¿™ç¯‡åšå®¢ä¾ç„¶ç§‰æ‰¿ç€è¿™ä¸ªé£æ ¼ã€‚\nä»¥MVVMæ¨¡å¼ä¸ºä¸»çº¿å»å®ç°çš„JavaScriptæ¡†æ¶éå¸¸æµè¡Œï¼Œè¯¸å¦‚ angularã€Emberã€Polymerã€vue ç­‰ç­‰ï¼Œå®ƒä»¬çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯æ•°æ®çš„åŒå‘ç»‘å®šã€‚è¿™å¯¹äºå°ç™½æ¥è¯´å°±åƒå˜é­”æœ¯ä¸€æ ·ï¼Œä½†æ— è®ºå¯¹è°æ¥è®²ï¼Œå½“ä½ çœ‹åˆ°ä¸€ä¸ªä»¤ä½ æ„Ÿå…´è¶£çš„é­”æœ¯ï¼Œé‚£ä¹ˆæ­ç§˜å®ƒæ€»æ˜¯èƒ½å¸å¼•ä½ çš„çœ¼çƒã€‚\nè¿™ç¯‡æ–‡ç« ä¸»è¦è®²è¿°MVVMå®ç°ä¸­çš„ä¸€éƒ¨åˆ†ï¼šå¦‚ä½•ç›‘æµ‹æ•°æ®çš„å˜åŒ–ã€‚\n\n<!-- more -->\n\n>æ³¨ï¼šæœ¬ç¯‡æ–‡ç« å°†ç”Ÿäº§å‡ºä¸€ä¸ªè¿·ä½ åº“ï¼Œä»£ç æ‰˜ç®¡åœ¨ [https://github.com/HcySunYang/jsonob](https://github.com/HcySunYang/jsonob)ï¼Œç”±äºæœ¬ç¯‡æ–‡ç« ä»£ç é‡‡ç”¨ES6ç¼–å†™ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥åœ¨æµè§ˆå™¨ä¸‹è¿è¡Œï¼Œè¯»è€…åœ¨å®è·µçš„æ—¶å€™å¯ä»¥é‡‡ç”¨è¯¥ä»“åº“çš„ä»£ç ï¼Œcloneä»“åº“åï¼š\n1ã€å®‰è£…ä¾èµ–\nnpm install\n2ã€æ„å»ºé¡¹ç›®\nnpm run build\n3ã€ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ test/index.html æŸ¥çœ‹è¿è¡Œç»“æœ\n\né‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬è¦åšä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬ä¼šå®ç°ä¸€ä¸ªè¿·ä½ åº“ï¼Œè¿™ä¸ªåº“çš„ä½œç”¨æ˜¯ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–ï¼Œå¹¶ä½œå‡ºç›¸åº”çš„é€šçŸ¥ã€‚åº“çš„ä½¿ç”¨æ–¹æ³•å¤§è‡´å¦‚ä¸‹ï¼š\n\n```\n// å®šä¹‰ä¸€ä¸ªå˜åŒ–é€šçŸ¥çš„å›è°ƒ\nvar callback = function(newVal, oldVal){\n    alert(newVal + '----' + oldVal);\n};\n\n// å®šä¹‰ä¸€ä¸ªæ™®é€šå¯¹è±¡ä½œä¸ºæ•°æ®æ¨¡å‹\nvar data = {\n    a: 200,\n    level1: {\n        b: 'str',\n        c: [1, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n\n// å®ä¾‹åŒ–ä¸€ä¸ªç›‘æµ‹å¯¹è±¡ï¼Œå»ç›‘æµ‹æ•°æ®ï¼Œå¹¶åœ¨æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ä½œå‡ºååº”\nvar j = new Jsonob(data, callback);\n```\n\nä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª callback å›è°ƒå‡½æ•°ï¼Œä»¥åŠä¸€ä¸ªä¿å­˜ç€æ™®é€šjsonå¯¹è±¡çš„å˜é‡ data ï¼Œæœ€åå®ä¾‹åŒ–äº†ä¸€ä¸ª ç›‘æµ‹å¯¹è±¡ ï¼Œå¯¹ data è¿›è¡Œå˜åŒ–ç›‘æµ‹ï¼Œå½“å˜åŒ–å‘ç”Ÿçš„æ—¶å€™ï¼Œæ‰§è¡Œç»™å®šçš„å›è°ƒè¿›è¡Œå¿…è¦çš„å˜åŒ–é€šçŸ¥ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€äº›æ‰‹æ®µå°±å¯ä»¥è¾¾åˆ°æ•°æ®ç»‘å®šçš„æ•ˆæœã€‚\n\n## Object.defineProperty ##\n\nES5 æè¿°äº†å±æ€§çš„ç‰¹å¾ï¼Œæå‡ºå¯¹è±¡çš„æ¯ä¸ªå±æ€§éƒ½æœ‰ç‰¹å®šçš„æè¿°ç¬¦ï¼Œä½ ä¹Ÿå¯ä»¥ç†è§£ä¸ºé‚£æ˜¯å±æ€§çš„å±æ€§ã€‚ã€‚ã€‚ã€‚ã€‚\n\nES5æŠŠå±æ€§åˆ†æˆä¸¤ç§ï¼Œä¸€ç§æ˜¯ æ•°æ®å±æ€§ï¼Œ ä¸€ç§æ˜¯ è®¿é—®å™¨å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Object.defineProperty() å»å®šä¹‰ä¸€ä¸ªæ•°æ®å±æ€§æˆ–è®¿é—®å™¨å±æ€§ã€‚å¦‚ä¸‹ä»£ç ï¼š\n\n```\nvar obj = {};\n\nobj.name = 'hcy';\n```\n\nä¸Šé¢çš„ä»£ç æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ç»™è¿™ä¸ªå¯¹è±¡æ·»åŠ äº†ä¸€ä¸ªå±æ€§ nameï¼Œå€¼ä¸º 'hcy'ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Object.defineProperty() æ¥ç»™å¯¹è±¡å®šä¹‰å±æ€§ï¼Œä¸Šé¢çš„ä»£ç ç­‰ä»·äºï¼š\n\n```\nvar obj = {};\n\nObject.defineProperty(obj, 'name', {\n\tvalue: 'hcy',\t\t// å±æ€§çš„å€¼\n\twritable: true,\t\t// æ˜¯å¦å¯å†™\n\tenumerable: true,\t// æ˜¯å¦èƒ½å¤Ÿé€šè¿‡for in æšä¸¾\n\tconfigurable: true\t// æ˜¯å¦å¯ä½¿ç”¨ deleteåˆ é™¤\n})\n```\n\nè¿™æ ·æˆ‘ä»¬å°±ä½¿ç”¨ Object.defineProperty ç»™å¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªå±æ€§ï¼Œè¿™æ ·çš„å±æ€§å°±æ˜¯æ•°æ®å±æ€§ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰è®¿é—®å™¨å±æ€§ï¼š\n\n```\nvar obj = {};\n\nObject.defineProperty(obj, 'age', {\n\tget: function(){\n\t\treturn 20;\n\t},\n\tset: function(newVal){\n\t\tthis.age += 20;\n\t}\n})\n```\n\nè®¿é—®å™¨å±æ€§å…è®¸ä½ å®šä¹‰ä¸€å¯¹å„¿ getter/setter ï¼Œå½“ä½ è¯»å–å±æ€§å€¼çš„æ—¶å€™åº•å±‚ä¼šè°ƒç”¨ get æ–¹æ³•ï¼Œå½“ä½ å»è®¾ç½®å±æ€§å€¼çš„æ—¶å€™ï¼Œåº•å±‚ä¼šè°ƒç”¨ set æ–¹æ³•\n\nçŸ¥é“äº†è¿™ä¸ªå°±å¥½åŠäº†ï¼Œæˆ‘ä»¬å†å›åˆ°æœ€åˆçš„é—®é¢˜ä¸Šé¢ï¼Œå¦‚ä½•æ£€æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š\n\n> éå†å¯¹è±¡çš„å±æ€§ï¼ŒæŠŠå¯¹è±¡çš„å±æ€§éƒ½ä½¿ç”¨ Object.defineProperty è½¬ä¸º  getter/setter ï¼Œè¿™æ ·ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹ä¸€äº›å€¼å¾—æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨setæ–¹æ³•ï¼Œç„¶åæˆ‘ä»¬åœ¨setæ–¹æ³•é‡Œé¢ï¼Œå›è°ƒé€šçŸ¥ï¼Œä¸å°±å¯ä»¥äº†å—ï¼Œæ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š\n\n```\n// index.js\nconst OP = Object.prototype;\n\nexport class Jsonob{\n    constructor(obj, callback){\n        if(OP.toString.call(obj) !== '[object Object]'){\n            console.error('This parameter must be an objectï¼š' + obj);\n        }\n        this.$callback = callback;\n        this.observe(obj);\n    }\n    \n    observe(obj){\n        Object.keys(obj).forEach(function(key, index, keyArray){\n            var val = obj[key];\n            Object.defineProperty(obj, key, {\n                get: function(){\n                    return val;\n                },\n                set: (function(newVal){\n                    this.$callback(newVal);\n                }).bind(this)\n            });\n            \n            if(OP.toString.call(obj[key]) === '[object Object]'){\n                this.observe(obj[key]);\n            }\n            \n        }, this);\n        \n    }\n}\n```\n\nä¸Šé¢ä»£ç é‡‡ç”¨ES6ç¼–å†™ï¼Œindex.jsæ–‡ä»¶ä¸­å¯¼å‡ºäº†ä¸€ä¸ª Jsonob ç±»ï¼Œconstructoræ„é€ å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä¿è¯äº†ä¼ å…¥çš„å¯¹è±¡æ˜¯ä¸€ä¸ª {} æˆ– new Object() ç”Ÿæˆçš„å¯¹è±¡ï¼Œæ¥ç€ç¼“å­˜äº†å›è°ƒå‡½æ•°ï¼Œæœ€åè°ƒç”¨äº†åŸå‹ä¸‹çš„ observe æ–¹æ³•ã€‚\n\nobserveæ–¹æ³•æ˜¯çœŸæ­£å®ç°ç›‘æµ‹å±æ€§çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä½¿ç”¨ Object.keys(obj).forEach å¾ªç¯objæ‰€æœ‰å¯æšä¸¾çš„å±æ€§ï¼Œä½¿ç”¨ Object.defineProperty å°†å±æ€§è½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§ï¼Œç„¶ååˆ¤æ–­å±æ€§çš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯å¯¹è±¡çš„è¯å†è¿›è¡Œé€’å½’è°ƒç”¨ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±èƒ½ä¿è¯ä¸€ä¸ªå¤æ‚çš„æ™®é€šjsonå¯¹è±¡ä¸­çš„å±æ€§ä»¥åŠå€¼ä¸ºå¯¹è±¡çš„å±æ€§çš„å±æ€§éƒ½è½¬æ¢æˆè®¿é—®å™¨å±æ€§ã€‚\n\næœ€åï¼Œåœ¨ Object.defineProperty çš„ set æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº†æŒ‡å®šçš„å›è°ƒï¼Œå¹¶å°†æ–°å€¼ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ã€‚\n\næ¥ä¸‹æ¥æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæµ‹è¯•ä»£ç ï¼Œå»æµ‹è¯•ä¸€ä¸‹ä¸Šé¢çš„ä»£ç æ˜¯å¦å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œåœ¨index.htmlä¸­ï¼ˆ[è¯»è€…å¯ä»¥cloneæ–‡ç« å¼€å§‹é˜¶æ®µç»™å‡ºçš„ä»“åº“](https://github.com/HcySunYang/jsonob)ï¼‰ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š\n\n```\n<html>\n    <head>\n        <meta charset=\"utf-8\" />\n    </head>\n    <body>\n        \n        <script src=\"../dist/jsonob.js\"></script>\n        <script>\n            var Jsonob = Jsonob.Jsonob;\n            \n            var callback = function(newVal){\n                alert(newVal);\n            };\n            \n            var data = {\n                a: 200,\n                level1: {\n                    b: 'str',\n                    c: [1, 2, 3],\n                    level2: {\n                        d: 90\n                    }\n                }\n            }\n            \n            var j = new Jsonob(data, callback);\n            \n            data.a = 250;\n            data.level1.b = 'sss';\n            data.level1.level2.d = 'msn';\n        </script>\n    </body>\n</html>\n```\n\nä¸Šé¢ä»£ç ï¼Œå¾ˆæ¥è¿‘æˆ‘ä»¬æ–‡ç« å¼€å¤´è¦å®ç°çš„ç›®æ ‡ã€‚æˆ‘ä»¬å®šä¹‰äº†å›è°ƒ(callback)å’Œæ•°æ®æ¨¡å‹(data)ï¼Œåœ¨å›è°ƒä¸­æˆ‘ä»¬ä½¿ç”¨ alert å‡½æ•°å¼¹å‡ºæ–°å€¼ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªç›‘æµ‹å®ä¾‹å¹¶æŠŠæ•°æ®å’Œå›è°ƒä½œä¸ºå‚æ•°ä¼ é€’è¿‡å»ï¼Œç„¶åæˆ‘ä»¬è¯•ç€ä¿®æ”¹dataå¯¹è±¡ç›¸é¢çš„å±æ€§ä»¥åŠå­å±æ€§ï¼Œçœ‹çœ‹ä»£ç æ˜¯å¦æŒ‰ç…§æˆ‘ä»¬é¢„æœŸçš„å·¥ä½œï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œå¦‚ä¸‹å›¾\n\n![å¼¹çª—1](http://7xlolm.com1.z0.glb.clouddn.com/20160428a.jpg)\n![å¼¹çª—2](http://7xlolm.com1.z0.glb.clouddn.com/b.jpg)\n![å¼¹çª—3](http://7xlolm.com1.z0.glb.clouddn.com/c.jpg)\n\nå¯ä»¥çœ‹å¼¹å‡ºä¸‰ä¸ªå¯¹è¯æ¡†ï¼Œè¿™è¯´æ˜æˆ‘ä»¬çš„ä»£ç æ­£å¸¸å·¥ä½œäº†ï¼Œæ— è®ºæ˜¯dataå¯¹è±¡çš„å±æ€§ï¼Œè¿˜æ˜¯å­å±æ€§çš„æ”¹å˜ï¼Œéƒ½èƒ½å¤Ÿç›‘æµ‹åˆ°å˜åŒ–ï¼Œå¹¶æ‰§è¡Œæˆ‘ä»¬æŒ‡å®šçš„å›è°ƒã€‚\n\nè¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿå¯èƒ½ç»†å¿ƒçš„æœ‹å‹å¯èƒ½å·²ç»æ„è¯†åˆ°äº†ï¼Œæˆ‘ä»¬åœ¨æ£€æµ‹åˆ°å˜åŒ–å¹¶é€šçŸ¥å›è°ƒæ—¶ï¼Œåªä¼ é€’äº†ä¸€ä¸ªæ–°å€¼(newVal)ï¼Œä½†æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦æ—§å€¼ï¼Œä½†æ˜¯ä»¥ç°åœ¨çš„ç¨‹åºæ¥çœ‹ï¼Œæˆ‘ä»¬è¿˜æ— æ³•ä¼ é€’æ—§å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•ã€‚å¤§å®¶ä»”ç»†çœ‹ä¸Šé¢ index.js ä¸­forEachå¾ªç¯é‡Œé¢çš„ä»£ç ï¼Œæœ‰è¿™æ ·ä¸€æ®µï¼š\n\n```\nvar val = obj[key];\nObject.defineProperty(obj, key, {\n    get: function(){\n        return val;\n    },\n    set: (function(newVal){\n        this.$callback(newVal);\n    }).bind(this)\n});\n```\n\nå®é™…ä¸Šï¼Œval å˜é‡æ‰€å­˜å‚¨çš„ï¼Œå°±æ˜¯æ—§å€¼ï¼Œæˆ‘ä»¬ä¸å¦¨æŠŠä¸Šé¢çš„ä»£ç ä¿®æ”¹æˆä¸‹é¢è¿™æ ·ï¼š\n\n```\nvar oldVal = obj[key];\nObject.defineProperty(obj, key, {\n    get: function(){\n        return oldVal;\n    },\n    set: (function(newVal){\n        if(oldVal !== newVal){\n            if(OP.toString.call(newVal) === '[object Object]'){\n                this.observe(newVal);\n            }\n            this.$callback(newVal, oldVal);\n            oldVal = newVal;\n        }\n        \n    }).bind(this)\n});\n```\n\næˆ‘ä»¬å°†åŸæ¥çš„ val å˜é‡åå­—ä¿®æ”¹æˆ oldVal ï¼Œå¹¶åœ¨setæ–¹æ³•ä¸­è¿›è¡Œäº†æ›´æ”¹åˆ¤æ–­ï¼Œä»…åœ¨å€¼æœ‰æ›´æ”¹çš„æƒ…å†µä¸‹å»åšä¸€äº›äº‹ï¼Œå½“å€¼æœ‰ä¿®æ”¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ¤æ–­äº†æ–°å€¼æ˜¯å¦æ˜¯ç±»ä¼¼ {} æˆ– new Object() å½¢å¼çš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œæˆ‘ä»¬è¦è°ƒç”¨ this.observe æ–¹æ³•å»ç›‘å¬ä¸€ä¸‹æ–°è®¾ç½®çš„å€¼ï¼Œç„¶ååœ¨æŠŠæ—§å€¼ä¼ é€’ç»™å›è°ƒå‡½æ•°ä¹‹åæ›´æ–°ä¸€ä¸‹æ—§å€¼ã€‚\n\næ¥ç€ä¿®æ”¹ test/index.html æ–‡ä»¶ï¼š\n\n```\n<html>\n    <head>\n        <meta charset=\"utf-8\" />\n    </head>\n    <body>\n        \n        <script src=\"../dist/jsonob.js\"></script>\n        <script>\n            var Jsonob = Jsonob.Jsonob;\n            \n            var callback = function(newVal, oldVal){\n                alert('æ–°å€¼ï¼š' + newVal + '----' + 'æ—§å€¼ï¼š' + oldVal);\n            };\n            \n            var data = {\n                a: 200,\n                level1: {\n                    b: 'str',\n                    c: [1, 2, 3],\n                    level2: {\n                        d: 90\n                    }\n                }\n            }\n            \n            var j = new Jsonob(data, callback);\n            \n            data.a = 250;\n            data.a = 260;\n        </script>\n    </body>\n</html>\n```\n\næˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°ä¸­æ¥æ”¶äº†æ–°å€¼å’Œæ—§å€¼ï¼Œåœ¨ä¸‹é¢æˆ‘ä»¬ä¿®æ”¹äº† data.a çš„å€¼ä¸º 250ï¼Œç„¶åè¿è¡Œä»£ç ï¼ŒæŸ¥çœ‹æµè§ˆå™¨çš„åé¦ˆï¼š\n\n![alert1](http://7xlolm.com1.z0.glb.clouddn.com/20160428d.jpg)\n\n![alert1](http://7xlolm.com1.z0.glb.clouddn.com/20160428e.jpg)\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å®Œæˆäº†æœ€æœ€åŸºæœ¬çš„æ™®é€šå¯¹è±¡å˜åŒ–ç›‘æµ‹åº“ï¼Œæ¥ç€ï¼Œæˆ‘ä»¬ç»§ç»­å‘ç°é—®é¢˜ï¼Œæˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹ä¸€ä¸‹æ•°æ®æ¨¡å‹ï¼š\n\n```\nvar data = {\n    a: 200,\n    level1: {\n        b: 'str',\n        c: [1, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n```\n\næˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ data.level1.c çš„å€¼ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„åœ¨æˆ‘ä»¬å·¥ä½œä¸­è‚¯å®šæ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œå½“æ•°ç»„çš„å…ƒç´ å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œä¹Ÿè§†ä¸ºæ•°æ®çš„æ”¹å˜ï¼Œä½†é—æ†¾çš„æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨åº“è¿˜ä¸èƒ½ç›‘æµ‹æ•°ç»„çš„å˜åŒ–ï¼Œæ¯”å¦‚ï¼š\n\n```\ndata.level1.c.push(4);\n```\n\næˆ‘ä»¬å‘æ•°ç»„ä¸­pushäº†ä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯å¹¶ä¸ä¼šè§¦å‘æ”¹å˜ã€‚æ“ä½œæ•°ç»„çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š'push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse' ç­‰ç­‰ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åœ¨ä½¿ç”¨è¿™äº›æ–¹æ³•æ“ä½œæ•°ç»„çš„æ—¶å€™èƒ½å¤Ÿç›‘å¬åˆ°å˜åŒ–å‘¢ï¼Ÿæœ‰è¿™æ ·ä¸€ä¸ªæ€è·¯ï¼Œçœ‹å›¾ï¼š\n\n![å½“ä½ å®šä¹‰ä¸€ä¸ªæ•°ç»„å®ä¾‹çš„æ—¶å€™ï¼Œå®ä¾‹ã€å®ä¾‹çš„__proto__å±æ€§ã€Arrayæ„é€ å‡½æ•°ã€åŸå‹ä¹‹é—´çš„å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/20160501f.jpg)\n\nä¸Šå›¾æ˜¾ç¤ºäº†ï¼Œå½“ä½ é€šè¿‡ var arr1 = [] æˆ–è€… var arr1 = new Array() è¯­å¥åˆ›å»ºä¸€ä¸ªæ•°ç»„å®ä¾‹çš„æ—¶å€™ï¼Œå®ä¾‹ã€å®ä¾‹çš„__proto__å±æ€§ã€Arrayæ„é€ å‡½æ•°ä»¥åŠArrayåŸå‹å››è€…ä¹‹é—´çš„å…³ç³»ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆå®¹çš„å‘ç°ï¼Œæ•°ç»„å®ä¾‹çš„__proto__å±æ€§ï¼Œæ˜¯Array.prototypeçš„å¼•ç”¨ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ arr1.push() è¯­å¥æ“ä½œæ•°ç»„çš„æ—¶å€™ï¼Œæ˜¯è°ƒç”¨åŸå‹ä¸‹çš„pushæ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä¸å¯ä»¥é‡å†™åŸå‹çš„è¿™äº›æ•°ç»„æ–¹æ³•ï¼Œåœ¨è¿™äº›é‡å†™çš„æ–¹æ³•é‡Œé¢å»ç›‘å¬å˜åŒ–å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯åœ¨å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åˆ°åº•è¦æ€ä¹ˆé‡å†™ï¼Œæ¯”å¦‚æˆ‘ä»¬é‡å†™ä¸€ä¸ªæ•°ç»„pushæ–¹æ³•ï¼Œå‘æ•°ç»„æ ˆä¸­æ¨å…¥ä¸€ä¸ªå…ƒç´ ï¼Œéš¾é“æˆ‘ä»¬è¦è¿™æ ·å»é‡å†™å—ï¼š\n\n```\nArray.prototype.push = function(){\n    // ä½ çš„å®ç°æ–¹å¼\n}\n```\n\nç„¶åå†ä¸€æ¬¡å®ç°å…¶ä»–çš„æ•°ç»„æ–¹æ³•ï¼š\n\n```\nArray.prototype.pop = function(){\n    // ä½ çš„å®ç°æ–¹å¼\n}\nArray.prototype.shift = function(){\n    // ä½ çš„å®ç°æ–¹å¼\n}\n...\n```\n\nè¿™ç§å®ç°æ˜¯æœ€ä¸åº”è¯¥è€ƒè™‘çš„ï¼Œæš‚ä¸”ä¸è¯´èƒ½ä¸èƒ½å…¨éƒ¨å®ç°çš„ä¸åŸç”Ÿæ— å¼‚ï¼Œå³ä½¿ä½ å®ç°çš„ä¸åŸç”Ÿæ–¹æ³•åœ¨ä½¿ç”¨æ–¹å¼ä¸Šä¸€æ¨¡ä¸€æ ·ï¼Œå¹¶ä¸”ä¸å½±å“å…¶ä»–ä»£ç çš„è¿è¡Œï¼Œé‚£ä¹ˆåœ¨æ€§èƒ½ä¸Šï¼Œå¯èƒ½å°±ä¸åŸç”Ÿå·®å¾ˆå¤šäº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸Šé¢ æ•°ç»„å®ä¾‹ä»¥åŠæ•°ç»„æ„é€ å‡½æ•°å’ŒåŸå‹ä¹‹é—´çš„å…³ç³»å›¾ ä¸­æ€è€ƒè§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä¸å¯ä»¥åœ¨åŸå‹é“¾ä¸­åŠ ä¸€å±‚ï¼Œå¦‚ä¸‹ï¼š\n\n![æ€è·¯](http://7xlolm.com1.z0.glb.clouddn.com/20160501g.jpg)\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ arr1.__proto__ ä¸ Array.prototype ä¹‹é—´çš„é“¾æ¡ä¸­æ·»åŠ äº†ä¸€ç¯ fakePrototype (å‡çš„åŸå‹)ï¼Œæˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼Œåœ¨ä½¿ç”¨ push ç­‰æ•°ç»„æ–¹æ³•çš„æ—¶å€™ï¼Œè°ƒç”¨çš„æ˜¯ fakePrototype ä¸Šçš„pushæ–¹æ³•ï¼Œç„¶ååœ¨ fakePrototype æ–¹æ³•ä¸­ç®€ä»‹å†å»è°ƒç”¨çœŸæ­£çš„ArrayåŸå‹ä¸Šçš„ push æ–¹æ³•ï¼ŒåŒæ—¶ç›‘å¬å˜åŒ–ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½å®ç°ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š\n\n```\n/*\n *  Object åŸå‹\n */\nconst OP = Object.prototype;\n/*\n *  éœ€è¦é‡å†™çš„æ•°ç»„æ–¹æ³• OAR æ˜¯ overrideArrayMethod çš„ç¼©å†™\n */\nconst OAM = ['push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse'];\n\nexport class Jsonob{\n    constructor(obj, callback){\n        if(OP.toString.call(obj) !== '[object Object]'){\n            console.error('This parameter must be an objectï¼š' + obj);\n        }\n        this.$callback = callback;\n        this.observe(obj);\n    }\n    \n    observe(obj){\n        // å¦‚æœå‘ç° ç›‘æµ‹çš„å¯¹è±¡æ˜¯æ•°ç»„çš„è¯å°±è¦è°ƒç”¨ overrideArrayProto æ–¹æ³•\n        if(OP.toString.call(obj) === '[object Array]'){\n            this.overrideArrayProto(obj);\n        }\n        Object.keys(obj).forEach(function(key, index, keyArray){\n            var oldVal = obj[key];\n            Object.defineProperty(obj, key, {\n                get: function(){\n                    return oldVal;\n                },\n                set: (function(newVal){\n                    if(oldVal !== newVal){\n                        if(OP.toString.call(newVal) === '[object Object]' || OP.toString.call(newVal) === '[object Array]'){\n                            this.observe(newVal);\n                        }\n                        this.$callback(newVal, oldVal);\n                        oldVal = newVal;\n                    }\n                    \n                }).bind(this)\n            });\n            \n            if(OP.toString.call(obj[key]) === '[object Object]' || OP.toString.call(obj[key]) === '[object Array]'){\n                this.observe(obj[key]);\n            }\n            \n        }, this);\n        \n    }\n    \n    overrideArrayProto(array){\n            // ä¿å­˜åŸå§‹ Array åŸå‹\n        var originalProto = Array.prototype,\n            // é€šè¿‡ Object.create æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„åŸå‹å°±æ˜¯Array.prototype\n            overrideProto = Object.create(Array.prototype),\n            self = this,\n            result;\n        // éå†è¦é‡å†™çš„æ•°ç»„æ–¹æ³•\n        Object.keys(OAM).forEach(function(key, index, array){\n            var method = OAM[index],\n                oldArray = [];\n            // ä½¿ç”¨ Object.defineProperty ç»™ overrideProto æ·»åŠ å±æ€§ï¼Œå±æ€§çš„åç§°æ˜¯å¯¹åº”çš„æ•°ç»„å‡½æ•°åï¼Œå€¼æ˜¯å‡½æ•°\n            Object.defineProperty(overrideProto, method, {\n                value: function(){\n                    oldArray = this.slice(0);\n                    \n                    var arg = [].slice.apply(arguments);\n                    // è°ƒç”¨åŸå§‹ åŸå‹ çš„æ•°ç»„æ–¹æ³•\n                    result = originalProto[method].apply(this, arg);\n                    // å¯¹æ–°çš„æ•°ç»„è¿›è¡Œç›‘æµ‹\n                    self.observe(this);\n                    // æ‰§è¡Œå›è°ƒ\n                    self.$callback(this, oldArray);\n                    \n                    return result;\n                },\n                writable: true,\n                enumerable: false,\n                configurable: true\n            });\n        }, this);\n        \n        // æœ€å è®©è¯¥æ•°ç»„å®ä¾‹çš„ __proto__ å±æ€§æŒ‡å‘ å‡çš„åŸå‹ overrideProto\n        array.__proto__ = overrideProto;\n        \n    }\n}\n```\næˆ‘ä»¬æ–°å¢åŠ äº† overrideArrayProto æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ç¨‹åºçš„æœ€ä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªå¸¸é‡ OAM ï¼Œç”¨æ¥å®šä¹‰è¦é‡å†™çš„æ•°ç»„æ–¹æ³•ï¼ŒåŒæ—¶åœ¨ observe æ–¹æ³•ä¸­æ·»åŠ äº†å¯¹æ•°ç»„çš„åˆ¤æ–­ï¼Œæˆ‘ä»¬ä¹Ÿå…è®¸äº†å¯¹æ•°ç»„çš„ç›‘å¬ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†ä»‹ç»ä¸€ä¸‹ overrideArrayProto æ–¹æ³•ã€‚\n\né¡¾åæ€ä¹‰ï¼ŒoverrideArrayProto è¿™ä¸ªæ–¹æ³•æ˜¯é‡å†™äº† Array çš„åŸå‹ï¼Œåœ¨ overrideArrayProto æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä¿å­˜äº†æ•°ç»„çš„åŸå§‹åŸå‹ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªå‡çš„åŸå‹ï¼Œç„¶åéå†éœ€è¦é‡æ–°çš„æ•°ç»„æ–¹æ³•ï¼Œå¹¶å°†è¿™äº›æ–¹æ³•æŒ‚è½½åˆ° overrideProto ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æŒ‚è½½åˆ° overrideProto ä¸Šçš„è¿™äº›æ•°ç»„æ–¹æ³•çš„é‡Œé¢ï¼Œæˆ‘ä»¬è°ƒç”¨äº†åŸå§‹çš„æ•°ç»„åŸå‹ä¸Šçš„æ•°ç»„æ–¹æ³•ï¼Œæœ€åï¼Œæˆ‘ä»¬è®©æ•°ç»„å®ä¾‹çš„ __proto__ å±æ€§æŒ‡å‘ overrideProtoï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº†ä¸Šå›¾ä¸­çš„æ€è·¯ã€‚å¹¶ä¸”å®Œæˆäº†æƒ³è¦è¾¾åˆ°çš„æ•ˆæœï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æˆ‘ä»¬å·²ç»é‡å†™äº†çš„æ•°ç»„æ–¹æ³•å»æ“ä½œæ•°ç»„ï¼ŒæŸ¥çœ‹èƒ½ä¸èƒ½ç›‘æµ‹åˆ°å˜åŒ–ï¼š\n\n```\nvar callback = function(newVal, oldVal){\n    alert('æ–°å€¼ï¼š' + newVal + '----' + 'æ—§å€¼ï¼š' + oldVal);\n};\n\nvar data = {\n    a: 200,\n    level1: {\n        b: 'str',\n        c: [{w: 90}, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n\nvar j = new Jsonob(data, callback);\n\ndata.level1.c.push(4);\n```\n\nåœ¨æµè§ˆå™¨ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ä»£ç æŒ‰ç…§é¢„æœŸè¿è¡Œäº†ï¼š\n\n![å›¾1](http://7xlolm.com1.z0.glb.clouddn.com/20160501h.jpg)\n\nç›´åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å‡ ä¹å®Œç¾çš„ç›‘æµ‹åˆ°æ•°æ®å¯¹è±¡çš„å˜åŒ–äº†ï¼Œå¹¶ä¸”èƒ½å¤ŸçŸ¥é“å˜åŒ–å‰åçš„æ—§å€¼ä¸æ–°å€¼ï¼Œé‚£ä¹ˆè¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å›é¡¾ä¸€ä¸‹å½“æˆ‘ä»¬ä¿®æ”¹æ•°æ®å¯¹è±¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ç¡®èƒ½å¤Ÿè·å–åˆ°æ–°å€¼å’Œæ—§å€¼ï¼Œä½†æ˜¯ä¹Ÿä»…æ­¤è€Œå·²ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ä¿®æ”¹çš„æ˜¯å“ªä¸ªå±æ€§ï¼Œä½†æ˜¯èƒ½å¤ŸçŸ¥é“ä¿®æ”¹çš„å“ªä¸ªå±æ€§å¯¹äºæˆ‘ä»¬æ˜¯ç›¸å½“é‡è¦çš„ã€‚\n\næ¯”å¦‚MVVMä¸­ï¼Œå½“æ•°æ®å¯¹è±¡æ”¹å˜æ—¶ï¼Œè¦å»æ›´æ–°æ¨¡æ¿ï¼Œè€Œæ¨¡æ¿åˆ°æ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯é€šè¿‡æ•°æ®å¯¹è±¡ä¸‹çš„æŸä¸ªå­—æ®µåç§°è¿›è¡Œç»‘å®šçš„ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰å¦‚ä¸‹æ¨¡æ¿ï¼š\n\n```\n<div id=\"box\">\n    <div>{{name}}</div>\n    <div>{{age}}</div>\n    <div>{{sex}}</div>\n</div>\n```\n\nç„¶åæˆ‘ä»¬æœ‰å¦‚ä¸‹æ•°æ®ï¼š\n\n```\nvar data = {\n    name : 'hcy',\n    age : 20,\n    sex : 'ç”·'\n}\n```\n\næœ€åæˆ‘ä»¬é€šè¿‡ viewModule ç®€å†æ¨¡æ¿å’Œæ•°æ®çš„å…³ç³»ï¼š\n\n```\nnew Jsonob(document.getElementById('box'), data);\n```\n\né‚£ä¹ˆå½“æˆ‘ä»¬çš„æ•°æ®æ¨¡å‹dataä¸­çš„æŸä¸ªå±æ€§æ”¹å˜çš„æ—¶å€™ï¼Œæ¯”å¦‚ data.name = 'fuck'ï¼Œå¦‚è‹¥æˆ‘ä»¬ä¸çŸ¥é“æ”¹å˜çš„å­—æ®µåç§°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ— æ³•å¾—çŸ¥è¦åˆ·æ–°å“ªéƒ¨åˆ†æ¨¡æ¿ï¼Œæˆ‘ä»¬åªèƒ½å¯¹æ¨¡æ¿è¿›è¡Œå®Œå…¨æ›´æ–°ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡ï¼Œæ€§èƒ½ä¼šå¾ˆå·®ï¼Œæ‰€ä»¥å›åˆ°æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ï¼Œå½“æ•°æ®å¯¹è±¡å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾—çŸ¥å˜åŒ–çš„å±æ€§çš„åç§°æ˜¯å¾ˆå¿…è¦çš„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬çš„ Jsonob åº“è¿˜ä¸èƒ½å®Œæˆè¿™æ ·çš„ä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è¿›ä¸€æ­¥å®Œå–„ã€‚\n\nåœ¨å®Œå–„ä¹‹å‰ï¼Œæˆ‘ä»¬è¦æå‡ºä¸€ä¸ªè·¯å¾„çš„æ¦‚å¿µï¼Œæ‰€è°“è·¯å¾„ï¼Œå°±æ˜¯å˜åŒ–çš„å­—æ®µçš„è·¯å¾„ï¼Œæ¯”å¦‚æœ‰å¦‚ä¸‹æ•°æ®æ¨¡å‹ï¼š\n\n```\nvar data = {\n    a : {\n        b : {\n            c : 'hcy'\n        }\n    }\n}\n```\n\né‚£ä¹ˆå­—æ®µ a çš„è·¯å¾„å°±æ˜¯ç”¨ data.a ï¼Œb çš„è·¯å¾„å°±æ˜¯ data.a.bï¼Œc çš„è·¯å¾„å°±æ˜¯ data.a.b.cã€‚æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²æ¥è¡¨è¿°è·¯å¾„ï¼Œè‡³äºç”¨ä»€ä¹ˆæ¥è¡¨è¿°è·¯å¾„å¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯æˆ‘ä»¬èƒ½å¤Ÿè·å–åˆ°è·¯å¾„ï¼Œæ¯”å¦‚ç”¨æ•°ç»„è¡¨è¿°è·¯å¾„å¯ä»¥è¿™æ ·ï¼š\n\n1ã€ a çš„è·¯å¾„æ˜¯ ['data', 'a']\n1ã€ b çš„è·¯å¾„æ˜¯ ['data', 'a', 'b']\n1ã€ c çš„è·¯å¾„æ˜¯ ['data', 'a', 'b', 'c']\n\næœ‰äº†è·¯å¾„çš„æ¦‚å¿µåï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­å®Œå–„ Jsonob åº“äº†ï¼Œæˆ‘ä»¬åœ¨å­˜å‚¨è·¯å¾„çš„æ—¶å€™é€‰æ‹©çš„æ˜¯æ•°ç»„è¡¨ç¤ºï¼Œç”¨æ•°ç»„å­˜å‚¨è·¯å¾„ï¼Œæˆ‘ä»¬ä¿®æ”¹Jsonobåº“ä»£ç ï¼Œä¿®æ”¹äº† observe æ–¹æ³•å’Œ overrideArrayProto æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾ï¼Œæˆ‘åšäº†æ‰€æœ‰ä¿®æ”¹çš„æ ‡æ³¨ï¼š\n\n![ä¿®æ”¹observeæ–¹æ³•](http://7xlolm.com1.z0.glb.clouddn.com/20160501n.jpg)\n\n![ä¿®æ”¹overrideArrayProtoæ–¹æ³•](http://7xlolm.com1.z0.glb.clouddn.com/20160501m.jpg)\n\næœ€åï¼Œè®©æˆ‘ä»¬å†æ¬¡å°è¯•ä¿®æ”¹ä¸€åˆ‡æ•°ç»„å±æ€§ï¼š\n\n```\nvar callback = function(newVal, oldVal, path){\n    alert('æ–°å€¼ï¼š' + newVal + '----' + 'æ—§å€¼ï¼š' + oldVal + '----è·¯å¾„ï¼š' + path);\n};\n\nvar data = {\n    a: 200,\n    level1: {\n        b: 'str',\n        c: [{w: 90}, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n\nvar j = new Jsonob(data, callback);\n\ndata.level1.c.push(4);              // å‘æ•°ç»„ data.level1.c ä¸­pushä¸€ä¸ªå…ƒç´ \ndata.level1.c[0].w = 100;           // ä¿®æ”¹æ•°ç»„ data.level1.c[0].w çš„å€¼\ndata.level1.b = 'sss';              // ä¿®æ”¹ data.level1.b çš„å€¼\ndata.level1.level2.d = 'msn';       // ä¿®æ”¹ data.level1.level2.d çš„å€¼\n```\n\næˆ‘ä»¬ä¿®æ”¹äº†å››ä¸ªå±æ€§çš„å€¼ï¼Œç„¶åæˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°ä¸­æ¥æ”¶äº† path å‚æ•°ï¼Œè¿™æ ·å½“æ•°æ®æ¨¡å‹å˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½å¤Ÿè·å–åˆ°æ–°æ—§å€¼ï¼Œè¿˜èƒ½å¤ŸçŸ¥é“æ˜¯å“ªä¸ªå±æ€§å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›¸åº”çš„åšä¸€äº›å…¶ä»–çš„äº‹æƒ…ï¼Œæ¯”å¦‚MVVMä¸­çš„æ›´æ–°å…³è”çš„è§†å›¾ï¼Œå°±å¯ä»¥åšåˆ°äº†ã€‚æœ€åæˆ‘ä»¬åˆ·æ–°æµè§ˆå™¨æ¥äº§çœ‹å¼¹å‡ºæ¡†ï¼š\n\n![ä¸€](http://7xlolm.com1.z0.glb.clouddn.com/20160501aa.jpg)\n\n![äºŒ](http://7xlolm.com1.z0.glb.clouddn.com/20160501ab.jpg)\n\n![ä¸‰](http://7xlolm.com1.z0.glb.clouddn.com/20160501ac.jpg)\n\n![å››](http://7xlolm.com1.z0.glb.clouddn.com/20160501ad.jpg)\n\nå›¾ä¸­æˆ‘ç”¨çº¢è‰²åœˆæ ‡å‡ºäº†å˜åŒ–å±æ€§çš„è·¯å¾„ï¼Œç”±äºæˆ‘ä»¬çš„è·¯å¾„æ˜¯æ•°ç»„æ ‡ç¤ºçš„ï¼Œæ‰€ä»¥çœ‹ä¸Šå»æ˜¯ä»¥é€—å·â€œ,â€éš”å¼€çš„ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬å°±ç®—å®Œæˆäº†è¿™ä¸ªè¿·ä½ åº“ï¼Œç›¸ä¿¡è¯»è€…ä¹Ÿæœ‰è‡ªå·±çš„å®ç°æ€è·¯ï¼Œç¬”è€…æ°´å¹³æœ‰é™ï¼Œå¦‚æœå“ªé‡Œæœ‰æ¬ ç¼ºè¿˜å¸Œæœ›å¤§å®¶æŒ‡æ­£ï¼Œå…±åŒè¿›æ­¥ã€‚\n\n\n\n","source":"_posts/2016/04/28/JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–.md","raw":"title: JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–\ndate: 2016-04-28 10:51:17\ncategories:\n- WebFrontEnd\ntags:\n- æ¡†æ¶\n- MVVM\n- observe\n---\n\næˆ‘çš„åšå®¢å§‹ç»ˆéƒ½æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å–œæ¬¢ä»0å¼€å§‹ï¼ŒåŠªåŠ›è®©å°ç™½éƒ½èƒ½çœ‹çš„æ˜ç™½ï¼Œå³ä½¿çœ‹ä¸æ˜ç™½ï¼Œä¹Ÿèƒ½çŸ¥é“æ•´ä½“çš„æ¥é¾™å»è„‰ï¼Œè¿™ç¯‡åšå®¢ä¾ç„¶ç§‰æ‰¿ç€è¿™ä¸ªé£æ ¼ã€‚\nä»¥MVVMæ¨¡å¼ä¸ºä¸»çº¿å»å®ç°çš„JavaScriptæ¡†æ¶éå¸¸æµè¡Œï¼Œè¯¸å¦‚ angularã€Emberã€Polymerã€vue ç­‰ç­‰ï¼Œå®ƒä»¬çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯æ•°æ®çš„åŒå‘ç»‘å®šã€‚è¿™å¯¹äºå°ç™½æ¥è¯´å°±åƒå˜é­”æœ¯ä¸€æ ·ï¼Œä½†æ— è®ºå¯¹è°æ¥è®²ï¼Œå½“ä½ çœ‹åˆ°ä¸€ä¸ªä»¤ä½ æ„Ÿå…´è¶£çš„é­”æœ¯ï¼Œé‚£ä¹ˆæ­ç§˜å®ƒæ€»æ˜¯èƒ½å¸å¼•ä½ çš„çœ¼çƒã€‚\nè¿™ç¯‡æ–‡ç« ä¸»è¦è®²è¿°MVVMå®ç°ä¸­çš„ä¸€éƒ¨åˆ†ï¼šå¦‚ä½•ç›‘æµ‹æ•°æ®çš„å˜åŒ–ã€‚\n\n<!-- more -->\n\n>æ³¨ï¼šæœ¬ç¯‡æ–‡ç« å°†ç”Ÿäº§å‡ºä¸€ä¸ªè¿·ä½ åº“ï¼Œä»£ç æ‰˜ç®¡åœ¨ [https://github.com/HcySunYang/jsonob](https://github.com/HcySunYang/jsonob)ï¼Œç”±äºæœ¬ç¯‡æ–‡ç« ä»£ç é‡‡ç”¨ES6ç¼–å†™ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥åœ¨æµè§ˆå™¨ä¸‹è¿è¡Œï¼Œè¯»è€…åœ¨å®è·µçš„æ—¶å€™å¯ä»¥é‡‡ç”¨è¯¥ä»“åº“çš„ä»£ç ï¼Œcloneä»“åº“åï¼š\n1ã€å®‰è£…ä¾èµ–\nnpm install\n2ã€æ„å»ºé¡¹ç›®\nnpm run build\n3ã€ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ test/index.html æŸ¥çœ‹è¿è¡Œç»“æœ\n\né‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬è¦åšä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬ä¼šå®ç°ä¸€ä¸ªè¿·ä½ åº“ï¼Œè¿™ä¸ªåº“çš„ä½œç”¨æ˜¯ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–ï¼Œå¹¶ä½œå‡ºç›¸åº”çš„é€šçŸ¥ã€‚åº“çš„ä½¿ç”¨æ–¹æ³•å¤§è‡´å¦‚ä¸‹ï¼š\n\n```\n// å®šä¹‰ä¸€ä¸ªå˜åŒ–é€šçŸ¥çš„å›è°ƒ\nvar callback = function(newVal, oldVal){\n    alert(newVal + '----' + oldVal);\n};\n\n// å®šä¹‰ä¸€ä¸ªæ™®é€šå¯¹è±¡ä½œä¸ºæ•°æ®æ¨¡å‹\nvar data = {\n    a: 200,\n    level1: {\n        b: 'str',\n        c: [1, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n\n// å®ä¾‹åŒ–ä¸€ä¸ªç›‘æµ‹å¯¹è±¡ï¼Œå»ç›‘æµ‹æ•°æ®ï¼Œå¹¶åœ¨æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ä½œå‡ºååº”\nvar j = new Jsonob(data, callback);\n```\n\nä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª callback å›è°ƒå‡½æ•°ï¼Œä»¥åŠä¸€ä¸ªä¿å­˜ç€æ™®é€šjsonå¯¹è±¡çš„å˜é‡ data ï¼Œæœ€åå®ä¾‹åŒ–äº†ä¸€ä¸ª ç›‘æµ‹å¯¹è±¡ ï¼Œå¯¹ data è¿›è¡Œå˜åŒ–ç›‘æµ‹ï¼Œå½“å˜åŒ–å‘ç”Ÿçš„æ—¶å€™ï¼Œæ‰§è¡Œç»™å®šçš„å›è°ƒè¿›è¡Œå¿…è¦çš„å˜åŒ–é€šçŸ¥ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€äº›æ‰‹æ®µå°±å¯ä»¥è¾¾åˆ°æ•°æ®ç»‘å®šçš„æ•ˆæœã€‚\n\n## Object.defineProperty ##\n\nES5 æè¿°äº†å±æ€§çš„ç‰¹å¾ï¼Œæå‡ºå¯¹è±¡çš„æ¯ä¸ªå±æ€§éƒ½æœ‰ç‰¹å®šçš„æè¿°ç¬¦ï¼Œä½ ä¹Ÿå¯ä»¥ç†è§£ä¸ºé‚£æ˜¯å±æ€§çš„å±æ€§ã€‚ã€‚ã€‚ã€‚ã€‚\n\nES5æŠŠå±æ€§åˆ†æˆä¸¤ç§ï¼Œä¸€ç§æ˜¯ æ•°æ®å±æ€§ï¼Œ ä¸€ç§æ˜¯ è®¿é—®å™¨å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Object.defineProperty() å»å®šä¹‰ä¸€ä¸ªæ•°æ®å±æ€§æˆ–è®¿é—®å™¨å±æ€§ã€‚å¦‚ä¸‹ä»£ç ï¼š\n\n```\nvar obj = {};\n\nobj.name = 'hcy';\n```\n\nä¸Šé¢çš„ä»£ç æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ç»™è¿™ä¸ªå¯¹è±¡æ·»åŠ äº†ä¸€ä¸ªå±æ€§ nameï¼Œå€¼ä¸º 'hcy'ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Object.defineProperty() æ¥ç»™å¯¹è±¡å®šä¹‰å±æ€§ï¼Œä¸Šé¢çš„ä»£ç ç­‰ä»·äºï¼š\n\n```\nvar obj = {};\n\nObject.defineProperty(obj, 'name', {\n\tvalue: 'hcy',\t\t// å±æ€§çš„å€¼\n\twritable: true,\t\t// æ˜¯å¦å¯å†™\n\tenumerable: true,\t// æ˜¯å¦èƒ½å¤Ÿé€šè¿‡for in æšä¸¾\n\tconfigurable: true\t// æ˜¯å¦å¯ä½¿ç”¨ deleteåˆ é™¤\n})\n```\n\nè¿™æ ·æˆ‘ä»¬å°±ä½¿ç”¨ Object.defineProperty ç»™å¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªå±æ€§ï¼Œè¿™æ ·çš„å±æ€§å°±æ˜¯æ•°æ®å±æ€§ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰è®¿é—®å™¨å±æ€§ï¼š\n\n```\nvar obj = {};\n\nObject.defineProperty(obj, 'age', {\n\tget: function(){\n\t\treturn 20;\n\t},\n\tset: function(newVal){\n\t\tthis.age += 20;\n\t}\n})\n```\n\nè®¿é—®å™¨å±æ€§å…è®¸ä½ å®šä¹‰ä¸€å¯¹å„¿ getter/setter ï¼Œå½“ä½ è¯»å–å±æ€§å€¼çš„æ—¶å€™åº•å±‚ä¼šè°ƒç”¨ get æ–¹æ³•ï¼Œå½“ä½ å»è®¾ç½®å±æ€§å€¼çš„æ—¶å€™ï¼Œåº•å±‚ä¼šè°ƒç”¨ set æ–¹æ³•\n\nçŸ¥é“äº†è¿™ä¸ªå°±å¥½åŠäº†ï¼Œæˆ‘ä»¬å†å›åˆ°æœ€åˆçš„é—®é¢˜ä¸Šé¢ï¼Œå¦‚ä½•æ£€æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š\n\n> éå†å¯¹è±¡çš„å±æ€§ï¼ŒæŠŠå¯¹è±¡çš„å±æ€§éƒ½ä½¿ç”¨ Object.defineProperty è½¬ä¸º  getter/setter ï¼Œè¿™æ ·ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹ä¸€äº›å€¼å¾—æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨setæ–¹æ³•ï¼Œç„¶åæˆ‘ä»¬åœ¨setæ–¹æ³•é‡Œé¢ï¼Œå›è°ƒé€šçŸ¥ï¼Œä¸å°±å¯ä»¥äº†å—ï¼Œæ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š\n\n```\n// index.js\nconst OP = Object.prototype;\n\nexport class Jsonob{\n    constructor(obj, callback){\n        if(OP.toString.call(obj) !== '[object Object]'){\n            console.error('This parameter must be an objectï¼š' + obj);\n        }\n        this.$callback = callback;\n        this.observe(obj);\n    }\n    \n    observe(obj){\n        Object.keys(obj).forEach(function(key, index, keyArray){\n            var val = obj[key];\n            Object.defineProperty(obj, key, {\n                get: function(){\n                    return val;\n                },\n                set: (function(newVal){\n                    this.$callback(newVal);\n                }).bind(this)\n            });\n            \n            if(OP.toString.call(obj[key]) === '[object Object]'){\n                this.observe(obj[key]);\n            }\n            \n        }, this);\n        \n    }\n}\n```\n\nä¸Šé¢ä»£ç é‡‡ç”¨ES6ç¼–å†™ï¼Œindex.jsæ–‡ä»¶ä¸­å¯¼å‡ºäº†ä¸€ä¸ª Jsonob ç±»ï¼Œconstructoræ„é€ å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä¿è¯äº†ä¼ å…¥çš„å¯¹è±¡æ˜¯ä¸€ä¸ª {} æˆ– new Object() ç”Ÿæˆçš„å¯¹è±¡ï¼Œæ¥ç€ç¼“å­˜äº†å›è°ƒå‡½æ•°ï¼Œæœ€åè°ƒç”¨äº†åŸå‹ä¸‹çš„ observe æ–¹æ³•ã€‚\n\nobserveæ–¹æ³•æ˜¯çœŸæ­£å®ç°ç›‘æµ‹å±æ€§çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä½¿ç”¨ Object.keys(obj).forEach å¾ªç¯objæ‰€æœ‰å¯æšä¸¾çš„å±æ€§ï¼Œä½¿ç”¨ Object.defineProperty å°†å±æ€§è½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§ï¼Œç„¶ååˆ¤æ–­å±æ€§çš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯å¯¹è±¡çš„è¯å†è¿›è¡Œé€’å½’è°ƒç”¨ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±èƒ½ä¿è¯ä¸€ä¸ªå¤æ‚çš„æ™®é€šjsonå¯¹è±¡ä¸­çš„å±æ€§ä»¥åŠå€¼ä¸ºå¯¹è±¡çš„å±æ€§çš„å±æ€§éƒ½è½¬æ¢æˆè®¿é—®å™¨å±æ€§ã€‚\n\næœ€åï¼Œåœ¨ Object.defineProperty çš„ set æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº†æŒ‡å®šçš„å›è°ƒï¼Œå¹¶å°†æ–°å€¼ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ã€‚\n\næ¥ä¸‹æ¥æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæµ‹è¯•ä»£ç ï¼Œå»æµ‹è¯•ä¸€ä¸‹ä¸Šé¢çš„ä»£ç æ˜¯å¦å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œåœ¨index.htmlä¸­ï¼ˆ[è¯»è€…å¯ä»¥cloneæ–‡ç« å¼€å§‹é˜¶æ®µç»™å‡ºçš„ä»“åº“](https://github.com/HcySunYang/jsonob)ï¼‰ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š\n\n```\n<html>\n    <head>\n        <meta charset=\"utf-8\" />\n    </head>\n    <body>\n        \n        <script src=\"../dist/jsonob.js\"></script>\n        <script>\n            var Jsonob = Jsonob.Jsonob;\n            \n            var callback = function(newVal){\n                alert(newVal);\n            };\n            \n            var data = {\n                a: 200,\n                level1: {\n                    b: 'str',\n                    c: [1, 2, 3],\n                    level2: {\n                        d: 90\n                    }\n                }\n            }\n            \n            var j = new Jsonob(data, callback);\n            \n            data.a = 250;\n            data.level1.b = 'sss';\n            data.level1.level2.d = 'msn';\n        </script>\n    </body>\n</html>\n```\n\nä¸Šé¢ä»£ç ï¼Œå¾ˆæ¥è¿‘æˆ‘ä»¬æ–‡ç« å¼€å¤´è¦å®ç°çš„ç›®æ ‡ã€‚æˆ‘ä»¬å®šä¹‰äº†å›è°ƒ(callback)å’Œæ•°æ®æ¨¡å‹(data)ï¼Œåœ¨å›è°ƒä¸­æˆ‘ä»¬ä½¿ç”¨ alert å‡½æ•°å¼¹å‡ºæ–°å€¼ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªç›‘æµ‹å®ä¾‹å¹¶æŠŠæ•°æ®å’Œå›è°ƒä½œä¸ºå‚æ•°ä¼ é€’è¿‡å»ï¼Œç„¶åæˆ‘ä»¬è¯•ç€ä¿®æ”¹dataå¯¹è±¡ç›¸é¢çš„å±æ€§ä»¥åŠå­å±æ€§ï¼Œçœ‹çœ‹ä»£ç æ˜¯å¦æŒ‰ç…§æˆ‘ä»¬é¢„æœŸçš„å·¥ä½œï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œå¦‚ä¸‹å›¾\n\n![å¼¹çª—1](http://7xlolm.com1.z0.glb.clouddn.com/20160428a.jpg)\n![å¼¹çª—2](http://7xlolm.com1.z0.glb.clouddn.com/b.jpg)\n![å¼¹çª—3](http://7xlolm.com1.z0.glb.clouddn.com/c.jpg)\n\nå¯ä»¥çœ‹å¼¹å‡ºä¸‰ä¸ªå¯¹è¯æ¡†ï¼Œè¿™è¯´æ˜æˆ‘ä»¬çš„ä»£ç æ­£å¸¸å·¥ä½œäº†ï¼Œæ— è®ºæ˜¯dataå¯¹è±¡çš„å±æ€§ï¼Œè¿˜æ˜¯å­å±æ€§çš„æ”¹å˜ï¼Œéƒ½èƒ½å¤Ÿç›‘æµ‹åˆ°å˜åŒ–ï¼Œå¹¶æ‰§è¡Œæˆ‘ä»¬æŒ‡å®šçš„å›è°ƒã€‚\n\nè¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿå¯èƒ½ç»†å¿ƒçš„æœ‹å‹å¯èƒ½å·²ç»æ„è¯†åˆ°äº†ï¼Œæˆ‘ä»¬åœ¨æ£€æµ‹åˆ°å˜åŒ–å¹¶é€šçŸ¥å›è°ƒæ—¶ï¼Œåªä¼ é€’äº†ä¸€ä¸ªæ–°å€¼(newVal)ï¼Œä½†æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦æ—§å€¼ï¼Œä½†æ˜¯ä»¥ç°åœ¨çš„ç¨‹åºæ¥çœ‹ï¼Œæˆ‘ä»¬è¿˜æ— æ³•ä¼ é€’æ—§å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•ã€‚å¤§å®¶ä»”ç»†çœ‹ä¸Šé¢ index.js ä¸­forEachå¾ªç¯é‡Œé¢çš„ä»£ç ï¼Œæœ‰è¿™æ ·ä¸€æ®µï¼š\n\n```\nvar val = obj[key];\nObject.defineProperty(obj, key, {\n    get: function(){\n        return val;\n    },\n    set: (function(newVal){\n        this.$callback(newVal);\n    }).bind(this)\n});\n```\n\nå®é™…ä¸Šï¼Œval å˜é‡æ‰€å­˜å‚¨çš„ï¼Œå°±æ˜¯æ—§å€¼ï¼Œæˆ‘ä»¬ä¸å¦¨æŠŠä¸Šé¢çš„ä»£ç ä¿®æ”¹æˆä¸‹é¢è¿™æ ·ï¼š\n\n```\nvar oldVal = obj[key];\nObject.defineProperty(obj, key, {\n    get: function(){\n        return oldVal;\n    },\n    set: (function(newVal){\n        if(oldVal !== newVal){\n            if(OP.toString.call(newVal) === '[object Object]'){\n                this.observe(newVal);\n            }\n            this.$callback(newVal, oldVal);\n            oldVal = newVal;\n        }\n        \n    }).bind(this)\n});\n```\n\næˆ‘ä»¬å°†åŸæ¥çš„ val å˜é‡åå­—ä¿®æ”¹æˆ oldVal ï¼Œå¹¶åœ¨setæ–¹æ³•ä¸­è¿›è¡Œäº†æ›´æ”¹åˆ¤æ–­ï¼Œä»…åœ¨å€¼æœ‰æ›´æ”¹çš„æƒ…å†µä¸‹å»åšä¸€äº›äº‹ï¼Œå½“å€¼æœ‰ä¿®æ”¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ¤æ–­äº†æ–°å€¼æ˜¯å¦æ˜¯ç±»ä¼¼ {} æˆ– new Object() å½¢å¼çš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œæˆ‘ä»¬è¦è°ƒç”¨ this.observe æ–¹æ³•å»ç›‘å¬ä¸€ä¸‹æ–°è®¾ç½®çš„å€¼ï¼Œç„¶ååœ¨æŠŠæ—§å€¼ä¼ é€’ç»™å›è°ƒå‡½æ•°ä¹‹åæ›´æ–°ä¸€ä¸‹æ—§å€¼ã€‚\n\næ¥ç€ä¿®æ”¹ test/index.html æ–‡ä»¶ï¼š\n\n```\n<html>\n    <head>\n        <meta charset=\"utf-8\" />\n    </head>\n    <body>\n        \n        <script src=\"../dist/jsonob.js\"></script>\n        <script>\n            var Jsonob = Jsonob.Jsonob;\n            \n            var callback = function(newVal, oldVal){\n                alert('æ–°å€¼ï¼š' + newVal + '----' + 'æ—§å€¼ï¼š' + oldVal);\n            };\n            \n            var data = {\n                a: 200,\n                level1: {\n                    b: 'str',\n                    c: [1, 2, 3],\n                    level2: {\n                        d: 90\n                    }\n                }\n            }\n            \n            var j = new Jsonob(data, callback);\n            \n            data.a = 250;\n            data.a = 260;\n        </script>\n    </body>\n</html>\n```\n\næˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°ä¸­æ¥æ”¶äº†æ–°å€¼å’Œæ—§å€¼ï¼Œåœ¨ä¸‹é¢æˆ‘ä»¬ä¿®æ”¹äº† data.a çš„å€¼ä¸º 250ï¼Œç„¶åè¿è¡Œä»£ç ï¼ŒæŸ¥çœ‹æµè§ˆå™¨çš„åé¦ˆï¼š\n\n![alert1](http://7xlolm.com1.z0.glb.clouddn.com/20160428d.jpg)\n\n![alert1](http://7xlolm.com1.z0.glb.clouddn.com/20160428e.jpg)\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å®Œæˆäº†æœ€æœ€åŸºæœ¬çš„æ™®é€šå¯¹è±¡å˜åŒ–ç›‘æµ‹åº“ï¼Œæ¥ç€ï¼Œæˆ‘ä»¬ç»§ç»­å‘ç°é—®é¢˜ï¼Œæˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹ä¸€ä¸‹æ•°æ®æ¨¡å‹ï¼š\n\n```\nvar data = {\n    a: 200,\n    level1: {\n        b: 'str',\n        c: [1, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n```\n\næˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ data.level1.c çš„å€¼ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„åœ¨æˆ‘ä»¬å·¥ä½œä¸­è‚¯å®šæ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œå½“æ•°ç»„çš„å…ƒç´ å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œä¹Ÿè§†ä¸ºæ•°æ®çš„æ”¹å˜ï¼Œä½†é—æ†¾çš„æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨åº“è¿˜ä¸èƒ½ç›‘æµ‹æ•°ç»„çš„å˜åŒ–ï¼Œæ¯”å¦‚ï¼š\n\n```\ndata.level1.c.push(4);\n```\n\næˆ‘ä»¬å‘æ•°ç»„ä¸­pushäº†ä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯å¹¶ä¸ä¼šè§¦å‘æ”¹å˜ã€‚æ“ä½œæ•°ç»„çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š'push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse' ç­‰ç­‰ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åœ¨ä½¿ç”¨è¿™äº›æ–¹æ³•æ“ä½œæ•°ç»„çš„æ—¶å€™èƒ½å¤Ÿç›‘å¬åˆ°å˜åŒ–å‘¢ï¼Ÿæœ‰è¿™æ ·ä¸€ä¸ªæ€è·¯ï¼Œçœ‹å›¾ï¼š\n\n![å½“ä½ å®šä¹‰ä¸€ä¸ªæ•°ç»„å®ä¾‹çš„æ—¶å€™ï¼Œå®ä¾‹ã€å®ä¾‹çš„__proto__å±æ€§ã€Arrayæ„é€ å‡½æ•°ã€åŸå‹ä¹‹é—´çš„å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/20160501f.jpg)\n\nä¸Šå›¾æ˜¾ç¤ºäº†ï¼Œå½“ä½ é€šè¿‡ var arr1 = [] æˆ–è€… var arr1 = new Array() è¯­å¥åˆ›å»ºä¸€ä¸ªæ•°ç»„å®ä¾‹çš„æ—¶å€™ï¼Œå®ä¾‹ã€å®ä¾‹çš„__proto__å±æ€§ã€Arrayæ„é€ å‡½æ•°ä»¥åŠArrayåŸå‹å››è€…ä¹‹é—´çš„å…³ç³»ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆå®¹çš„å‘ç°ï¼Œæ•°ç»„å®ä¾‹çš„__proto__å±æ€§ï¼Œæ˜¯Array.prototypeçš„å¼•ç”¨ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ arr1.push() è¯­å¥æ“ä½œæ•°ç»„çš„æ—¶å€™ï¼Œæ˜¯è°ƒç”¨åŸå‹ä¸‹çš„pushæ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä¸å¯ä»¥é‡å†™åŸå‹çš„è¿™äº›æ•°ç»„æ–¹æ³•ï¼Œåœ¨è¿™äº›é‡å†™çš„æ–¹æ³•é‡Œé¢å»ç›‘å¬å˜åŒ–å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯åœ¨å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åˆ°åº•è¦æ€ä¹ˆé‡å†™ï¼Œæ¯”å¦‚æˆ‘ä»¬é‡å†™ä¸€ä¸ªæ•°ç»„pushæ–¹æ³•ï¼Œå‘æ•°ç»„æ ˆä¸­æ¨å…¥ä¸€ä¸ªå…ƒç´ ï¼Œéš¾é“æˆ‘ä»¬è¦è¿™æ ·å»é‡å†™å—ï¼š\n\n```\nArray.prototype.push = function(){\n    // ä½ çš„å®ç°æ–¹å¼\n}\n```\n\nç„¶åå†ä¸€æ¬¡å®ç°å…¶ä»–çš„æ•°ç»„æ–¹æ³•ï¼š\n\n```\nArray.prototype.pop = function(){\n    // ä½ çš„å®ç°æ–¹å¼\n}\nArray.prototype.shift = function(){\n    // ä½ çš„å®ç°æ–¹å¼\n}\n...\n```\n\nè¿™ç§å®ç°æ˜¯æœ€ä¸åº”è¯¥è€ƒè™‘çš„ï¼Œæš‚ä¸”ä¸è¯´èƒ½ä¸èƒ½å…¨éƒ¨å®ç°çš„ä¸åŸç”Ÿæ— å¼‚ï¼Œå³ä½¿ä½ å®ç°çš„ä¸åŸç”Ÿæ–¹æ³•åœ¨ä½¿ç”¨æ–¹å¼ä¸Šä¸€æ¨¡ä¸€æ ·ï¼Œå¹¶ä¸”ä¸å½±å“å…¶ä»–ä»£ç çš„è¿è¡Œï¼Œé‚£ä¹ˆåœ¨æ€§èƒ½ä¸Šï¼Œå¯èƒ½å°±ä¸åŸç”Ÿå·®å¾ˆå¤šäº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸Šé¢ æ•°ç»„å®ä¾‹ä»¥åŠæ•°ç»„æ„é€ å‡½æ•°å’ŒåŸå‹ä¹‹é—´çš„å…³ç³»å›¾ ä¸­æ€è€ƒè§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä¸å¯ä»¥åœ¨åŸå‹é“¾ä¸­åŠ ä¸€å±‚ï¼Œå¦‚ä¸‹ï¼š\n\n![æ€è·¯](http://7xlolm.com1.z0.glb.clouddn.com/20160501g.jpg)\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ arr1.__proto__ ä¸ Array.prototype ä¹‹é—´çš„é“¾æ¡ä¸­æ·»åŠ äº†ä¸€ç¯ fakePrototype (å‡çš„åŸå‹)ï¼Œæˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼Œåœ¨ä½¿ç”¨ push ç­‰æ•°ç»„æ–¹æ³•çš„æ—¶å€™ï¼Œè°ƒç”¨çš„æ˜¯ fakePrototype ä¸Šçš„pushæ–¹æ³•ï¼Œç„¶ååœ¨ fakePrototype æ–¹æ³•ä¸­ç®€ä»‹å†å»è°ƒç”¨çœŸæ­£çš„ArrayåŸå‹ä¸Šçš„ push æ–¹æ³•ï¼ŒåŒæ—¶ç›‘å¬å˜åŒ–ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½å®ç°ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š\n\n```\n/*\n *  Object åŸå‹\n */\nconst OP = Object.prototype;\n/*\n *  éœ€è¦é‡å†™çš„æ•°ç»„æ–¹æ³• OAR æ˜¯ overrideArrayMethod çš„ç¼©å†™\n */\nconst OAM = ['push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse'];\n\nexport class Jsonob{\n    constructor(obj, callback){\n        if(OP.toString.call(obj) !== '[object Object]'){\n            console.error('This parameter must be an objectï¼š' + obj);\n        }\n        this.$callback = callback;\n        this.observe(obj);\n    }\n    \n    observe(obj){\n        // å¦‚æœå‘ç° ç›‘æµ‹çš„å¯¹è±¡æ˜¯æ•°ç»„çš„è¯å°±è¦è°ƒç”¨ overrideArrayProto æ–¹æ³•\n        if(OP.toString.call(obj) === '[object Array]'){\n            this.overrideArrayProto(obj);\n        }\n        Object.keys(obj).forEach(function(key, index, keyArray){\n            var oldVal = obj[key];\n            Object.defineProperty(obj, key, {\n                get: function(){\n                    return oldVal;\n                },\n                set: (function(newVal){\n                    if(oldVal !== newVal){\n                        if(OP.toString.call(newVal) === '[object Object]' || OP.toString.call(newVal) === '[object Array]'){\n                            this.observe(newVal);\n                        }\n                        this.$callback(newVal, oldVal);\n                        oldVal = newVal;\n                    }\n                    \n                }).bind(this)\n            });\n            \n            if(OP.toString.call(obj[key]) === '[object Object]' || OP.toString.call(obj[key]) === '[object Array]'){\n                this.observe(obj[key]);\n            }\n            \n        }, this);\n        \n    }\n    \n    overrideArrayProto(array){\n            // ä¿å­˜åŸå§‹ Array åŸå‹\n        var originalProto = Array.prototype,\n            // é€šè¿‡ Object.create æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„åŸå‹å°±æ˜¯Array.prototype\n            overrideProto = Object.create(Array.prototype),\n            self = this,\n            result;\n        // éå†è¦é‡å†™çš„æ•°ç»„æ–¹æ³•\n        Object.keys(OAM).forEach(function(key, index, array){\n            var method = OAM[index],\n                oldArray = [];\n            // ä½¿ç”¨ Object.defineProperty ç»™ overrideProto æ·»åŠ å±æ€§ï¼Œå±æ€§çš„åç§°æ˜¯å¯¹åº”çš„æ•°ç»„å‡½æ•°åï¼Œå€¼æ˜¯å‡½æ•°\n            Object.defineProperty(overrideProto, method, {\n                value: function(){\n                    oldArray = this.slice(0);\n                    \n                    var arg = [].slice.apply(arguments);\n                    // è°ƒç”¨åŸå§‹ åŸå‹ çš„æ•°ç»„æ–¹æ³•\n                    result = originalProto[method].apply(this, arg);\n                    // å¯¹æ–°çš„æ•°ç»„è¿›è¡Œç›‘æµ‹\n                    self.observe(this);\n                    // æ‰§è¡Œå›è°ƒ\n                    self.$callback(this, oldArray);\n                    \n                    return result;\n                },\n                writable: true,\n                enumerable: false,\n                configurable: true\n            });\n        }, this);\n        \n        // æœ€å è®©è¯¥æ•°ç»„å®ä¾‹çš„ __proto__ å±æ€§æŒ‡å‘ å‡çš„åŸå‹ overrideProto\n        array.__proto__ = overrideProto;\n        \n    }\n}\n```\næˆ‘ä»¬æ–°å¢åŠ äº† overrideArrayProto æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ç¨‹åºçš„æœ€ä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªå¸¸é‡ OAM ï¼Œç”¨æ¥å®šä¹‰è¦é‡å†™çš„æ•°ç»„æ–¹æ³•ï¼ŒåŒæ—¶åœ¨ observe æ–¹æ³•ä¸­æ·»åŠ äº†å¯¹æ•°ç»„çš„åˆ¤æ–­ï¼Œæˆ‘ä»¬ä¹Ÿå…è®¸äº†å¯¹æ•°ç»„çš„ç›‘å¬ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†ä»‹ç»ä¸€ä¸‹ overrideArrayProto æ–¹æ³•ã€‚\n\né¡¾åæ€ä¹‰ï¼ŒoverrideArrayProto è¿™ä¸ªæ–¹æ³•æ˜¯é‡å†™äº† Array çš„åŸå‹ï¼Œåœ¨ overrideArrayProto æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä¿å­˜äº†æ•°ç»„çš„åŸå§‹åŸå‹ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªå‡çš„åŸå‹ï¼Œç„¶åéå†éœ€è¦é‡æ–°çš„æ•°ç»„æ–¹æ³•ï¼Œå¹¶å°†è¿™äº›æ–¹æ³•æŒ‚è½½åˆ° overrideProto ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æŒ‚è½½åˆ° overrideProto ä¸Šçš„è¿™äº›æ•°ç»„æ–¹æ³•çš„é‡Œé¢ï¼Œæˆ‘ä»¬è°ƒç”¨äº†åŸå§‹çš„æ•°ç»„åŸå‹ä¸Šçš„æ•°ç»„æ–¹æ³•ï¼Œæœ€åï¼Œæˆ‘ä»¬è®©æ•°ç»„å®ä¾‹çš„ __proto__ å±æ€§æŒ‡å‘ overrideProtoï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº†ä¸Šå›¾ä¸­çš„æ€è·¯ã€‚å¹¶ä¸”å®Œæˆäº†æƒ³è¦è¾¾åˆ°çš„æ•ˆæœï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æˆ‘ä»¬å·²ç»é‡å†™äº†çš„æ•°ç»„æ–¹æ³•å»æ“ä½œæ•°ç»„ï¼ŒæŸ¥çœ‹èƒ½ä¸èƒ½ç›‘æµ‹åˆ°å˜åŒ–ï¼š\n\n```\nvar callback = function(newVal, oldVal){\n    alert('æ–°å€¼ï¼š' + newVal + '----' + 'æ—§å€¼ï¼š' + oldVal);\n};\n\nvar data = {\n    a: 200,\n    level1: {\n        b: 'str',\n        c: [{w: 90}, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n\nvar j = new Jsonob(data, callback);\n\ndata.level1.c.push(4);\n```\n\nåœ¨æµè§ˆå™¨ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ä»£ç æŒ‰ç…§é¢„æœŸè¿è¡Œäº†ï¼š\n\n![å›¾1](http://7xlolm.com1.z0.glb.clouddn.com/20160501h.jpg)\n\nç›´åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å‡ ä¹å®Œç¾çš„ç›‘æµ‹åˆ°æ•°æ®å¯¹è±¡çš„å˜åŒ–äº†ï¼Œå¹¶ä¸”èƒ½å¤ŸçŸ¥é“å˜åŒ–å‰åçš„æ—§å€¼ä¸æ–°å€¼ï¼Œé‚£ä¹ˆè¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å›é¡¾ä¸€ä¸‹å½“æˆ‘ä»¬ä¿®æ”¹æ•°æ®å¯¹è±¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ç¡®èƒ½å¤Ÿè·å–åˆ°æ–°å€¼å’Œæ—§å€¼ï¼Œä½†æ˜¯ä¹Ÿä»…æ­¤è€Œå·²ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ä¿®æ”¹çš„æ˜¯å“ªä¸ªå±æ€§ï¼Œä½†æ˜¯èƒ½å¤ŸçŸ¥é“ä¿®æ”¹çš„å“ªä¸ªå±æ€§å¯¹äºæˆ‘ä»¬æ˜¯ç›¸å½“é‡è¦çš„ã€‚\n\næ¯”å¦‚MVVMä¸­ï¼Œå½“æ•°æ®å¯¹è±¡æ”¹å˜æ—¶ï¼Œè¦å»æ›´æ–°æ¨¡æ¿ï¼Œè€Œæ¨¡æ¿åˆ°æ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯é€šè¿‡æ•°æ®å¯¹è±¡ä¸‹çš„æŸä¸ªå­—æ®µåç§°è¿›è¡Œç»‘å®šçš„ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰å¦‚ä¸‹æ¨¡æ¿ï¼š\n\n```\n<div id=\"box\">\n    <div>{{name}}</div>\n    <div>{{age}}</div>\n    <div>{{sex}}</div>\n</div>\n```\n\nç„¶åæˆ‘ä»¬æœ‰å¦‚ä¸‹æ•°æ®ï¼š\n\n```\nvar data = {\n    name : 'hcy',\n    age : 20,\n    sex : 'ç”·'\n}\n```\n\næœ€åæˆ‘ä»¬é€šè¿‡ viewModule ç®€å†æ¨¡æ¿å’Œæ•°æ®çš„å…³ç³»ï¼š\n\n```\nnew Jsonob(document.getElementById('box'), data);\n```\n\né‚£ä¹ˆå½“æˆ‘ä»¬çš„æ•°æ®æ¨¡å‹dataä¸­çš„æŸä¸ªå±æ€§æ”¹å˜çš„æ—¶å€™ï¼Œæ¯”å¦‚ data.name = 'fuck'ï¼Œå¦‚è‹¥æˆ‘ä»¬ä¸çŸ¥é“æ”¹å˜çš„å­—æ®µåç§°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ— æ³•å¾—çŸ¥è¦åˆ·æ–°å“ªéƒ¨åˆ†æ¨¡æ¿ï¼Œæˆ‘ä»¬åªèƒ½å¯¹æ¨¡æ¿è¿›è¡Œå®Œå…¨æ›´æ–°ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡ï¼Œæ€§èƒ½ä¼šå¾ˆå·®ï¼Œæ‰€ä»¥å›åˆ°æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ï¼Œå½“æ•°æ®å¯¹è±¡å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾—çŸ¥å˜åŒ–çš„å±æ€§çš„åç§°æ˜¯å¾ˆå¿…è¦çš„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬çš„ Jsonob åº“è¿˜ä¸èƒ½å®Œæˆè¿™æ ·çš„ä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è¿›ä¸€æ­¥å®Œå–„ã€‚\n\nåœ¨å®Œå–„ä¹‹å‰ï¼Œæˆ‘ä»¬è¦æå‡ºä¸€ä¸ªè·¯å¾„çš„æ¦‚å¿µï¼Œæ‰€è°“è·¯å¾„ï¼Œå°±æ˜¯å˜åŒ–çš„å­—æ®µçš„è·¯å¾„ï¼Œæ¯”å¦‚æœ‰å¦‚ä¸‹æ•°æ®æ¨¡å‹ï¼š\n\n```\nvar data = {\n    a : {\n        b : {\n            c : 'hcy'\n        }\n    }\n}\n```\n\né‚£ä¹ˆå­—æ®µ a çš„è·¯å¾„å°±æ˜¯ç”¨ data.a ï¼Œb çš„è·¯å¾„å°±æ˜¯ data.a.bï¼Œc çš„è·¯å¾„å°±æ˜¯ data.a.b.cã€‚æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²æ¥è¡¨è¿°è·¯å¾„ï¼Œè‡³äºç”¨ä»€ä¹ˆæ¥è¡¨è¿°è·¯å¾„å¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯æˆ‘ä»¬èƒ½å¤Ÿè·å–åˆ°è·¯å¾„ï¼Œæ¯”å¦‚ç”¨æ•°ç»„è¡¨è¿°è·¯å¾„å¯ä»¥è¿™æ ·ï¼š\n\n1ã€ a çš„è·¯å¾„æ˜¯ ['data', 'a']\n1ã€ b çš„è·¯å¾„æ˜¯ ['data', 'a', 'b']\n1ã€ c çš„è·¯å¾„æ˜¯ ['data', 'a', 'b', 'c']\n\næœ‰äº†è·¯å¾„çš„æ¦‚å¿µåï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­å®Œå–„ Jsonob åº“äº†ï¼Œæˆ‘ä»¬åœ¨å­˜å‚¨è·¯å¾„çš„æ—¶å€™é€‰æ‹©çš„æ˜¯æ•°ç»„è¡¨ç¤ºï¼Œç”¨æ•°ç»„å­˜å‚¨è·¯å¾„ï¼Œæˆ‘ä»¬ä¿®æ”¹Jsonobåº“ä»£ç ï¼Œä¿®æ”¹äº† observe æ–¹æ³•å’Œ overrideArrayProto æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾ï¼Œæˆ‘åšäº†æ‰€æœ‰ä¿®æ”¹çš„æ ‡æ³¨ï¼š\n\n![ä¿®æ”¹observeæ–¹æ³•](http://7xlolm.com1.z0.glb.clouddn.com/20160501n.jpg)\n\n![ä¿®æ”¹overrideArrayProtoæ–¹æ³•](http://7xlolm.com1.z0.glb.clouddn.com/20160501m.jpg)\n\næœ€åï¼Œè®©æˆ‘ä»¬å†æ¬¡å°è¯•ä¿®æ”¹ä¸€åˆ‡æ•°ç»„å±æ€§ï¼š\n\n```\nvar callback = function(newVal, oldVal, path){\n    alert('æ–°å€¼ï¼š' + newVal + '----' + 'æ—§å€¼ï¼š' + oldVal + '----è·¯å¾„ï¼š' + path);\n};\n\nvar data = {\n    a: 200,\n    level1: {\n        b: 'str',\n        c: [{w: 90}, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n\nvar j = new Jsonob(data, callback);\n\ndata.level1.c.push(4);              // å‘æ•°ç»„ data.level1.c ä¸­pushä¸€ä¸ªå…ƒç´ \ndata.level1.c[0].w = 100;           // ä¿®æ”¹æ•°ç»„ data.level1.c[0].w çš„å€¼\ndata.level1.b = 'sss';              // ä¿®æ”¹ data.level1.b çš„å€¼\ndata.level1.level2.d = 'msn';       // ä¿®æ”¹ data.level1.level2.d çš„å€¼\n```\n\næˆ‘ä»¬ä¿®æ”¹äº†å››ä¸ªå±æ€§çš„å€¼ï¼Œç„¶åæˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°ä¸­æ¥æ”¶äº† path å‚æ•°ï¼Œè¿™æ ·å½“æ•°æ®æ¨¡å‹å˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½å¤Ÿè·å–åˆ°æ–°æ—§å€¼ï¼Œè¿˜èƒ½å¤ŸçŸ¥é“æ˜¯å“ªä¸ªå±æ€§å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›¸åº”çš„åšä¸€äº›å…¶ä»–çš„äº‹æƒ…ï¼Œæ¯”å¦‚MVVMä¸­çš„æ›´æ–°å…³è”çš„è§†å›¾ï¼Œå°±å¯ä»¥åšåˆ°äº†ã€‚æœ€åæˆ‘ä»¬åˆ·æ–°æµè§ˆå™¨æ¥äº§çœ‹å¼¹å‡ºæ¡†ï¼š\n\n![ä¸€](http://7xlolm.com1.z0.glb.clouddn.com/20160501aa.jpg)\n\n![äºŒ](http://7xlolm.com1.z0.glb.clouddn.com/20160501ab.jpg)\n\n![ä¸‰](http://7xlolm.com1.z0.glb.clouddn.com/20160501ac.jpg)\n\n![å››](http://7xlolm.com1.z0.glb.clouddn.com/20160501ad.jpg)\n\nå›¾ä¸­æˆ‘ç”¨çº¢è‰²åœˆæ ‡å‡ºäº†å˜åŒ–å±æ€§çš„è·¯å¾„ï¼Œç”±äºæˆ‘ä»¬çš„è·¯å¾„æ˜¯æ•°ç»„æ ‡ç¤ºçš„ï¼Œæ‰€ä»¥çœ‹ä¸Šå»æ˜¯ä»¥é€—å·â€œ,â€éš”å¼€çš„ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬å°±ç®—å®Œæˆäº†è¿™ä¸ªè¿·ä½ åº“ï¼Œç›¸ä¿¡è¯»è€…ä¹Ÿæœ‰è‡ªå·±çš„å®ç°æ€è·¯ï¼Œç¬”è€…æ°´å¹³æœ‰é™ï¼Œå¦‚æœå“ªé‡Œæœ‰æ¬ ç¼ºè¿˜å¸Œæœ›å¤§å®¶æŒ‡æ­£ï¼Œå…±åŒè¿›æ­¥ã€‚\n\n\n\n","slug":"JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–","published":1,"updated":"2016-05-16T11:31:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx51y001147fyuvl8nzcz","content":"<p>æˆ‘çš„åšå®¢å§‹ç»ˆéƒ½æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å–œæ¬¢ä»0å¼€å§‹ï¼ŒåŠªåŠ›è®©å°ç™½éƒ½èƒ½çœ‹çš„æ˜ç™½ï¼Œå³ä½¿çœ‹ä¸æ˜ç™½ï¼Œä¹Ÿèƒ½çŸ¥é“æ•´ä½“çš„æ¥é¾™å»è„‰ï¼Œè¿™ç¯‡åšå®¢ä¾ç„¶ç§‰æ‰¿ç€è¿™ä¸ªé£æ ¼ã€‚<br>ä»¥MVVMæ¨¡å¼ä¸ºä¸»çº¿å»å®ç°çš„JavaScriptæ¡†æ¶éå¸¸æµè¡Œï¼Œè¯¸å¦‚ angularã€Emberã€Polymerã€vue ç­‰ç­‰ï¼Œå®ƒä»¬çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯æ•°æ®çš„åŒå‘ç»‘å®šã€‚è¿™å¯¹äºå°ç™½æ¥è¯´å°±åƒå˜é­”æœ¯ä¸€æ ·ï¼Œä½†æ— è®ºå¯¹è°æ¥è®²ï¼Œå½“ä½ çœ‹åˆ°ä¸€ä¸ªä»¤ä½ æ„Ÿå…´è¶£çš„é­”æœ¯ï¼Œé‚£ä¹ˆæ­ç§˜å®ƒæ€»æ˜¯èƒ½å¸å¼•ä½ çš„çœ¼çƒã€‚<br>è¿™ç¯‡æ–‡ç« ä¸»è¦è®²è¿°MVVMå®ç°ä¸­çš„ä¸€éƒ¨åˆ†ï¼šå¦‚ä½•ç›‘æµ‹æ•°æ®çš„å˜åŒ–ã€‚</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>æ³¨ï¼šæœ¬ç¯‡æ–‡ç« å°†ç”Ÿäº§å‡ºä¸€ä¸ªè¿·ä½ åº“ï¼Œä»£ç æ‰˜ç®¡åœ¨ <a href=\"https://github.com/HcySunYang/jsonob\" target=\"_blank\" rel=\"external\">https://github.com/HcySunYang/jsonob</a>ï¼Œç”±äºæœ¬ç¯‡æ–‡ç« ä»£ç é‡‡ç”¨ES6ç¼–å†™ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥åœ¨æµè§ˆå™¨ä¸‹è¿è¡Œï¼Œè¯»è€…åœ¨å®è·µçš„æ—¶å€™å¯ä»¥é‡‡ç”¨è¯¥ä»“åº“çš„ä»£ç ï¼Œcloneä»“åº“åï¼š<br>1ã€å®‰è£…ä¾èµ–<br>npm install<br>2ã€æ„å»ºé¡¹ç›®<br>npm run build<br>3ã€ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ test/index.html æŸ¥çœ‹è¿è¡Œç»“æœ</p>\n</blockquote>\n<p>é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬è¦åšä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬ä¼šå®ç°ä¸€ä¸ªè¿·ä½ åº“ï¼Œè¿™ä¸ªåº“çš„ä½œç”¨æ˜¯ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–ï¼Œå¹¶ä½œå‡ºç›¸åº”çš„é€šçŸ¥ã€‚åº“çš„ä½¿ç”¨æ–¹æ³•å¤§è‡´å¦‚ä¸‹ï¼š</p>\n<pre><code>// å®šä¹‰ä¸€ä¸ªå˜åŒ–é€šçŸ¥çš„å›è°ƒ\nvar callback = function(newVal, oldVal){\n    alert(newVal + &#39;----&#39; + oldVal);\n};\n\n// å®šä¹‰ä¸€ä¸ªæ™®é€šå¯¹è±¡ä½œä¸ºæ•°æ®æ¨¡å‹\nvar data = {\n    a: 200,\n    level1: {\n        b: &#39;str&#39;,\n        c: [1, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n\n// å®ä¾‹åŒ–ä¸€ä¸ªç›‘æµ‹å¯¹è±¡ï¼Œå»ç›‘æµ‹æ•°æ®ï¼Œå¹¶åœ¨æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ä½œå‡ºååº”\nvar j = new Jsonob(data, callback);\n</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª callback å›è°ƒå‡½æ•°ï¼Œä»¥åŠä¸€ä¸ªä¿å­˜ç€æ™®é€šjsonå¯¹è±¡çš„å˜é‡ data ï¼Œæœ€åå®ä¾‹åŒ–äº†ä¸€ä¸ª ç›‘æµ‹å¯¹è±¡ ï¼Œå¯¹ data è¿›è¡Œå˜åŒ–ç›‘æµ‹ï¼Œå½“å˜åŒ–å‘ç”Ÿçš„æ—¶å€™ï¼Œæ‰§è¡Œç»™å®šçš„å›è°ƒè¿›è¡Œå¿…è¦çš„å˜åŒ–é€šçŸ¥ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€äº›æ‰‹æ®µå°±å¯ä»¥è¾¾åˆ°æ•°æ®ç»‘å®šçš„æ•ˆæœã€‚</p>\n<h2 id=\"Object-defineProperty\"><a href=\"#Object-defineProperty\" class=\"headerlink\" title=\"Object.defineProperty\"></a>Object.defineProperty</h2><p>ES5 æè¿°äº†å±æ€§çš„ç‰¹å¾ï¼Œæå‡ºå¯¹è±¡çš„æ¯ä¸ªå±æ€§éƒ½æœ‰ç‰¹å®šçš„æè¿°ç¬¦ï¼Œä½ ä¹Ÿå¯ä»¥ç†è§£ä¸ºé‚£æ˜¯å±æ€§çš„å±æ€§ã€‚ã€‚ã€‚ã€‚ã€‚</p>\n<p>ES5æŠŠå±æ€§åˆ†æˆä¸¤ç§ï¼Œä¸€ç§æ˜¯ æ•°æ®å±æ€§ï¼Œ ä¸€ç§æ˜¯ è®¿é—®å™¨å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Object.defineProperty() å»å®šä¹‰ä¸€ä¸ªæ•°æ®å±æ€§æˆ–è®¿é—®å™¨å±æ€§ã€‚å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>var obj = {};\n\nobj.name = &#39;hcy&#39;;\n</code></pre><p>ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ç»™è¿™ä¸ªå¯¹è±¡æ·»åŠ äº†ä¸€ä¸ªå±æ€§ nameï¼Œå€¼ä¸º â€˜hcyâ€™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Object.defineProperty() æ¥ç»™å¯¹è±¡å®šä¹‰å±æ€§ï¼Œä¸Šé¢çš„ä»£ç ç­‰ä»·äºï¼š</p>\n<pre><code>var obj = {};\n\nObject.defineProperty(obj, &#39;name&#39;, {\n    value: &#39;hcy&#39;,        // å±æ€§çš„å€¼\n    writable: true,        // æ˜¯å¦å¯å†™\n    enumerable: true,    // æ˜¯å¦èƒ½å¤Ÿé€šè¿‡for in æšä¸¾\n    configurable: true    // æ˜¯å¦å¯ä½¿ç”¨ deleteåˆ é™¤\n})\n</code></pre><p>è¿™æ ·æˆ‘ä»¬å°±ä½¿ç”¨ Object.defineProperty ç»™å¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªå±æ€§ï¼Œè¿™æ ·çš„å±æ€§å°±æ˜¯æ•°æ®å±æ€§ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰è®¿é—®å™¨å±æ€§ï¼š</p>\n<pre><code>var obj = {};\n\nObject.defineProperty(obj, &#39;age&#39;, {\n    get: function(){\n        return 20;\n    },\n    set: function(newVal){\n        this.age += 20;\n    }\n})\n</code></pre><p>è®¿é—®å™¨å±æ€§å…è®¸ä½ å®šä¹‰ä¸€å¯¹å„¿ getter/setter ï¼Œå½“ä½ è¯»å–å±æ€§å€¼çš„æ—¶å€™åº•å±‚ä¼šè°ƒç”¨ get æ–¹æ³•ï¼Œå½“ä½ å»è®¾ç½®å±æ€§å€¼çš„æ—¶å€™ï¼Œåº•å±‚ä¼šè°ƒç”¨ set æ–¹æ³•</p>\n<p>çŸ¥é“äº†è¿™ä¸ªå°±å¥½åŠäº†ï¼Œæˆ‘ä»¬å†å›åˆ°æœ€åˆçš„é—®é¢˜ä¸Šé¢ï¼Œå¦‚ä½•æ£€æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>\n<blockquote>\n<p>éå†å¯¹è±¡çš„å±æ€§ï¼ŒæŠŠå¯¹è±¡çš„å±æ€§éƒ½ä½¿ç”¨ Object.defineProperty è½¬ä¸º  getter/setter ï¼Œè¿™æ ·ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹ä¸€äº›å€¼å¾—æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨setæ–¹æ³•ï¼Œç„¶åæˆ‘ä»¬åœ¨setæ–¹æ³•é‡Œé¢ï¼Œå›è°ƒé€šçŸ¥ï¼Œä¸å°±å¯ä»¥äº†å—ï¼Œæ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>\n</blockquote>\n<pre><code>// index.js\nconst OP = Object.prototype;\n\nexport class Jsonob{\n    constructor(obj, callback){\n        if(OP.toString.call(obj) !== &#39;[object Object]&#39;){\n            console.error(&#39;This parameter must be an objectï¼š&#39; + obj);\n        }\n        this.$callback = callback;\n        this.observe(obj);\n    }\n\n    observe(obj){\n        Object.keys(obj).forEach(function(key, index, keyArray){\n            var val = obj[key];\n            Object.defineProperty(obj, key, {\n                get: function(){\n                    return val;\n                },\n                set: (function(newVal){\n                    this.$callback(newVal);\n                }).bind(this)\n            });\n\n            if(OP.toString.call(obj[key]) === &#39;[object Object]&#39;){\n                this.observe(obj[key]);\n            }\n\n        }, this);\n\n    }\n}\n</code></pre><p>ä¸Šé¢ä»£ç é‡‡ç”¨ES6ç¼–å†™ï¼Œindex.jsæ–‡ä»¶ä¸­å¯¼å‡ºäº†ä¸€ä¸ª Jsonob ç±»ï¼Œconstructoræ„é€ å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä¿è¯äº†ä¼ å…¥çš„å¯¹è±¡æ˜¯ä¸€ä¸ª {} æˆ– new Object() ç”Ÿæˆçš„å¯¹è±¡ï¼Œæ¥ç€ç¼“å­˜äº†å›è°ƒå‡½æ•°ï¼Œæœ€åè°ƒç”¨äº†åŸå‹ä¸‹çš„ observe æ–¹æ³•ã€‚</p>\n<p>observeæ–¹æ³•æ˜¯çœŸæ­£å®ç°ç›‘æµ‹å±æ€§çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä½¿ç”¨ Object.keys(obj).forEach å¾ªç¯objæ‰€æœ‰å¯æšä¸¾çš„å±æ€§ï¼Œä½¿ç”¨ Object.defineProperty å°†å±æ€§è½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§ï¼Œç„¶ååˆ¤æ–­å±æ€§çš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯å¯¹è±¡çš„è¯å†è¿›è¡Œé€’å½’è°ƒç”¨ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±èƒ½ä¿è¯ä¸€ä¸ªå¤æ‚çš„æ™®é€šjsonå¯¹è±¡ä¸­çš„å±æ€§ä»¥åŠå€¼ä¸ºå¯¹è±¡çš„å±æ€§çš„å±æ€§éƒ½è½¬æ¢æˆè®¿é—®å™¨å±æ€§ã€‚</p>\n<p>æœ€åï¼Œåœ¨ Object.defineProperty çš„ set æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº†æŒ‡å®šçš„å›è°ƒï¼Œå¹¶å°†æ–°å€¼ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ã€‚</p>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæµ‹è¯•ä»£ç ï¼Œå»æµ‹è¯•ä¸€ä¸‹ä¸Šé¢çš„ä»£ç æ˜¯å¦å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œåœ¨index.htmlä¸­ï¼ˆ<a href=\"https://github.com/HcySunYang/jsonob\" target=\"_blank\" rel=\"external\">è¯»è€…å¯ä»¥cloneæ–‡ç« å¼€å§‹é˜¶æ®µç»™å‡ºçš„ä»“åº“</a>ï¼‰ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n\n        &lt;script src=&quot;../dist/jsonob.js&quot;&gt;&lt;/script&gt;\n        &lt;script&gt;\n            var Jsonob = Jsonob.Jsonob;\n\n            var callback = function(newVal){\n                alert(newVal);\n            };\n\n            var data = {\n                a: 200,\n                level1: {\n                    b: &#39;str&#39;,\n                    c: [1, 2, 3],\n                    level2: {\n                        d: 90\n                    }\n                }\n            }\n\n            var j = new Jsonob(data, callback);\n\n            data.a = 250;\n            data.level1.b = &#39;sss&#39;;\n            data.level1.level2.d = &#39;msn&#39;;\n        &lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ä¸Šé¢ä»£ç ï¼Œå¾ˆæ¥è¿‘æˆ‘ä»¬æ–‡ç« å¼€å¤´è¦å®ç°çš„ç›®æ ‡ã€‚æˆ‘ä»¬å®šä¹‰äº†å›è°ƒ(callback)å’Œæ•°æ®æ¨¡å‹(data)ï¼Œåœ¨å›è°ƒä¸­æˆ‘ä»¬ä½¿ç”¨ alert å‡½æ•°å¼¹å‡ºæ–°å€¼ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªç›‘æµ‹å®ä¾‹å¹¶æŠŠæ•°æ®å’Œå›è°ƒä½œä¸ºå‚æ•°ä¼ é€’è¿‡å»ï¼Œç„¶åæˆ‘ä»¬è¯•ç€ä¿®æ”¹dataå¯¹è±¡ç›¸é¢çš„å±æ€§ä»¥åŠå­å±æ€§ï¼Œçœ‹çœ‹ä»£ç æ˜¯å¦æŒ‰ç…§æˆ‘ä»¬é¢„æœŸçš„å·¥ä½œï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œå¦‚ä¸‹å›¾</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160428a.jpg\" alt=\"å¼¹çª—1\"><br><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/b.jpg\" alt=\"å¼¹çª—2\"><br><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/c.jpg\" alt=\"å¼¹çª—3\"></p>\n<p>å¯ä»¥çœ‹å¼¹å‡ºä¸‰ä¸ªå¯¹è¯æ¡†ï¼Œè¿™è¯´æ˜æˆ‘ä»¬çš„ä»£ç æ­£å¸¸å·¥ä½œäº†ï¼Œæ— è®ºæ˜¯dataå¯¹è±¡çš„å±æ€§ï¼Œè¿˜æ˜¯å­å±æ€§çš„æ”¹å˜ï¼Œéƒ½èƒ½å¤Ÿç›‘æµ‹åˆ°å˜åŒ–ï¼Œå¹¶æ‰§è¡Œæˆ‘ä»¬æŒ‡å®šçš„å›è°ƒã€‚</p>\n<p>è¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿå¯èƒ½ç»†å¿ƒçš„æœ‹å‹å¯èƒ½å·²ç»æ„è¯†åˆ°äº†ï¼Œæˆ‘ä»¬åœ¨æ£€æµ‹åˆ°å˜åŒ–å¹¶é€šçŸ¥å›è°ƒæ—¶ï¼Œåªä¼ é€’äº†ä¸€ä¸ªæ–°å€¼(newVal)ï¼Œä½†æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦æ—§å€¼ï¼Œä½†æ˜¯ä»¥ç°åœ¨çš„ç¨‹åºæ¥çœ‹ï¼Œæˆ‘ä»¬è¿˜æ— æ³•ä¼ é€’æ—§å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•ã€‚å¤§å®¶ä»”ç»†çœ‹ä¸Šé¢ index.js ä¸­forEachå¾ªç¯é‡Œé¢çš„ä»£ç ï¼Œæœ‰è¿™æ ·ä¸€æ®µï¼š</p>\n<pre><code>var val = obj[key];\nObject.defineProperty(obj, key, {\n    get: function(){\n        return val;\n    },\n    set: (function(newVal){\n        this.$callback(newVal);\n    }).bind(this)\n});\n</code></pre><p>å®é™…ä¸Šï¼Œval å˜é‡æ‰€å­˜å‚¨çš„ï¼Œå°±æ˜¯æ—§å€¼ï¼Œæˆ‘ä»¬ä¸å¦¨æŠŠä¸Šé¢çš„ä»£ç ä¿®æ”¹æˆä¸‹é¢è¿™æ ·ï¼š</p>\n<pre><code>var oldVal = obj[key];\nObject.defineProperty(obj, key, {\n    get: function(){\n        return oldVal;\n    },\n    set: (function(newVal){\n        if(oldVal !== newVal){\n            if(OP.toString.call(newVal) === &#39;[object Object]&#39;){\n                this.observe(newVal);\n            }\n            this.$callback(newVal, oldVal);\n            oldVal = newVal;\n        }\n\n    }).bind(this)\n});\n</code></pre><p>æˆ‘ä»¬å°†åŸæ¥çš„ val å˜é‡åå­—ä¿®æ”¹æˆ oldVal ï¼Œå¹¶åœ¨setæ–¹æ³•ä¸­è¿›è¡Œäº†æ›´æ”¹åˆ¤æ–­ï¼Œä»…åœ¨å€¼æœ‰æ›´æ”¹çš„æƒ…å†µä¸‹å»åšä¸€äº›äº‹ï¼Œå½“å€¼æœ‰ä¿®æ”¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ¤æ–­äº†æ–°å€¼æ˜¯å¦æ˜¯ç±»ä¼¼ {} æˆ– new Object() å½¢å¼çš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œæˆ‘ä»¬è¦è°ƒç”¨ this.observe æ–¹æ³•å»ç›‘å¬ä¸€ä¸‹æ–°è®¾ç½®çš„å€¼ï¼Œç„¶ååœ¨æŠŠæ—§å€¼ä¼ é€’ç»™å›è°ƒå‡½æ•°ä¹‹åæ›´æ–°ä¸€ä¸‹æ—§å€¼ã€‚</p>\n<p>æ¥ç€ä¿®æ”¹ test/index.html æ–‡ä»¶ï¼š</p>\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n\n        &lt;script src=&quot;../dist/jsonob.js&quot;&gt;&lt;/script&gt;\n        &lt;script&gt;\n            var Jsonob = Jsonob.Jsonob;\n\n            var callback = function(newVal, oldVal){\n                alert(&#39;æ–°å€¼ï¼š&#39; + newVal + &#39;----&#39; + &#39;æ—§å€¼ï¼š&#39; + oldVal);\n            };\n\n            var data = {\n                a: 200,\n                level1: {\n                    b: &#39;str&#39;,\n                    c: [1, 2, 3],\n                    level2: {\n                        d: 90\n                    }\n                }\n            }\n\n            var j = new Jsonob(data, callback);\n\n            data.a = 250;\n            data.a = 260;\n        &lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>æˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°ä¸­æ¥æ”¶äº†æ–°å€¼å’Œæ—§å€¼ï¼Œåœ¨ä¸‹é¢æˆ‘ä»¬ä¿®æ”¹äº† data.a çš„å€¼ä¸º 250ï¼Œç„¶åè¿è¡Œä»£ç ï¼ŒæŸ¥çœ‹æµè§ˆå™¨çš„åé¦ˆï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160428d.jpg\" alt=\"alert1\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160428e.jpg\" alt=\"alert1\"></p>\n<p>è¿™æ ·ï¼Œæˆ‘ä»¬å®Œæˆäº†æœ€æœ€åŸºæœ¬çš„æ™®é€šå¯¹è±¡å˜åŒ–ç›‘æµ‹åº“ï¼Œæ¥ç€ï¼Œæˆ‘ä»¬ç»§ç»­å‘ç°é—®é¢˜ï¼Œæˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹ä¸€ä¸‹æ•°æ®æ¨¡å‹ï¼š</p>\n<pre><code>var data = {\n    a: 200,\n    level1: {\n        b: &#39;str&#39;,\n        c: [1, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n</code></pre><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ data.level1.c çš„å€¼ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„åœ¨æˆ‘ä»¬å·¥ä½œä¸­è‚¯å®šæ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œå½“æ•°ç»„çš„å…ƒç´ å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œä¹Ÿè§†ä¸ºæ•°æ®çš„æ”¹å˜ï¼Œä½†é—æ†¾çš„æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨åº“è¿˜ä¸èƒ½ç›‘æµ‹æ•°ç»„çš„å˜åŒ–ï¼Œæ¯”å¦‚ï¼š</p>\n<pre><code>data.level1.c.push(4);\n</code></pre><p>æˆ‘ä»¬å‘æ•°ç»„ä¸­pushäº†ä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯å¹¶ä¸ä¼šè§¦å‘æ”¹å˜ã€‚æ“ä½œæ•°ç»„çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼šâ€™pushâ€™, â€˜popâ€™, â€˜shiftâ€™, â€˜unshiftâ€™, â€˜spliceâ€™, â€˜sortâ€™, â€˜reverseâ€™ ç­‰ç­‰ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åœ¨ä½¿ç”¨è¿™äº›æ–¹æ³•æ“ä½œæ•°ç»„çš„æ—¶å€™èƒ½å¤Ÿç›‘å¬åˆ°å˜åŒ–å‘¢ï¼Ÿæœ‰è¿™æ ·ä¸€ä¸ªæ€è·¯ï¼Œçœ‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501f.jpg\" alt=\"å½“ä½ å®šä¹‰ä¸€ä¸ªæ•°ç»„å®ä¾‹çš„æ—¶å€™ï¼Œå®ä¾‹ã€å®ä¾‹çš„__proto__å±æ€§ã€Arrayæ„é€ å‡½æ•°ã€åŸå‹ä¹‹é—´çš„å…³ç³»\"></p>\n<p>ä¸Šå›¾æ˜¾ç¤ºäº†ï¼Œå½“ä½ é€šè¿‡ var arr1 = [] æˆ–è€… var arr1 = new Array() è¯­å¥åˆ›å»ºä¸€ä¸ªæ•°ç»„å®ä¾‹çš„æ—¶å€™ï¼Œå®ä¾‹ã€å®ä¾‹çš„<strong>proto</strong>å±æ€§ã€Arrayæ„é€ å‡½æ•°ä»¥åŠArrayåŸå‹å››è€…ä¹‹é—´çš„å…³ç³»ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆå®¹çš„å‘ç°ï¼Œæ•°ç»„å®ä¾‹çš„<strong>proto</strong>å±æ€§ï¼Œæ˜¯Array.prototypeçš„å¼•ç”¨ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ arr1.push() è¯­å¥æ“ä½œæ•°ç»„çš„æ—¶å€™ï¼Œæ˜¯è°ƒç”¨åŸå‹ä¸‹çš„pushæ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä¸å¯ä»¥é‡å†™åŸå‹çš„è¿™äº›æ•°ç»„æ–¹æ³•ï¼Œåœ¨è¿™äº›é‡å†™çš„æ–¹æ³•é‡Œé¢å»ç›‘å¬å˜åŒ–å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯åœ¨å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åˆ°åº•è¦æ€ä¹ˆé‡å†™ï¼Œæ¯”å¦‚æˆ‘ä»¬é‡å†™ä¸€ä¸ªæ•°ç»„pushæ–¹æ³•ï¼Œå‘æ•°ç»„æ ˆä¸­æ¨å…¥ä¸€ä¸ªå…ƒç´ ï¼Œéš¾é“æˆ‘ä»¬è¦è¿™æ ·å»é‡å†™å—ï¼š</p>\n<pre><code>Array.prototype.push = function(){\n    // ä½ çš„å®ç°æ–¹å¼\n}\n</code></pre><p>ç„¶åå†ä¸€æ¬¡å®ç°å…¶ä»–çš„æ•°ç»„æ–¹æ³•ï¼š</p>\n<pre><code>Array.prototype.pop = function(){\n    // ä½ çš„å®ç°æ–¹å¼\n}\nArray.prototype.shift = function(){\n    // ä½ çš„å®ç°æ–¹å¼\n}\n...\n</code></pre><p>è¿™ç§å®ç°æ˜¯æœ€ä¸åº”è¯¥è€ƒè™‘çš„ï¼Œæš‚ä¸”ä¸è¯´èƒ½ä¸èƒ½å…¨éƒ¨å®ç°çš„ä¸åŸç”Ÿæ— å¼‚ï¼Œå³ä½¿ä½ å®ç°çš„ä¸åŸç”Ÿæ–¹æ³•åœ¨ä½¿ç”¨æ–¹å¼ä¸Šä¸€æ¨¡ä¸€æ ·ï¼Œå¹¶ä¸”ä¸å½±å“å…¶ä»–ä»£ç çš„è¿è¡Œï¼Œé‚£ä¹ˆåœ¨æ€§èƒ½ä¸Šï¼Œå¯èƒ½å°±ä¸åŸç”Ÿå·®å¾ˆå¤šäº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸Šé¢ æ•°ç»„å®ä¾‹ä»¥åŠæ•°ç»„æ„é€ å‡½æ•°å’ŒåŸå‹ä¹‹é—´çš„å…³ç³»å›¾ ä¸­æ€è€ƒè§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä¸å¯ä»¥åœ¨åŸå‹é“¾ä¸­åŠ ä¸€å±‚ï¼Œå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501g.jpg\" alt=\"æ€è·¯\"></p>\n<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ arr1.<strong>proto</strong> ä¸ Array.prototype ä¹‹é—´çš„é“¾æ¡ä¸­æ·»åŠ äº†ä¸€ç¯ fakePrototype (å‡çš„åŸå‹)ï¼Œæˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼Œåœ¨ä½¿ç”¨ push ç­‰æ•°ç»„æ–¹æ³•çš„æ—¶å€™ï¼Œè°ƒç”¨çš„æ˜¯ fakePrototype ä¸Šçš„pushæ–¹æ³•ï¼Œç„¶ååœ¨ fakePrototype æ–¹æ³•ä¸­ç®€ä»‹å†å»è°ƒç”¨çœŸæ­£çš„ArrayåŸå‹ä¸Šçš„ push æ–¹æ³•ï¼ŒåŒæ—¶ç›‘å¬å˜åŒ–ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½å®ç°ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code>/*\n *  Object åŸå‹\n */\nconst OP = Object.prototype;\n/*\n *  éœ€è¦é‡å†™çš„æ•°ç»„æ–¹æ³• OAR æ˜¯ overrideArrayMethod çš„ç¼©å†™\n */\nconst OAM = [&#39;push&#39;, &#39;pop&#39;, &#39;shift&#39;, &#39;unshift&#39;, &#39;splice&#39;, &#39;sort&#39;, &#39;reverse&#39;];\n\nexport class Jsonob{\n    constructor(obj, callback){\n        if(OP.toString.call(obj) !== &#39;[object Object]&#39;){\n            console.error(&#39;This parameter must be an objectï¼š&#39; + obj);\n        }\n        this.$callback = callback;\n        this.observe(obj);\n    }\n\n    observe(obj){\n        // å¦‚æœå‘ç° ç›‘æµ‹çš„å¯¹è±¡æ˜¯æ•°ç»„çš„è¯å°±è¦è°ƒç”¨ overrideArrayProto æ–¹æ³•\n        if(OP.toString.call(obj) === &#39;[object Array]&#39;){\n            this.overrideArrayProto(obj);\n        }\n        Object.keys(obj).forEach(function(key, index, keyArray){\n            var oldVal = obj[key];\n            Object.defineProperty(obj, key, {\n                get: function(){\n                    return oldVal;\n                },\n                set: (function(newVal){\n                    if(oldVal !== newVal){\n                        if(OP.toString.call(newVal) === &#39;[object Object]&#39; || OP.toString.call(newVal) === &#39;[object Array]&#39;){\n                            this.observe(newVal);\n                        }\n                        this.$callback(newVal, oldVal);\n                        oldVal = newVal;\n                    }\n\n                }).bind(this)\n            });\n\n            if(OP.toString.call(obj[key]) === &#39;[object Object]&#39; || OP.toString.call(obj[key]) === &#39;[object Array]&#39;){\n                this.observe(obj[key]);\n            }\n\n        }, this);\n\n    }\n\n    overrideArrayProto(array){\n            // ä¿å­˜åŸå§‹ Array åŸå‹\n        var originalProto = Array.prototype,\n            // é€šè¿‡ Object.create æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„åŸå‹å°±æ˜¯Array.prototype\n            overrideProto = Object.create(Array.prototype),\n            self = this,\n            result;\n        // éå†è¦é‡å†™çš„æ•°ç»„æ–¹æ³•\n        Object.keys(OAM).forEach(function(key, index, array){\n            var method = OAM[index],\n                oldArray = [];\n            // ä½¿ç”¨ Object.defineProperty ç»™ overrideProto æ·»åŠ å±æ€§ï¼Œå±æ€§çš„åç§°æ˜¯å¯¹åº”çš„æ•°ç»„å‡½æ•°åï¼Œå€¼æ˜¯å‡½æ•°\n            Object.defineProperty(overrideProto, method, {\n                value: function(){\n                    oldArray = this.slice(0);\n\n                    var arg = [].slice.apply(arguments);\n                    // è°ƒç”¨åŸå§‹ åŸå‹ çš„æ•°ç»„æ–¹æ³•\n                    result = originalProto[method].apply(this, arg);\n                    // å¯¹æ–°çš„æ•°ç»„è¿›è¡Œç›‘æµ‹\n                    self.observe(this);\n                    // æ‰§è¡Œå›è°ƒ\n                    self.$callback(this, oldArray);\n\n                    return result;\n                },\n                writable: true,\n                enumerable: false,\n                configurable: true\n            });\n        }, this);\n\n        // æœ€å è®©è¯¥æ•°ç»„å®ä¾‹çš„ __proto__ å±æ€§æŒ‡å‘ å‡çš„åŸå‹ overrideProto\n        array.__proto__ = overrideProto;\n\n    }\n}\n</code></pre><p>æˆ‘ä»¬æ–°å¢åŠ äº† overrideArrayProto æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ç¨‹åºçš„æœ€ä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªå¸¸é‡ OAM ï¼Œç”¨æ¥å®šä¹‰è¦é‡å†™çš„æ•°ç»„æ–¹æ³•ï¼ŒåŒæ—¶åœ¨ observe æ–¹æ³•ä¸­æ·»åŠ äº†å¯¹æ•°ç»„çš„åˆ¤æ–­ï¼Œæˆ‘ä»¬ä¹Ÿå…è®¸äº†å¯¹æ•°ç»„çš„ç›‘å¬ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†ä»‹ç»ä¸€ä¸‹ overrideArrayProto æ–¹æ³•ã€‚</p>\n<p>é¡¾åæ€ä¹‰ï¼ŒoverrideArrayProto è¿™ä¸ªæ–¹æ³•æ˜¯é‡å†™äº† Array çš„åŸå‹ï¼Œåœ¨ overrideArrayProto æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä¿å­˜äº†æ•°ç»„çš„åŸå§‹åŸå‹ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªå‡çš„åŸå‹ï¼Œç„¶åéå†éœ€è¦é‡æ–°çš„æ•°ç»„æ–¹æ³•ï¼Œå¹¶å°†è¿™äº›æ–¹æ³•æŒ‚è½½åˆ° overrideProto ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æŒ‚è½½åˆ° overrideProto ä¸Šçš„è¿™äº›æ•°ç»„æ–¹æ³•çš„é‡Œé¢ï¼Œæˆ‘ä»¬è°ƒç”¨äº†åŸå§‹çš„æ•°ç»„åŸå‹ä¸Šçš„æ•°ç»„æ–¹æ³•ï¼Œæœ€åï¼Œæˆ‘ä»¬è®©æ•°ç»„å®ä¾‹çš„ <strong>proto</strong> å±æ€§æŒ‡å‘ overrideProtoï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº†ä¸Šå›¾ä¸­çš„æ€è·¯ã€‚å¹¶ä¸”å®Œæˆäº†æƒ³è¦è¾¾åˆ°çš„æ•ˆæœï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æˆ‘ä»¬å·²ç»é‡å†™äº†çš„æ•°ç»„æ–¹æ³•å»æ“ä½œæ•°ç»„ï¼ŒæŸ¥çœ‹èƒ½ä¸èƒ½ç›‘æµ‹åˆ°å˜åŒ–ï¼š</p>\n<pre><code>var callback = function(newVal, oldVal){\n    alert(&#39;æ–°å€¼ï¼š&#39; + newVal + &#39;----&#39; + &#39;æ—§å€¼ï¼š&#39; + oldVal);\n};\n\nvar data = {\n    a: 200,\n    level1: {\n        b: &#39;str&#39;,\n        c: [{w: 90}, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n\nvar j = new Jsonob(data, callback);\n\ndata.level1.c.push(4);\n</code></pre><p>åœ¨æµè§ˆå™¨ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ä»£ç æŒ‰ç…§é¢„æœŸè¿è¡Œäº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501h.jpg\" alt=\"å›¾1\"></p>\n<p>ç›´åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å‡ ä¹å®Œç¾çš„ç›‘æµ‹åˆ°æ•°æ®å¯¹è±¡çš„å˜åŒ–äº†ï¼Œå¹¶ä¸”èƒ½å¤ŸçŸ¥é“å˜åŒ–å‰åçš„æ—§å€¼ä¸æ–°å€¼ï¼Œé‚£ä¹ˆè¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å›é¡¾ä¸€ä¸‹å½“æˆ‘ä»¬ä¿®æ”¹æ•°æ®å¯¹è±¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ç¡®èƒ½å¤Ÿè·å–åˆ°æ–°å€¼å’Œæ—§å€¼ï¼Œä½†æ˜¯ä¹Ÿä»…æ­¤è€Œå·²ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ä¿®æ”¹çš„æ˜¯å“ªä¸ªå±æ€§ï¼Œä½†æ˜¯èƒ½å¤ŸçŸ¥é“ä¿®æ”¹çš„å“ªä¸ªå±æ€§å¯¹äºæˆ‘ä»¬æ˜¯ç›¸å½“é‡è¦çš„ã€‚</p>\n<p>æ¯”å¦‚MVVMä¸­ï¼Œå½“æ•°æ®å¯¹è±¡æ”¹å˜æ—¶ï¼Œè¦å»æ›´æ–°æ¨¡æ¿ï¼Œè€Œæ¨¡æ¿åˆ°æ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯é€šè¿‡æ•°æ®å¯¹è±¡ä¸‹çš„æŸä¸ªå­—æ®µåç§°è¿›è¡Œç»‘å®šçš„ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰å¦‚ä¸‹æ¨¡æ¿ï¼š</p>\n<pre><code>&lt;div id=&quot;box&quot;&gt;\n    &lt;div&gt;{{name}}&lt;/div&gt;\n    &lt;div&gt;{{age}}&lt;/div&gt;\n    &lt;div&gt;{{sex}}&lt;/div&gt;\n&lt;/div&gt;\n</code></pre><p>ç„¶åæˆ‘ä»¬æœ‰å¦‚ä¸‹æ•°æ®ï¼š</p>\n<pre><code>var data = {\n    name : &#39;hcy&#39;,\n    age : 20,\n    sex : &#39;ç”·&#39;\n}\n</code></pre><p>æœ€åæˆ‘ä»¬é€šè¿‡ viewModule ç®€å†æ¨¡æ¿å’Œæ•°æ®çš„å…³ç³»ï¼š</p>\n<pre><code>new Jsonob(document.getElementById(&#39;box&#39;), data);\n</code></pre><p>é‚£ä¹ˆå½“æˆ‘ä»¬çš„æ•°æ®æ¨¡å‹dataä¸­çš„æŸä¸ªå±æ€§æ”¹å˜çš„æ—¶å€™ï¼Œæ¯”å¦‚ data.name = â€˜fuckâ€™ï¼Œå¦‚è‹¥æˆ‘ä»¬ä¸çŸ¥é“æ”¹å˜çš„å­—æ®µåç§°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ— æ³•å¾—çŸ¥è¦åˆ·æ–°å“ªéƒ¨åˆ†æ¨¡æ¿ï¼Œæˆ‘ä»¬åªèƒ½å¯¹æ¨¡æ¿è¿›è¡Œå®Œå…¨æ›´æ–°ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡ï¼Œæ€§èƒ½ä¼šå¾ˆå·®ï¼Œæ‰€ä»¥å›åˆ°æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ï¼Œå½“æ•°æ®å¯¹è±¡å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾—çŸ¥å˜åŒ–çš„å±æ€§çš„åç§°æ˜¯å¾ˆå¿…è¦çš„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬çš„ Jsonob åº“è¿˜ä¸èƒ½å®Œæˆè¿™æ ·çš„ä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è¿›ä¸€æ­¥å®Œå–„ã€‚</p>\n<p>åœ¨å®Œå–„ä¹‹å‰ï¼Œæˆ‘ä»¬è¦æå‡ºä¸€ä¸ªè·¯å¾„çš„æ¦‚å¿µï¼Œæ‰€è°“è·¯å¾„ï¼Œå°±æ˜¯å˜åŒ–çš„å­—æ®µçš„è·¯å¾„ï¼Œæ¯”å¦‚æœ‰å¦‚ä¸‹æ•°æ®æ¨¡å‹ï¼š</p>\n<pre><code>var data = {\n    a : {\n        b : {\n            c : &#39;hcy&#39;\n        }\n    }\n}\n</code></pre><p>é‚£ä¹ˆå­—æ®µ a çš„è·¯å¾„å°±æ˜¯ç”¨ data.a ï¼Œb çš„è·¯å¾„å°±æ˜¯ data.a.bï¼Œc çš„è·¯å¾„å°±æ˜¯ data.a.b.cã€‚æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²æ¥è¡¨è¿°è·¯å¾„ï¼Œè‡³äºç”¨ä»€ä¹ˆæ¥è¡¨è¿°è·¯å¾„å¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯æˆ‘ä»¬èƒ½å¤Ÿè·å–åˆ°è·¯å¾„ï¼Œæ¯”å¦‚ç”¨æ•°ç»„è¡¨è¿°è·¯å¾„å¯ä»¥è¿™æ ·ï¼š</p>\n<p>1ã€ a çš„è·¯å¾„æ˜¯ [â€˜dataâ€™, â€˜aâ€™]<br>1ã€ b çš„è·¯å¾„æ˜¯ [â€˜dataâ€™, â€˜aâ€™, â€˜bâ€™]<br>1ã€ c çš„è·¯å¾„æ˜¯ [â€˜dataâ€™, â€˜aâ€™, â€˜bâ€™, â€˜câ€™]</p>\n<p>æœ‰äº†è·¯å¾„çš„æ¦‚å¿µåï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­å®Œå–„ Jsonob åº“äº†ï¼Œæˆ‘ä»¬åœ¨å­˜å‚¨è·¯å¾„çš„æ—¶å€™é€‰æ‹©çš„æ˜¯æ•°ç»„è¡¨ç¤ºï¼Œç”¨æ•°ç»„å­˜å‚¨è·¯å¾„ï¼Œæˆ‘ä»¬ä¿®æ”¹Jsonobåº“ä»£ç ï¼Œä¿®æ”¹äº† observe æ–¹æ³•å’Œ overrideArrayProto æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾ï¼Œæˆ‘åšäº†æ‰€æœ‰ä¿®æ”¹çš„æ ‡æ³¨ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501n.jpg\" alt=\"ä¿®æ”¹observeæ–¹æ³•\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501m.jpg\" alt=\"ä¿®æ”¹overrideArrayProtoæ–¹æ³•\"></p>\n<p>æœ€åï¼Œè®©æˆ‘ä»¬å†æ¬¡å°è¯•ä¿®æ”¹ä¸€åˆ‡æ•°ç»„å±æ€§ï¼š</p>\n<pre><code>var callback = function(newVal, oldVal, path){\n    alert(&#39;æ–°å€¼ï¼š&#39; + newVal + &#39;----&#39; + &#39;æ—§å€¼ï¼š&#39; + oldVal + &#39;----è·¯å¾„ï¼š&#39; + path);\n};\n\nvar data = {\n    a: 200,\n    level1: {\n        b: &#39;str&#39;,\n        c: [{w: 90}, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n\nvar j = new Jsonob(data, callback);\n\ndata.level1.c.push(4);              // å‘æ•°ç»„ data.level1.c ä¸­pushä¸€ä¸ªå…ƒç´ \ndata.level1.c[0].w = 100;           // ä¿®æ”¹æ•°ç»„ data.level1.c[0].w çš„å€¼\ndata.level1.b = &#39;sss&#39;;              // ä¿®æ”¹ data.level1.b çš„å€¼\ndata.level1.level2.d = &#39;msn&#39;;       // ä¿®æ”¹ data.level1.level2.d çš„å€¼\n</code></pre><p>æˆ‘ä»¬ä¿®æ”¹äº†å››ä¸ªå±æ€§çš„å€¼ï¼Œç„¶åæˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°ä¸­æ¥æ”¶äº† path å‚æ•°ï¼Œè¿™æ ·å½“æ•°æ®æ¨¡å‹å˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½å¤Ÿè·å–åˆ°æ–°æ—§å€¼ï¼Œè¿˜èƒ½å¤ŸçŸ¥é“æ˜¯å“ªä¸ªå±æ€§å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›¸åº”çš„åšä¸€äº›å…¶ä»–çš„äº‹æƒ…ï¼Œæ¯”å¦‚MVVMä¸­çš„æ›´æ–°å…³è”çš„è§†å›¾ï¼Œå°±å¯ä»¥åšåˆ°äº†ã€‚æœ€åæˆ‘ä»¬åˆ·æ–°æµè§ˆå™¨æ¥äº§çœ‹å¼¹å‡ºæ¡†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501aa.jpg\" alt=\"ä¸€\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501ab.jpg\" alt=\"äºŒ\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501ac.jpg\" alt=\"ä¸‰\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501ad.jpg\" alt=\"å››\"></p>\n<p>å›¾ä¸­æˆ‘ç”¨çº¢è‰²åœˆæ ‡å‡ºäº†å˜åŒ–å±æ€§çš„è·¯å¾„ï¼Œç”±äºæˆ‘ä»¬çš„è·¯å¾„æ˜¯æ•°ç»„æ ‡ç¤ºçš„ï¼Œæ‰€ä»¥çœ‹ä¸Šå»æ˜¯ä»¥é€—å·â€œ,â€éš”å¼€çš„ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬å°±ç®—å®Œæˆäº†è¿™ä¸ªè¿·ä½ åº“ï¼Œç›¸ä¿¡è¯»è€…ä¹Ÿæœ‰è‡ªå·±çš„å®ç°æ€è·¯ï¼Œç¬”è€…æ°´å¹³æœ‰é™ï¼Œå¦‚æœå“ªé‡Œæœ‰æ¬ ç¼ºè¿˜å¸Œæœ›å¤§å®¶æŒ‡æ­£ï¼Œå…±åŒè¿›æ­¥ã€‚</p>\n","site":{"data":{}},"excerpt":"<p>æˆ‘çš„åšå®¢å§‹ç»ˆéƒ½æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å–œæ¬¢ä»0å¼€å§‹ï¼ŒåŠªåŠ›è®©å°ç™½éƒ½èƒ½çœ‹çš„æ˜ç™½ï¼Œå³ä½¿çœ‹ä¸æ˜ç™½ï¼Œä¹Ÿèƒ½çŸ¥é“æ•´ä½“çš„æ¥é¾™å»è„‰ï¼Œè¿™ç¯‡åšå®¢ä¾ç„¶ç§‰æ‰¿ç€è¿™ä¸ªé£æ ¼ã€‚<br>ä»¥MVVMæ¨¡å¼ä¸ºä¸»çº¿å»å®ç°çš„JavaScriptæ¡†æ¶éå¸¸æµè¡Œï¼Œè¯¸å¦‚ angularã€Emberã€Polymerã€vue ç­‰ç­‰ï¼Œå®ƒä»¬çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯æ•°æ®çš„åŒå‘ç»‘å®šã€‚è¿™å¯¹äºå°ç™½æ¥è¯´å°±åƒå˜é­”æœ¯ä¸€æ ·ï¼Œä½†æ— è®ºå¯¹è°æ¥è®²ï¼Œå½“ä½ çœ‹åˆ°ä¸€ä¸ªä»¤ä½ æ„Ÿå…´è¶£çš„é­”æœ¯ï¼Œé‚£ä¹ˆæ­ç§˜å®ƒæ€»æ˜¯èƒ½å¸å¼•ä½ çš„çœ¼çƒã€‚<br>è¿™ç¯‡æ–‡ç« ä¸»è¦è®²è¿°MVVMå®ç°ä¸­çš„ä¸€éƒ¨åˆ†ï¼šå¦‚ä½•ç›‘æµ‹æ•°æ®çš„å˜åŒ–ã€‚</p>","more":"<blockquote>\n<p>æ³¨ï¼šæœ¬ç¯‡æ–‡ç« å°†ç”Ÿäº§å‡ºä¸€ä¸ªè¿·ä½ åº“ï¼Œä»£ç æ‰˜ç®¡åœ¨ <a href=\"https://github.com/HcySunYang/jsonob\" target=\"_blank\" rel=\"external\">https://github.com/HcySunYang/jsonob</a>ï¼Œç”±äºæœ¬ç¯‡æ–‡ç« ä»£ç é‡‡ç”¨ES6ç¼–å†™ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥åœ¨æµè§ˆå™¨ä¸‹è¿è¡Œï¼Œè¯»è€…åœ¨å®è·µçš„æ—¶å€™å¯ä»¥é‡‡ç”¨è¯¥ä»“åº“çš„ä»£ç ï¼Œcloneä»“åº“åï¼š<br>1ã€å®‰è£…ä¾èµ–<br>npm install<br>2ã€æ„å»ºé¡¹ç›®<br>npm run build<br>3ã€ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ test/index.html æŸ¥çœ‹è¿è¡Œç»“æœ</p>\n</blockquote>\n<p>é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬è¦åšä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬ä¼šå®ç°ä¸€ä¸ªè¿·ä½ åº“ï¼Œè¿™ä¸ªåº“çš„ä½œç”¨æ˜¯ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–ï¼Œå¹¶ä½œå‡ºç›¸åº”çš„é€šçŸ¥ã€‚åº“çš„ä½¿ç”¨æ–¹æ³•å¤§è‡´å¦‚ä¸‹ï¼š</p>\n<pre><code>// å®šä¹‰ä¸€ä¸ªå˜åŒ–é€šçŸ¥çš„å›è°ƒ\nvar callback = function(newVal, oldVal){\n    alert(newVal + &#39;----&#39; + oldVal);\n};\n\n// å®šä¹‰ä¸€ä¸ªæ™®é€šå¯¹è±¡ä½œä¸ºæ•°æ®æ¨¡å‹\nvar data = {\n    a: 200,\n    level1: {\n        b: &#39;str&#39;,\n        c: [1, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n\n// å®ä¾‹åŒ–ä¸€ä¸ªç›‘æµ‹å¯¹è±¡ï¼Œå»ç›‘æµ‹æ•°æ®ï¼Œå¹¶åœ¨æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ä½œå‡ºååº”\nvar j = new Jsonob(data, callback);\n</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª callback å›è°ƒå‡½æ•°ï¼Œä»¥åŠä¸€ä¸ªä¿å­˜ç€æ™®é€šjsonå¯¹è±¡çš„å˜é‡ data ï¼Œæœ€åå®ä¾‹åŒ–äº†ä¸€ä¸ª ç›‘æµ‹å¯¹è±¡ ï¼Œå¯¹ data è¿›è¡Œå˜åŒ–ç›‘æµ‹ï¼Œå½“å˜åŒ–å‘ç”Ÿçš„æ—¶å€™ï¼Œæ‰§è¡Œç»™å®šçš„å›è°ƒè¿›è¡Œå¿…è¦çš„å˜åŒ–é€šçŸ¥ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€äº›æ‰‹æ®µå°±å¯ä»¥è¾¾åˆ°æ•°æ®ç»‘å®šçš„æ•ˆæœã€‚</p>\n<h2 id=\"Object-defineProperty\"><a href=\"#Object-defineProperty\" class=\"headerlink\" title=\"Object.defineProperty\"></a>Object.defineProperty</h2><p>ES5 æè¿°äº†å±æ€§çš„ç‰¹å¾ï¼Œæå‡ºå¯¹è±¡çš„æ¯ä¸ªå±æ€§éƒ½æœ‰ç‰¹å®šçš„æè¿°ç¬¦ï¼Œä½ ä¹Ÿå¯ä»¥ç†è§£ä¸ºé‚£æ˜¯å±æ€§çš„å±æ€§ã€‚ã€‚ã€‚ã€‚ã€‚</p>\n<p>ES5æŠŠå±æ€§åˆ†æˆä¸¤ç§ï¼Œä¸€ç§æ˜¯ æ•°æ®å±æ€§ï¼Œ ä¸€ç§æ˜¯ è®¿é—®å™¨å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Object.defineProperty() å»å®šä¹‰ä¸€ä¸ªæ•°æ®å±æ€§æˆ–è®¿é—®å™¨å±æ€§ã€‚å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>var obj = {};\n\nobj.name = &#39;hcy&#39;;\n</code></pre><p>ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ç»™è¿™ä¸ªå¯¹è±¡æ·»åŠ äº†ä¸€ä¸ªå±æ€§ nameï¼Œå€¼ä¸º â€˜hcyâ€™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Object.defineProperty() æ¥ç»™å¯¹è±¡å®šä¹‰å±æ€§ï¼Œä¸Šé¢çš„ä»£ç ç­‰ä»·äºï¼š</p>\n<pre><code>var obj = {};\n\nObject.defineProperty(obj, &#39;name&#39;, {\n    value: &#39;hcy&#39;,        // å±æ€§çš„å€¼\n    writable: true,        // æ˜¯å¦å¯å†™\n    enumerable: true,    // æ˜¯å¦èƒ½å¤Ÿé€šè¿‡for in æšä¸¾\n    configurable: true    // æ˜¯å¦å¯ä½¿ç”¨ deleteåˆ é™¤\n})\n</code></pre><p>è¿™æ ·æˆ‘ä»¬å°±ä½¿ç”¨ Object.defineProperty ç»™å¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªå±æ€§ï¼Œè¿™æ ·çš„å±æ€§å°±æ˜¯æ•°æ®å±æ€§ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰è®¿é—®å™¨å±æ€§ï¼š</p>\n<pre><code>var obj = {};\n\nObject.defineProperty(obj, &#39;age&#39;, {\n    get: function(){\n        return 20;\n    },\n    set: function(newVal){\n        this.age += 20;\n    }\n})\n</code></pre><p>è®¿é—®å™¨å±æ€§å…è®¸ä½ å®šä¹‰ä¸€å¯¹å„¿ getter/setter ï¼Œå½“ä½ è¯»å–å±æ€§å€¼çš„æ—¶å€™åº•å±‚ä¼šè°ƒç”¨ get æ–¹æ³•ï¼Œå½“ä½ å»è®¾ç½®å±æ€§å€¼çš„æ—¶å€™ï¼Œåº•å±‚ä¼šè°ƒç”¨ set æ–¹æ³•</p>\n<p>çŸ¥é“äº†è¿™ä¸ªå°±å¥½åŠäº†ï¼Œæˆ‘ä»¬å†å›åˆ°æœ€åˆçš„é—®é¢˜ä¸Šé¢ï¼Œå¦‚ä½•æ£€æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>\n<blockquote>\n<p>éå†å¯¹è±¡çš„å±æ€§ï¼ŒæŠŠå¯¹è±¡çš„å±æ€§éƒ½ä½¿ç”¨ Object.defineProperty è½¬ä¸º  getter/setter ï¼Œè¿™æ ·ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹ä¸€äº›å€¼å¾—æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨setæ–¹æ³•ï¼Œç„¶åæˆ‘ä»¬åœ¨setæ–¹æ³•é‡Œé¢ï¼Œå›è°ƒé€šçŸ¥ï¼Œä¸å°±å¯ä»¥äº†å—ï¼Œæ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>\n</blockquote>\n<pre><code>// index.js\nconst OP = Object.prototype;\n\nexport class Jsonob{\n    constructor(obj, callback){\n        if(OP.toString.call(obj) !== &#39;[object Object]&#39;){\n            console.error(&#39;This parameter must be an objectï¼š&#39; + obj);\n        }\n        this.$callback = callback;\n        this.observe(obj);\n    }\n\n    observe(obj){\n        Object.keys(obj).forEach(function(key, index, keyArray){\n            var val = obj[key];\n            Object.defineProperty(obj, key, {\n                get: function(){\n                    return val;\n                },\n                set: (function(newVal){\n                    this.$callback(newVal);\n                }).bind(this)\n            });\n\n            if(OP.toString.call(obj[key]) === &#39;[object Object]&#39;){\n                this.observe(obj[key]);\n            }\n\n        }, this);\n\n    }\n}\n</code></pre><p>ä¸Šé¢ä»£ç é‡‡ç”¨ES6ç¼–å†™ï¼Œindex.jsæ–‡ä»¶ä¸­å¯¼å‡ºäº†ä¸€ä¸ª Jsonob ç±»ï¼Œconstructoræ„é€ å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä¿è¯äº†ä¼ å…¥çš„å¯¹è±¡æ˜¯ä¸€ä¸ª {} æˆ– new Object() ç”Ÿæˆçš„å¯¹è±¡ï¼Œæ¥ç€ç¼“å­˜äº†å›è°ƒå‡½æ•°ï¼Œæœ€åè°ƒç”¨äº†åŸå‹ä¸‹çš„ observe æ–¹æ³•ã€‚</p>\n<p>observeæ–¹æ³•æ˜¯çœŸæ­£å®ç°ç›‘æµ‹å±æ€§çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä½¿ç”¨ Object.keys(obj).forEach å¾ªç¯objæ‰€æœ‰å¯æšä¸¾çš„å±æ€§ï¼Œä½¿ç”¨ Object.defineProperty å°†å±æ€§è½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§ï¼Œç„¶ååˆ¤æ–­å±æ€§çš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯å¯¹è±¡çš„è¯å†è¿›è¡Œé€’å½’è°ƒç”¨ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±èƒ½ä¿è¯ä¸€ä¸ªå¤æ‚çš„æ™®é€šjsonå¯¹è±¡ä¸­çš„å±æ€§ä»¥åŠå€¼ä¸ºå¯¹è±¡çš„å±æ€§çš„å±æ€§éƒ½è½¬æ¢æˆè®¿é—®å™¨å±æ€§ã€‚</p>\n<p>æœ€åï¼Œåœ¨ Object.defineProperty çš„ set æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº†æŒ‡å®šçš„å›è°ƒï¼Œå¹¶å°†æ–°å€¼ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ã€‚</p>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæµ‹è¯•ä»£ç ï¼Œå»æµ‹è¯•ä¸€ä¸‹ä¸Šé¢çš„ä»£ç æ˜¯å¦å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œåœ¨index.htmlä¸­ï¼ˆ<a href=\"https://github.com/HcySunYang/jsonob\" target=\"_blank\" rel=\"external\">è¯»è€…å¯ä»¥cloneæ–‡ç« å¼€å§‹é˜¶æ®µç»™å‡ºçš„ä»“åº“</a>ï¼‰ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n\n        &lt;script src=&quot;../dist/jsonob.js&quot;&gt;&lt;/script&gt;\n        &lt;script&gt;\n            var Jsonob = Jsonob.Jsonob;\n\n            var callback = function(newVal){\n                alert(newVal);\n            };\n\n            var data = {\n                a: 200,\n                level1: {\n                    b: &#39;str&#39;,\n                    c: [1, 2, 3],\n                    level2: {\n                        d: 90\n                    }\n                }\n            }\n\n            var j = new Jsonob(data, callback);\n\n            data.a = 250;\n            data.level1.b = &#39;sss&#39;;\n            data.level1.level2.d = &#39;msn&#39;;\n        &lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ä¸Šé¢ä»£ç ï¼Œå¾ˆæ¥è¿‘æˆ‘ä»¬æ–‡ç« å¼€å¤´è¦å®ç°çš„ç›®æ ‡ã€‚æˆ‘ä»¬å®šä¹‰äº†å›è°ƒ(callback)å’Œæ•°æ®æ¨¡å‹(data)ï¼Œåœ¨å›è°ƒä¸­æˆ‘ä»¬ä½¿ç”¨ alert å‡½æ•°å¼¹å‡ºæ–°å€¼ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªç›‘æµ‹å®ä¾‹å¹¶æŠŠæ•°æ®å’Œå›è°ƒä½œä¸ºå‚æ•°ä¼ é€’è¿‡å»ï¼Œç„¶åæˆ‘ä»¬è¯•ç€ä¿®æ”¹dataå¯¹è±¡ç›¸é¢çš„å±æ€§ä»¥åŠå­å±æ€§ï¼Œçœ‹çœ‹ä»£ç æ˜¯å¦æŒ‰ç…§æˆ‘ä»¬é¢„æœŸçš„å·¥ä½œï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œå¦‚ä¸‹å›¾</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160428a.jpg\" alt=\"å¼¹çª—1\"><br><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/b.jpg\" alt=\"å¼¹çª—2\"><br><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/c.jpg\" alt=\"å¼¹çª—3\"></p>\n<p>å¯ä»¥çœ‹å¼¹å‡ºä¸‰ä¸ªå¯¹è¯æ¡†ï¼Œè¿™è¯´æ˜æˆ‘ä»¬çš„ä»£ç æ­£å¸¸å·¥ä½œäº†ï¼Œæ— è®ºæ˜¯dataå¯¹è±¡çš„å±æ€§ï¼Œè¿˜æ˜¯å­å±æ€§çš„æ”¹å˜ï¼Œéƒ½èƒ½å¤Ÿç›‘æµ‹åˆ°å˜åŒ–ï¼Œå¹¶æ‰§è¡Œæˆ‘ä»¬æŒ‡å®šçš„å›è°ƒã€‚</p>\n<p>è¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿå¯èƒ½ç»†å¿ƒçš„æœ‹å‹å¯èƒ½å·²ç»æ„è¯†åˆ°äº†ï¼Œæˆ‘ä»¬åœ¨æ£€æµ‹åˆ°å˜åŒ–å¹¶é€šçŸ¥å›è°ƒæ—¶ï¼Œåªä¼ é€’äº†ä¸€ä¸ªæ–°å€¼(newVal)ï¼Œä½†æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦æ—§å€¼ï¼Œä½†æ˜¯ä»¥ç°åœ¨çš„ç¨‹åºæ¥çœ‹ï¼Œæˆ‘ä»¬è¿˜æ— æ³•ä¼ é€’æ—§å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•ã€‚å¤§å®¶ä»”ç»†çœ‹ä¸Šé¢ index.js ä¸­forEachå¾ªç¯é‡Œé¢çš„ä»£ç ï¼Œæœ‰è¿™æ ·ä¸€æ®µï¼š</p>\n<pre><code>var val = obj[key];\nObject.defineProperty(obj, key, {\n    get: function(){\n        return val;\n    },\n    set: (function(newVal){\n        this.$callback(newVal);\n    }).bind(this)\n});\n</code></pre><p>å®é™…ä¸Šï¼Œval å˜é‡æ‰€å­˜å‚¨çš„ï¼Œå°±æ˜¯æ—§å€¼ï¼Œæˆ‘ä»¬ä¸å¦¨æŠŠä¸Šé¢çš„ä»£ç ä¿®æ”¹æˆä¸‹é¢è¿™æ ·ï¼š</p>\n<pre><code>var oldVal = obj[key];\nObject.defineProperty(obj, key, {\n    get: function(){\n        return oldVal;\n    },\n    set: (function(newVal){\n        if(oldVal !== newVal){\n            if(OP.toString.call(newVal) === &#39;[object Object]&#39;){\n                this.observe(newVal);\n            }\n            this.$callback(newVal, oldVal);\n            oldVal = newVal;\n        }\n\n    }).bind(this)\n});\n</code></pre><p>æˆ‘ä»¬å°†åŸæ¥çš„ val å˜é‡åå­—ä¿®æ”¹æˆ oldVal ï¼Œå¹¶åœ¨setæ–¹æ³•ä¸­è¿›è¡Œäº†æ›´æ”¹åˆ¤æ–­ï¼Œä»…åœ¨å€¼æœ‰æ›´æ”¹çš„æƒ…å†µä¸‹å»åšä¸€äº›äº‹ï¼Œå½“å€¼æœ‰ä¿®æ”¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ¤æ–­äº†æ–°å€¼æ˜¯å¦æ˜¯ç±»ä¼¼ {} æˆ– new Object() å½¢å¼çš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œæˆ‘ä»¬è¦è°ƒç”¨ this.observe æ–¹æ³•å»ç›‘å¬ä¸€ä¸‹æ–°è®¾ç½®çš„å€¼ï¼Œç„¶ååœ¨æŠŠæ—§å€¼ä¼ é€’ç»™å›è°ƒå‡½æ•°ä¹‹åæ›´æ–°ä¸€ä¸‹æ—§å€¼ã€‚</p>\n<p>æ¥ç€ä¿®æ”¹ test/index.html æ–‡ä»¶ï¼š</p>\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n\n        &lt;script src=&quot;../dist/jsonob.js&quot;&gt;&lt;/script&gt;\n        &lt;script&gt;\n            var Jsonob = Jsonob.Jsonob;\n\n            var callback = function(newVal, oldVal){\n                alert(&#39;æ–°å€¼ï¼š&#39; + newVal + &#39;----&#39; + &#39;æ—§å€¼ï¼š&#39; + oldVal);\n            };\n\n            var data = {\n                a: 200,\n                level1: {\n                    b: &#39;str&#39;,\n                    c: [1, 2, 3],\n                    level2: {\n                        d: 90\n                    }\n                }\n            }\n\n            var j = new Jsonob(data, callback);\n\n            data.a = 250;\n            data.a = 260;\n        &lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>æˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°ä¸­æ¥æ”¶äº†æ–°å€¼å’Œæ—§å€¼ï¼Œåœ¨ä¸‹é¢æˆ‘ä»¬ä¿®æ”¹äº† data.a çš„å€¼ä¸º 250ï¼Œç„¶åè¿è¡Œä»£ç ï¼ŒæŸ¥çœ‹æµè§ˆå™¨çš„åé¦ˆï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160428d.jpg\" alt=\"alert1\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160428e.jpg\" alt=\"alert1\"></p>\n<p>è¿™æ ·ï¼Œæˆ‘ä»¬å®Œæˆäº†æœ€æœ€åŸºæœ¬çš„æ™®é€šå¯¹è±¡å˜åŒ–ç›‘æµ‹åº“ï¼Œæ¥ç€ï¼Œæˆ‘ä»¬ç»§ç»­å‘ç°é—®é¢˜ï¼Œæˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹ä¸€ä¸‹æ•°æ®æ¨¡å‹ï¼š</p>\n<pre><code>var data = {\n    a: 200,\n    level1: {\n        b: &#39;str&#39;,\n        c: [1, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n</code></pre><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ data.level1.c çš„å€¼ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„åœ¨æˆ‘ä»¬å·¥ä½œä¸­è‚¯å®šæ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œå½“æ•°ç»„çš„å…ƒç´ å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œä¹Ÿè§†ä¸ºæ•°æ®çš„æ”¹å˜ï¼Œä½†é—æ†¾çš„æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨åº“è¿˜ä¸èƒ½ç›‘æµ‹æ•°ç»„çš„å˜åŒ–ï¼Œæ¯”å¦‚ï¼š</p>\n<pre><code>data.level1.c.push(4);\n</code></pre><p>æˆ‘ä»¬å‘æ•°ç»„ä¸­pushäº†ä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯å¹¶ä¸ä¼šè§¦å‘æ”¹å˜ã€‚æ“ä½œæ•°ç»„çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼šâ€™pushâ€™, â€˜popâ€™, â€˜shiftâ€™, â€˜unshiftâ€™, â€˜spliceâ€™, â€˜sortâ€™, â€˜reverseâ€™ ç­‰ç­‰ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åœ¨ä½¿ç”¨è¿™äº›æ–¹æ³•æ“ä½œæ•°ç»„çš„æ—¶å€™èƒ½å¤Ÿç›‘å¬åˆ°å˜åŒ–å‘¢ï¼Ÿæœ‰è¿™æ ·ä¸€ä¸ªæ€è·¯ï¼Œçœ‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501f.jpg\" alt=\"å½“ä½ å®šä¹‰ä¸€ä¸ªæ•°ç»„å®ä¾‹çš„æ—¶å€™ï¼Œå®ä¾‹ã€å®ä¾‹çš„__proto__å±æ€§ã€Arrayæ„é€ å‡½æ•°ã€åŸå‹ä¹‹é—´çš„å…³ç³»\"></p>\n<p>ä¸Šå›¾æ˜¾ç¤ºäº†ï¼Œå½“ä½ é€šè¿‡ var arr1 = [] æˆ–è€… var arr1 = new Array() è¯­å¥åˆ›å»ºä¸€ä¸ªæ•°ç»„å®ä¾‹çš„æ—¶å€™ï¼Œå®ä¾‹ã€å®ä¾‹çš„<strong>proto</strong>å±æ€§ã€Arrayæ„é€ å‡½æ•°ä»¥åŠArrayåŸå‹å››è€…ä¹‹é—´çš„å…³ç³»ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆå®¹çš„å‘ç°ï¼Œæ•°ç»„å®ä¾‹çš„<strong>proto</strong>å±æ€§ï¼Œæ˜¯Array.prototypeçš„å¼•ç”¨ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ arr1.push() è¯­å¥æ“ä½œæ•°ç»„çš„æ—¶å€™ï¼Œæ˜¯è°ƒç”¨åŸå‹ä¸‹çš„pushæ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä¸å¯ä»¥é‡å†™åŸå‹çš„è¿™äº›æ•°ç»„æ–¹æ³•ï¼Œåœ¨è¿™äº›é‡å†™çš„æ–¹æ³•é‡Œé¢å»ç›‘å¬å˜åŒ–å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯åœ¨å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åˆ°åº•è¦æ€ä¹ˆé‡å†™ï¼Œæ¯”å¦‚æˆ‘ä»¬é‡å†™ä¸€ä¸ªæ•°ç»„pushæ–¹æ³•ï¼Œå‘æ•°ç»„æ ˆä¸­æ¨å…¥ä¸€ä¸ªå…ƒç´ ï¼Œéš¾é“æˆ‘ä»¬è¦è¿™æ ·å»é‡å†™å—ï¼š</p>\n<pre><code>Array.prototype.push = function(){\n    // ä½ çš„å®ç°æ–¹å¼\n}\n</code></pre><p>ç„¶åå†ä¸€æ¬¡å®ç°å…¶ä»–çš„æ•°ç»„æ–¹æ³•ï¼š</p>\n<pre><code>Array.prototype.pop = function(){\n    // ä½ çš„å®ç°æ–¹å¼\n}\nArray.prototype.shift = function(){\n    // ä½ çš„å®ç°æ–¹å¼\n}\n...\n</code></pre><p>è¿™ç§å®ç°æ˜¯æœ€ä¸åº”è¯¥è€ƒè™‘çš„ï¼Œæš‚ä¸”ä¸è¯´èƒ½ä¸èƒ½å…¨éƒ¨å®ç°çš„ä¸åŸç”Ÿæ— å¼‚ï¼Œå³ä½¿ä½ å®ç°çš„ä¸åŸç”Ÿæ–¹æ³•åœ¨ä½¿ç”¨æ–¹å¼ä¸Šä¸€æ¨¡ä¸€æ ·ï¼Œå¹¶ä¸”ä¸å½±å“å…¶ä»–ä»£ç çš„è¿è¡Œï¼Œé‚£ä¹ˆåœ¨æ€§èƒ½ä¸Šï¼Œå¯èƒ½å°±ä¸åŸç”Ÿå·®å¾ˆå¤šäº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸Šé¢ æ•°ç»„å®ä¾‹ä»¥åŠæ•°ç»„æ„é€ å‡½æ•°å’ŒåŸå‹ä¹‹é—´çš„å…³ç³»å›¾ ä¸­æ€è€ƒè§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä¸å¯ä»¥åœ¨åŸå‹é“¾ä¸­åŠ ä¸€å±‚ï¼Œå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501g.jpg\" alt=\"æ€è·¯\"></p>\n<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ arr1.<strong>proto</strong> ä¸ Array.prototype ä¹‹é—´çš„é“¾æ¡ä¸­æ·»åŠ äº†ä¸€ç¯ fakePrototype (å‡çš„åŸå‹)ï¼Œæˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼Œåœ¨ä½¿ç”¨ push ç­‰æ•°ç»„æ–¹æ³•çš„æ—¶å€™ï¼Œè°ƒç”¨çš„æ˜¯ fakePrototype ä¸Šçš„pushæ–¹æ³•ï¼Œç„¶ååœ¨ fakePrototype æ–¹æ³•ä¸­ç®€ä»‹å†å»è°ƒç”¨çœŸæ­£çš„ArrayåŸå‹ä¸Šçš„ push æ–¹æ³•ï¼ŒåŒæ—¶ç›‘å¬å˜åŒ–ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½å®ç°ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code>/*\n *  Object åŸå‹\n */\nconst OP = Object.prototype;\n/*\n *  éœ€è¦é‡å†™çš„æ•°ç»„æ–¹æ³• OAR æ˜¯ overrideArrayMethod çš„ç¼©å†™\n */\nconst OAM = [&#39;push&#39;, &#39;pop&#39;, &#39;shift&#39;, &#39;unshift&#39;, &#39;splice&#39;, &#39;sort&#39;, &#39;reverse&#39;];\n\nexport class Jsonob{\n    constructor(obj, callback){\n        if(OP.toString.call(obj) !== &#39;[object Object]&#39;){\n            console.error(&#39;This parameter must be an objectï¼š&#39; + obj);\n        }\n        this.$callback = callback;\n        this.observe(obj);\n    }\n\n    observe(obj){\n        // å¦‚æœå‘ç° ç›‘æµ‹çš„å¯¹è±¡æ˜¯æ•°ç»„çš„è¯å°±è¦è°ƒç”¨ overrideArrayProto æ–¹æ³•\n        if(OP.toString.call(obj) === &#39;[object Array]&#39;){\n            this.overrideArrayProto(obj);\n        }\n        Object.keys(obj).forEach(function(key, index, keyArray){\n            var oldVal = obj[key];\n            Object.defineProperty(obj, key, {\n                get: function(){\n                    return oldVal;\n                },\n                set: (function(newVal){\n                    if(oldVal !== newVal){\n                        if(OP.toString.call(newVal) === &#39;[object Object]&#39; || OP.toString.call(newVal) === &#39;[object Array]&#39;){\n                            this.observe(newVal);\n                        }\n                        this.$callback(newVal, oldVal);\n                        oldVal = newVal;\n                    }\n\n                }).bind(this)\n            });\n\n            if(OP.toString.call(obj[key]) === &#39;[object Object]&#39; || OP.toString.call(obj[key]) === &#39;[object Array]&#39;){\n                this.observe(obj[key]);\n            }\n\n        }, this);\n\n    }\n\n    overrideArrayProto(array){\n            // ä¿å­˜åŸå§‹ Array åŸå‹\n        var originalProto = Array.prototype,\n            // é€šè¿‡ Object.create æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„åŸå‹å°±æ˜¯Array.prototype\n            overrideProto = Object.create(Array.prototype),\n            self = this,\n            result;\n        // éå†è¦é‡å†™çš„æ•°ç»„æ–¹æ³•\n        Object.keys(OAM).forEach(function(key, index, array){\n            var method = OAM[index],\n                oldArray = [];\n            // ä½¿ç”¨ Object.defineProperty ç»™ overrideProto æ·»åŠ å±æ€§ï¼Œå±æ€§çš„åç§°æ˜¯å¯¹åº”çš„æ•°ç»„å‡½æ•°åï¼Œå€¼æ˜¯å‡½æ•°\n            Object.defineProperty(overrideProto, method, {\n                value: function(){\n                    oldArray = this.slice(0);\n\n                    var arg = [].slice.apply(arguments);\n                    // è°ƒç”¨åŸå§‹ åŸå‹ çš„æ•°ç»„æ–¹æ³•\n                    result = originalProto[method].apply(this, arg);\n                    // å¯¹æ–°çš„æ•°ç»„è¿›è¡Œç›‘æµ‹\n                    self.observe(this);\n                    // æ‰§è¡Œå›è°ƒ\n                    self.$callback(this, oldArray);\n\n                    return result;\n                },\n                writable: true,\n                enumerable: false,\n                configurable: true\n            });\n        }, this);\n\n        // æœ€å è®©è¯¥æ•°ç»„å®ä¾‹çš„ __proto__ å±æ€§æŒ‡å‘ å‡çš„åŸå‹ overrideProto\n        array.__proto__ = overrideProto;\n\n    }\n}\n</code></pre><p>æˆ‘ä»¬æ–°å¢åŠ äº† overrideArrayProto æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ç¨‹åºçš„æœ€ä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªå¸¸é‡ OAM ï¼Œç”¨æ¥å®šä¹‰è¦é‡å†™çš„æ•°ç»„æ–¹æ³•ï¼ŒåŒæ—¶åœ¨ observe æ–¹æ³•ä¸­æ·»åŠ äº†å¯¹æ•°ç»„çš„åˆ¤æ–­ï¼Œæˆ‘ä»¬ä¹Ÿå…è®¸äº†å¯¹æ•°ç»„çš„ç›‘å¬ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†ä»‹ç»ä¸€ä¸‹ overrideArrayProto æ–¹æ³•ã€‚</p>\n<p>é¡¾åæ€ä¹‰ï¼ŒoverrideArrayProto è¿™ä¸ªæ–¹æ³•æ˜¯é‡å†™äº† Array çš„åŸå‹ï¼Œåœ¨ overrideArrayProto æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä¿å­˜äº†æ•°ç»„çš„åŸå§‹åŸå‹ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªå‡çš„åŸå‹ï¼Œç„¶åéå†éœ€è¦é‡æ–°çš„æ•°ç»„æ–¹æ³•ï¼Œå¹¶å°†è¿™äº›æ–¹æ³•æŒ‚è½½åˆ° overrideProto ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æŒ‚è½½åˆ° overrideProto ä¸Šçš„è¿™äº›æ•°ç»„æ–¹æ³•çš„é‡Œé¢ï¼Œæˆ‘ä»¬è°ƒç”¨äº†åŸå§‹çš„æ•°ç»„åŸå‹ä¸Šçš„æ•°ç»„æ–¹æ³•ï¼Œæœ€åï¼Œæˆ‘ä»¬è®©æ•°ç»„å®ä¾‹çš„ <strong>proto</strong> å±æ€§æŒ‡å‘ overrideProtoï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº†ä¸Šå›¾ä¸­çš„æ€è·¯ã€‚å¹¶ä¸”å®Œæˆäº†æƒ³è¦è¾¾åˆ°çš„æ•ˆæœï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æˆ‘ä»¬å·²ç»é‡å†™äº†çš„æ•°ç»„æ–¹æ³•å»æ“ä½œæ•°ç»„ï¼ŒæŸ¥çœ‹èƒ½ä¸èƒ½ç›‘æµ‹åˆ°å˜åŒ–ï¼š</p>\n<pre><code>var callback = function(newVal, oldVal){\n    alert(&#39;æ–°å€¼ï¼š&#39; + newVal + &#39;----&#39; + &#39;æ—§å€¼ï¼š&#39; + oldVal);\n};\n\nvar data = {\n    a: 200,\n    level1: {\n        b: &#39;str&#39;,\n        c: [{w: 90}, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n\nvar j = new Jsonob(data, callback);\n\ndata.level1.c.push(4);\n</code></pre><p>åœ¨æµè§ˆå™¨ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ä»£ç æŒ‰ç…§é¢„æœŸè¿è¡Œäº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501h.jpg\" alt=\"å›¾1\"></p>\n<p>ç›´åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å‡ ä¹å®Œç¾çš„ç›‘æµ‹åˆ°æ•°æ®å¯¹è±¡çš„å˜åŒ–äº†ï¼Œå¹¶ä¸”èƒ½å¤ŸçŸ¥é“å˜åŒ–å‰åçš„æ—§å€¼ä¸æ–°å€¼ï¼Œé‚£ä¹ˆè¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å›é¡¾ä¸€ä¸‹å½“æˆ‘ä»¬ä¿®æ”¹æ•°æ®å¯¹è±¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ç¡®èƒ½å¤Ÿè·å–åˆ°æ–°å€¼å’Œæ—§å€¼ï¼Œä½†æ˜¯ä¹Ÿä»…æ­¤è€Œå·²ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ä¿®æ”¹çš„æ˜¯å“ªä¸ªå±æ€§ï¼Œä½†æ˜¯èƒ½å¤ŸçŸ¥é“ä¿®æ”¹çš„å“ªä¸ªå±æ€§å¯¹äºæˆ‘ä»¬æ˜¯ç›¸å½“é‡è¦çš„ã€‚</p>\n<p>æ¯”å¦‚MVVMä¸­ï¼Œå½“æ•°æ®å¯¹è±¡æ”¹å˜æ—¶ï¼Œè¦å»æ›´æ–°æ¨¡æ¿ï¼Œè€Œæ¨¡æ¿åˆ°æ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯é€šè¿‡æ•°æ®å¯¹è±¡ä¸‹çš„æŸä¸ªå­—æ®µåç§°è¿›è¡Œç»‘å®šçš„ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰å¦‚ä¸‹æ¨¡æ¿ï¼š</p>\n<pre><code>&lt;div id=&quot;box&quot;&gt;\n    &lt;div&gt;{{name}}&lt;/div&gt;\n    &lt;div&gt;{{age}}&lt;/div&gt;\n    &lt;div&gt;{{sex}}&lt;/div&gt;\n&lt;/div&gt;\n</code></pre><p>ç„¶åæˆ‘ä»¬æœ‰å¦‚ä¸‹æ•°æ®ï¼š</p>\n<pre><code>var data = {\n    name : &#39;hcy&#39;,\n    age : 20,\n    sex : &#39;ç”·&#39;\n}\n</code></pre><p>æœ€åæˆ‘ä»¬é€šè¿‡ viewModule ç®€å†æ¨¡æ¿å’Œæ•°æ®çš„å…³ç³»ï¼š</p>\n<pre><code>new Jsonob(document.getElementById(&#39;box&#39;), data);\n</code></pre><p>é‚£ä¹ˆå½“æˆ‘ä»¬çš„æ•°æ®æ¨¡å‹dataä¸­çš„æŸä¸ªå±æ€§æ”¹å˜çš„æ—¶å€™ï¼Œæ¯”å¦‚ data.name = â€˜fuckâ€™ï¼Œå¦‚è‹¥æˆ‘ä»¬ä¸çŸ¥é“æ”¹å˜çš„å­—æ®µåç§°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ— æ³•å¾—çŸ¥è¦åˆ·æ–°å“ªéƒ¨åˆ†æ¨¡æ¿ï¼Œæˆ‘ä»¬åªèƒ½å¯¹æ¨¡æ¿è¿›è¡Œå®Œå…¨æ›´æ–°ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡ï¼Œæ€§èƒ½ä¼šå¾ˆå·®ï¼Œæ‰€ä»¥å›åˆ°æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ï¼Œå½“æ•°æ®å¯¹è±¡å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾—çŸ¥å˜åŒ–çš„å±æ€§çš„åç§°æ˜¯å¾ˆå¿…è¦çš„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬çš„ Jsonob åº“è¿˜ä¸èƒ½å®Œæˆè¿™æ ·çš„ä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è¿›ä¸€æ­¥å®Œå–„ã€‚</p>\n<p>åœ¨å®Œå–„ä¹‹å‰ï¼Œæˆ‘ä»¬è¦æå‡ºä¸€ä¸ªè·¯å¾„çš„æ¦‚å¿µï¼Œæ‰€è°“è·¯å¾„ï¼Œå°±æ˜¯å˜åŒ–çš„å­—æ®µçš„è·¯å¾„ï¼Œæ¯”å¦‚æœ‰å¦‚ä¸‹æ•°æ®æ¨¡å‹ï¼š</p>\n<pre><code>var data = {\n    a : {\n        b : {\n            c : &#39;hcy&#39;\n        }\n    }\n}\n</code></pre><p>é‚£ä¹ˆå­—æ®µ a çš„è·¯å¾„å°±æ˜¯ç”¨ data.a ï¼Œb çš„è·¯å¾„å°±æ˜¯ data.a.bï¼Œc çš„è·¯å¾„å°±æ˜¯ data.a.b.cã€‚æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²æ¥è¡¨è¿°è·¯å¾„ï¼Œè‡³äºç”¨ä»€ä¹ˆæ¥è¡¨è¿°è·¯å¾„å¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯æˆ‘ä»¬èƒ½å¤Ÿè·å–åˆ°è·¯å¾„ï¼Œæ¯”å¦‚ç”¨æ•°ç»„è¡¨è¿°è·¯å¾„å¯ä»¥è¿™æ ·ï¼š</p>\n<p>1ã€ a çš„è·¯å¾„æ˜¯ [â€˜dataâ€™, â€˜aâ€™]<br>1ã€ b çš„è·¯å¾„æ˜¯ [â€˜dataâ€™, â€˜aâ€™, â€˜bâ€™]<br>1ã€ c çš„è·¯å¾„æ˜¯ [â€˜dataâ€™, â€˜aâ€™, â€˜bâ€™, â€˜câ€™]</p>\n<p>æœ‰äº†è·¯å¾„çš„æ¦‚å¿µåï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­å®Œå–„ Jsonob åº“äº†ï¼Œæˆ‘ä»¬åœ¨å­˜å‚¨è·¯å¾„çš„æ—¶å€™é€‰æ‹©çš„æ˜¯æ•°ç»„è¡¨ç¤ºï¼Œç”¨æ•°ç»„å­˜å‚¨è·¯å¾„ï¼Œæˆ‘ä»¬ä¿®æ”¹Jsonobåº“ä»£ç ï¼Œä¿®æ”¹äº† observe æ–¹æ³•å’Œ overrideArrayProto æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾ï¼Œæˆ‘åšäº†æ‰€æœ‰ä¿®æ”¹çš„æ ‡æ³¨ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501n.jpg\" alt=\"ä¿®æ”¹observeæ–¹æ³•\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501m.jpg\" alt=\"ä¿®æ”¹overrideArrayProtoæ–¹æ³•\"></p>\n<p>æœ€åï¼Œè®©æˆ‘ä»¬å†æ¬¡å°è¯•ä¿®æ”¹ä¸€åˆ‡æ•°ç»„å±æ€§ï¼š</p>\n<pre><code>var callback = function(newVal, oldVal, path){\n    alert(&#39;æ–°å€¼ï¼š&#39; + newVal + &#39;----&#39; + &#39;æ—§å€¼ï¼š&#39; + oldVal + &#39;----è·¯å¾„ï¼š&#39; + path);\n};\n\nvar data = {\n    a: 200,\n    level1: {\n        b: &#39;str&#39;,\n        c: [{w: 90}, 2, 3],\n        level2: {\n            d: 90\n        }\n    }\n}\n\nvar j = new Jsonob(data, callback);\n\ndata.level1.c.push(4);              // å‘æ•°ç»„ data.level1.c ä¸­pushä¸€ä¸ªå…ƒç´ \ndata.level1.c[0].w = 100;           // ä¿®æ”¹æ•°ç»„ data.level1.c[0].w çš„å€¼\ndata.level1.b = &#39;sss&#39;;              // ä¿®æ”¹ data.level1.b çš„å€¼\ndata.level1.level2.d = &#39;msn&#39;;       // ä¿®æ”¹ data.level1.level2.d çš„å€¼\n</code></pre><p>æˆ‘ä»¬ä¿®æ”¹äº†å››ä¸ªå±æ€§çš„å€¼ï¼Œç„¶åæˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°ä¸­æ¥æ”¶äº† path å‚æ•°ï¼Œè¿™æ ·å½“æ•°æ®æ¨¡å‹å˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½å¤Ÿè·å–åˆ°æ–°æ—§å€¼ï¼Œè¿˜èƒ½å¤ŸçŸ¥é“æ˜¯å“ªä¸ªå±æ€§å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›¸åº”çš„åšä¸€äº›å…¶ä»–çš„äº‹æƒ…ï¼Œæ¯”å¦‚MVVMä¸­çš„æ›´æ–°å…³è”çš„è§†å›¾ï¼Œå°±å¯ä»¥åšåˆ°äº†ã€‚æœ€åæˆ‘ä»¬åˆ·æ–°æµè§ˆå™¨æ¥äº§çœ‹å¼¹å‡ºæ¡†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501aa.jpg\" alt=\"ä¸€\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501ab.jpg\" alt=\"äºŒ\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501ac.jpg\" alt=\"ä¸‰\"></p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160501ad.jpg\" alt=\"å››\"></p>\n<p>å›¾ä¸­æˆ‘ç”¨çº¢è‰²åœˆæ ‡å‡ºäº†å˜åŒ–å±æ€§çš„è·¯å¾„ï¼Œç”±äºæˆ‘ä»¬çš„è·¯å¾„æ˜¯æ•°ç»„æ ‡ç¤ºçš„ï¼Œæ‰€ä»¥çœ‹ä¸Šå»æ˜¯ä»¥é€—å·â€œ,â€éš”å¼€çš„ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬å°±ç®—å®Œæˆäº†è¿™ä¸ªè¿·ä½ åº“ï¼Œç›¸ä¿¡è¯»è€…ä¹Ÿæœ‰è‡ªå·±çš„å®ç°æ€è·¯ï¼Œç¬”è€…æ°´å¹³æœ‰é™ï¼Œå¦‚æœå“ªé‡Œæœ‰æ¬ ç¼ºè¿˜å¸Œæœ›å¤§å®¶æŒ‡æ­£ï¼Œå…±åŒè¿›æ­¥ã€‚</p>"},{"title":"js Worker API åœ¨å€’è®¡æ—¶ä¸­çš„ä½¿ç”¨","date":"2016-07-11T09:33:17.000Z","_content":"\nåœ¨åšå¼€å‘çš„æ—¶å€™ï¼Œå€’è®¡æ—¶çš„éœ€æ±‚æ˜¯å¾ˆå¸¸è§çš„ï¼Œæ¯”å¦‚è®¢å•å¾…æäº¤å’Œå¾…æ”¯ä»˜éƒ½ä¼šæœ‰å€’è®¡æ—¶ï¼Œå¸‚é¢ä¸Šçš„å…¼èŒè½¯ä»¶åœ¨é¢†å–ä»»åŠ¡åéƒ½ä¼šæœ‰å€’è®¡æ—¶ï¼Œç™»å½•æ³¨å†Œä¸­è·å–éªŒè¯ç çš„æ—¶å€™ä¹Ÿä¼šæœ‰å€’è®¡æ—¶ï¼Œæœ‰çš„é¡µé¢åªæœ‰ä¸€ä¸ªå€’è®¡æ—¶ï¼Œè€Œæœ‰çš„é¡µé¢ä½œä¸ºåˆ—è¡¨é¡µï¼Œåˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹éƒ½ä¼šæœ‰å€’è®¡æ—¶ï¼Œä»Šå¤©å°±æ¥èŠèŠ Worker API åœ¨jså€’è®¡æ—¶ä¸­çš„ä½¿ç”¨ï¼Œä»¥åŠä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Worker æ¥åšå€’è®¡æ—¶\n\n<!-- more -->\n\n# setInterval æˆ– setTimeout çš„é—®é¢˜ #\n\nå½“æåˆ°jsçš„å€’è®¡æ—¶åŠŸèƒ½æ—¶ï¼Œæˆ‘æƒ³ä½ ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å¯èƒ½å°±æ˜¯ setInterval è¿™ä¸ªä¸œä¸œï¼Œè¿™ä¸ªä¸œè¥¿åœ¨åšPCé¡µé¢çš„æ—¶å€™å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œè‡³å°‘æˆ‘ç°åœ¨è¿˜æ²¡é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œè€Œå½“ä½ åœ¨ç§»åŠ¨é¡µé¢ä¸­ä½¿ç”¨å®ƒæ¥åšå€’è®¡æ—¶çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºé—®é¢˜äº†ï¼Œå…·ä½“æ¥è¯´ï¼Œæ˜¯åœ¨åšiosä¸­çš„ç§»åŠ¨é¡µé¢å¼€å‘çš„æ—¶å€™ï¼Œé—®é¢˜å°±å°¤ä¸ºæ˜æ˜¾äº†ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹ä»£ç ï¼š\n\n```\n<body>\n\n    <div id=\"box\">60</div>\n\n    <script>\n\n    var box = document.getElementById('box');\n    var num = 60;\n\n    var T = setInterval(function(){\n        \n        box.innerHTML = --num;\n        if(num <= 0){\n            clearInterval(T);\n        }\n\n    }, 1000);\n        \n    </script>\n</body>\n```\n\nä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ª60ç§’çš„å€’è®¡æ—¶ç¨‹åºï¼Œæˆ‘ä»¬ä½¿ç”¨ setInterval æ¥å®Œæˆï¼Œè¿™æ®µä»£ç åœ¨PCä¸­å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œåœ¨Androidä¸­ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯æ‹¿åˆ°iosä¸­ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ¥çœ‹å›¾ï¼š\n\n![æ—¶é—´åœæ­¢](http://7xlolm.com1.z0.glb.clouddn.com/201607114.gif)\n\nä¸Šå›¾ä¸­ï¼Œå½“å€’è®¡æ—¶èµ°åˆ°37çš„æ—¶å€™ï¼Œç”¨æ‰‹æ‹–åŠ¨é¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™jsä»£ç ä¼šè¢«é˜»å¡ï¼Œå¯¼è‡´å€’è®¡æ—¶ä¸åœ¨æ‰§è¡Œï¼Œè¿™ä¸ªç°è±¡å¾ˆå¸¸è§ï¼Œæ¯”å¦‚å½“ä½ å’Œæœ‹å‹ç©å¾®ä¿¡çš„æ—¶å€™ï¼Œäº’ç›¸å‘é€è‡ªå®šä¹‰è¡¨æƒ…çš„gifå›¾çš„æ—¶å€™ï¼Œå½“ä½ æ»šåŠ¨èŠå¤©ç•Œé¢æ—¶ï¼Œä½ ä¼šå‘ç°gifå›¾ä¹Ÿä¼šé™æ­¢ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯iosç³»ç»Ÿæœºåˆ¶çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ²¡åŠæ³•ä»æ ¹æœ¬ä¸Šè§£å†³ï¼Œä½†è¿™å¹¶ä¸æ˜¯æœ€å…³é”®çš„ï¼Œå¤§å®¶å¯ä»¥å‘ç°ï¼Œåœ¨å€’è®¡æ—¶èµ°åˆ°37çš„æ—¶å€™ï¼Œç”¨æ‰‹æŒ‡æ“ä½œé¡µé¢å¤§æ¦‚æœ‰ä¸¤ä¸‰é¢çš„æ—¶é—´ï¼ŒæŒ‰æ­£å¸¸æ¥è®²ï¼Œæ—¶é—´åº”è¯¥å€’è®¡æ—¶åˆ° 35ç§’æˆ–è€…34ç§’ï¼Œä½†æ˜¯å›¾ä¸­å¾ˆæ¸…æ¥šçš„å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ‰‹æŒ‡åœæ­¢æ“ä½œåï¼Œæ—¶é—´å´ä»37ç§’ç»§ç»­å€’è®¡æ—¶ï¼Œèµ°åˆ°äº†36ç§’ï¼Œè¿™å°±ä¸æ—¶é—´çš„å€’è®¡æ—¶æ—¶é—´é€ æˆäº†å·®è·ï¼Œå‡å¦‚å€’è®¡æ—¶çš„é¡µé¢å¾ˆé•¿ï¼Œæ¯”å¦‚ä¸€ä¸ªåˆ—è¡¨é¡µï¼Œé‚£ä¹ˆç”¨æˆ·åœ¨æ»‘åŠ¨æŸ¥çœ‹é¡µé¢ä¿¡å¿ƒçš„æ—¶å€™ï¼Œä¼šé€ æˆæ›´å¤šçš„å€’è®¡æ—¶å»¶è¿Ÿï¼Œè¿™åœ¨ä¸€äº›è¦æ±‚æ¯”è¾ƒç²¾å‡†çš„å€’è®¡æ—¶åº”ç”¨ä¸­ï¼Œç®€ç›´æ˜¯ä¸å…è®¸å‡ºç°çš„ï¼Œè™½ç„¶åç«¯ä¹Ÿä¼šåšä¸€å±‚æ ¡éªŒã€‚\n\nè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦è¯´çš„é—®é¢˜ï¼Œä¸å…¶è¯´æ˜¯ setInterval æˆ–è€… setTimeout çš„é—®é¢˜ï¼Œå€’ä¸å¦‚è¯´æ˜¯ ios ç³»ç»Ÿçš„é—®é¢˜ï¼Œé‚£ä¹ˆæœ‰åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬è¦è°ˆåˆ°çš„ Worker APIã€‚\n\n# Worker API #\n\nweb Worker API å…è®¸ JavaScript åœ¨åå°è¿è¡Œï¼Œæµè§ˆå™¨å®ç° Worker API çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œæ¯ä¸ªæµè§ˆå™¨å‚å®¶å¯èƒ½ä¸å°½ç›¸åŒï¼Œä»–ä»¬å¯ä»¥ä½¿ç”¨ç°çº¿ç¨‹æˆ–åå°è¿›ç¨‹ç­‰ï¼Œè¿™ä½¿å¾— js ä»£ç ä¸è¢«UIçº¿ç¨‹é˜»å¡ï¼ŒäºŒè€…äº’ä¸å½±å“ï¼Œç‰¹åˆ«æ˜¯é¢å¯¹è®¡ç®—é‡æ¯”è¾ƒå¤§çš„ä»»åŠ¡çš„æ—¶å€™ï¼Œä¼šç»™åº”ç”¨ç¨‹åºå¸¦æ¥æ€§èƒ½ä¸Šçš„æå‡ã€‚\n\nweb Worker API çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥è¯¢ç›¸å…³ä¹¦ç±æˆ–åšå®¢ã€‚ç›¸ä¿¡èªæ˜çš„ä½ 10åˆ†é’Ÿå°±èƒ½æå®šã€‚\n\n# ä½¿ç”¨ Worker è§£å†³é—®é¢˜ #\n\næˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼Œå°†å€’è®¡æ—¶çš„è®¡ç®—æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶é‡Œï¼Œä½¿ç”¨ Worder å»æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥äº†å‘¢ï¼Ÿ\n\næ–°å»ºä¸€ä¸ª countdown.js æ–‡ä»¶ï¼š\n\n```\nself.onmessage = function(event){\n\tvar num = event.data;\n\n\tvar T = setInterval(function(){\n\t\t\n        self.postMessage(--num);\n        if(num <= 0){\n            clearInterval(T);\n            self.close();\n        }\n\n    }, 1000);\n}\n```\n\nä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œåœ¨ countdown.js ä¸­ï¼Œç”±äºè¿™ä¸ªjsæ–‡ä»¶æ˜¯ç”± Worker æ¥åœ¨åå°æ‰§è¡Œçš„æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™ä¸ªæ–‡ä»¶å†…ä»£ç çš„ self æŒ‡å‘çš„å°±æ˜¯ Worker å¯¹è±¡ã€‚æˆ‘ä»¬é€šè¿‡ onmessage æ—¶é—´æ¥æ”¶æ¥è‡ªé¡µé¢çš„å€’è®¡æ—¶æ•°å€¼ï¼Œç„¶ååŸå°ä¸åŠ¨çš„æŠŠä¹‹å‰çš„å€’è®¡æ—¶ä»£ç æ‹·è´è¿‡æ¥ï¼Œå”¯ä¸€ä¸åŒçš„å°±æ˜¯ä½¿ç”¨ self.close() è¯­å¥æ¥å…³é—­ Workerã€‚\n\nç„¶åä¿®æ”¹ä¹‹å‰çš„é¡µé¢æ–‡ä»¶å¦‚ä¸‹ï¼š\n\n```\n<body>\n\n    <div id=\"box\">60</div>\n\n    <script>\n\n    var box = document.getElementById('box');\n\n    var w = new Worker('countdown.js');\n\n    w.postMessage(60);\n\n    w.onmessage = function(event){\n        box.innerHTML = event.data;\n    }\n        \n    </script>\n</body>\n```\n\nåœ¨PCä¸­åˆ·æ–°ä½ çš„é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ä¾ç„¶æ­£ç¡®å·¥ä½œï¼Œä¹‹åå†æ‹¿åˆ°iosä¸­åšä¹‹å‰gifå›¾åŒæ ·çš„æ“ä½œï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![å€’è®¡æ—¶ç»§ç»­](http://7xlolm.com1.z0.glb.clouddn.com/2016071144.gif)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨55ç§’çš„æ—¶å€™å¼€å§‹æ‹–åŠ¨é¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™å€’è®¡æ—¶åœæ­¢äº†ï¼Œä¸è¿‡ï¼Œå½“æˆ‘ä»¬æ”¾æ‰‹ä¹‹åï¼Œå€’è®¡æ—¶ä¼šç«‹åˆ»æ¢å¤åˆ°æ­£å¸¸åº”è¯¥åˆ°è¾¾çš„æ—¶åˆ»ï¼Œè€Œä¸ä¼šäº§ç”Ÿä»»ä½•è¯¯å·®å’Œå»¶è¿Ÿï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æ¯”è¾ƒå®Œç¾çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚\n\n# éœ€è¦æ³¨æ„çš„åœ°æ–¹ #\n\nåœ¨åˆ—è¡¨é¡µé¢ä¸­ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªå€’è®¡æ—¶ï¼Œå¹¶ä¸”æ¯ä¸ªå€’è®¡æ—¶çš„å¼€å§‹æ—¶é—´ä¸å°½ç›¸åŒï¼Œä½†åˆ‡è®°ä¸è¦é€šè¿‡å¾ªç¯å» new å¾ˆå¤šä¸ª Worker å‡ºæ¥ï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨å¡æ­»ï¼Œç‰¹åˆ«æ˜¯å¦‚æœåœ¨åš Hybrid App ä¸­çš„ H5 é¡µé¢æ—¶ï¼Œå¯èƒ½ä¼šé€ æˆé—ªé€€ï¼Œæ‰€ä»¥ä½ åªèƒ½ new ä¸€ä¸ª Worker å¯¹è±¡å‡ºæ¥ï¼Œç„¶åä½¿ç”¨è¿™ä¸€ä¸ª Worker å¯¹è±¡å»åšæ‰€æœ‰åˆ—è¡¨æ—¶é—´çš„å€’è®¡æ—¶ï¼Œç„¶ååœ¨æ›´æ–°è§†å›¾ä¸­ä½¿ç”¨å¾ªç¯å»æ›´æ–°ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰é—®é¢˜äº†ï¼Œå¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº›Androidæœºå‹ä¸­çš„webviewä¸æ”¯æŒ web Worker ã€‚è¿™ä¸ªæ—¶å€™ä»…ä»…å»ä½¿ç”¨ setInterval å°±å¯ä»¥äº†ï¼Œå› ä¸ºåœ¨Androidä¸­ä¸å­˜åœ¨iosä¸­é‚£ç§é˜»å¡çš„æƒ…å†µã€‚\n\nä»¥ä¸Šå°±æ˜¯è¿™ç¯‡åšå®¢çš„å†…å®¹ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ© = =ã€‚\n\n","source":"_posts/2016/07/11/js-Worker-API-åœ¨å€’è®¡æ—¶ä¸­çš„ä½¿ç”¨.md","raw":"title: js Worker API åœ¨å€’è®¡æ—¶ä¸­çš„ä½¿ç”¨\ndate: 2016-07-11 17:33:17\ncategories:\n- WebFrontEnd\ntags:\n- Worker\n---\n\nåœ¨åšå¼€å‘çš„æ—¶å€™ï¼Œå€’è®¡æ—¶çš„éœ€æ±‚æ˜¯å¾ˆå¸¸è§çš„ï¼Œæ¯”å¦‚è®¢å•å¾…æäº¤å’Œå¾…æ”¯ä»˜éƒ½ä¼šæœ‰å€’è®¡æ—¶ï¼Œå¸‚é¢ä¸Šçš„å…¼èŒè½¯ä»¶åœ¨é¢†å–ä»»åŠ¡åéƒ½ä¼šæœ‰å€’è®¡æ—¶ï¼Œç™»å½•æ³¨å†Œä¸­è·å–éªŒè¯ç çš„æ—¶å€™ä¹Ÿä¼šæœ‰å€’è®¡æ—¶ï¼Œæœ‰çš„é¡µé¢åªæœ‰ä¸€ä¸ªå€’è®¡æ—¶ï¼Œè€Œæœ‰çš„é¡µé¢ä½œä¸ºåˆ—è¡¨é¡µï¼Œåˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹éƒ½ä¼šæœ‰å€’è®¡æ—¶ï¼Œä»Šå¤©å°±æ¥èŠèŠ Worker API åœ¨jså€’è®¡æ—¶ä¸­çš„ä½¿ç”¨ï¼Œä»¥åŠä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Worker æ¥åšå€’è®¡æ—¶\n\n<!-- more -->\n\n# setInterval æˆ– setTimeout çš„é—®é¢˜ #\n\nå½“æåˆ°jsçš„å€’è®¡æ—¶åŠŸèƒ½æ—¶ï¼Œæˆ‘æƒ³ä½ ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å¯èƒ½å°±æ˜¯ setInterval è¿™ä¸ªä¸œä¸œï¼Œè¿™ä¸ªä¸œè¥¿åœ¨åšPCé¡µé¢çš„æ—¶å€™å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œè‡³å°‘æˆ‘ç°åœ¨è¿˜æ²¡é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œè€Œå½“ä½ åœ¨ç§»åŠ¨é¡µé¢ä¸­ä½¿ç”¨å®ƒæ¥åšå€’è®¡æ—¶çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºé—®é¢˜äº†ï¼Œå…·ä½“æ¥è¯´ï¼Œæ˜¯åœ¨åšiosä¸­çš„ç§»åŠ¨é¡µé¢å¼€å‘çš„æ—¶å€™ï¼Œé—®é¢˜å°±å°¤ä¸ºæ˜æ˜¾äº†ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹ä»£ç ï¼š\n\n```\n<body>\n\n    <div id=\"box\">60</div>\n\n    <script>\n\n    var box = document.getElementById('box');\n    var num = 60;\n\n    var T = setInterval(function(){\n        \n        box.innerHTML = --num;\n        if(num <= 0){\n            clearInterval(T);\n        }\n\n    }, 1000);\n        \n    </script>\n</body>\n```\n\nä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ª60ç§’çš„å€’è®¡æ—¶ç¨‹åºï¼Œæˆ‘ä»¬ä½¿ç”¨ setInterval æ¥å®Œæˆï¼Œè¿™æ®µä»£ç åœ¨PCä¸­å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œåœ¨Androidä¸­ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯æ‹¿åˆ°iosä¸­ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ¥çœ‹å›¾ï¼š\n\n![æ—¶é—´åœæ­¢](http://7xlolm.com1.z0.glb.clouddn.com/201607114.gif)\n\nä¸Šå›¾ä¸­ï¼Œå½“å€’è®¡æ—¶èµ°åˆ°37çš„æ—¶å€™ï¼Œç”¨æ‰‹æ‹–åŠ¨é¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™jsä»£ç ä¼šè¢«é˜»å¡ï¼Œå¯¼è‡´å€’è®¡æ—¶ä¸åœ¨æ‰§è¡Œï¼Œè¿™ä¸ªç°è±¡å¾ˆå¸¸è§ï¼Œæ¯”å¦‚å½“ä½ å’Œæœ‹å‹ç©å¾®ä¿¡çš„æ—¶å€™ï¼Œäº’ç›¸å‘é€è‡ªå®šä¹‰è¡¨æƒ…çš„gifå›¾çš„æ—¶å€™ï¼Œå½“ä½ æ»šåŠ¨èŠå¤©ç•Œé¢æ—¶ï¼Œä½ ä¼šå‘ç°gifå›¾ä¹Ÿä¼šé™æ­¢ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯iosç³»ç»Ÿæœºåˆ¶çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ²¡åŠæ³•ä»æ ¹æœ¬ä¸Šè§£å†³ï¼Œä½†è¿™å¹¶ä¸æ˜¯æœ€å…³é”®çš„ï¼Œå¤§å®¶å¯ä»¥å‘ç°ï¼Œåœ¨å€’è®¡æ—¶èµ°åˆ°37çš„æ—¶å€™ï¼Œç”¨æ‰‹æŒ‡æ“ä½œé¡µé¢å¤§æ¦‚æœ‰ä¸¤ä¸‰é¢çš„æ—¶é—´ï¼ŒæŒ‰æ­£å¸¸æ¥è®²ï¼Œæ—¶é—´åº”è¯¥å€’è®¡æ—¶åˆ° 35ç§’æˆ–è€…34ç§’ï¼Œä½†æ˜¯å›¾ä¸­å¾ˆæ¸…æ¥šçš„å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ‰‹æŒ‡åœæ­¢æ“ä½œåï¼Œæ—¶é—´å´ä»37ç§’ç»§ç»­å€’è®¡æ—¶ï¼Œèµ°åˆ°äº†36ç§’ï¼Œè¿™å°±ä¸æ—¶é—´çš„å€’è®¡æ—¶æ—¶é—´é€ æˆäº†å·®è·ï¼Œå‡å¦‚å€’è®¡æ—¶çš„é¡µé¢å¾ˆé•¿ï¼Œæ¯”å¦‚ä¸€ä¸ªåˆ—è¡¨é¡µï¼Œé‚£ä¹ˆç”¨æˆ·åœ¨æ»‘åŠ¨æŸ¥çœ‹é¡µé¢ä¿¡å¿ƒçš„æ—¶å€™ï¼Œä¼šé€ æˆæ›´å¤šçš„å€’è®¡æ—¶å»¶è¿Ÿï¼Œè¿™åœ¨ä¸€äº›è¦æ±‚æ¯”è¾ƒç²¾å‡†çš„å€’è®¡æ—¶åº”ç”¨ä¸­ï¼Œç®€ç›´æ˜¯ä¸å…è®¸å‡ºç°çš„ï¼Œè™½ç„¶åç«¯ä¹Ÿä¼šåšä¸€å±‚æ ¡éªŒã€‚\n\nè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦è¯´çš„é—®é¢˜ï¼Œä¸å…¶è¯´æ˜¯ setInterval æˆ–è€… setTimeout çš„é—®é¢˜ï¼Œå€’ä¸å¦‚è¯´æ˜¯ ios ç³»ç»Ÿçš„é—®é¢˜ï¼Œé‚£ä¹ˆæœ‰åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬è¦è°ˆåˆ°çš„ Worker APIã€‚\n\n# Worker API #\n\nweb Worker API å…è®¸ JavaScript åœ¨åå°è¿è¡Œï¼Œæµè§ˆå™¨å®ç° Worker API çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œæ¯ä¸ªæµè§ˆå™¨å‚å®¶å¯èƒ½ä¸å°½ç›¸åŒï¼Œä»–ä»¬å¯ä»¥ä½¿ç”¨ç°çº¿ç¨‹æˆ–åå°è¿›ç¨‹ç­‰ï¼Œè¿™ä½¿å¾— js ä»£ç ä¸è¢«UIçº¿ç¨‹é˜»å¡ï¼ŒäºŒè€…äº’ä¸å½±å“ï¼Œç‰¹åˆ«æ˜¯é¢å¯¹è®¡ç®—é‡æ¯”è¾ƒå¤§çš„ä»»åŠ¡çš„æ—¶å€™ï¼Œä¼šç»™åº”ç”¨ç¨‹åºå¸¦æ¥æ€§èƒ½ä¸Šçš„æå‡ã€‚\n\nweb Worker API çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥è¯¢ç›¸å…³ä¹¦ç±æˆ–åšå®¢ã€‚ç›¸ä¿¡èªæ˜çš„ä½ 10åˆ†é’Ÿå°±èƒ½æå®šã€‚\n\n# ä½¿ç”¨ Worker è§£å†³é—®é¢˜ #\n\næˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼Œå°†å€’è®¡æ—¶çš„è®¡ç®—æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶é‡Œï¼Œä½¿ç”¨ Worder å»æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥äº†å‘¢ï¼Ÿ\n\næ–°å»ºä¸€ä¸ª countdown.js æ–‡ä»¶ï¼š\n\n```\nself.onmessage = function(event){\n\tvar num = event.data;\n\n\tvar T = setInterval(function(){\n\t\t\n        self.postMessage(--num);\n        if(num <= 0){\n            clearInterval(T);\n            self.close();\n        }\n\n    }, 1000);\n}\n```\n\nä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œåœ¨ countdown.js ä¸­ï¼Œç”±äºè¿™ä¸ªjsæ–‡ä»¶æ˜¯ç”± Worker æ¥åœ¨åå°æ‰§è¡Œçš„æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™ä¸ªæ–‡ä»¶å†…ä»£ç çš„ self æŒ‡å‘çš„å°±æ˜¯ Worker å¯¹è±¡ã€‚æˆ‘ä»¬é€šè¿‡ onmessage æ—¶é—´æ¥æ”¶æ¥è‡ªé¡µé¢çš„å€’è®¡æ—¶æ•°å€¼ï¼Œç„¶ååŸå°ä¸åŠ¨çš„æŠŠä¹‹å‰çš„å€’è®¡æ—¶ä»£ç æ‹·è´è¿‡æ¥ï¼Œå”¯ä¸€ä¸åŒçš„å°±æ˜¯ä½¿ç”¨ self.close() è¯­å¥æ¥å…³é—­ Workerã€‚\n\nç„¶åä¿®æ”¹ä¹‹å‰çš„é¡µé¢æ–‡ä»¶å¦‚ä¸‹ï¼š\n\n```\n<body>\n\n    <div id=\"box\">60</div>\n\n    <script>\n\n    var box = document.getElementById('box');\n\n    var w = new Worker('countdown.js');\n\n    w.postMessage(60);\n\n    w.onmessage = function(event){\n        box.innerHTML = event.data;\n    }\n        \n    </script>\n</body>\n```\n\nåœ¨PCä¸­åˆ·æ–°ä½ çš„é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ä¾ç„¶æ­£ç¡®å·¥ä½œï¼Œä¹‹åå†æ‹¿åˆ°iosä¸­åšä¹‹å‰gifå›¾åŒæ ·çš„æ“ä½œï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![å€’è®¡æ—¶ç»§ç»­](http://7xlolm.com1.z0.glb.clouddn.com/2016071144.gif)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨55ç§’çš„æ—¶å€™å¼€å§‹æ‹–åŠ¨é¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™å€’è®¡æ—¶åœæ­¢äº†ï¼Œä¸è¿‡ï¼Œå½“æˆ‘ä»¬æ”¾æ‰‹ä¹‹åï¼Œå€’è®¡æ—¶ä¼šç«‹åˆ»æ¢å¤åˆ°æ­£å¸¸åº”è¯¥åˆ°è¾¾çš„æ—¶åˆ»ï¼Œè€Œä¸ä¼šäº§ç”Ÿä»»ä½•è¯¯å·®å’Œå»¶è¿Ÿï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æ¯”è¾ƒå®Œç¾çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚\n\n# éœ€è¦æ³¨æ„çš„åœ°æ–¹ #\n\nåœ¨åˆ—è¡¨é¡µé¢ä¸­ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªå€’è®¡æ—¶ï¼Œå¹¶ä¸”æ¯ä¸ªå€’è®¡æ—¶çš„å¼€å§‹æ—¶é—´ä¸å°½ç›¸åŒï¼Œä½†åˆ‡è®°ä¸è¦é€šè¿‡å¾ªç¯å» new å¾ˆå¤šä¸ª Worker å‡ºæ¥ï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨å¡æ­»ï¼Œç‰¹åˆ«æ˜¯å¦‚æœåœ¨åš Hybrid App ä¸­çš„ H5 é¡µé¢æ—¶ï¼Œå¯èƒ½ä¼šé€ æˆé—ªé€€ï¼Œæ‰€ä»¥ä½ åªèƒ½ new ä¸€ä¸ª Worker å¯¹è±¡å‡ºæ¥ï¼Œç„¶åä½¿ç”¨è¿™ä¸€ä¸ª Worker å¯¹è±¡å»åšæ‰€æœ‰åˆ—è¡¨æ—¶é—´çš„å€’è®¡æ—¶ï¼Œç„¶ååœ¨æ›´æ–°è§†å›¾ä¸­ä½¿ç”¨å¾ªç¯å»æ›´æ–°ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰é—®é¢˜äº†ï¼Œå¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº›Androidæœºå‹ä¸­çš„webviewä¸æ”¯æŒ web Worker ã€‚è¿™ä¸ªæ—¶å€™ä»…ä»…å»ä½¿ç”¨ setInterval å°±å¯ä»¥äº†ï¼Œå› ä¸ºåœ¨Androidä¸­ä¸å­˜åœ¨iosä¸­é‚£ç§é˜»å¡çš„æƒ…å†µã€‚\n\nä»¥ä¸Šå°±æ˜¯è¿™ç¯‡åšå®¢çš„å†…å®¹ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ© = =ã€‚\n\n","slug":"js-Worker-API-åœ¨å€’è®¡æ—¶ä¸­çš„ä½¿ç”¨","published":1,"updated":"2016-07-11T11:04:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx51z001447fy99ud5mtr","content":"<p>åœ¨åšå¼€å‘çš„æ—¶å€™ï¼Œå€’è®¡æ—¶çš„éœ€æ±‚æ˜¯å¾ˆå¸¸è§çš„ï¼Œæ¯”å¦‚è®¢å•å¾…æäº¤å’Œå¾…æ”¯ä»˜éƒ½ä¼šæœ‰å€’è®¡æ—¶ï¼Œå¸‚é¢ä¸Šçš„å…¼èŒè½¯ä»¶åœ¨é¢†å–ä»»åŠ¡åéƒ½ä¼šæœ‰å€’è®¡æ—¶ï¼Œç™»å½•æ³¨å†Œä¸­è·å–éªŒè¯ç çš„æ—¶å€™ä¹Ÿä¼šæœ‰å€’è®¡æ—¶ï¼Œæœ‰çš„é¡µé¢åªæœ‰ä¸€ä¸ªå€’è®¡æ—¶ï¼Œè€Œæœ‰çš„é¡µé¢ä½œä¸ºåˆ—è¡¨é¡µï¼Œåˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹éƒ½ä¼šæœ‰å€’è®¡æ—¶ï¼Œä»Šå¤©å°±æ¥èŠèŠ Worker API åœ¨jså€’è®¡æ—¶ä¸­çš„ä½¿ç”¨ï¼Œä»¥åŠä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Worker æ¥åšå€’è®¡æ—¶</p>\n<a id=\"more\"></a>\n<h1 id=\"setInterval-æˆ–-setTimeout-çš„é—®é¢˜\"><a href=\"#setInterval-æˆ–-setTimeout-çš„é—®é¢˜\" class=\"headerlink\" title=\"setInterval æˆ– setTimeout çš„é—®é¢˜\"></a>setInterval æˆ– setTimeout çš„é—®é¢˜</h1><p>å½“æåˆ°jsçš„å€’è®¡æ—¶åŠŸèƒ½æ—¶ï¼Œæˆ‘æƒ³ä½ ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å¯èƒ½å°±æ˜¯ setInterval è¿™ä¸ªä¸œä¸œï¼Œè¿™ä¸ªä¸œè¥¿åœ¨åšPCé¡µé¢çš„æ—¶å€™å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œè‡³å°‘æˆ‘ç°åœ¨è¿˜æ²¡é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œè€Œå½“ä½ åœ¨ç§»åŠ¨é¡µé¢ä¸­ä½¿ç”¨å®ƒæ¥åšå€’è®¡æ—¶çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºé—®é¢˜äº†ï¼Œå…·ä½“æ¥è¯´ï¼Œæ˜¯åœ¨åšiosä¸­çš„ç§»åŠ¨é¡µé¢å¼€å‘çš„æ—¶å€™ï¼Œé—®é¢˜å°±å°¤ä¸ºæ˜æ˜¾äº†ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹ä»£ç ï¼š</p>\n<pre><code>&lt;body&gt;\n\n    &lt;div id=&quot;box&quot;&gt;60&lt;/div&gt;\n\n    &lt;script&gt;\n\n    var box = document.getElementById(&#39;box&#39;);\n    var num = 60;\n\n    var T = setInterval(function(){\n\n        box.innerHTML = --num;\n        if(num &lt;= 0){\n            clearInterval(T);\n        }\n\n    }, 1000);\n\n    &lt;/script&gt;\n&lt;/body&gt;\n</code></pre><p>ä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ª60ç§’çš„å€’è®¡æ—¶ç¨‹åºï¼Œæˆ‘ä»¬ä½¿ç”¨ setInterval æ¥å®Œæˆï¼Œè¿™æ®µä»£ç åœ¨PCä¸­å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œåœ¨Androidä¸­ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯æ‹¿åˆ°iosä¸­ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ¥çœ‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201607114.gif\" alt=\"æ—¶é—´åœæ­¢\"></p>\n<p>ä¸Šå›¾ä¸­ï¼Œå½“å€’è®¡æ—¶èµ°åˆ°37çš„æ—¶å€™ï¼Œç”¨æ‰‹æ‹–åŠ¨é¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™jsä»£ç ä¼šè¢«é˜»å¡ï¼Œå¯¼è‡´å€’è®¡æ—¶ä¸åœ¨æ‰§è¡Œï¼Œè¿™ä¸ªç°è±¡å¾ˆå¸¸è§ï¼Œæ¯”å¦‚å½“ä½ å’Œæœ‹å‹ç©å¾®ä¿¡çš„æ—¶å€™ï¼Œäº’ç›¸å‘é€è‡ªå®šä¹‰è¡¨æƒ…çš„gifå›¾çš„æ—¶å€™ï¼Œå½“ä½ æ»šåŠ¨èŠå¤©ç•Œé¢æ—¶ï¼Œä½ ä¼šå‘ç°gifå›¾ä¹Ÿä¼šé™æ­¢ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯iosç³»ç»Ÿæœºåˆ¶çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ²¡åŠæ³•ä»æ ¹æœ¬ä¸Šè§£å†³ï¼Œä½†è¿™å¹¶ä¸æ˜¯æœ€å…³é”®çš„ï¼Œå¤§å®¶å¯ä»¥å‘ç°ï¼Œåœ¨å€’è®¡æ—¶èµ°åˆ°37çš„æ—¶å€™ï¼Œç”¨æ‰‹æŒ‡æ“ä½œé¡µé¢å¤§æ¦‚æœ‰ä¸¤ä¸‰é¢çš„æ—¶é—´ï¼ŒæŒ‰æ­£å¸¸æ¥è®²ï¼Œæ—¶é—´åº”è¯¥å€’è®¡æ—¶åˆ° 35ç§’æˆ–è€…34ç§’ï¼Œä½†æ˜¯å›¾ä¸­å¾ˆæ¸…æ¥šçš„å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ‰‹æŒ‡åœæ­¢æ“ä½œåï¼Œæ—¶é—´å´ä»37ç§’ç»§ç»­å€’è®¡æ—¶ï¼Œèµ°åˆ°äº†36ç§’ï¼Œè¿™å°±ä¸æ—¶é—´çš„å€’è®¡æ—¶æ—¶é—´é€ æˆäº†å·®è·ï¼Œå‡å¦‚å€’è®¡æ—¶çš„é¡µé¢å¾ˆé•¿ï¼Œæ¯”å¦‚ä¸€ä¸ªåˆ—è¡¨é¡µï¼Œé‚£ä¹ˆç”¨æˆ·åœ¨æ»‘åŠ¨æŸ¥çœ‹é¡µé¢ä¿¡å¿ƒçš„æ—¶å€™ï¼Œä¼šé€ æˆæ›´å¤šçš„å€’è®¡æ—¶å»¶è¿Ÿï¼Œè¿™åœ¨ä¸€äº›è¦æ±‚æ¯”è¾ƒç²¾å‡†çš„å€’è®¡æ—¶åº”ç”¨ä¸­ï¼Œç®€ç›´æ˜¯ä¸å…è®¸å‡ºç°çš„ï¼Œè™½ç„¶åç«¯ä¹Ÿä¼šåšä¸€å±‚æ ¡éªŒã€‚</p>\n<p>è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦è¯´çš„é—®é¢˜ï¼Œä¸å…¶è¯´æ˜¯ setInterval æˆ–è€… setTimeout çš„é—®é¢˜ï¼Œå€’ä¸å¦‚è¯´æ˜¯ ios ç³»ç»Ÿçš„é—®é¢˜ï¼Œé‚£ä¹ˆæœ‰åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬è¦è°ˆåˆ°çš„ Worker APIã€‚</p>\n<h1 id=\"Worker-API\"><a href=\"#Worker-API\" class=\"headerlink\" title=\"Worker API\"></a>Worker API</h1><p>web Worker API å…è®¸ JavaScript åœ¨åå°è¿è¡Œï¼Œæµè§ˆå™¨å®ç° Worker API çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œæ¯ä¸ªæµè§ˆå™¨å‚å®¶å¯èƒ½ä¸å°½ç›¸åŒï¼Œä»–ä»¬å¯ä»¥ä½¿ç”¨ç°çº¿ç¨‹æˆ–åå°è¿›ç¨‹ç­‰ï¼Œè¿™ä½¿å¾— js ä»£ç ä¸è¢«UIçº¿ç¨‹é˜»å¡ï¼ŒäºŒè€…äº’ä¸å½±å“ï¼Œç‰¹åˆ«æ˜¯é¢å¯¹è®¡ç®—é‡æ¯”è¾ƒå¤§çš„ä»»åŠ¡çš„æ—¶å€™ï¼Œä¼šç»™åº”ç”¨ç¨‹åºå¸¦æ¥æ€§èƒ½ä¸Šçš„æå‡ã€‚</p>\n<p>web Worker API çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥è¯¢ç›¸å…³ä¹¦ç±æˆ–åšå®¢ã€‚ç›¸ä¿¡èªæ˜çš„ä½ 10åˆ†é’Ÿå°±èƒ½æå®šã€‚</p>\n<h1 id=\"ä½¿ç”¨-Worker-è§£å†³é—®é¢˜\"><a href=\"#ä½¿ç”¨-Worker-è§£å†³é—®é¢˜\" class=\"headerlink\" title=\"ä½¿ç”¨ Worker è§£å†³é—®é¢˜\"></a>ä½¿ç”¨ Worker è§£å†³é—®é¢˜</h1><p>æˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼Œå°†å€’è®¡æ—¶çš„è®¡ç®—æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶é‡Œï¼Œä½¿ç”¨ Worder å»æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥äº†å‘¢ï¼Ÿ</p>\n<p>æ–°å»ºä¸€ä¸ª countdown.js æ–‡ä»¶ï¼š</p>\n<pre><code>self.onmessage = function(event){\n    var num = event.data;\n\n    var T = setInterval(function(){\n\n        self.postMessage(--num);\n        if(num &lt;= 0){\n            clearInterval(T);\n            self.close();\n        }\n\n    }, 1000);\n}\n</code></pre><p>ä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œåœ¨ countdown.js ä¸­ï¼Œç”±äºè¿™ä¸ªjsæ–‡ä»¶æ˜¯ç”± Worker æ¥åœ¨åå°æ‰§è¡Œçš„æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™ä¸ªæ–‡ä»¶å†…ä»£ç çš„ self æŒ‡å‘çš„å°±æ˜¯ Worker å¯¹è±¡ã€‚æˆ‘ä»¬é€šè¿‡ onmessage æ—¶é—´æ¥æ”¶æ¥è‡ªé¡µé¢çš„å€’è®¡æ—¶æ•°å€¼ï¼Œç„¶ååŸå°ä¸åŠ¨çš„æŠŠä¹‹å‰çš„å€’è®¡æ—¶ä»£ç æ‹·è´è¿‡æ¥ï¼Œå”¯ä¸€ä¸åŒçš„å°±æ˜¯ä½¿ç”¨ self.close() è¯­å¥æ¥å…³é—­ Workerã€‚</p>\n<p>ç„¶åä¿®æ”¹ä¹‹å‰çš„é¡µé¢æ–‡ä»¶å¦‚ä¸‹ï¼š</p>\n<pre><code>&lt;body&gt;\n\n    &lt;div id=&quot;box&quot;&gt;60&lt;/div&gt;\n\n    &lt;script&gt;\n\n    var box = document.getElementById(&#39;box&#39;);\n\n    var w = new Worker(&#39;countdown.js&#39;);\n\n    w.postMessage(60);\n\n    w.onmessage = function(event){\n        box.innerHTML = event.data;\n    }\n\n    &lt;/script&gt;\n&lt;/body&gt;\n</code></pre><p>åœ¨PCä¸­åˆ·æ–°ä½ çš„é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ä¾ç„¶æ­£ç¡®å·¥ä½œï¼Œä¹‹åå†æ‹¿åˆ°iosä¸­åšä¹‹å‰gifå›¾åŒæ ·çš„æ“ä½œï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2016071144.gif\" alt=\"å€’è®¡æ—¶ç»§ç»­\"></p>\n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨55ç§’çš„æ—¶å€™å¼€å§‹æ‹–åŠ¨é¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™å€’è®¡æ—¶åœæ­¢äº†ï¼Œä¸è¿‡ï¼Œå½“æˆ‘ä»¬æ”¾æ‰‹ä¹‹åï¼Œå€’è®¡æ—¶ä¼šç«‹åˆ»æ¢å¤åˆ°æ­£å¸¸åº”è¯¥åˆ°è¾¾çš„æ—¶åˆ»ï¼Œè€Œä¸ä¼šäº§ç”Ÿä»»ä½•è¯¯å·®å’Œå»¶è¿Ÿï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æ¯”è¾ƒå®Œç¾çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>\n<h1 id=\"éœ€è¦æ³¨æ„çš„åœ°æ–¹\"><a href=\"#éœ€è¦æ³¨æ„çš„åœ°æ–¹\" class=\"headerlink\" title=\"éœ€è¦æ³¨æ„çš„åœ°æ–¹\"></a>éœ€è¦æ³¨æ„çš„åœ°æ–¹</h1><p>åœ¨åˆ—è¡¨é¡µé¢ä¸­ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªå€’è®¡æ—¶ï¼Œå¹¶ä¸”æ¯ä¸ªå€’è®¡æ—¶çš„å¼€å§‹æ—¶é—´ä¸å°½ç›¸åŒï¼Œä½†åˆ‡è®°ä¸è¦é€šè¿‡å¾ªç¯å» new å¾ˆå¤šä¸ª Worker å‡ºæ¥ï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨å¡æ­»ï¼Œç‰¹åˆ«æ˜¯å¦‚æœåœ¨åš Hybrid App ä¸­çš„ H5 é¡µé¢æ—¶ï¼Œå¯èƒ½ä¼šé€ æˆé—ªé€€ï¼Œæ‰€ä»¥ä½ åªèƒ½ new ä¸€ä¸ª Worker å¯¹è±¡å‡ºæ¥ï¼Œç„¶åä½¿ç”¨è¿™ä¸€ä¸ª Worker å¯¹è±¡å»åšæ‰€æœ‰åˆ—è¡¨æ—¶é—´çš„å€’è®¡æ—¶ï¼Œç„¶ååœ¨æ›´æ–°è§†å›¾ä¸­ä½¿ç”¨å¾ªç¯å»æ›´æ–°ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰é—®é¢˜äº†ï¼Œå¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº›Androidæœºå‹ä¸­çš„webviewä¸æ”¯æŒ web Worker ã€‚è¿™ä¸ªæ—¶å€™ä»…ä»…å»ä½¿ç”¨ setInterval å°±å¯ä»¥äº†ï¼Œå› ä¸ºåœ¨Androidä¸­ä¸å­˜åœ¨iosä¸­é‚£ç§é˜»å¡çš„æƒ…å†µã€‚</p>\n<p>ä»¥ä¸Šå°±æ˜¯è¿™ç¯‡åšå®¢çš„å†…å®¹ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ© = =ã€‚</p>\n","site":{"data":{}},"excerpt":"<p>åœ¨åšå¼€å‘çš„æ—¶å€™ï¼Œå€’è®¡æ—¶çš„éœ€æ±‚æ˜¯å¾ˆå¸¸è§çš„ï¼Œæ¯”å¦‚è®¢å•å¾…æäº¤å’Œå¾…æ”¯ä»˜éƒ½ä¼šæœ‰å€’è®¡æ—¶ï¼Œå¸‚é¢ä¸Šçš„å…¼èŒè½¯ä»¶åœ¨é¢†å–ä»»åŠ¡åéƒ½ä¼šæœ‰å€’è®¡æ—¶ï¼Œç™»å½•æ³¨å†Œä¸­è·å–éªŒè¯ç çš„æ—¶å€™ä¹Ÿä¼šæœ‰å€’è®¡æ—¶ï¼Œæœ‰çš„é¡µé¢åªæœ‰ä¸€ä¸ªå€’è®¡æ—¶ï¼Œè€Œæœ‰çš„é¡µé¢ä½œä¸ºåˆ—è¡¨é¡µï¼Œåˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹éƒ½ä¼šæœ‰å€’è®¡æ—¶ï¼Œä»Šå¤©å°±æ¥èŠèŠ Worker API åœ¨jså€’è®¡æ—¶ä¸­çš„ä½¿ç”¨ï¼Œä»¥åŠä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Worker æ¥åšå€’è®¡æ—¶</p>","more":"<h1 id=\"setInterval-æˆ–-setTimeout-çš„é—®é¢˜\"><a href=\"#setInterval-æˆ–-setTimeout-çš„é—®é¢˜\" class=\"headerlink\" title=\"setInterval æˆ– setTimeout çš„é—®é¢˜\"></a>setInterval æˆ– setTimeout çš„é—®é¢˜</h1><p>å½“æåˆ°jsçš„å€’è®¡æ—¶åŠŸèƒ½æ—¶ï¼Œæˆ‘æƒ³ä½ ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å¯èƒ½å°±æ˜¯ setInterval è¿™ä¸ªä¸œä¸œï¼Œè¿™ä¸ªä¸œè¥¿åœ¨åšPCé¡µé¢çš„æ—¶å€™å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œè‡³å°‘æˆ‘ç°åœ¨è¿˜æ²¡é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œè€Œå½“ä½ åœ¨ç§»åŠ¨é¡µé¢ä¸­ä½¿ç”¨å®ƒæ¥åšå€’è®¡æ—¶çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºé—®é¢˜äº†ï¼Œå…·ä½“æ¥è¯´ï¼Œæ˜¯åœ¨åšiosä¸­çš„ç§»åŠ¨é¡µé¢å¼€å‘çš„æ—¶å€™ï¼Œé—®é¢˜å°±å°¤ä¸ºæ˜æ˜¾äº†ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹ä»£ç ï¼š</p>\n<pre><code>&lt;body&gt;\n\n    &lt;div id=&quot;box&quot;&gt;60&lt;/div&gt;\n\n    &lt;script&gt;\n\n    var box = document.getElementById(&#39;box&#39;);\n    var num = 60;\n\n    var T = setInterval(function(){\n\n        box.innerHTML = --num;\n        if(num &lt;= 0){\n            clearInterval(T);\n        }\n\n    }, 1000);\n\n    &lt;/script&gt;\n&lt;/body&gt;\n</code></pre><p>ä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ª60ç§’çš„å€’è®¡æ—¶ç¨‹åºï¼Œæˆ‘ä»¬ä½¿ç”¨ setInterval æ¥å®Œæˆï¼Œè¿™æ®µä»£ç åœ¨PCä¸­å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œåœ¨Androidä¸­ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯æ‹¿åˆ°iosä¸­ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ¥çœ‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/201607114.gif\" alt=\"æ—¶é—´åœæ­¢\"></p>\n<p>ä¸Šå›¾ä¸­ï¼Œå½“å€’è®¡æ—¶èµ°åˆ°37çš„æ—¶å€™ï¼Œç”¨æ‰‹æ‹–åŠ¨é¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™jsä»£ç ä¼šè¢«é˜»å¡ï¼Œå¯¼è‡´å€’è®¡æ—¶ä¸åœ¨æ‰§è¡Œï¼Œè¿™ä¸ªç°è±¡å¾ˆå¸¸è§ï¼Œæ¯”å¦‚å½“ä½ å’Œæœ‹å‹ç©å¾®ä¿¡çš„æ—¶å€™ï¼Œäº’ç›¸å‘é€è‡ªå®šä¹‰è¡¨æƒ…çš„gifå›¾çš„æ—¶å€™ï¼Œå½“ä½ æ»šåŠ¨èŠå¤©ç•Œé¢æ—¶ï¼Œä½ ä¼šå‘ç°gifå›¾ä¹Ÿä¼šé™æ­¢ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯iosç³»ç»Ÿæœºåˆ¶çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ²¡åŠæ³•ä»æ ¹æœ¬ä¸Šè§£å†³ï¼Œä½†è¿™å¹¶ä¸æ˜¯æœ€å…³é”®çš„ï¼Œå¤§å®¶å¯ä»¥å‘ç°ï¼Œåœ¨å€’è®¡æ—¶èµ°åˆ°37çš„æ—¶å€™ï¼Œç”¨æ‰‹æŒ‡æ“ä½œé¡µé¢å¤§æ¦‚æœ‰ä¸¤ä¸‰é¢çš„æ—¶é—´ï¼ŒæŒ‰æ­£å¸¸æ¥è®²ï¼Œæ—¶é—´åº”è¯¥å€’è®¡æ—¶åˆ° 35ç§’æˆ–è€…34ç§’ï¼Œä½†æ˜¯å›¾ä¸­å¾ˆæ¸…æ¥šçš„å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ‰‹æŒ‡åœæ­¢æ“ä½œåï¼Œæ—¶é—´å´ä»37ç§’ç»§ç»­å€’è®¡æ—¶ï¼Œèµ°åˆ°äº†36ç§’ï¼Œè¿™å°±ä¸æ—¶é—´çš„å€’è®¡æ—¶æ—¶é—´é€ æˆäº†å·®è·ï¼Œå‡å¦‚å€’è®¡æ—¶çš„é¡µé¢å¾ˆé•¿ï¼Œæ¯”å¦‚ä¸€ä¸ªåˆ—è¡¨é¡µï¼Œé‚£ä¹ˆç”¨æˆ·åœ¨æ»‘åŠ¨æŸ¥çœ‹é¡µé¢ä¿¡å¿ƒçš„æ—¶å€™ï¼Œä¼šé€ æˆæ›´å¤šçš„å€’è®¡æ—¶å»¶è¿Ÿï¼Œè¿™åœ¨ä¸€äº›è¦æ±‚æ¯”è¾ƒç²¾å‡†çš„å€’è®¡æ—¶åº”ç”¨ä¸­ï¼Œç®€ç›´æ˜¯ä¸å…è®¸å‡ºç°çš„ï¼Œè™½ç„¶åç«¯ä¹Ÿä¼šåšä¸€å±‚æ ¡éªŒã€‚</p>\n<p>è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦è¯´çš„é—®é¢˜ï¼Œä¸å…¶è¯´æ˜¯ setInterval æˆ–è€… setTimeout çš„é—®é¢˜ï¼Œå€’ä¸å¦‚è¯´æ˜¯ ios ç³»ç»Ÿçš„é—®é¢˜ï¼Œé‚£ä¹ˆæœ‰åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬è¦è°ˆåˆ°çš„ Worker APIã€‚</p>\n<h1 id=\"Worker-API\"><a href=\"#Worker-API\" class=\"headerlink\" title=\"Worker API\"></a>Worker API</h1><p>web Worker API å…è®¸ JavaScript åœ¨åå°è¿è¡Œï¼Œæµè§ˆå™¨å®ç° Worker API çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œæ¯ä¸ªæµè§ˆå™¨å‚å®¶å¯èƒ½ä¸å°½ç›¸åŒï¼Œä»–ä»¬å¯ä»¥ä½¿ç”¨ç°çº¿ç¨‹æˆ–åå°è¿›ç¨‹ç­‰ï¼Œè¿™ä½¿å¾— js ä»£ç ä¸è¢«UIçº¿ç¨‹é˜»å¡ï¼ŒäºŒè€…äº’ä¸å½±å“ï¼Œç‰¹åˆ«æ˜¯é¢å¯¹è®¡ç®—é‡æ¯”è¾ƒå¤§çš„ä»»åŠ¡çš„æ—¶å€™ï¼Œä¼šç»™åº”ç”¨ç¨‹åºå¸¦æ¥æ€§èƒ½ä¸Šçš„æå‡ã€‚</p>\n<p>web Worker API çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥è¯¢ç›¸å…³ä¹¦ç±æˆ–åšå®¢ã€‚ç›¸ä¿¡èªæ˜çš„ä½ 10åˆ†é’Ÿå°±èƒ½æå®šã€‚</p>\n<h1 id=\"ä½¿ç”¨-Worker-è§£å†³é—®é¢˜\"><a href=\"#ä½¿ç”¨-Worker-è§£å†³é—®é¢˜\" class=\"headerlink\" title=\"ä½¿ç”¨ Worker è§£å†³é—®é¢˜\"></a>ä½¿ç”¨ Worker è§£å†³é—®é¢˜</h1><p>æˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼Œå°†å€’è®¡æ—¶çš„è®¡ç®—æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶é‡Œï¼Œä½¿ç”¨ Worder å»æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥äº†å‘¢ï¼Ÿ</p>\n<p>æ–°å»ºä¸€ä¸ª countdown.js æ–‡ä»¶ï¼š</p>\n<pre><code>self.onmessage = function(event){\n    var num = event.data;\n\n    var T = setInterval(function(){\n\n        self.postMessage(--num);\n        if(num &lt;= 0){\n            clearInterval(T);\n            self.close();\n        }\n\n    }, 1000);\n}\n</code></pre><p>ä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œåœ¨ countdown.js ä¸­ï¼Œç”±äºè¿™ä¸ªjsæ–‡ä»¶æ˜¯ç”± Worker æ¥åœ¨åå°æ‰§è¡Œçš„æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™ä¸ªæ–‡ä»¶å†…ä»£ç çš„ self æŒ‡å‘çš„å°±æ˜¯ Worker å¯¹è±¡ã€‚æˆ‘ä»¬é€šè¿‡ onmessage æ—¶é—´æ¥æ”¶æ¥è‡ªé¡µé¢çš„å€’è®¡æ—¶æ•°å€¼ï¼Œç„¶ååŸå°ä¸åŠ¨çš„æŠŠä¹‹å‰çš„å€’è®¡æ—¶ä»£ç æ‹·è´è¿‡æ¥ï¼Œå”¯ä¸€ä¸åŒçš„å°±æ˜¯ä½¿ç”¨ self.close() è¯­å¥æ¥å…³é—­ Workerã€‚</p>\n<p>ç„¶åä¿®æ”¹ä¹‹å‰çš„é¡µé¢æ–‡ä»¶å¦‚ä¸‹ï¼š</p>\n<pre><code>&lt;body&gt;\n\n    &lt;div id=&quot;box&quot;&gt;60&lt;/div&gt;\n\n    &lt;script&gt;\n\n    var box = document.getElementById(&#39;box&#39;);\n\n    var w = new Worker(&#39;countdown.js&#39;);\n\n    w.postMessage(60);\n\n    w.onmessage = function(event){\n        box.innerHTML = event.data;\n    }\n\n    &lt;/script&gt;\n&lt;/body&gt;\n</code></pre><p>åœ¨PCä¸­åˆ·æ–°ä½ çš„é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ä¾ç„¶æ­£ç¡®å·¥ä½œï¼Œä¹‹åå†æ‹¿åˆ°iosä¸­åšä¹‹å‰gifå›¾åŒæ ·çš„æ“ä½œï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/2016071144.gif\" alt=\"å€’è®¡æ—¶ç»§ç»­\"></p>\n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨55ç§’çš„æ—¶å€™å¼€å§‹æ‹–åŠ¨é¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™å€’è®¡æ—¶åœæ­¢äº†ï¼Œä¸è¿‡ï¼Œå½“æˆ‘ä»¬æ”¾æ‰‹ä¹‹åï¼Œå€’è®¡æ—¶ä¼šç«‹åˆ»æ¢å¤åˆ°æ­£å¸¸åº”è¯¥åˆ°è¾¾çš„æ—¶åˆ»ï¼Œè€Œä¸ä¼šäº§ç”Ÿä»»ä½•è¯¯å·®å’Œå»¶è¿Ÿï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æ¯”è¾ƒå®Œç¾çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>\n<h1 id=\"éœ€è¦æ³¨æ„çš„åœ°æ–¹\"><a href=\"#éœ€è¦æ³¨æ„çš„åœ°æ–¹\" class=\"headerlink\" title=\"éœ€è¦æ³¨æ„çš„åœ°æ–¹\"></a>éœ€è¦æ³¨æ„çš„åœ°æ–¹</h1><p>åœ¨åˆ—è¡¨é¡µé¢ä¸­ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªå€’è®¡æ—¶ï¼Œå¹¶ä¸”æ¯ä¸ªå€’è®¡æ—¶çš„å¼€å§‹æ—¶é—´ä¸å°½ç›¸åŒï¼Œä½†åˆ‡è®°ä¸è¦é€šè¿‡å¾ªç¯å» new å¾ˆå¤šä¸ª Worker å‡ºæ¥ï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨å¡æ­»ï¼Œç‰¹åˆ«æ˜¯å¦‚æœåœ¨åš Hybrid App ä¸­çš„ H5 é¡µé¢æ—¶ï¼Œå¯èƒ½ä¼šé€ æˆé—ªé€€ï¼Œæ‰€ä»¥ä½ åªèƒ½ new ä¸€ä¸ª Worker å¯¹è±¡å‡ºæ¥ï¼Œç„¶åä½¿ç”¨è¿™ä¸€ä¸ª Worker å¯¹è±¡å»åšæ‰€æœ‰åˆ—è¡¨æ—¶é—´çš„å€’è®¡æ—¶ï¼Œç„¶ååœ¨æ›´æ–°è§†å›¾ä¸­ä½¿ç”¨å¾ªç¯å»æ›´æ–°ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰é—®é¢˜äº†ï¼Œå¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº›Androidæœºå‹ä¸­çš„webviewä¸æ”¯æŒ web Worker ã€‚è¿™ä¸ªæ—¶å€™ä»…ä»…å»ä½¿ç”¨ setInterval å°±å¯ä»¥äº†ï¼Œå› ä¸ºåœ¨Androidä¸­ä¸å­˜åœ¨iosä¸­é‚£ç§é˜»å¡çš„æƒ…å†µã€‚</p>\n<p>ä»¥ä¸Šå°±æ˜¯è¿™ç¯‡åšå®¢çš„å†…å®¹ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ© = =ã€‚</p>"},{"title":"åŸºäºwebpackå’Œvue.jsæ­å»ºçš„H5ç«¯æ¡†æ¶(å…¶å®ä¸»è¦ç”¨äºHybridå¼€å‘H5ç«¯æ¡†æ¶ï¼Œä½†æ˜¯ä¾ç„¶èƒ½å¤Ÿä½œä¸ºçº¯webç«¯ä½¿ç”¨)","date":"2016-03-25T07:17:33.000Z","_content":"\näººç±»çš„å‘å±•å¾—ç›Šäºå¯¹è¿½æ±‚ä¸æ–­çš„æå‡ï¼Œåœ¨èƒ½æ´»ç€çš„åŸºç¡€ä¸Šæ˜¯å¦è¦æ´»å¾—æ½‡æ´’ä¸€ç‚¹ï¼ŒæŠ€æœ¯çš„å‘å±•äº¦å¦‚æ˜¯ã€‚åœ¨å…¬å¸ä½œä¸ºä¸€ä¸ªæœ€æœ€æœ€æœ€æœ€æœ€æœ€åº•å±‚çš„æ¬ç –ç å†œï¼Œç»å†äº†ä¸¤ä¸ªç‰ˆæœ¬çš„é“¸(zhe)ç‚¼(mo)ä¹‹åï¼Œæˆ‘ç—›ä¸‹å†³å¿ƒä»Šåä¸€å®šè¦ï¼š..............ä¸€å®šè¦å’Œäº§å“æƒº(shi)æƒº(bu)ç›¸(liang)æƒœ(li)ã€‚\n\n<!-- more -->\n\n# å¼€å§‹ä¹‹å‰ #\n\næœ¬æ–‡åŒ…å«ä»¥ä¸‹æŠ€æœ¯ï¼Œæ–‡ä¸­å°½é‡ç»™ä¸è¯¦ç»†çš„æè¿°ï¼Œå¹¶ä¸”é™„ä¸Šå‚è€ƒé“¾æ¥ï¼Œè¯»è€…å¯ä»¥æ·±å…¥å­¦ä¹ ï¼š\n\n1ã€[webpack](http://webpack.github.io/)\n2ã€[Vue.js](http://cn.vuejs.org/)\n3ã€[npm](https://www.npmjs.com/)\n4ã€nodejs ---- è¿™ä¸ªå°±ä¸ç»™è¿æ¥äº†ï¼Œå› ä¸ºä¸Šé¢çš„è¿æ¥éƒ½æ˜¯åœ¨ä½ å®è·µçš„è¿‡ç¨‹ä¸­è¦å»ä¸æ–­è®¿é—®çš„\n5ã€[ES6è¯­æ³•](http://es6.ruanyifeng.com/#README)\n\nå¦å¤–ï¼Œè¿™å¥—æ•™ç¨‹çš„ä»£ç éƒ½åœ¨æˆ‘çš„githubä¸Šï¼Œè¯»è€…å¯ä»¥å¯¹ç…§ç€ä»£ç æ¥çœ‹ï¼Œä¸è¿‡è¿˜æ˜¯å¸Œæœ›å¤§å®¶è‡ªå·±äº²æ‰‹æ­å»ºï¼Œä½“éªŒè¿™ä¸ªè¿‡ç¨‹ï¼Œgitåœ°å€ï¼š\n\n[gitåœ°å€](https://github.com/HcySunYang/h5_frame)\n\n# å‰è¨€ #\n\nåœ¨å¯¹ç€äº§å“é«˜ä¸¾ä¸­æŒ‡æ€’å‘å¿ƒä¸­ä¹‹æ„¤åï¼ŒçœŸæ­£èƒ½å¤Ÿè§£å†³é—®é¢˜çš„æ˜¯è‡ªèº«ä¸Šçš„æ”¹å˜ï¼Œæœ‰å¥è¯è¯´çš„å¥½ï¼šä½ è™½ç„¶æ”¹å˜ä¸äº†å…¨ä¸–ç•Œï¼Œä½†æ˜¯ä½ æœ‰æœºä¼šæ”¹å˜ä½ è‡ªå·±ã€‚ç§‰æ‰¿ç€â€œä¸å¬è€äººè¨€ï¼Œåƒäºåœ¨çœ¼å‰â€çš„ä¼˜è‰¯ä½œé£ï¼Œæˆ‘è¿˜æ˜¯å†³å®šç©ç«è‡ªç„šã€‚\n\n### é—®é¢˜æ‰€åœ¨ ###\n\nä¹‹å‰çš„é¡¹ç›®æ€»ç»“ä¸ºä»¥ä¸‹å†…å®¹ï¼š\n\n>1ã€AMDæ¨¡å—è§„èŒƒå¼€å‘ï¼Œä½¿ç”¨requirejså®ç°ï¼Œä½¿ç”¨rjsæ‰“åŒ…ï¼Œæœ€ç»ˆå¯¼è‡´çš„ç»“æœæ˜¯ï¼Œè¾“å‡ºçš„é¡¹ç›®è‡ƒè‚¿ï¼Œè‚¿çš„å°±åƒä¸€å¨ç‹—ä¸ç†......ä¸å¿ç›´è§†\n2ã€ä½¿ç”¨gulpè¿›è¡Œæ‰“åŒ…ï¼Œè¿™ä¸€ç‚¹è²Œä¼¼æ²¡æœ‰å¯åæ§½çš„åœ°æ–¹ï¼Œæ¯•ç«Ÿéƒ½æ˜¯è¢«gruntæŠ˜ç£¨è¿‡æ¥çš„......\n3ã€æ•°æ®çš„æ¸²æŸ“ä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼Œè¿™å°±æ„å‘³ç€ä½ è¦æ‰‹åŠ¨ç®¡ç†DOMï¼Œè¿™æ ·ï¼Œä½ çš„ä¸šåŠ¡ä»£ç å‚æ‚ç€ä½ çš„æ•°æ®å¤„ç†ã€DOMç®¡ç†ï¼Œæ»¡å±å¹•çš„æ¯›çº¿......\n4ã€æ¨¡å—åŒ–ä¸è¶³ï¼Œè™½ç„¶ä½¿ç”¨requireè¿›è¡Œäº†æ¨¡å—ç®¡ç†ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘è¿˜æ˜¯å……æ–¥åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œè¿™ä¸æœ€è¿‘æµè¡Œçš„ç»„ä»¶åŒ–æ¦‚å¿µå†°ç«ä¸å®¹ï¼Œæ‹’ç»è½å......\n5ã€è¯¸å¦‚ æ‰©å±•æ€§ ã€ ç»´æŠ¤æ€§ æˆ‘æƒ³æ—©å·²ä¸è¨€è€Œå–»ï¼Œä¸éœ€èµ˜è¿°ï¼Œå†è¿°å°±çœŸTMæ˜¯ç´¯èµ˜äº†ã€‚\n\næ–°æ¡†æ¶è¦è§£å†³çš„é—®é¢˜ï¼š\n\n>1ã€è¦ä½¿æ„å»ºè¾“å‡ºçš„é¡¹ç›®åƒä½ é‚»å®¶å°å¦¹å¦¹ä¸€æ ·ã€ç˜¦çš„çš®åŒ…éª¨ã€‚ï¼ˆä¹Ÿè®¸æ˜¯è¥å…»ä¸è‰¯ï¼‰\n2ã€è¦å®ç°çœŸæ­£çš„æ¨¡å—åŒ–ã€ç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼ï¼ŒçœŸæ­£å»è§£å†³ç»´æŠ¤éš¾ã€æ‰©å±•éš¾çš„é—®é¢˜ã€‚ï¼ˆä»æ­¤ä¸æ€•äº§å“æ±ªï¼‰\n3ã€ä¸šåŠ¡é€»è¾‘ä¸“æ³¨æ•°æ®å¤„ç†ï¼Œæ‰‹åŠ¨ç®¡ç†DOMçš„å¹´ä»£å°±åƒ......åƒä»€ä¹ˆå‘¢ï¼Ÿï¼ˆæ¯•ç«Ÿæˆäººç”¨å“ä¹Ÿè¶Šæ¥è¶Šè‡ªåŠ¨åŒ–äº†ï¼‰\n4ã€ç­‰ç­‰.......ï¼ˆå…¶å®å¥½å¤„æ— éœ€èµ˜è¿°ï¼Œæ¥ï¼Œå¾€ä¸‹çœ‹ï¼‰\n\nä¸ºäº†è¾¾æˆä»¥ä¸Šç›®æ ‡ï¼Œæˆ‘ä»¬æ¢è®¨ä¸€ä¸‹è§£å†³æ–¹æ¡ˆï¼š\n\n*<b>1ã€è€é¡¹ç›®çš„æ„å»ºè¾“å‡ºä¸ºä»€ä¹ˆè‡ƒè‚¿ï¼Ÿ</b>*\n\nç­”ï¼šå› ä¸ºä½¿ç”¨çš„æ˜¯requireçš„rjsè¿›è¡Œæ„å»ºæ‰“åŒ…çš„ï¼Œäº†è§£rjsçš„éƒ½çŸ¥é“ï¼Œå®ƒä¼šæŠŠé¡¹ç›®æ‰€æœ‰ä¾èµ–éƒ½æ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰å¾ˆå¤šé¡µé¢ä¾èµ–è¿™ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆrjså¹¶ä¸ä¼šæŠŠè¿™ä¸ªæ¨¡å—æå–å‡ºæ¥ä½œä¸ºå…¬å…±æ¨¡å—ï¼Œæ‰€ä»¥å°±ä¼šæœ‰å¾ˆå¤šå¤åˆ¶æ€§çš„å†…å®¹ï¼Œæ‰€ä»¥é¡¹ç›®è‡ªç„¶è‡ƒè‚¿ã€‚\n\n*è§£å†³æ–¹æ¡ˆï¼š*ä½¿ç”¨webpacké…åˆç›¸åº”çš„loaderï¼Œæ¥å®Œæˆæ¨¡å—åŠ è½½å’Œæ„å»ºçš„å·¥ä½œã€‚\n\n*<b>2ã€è€é¡¹ç›®ä¸ºä»€ä¹ˆæ¨¡å—åŒ–çš„ä¸è¶³ï¼Ÿ</b>*\n\nç­”ï¼šè€é¡¹ç›®çš„æ¨¡å—åŒ–ï¼Œä»…ä»…ä½“ç°åœ¨jså±‚é¢ï¼Œè§£å†³äº†æ¨¡å—å¼•ç”¨çš„é—®é¢˜ï¼Œä½†åœ¨å¼€å‘æ–¹å¼ä¸Šï¼Œä¾ç„¶å¯ä»¥çœ‹åšæ˜¯è¿‡ç¨‹å¼çš„ï¼Œè¿™æ ·çš„ç»“æœå°±å¯¼è‡´äº†é¡¹ç›®çš„éš¾æ‰©å±•å’Œéš¾ç»´æŠ¤ï¼Œè®©å¼€å‘äººå‘˜åœ¨ä¸äº§å“æ±ªçš„å¯¹å³™ä¸­ï¼Œå¹¶ä¸ä»å®¹ã€‚\n\n*è§£å†³æ–¹æ¡ˆï¼š*Vue.jsèƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³ç»„ä»¶åŒ–çš„é—®é¢˜ï¼Œé…åˆ Vue.js å®˜æ–¹æä¾›çš„ *vue-loader* èƒ½å¤Ÿå¾ˆå¥½çš„ç»“åˆwebpackåšç»„ä»¶åŒ–çš„å¼€å‘æ¶æ„ã€‚\n\n*<b>3ã€å¦‚ä½•é¿å…æ‰‹åŠ¨ç®¡ç†DOMï¼Ÿ</b>*\n\nç­”ï¼šå¦‚æœä½ åœ¨åšæ•°æ®å±•ç¤ºè¿™ä¸€å—çš„å¼€å‘å·¥ä½œï¼Œç›¸ä¿¡ä½ ä¸€å®šä½“ä¼šé¢‡æ·±ï¼Œå‘é€httpè¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œæ‹¿åˆ°è¿”å›çš„æ•°æ®åæ‰‹åŠ¨æ¸²æŸ“DOMè‡³é¡µé¢ï¼Œè¿™æ˜¯æœ€åŸå§‹çš„å¼€å‘æ–¹å¼ï¼Œæ— éå†åŠ ä¸€ä¸ªæ¨¡æ¿å¼•æ“ä¹‹ç±»çš„ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯é¿å…ä¸äº†æ‰‹åŠ¨æ¸²æŸ“ï¼Œå¦‚æœé¡µé¢é€»è¾‘å¤æ‚ï¼Œæ¯”å¦‚ç»™ä½ æ¥ä¸€ä¸ªç¿»é¡µçš„åŠŸèƒ½ï¼Œå†æ¥ä¸€ä¸ªç­›é€‰é¡¹ï¼Œä¼°è®¡ä½ ä¼šè§‰å¾—ä¸–ç•Œå¹¶ä¸é‚£ä¹ˆç¾å¥½ã€‚\n\n*è§£å†³æ–¹æ¡ˆï¼š*MVVMæ¨¡å¼èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€ŒVue.jsçš„æ ¸å¿ƒä¹Ÿæ˜¯MVVMã€‚\n\n# webpack #\n\nä½ è‚¯å®šå¬è¯´è¿‡webpackï¼Œå¦‚æœç›´æ¥å¯¹ä½ æè¿°ä»€ä¹ˆæ˜¯webpackä½ å¯èƒ½æ„Ÿå—ä¸åˆ°ä»–çš„å¥½å¤„ï¼Œé‚£ä¹ˆåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ç›¸ä¿¡ä½ è‚¯å®šä½¿ç”¨è¿‡gulpæˆ–è€…gruntï¼Œå¦‚æœä½ æ²¡ä½¿ç”¨è¿‡ä¹Ÿå¯ä»¥ï¼Œè‡³å°‘ä½ è¦å¬è¯´è¿‡å¹¶ä¸”çŸ¥é“gulpå’Œgruntæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œå‡å¦‚è¿™ä¸ªä½ è¿˜ä¸æ¸…æ¥šï¼Œé‚£ä¹ˆä½ å¹¶ä¸æ˜¯ä¸€ä¸ªåˆæ ¼çš„å‰ç«¯å¼€å‘äººå‘˜ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿä¸é€‚åˆä½ ï¼Œä½ å¯ä»¥ä»åŸºç¡€çš„åœ°æ–¹æ…¢æ…¢å­¦èµ·ã€‚\n\ngulpå’Œgruntå¯¹äºæ¯ä¸€ä¸ªå‰ç«¯å¼€å‘äººå‘˜åº”è¯¥æ˜¯ä¸é™Œç”Ÿçš„ï¼Œå®ƒä»¬ä¸ºå‰ç«¯æä¾›äº†è‡ªåŠ¨åŒ–æ„å»ºçš„èƒ½åŠ›ï¼Œå¹¶ä¸”æœ‰è‡ªå·±çš„ç”Ÿæ€åœˆï¼Œæœ‰å¾ˆå¤šæ’ä»¶ï¼Œä½¿å¾—æˆ‘ä»¬å‘Šåˆ«åˆ€è€•ç«ç§çš„æ—¶ä»£ï¼Œä½†æ˜¯å®ƒä»¬å¹¶æ²¡æœ‰è§£å†³æ¨¡å—åŠ è½½çš„é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰çš„é¡¹ç›®æ˜¯ä½¿ç”¨gulpæ„å»ºçš„ï¼Œä½†æ˜¯æ¨¡å—åŒ–å¾—å·¥ä½œè¿˜æ˜¯è¦é requireå’Œrjsæ¥å®Œæˆï¼Œè€Œgulpé™¤äº†å®Œæˆä¸€äº›å…¶ä»–ä»»åŠ¡ä¹‹å¤–ï¼Œå°±å˜æˆäº†å¸®åŠ©æˆ‘ä»¬å…é™¤æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤çš„å·¥å…·äº†ï¼Œåˆ«æ— å®ƒç”¨ã€‚\n\nè€Œwebpackå°±ä¸åŒäº†ï¼Œwebpackçš„å“²å­¦æ˜¯ä¸€åˆ‡çš†æ˜¯æ¨¡å—ï¼Œæ— è®ºæ˜¯js/css/sass/img/coffeejs/ttf....ç­‰ç­‰ï¼Œwebpackå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„loaderå»æŠŠä¸€åˆ‡èµ„æºå½“åšæ¨¡å—åŠ è½½ï¼Œè¿™æ ·å°±è§£å†³äº†æ¨¡å—ä¾èµ–çš„é—®é¢˜ï¼ŒåŒæ—¶ï¼Œåˆ©ç”¨æ’ä»¶è¿˜å¯ä»¥å¯¹é¡¹ç›®è¿›è¡Œä¼˜åŒ–ï¼Œç”±äºæ¨¡å—çš„åŠ è½½å’Œé¡¹ç›®çš„æ„å»ºä¼˜åŒ–éƒ½æ˜¯é€šè¿‡webpackä¸€ä¸ªâ€äººâ€œæ¥è§£å†³çš„ï¼Œæ‰€ä»¥æ¨¡å—çš„åŠ è½½å’Œé¡¹ç›®çš„æ„å»ºä¼˜åŒ–å¹¶ä¸æ˜¯æ— æœºåˆ†ç¦»çš„ï¼Œè€Œæ˜¯æœ‰æœºçš„ç»“åˆåœ¨ä¸€èµ·çš„ï¼Œæ˜¯ä¸€ä¸ªç»„åˆçš„è¿‡ç¨‹ï¼Œè¿™ä½¿å¾—webpackåœ¨è¿™æ–¹é¢èƒ½å¤Ÿå®Œæˆçš„æ›´å‡ºè‰²ï¼Œè¿™ä¹Ÿæ˜¯webpackçš„ä¼˜åŠ¿æ‰€åœ¨ã€‚\n\nå¦‚æœä½ çœ‹ä¸æ‡‚ä¸Šé¢çš„æè¿°ï¼Œæ²¡å…³ç³»ï¼Œä½ åªéœ€è¦çŸ¥é“ä¸€ä¸‹å‡ ç‚¹ï¼š\n\n1ã€è¿‡å»ä½¿ç”¨requireå’Œrjsç­‰è¿›è¡Œæ¨¡å—åŠ è½½çš„æ–¹å¼ï¼Œå¯ä»¥æ›¿æ¢ä¸ºwebpackæä¾›çš„æŒ‡å®šloaderå»å®Œæˆï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±å¼€å‘åŠ è½½ç‰¹å®šèµ„æºçš„loaderã€‚\n2ã€è¿‡å»ä½¿ç”¨gulpå’Œgruntå®Œæˆé¡¹ç›®æ„å»ºä¼˜åŒ–çš„æ–¹å¼ï¼Œå¯ä»¥æ›¿æ¢æˆwebpackæä¾›çš„æ’ä»¶å’Œç‰¹å®šçš„é…ç½®å»å®Œæˆã€‚\n3ã€ç”±äºæ¨¡å—çš„åŠ è½½å’Œé¡¹ç›®çš„æ„å»ºä¼˜åŒ–æœ‰æœºçš„ç»“åˆï¼Œæ‰€ä»¥webpackèƒ½å¤Ÿæ›´å¥½çš„å®Œæˆè¿™é¡¹å·¥ä½œ\n4ã€å¹¶ä¸æ˜¯è¯´æœ‰äº†webpackå°±æ·˜æ±°çš„gulpç­‰ï¼Œæœ‰äº›ç‰¹å®šçš„ä»»åŠ¡ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨gulpå»è‡ªå®šä¹‰å®Œæˆçš„ã€‚ä½†æ˜¯ä¸ä¿è¯webpackçš„æœªæ¥å‘å±•è¶‹åŠ¿ä¼šæ€ä¹ˆæ ·ã€‚\n\næœ€åï¼Œç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªå®˜æ–¹çš„æ•™ç¨‹ï¼Œè¿™ä¸ªæ•™ç¨‹çš„æœ€å¼€å§‹æœ‰å‘çš„åœ°æ–¹ï¼Œå¦‚æœè¯»è€…é‡åˆ°äº†å‘ï¼Œå¯ä»¥åœ¨è¿™é‡Œç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä¼šä¸ºå¤§å®¶è§£ç­”ï¼Œä¸è¿‡æ€»ä½“æ¥è®²ï¼Œè¿™ä¸ªæ•™ç¨‹é€‚åˆå…¥é—¨ï¼Œå”¯ä¸€ä¸è¶³çš„å°±æ˜¯æ•™ç¨‹æ˜¯è‹±æ–‡çš„ï¼Œè‹±æ–‡çš„ä¹Ÿä¸ç”¨æ€•ï¼Œæœ¬äººçš„è‹±è¯­æ²¡è¿‡å››çº§ï¼Œä½†æ˜¯ç°åœ¨ä¾ç„¶èƒ½å¤Ÿçœ‹å¾—æ‡‚è‹±æ–‡æŠ€æœ¯æ–‡ç« ã€‚æ•™ç¨‹é“¾æ¥ï¼š[http://blog.madewithlove.be/post/webpack-your-bags/](http://blog.madewithlove.be/post/webpack-your-bags/)\n\n# Vue.js #\n\n[Vue.js](http://cn.vuejs.org/)æ˜¯ä¸€ä¸ªMVVMæ¨¡å¼çš„æ¡†æ¶ï¼Œå¦‚æœè¯»è€…æœ‰angularç»éªŒï¼Œä¸€å®šèƒ½å¤Ÿå¾ˆå¿«å…¥é—¨Vueçš„ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨Vueè€Œä¸ç”¨angularï¼Œ\né¦–å…ˆï¼ŒVueçš„ä½“ç§¯å°ï¼Œè½»é‡åœ¨ç§»åŠ¨ç«¯å¼€å‘å§‹ç»ˆæ˜¯ä¸€ä¸ªä¸å¯å¿½ç•¥çš„è¯é¢˜ï¼Œå…¶æ¬¡ï¼ŒVueåœ¨å®ç°ä¸Šä¸angularæœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œè¯»è€…å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ä¸ªé“¾æ¥æ¥äº†è§£ï¼š\n\n1ã€[Vueçš„å˜åŒ–è¿½è¸ªå’Œè®¡ç®—å±æ€§çš„åŒºåˆ«ç­‰](http://cn.vuejs.org/guide/reactivity.html)\n\n2ã€[Vue ä¸ angular åŠ react ç­‰æ¡†æ¶çš„å¯¹æ¯”](http://cn.vuejs.org/guide/comparison.html)\n\n3ã€ç¬¬ä¸‰ç‚¹å°±æ˜¯Vueæä¾›äº†webpackçš„loader ----> [vue-loader]ï¼Œä½¿ç”¨å®ƒå¯ä»¥è®©é¡¹ç›®çš„ç»„ä»¶åŒ–æ€æƒ³æ›´åŠ æ¸…æ™°\n\nç»¼ä¸Šæ‰€è¿°ï¼Œè¿™å°±æ˜¯é€‰ç”¨Vueçš„åŸå› \n\n# npm å’Œ nodejs #\n\nnpm çš„å…¨ç§°æ˜¯ *nodejsåŒ…ç®¡ç†*ï¼Œç°åœ¨è¶Šæ¥è¶Šå¤šçš„é¡¹ç›®(åŒ…)éƒ½å¯ä»¥é€šè¿‡npmæ¥å®‰è£…ç®¡ç†ï¼Œnodejsæ˜¯jsè¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„å¹³å°ï¼Œå®ƒä½¿å¾—jsçš„èƒ½åŠ›è¿›ä¸€æ­¥æé«˜ï¼Œæˆ‘ä»¬è¿˜è¦ä½¿ç”¨nodejsé…åˆ webpack æ¥å®Œæˆçƒ­åŠ è½½çš„åŠŸèƒ½ã€‚æ‰€ä»¥è¯»è€…æœ€å¥½æœ‰nodejsçš„å¼€å‘ç»éªŒï¼Œå¦‚æœæœ‰expressçš„ç»éªŒæ›´å¥½ã€‚\n\n# è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥ä»é›¶æ­å»ºè¿™ä¸ªé¡¹ç›® #\n\né¦–å…ˆæ–°å»ºä¸€ä¸ªç›®å½•ï¼Œåä¸º myProject ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ã€‚ç„¶åæ‰§è¡Œä¸€äº›åŸºæœ¬çš„æ­¥éª¤ï¼Œæ¯”å¦‚ npm init å‘½ä»¤ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ç”Ÿæˆ package.json æ–‡ä»¶ï¼Œè¿™å‡ ä¹æ˜¯å¿…é€‰çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„é¡¹ç›®è¦æœ‰å¾ˆå¤šä¾èµ–ï¼Œéƒ½æ˜¯é€šè¿‡npmæ¥ç®¡ç†çš„ï¼Œè€Œnpmå¯¹äºæˆ‘ä»¬é¡¹ç›®çš„ç®¡ç†ï¼Œåˆ™æ˜¯é€šè¿‡package.jsonæ–‡ä»¶ï¼š\n\n```$\nnpm init\n```\n\næ‰§è¡Œnpm initä¹‹åï¼Œä¼šæç¤ºä½ å¡«å†™ä¸€äº›é¡¹ç›®çš„ä¿¡æ¯ï¼Œä¸€ç›´å›è½¦é»˜è®¤å°±å¥½äº†ï¼Œæˆ–è€…ç›´æ¥æ‰§è¡Œ npm init -y ç›´æ¥è·³è¿‡è¯¢é—®æ­¥éª¤\nç„¶åæˆ‘ä»¬æ–°å»ºä¸€ä¸ªå«åš app çš„ç›®å½•ï¼Œè¿™ä¸ªæ˜¯æˆ‘ä»¬é¡µé¢æ¨¡å—çš„ç›®å½•ï¼Œå†åœ¨appç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªindexç›®å½•ï¼Œå‡è®¾è¿™ä¸ªæ˜¯é¦–é¡µæ¨¡å—çš„ç›®å½•ï¼Œç„¶åå†åœ¨indexç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ª index.html æ–‡ä»¶å’Œ index.js æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯é¦–é¡µå…¥å£htmlæ–‡ä»¶å’Œä¸»jsæ–‡ä»¶ï¼Œç„¶åå†åœ¨indexç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªcomponentsç›®å½•ï¼Œè¿™ä¸ªç›®å½•ç”¨ä½œå­˜æ”¾é¦–é¡µç»„ä»¶æ¨¡å—çš„ç›®å½•ï¼Œå› ä¸ºæˆ‘ä»¬æœ€ç»ˆè¦å®ç°ç»„ä»¶åŒ–å¼€å‘ã€‚è¿™æ ·ï¼Œå½“ä½ å®Œæˆä¸Šé¢çš„æ­¥éª¤åï¼Œä½ çš„é¡¹ç›®çœ‹ä¸Šå»åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n\n![é¡¹ç›®ç»“æ„](http://7xlolm.com1.z0.glb.clouddn.com/20160325b.jpg)\n\næ¥ä¸‹æ¥é€šè¿‡npmå®‰è£…é¡¹ç›®ä¾èµ–é¡¹ï¼š\n\n```$\nnpm install\\\n  webpack webpack-dev-server\\\n  vue-loader vue-html-loader css-loader vue-style-loader vue-hot-reload-api\\\n  babel-loader babel-core babel-plugin-transform-runtime babel-preset-es2015\\\n  babel-runtime@5\\\n  --save-dev\n\nnpm install vue --save\n```\n\nè¿™ä¸ªæ—¶å€™ï¼Œä½ çš„package.jsonæ–‡ä»¶çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n\n```\n\"devDependencies\": {\n    \"babel-core\": \"^6.3.17\",\n    \"babel-loader\": \"^6.2.0\",\n    \"babel-plugin-transform-runtime\": \"^6.3.13\",\n    \"babel-preset-es2015\": \"^6.3.13\",\n    \"babel-runtime\": \"^5.8.34\",\n    \"css-loader\": \"^0.23.0\",\n    \"vue-hot-reload-api\": \"^1.2.2\",\n    \"vue-html-loader\": \"^1.0.0\",\n    \"vue-style-loader\": \"^1.0.0\",\n    \"vue-loader\": \"^7.2.0\",\n    \"webpack\": \"^1.12.9\",\n    \"webpack-dev-server\": \"^1.14.0\"\n  },\n  \"dependencies\": {\n    \"vue\": \"^1.0.13\"\n  },\n```\n\næˆ‘ä»¬å®‰è£…äº† babel ä¸€ç³»åˆ—åŒ…ï¼Œç”¨æ¥è§£æES6è¯­æ³•ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ES6æ¥å¼€å‘é¡¹ç›®ï¼Œå¦‚æœä½ ä¸äº†è§£ES6è¯­æ³•ï¼Œå»ºè®®ä½ çœ‹ä¸€çœ‹[é˜®è€å¸ˆçš„æ•™ç¨‹](http://es6.ruanyifeng.com/)ï¼Œç„¶åæˆ‘ä»¬å®‰è£…äº†ä¸€äº›loaderåŒ…ï¼Œæ¯”å¦‚css-loader/vue-loaderç­‰ç­‰ï¼Œå› ä¸ºwebpackæ˜¯ä½¿ç”¨è¿™äº›æŒ‡å®šçš„loaderå»åŠ è½½æŒ‡å®šçš„æ–‡ä»¶çš„ã€‚\n\nå¦å¤–æˆ‘ä»¬è¿˜ä½¿ç”¨ npm install vue --save å‘½ä»¤å®‰è£…äº† vue ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„vue.jsï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åƒå¼€å‘nodejsåº”ç”¨ä¸€æ ·ï¼Œç›´æ¥require('vue');å³å¯ï¼Œè€Œä¸éœ€è¦é€šè¿‡scriptæ ‡ç­¾å¼•å…¥ï¼Œè¿™ä¸€ç‚¹åœ¨å¼€å‘ä¸­å¾ˆçˆ½ã€‚\n\nå®‰è£…å®Œäº†ä¾èµ–ï¼Œç¼–è¾‘ä»¥ä¸‹æ–‡ä»¶å¹¶ä¿å­˜åˆ°ç›¸åº”ä½ç½®ï¼š\n\n1ã€index.htmlæ–‡ä»¶ï¼š\n\n```\n<!DOCTYPE html>\n<html lang=\"zh\">\n\t<head>\n\t\t<meta name=\"viewport\" content=\"width=device-width, height=device-height, initial-scale=1.0, user-scalable=no\">\n\t\t<meta charset=\"utf-8\">\n\t\t<title>é¦–é¡µ</title>\n\t</head>\n\t<body>\n\t\t<!-- vueçš„ç»„ä»¶ä»¥è‡ªå®šä¹‰æ ‡ç­¾çš„å½¢å¼ä½¿ç”¨ -->\n\t\t<favlist></favlist>\n\t</body>\n</html>\n\n```\n\n2ã€index.jsæ–‡ä»¶ï¼š\n\n```\nimport Vue from 'Vue'\nimport Favlist from './components/Favlist'\n\nnew Vue({\n\tel: 'body',\n\tcomponents: { Favlist }\n})\n```\n\n3ã€åœ¨componentsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª Favlist.vue æ–‡ä»¶ï¼Œä½œä¸ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç»„ä»¶ï¼š\n\n```\n<template>\n    <div v-for=\"n in 10\">div</div>\n</template>\n\n<script>\n    export default {\n        data () {\n            return {\n                msg: 'Hello World!'\n            }\n        }\n    }\n</script>\n\n<style>\n    html{\n        background: red;\n    }\n</style>\n\n```\n\nè¦çœ‹æ‡‚ä¸Šé¢çš„ä»£ç ï¼Œä½ éœ€è¦äº†è§£vue.jsï¼Œå‡å¦‚ä½ çœ‹ä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨index.htmlä¸­ä½¿ç”¨äº†è‡ªå®šä¹‰æ ‡ç­¾ï¼ˆå³ç»„ä»¶ï¼‰ï¼Œç„¶ååœ¨index.jsä¸­å¼•å…¥äº†Vueå’Œæˆ‘ä»¬çš„Favlist.vueç»„ä»¶ï¼ŒFavlist.vueæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åŸºæœ¬çš„vueç»„ä»¶è¯­æ³•ï¼Œæœ€åï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒè¿è¡Œèµ·æ¥ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦webpackäº†ã€‚\n\nåœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»º build ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾æˆ‘ä»¬çš„æ„å»ºç›¸å…³çš„ä»£ç æ–‡ä»¶ç­‰ï¼Œç„¶ååœ¨buildç›®å½•ä¸‹æ–°å»º webpack.config.js è¿™æ˜¯æˆ‘ä»¬çš„webpacké…ç½®æ–‡ä»¶ï¼Œwebpackéœ€è¦é€šè¿‡è¯»å–ä½ çš„é…ç½®ï¼Œè¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œç±»ä¼¼äºgulpfile.jsæˆ–è€…gruntfile.jsç­‰ã€‚\n\nwebpack.config.js\n\n```\n// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require('path');\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, '../app/index/index.js'),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, '../output/static'),\n        publicPath: 'static/',\n        filename: '[name].[hash].js',\n        chunkFilename: '[id].[chunkhash].js'\n    },\n    module: {\n        \n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: 'vue'   \n            }\n        ]\n    }\n}\n```\n\nä¸Šä¾‹ä¸­ï¼Œç›¸ä¿¡ä½ å·²ç»çœ‹æ‡‚äº†æˆ‘çš„é…ç½®ï¼Œå…¥å£æ–‡ä»¶æ˜¯index.jsæ–‡ä»¶ï¼Œé…ç½®äº†ç›¸åº”è¾“å‡ºï¼Œç„¶åä½¿ç”¨ vue-loader å»åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æ„å»ºé¡¹ç›®äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š\n\n```\nwebpack --display-modules --display-chunks --config build/webpack.config.js\n```\n\né€šè¿‡webpackå‘½ä»¤ï¼Œå¹¶ä¸”é€šè¿‡ --config é€‰é¡¹æŒ‡å®šäº†æˆ‘ä»¬é…ç½®æ–‡ä»¶çš„ä½ç½®æ˜¯ 'build/webpack.config.js'ï¼Œå¹¶é€šè¿‡ --display-modules å’Œ --display-chunks é€‰é¡¹æ˜¾ç¤ºç›¸åº”çš„ä¿¡æ¯ã€‚å¦‚æœä½ æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œå¯èƒ½å¾—åˆ°ä¸‹å›¾çš„é”™è¯¯ï¼š\n\n![æŠ¥é”™](http://7xlolm.com1.z0.glb.clouddn.com/20160325c.jpg)\n\né”™è¯¯æç¤ºæˆ‘ä»¬åº”è¯¥é€‰æ‹©åˆé€‚çš„loaderå»åŠ è½½è¿™ä¸ª './app/index/index.js' è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”è¯´ä¸æœŸæœ›index.jsæ–‡ä»¶ä¸­çš„æ ‡è¯†ç¬¦ï¼ˆUnexpected tokenï¼‰ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†ES6çš„è¯­æ³• import è¯­å¥ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨ babel-loader å»åŠ è½½æˆ‘ä»¬çš„jsæ–‡ä»¶ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªloadersé¡¹ç›®ï¼Œå¦‚ä¸‹ï¼š\n\n```\n// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require('path');\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, '../app/index/index.js'),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, '../output/static'),\n        publicPath: 'static/',\n        filename: '[name].[hash].js',\n        chunkFilename: '[id].[chunkhash].js'\n    },\n    module: {\n        \n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: 'vue'   \n            },\n            {\n                test: /\\.js$/,\n                loader: 'babel?presets=es2015',\n                exclude: /node_modules/\n            }\n        ]\n    }\n}\n```\n\nç°åœ¨å†è¿è¡Œæ„å»ºå‘½ä»¤ ï¼š 'webpack --display-modules --display-chunks --config build/webpack.config.js'\n\nsorryï¼Œä¸å‡ºæ„å¤–ï¼Œä½ åº”è¯¥å¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š\n\n![é”™è¯¯](http://7xlolm.com1.z0.glb.clouddn.com/20160325d.jpg)\n\nå®ƒè¯´æ²¡æœ‰å‘ç° './components/Favlist' æ¨¡å—ï¼Œè€Œæˆ‘ä»¬æ˜æ˜æœ‰ ./components/Favlist.vue æ–‡ä»¶ï¼Œä¸ºä»€ä¹ˆå®ƒæ²¡å‘ç°å‘¢ï¼Ÿå®ƒçäº†ï¼Ÿå…¶å®æ˜¯è¿™æ ·çš„ï¼Œå½“webpackè¯•å›¾å»åŠ è½½æ¨¡å—çš„æ—¶å€™ï¼Œå®ƒé»˜è®¤æ˜¯æŸ¥æ‰¾ä»¥ .js ç»“å°¾çš„æ–‡ä»¶çš„ï¼Œå®ƒå¹¶ä¸çŸ¥é“ .vue ç»“å°¾çš„æ–‡ä»¶æ˜¯ä»€ä¹ˆé¬¼ç©æ„å„¿ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å‘Šè¯‰webpackï¼Œé‡åˆ° .vue ç»“å°¾çš„ä¹Ÿè¦å»åŠ è½½ï¼Œæ·»åŠ  resolve é…ç½®é¡¹ï¼Œå¦‚ä¸‹ï¼š\n\n```\n// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require('path');\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, '../app/index/index.js'),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, '../output/static'),\n        publicPath: 'static/',\n        filename: '[name].[hash].js',\n        chunkFilename: '[id].[chunkhash].js'\n    },\n    resolve: {\n        extensions: ['', '.js', '.vue']\n    },\n    module: {\n        \n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: 'vue'   \n            },\n            {\n                test: /\\.js$/,\n                loader: 'babel?presets=es2015',\n                exclude: /node_modules/\n            }\n        ]\n    }\n}\n```\n\nè¿™æ ·ï¼Œå½“æˆ‘ä»¬å»åŠ è½½ './components/Favlist' è¿™æ ·çš„æ¨¡å—æ—¶ï¼Œwebpacké¦–å…ˆä¼šæŸ¥æ‰¾ ./components/Favlist.js å¦‚æœæ²¡æœ‰å‘ç°Favlist.jsæ–‡ä»¶å°±ä¼šç»§ç»­æŸ¥æ‰¾ Favlist.vue æ–‡ä»¶ï¼Œç°åœ¨å†æ¬¡è¿è¡Œæ„å»ºå‘½ä»¤ï¼Œæˆ‘ä»¬æˆåŠŸäº†ï¼Œè¿™æ—¶æˆ‘ä»¬ä¼šåœ¨æˆ‘ä»¬çš„è¾“å‡ºç›®å½•ä¸­çœ‹åˆ°ä¸€ä¸ªjsæ–‡ä»¶ï¼š\n\n![è¾“å‡º](http://7xlolm.com1.z0.glb.clouddn.com/20160325e.jpg)\n\nä¹‹æ‰€ä»¥ä¼šè¿™æ ·è¾“å‡ºï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„ webpack.config.js æ–‡ä»¶ä¸­çš„è¾“å‡ºé…ç½®ä¸­æŒ‡å®šäº†ç›¸åº”çš„è¾“å‡ºä¿¡æ¯ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¿®æ”¹ index.html ï¼Œå°†è¾“å‡ºçš„jsæ–‡ä»¶å¼•å…¥ï¼š\n\n```\n<!DOCTYPE html>\n<html lang=\"zh\">\n\t<head>\n\t\t<meta name=\"viewport\" content=\"width=device-width, height=device-height, initial-scale=1.0, user-scalable=no\">\n\t\t<meta charset=\"utf-8\">\n\t\t<title>é¦–é¡µ</title>\n\t</head>\n\t<body>\n\t\t<!-- vueçš„ç»„ä»¶ä»¥è‡ªå®šä¹‰æ ‡ç­¾çš„å½¢å¼ä½¿ç”¨ -->\n\t\t<favlist></favlist>\n\n\t\t<script src=\"../../output/static/main.ce853b65bcffc3b16328.js\"></script>\n\t</body>\n</html>\n```\n\nç„¶åç”¨æµè§ˆå™¨æ‰“å¼€è¿™ä¸ªé¡µé¢ï¼Œä½ å¯ä»¥çœ‹åˆ°ä½ å†™çš„ä»£ç æ­£ç¡®çš„æ‰§è¡Œäº†ã€‚\n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œéš¾é“æˆ‘ä»¬æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨çš„å¼•å…¥è¾“å‡ºçš„jsæ–‡ä»¶å—ï¼Ÿå› ä¸ºæ¯æ¬¡æ„å»ºè¾“å‡ºçš„jsæ–‡ä»¶éƒ½å¸¦æœ‰ hash å€¼ï¼Œå¦‚ main.ce853b65bcffc3b16328.jsï¼Œå°±ä¸èƒ½æ›´æ™ºèƒ½ä¸€ç‚¹å—ï¼Ÿæ¯æ¬¡éƒ½è‡ªåŠ¨å†™å…¥ï¼Ÿæ€ä¹ˆä¼šä¸å¯èƒ½ï¼Œå¦åˆ™è¿™ä¸œè¥¿è¿˜èƒ½ç«å—ï¼Œè¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨webpackçš„æ’ä»¶äº†ï¼Œ[html-webpack-plugin](https://www.npmjs.com/package/html-webpack-plugin)æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥åˆ›å»ºhtmlæ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å°†ä¾èµ–å†™å…¥htmlæ–‡ä»¶ä¸­ã€‚\n\né¦–å…ˆå®‰è£… html-webpack-plugin æ’ä»¶ï¼š\n\n```\nnpm install html-webpack-plugin --save-dev\n```\n\nç„¶ååœ¨ä¿®æ”¹é…ç½®é¡¹ï¼š\n\n```\n// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require('path');\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, '../app/index/index.js'),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, '../output/static'),\n        publicPath: 'static/',\n        filename: '[name].[hash].js',\n        chunkFilename: '[id].[chunkhash].js'\n    },\n    resolve: {\n        extensions: ['', '.js', '.vue']\n    },\n    module: {\n        \n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: 'vue'   \n            },\n            {\n                test: /\\.js$/,\n                loader: 'babel?presets=es2015',\n                exclude: /node_modules/\n            }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            filename: '../index.html',\n            template: path.resolve(__dirname, '../app/index/index.html'),\n            inject: true\n        })\n    ]\n}\n```\n\nç„¶åå†æ¬¡æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼ŒæˆåŠŸä¹‹åï¼Œçœ‹ä½ çš„è¾“å‡ºç›®å½•ï¼Œå¤šå‡ºæ¥ä¸€ä¸ªindex.htmlæ–‡ä»¶ï¼ŒåŒå‡»å®ƒï¼Œä»£ç æ­£ç¡®æ‰§è¡Œï¼Œä½ å¯ä»¥æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æŸ¥çœ‹ä¸€ä¸‹ï¼Œwebpackè‡ªåŠ¨å¸®æˆ‘ä»¬å¼•å…¥äº†ç›¸åº”çš„æ–‡ä»¶ã€‚\n\né—®é¢˜ç»§ç»­æ¥äº†ï¼Œéš¾é“æ¯æ¬¡æˆ‘ä»¬éƒ½è¦æ„å»ºä¹‹åæ‰èƒ½æŸ¥çœ‹è¿è¡Œçš„ä»£ç å—ï¼Ÿé‚£å²‚ä¸æ˜¯å¾ˆæ²¡æœ‰æ•ˆç‡ï¼Œåˆ«æ‹…å¿ƒï¼Œwebpackæä¾›äº†å‡ ç§æ–¹å¼ï¼Œè¿›è¡Œçƒ­åŠ è½½ï¼Œåœ¨å¼€å‘æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ç§æ–¹å¼æ¥æé«˜æ•ˆç‡ï¼Œè¿™é‡Œè¦ä»‹ç»çš„ï¼Œæ˜¯ä½¿ç”¨ [webpack-dev-middleware](https://www.npmjs.com/package/webpack-dev-middleware)ä¸­é—´ä»¶å’Œ[webpack-hot-middleware](https://www.npmjs.com/package/webpack-hot-middleware)ä¸­é—´ä»¶ï¼Œé¦–å…ˆå®‰è£…ä¸¤ä¸ªä¸­é—´ä»¶ï¼š\n\n```\nnpm install webpack-dev-middleware webpack-hot-middleware --save-dev\n```\n\nå¦å¤–ï¼Œè¿˜è¦å®‰è£…expressï¼Œè¿™æ˜¯ä¸€ä¸ªnodejsæ¡†æ¶\n\n```\nnpm install express --save-dev\n```\n\nåœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘å…ˆç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸¤ä¸ªä¸­é—´ä»¶ï¼Œä¹‹æ‰€ä»¥å«åšä¸­é—´ä»¶ï¼Œæ˜¯å› ä¸ºnodejsçš„ä¸€ä¸ªå«åšexpressçš„æ¡†æ¶ä¸­æœ‰ä¸­é—´ä»¶çš„æ¦‚å¿µï¼Œè€Œè¿™ä¸¤ä¸ªåŒ…è¦ä½œä¸ºexpressä¸­é—´ä»¶ä½¿ç”¨ï¼Œæ‰€ä»¥ç§°å®ƒä»¬ä¸ºä¸­é—´ä»¶ï¼Œé‚£ä¹ˆä»–ä»¬èƒ½å¹²ä»€ä¹ˆå‘¢ï¼Ÿ\n\n*<b>1ã€webpack-dev-middleware</b>*\n\næˆ‘ä»¬ä¹‹å‰æ‰€é¢ä¸´çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„ä»£ç æ”¹åŠ¨äº†ï¼Œæˆ‘ä»¬è¦æƒ³çœ‹åˆ°æµè§ˆå™¨çš„å˜åŒ–ï¼Œéœ€è¦å…ˆå¯¹é¡¹ç›®è¿›è¡Œæ„å»ºï¼Œç„¶åæ‰èƒ½æŸ¥çœ‹æ•ˆæœï¼Œè¿™æ ·å¯¹äºå¼€å‘æ•ˆç‡æ¥è®²ï¼Œç®€ç›´å°±æ˜¯ä¸å¯å¿å—çš„ä¸€ä»¶äº‹ï¼Œè¯•æƒ³æˆ‘ä»…ä»…ä¿®æ”¹ä¸€ä¸ªèƒŒæ™¯é¢œè‰²å°±è¦æ„å»ºä¸€ä¸‹é¡¹ç›®ï¼Œè¿™å°¼ç›å‘çˆ¹å•Šï¼Œå¥½åœ¨æœ‰[webpack-dev-middleware](https://www.npmjs.com/package/webpack-dev-middleware)ä¸­é—´ä»¶ï¼Œå®ƒæ˜¯å¯¹webpackä¸€ä¸ªç®€å•çš„åŒ…è£…ï¼Œå®ƒå¯ä»¥é€šè¿‡è¿æ¥æœåŠ¡å™¨æœåŠ¡é‚£äº›ä»webpackå‘å°„å‡ºæ¥çš„æ–‡ä»¶ï¼Œå®ƒæœ‰ä¸€ä¸‹å‡ ç‚¹å¥½å¤„ï¼š\n\n1ã€ä¸ä¼šå‘ç¡¬ç›˜å†™æ–‡ä»¶ï¼Œè€Œæ˜¯åœ¨å†…å­˜ä¸­ï¼Œæ³¨æ„æˆ‘ä»¬æ„å»ºé¡¹ç›®å®é™…å°±æ˜¯å‘ç¡¬ç›˜å†™æ–‡ä»¶ã€‚\n\n2ã€å½“æ–‡ä»¶æ”¹å˜çš„æ—¶å€™ï¼Œè¿™ä¸ªä¸­é—´ä»¶ä¸ä¼šå†æœåŠ¡æ—§çš„åŒ…ï¼Œä½ å¯ä»¥ç›´æ¥å¸…æ–°æµè§ˆå™¨å°±èƒ½çœ‹åˆ°æœ€æ–°çš„æ•ˆæœï¼Œè¿™æ ·ä½ å°±ä¸å¿…ç­‰å¾…æ„å»ºçš„æ—¶é—´ï¼Œæ‰€è§å³æ‰€å¾—ã€‚\n\nä¸‹é¢æˆ‘ä»¬åœ¨buildç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª dev-server.js çš„æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä¸€ä¸‹å†…å®¹ï¼š\n\n```\n// å¼•å…¥å¿…è¦çš„æ¨¡å—\nvar express = require('express')\nvar webpack = require('webpack')\nvar config = require('./webpack.config')\n\n// åˆ›å»ºä¸€ä¸ªexpresså®ä¾‹\nvar app = express()\n\n// è°ƒç”¨webpackå¹¶æŠŠé…ç½®ä¼ é€’è¿‡å»\nvar compiler = webpack(config)\n\n// ä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶\nvar devMiddleware = require('webpack-dev-middleware')(compiler, {\n    publicPath: config.output.publicPath,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(devMiddleware)\n\n// ç›‘å¬ 8888ç«¯å£ï¼Œå¼€å¯æœåŠ¡å™¨\napp.listen(8888, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log('Listening at http://localhost:8888')\n})\n```\n\næ­¤æ—¶ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¼€å¯æœåŠ¡ï¼š\n\n```\nnode build/dev-server.js\n```\n\nå¦‚æœçœ‹åˆ°ä¸‹å›¾æ‰€ç¤ºï¼Œè¯æ˜ä½ çš„æœåŠ¡æˆåŠŸå¼€å¯äº†ï¼š\n\n![å¼€å¯æœåŠ¡æˆåŠŸ](http://7xlolm.com1.z0.glb.clouddn.com/20160325f.jpg)\n\næ¥ä¸‹æ¥æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ï¼š\n\n```\nhttp://localhost:8888/app/index/index.html\n```\n\nå›è½¦ï¼Œå¦‚æœä¸å‡ºæ„å¤–ï¼Œä½ åº”è¯¥å¾—åˆ°ä¸€ä¸ª404ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![404](http://7xlolm.com1.z0.glb.clouddn.com/20160325g.jpg)\n\næˆ‘ä»¬è¦å¯¹æˆ‘ä»¬çš„ webpack.config.js é…ç½®æ–‡ä»¶åšä¸¤å¤„ä¿®æ”¹ï¼š\n\n1ã€å°† config.output.publicPath ä¿®æ”¹ä¸º '/'ï¼š\n\n```\noutput: {\n    // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n    path: path.resolve(__dirname, '../output/static'),\n    publicPath: '/',\n    filename: '[name].[hash].js',\n    chunkFilename: '[id].[chunkhash].js'\n},\n\n```\n\n2ã€å°† plugins ä¸­ HtmlWebpackPlugin ä¸­çš„ filename ä¿®æ”¹ä¸º 'app/index/index.html'\n\n```\nplugins: [\n    new HtmlWebpackPlugin({\n        filename: 'app/index/index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n]\n```\n\né‡å¯æœåŠ¡ï¼Œå†åˆ·æ–°é¡µé¢ï¼Œå¦‚æœçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œè¯æ˜ä½ æˆåŠŸäº†ï¼š\n\n![æˆåŠŸ](http://7xlolm.com1.z0.glb.clouddn.com/20160325h.jpg)\n\nä½†æ˜¯è¿™æ ·å¼€å‘æ¨¡å¼ä¸‹çš„ç¡®æ˜¯æˆåŠŸäº†ï¼Œå¯æ˜¯æˆ‘ä»¬ç›´æ¥ä¿®æ”¹äº† webpack.config.js æ–‡ä»¶ï¼Œè¿™å°±æ„å‘³ç€å½“æˆ‘ä»¬æ‰§è¡Œ æ„å»ºå‘½ä»¤ çš„æ—¶å€™ï¼Œé…ç½®å˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ„å»ºä¹Ÿè·Ÿç€å˜äº†ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªå¥½çš„æ–¹å¼æ˜¯ï¼Œä¸å»ä¿®æ”¹webpack.config.jsæ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨buildç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª webpack.dev.conf.jsæ–‡ä»¶ï¼Œæ„æ€æ˜¯å¼€å‘æ¨¡å¼ä¸‹è¦è¯»å–çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä¸€ä¸‹å†…å®¹ï¼š\n\n```\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\nvar path = require('path');\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require('./webpack.config');\n\nconfig.output.publicPath = '/';\n\nconfig.plugins = [\n    new HtmlWebpackPlugin({\n        filename: 'app/index/index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n];\n\nmodule.exports = config;\n```\n\nè¿™æ ·ï¼Œæˆ‘ä»¬åœ¨devç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶ä¸­è¦†ç›–äº†åŸºæœ¬é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨dev-server.jsä¸­å°† \n\n```\nvar config = require('./webpack.config')\n```\n\nä¿®æ”¹ä¸ºï¼š\n\n```\nvar config = require('./webpack.dev.conf')\n```\n\nå³å¯ï¼Œç„¶åï¼Œé‡å¯æœåŠ¡ï¼Œåˆ·æ–°æµè§ˆå™¨ï¼Œä½ åº”è¯¥å¾—åˆ°åŒæ ·çš„æˆåŠŸç»“æœï¼Œè€Œè¿™ä¸€æ¬¡å½“æˆ‘ä»¬æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š\n\n```\nwebpack --display-modules --display-chunks --config build/webpack.config.js\n```\n\nå¹¶ä¸ä¼šå½±å“æ„å»ºè¾“å‡ºï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ç›´æ¥ä¿®æ”¹webpack.config.jsæ–‡ä»¶ã€‚\n\nç°åœ¨æˆ‘ä»¬å·²ç»ä½¿ç”¨ webpack-dev-middleware æ­å»ºåŸºæœ¬çš„å¼€å‘ç¯å¢ƒäº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸æ»¡è¶³ï¼Œå› ä¸ºæˆ‘ä»¬æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨å»åˆ·æ–°æµè§ˆå™¨ï¼Œæ‰€è°“çš„çƒ­åŠ è½½ï¼Œæ„æ€å°±æ˜¯è¯´èƒ½å¤Ÿè¿½è¸ªæˆ‘ä»¬ä»£ç çš„å˜åŒ–ï¼Œå¹¶è‡ªåŠ¨æ›´æ–°ç•Œé¢ï¼Œç”šè‡³è¿˜èƒ½ä¿ç•™ç¨‹åºçŠ¶æ€ã€‚è¦å®Œæˆçƒ­åŠ è½½ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨å¦å¤–ä¸€ä¸ªä¸­é—´ä»¶ *webpack-hot-middleware*\n\n\n*<b>2ã€webpack-hot-middleware</b>*\n\n[webpack-hot-middleware](https://www.npmjs.com/package/webpack-hot-middleware) åªé…åˆ webpack-dev-middleware ä½¿ç”¨ï¼Œå®ƒèƒ½ç»™ä½ æä¾›çƒ­åŠ è½½ã€‚\n\nå®ƒçš„ä½¿ç”¨å¾ˆç®€å•ï¼Œæ€»å…±åˆ†4æ­¥ï¼š\n\n1ã€å®‰è£…ï¼Œæˆ‘ä»¬ä¸Šé¢å·²ç»å®‰è£…è¿‡äº†\n2ã€åœ¨ webpack.dev.conf.js é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸‰ä¸ªæ’ä»¶ï¼Œå¦‚ä¸‹ï¼š\n\n```\n\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\nvar path = require('path');\nvar webpack = require('webpack');\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require('./webpack.config');\n\nconfig.output.publicPath = '/';\n\nconfig.plugins = [\n    // æ·»åŠ ä¸‰ä¸ªæ’ä»¶\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin(),\n\n    new HtmlWebpackPlugin({\n        filename: 'app/index/index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n];\n\nmodule.exports = config;\n```\n\n3ã€åœ¨ webpack.config.js æ–‡ä»¶ä¸­å…¥å£é…ç½®ä¸­æ·»åŠ  'webpack-hot-middleware/client'ï¼Œå¦‚ä¸‹ï¼š\n\n```\nentry: ['webpack-hot-middleware/client', path.resolve(__dirname, '../app/index/index.js')],\n```\n\n4ã€åœ¨ dev-server.js æ–‡ä»¶ä¸­ä½¿ç”¨æ’ä»¶\n\n```\n// å¼•å…¥å¿…è¦çš„æ¨¡å—\nvar express = require('express')\nvar webpack = require('webpack')\nvar config = require('./webpack.dev.conf')\n\n// åˆ›å»ºä¸€ä¸ªexpresså®ä¾‹\nvar app = express()\n\n// è°ƒç”¨webpackå¹¶æŠŠé…ç½®ä¼ é€’è¿‡å»\nvar compiler = webpack(config)\n\n// ä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶\nvar devMiddleware = require('webpack-dev-middleware')(compiler, {\n    publicPath: config.output.publicPath,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\n// ä½¿ç”¨ webpack-hot-middleware ä¸­é—´ä»¶\nvar hotMiddleware = require('webpack-hot-middleware')(compiler)\n\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(devMiddleware)\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(hotMiddleware)\n\n// ç›‘å¬ 8888ç«¯å£ï¼Œå¼€å¯æœåŠ¡å™¨\napp.listen(8888, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log('Listening at http://localhost:8888')\n})\n\n```\n\nokï¼Œç°åœ¨é‡å¯çš„æœåŠ¡ï¼Œç„¶åä¿®æ”¹ Favlist.vue ä¸­çš„é¡µé¢èƒŒæ™¯é¢œè‰²ä¸º '#000'ï¼š\n\n```\n<style>\n    html{\n        background: #000;\n    }\n</style>\n\n```\n\nç„¶åæŸ¥çœ‹ä½ çš„æµè§ˆå™¨ï¼Œæ˜¯ä¸æ˜¯ä½ è¿˜æ²¡æœ‰åˆ·æ–°å°±å·²ç»å¾—å¸¦æ”¹å˜äº†ï¼Ÿ\n\né‚£ä¹ˆè¿™æ ·å°±å®Œç¾äº†å—ï¼Ÿè¿˜æ²¡æœ‰ï¼Œå¦‚æœä½ ç»†å¿ƒï¼Œä½ ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬ä¸Šé¢åœ¨ç¬¬2æ­¥ä¸­ä¿®æ”¹äº† webpack.config.js è¿™ä¸ªåŸºæœ¬é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹äº†å…¥å£é…ç½®ï¼Œå¦‚ä¸‹ï¼š\n\n```\nentry: ['webpack-hot-middleware/client', path.resolve(__dirname, '../app/index/index.js')],\n```\n\nè¿™ä¹Ÿä¼šå¯¼è‡´æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„é—®é¢˜ï¼Œå°±æ˜¯ä¼šå½±å“æ„å»ºï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸è¦ç›´æ¥ä¿®æ”¹ webpack.config.js æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯åœ¨ webpack.dev.conf.js æ–‡ä»¶ä¸­é…ç½®ï¼Œå¦‚ä¸‹ï¼š\n\n```\n\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\nvar path = require('path');\nvar webpack = require('webpack');\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require('./webpack.config');\n\nconfig.output.publicPath = '/';\n\nconfig.plugins = [\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin(),\n    new HtmlWebpackPlugin({\n        filename: 'app/index/index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n];\n\n// åŠ¨æ€å‘å…¥å£é…ç½®ä¸­æ³¨å…¥ webpack-hot-middleware/client\nvar devClient = 'webpack-hot-middleware/client';\nObject.keys(config.entry).forEach(function (name, i) {\n    var extras = [devClient]\n    config.entry[name] = extras.concat(config.entry[name])\n})\n\nmodule.exports = config;\n```\n\nä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯è¦è®² webpack.config.js æ–‡ä»¶ä¸­çš„å…¥å£é…ç½®ä¿®æ”¹ä¸ºå¤šå…¥å£é…ç½®çš„æ–¹å¼ï¼Œè¿™ä¸ªä¿®æ”¹ä¸ä¼šå½±å“æ„å»ºï¼Œæ‰€ä»¥æ— æ‰€è°“ï¼š\n\n```\nentry: {\n    index: path.resolve(__dirname, '../app/index/index.js')\n},\n```\n\né‡å¯ä½ çš„æœåŠ¡ï¼Œåˆ·æ–°ä¸€ä¸‹æµè§ˆå™¨ï¼Œç„¶åä¿®æ”¹ Favlist.vue ä¸­çš„èƒŒæ™¯è‰²ä¸º greenï¼š\n\n```\n<style>\n    html{\n        background: green;\n    }\n</style>\n```\n\nå†æ¬¡æŸ¥çœ‹æµè§ˆå™¨ï¼Œå‘ç°å¯ä»¥çƒ­åŠ è½½ã€‚ä½†æ˜¯è¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿè¿˜æ²¡æœ‰ï¼Œä¸ä¿¡ä½ ä¿®æ”¹ index.html æ–‡ä»¶ï¼Œçœ‹çœ‹ä¼šä¸ä¼šçƒ­åŠ è½½ï¼Œå®é™…ä¸Šä¸ä¼šï¼Œä½ è¿˜æ˜¯éœ€è¦æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œä¸ºäº†èƒ½å¤Ÿå½“ index.html æ–‡ä»¶çš„æ”¹åŠ¨ä¹Ÿèƒ½å¤Ÿè§¦å‘è‡ªåŠ¨åˆ·æ–°ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›å·¥ä½œã€‚\n\n*<b>ç¬¬ä¸€æ­¥ï¼šåœ¨ dev-server.js æ–‡ä»¶ä¸­ç›‘å¬htmlæ–‡ä»¶æ”¹å˜äº‹ä»¶ï¼Œä¿®æ”¹åçš„ dev-server.js æ–‡ä»¶å¦‚ä¸‹ï¼š</b>*\n\n```\n// å¼•å…¥å¿…è¦çš„æ¨¡å—\nvar express = require('express')\nvar webpack = require('webpack')\nvar config = require('./webpack.dev.conf')\n\n// åˆ›å»ºä¸€ä¸ªexpresså®ä¾‹\nvar app = express()\n\n// è°ƒç”¨webpackå¹¶æŠŠé…ç½®ä¼ é€’è¿‡å»\nvar compiler = webpack(config)\n\n// ä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶\nvar devMiddleware = require('webpack-dev-middleware')(compiler, {\n    publicPath: config.output.publicPath,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\nvar hotMiddleware = require('webpack-hot-middleware')(compiler)\n\n// webpackæ’ä»¶ï¼Œç›‘å¬htmlæ–‡ä»¶æ”¹å˜äº‹ä»¶\ncompiler.plugin('compilation', function (compilation) {\n    compilation.plugin('html-webpack-plugin-after-emit', function (data, cb) {\n        // å‘å¸ƒäº‹ä»¶\n        hotMiddleware.publish({ action: 'reload' })\n        cb()\n    })\n})\n\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(devMiddleware)\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(hotMiddleware)\n\n// ç›‘å¬ 8888ç«¯å£ï¼Œå¼€å¯æœåŠ¡å™¨\napp.listen(8888, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log('Listening at http://localhost:8888')\n})\n\n```\n\nä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¢åŠ äº†å¦‚ä¸‹ä»£ç ï¼š\n\n```\n// webpackæ’ä»¶ï¼Œç›‘å¬htmlæ–‡ä»¶æ”¹å˜äº‹ä»¶\ncompiler.plugin('compilation', function (compilation) {\n    compilation.plugin('html-webpack-plugin-after-emit', function (data, cb) {\n        // å‘å¸ƒäº‹ä»¶\n        hotMiddleware.publish({ action: 'reload' })\n        cb()\n    })\n})\n```\n\nè¿™æ®µä»£ç å¯èƒ½ä½ çœ‹ä¸æ‡‚ï¼Œå› ä¸ºè¿™æ¶‰åŠåˆ°webpackæ’ä»¶çš„ç¼–å†™ï¼Œè¯»è€…å¯ä»¥å‚é˜…ä¸‹é¢çš„è¿æ¥ï¼š\n\n[webpack æ’ä»¶doc1](https://github.com/webpack/docs/wiki/plugins)\n\n[webpack æ’ä»¶doc2](https://github.com/webpack/docs/wiki/How-to-write-a-plugin)\n\nåœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬ç›‘å¬äº† 'html-webpack-plugin-after-emit' äº‹ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹ä»¶æ˜¯ä»å“ªé‡Œå‘å°„çš„å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡åå­—å¯çŸ¥ï¼Œè¿™ä¸ªäº‹ä»¶åº”è¯¥å’Œhtml-webpack-pluginè¿™ä¸ªæ’ä»¶æœ‰å…³ï¼Œåœ¨npmæœç´¢ [html-webpack-plugin](https://www.npmjs.com/package/html-webpack-plugin) æ’ä»¶ï¼Œåœ¨é¡µé¢æœ€åº•éƒ¨æˆ‘ä»¬å¯ä»¥å‘ç°å¦‚ä¸‹å›¾ï¼š\n\n![html-webpack-pluginå¯ä»¥å‘å°„äº‹ä»¶](http://7xlolm.com1.z0.glb.clouddn.com/20160325i.jpg)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œhtml-webpack-plugin è¿™ä¸ªæ’ä»¶çš„ç¡®æä¾›äº†å‡ ä¸ªå¯é€‰çš„äº‹ä»¶ï¼Œä¸‹é¢ä¹Ÿæä¾›äº†ä½¿ç”¨æ–¹æ³•ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿç›‘å¬åˆ°htmlæ–‡ä»¶çš„å˜åŒ–ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„ä»£ç å‘å¸ƒä¸€ä¸ªäº‹ä»¶ï¼š\n\n```\nhotMiddleware.publish({ action: 'reload' })\n```\n\n*<b>ç¬¬äºŒæ­¥ï¼šä¿®æ”¹ webpack.dev.conf.js æ–‡ä»¶å¦‚ä¸‹ï¼š</b>*\n\n```\n\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\nvar path = require('path');\nvar webpack = require('webpack');\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require('./webpack.config');\n\nconfig.output.publicPath = '/';\n\nconfig.plugins = [\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin(),\n    new HtmlWebpackPlugin({\n        filename: 'app/index/index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n];\n\n// var devClient = 'webpack-hot-middleware/client';\nvar devClient = './build/dev-client';\nObject.keys(config.entry).forEach(function (name, i) {\n    var extras = [devClient]\n    config.entry[name] = extras.concat(config.entry[name])\n})\n\nmodule.exports = config;\n```\n\næˆ‘ä»¬ä¿®æ”¹äº†devClientå˜é‡ï¼Œå°† 'webpack-hot-middleware/client' æ›¿æ¢æˆ './build/dev-client'ï¼Œæœ€ç»ˆä¼šå¯¼è‡´ï¼Œæˆ‘ä»¬å…¥å£é…ç½®ä¼šå˜æˆä¸‹é¢è¿™æ ·ï¼š\n\n```\nentry: {\n    index: [\n        './build/dev-client',\n        path.resolve(__dirname, '../app/index/index.js')\n    ]\n},\n```\n\n*<b>ç¬¬ä¸‰æ­¥ï¼šæ–°å»º build/dev-client.js æ–‡ä»¶ï¼Œå¹¶ç¼–è¾‘å¦‚ä¸‹å†…å®¹ï¼š</b>*\n\n```\nvar hotClient = require('webpack-hot-middleware/client')\n\n// è®¢é˜…äº‹ä»¶ï¼Œå½“ event.action === 'reload' æ—¶æ‰§è¡Œé¡µé¢åˆ·æ–°\nhotClient.subscribe(function (event) {\n    if (event.action === 'reload') {\n        window.location.reload()\n    }\n})\n\n```\n\nè¿™é‡Œæˆ‘ä»¬é™¤äº†å¼•å…¥ 'webpack-hot-middleware/client' ä¹‹å¤–è®¢é˜…äº†ä¸€ä¸ªäº‹ä»¶ï¼Œå½“ event.action === 'reload' æ—¶è§¦å‘ï¼Œè¿˜è®°å¾—æˆ‘ä»¬åœ¨ dev-server.js ä¸­å‘å¸ƒçš„äº‹ä»¶å—ï¼š\n\n```\nhotMiddleware.publish({ action: 'reload' })\n```\n\nè¿™æ ·ï¼Œå½“æˆ‘ä»¬çš„htmlæ–‡ä»¶æ”¹å˜åï¼Œå°±å¯ä»¥ç›‘å¬çš„åˆ°ï¼Œæœ€ç»ˆä¼šæ‰§è¡Œé¡µé¢åˆ·æ–°ï¼Œè€Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åˆ·æ–°ï¼Œç°åœ¨é‡å¯æœåŠ¡ï¼Œå»å°è¯•èƒ½å¦å¯¹htmlæ–‡ä»¶çƒ­åŠ è½½å§ã€‚ç­”æ¡ˆæ˜¯yesã€‚\nå¥½äº†ï¼Œå¼€å‘ç¯å¢ƒç»ˆäºæå®šäº†ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥è°ˆä¸€è°ˆç”Ÿäº§ç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯æ„å»ºè¾“å‡ºï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ‰§è¡Œä¸€ä¸‹æ„å»ºå‘½ä»¤ï¼Œçœ‹çœ‹è¾“å‡ºçš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Œä¸ºäº†ä¸å¿…æ¯æ¬¡éƒ½è¦è¾“å…¥ä¸‹é¢è¿™æ¡é•¿å‘½ä»¤ï¼š\n\n```\nwebpack --display-modules --display-chunks --config build/webpack.config.js\n```\n\næˆ‘ä»¬åœ¨ package.js æ–‡ä»¶ä¸­æ·»åŠ  \"scripts\" é¡¹ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![npm](http://7xlolm.com1.z0.glb.clouddn.com/20160325m.jpg)\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ‰§è¡Œä¸‹é¢å‘½ä»¤æ¥è¿›è¡Œæ„å»ºï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜å¢åŠ äº†ä¸€æ¡å¼€å¯å¼€å‘æœåŠ¡å™¨çš„å‘½ä»¤ï¼š\n\n```\n// æ„å»º\nnpm run build\n// å¼€å¯å¼€å‘æœåŠ¡å™¨\nnpm run dev\n```\n\nå›è¿‡å¤´æ¥ï¼Œæˆ‘ä»¬æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š npm run buildï¼ŒæŸ¥çœ‹è¾“å‡ºå†…å®¹ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![è¾“å‡ºå†…å®¹](http://7xlolm.com1.z0.glb.clouddn.com/20160325n.jpg)\n\nç°åœ¨æˆ‘ä»¬åªæœ‰ä¸€ä¸ªjsæ–‡ä»¶è¾“å‡ºäº†ï¼Œå¹¶æ²¡æœ‰cssæ–‡ä»¶è¾“å‡ºï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬å¸Œæœ›cssæ–‡ä»¶ç”Ÿæˆå•ç‹¬çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨ extract-text-webpack-plugin æ’ä»¶ï¼Œå®‰è£…ï¼š\n\n```\nnpm install extract-text-webpack-plugin --save-dev\n```\n\nç„¶ååœ¨buildç›®å½•ä¸‹æ–°å»º webpack.prod.conf.js æ–‡ä»¶ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªä½¿æˆ‘ä»¬åŒºåˆ«äºå¼€å‘ç¯å¢ƒï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œå¹¶ç¼–è¾‘ä¸€ä¸‹å†…å®¹ï¼š\n\n```\n\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\nvar ExtractTextPlugin = require('extract-text-webpack-plugin')\nvar path = require('path');\nvar webpack = require('webpack');\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require('./webpack.config');\n\nconfig.vue = {\n    loaders: {\n        css: ExtractTextPlugin.extract(\"css\")\n    }\n};\n\nconfig.plugins = [\n    // æå–cssä¸ºå•æ–‡ä»¶\n    new ExtractTextPlugin(\"../[name].[contenthash].css\"),\n\n    new HtmlWebpackPlugin({\n        filename: '../index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n];\n\nmodule.exports = config;\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¦†ç›–äº† webpack.config.js é…ç½®æ–‡ä»¶çš„ config.plugins é¡¹ï¼Œå¹¶ä¸”æ·»åŠ äº† config.vue é¡¹ï¼Œè¡¥è¡€è¯çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå°±æ˜¯è¿™ä¹ˆç”¨çš„ï¼Œå¦‚æœä¸€å®šè¦çŸ¥é“ä¸ºä»€ä¹ˆä¹Ÿå¯ä»¥ï¼Œè¿™éœ€è¦ä½ å¤šå»äº†è§£vueä»¥åŠvue-loaderçš„å·¥ä½œåŸç†ï¼Œè¿™é‡Œæœ‰è¿æ¥[ç‚¹å‡»è¿™é‡Œ](http://vuejs.github.io/vue-loader/configurations/extract-css.html)\nç„¶åä¿®æ”¹ package.json æ–‡ä»¶ä¸­çš„ script é¡¹ä¸ºå¦‚ä¸‹ï¼š\n\n```\n\"scripts\": {\n    \"build\": \"webpack --display-modules --display-chunks --config build/webpack.prod.conf.js\",\n    \"dev\": \"node ./build/dev-server.js\"\n},\n```\n\næˆ‘ä»¬ä½¿ç”¨ webpack.prod.conf.js ä¸ºé…ç½®å»æ„å»ºï¼Œæ¥ä¸‹æ¥æ‰§è¡Œï¼š\n\n```\nnpm run build\n```\n\næŸ¥çœ‹ä½ çš„è¾“å‡ºå†…å®¹ï¼Œå¦‚ä¸‹å›¾ï¼Œcssæ–‡ä»¶æœªæå–å‡ºæ¥äº†ï¼š\n\n![cssæ–‡ä»¶è¢«æå–](http://7xlolm.com1.z0.glb.clouddn.com/20160325l.jpg)\n\nå¦å¤–æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å¦‚ä¸‹æ’ä»¶åœ¨æˆ‘ä»¬çš„ webpack.prod.conf.js æ–‡ä»¶ä¸­ï¼Œä½œä¸ºç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼š\n\n```\nconfig.plugins = [\n    new webpack.DefinePlugin({\n        'process.env': {\n            NODE_ENV: '\"production\"'\n        }\n    }),\n    // å‹ç¼©ä»£ç \n    new webpack.optimize.UglifyJsPlugin({\n        compress: {\n            warnings: false\n        }\n    }),\n    new webpack.optimize.OccurenceOrderPlugin(),\n    // æå–cssä¸ºå•æ–‡ä»¶\n    new ExtractTextPlugin(\"../[name].[contenthash].css\"),\n    new HtmlWebpackPlugin({\n        filename: '../index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n];\n```\n\nå¤§å®¶å¯ä»¥æœç´¢è¿™äº›æ’ä»¶ï¼Œäº†è§£ä»–çš„ä½œç”¨ï¼Œè¿™ç¯‡æ–‡ç« è¦ä»‹ç»çš„å¤ªå¤šï¼Œæ‰€ä»¥æˆ‘ä¸€ä¸€è®²è§£äº†ã€‚\n\nåˆ°è¿™é‡Œå®é™…ä¸Šæ­å»ºçš„å·²ç»å·®ä¸å¤šäº†ï¼Œå”¯ä¸€è¦åšçš„å°±æ˜¯å®Œå–„ï¼Œæ¯”å¦‚å…¬å…±æ¨¡å—çš„æå–ï¼Œå¦‚ä½•åŠ è½½å›¾ç‰‡ï¼Œå¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•æå–å…¬å…±æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ CommonsChunkPlugin æ’ä»¶ï¼Œåœ¨ webpack.prod.conf.js æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹æ’ä»¶ï¼š\n\n```\nnew webpack.optimize.CommonsChunkPlugin({\n    name: 'vendors',\n    filename: 'vendors.js',\n}),\n```\n\nç„¶ååœ¨ webpack.config.js æ–‡ä»¶ä¸­é…ç½®å…¥å£æ–‡ä»¶ï¼š\n\n```\nentry: {\n    index: path.resolve(__dirname, '../app/index/index.js'),\n    vendors: [\n        'Vue'\n    ]\n},\n```\n\nä¸Šé¢ä»£ç çš„æ„æ€æ˜¯ï¼Œæˆ‘ä»¬æŠŠVue.jså½“åšå…¬å…±æ¨¡å—å•ç‹¬æ‰“åŒ…ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªæ•°ç»„ä¸­å¢åŠ å…¶ä»–æ¨¡å—ï¼Œä¸€èµ·ä½œä¸ºå…¬å…±æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼Œç„¶åæŸ¥çœ‹è¾“å‡ºï¼Œå¦‚ä¸‹å›¾ï¼ŒæˆåŠŸæå–ï¼š\n\n![æå–å…¬å…±æ¨¡å—](http://7xlolm.com1.z0.glb.clouddn.com/20160325u.jpg)\n\nå¯¹äºåŠ è½½å›¾ç‰‡çš„é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œwebpackçš„å“²å­¦æ˜¯ä¸€åˆ‡çš†æ˜¯æ¨¡å—ï¼Œç„¶åé€šè¿‡ç›¸åº”çš„loaderå»åŠ è½½ï¼Œæ‰€ä»¥åŠ è½½å›¾ç‰‡ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ° url-loaderï¼Œåœ¨webpack.config.js æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªloaderé…ç½®ï¼š\n\n```\nloaders: [\n    // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n    {\n        test: /\\.vue$/, \n        loader: 'vue'   \n    },\n    {\n        test: /\\.js$/,\n        loader: 'babel?presets=es2015',\n        exclude: /node_modules/\n    },\n    // åŠ è½½å›¾ç‰‡\n    {\n        test: /\\.(png|jpg|gif|svg)$/,\n        loader: 'url',\n        query: {\n            limit: 10000,\n            name: '[name].[ext]?[hash:7]'\n        }\n    }\n]\n```\n\nè¿™æ ·ï¼Œå½“æˆ‘ä»¬çš„cssæ ·å¼è¡¨æ–‡ä»¶ä¸­ä½¿ç”¨ url(xxxx.png)æˆ–è€…jsä¸­å»require('xxxx.png')çš„æ—¶å€™ï¼Œwebpackå°±çŸ¥é“å¦‚ä½•å¤„ç†ï¼Œå¦å¤–url-loaderçš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œä»¥ä¸Šé¢çš„é…ç½®æ¥è¯´ï¼Œå½“æˆ‘ä»¬çš„å›¾ç‰‡å¤§å°å°äº10000å­—èŠ‚çš„æ—¶å€™ï¼Œwebpackä¼šæŠŠå›¾ç‰‡è½¬æ¢æˆbase64æ ¼å¼æ’å…¥åˆ°ä»£ç ä¸­ï¼Œä»è€Œå‡å°‘httpè¯·æ±‚ï¼Œå¦å¤–ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œè°ˆåˆ°çš„ä»»ä½•ä¸€ä¸ªloaderéƒ½å¯ä»¥åœ¨npmä¸­æŸ¥æ‰¾åˆ°ï¼Œè¯»è€…å¯ä»¥æŸ¥è¯¢æ›´å¤šçš„loaderäº†è§£å¹¶ä½¿ç”¨ã€‚\n\n\n\n\n","source":"_posts/2016/03/25/åŸºäºwebpackå’Œvue.jsæ­å»ºçš„H5ç«¯æ¡†æ¶(å…¶å®ä¸»è¦ç”¨äºHybridå¼€å‘H5ç«¯æ¡†æ¶ï¼Œä½†æ˜¯ä¾ç„¶èƒ½å¤Ÿä½œä¸ºçº¯webç«¯ä½¿ç”¨).md","raw":"title: åŸºäºwebpackå’Œvue.jsæ­å»ºçš„H5ç«¯æ¡†æ¶(å…¶å®ä¸»è¦ç”¨äºHybridå¼€å‘H5ç«¯æ¡†æ¶ï¼Œä½†æ˜¯ä¾ç„¶èƒ½å¤Ÿä½œä¸ºçº¯webç«¯ä½¿ç”¨)\ndate: 2016-03-25 15:17:33\ncategories:\n- WebFrontEnd\ntags:\n- æ¡†æ¶\n- æ¶æ„\n- vue\n- webpack\n---\n\näººç±»çš„å‘å±•å¾—ç›Šäºå¯¹è¿½æ±‚ä¸æ–­çš„æå‡ï¼Œåœ¨èƒ½æ´»ç€çš„åŸºç¡€ä¸Šæ˜¯å¦è¦æ´»å¾—æ½‡æ´’ä¸€ç‚¹ï¼ŒæŠ€æœ¯çš„å‘å±•äº¦å¦‚æ˜¯ã€‚åœ¨å…¬å¸ä½œä¸ºä¸€ä¸ªæœ€æœ€æœ€æœ€æœ€æœ€æœ€åº•å±‚çš„æ¬ç –ç å†œï¼Œç»å†äº†ä¸¤ä¸ªç‰ˆæœ¬çš„é“¸(zhe)ç‚¼(mo)ä¹‹åï¼Œæˆ‘ç—›ä¸‹å†³å¿ƒä»Šåä¸€å®šè¦ï¼š..............ä¸€å®šè¦å’Œäº§å“æƒº(shi)æƒº(bu)ç›¸(liang)æƒœ(li)ã€‚\n\n<!-- more -->\n\n# å¼€å§‹ä¹‹å‰ #\n\næœ¬æ–‡åŒ…å«ä»¥ä¸‹æŠ€æœ¯ï¼Œæ–‡ä¸­å°½é‡ç»™ä¸è¯¦ç»†çš„æè¿°ï¼Œå¹¶ä¸”é™„ä¸Šå‚è€ƒé“¾æ¥ï¼Œè¯»è€…å¯ä»¥æ·±å…¥å­¦ä¹ ï¼š\n\n1ã€[webpack](http://webpack.github.io/)\n2ã€[Vue.js](http://cn.vuejs.org/)\n3ã€[npm](https://www.npmjs.com/)\n4ã€nodejs ---- è¿™ä¸ªå°±ä¸ç»™è¿æ¥äº†ï¼Œå› ä¸ºä¸Šé¢çš„è¿æ¥éƒ½æ˜¯åœ¨ä½ å®è·µçš„è¿‡ç¨‹ä¸­è¦å»ä¸æ–­è®¿é—®çš„\n5ã€[ES6è¯­æ³•](http://es6.ruanyifeng.com/#README)\n\nå¦å¤–ï¼Œè¿™å¥—æ•™ç¨‹çš„ä»£ç éƒ½åœ¨æˆ‘çš„githubä¸Šï¼Œè¯»è€…å¯ä»¥å¯¹ç…§ç€ä»£ç æ¥çœ‹ï¼Œä¸è¿‡è¿˜æ˜¯å¸Œæœ›å¤§å®¶è‡ªå·±äº²æ‰‹æ­å»ºï¼Œä½“éªŒè¿™ä¸ªè¿‡ç¨‹ï¼Œgitåœ°å€ï¼š\n\n[gitåœ°å€](https://github.com/HcySunYang/h5_frame)\n\n# å‰è¨€ #\n\nåœ¨å¯¹ç€äº§å“é«˜ä¸¾ä¸­æŒ‡æ€’å‘å¿ƒä¸­ä¹‹æ„¤åï¼ŒçœŸæ­£èƒ½å¤Ÿè§£å†³é—®é¢˜çš„æ˜¯è‡ªèº«ä¸Šçš„æ”¹å˜ï¼Œæœ‰å¥è¯è¯´çš„å¥½ï¼šä½ è™½ç„¶æ”¹å˜ä¸äº†å…¨ä¸–ç•Œï¼Œä½†æ˜¯ä½ æœ‰æœºä¼šæ”¹å˜ä½ è‡ªå·±ã€‚ç§‰æ‰¿ç€â€œä¸å¬è€äººè¨€ï¼Œåƒäºåœ¨çœ¼å‰â€çš„ä¼˜è‰¯ä½œé£ï¼Œæˆ‘è¿˜æ˜¯å†³å®šç©ç«è‡ªç„šã€‚\n\n### é—®é¢˜æ‰€åœ¨ ###\n\nä¹‹å‰çš„é¡¹ç›®æ€»ç»“ä¸ºä»¥ä¸‹å†…å®¹ï¼š\n\n>1ã€AMDæ¨¡å—è§„èŒƒå¼€å‘ï¼Œä½¿ç”¨requirejså®ç°ï¼Œä½¿ç”¨rjsæ‰“åŒ…ï¼Œæœ€ç»ˆå¯¼è‡´çš„ç»“æœæ˜¯ï¼Œè¾“å‡ºçš„é¡¹ç›®è‡ƒè‚¿ï¼Œè‚¿çš„å°±åƒä¸€å¨ç‹—ä¸ç†......ä¸å¿ç›´è§†\n2ã€ä½¿ç”¨gulpè¿›è¡Œæ‰“åŒ…ï¼Œè¿™ä¸€ç‚¹è²Œä¼¼æ²¡æœ‰å¯åæ§½çš„åœ°æ–¹ï¼Œæ¯•ç«Ÿéƒ½æ˜¯è¢«gruntæŠ˜ç£¨è¿‡æ¥çš„......\n3ã€æ•°æ®çš„æ¸²æŸ“ä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼Œè¿™å°±æ„å‘³ç€ä½ è¦æ‰‹åŠ¨ç®¡ç†DOMï¼Œè¿™æ ·ï¼Œä½ çš„ä¸šåŠ¡ä»£ç å‚æ‚ç€ä½ çš„æ•°æ®å¤„ç†ã€DOMç®¡ç†ï¼Œæ»¡å±å¹•çš„æ¯›çº¿......\n4ã€æ¨¡å—åŒ–ä¸è¶³ï¼Œè™½ç„¶ä½¿ç”¨requireè¿›è¡Œäº†æ¨¡å—ç®¡ç†ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘è¿˜æ˜¯å……æ–¥åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œè¿™ä¸æœ€è¿‘æµè¡Œçš„ç»„ä»¶åŒ–æ¦‚å¿µå†°ç«ä¸å®¹ï¼Œæ‹’ç»è½å......\n5ã€è¯¸å¦‚ æ‰©å±•æ€§ ã€ ç»´æŠ¤æ€§ æˆ‘æƒ³æ—©å·²ä¸è¨€è€Œå–»ï¼Œä¸éœ€èµ˜è¿°ï¼Œå†è¿°å°±çœŸTMæ˜¯ç´¯èµ˜äº†ã€‚\n\næ–°æ¡†æ¶è¦è§£å†³çš„é—®é¢˜ï¼š\n\n>1ã€è¦ä½¿æ„å»ºè¾“å‡ºçš„é¡¹ç›®åƒä½ é‚»å®¶å°å¦¹å¦¹ä¸€æ ·ã€ç˜¦çš„çš®åŒ…éª¨ã€‚ï¼ˆä¹Ÿè®¸æ˜¯è¥å…»ä¸è‰¯ï¼‰\n2ã€è¦å®ç°çœŸæ­£çš„æ¨¡å—åŒ–ã€ç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼ï¼ŒçœŸæ­£å»è§£å†³ç»´æŠ¤éš¾ã€æ‰©å±•éš¾çš„é—®é¢˜ã€‚ï¼ˆä»æ­¤ä¸æ€•äº§å“æ±ªï¼‰\n3ã€ä¸šåŠ¡é€»è¾‘ä¸“æ³¨æ•°æ®å¤„ç†ï¼Œæ‰‹åŠ¨ç®¡ç†DOMçš„å¹´ä»£å°±åƒ......åƒä»€ä¹ˆå‘¢ï¼Ÿï¼ˆæ¯•ç«Ÿæˆäººç”¨å“ä¹Ÿè¶Šæ¥è¶Šè‡ªåŠ¨åŒ–äº†ï¼‰\n4ã€ç­‰ç­‰.......ï¼ˆå…¶å®å¥½å¤„æ— éœ€èµ˜è¿°ï¼Œæ¥ï¼Œå¾€ä¸‹çœ‹ï¼‰\n\nä¸ºäº†è¾¾æˆä»¥ä¸Šç›®æ ‡ï¼Œæˆ‘ä»¬æ¢è®¨ä¸€ä¸‹è§£å†³æ–¹æ¡ˆï¼š\n\n*<b>1ã€è€é¡¹ç›®çš„æ„å»ºè¾“å‡ºä¸ºä»€ä¹ˆè‡ƒè‚¿ï¼Ÿ</b>*\n\nç­”ï¼šå› ä¸ºä½¿ç”¨çš„æ˜¯requireçš„rjsè¿›è¡Œæ„å»ºæ‰“åŒ…çš„ï¼Œäº†è§£rjsçš„éƒ½çŸ¥é“ï¼Œå®ƒä¼šæŠŠé¡¹ç›®æ‰€æœ‰ä¾èµ–éƒ½æ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰å¾ˆå¤šé¡µé¢ä¾èµ–è¿™ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆrjså¹¶ä¸ä¼šæŠŠè¿™ä¸ªæ¨¡å—æå–å‡ºæ¥ä½œä¸ºå…¬å…±æ¨¡å—ï¼Œæ‰€ä»¥å°±ä¼šæœ‰å¾ˆå¤šå¤åˆ¶æ€§çš„å†…å®¹ï¼Œæ‰€ä»¥é¡¹ç›®è‡ªç„¶è‡ƒè‚¿ã€‚\n\n*è§£å†³æ–¹æ¡ˆï¼š*ä½¿ç”¨webpacké…åˆç›¸åº”çš„loaderï¼Œæ¥å®Œæˆæ¨¡å—åŠ è½½å’Œæ„å»ºçš„å·¥ä½œã€‚\n\n*<b>2ã€è€é¡¹ç›®ä¸ºä»€ä¹ˆæ¨¡å—åŒ–çš„ä¸è¶³ï¼Ÿ</b>*\n\nç­”ï¼šè€é¡¹ç›®çš„æ¨¡å—åŒ–ï¼Œä»…ä»…ä½“ç°åœ¨jså±‚é¢ï¼Œè§£å†³äº†æ¨¡å—å¼•ç”¨çš„é—®é¢˜ï¼Œä½†åœ¨å¼€å‘æ–¹å¼ä¸Šï¼Œä¾ç„¶å¯ä»¥çœ‹åšæ˜¯è¿‡ç¨‹å¼çš„ï¼Œè¿™æ ·çš„ç»“æœå°±å¯¼è‡´äº†é¡¹ç›®çš„éš¾æ‰©å±•å’Œéš¾ç»´æŠ¤ï¼Œè®©å¼€å‘äººå‘˜åœ¨ä¸äº§å“æ±ªçš„å¯¹å³™ä¸­ï¼Œå¹¶ä¸ä»å®¹ã€‚\n\n*è§£å†³æ–¹æ¡ˆï¼š*Vue.jsèƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³ç»„ä»¶åŒ–çš„é—®é¢˜ï¼Œé…åˆ Vue.js å®˜æ–¹æä¾›çš„ *vue-loader* èƒ½å¤Ÿå¾ˆå¥½çš„ç»“åˆwebpackåšç»„ä»¶åŒ–çš„å¼€å‘æ¶æ„ã€‚\n\n*<b>3ã€å¦‚ä½•é¿å…æ‰‹åŠ¨ç®¡ç†DOMï¼Ÿ</b>*\n\nç­”ï¼šå¦‚æœä½ åœ¨åšæ•°æ®å±•ç¤ºè¿™ä¸€å—çš„å¼€å‘å·¥ä½œï¼Œç›¸ä¿¡ä½ ä¸€å®šä½“ä¼šé¢‡æ·±ï¼Œå‘é€httpè¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œæ‹¿åˆ°è¿”å›çš„æ•°æ®åæ‰‹åŠ¨æ¸²æŸ“DOMè‡³é¡µé¢ï¼Œè¿™æ˜¯æœ€åŸå§‹çš„å¼€å‘æ–¹å¼ï¼Œæ— éå†åŠ ä¸€ä¸ªæ¨¡æ¿å¼•æ“ä¹‹ç±»çš„ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯é¿å…ä¸äº†æ‰‹åŠ¨æ¸²æŸ“ï¼Œå¦‚æœé¡µé¢é€»è¾‘å¤æ‚ï¼Œæ¯”å¦‚ç»™ä½ æ¥ä¸€ä¸ªç¿»é¡µçš„åŠŸèƒ½ï¼Œå†æ¥ä¸€ä¸ªç­›é€‰é¡¹ï¼Œä¼°è®¡ä½ ä¼šè§‰å¾—ä¸–ç•Œå¹¶ä¸é‚£ä¹ˆç¾å¥½ã€‚\n\n*è§£å†³æ–¹æ¡ˆï¼š*MVVMæ¨¡å¼èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€ŒVue.jsçš„æ ¸å¿ƒä¹Ÿæ˜¯MVVMã€‚\n\n# webpack #\n\nä½ è‚¯å®šå¬è¯´è¿‡webpackï¼Œå¦‚æœç›´æ¥å¯¹ä½ æè¿°ä»€ä¹ˆæ˜¯webpackä½ å¯èƒ½æ„Ÿå—ä¸åˆ°ä»–çš„å¥½å¤„ï¼Œé‚£ä¹ˆåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ç›¸ä¿¡ä½ è‚¯å®šä½¿ç”¨è¿‡gulpæˆ–è€…gruntï¼Œå¦‚æœä½ æ²¡ä½¿ç”¨è¿‡ä¹Ÿå¯ä»¥ï¼Œè‡³å°‘ä½ è¦å¬è¯´è¿‡å¹¶ä¸”çŸ¥é“gulpå’Œgruntæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œå‡å¦‚è¿™ä¸ªä½ è¿˜ä¸æ¸…æ¥šï¼Œé‚£ä¹ˆä½ å¹¶ä¸æ˜¯ä¸€ä¸ªåˆæ ¼çš„å‰ç«¯å¼€å‘äººå‘˜ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿä¸é€‚åˆä½ ï¼Œä½ å¯ä»¥ä»åŸºç¡€çš„åœ°æ–¹æ…¢æ…¢å­¦èµ·ã€‚\n\ngulpå’Œgruntå¯¹äºæ¯ä¸€ä¸ªå‰ç«¯å¼€å‘äººå‘˜åº”è¯¥æ˜¯ä¸é™Œç”Ÿçš„ï¼Œå®ƒä»¬ä¸ºå‰ç«¯æä¾›äº†è‡ªåŠ¨åŒ–æ„å»ºçš„èƒ½åŠ›ï¼Œå¹¶ä¸”æœ‰è‡ªå·±çš„ç”Ÿæ€åœˆï¼Œæœ‰å¾ˆå¤šæ’ä»¶ï¼Œä½¿å¾—æˆ‘ä»¬å‘Šåˆ«åˆ€è€•ç«ç§çš„æ—¶ä»£ï¼Œä½†æ˜¯å®ƒä»¬å¹¶æ²¡æœ‰è§£å†³æ¨¡å—åŠ è½½çš„é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰çš„é¡¹ç›®æ˜¯ä½¿ç”¨gulpæ„å»ºçš„ï¼Œä½†æ˜¯æ¨¡å—åŒ–å¾—å·¥ä½œè¿˜æ˜¯è¦é requireå’Œrjsæ¥å®Œæˆï¼Œè€Œgulpé™¤äº†å®Œæˆä¸€äº›å…¶ä»–ä»»åŠ¡ä¹‹å¤–ï¼Œå°±å˜æˆäº†å¸®åŠ©æˆ‘ä»¬å…é™¤æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤çš„å·¥å…·äº†ï¼Œåˆ«æ— å®ƒç”¨ã€‚\n\nè€Œwebpackå°±ä¸åŒäº†ï¼Œwebpackçš„å“²å­¦æ˜¯ä¸€åˆ‡çš†æ˜¯æ¨¡å—ï¼Œæ— è®ºæ˜¯js/css/sass/img/coffeejs/ttf....ç­‰ç­‰ï¼Œwebpackå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„loaderå»æŠŠä¸€åˆ‡èµ„æºå½“åšæ¨¡å—åŠ è½½ï¼Œè¿™æ ·å°±è§£å†³äº†æ¨¡å—ä¾èµ–çš„é—®é¢˜ï¼ŒåŒæ—¶ï¼Œåˆ©ç”¨æ’ä»¶è¿˜å¯ä»¥å¯¹é¡¹ç›®è¿›è¡Œä¼˜åŒ–ï¼Œç”±äºæ¨¡å—çš„åŠ è½½å’Œé¡¹ç›®çš„æ„å»ºä¼˜åŒ–éƒ½æ˜¯é€šè¿‡webpackä¸€ä¸ªâ€äººâ€œæ¥è§£å†³çš„ï¼Œæ‰€ä»¥æ¨¡å—çš„åŠ è½½å’Œé¡¹ç›®çš„æ„å»ºä¼˜åŒ–å¹¶ä¸æ˜¯æ— æœºåˆ†ç¦»çš„ï¼Œè€Œæ˜¯æœ‰æœºçš„ç»“åˆåœ¨ä¸€èµ·çš„ï¼Œæ˜¯ä¸€ä¸ªç»„åˆçš„è¿‡ç¨‹ï¼Œè¿™ä½¿å¾—webpackåœ¨è¿™æ–¹é¢èƒ½å¤Ÿå®Œæˆçš„æ›´å‡ºè‰²ï¼Œè¿™ä¹Ÿæ˜¯webpackçš„ä¼˜åŠ¿æ‰€åœ¨ã€‚\n\nå¦‚æœä½ çœ‹ä¸æ‡‚ä¸Šé¢çš„æè¿°ï¼Œæ²¡å…³ç³»ï¼Œä½ åªéœ€è¦çŸ¥é“ä¸€ä¸‹å‡ ç‚¹ï¼š\n\n1ã€è¿‡å»ä½¿ç”¨requireå’Œrjsç­‰è¿›è¡Œæ¨¡å—åŠ è½½çš„æ–¹å¼ï¼Œå¯ä»¥æ›¿æ¢ä¸ºwebpackæä¾›çš„æŒ‡å®šloaderå»å®Œæˆï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±å¼€å‘åŠ è½½ç‰¹å®šèµ„æºçš„loaderã€‚\n2ã€è¿‡å»ä½¿ç”¨gulpå’Œgruntå®Œæˆé¡¹ç›®æ„å»ºä¼˜åŒ–çš„æ–¹å¼ï¼Œå¯ä»¥æ›¿æ¢æˆwebpackæä¾›çš„æ’ä»¶å’Œç‰¹å®šçš„é…ç½®å»å®Œæˆã€‚\n3ã€ç”±äºæ¨¡å—çš„åŠ è½½å’Œé¡¹ç›®çš„æ„å»ºä¼˜åŒ–æœ‰æœºçš„ç»“åˆï¼Œæ‰€ä»¥webpackèƒ½å¤Ÿæ›´å¥½çš„å®Œæˆè¿™é¡¹å·¥ä½œ\n4ã€å¹¶ä¸æ˜¯è¯´æœ‰äº†webpackå°±æ·˜æ±°çš„gulpç­‰ï¼Œæœ‰äº›ç‰¹å®šçš„ä»»åŠ¡ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨gulpå»è‡ªå®šä¹‰å®Œæˆçš„ã€‚ä½†æ˜¯ä¸ä¿è¯webpackçš„æœªæ¥å‘å±•è¶‹åŠ¿ä¼šæ€ä¹ˆæ ·ã€‚\n\næœ€åï¼Œç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªå®˜æ–¹çš„æ•™ç¨‹ï¼Œè¿™ä¸ªæ•™ç¨‹çš„æœ€å¼€å§‹æœ‰å‘çš„åœ°æ–¹ï¼Œå¦‚æœè¯»è€…é‡åˆ°äº†å‘ï¼Œå¯ä»¥åœ¨è¿™é‡Œç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä¼šä¸ºå¤§å®¶è§£ç­”ï¼Œä¸è¿‡æ€»ä½“æ¥è®²ï¼Œè¿™ä¸ªæ•™ç¨‹é€‚åˆå…¥é—¨ï¼Œå”¯ä¸€ä¸è¶³çš„å°±æ˜¯æ•™ç¨‹æ˜¯è‹±æ–‡çš„ï¼Œè‹±æ–‡çš„ä¹Ÿä¸ç”¨æ€•ï¼Œæœ¬äººçš„è‹±è¯­æ²¡è¿‡å››çº§ï¼Œä½†æ˜¯ç°åœ¨ä¾ç„¶èƒ½å¤Ÿçœ‹å¾—æ‡‚è‹±æ–‡æŠ€æœ¯æ–‡ç« ã€‚æ•™ç¨‹é“¾æ¥ï¼š[http://blog.madewithlove.be/post/webpack-your-bags/](http://blog.madewithlove.be/post/webpack-your-bags/)\n\n# Vue.js #\n\n[Vue.js](http://cn.vuejs.org/)æ˜¯ä¸€ä¸ªMVVMæ¨¡å¼çš„æ¡†æ¶ï¼Œå¦‚æœè¯»è€…æœ‰angularç»éªŒï¼Œä¸€å®šèƒ½å¤Ÿå¾ˆå¿«å…¥é—¨Vueçš„ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨Vueè€Œä¸ç”¨angularï¼Œ\né¦–å…ˆï¼ŒVueçš„ä½“ç§¯å°ï¼Œè½»é‡åœ¨ç§»åŠ¨ç«¯å¼€å‘å§‹ç»ˆæ˜¯ä¸€ä¸ªä¸å¯å¿½ç•¥çš„è¯é¢˜ï¼Œå…¶æ¬¡ï¼ŒVueåœ¨å®ç°ä¸Šä¸angularæœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œè¯»è€…å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ä¸ªé“¾æ¥æ¥äº†è§£ï¼š\n\n1ã€[Vueçš„å˜åŒ–è¿½è¸ªå’Œè®¡ç®—å±æ€§çš„åŒºåˆ«ç­‰](http://cn.vuejs.org/guide/reactivity.html)\n\n2ã€[Vue ä¸ angular åŠ react ç­‰æ¡†æ¶çš„å¯¹æ¯”](http://cn.vuejs.org/guide/comparison.html)\n\n3ã€ç¬¬ä¸‰ç‚¹å°±æ˜¯Vueæä¾›äº†webpackçš„loader ----> [vue-loader]ï¼Œä½¿ç”¨å®ƒå¯ä»¥è®©é¡¹ç›®çš„ç»„ä»¶åŒ–æ€æƒ³æ›´åŠ æ¸…æ™°\n\nç»¼ä¸Šæ‰€è¿°ï¼Œè¿™å°±æ˜¯é€‰ç”¨Vueçš„åŸå› \n\n# npm å’Œ nodejs #\n\nnpm çš„å…¨ç§°æ˜¯ *nodejsåŒ…ç®¡ç†*ï¼Œç°åœ¨è¶Šæ¥è¶Šå¤šçš„é¡¹ç›®(åŒ…)éƒ½å¯ä»¥é€šè¿‡npmæ¥å®‰è£…ç®¡ç†ï¼Œnodejsæ˜¯jsè¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„å¹³å°ï¼Œå®ƒä½¿å¾—jsçš„èƒ½åŠ›è¿›ä¸€æ­¥æé«˜ï¼Œæˆ‘ä»¬è¿˜è¦ä½¿ç”¨nodejsé…åˆ webpack æ¥å®Œæˆçƒ­åŠ è½½çš„åŠŸèƒ½ã€‚æ‰€ä»¥è¯»è€…æœ€å¥½æœ‰nodejsçš„å¼€å‘ç»éªŒï¼Œå¦‚æœæœ‰expressçš„ç»éªŒæ›´å¥½ã€‚\n\n# è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥ä»é›¶æ­å»ºè¿™ä¸ªé¡¹ç›® #\n\né¦–å…ˆæ–°å»ºä¸€ä¸ªç›®å½•ï¼Œåä¸º myProject ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ã€‚ç„¶åæ‰§è¡Œä¸€äº›åŸºæœ¬çš„æ­¥éª¤ï¼Œæ¯”å¦‚ npm init å‘½ä»¤ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ç”Ÿæˆ package.json æ–‡ä»¶ï¼Œè¿™å‡ ä¹æ˜¯å¿…é€‰çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„é¡¹ç›®è¦æœ‰å¾ˆå¤šä¾èµ–ï¼Œéƒ½æ˜¯é€šè¿‡npmæ¥ç®¡ç†çš„ï¼Œè€Œnpmå¯¹äºæˆ‘ä»¬é¡¹ç›®çš„ç®¡ç†ï¼Œåˆ™æ˜¯é€šè¿‡package.jsonæ–‡ä»¶ï¼š\n\n```$\nnpm init\n```\n\næ‰§è¡Œnpm initä¹‹åï¼Œä¼šæç¤ºä½ å¡«å†™ä¸€äº›é¡¹ç›®çš„ä¿¡æ¯ï¼Œä¸€ç›´å›è½¦é»˜è®¤å°±å¥½äº†ï¼Œæˆ–è€…ç›´æ¥æ‰§è¡Œ npm init -y ç›´æ¥è·³è¿‡è¯¢é—®æ­¥éª¤\nç„¶åæˆ‘ä»¬æ–°å»ºä¸€ä¸ªå«åš app çš„ç›®å½•ï¼Œè¿™ä¸ªæ˜¯æˆ‘ä»¬é¡µé¢æ¨¡å—çš„ç›®å½•ï¼Œå†åœ¨appç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªindexç›®å½•ï¼Œå‡è®¾è¿™ä¸ªæ˜¯é¦–é¡µæ¨¡å—çš„ç›®å½•ï¼Œç„¶åå†åœ¨indexç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ª index.html æ–‡ä»¶å’Œ index.js æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯é¦–é¡µå…¥å£htmlæ–‡ä»¶å’Œä¸»jsæ–‡ä»¶ï¼Œç„¶åå†åœ¨indexç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªcomponentsç›®å½•ï¼Œè¿™ä¸ªç›®å½•ç”¨ä½œå­˜æ”¾é¦–é¡µç»„ä»¶æ¨¡å—çš„ç›®å½•ï¼Œå› ä¸ºæˆ‘ä»¬æœ€ç»ˆè¦å®ç°ç»„ä»¶åŒ–å¼€å‘ã€‚è¿™æ ·ï¼Œå½“ä½ å®Œæˆä¸Šé¢çš„æ­¥éª¤åï¼Œä½ çš„é¡¹ç›®çœ‹ä¸Šå»åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n\n![é¡¹ç›®ç»“æ„](http://7xlolm.com1.z0.glb.clouddn.com/20160325b.jpg)\n\næ¥ä¸‹æ¥é€šè¿‡npmå®‰è£…é¡¹ç›®ä¾èµ–é¡¹ï¼š\n\n```$\nnpm install\\\n  webpack webpack-dev-server\\\n  vue-loader vue-html-loader css-loader vue-style-loader vue-hot-reload-api\\\n  babel-loader babel-core babel-plugin-transform-runtime babel-preset-es2015\\\n  babel-runtime@5\\\n  --save-dev\n\nnpm install vue --save\n```\n\nè¿™ä¸ªæ—¶å€™ï¼Œä½ çš„package.jsonæ–‡ä»¶çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n\n```\n\"devDependencies\": {\n    \"babel-core\": \"^6.3.17\",\n    \"babel-loader\": \"^6.2.0\",\n    \"babel-plugin-transform-runtime\": \"^6.3.13\",\n    \"babel-preset-es2015\": \"^6.3.13\",\n    \"babel-runtime\": \"^5.8.34\",\n    \"css-loader\": \"^0.23.0\",\n    \"vue-hot-reload-api\": \"^1.2.2\",\n    \"vue-html-loader\": \"^1.0.0\",\n    \"vue-style-loader\": \"^1.0.0\",\n    \"vue-loader\": \"^7.2.0\",\n    \"webpack\": \"^1.12.9\",\n    \"webpack-dev-server\": \"^1.14.0\"\n  },\n  \"dependencies\": {\n    \"vue\": \"^1.0.13\"\n  },\n```\n\næˆ‘ä»¬å®‰è£…äº† babel ä¸€ç³»åˆ—åŒ…ï¼Œç”¨æ¥è§£æES6è¯­æ³•ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ES6æ¥å¼€å‘é¡¹ç›®ï¼Œå¦‚æœä½ ä¸äº†è§£ES6è¯­æ³•ï¼Œå»ºè®®ä½ çœ‹ä¸€çœ‹[é˜®è€å¸ˆçš„æ•™ç¨‹](http://es6.ruanyifeng.com/)ï¼Œç„¶åæˆ‘ä»¬å®‰è£…äº†ä¸€äº›loaderåŒ…ï¼Œæ¯”å¦‚css-loader/vue-loaderç­‰ç­‰ï¼Œå› ä¸ºwebpackæ˜¯ä½¿ç”¨è¿™äº›æŒ‡å®šçš„loaderå»åŠ è½½æŒ‡å®šçš„æ–‡ä»¶çš„ã€‚\n\nå¦å¤–æˆ‘ä»¬è¿˜ä½¿ç”¨ npm install vue --save å‘½ä»¤å®‰è£…äº† vue ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„vue.jsï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åƒå¼€å‘nodejsåº”ç”¨ä¸€æ ·ï¼Œç›´æ¥require('vue');å³å¯ï¼Œè€Œä¸éœ€è¦é€šè¿‡scriptæ ‡ç­¾å¼•å…¥ï¼Œè¿™ä¸€ç‚¹åœ¨å¼€å‘ä¸­å¾ˆçˆ½ã€‚\n\nå®‰è£…å®Œäº†ä¾èµ–ï¼Œç¼–è¾‘ä»¥ä¸‹æ–‡ä»¶å¹¶ä¿å­˜åˆ°ç›¸åº”ä½ç½®ï¼š\n\n1ã€index.htmlæ–‡ä»¶ï¼š\n\n```\n<!DOCTYPE html>\n<html lang=\"zh\">\n\t<head>\n\t\t<meta name=\"viewport\" content=\"width=device-width, height=device-height, initial-scale=1.0, user-scalable=no\">\n\t\t<meta charset=\"utf-8\">\n\t\t<title>é¦–é¡µ</title>\n\t</head>\n\t<body>\n\t\t<!-- vueçš„ç»„ä»¶ä»¥è‡ªå®šä¹‰æ ‡ç­¾çš„å½¢å¼ä½¿ç”¨ -->\n\t\t<favlist></favlist>\n\t</body>\n</html>\n\n```\n\n2ã€index.jsæ–‡ä»¶ï¼š\n\n```\nimport Vue from 'Vue'\nimport Favlist from './components/Favlist'\n\nnew Vue({\n\tel: 'body',\n\tcomponents: { Favlist }\n})\n```\n\n3ã€åœ¨componentsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª Favlist.vue æ–‡ä»¶ï¼Œä½œä¸ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç»„ä»¶ï¼š\n\n```\n<template>\n    <div v-for=\"n in 10\">div</div>\n</template>\n\n<script>\n    export default {\n        data () {\n            return {\n                msg: 'Hello World!'\n            }\n        }\n    }\n</script>\n\n<style>\n    html{\n        background: red;\n    }\n</style>\n\n```\n\nè¦çœ‹æ‡‚ä¸Šé¢çš„ä»£ç ï¼Œä½ éœ€è¦äº†è§£vue.jsï¼Œå‡å¦‚ä½ çœ‹ä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨index.htmlä¸­ä½¿ç”¨äº†è‡ªå®šä¹‰æ ‡ç­¾ï¼ˆå³ç»„ä»¶ï¼‰ï¼Œç„¶ååœ¨index.jsä¸­å¼•å…¥äº†Vueå’Œæˆ‘ä»¬çš„Favlist.vueç»„ä»¶ï¼ŒFavlist.vueæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åŸºæœ¬çš„vueç»„ä»¶è¯­æ³•ï¼Œæœ€åï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒè¿è¡Œèµ·æ¥ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦webpackäº†ã€‚\n\nåœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»º build ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾æˆ‘ä»¬çš„æ„å»ºç›¸å…³çš„ä»£ç æ–‡ä»¶ç­‰ï¼Œç„¶ååœ¨buildç›®å½•ä¸‹æ–°å»º webpack.config.js è¿™æ˜¯æˆ‘ä»¬çš„webpacké…ç½®æ–‡ä»¶ï¼Œwebpackéœ€è¦é€šè¿‡è¯»å–ä½ çš„é…ç½®ï¼Œè¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œç±»ä¼¼äºgulpfile.jsæˆ–è€…gruntfile.jsç­‰ã€‚\n\nwebpack.config.js\n\n```\n// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require('path');\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, '../app/index/index.js'),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, '../output/static'),\n        publicPath: 'static/',\n        filename: '[name].[hash].js',\n        chunkFilename: '[id].[chunkhash].js'\n    },\n    module: {\n        \n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: 'vue'   \n            }\n        ]\n    }\n}\n```\n\nä¸Šä¾‹ä¸­ï¼Œç›¸ä¿¡ä½ å·²ç»çœ‹æ‡‚äº†æˆ‘çš„é…ç½®ï¼Œå…¥å£æ–‡ä»¶æ˜¯index.jsæ–‡ä»¶ï¼Œé…ç½®äº†ç›¸åº”è¾“å‡ºï¼Œç„¶åä½¿ç”¨ vue-loader å»åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æ„å»ºé¡¹ç›®äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š\n\n```\nwebpack --display-modules --display-chunks --config build/webpack.config.js\n```\n\né€šè¿‡webpackå‘½ä»¤ï¼Œå¹¶ä¸”é€šè¿‡ --config é€‰é¡¹æŒ‡å®šäº†æˆ‘ä»¬é…ç½®æ–‡ä»¶çš„ä½ç½®æ˜¯ 'build/webpack.config.js'ï¼Œå¹¶é€šè¿‡ --display-modules å’Œ --display-chunks é€‰é¡¹æ˜¾ç¤ºç›¸åº”çš„ä¿¡æ¯ã€‚å¦‚æœä½ æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œå¯èƒ½å¾—åˆ°ä¸‹å›¾çš„é”™è¯¯ï¼š\n\n![æŠ¥é”™](http://7xlolm.com1.z0.glb.clouddn.com/20160325c.jpg)\n\né”™è¯¯æç¤ºæˆ‘ä»¬åº”è¯¥é€‰æ‹©åˆé€‚çš„loaderå»åŠ è½½è¿™ä¸ª './app/index/index.js' è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”è¯´ä¸æœŸæœ›index.jsæ–‡ä»¶ä¸­çš„æ ‡è¯†ç¬¦ï¼ˆUnexpected tokenï¼‰ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†ES6çš„è¯­æ³• import è¯­å¥ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨ babel-loader å»åŠ è½½æˆ‘ä»¬çš„jsæ–‡ä»¶ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªloadersé¡¹ç›®ï¼Œå¦‚ä¸‹ï¼š\n\n```\n// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require('path');\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, '../app/index/index.js'),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, '../output/static'),\n        publicPath: 'static/',\n        filename: '[name].[hash].js',\n        chunkFilename: '[id].[chunkhash].js'\n    },\n    module: {\n        \n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: 'vue'   \n            },\n            {\n                test: /\\.js$/,\n                loader: 'babel?presets=es2015',\n                exclude: /node_modules/\n            }\n        ]\n    }\n}\n```\n\nç°åœ¨å†è¿è¡Œæ„å»ºå‘½ä»¤ ï¼š 'webpack --display-modules --display-chunks --config build/webpack.config.js'\n\nsorryï¼Œä¸å‡ºæ„å¤–ï¼Œä½ åº”è¯¥å¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š\n\n![é”™è¯¯](http://7xlolm.com1.z0.glb.clouddn.com/20160325d.jpg)\n\nå®ƒè¯´æ²¡æœ‰å‘ç° './components/Favlist' æ¨¡å—ï¼Œè€Œæˆ‘ä»¬æ˜æ˜æœ‰ ./components/Favlist.vue æ–‡ä»¶ï¼Œä¸ºä»€ä¹ˆå®ƒæ²¡å‘ç°å‘¢ï¼Ÿå®ƒçäº†ï¼Ÿå…¶å®æ˜¯è¿™æ ·çš„ï¼Œå½“webpackè¯•å›¾å»åŠ è½½æ¨¡å—çš„æ—¶å€™ï¼Œå®ƒé»˜è®¤æ˜¯æŸ¥æ‰¾ä»¥ .js ç»“å°¾çš„æ–‡ä»¶çš„ï¼Œå®ƒå¹¶ä¸çŸ¥é“ .vue ç»“å°¾çš„æ–‡ä»¶æ˜¯ä»€ä¹ˆé¬¼ç©æ„å„¿ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å‘Šè¯‰webpackï¼Œé‡åˆ° .vue ç»“å°¾çš„ä¹Ÿè¦å»åŠ è½½ï¼Œæ·»åŠ  resolve é…ç½®é¡¹ï¼Œå¦‚ä¸‹ï¼š\n\n```\n// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require('path');\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, '../app/index/index.js'),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, '../output/static'),\n        publicPath: 'static/',\n        filename: '[name].[hash].js',\n        chunkFilename: '[id].[chunkhash].js'\n    },\n    resolve: {\n        extensions: ['', '.js', '.vue']\n    },\n    module: {\n        \n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: 'vue'   \n            },\n            {\n                test: /\\.js$/,\n                loader: 'babel?presets=es2015',\n                exclude: /node_modules/\n            }\n        ]\n    }\n}\n```\n\nè¿™æ ·ï¼Œå½“æˆ‘ä»¬å»åŠ è½½ './components/Favlist' è¿™æ ·çš„æ¨¡å—æ—¶ï¼Œwebpacké¦–å…ˆä¼šæŸ¥æ‰¾ ./components/Favlist.js å¦‚æœæ²¡æœ‰å‘ç°Favlist.jsæ–‡ä»¶å°±ä¼šç»§ç»­æŸ¥æ‰¾ Favlist.vue æ–‡ä»¶ï¼Œç°åœ¨å†æ¬¡è¿è¡Œæ„å»ºå‘½ä»¤ï¼Œæˆ‘ä»¬æˆåŠŸäº†ï¼Œè¿™æ—¶æˆ‘ä»¬ä¼šåœ¨æˆ‘ä»¬çš„è¾“å‡ºç›®å½•ä¸­çœ‹åˆ°ä¸€ä¸ªjsæ–‡ä»¶ï¼š\n\n![è¾“å‡º](http://7xlolm.com1.z0.glb.clouddn.com/20160325e.jpg)\n\nä¹‹æ‰€ä»¥ä¼šè¿™æ ·è¾“å‡ºï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„ webpack.config.js æ–‡ä»¶ä¸­çš„è¾“å‡ºé…ç½®ä¸­æŒ‡å®šäº†ç›¸åº”çš„è¾“å‡ºä¿¡æ¯ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¿®æ”¹ index.html ï¼Œå°†è¾“å‡ºçš„jsæ–‡ä»¶å¼•å…¥ï¼š\n\n```\n<!DOCTYPE html>\n<html lang=\"zh\">\n\t<head>\n\t\t<meta name=\"viewport\" content=\"width=device-width, height=device-height, initial-scale=1.0, user-scalable=no\">\n\t\t<meta charset=\"utf-8\">\n\t\t<title>é¦–é¡µ</title>\n\t</head>\n\t<body>\n\t\t<!-- vueçš„ç»„ä»¶ä»¥è‡ªå®šä¹‰æ ‡ç­¾çš„å½¢å¼ä½¿ç”¨ -->\n\t\t<favlist></favlist>\n\n\t\t<script src=\"../../output/static/main.ce853b65bcffc3b16328.js\"></script>\n\t</body>\n</html>\n```\n\nç„¶åç”¨æµè§ˆå™¨æ‰“å¼€è¿™ä¸ªé¡µé¢ï¼Œä½ å¯ä»¥çœ‹åˆ°ä½ å†™çš„ä»£ç æ­£ç¡®çš„æ‰§è¡Œäº†ã€‚\n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œéš¾é“æˆ‘ä»¬æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨çš„å¼•å…¥è¾“å‡ºçš„jsæ–‡ä»¶å—ï¼Ÿå› ä¸ºæ¯æ¬¡æ„å»ºè¾“å‡ºçš„jsæ–‡ä»¶éƒ½å¸¦æœ‰ hash å€¼ï¼Œå¦‚ main.ce853b65bcffc3b16328.jsï¼Œå°±ä¸èƒ½æ›´æ™ºèƒ½ä¸€ç‚¹å—ï¼Ÿæ¯æ¬¡éƒ½è‡ªåŠ¨å†™å…¥ï¼Ÿæ€ä¹ˆä¼šä¸å¯èƒ½ï¼Œå¦åˆ™è¿™ä¸œè¥¿è¿˜èƒ½ç«å—ï¼Œè¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨webpackçš„æ’ä»¶äº†ï¼Œ[html-webpack-plugin](https://www.npmjs.com/package/html-webpack-plugin)æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥åˆ›å»ºhtmlæ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å°†ä¾èµ–å†™å…¥htmlæ–‡ä»¶ä¸­ã€‚\n\né¦–å…ˆå®‰è£… html-webpack-plugin æ’ä»¶ï¼š\n\n```\nnpm install html-webpack-plugin --save-dev\n```\n\nç„¶ååœ¨ä¿®æ”¹é…ç½®é¡¹ï¼š\n\n```\n// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require('path');\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, '../app/index/index.js'),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, '../output/static'),\n        publicPath: 'static/',\n        filename: '[name].[hash].js',\n        chunkFilename: '[id].[chunkhash].js'\n    },\n    resolve: {\n        extensions: ['', '.js', '.vue']\n    },\n    module: {\n        \n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: 'vue'   \n            },\n            {\n                test: /\\.js$/,\n                loader: 'babel?presets=es2015',\n                exclude: /node_modules/\n            }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            filename: '../index.html',\n            template: path.resolve(__dirname, '../app/index/index.html'),\n            inject: true\n        })\n    ]\n}\n```\n\nç„¶åå†æ¬¡æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼ŒæˆåŠŸä¹‹åï¼Œçœ‹ä½ çš„è¾“å‡ºç›®å½•ï¼Œå¤šå‡ºæ¥ä¸€ä¸ªindex.htmlæ–‡ä»¶ï¼ŒåŒå‡»å®ƒï¼Œä»£ç æ­£ç¡®æ‰§è¡Œï¼Œä½ å¯ä»¥æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æŸ¥çœ‹ä¸€ä¸‹ï¼Œwebpackè‡ªåŠ¨å¸®æˆ‘ä»¬å¼•å…¥äº†ç›¸åº”çš„æ–‡ä»¶ã€‚\n\né—®é¢˜ç»§ç»­æ¥äº†ï¼Œéš¾é“æ¯æ¬¡æˆ‘ä»¬éƒ½è¦æ„å»ºä¹‹åæ‰èƒ½æŸ¥çœ‹è¿è¡Œçš„ä»£ç å—ï¼Ÿé‚£å²‚ä¸æ˜¯å¾ˆæ²¡æœ‰æ•ˆç‡ï¼Œåˆ«æ‹…å¿ƒï¼Œwebpackæä¾›äº†å‡ ç§æ–¹å¼ï¼Œè¿›è¡Œçƒ­åŠ è½½ï¼Œåœ¨å¼€å‘æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ç§æ–¹å¼æ¥æé«˜æ•ˆç‡ï¼Œè¿™é‡Œè¦ä»‹ç»çš„ï¼Œæ˜¯ä½¿ç”¨ [webpack-dev-middleware](https://www.npmjs.com/package/webpack-dev-middleware)ä¸­é—´ä»¶å’Œ[webpack-hot-middleware](https://www.npmjs.com/package/webpack-hot-middleware)ä¸­é—´ä»¶ï¼Œé¦–å…ˆå®‰è£…ä¸¤ä¸ªä¸­é—´ä»¶ï¼š\n\n```\nnpm install webpack-dev-middleware webpack-hot-middleware --save-dev\n```\n\nå¦å¤–ï¼Œè¿˜è¦å®‰è£…expressï¼Œè¿™æ˜¯ä¸€ä¸ªnodejsæ¡†æ¶\n\n```\nnpm install express --save-dev\n```\n\nåœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘å…ˆç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸¤ä¸ªä¸­é—´ä»¶ï¼Œä¹‹æ‰€ä»¥å«åšä¸­é—´ä»¶ï¼Œæ˜¯å› ä¸ºnodejsçš„ä¸€ä¸ªå«åšexpressçš„æ¡†æ¶ä¸­æœ‰ä¸­é—´ä»¶çš„æ¦‚å¿µï¼Œè€Œè¿™ä¸¤ä¸ªåŒ…è¦ä½œä¸ºexpressä¸­é—´ä»¶ä½¿ç”¨ï¼Œæ‰€ä»¥ç§°å®ƒä»¬ä¸ºä¸­é—´ä»¶ï¼Œé‚£ä¹ˆä»–ä»¬èƒ½å¹²ä»€ä¹ˆå‘¢ï¼Ÿ\n\n*<b>1ã€webpack-dev-middleware</b>*\n\næˆ‘ä»¬ä¹‹å‰æ‰€é¢ä¸´çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„ä»£ç æ”¹åŠ¨äº†ï¼Œæˆ‘ä»¬è¦æƒ³çœ‹åˆ°æµè§ˆå™¨çš„å˜åŒ–ï¼Œéœ€è¦å…ˆå¯¹é¡¹ç›®è¿›è¡Œæ„å»ºï¼Œç„¶åæ‰èƒ½æŸ¥çœ‹æ•ˆæœï¼Œè¿™æ ·å¯¹äºå¼€å‘æ•ˆç‡æ¥è®²ï¼Œç®€ç›´å°±æ˜¯ä¸å¯å¿å—çš„ä¸€ä»¶äº‹ï¼Œè¯•æƒ³æˆ‘ä»…ä»…ä¿®æ”¹ä¸€ä¸ªèƒŒæ™¯é¢œè‰²å°±è¦æ„å»ºä¸€ä¸‹é¡¹ç›®ï¼Œè¿™å°¼ç›å‘çˆ¹å•Šï¼Œå¥½åœ¨æœ‰[webpack-dev-middleware](https://www.npmjs.com/package/webpack-dev-middleware)ä¸­é—´ä»¶ï¼Œå®ƒæ˜¯å¯¹webpackä¸€ä¸ªç®€å•çš„åŒ…è£…ï¼Œå®ƒå¯ä»¥é€šè¿‡è¿æ¥æœåŠ¡å™¨æœåŠ¡é‚£äº›ä»webpackå‘å°„å‡ºæ¥çš„æ–‡ä»¶ï¼Œå®ƒæœ‰ä¸€ä¸‹å‡ ç‚¹å¥½å¤„ï¼š\n\n1ã€ä¸ä¼šå‘ç¡¬ç›˜å†™æ–‡ä»¶ï¼Œè€Œæ˜¯åœ¨å†…å­˜ä¸­ï¼Œæ³¨æ„æˆ‘ä»¬æ„å»ºé¡¹ç›®å®é™…å°±æ˜¯å‘ç¡¬ç›˜å†™æ–‡ä»¶ã€‚\n\n2ã€å½“æ–‡ä»¶æ”¹å˜çš„æ—¶å€™ï¼Œè¿™ä¸ªä¸­é—´ä»¶ä¸ä¼šå†æœåŠ¡æ—§çš„åŒ…ï¼Œä½ å¯ä»¥ç›´æ¥å¸…æ–°æµè§ˆå™¨å°±èƒ½çœ‹åˆ°æœ€æ–°çš„æ•ˆæœï¼Œè¿™æ ·ä½ å°±ä¸å¿…ç­‰å¾…æ„å»ºçš„æ—¶é—´ï¼Œæ‰€è§å³æ‰€å¾—ã€‚\n\nä¸‹é¢æˆ‘ä»¬åœ¨buildç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª dev-server.js çš„æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä¸€ä¸‹å†…å®¹ï¼š\n\n```\n// å¼•å…¥å¿…è¦çš„æ¨¡å—\nvar express = require('express')\nvar webpack = require('webpack')\nvar config = require('./webpack.config')\n\n// åˆ›å»ºä¸€ä¸ªexpresså®ä¾‹\nvar app = express()\n\n// è°ƒç”¨webpackå¹¶æŠŠé…ç½®ä¼ é€’è¿‡å»\nvar compiler = webpack(config)\n\n// ä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶\nvar devMiddleware = require('webpack-dev-middleware')(compiler, {\n    publicPath: config.output.publicPath,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(devMiddleware)\n\n// ç›‘å¬ 8888ç«¯å£ï¼Œå¼€å¯æœåŠ¡å™¨\napp.listen(8888, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log('Listening at http://localhost:8888')\n})\n```\n\næ­¤æ—¶ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¼€å¯æœåŠ¡ï¼š\n\n```\nnode build/dev-server.js\n```\n\nå¦‚æœçœ‹åˆ°ä¸‹å›¾æ‰€ç¤ºï¼Œè¯æ˜ä½ çš„æœåŠ¡æˆåŠŸå¼€å¯äº†ï¼š\n\n![å¼€å¯æœåŠ¡æˆåŠŸ](http://7xlolm.com1.z0.glb.clouddn.com/20160325f.jpg)\n\næ¥ä¸‹æ¥æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ï¼š\n\n```\nhttp://localhost:8888/app/index/index.html\n```\n\nå›è½¦ï¼Œå¦‚æœä¸å‡ºæ„å¤–ï¼Œä½ åº”è¯¥å¾—åˆ°ä¸€ä¸ª404ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![404](http://7xlolm.com1.z0.glb.clouddn.com/20160325g.jpg)\n\næˆ‘ä»¬è¦å¯¹æˆ‘ä»¬çš„ webpack.config.js é…ç½®æ–‡ä»¶åšä¸¤å¤„ä¿®æ”¹ï¼š\n\n1ã€å°† config.output.publicPath ä¿®æ”¹ä¸º '/'ï¼š\n\n```\noutput: {\n    // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n    path: path.resolve(__dirname, '../output/static'),\n    publicPath: '/',\n    filename: '[name].[hash].js',\n    chunkFilename: '[id].[chunkhash].js'\n},\n\n```\n\n2ã€å°† plugins ä¸­ HtmlWebpackPlugin ä¸­çš„ filename ä¿®æ”¹ä¸º 'app/index/index.html'\n\n```\nplugins: [\n    new HtmlWebpackPlugin({\n        filename: 'app/index/index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n]\n```\n\né‡å¯æœåŠ¡ï¼Œå†åˆ·æ–°é¡µé¢ï¼Œå¦‚æœçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œè¯æ˜ä½ æˆåŠŸäº†ï¼š\n\n![æˆåŠŸ](http://7xlolm.com1.z0.glb.clouddn.com/20160325h.jpg)\n\nä½†æ˜¯è¿™æ ·å¼€å‘æ¨¡å¼ä¸‹çš„ç¡®æ˜¯æˆåŠŸäº†ï¼Œå¯æ˜¯æˆ‘ä»¬ç›´æ¥ä¿®æ”¹äº† webpack.config.js æ–‡ä»¶ï¼Œè¿™å°±æ„å‘³ç€å½“æˆ‘ä»¬æ‰§è¡Œ æ„å»ºå‘½ä»¤ çš„æ—¶å€™ï¼Œé…ç½®å˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ„å»ºä¹Ÿè·Ÿç€å˜äº†ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªå¥½çš„æ–¹å¼æ˜¯ï¼Œä¸å»ä¿®æ”¹webpack.config.jsæ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨buildç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª webpack.dev.conf.jsæ–‡ä»¶ï¼Œæ„æ€æ˜¯å¼€å‘æ¨¡å¼ä¸‹è¦è¯»å–çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä¸€ä¸‹å†…å®¹ï¼š\n\n```\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\nvar path = require('path');\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require('./webpack.config');\n\nconfig.output.publicPath = '/';\n\nconfig.plugins = [\n    new HtmlWebpackPlugin({\n        filename: 'app/index/index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n];\n\nmodule.exports = config;\n```\n\nè¿™æ ·ï¼Œæˆ‘ä»¬åœ¨devç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶ä¸­è¦†ç›–äº†åŸºæœ¬é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨dev-server.jsä¸­å°† \n\n```\nvar config = require('./webpack.config')\n```\n\nä¿®æ”¹ä¸ºï¼š\n\n```\nvar config = require('./webpack.dev.conf')\n```\n\nå³å¯ï¼Œç„¶åï¼Œé‡å¯æœåŠ¡ï¼Œåˆ·æ–°æµè§ˆå™¨ï¼Œä½ åº”è¯¥å¾—åˆ°åŒæ ·çš„æˆåŠŸç»“æœï¼Œè€Œè¿™ä¸€æ¬¡å½“æˆ‘ä»¬æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š\n\n```\nwebpack --display-modules --display-chunks --config build/webpack.config.js\n```\n\nå¹¶ä¸ä¼šå½±å“æ„å»ºè¾“å‡ºï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ç›´æ¥ä¿®æ”¹webpack.config.jsæ–‡ä»¶ã€‚\n\nç°åœ¨æˆ‘ä»¬å·²ç»ä½¿ç”¨ webpack-dev-middleware æ­å»ºåŸºæœ¬çš„å¼€å‘ç¯å¢ƒäº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸æ»¡è¶³ï¼Œå› ä¸ºæˆ‘ä»¬æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨å»åˆ·æ–°æµè§ˆå™¨ï¼Œæ‰€è°“çš„çƒ­åŠ è½½ï¼Œæ„æ€å°±æ˜¯è¯´èƒ½å¤Ÿè¿½è¸ªæˆ‘ä»¬ä»£ç çš„å˜åŒ–ï¼Œå¹¶è‡ªåŠ¨æ›´æ–°ç•Œé¢ï¼Œç”šè‡³è¿˜èƒ½ä¿ç•™ç¨‹åºçŠ¶æ€ã€‚è¦å®Œæˆçƒ­åŠ è½½ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨å¦å¤–ä¸€ä¸ªä¸­é—´ä»¶ *webpack-hot-middleware*\n\n\n*<b>2ã€webpack-hot-middleware</b>*\n\n[webpack-hot-middleware](https://www.npmjs.com/package/webpack-hot-middleware) åªé…åˆ webpack-dev-middleware ä½¿ç”¨ï¼Œå®ƒèƒ½ç»™ä½ æä¾›çƒ­åŠ è½½ã€‚\n\nå®ƒçš„ä½¿ç”¨å¾ˆç®€å•ï¼Œæ€»å…±åˆ†4æ­¥ï¼š\n\n1ã€å®‰è£…ï¼Œæˆ‘ä»¬ä¸Šé¢å·²ç»å®‰è£…è¿‡äº†\n2ã€åœ¨ webpack.dev.conf.js é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸‰ä¸ªæ’ä»¶ï¼Œå¦‚ä¸‹ï¼š\n\n```\n\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\nvar path = require('path');\nvar webpack = require('webpack');\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require('./webpack.config');\n\nconfig.output.publicPath = '/';\n\nconfig.plugins = [\n    // æ·»åŠ ä¸‰ä¸ªæ’ä»¶\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin(),\n\n    new HtmlWebpackPlugin({\n        filename: 'app/index/index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n];\n\nmodule.exports = config;\n```\n\n3ã€åœ¨ webpack.config.js æ–‡ä»¶ä¸­å…¥å£é…ç½®ä¸­æ·»åŠ  'webpack-hot-middleware/client'ï¼Œå¦‚ä¸‹ï¼š\n\n```\nentry: ['webpack-hot-middleware/client', path.resolve(__dirname, '../app/index/index.js')],\n```\n\n4ã€åœ¨ dev-server.js æ–‡ä»¶ä¸­ä½¿ç”¨æ’ä»¶\n\n```\n// å¼•å…¥å¿…è¦çš„æ¨¡å—\nvar express = require('express')\nvar webpack = require('webpack')\nvar config = require('./webpack.dev.conf')\n\n// åˆ›å»ºä¸€ä¸ªexpresså®ä¾‹\nvar app = express()\n\n// è°ƒç”¨webpackå¹¶æŠŠé…ç½®ä¼ é€’è¿‡å»\nvar compiler = webpack(config)\n\n// ä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶\nvar devMiddleware = require('webpack-dev-middleware')(compiler, {\n    publicPath: config.output.publicPath,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\n// ä½¿ç”¨ webpack-hot-middleware ä¸­é—´ä»¶\nvar hotMiddleware = require('webpack-hot-middleware')(compiler)\n\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(devMiddleware)\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(hotMiddleware)\n\n// ç›‘å¬ 8888ç«¯å£ï¼Œå¼€å¯æœåŠ¡å™¨\napp.listen(8888, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log('Listening at http://localhost:8888')\n})\n\n```\n\nokï¼Œç°åœ¨é‡å¯çš„æœåŠ¡ï¼Œç„¶åä¿®æ”¹ Favlist.vue ä¸­çš„é¡µé¢èƒŒæ™¯é¢œè‰²ä¸º '#000'ï¼š\n\n```\n<style>\n    html{\n        background: #000;\n    }\n</style>\n\n```\n\nç„¶åæŸ¥çœ‹ä½ çš„æµè§ˆå™¨ï¼Œæ˜¯ä¸æ˜¯ä½ è¿˜æ²¡æœ‰åˆ·æ–°å°±å·²ç»å¾—å¸¦æ”¹å˜äº†ï¼Ÿ\n\né‚£ä¹ˆè¿™æ ·å°±å®Œç¾äº†å—ï¼Ÿè¿˜æ²¡æœ‰ï¼Œå¦‚æœä½ ç»†å¿ƒï¼Œä½ ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬ä¸Šé¢åœ¨ç¬¬2æ­¥ä¸­ä¿®æ”¹äº† webpack.config.js è¿™ä¸ªåŸºæœ¬é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹äº†å…¥å£é…ç½®ï¼Œå¦‚ä¸‹ï¼š\n\n```\nentry: ['webpack-hot-middleware/client', path.resolve(__dirname, '../app/index/index.js')],\n```\n\nè¿™ä¹Ÿä¼šå¯¼è‡´æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„é—®é¢˜ï¼Œå°±æ˜¯ä¼šå½±å“æ„å»ºï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸è¦ç›´æ¥ä¿®æ”¹ webpack.config.js æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯åœ¨ webpack.dev.conf.js æ–‡ä»¶ä¸­é…ç½®ï¼Œå¦‚ä¸‹ï¼š\n\n```\n\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\nvar path = require('path');\nvar webpack = require('webpack');\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require('./webpack.config');\n\nconfig.output.publicPath = '/';\n\nconfig.plugins = [\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin(),\n    new HtmlWebpackPlugin({\n        filename: 'app/index/index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n];\n\n// åŠ¨æ€å‘å…¥å£é…ç½®ä¸­æ³¨å…¥ webpack-hot-middleware/client\nvar devClient = 'webpack-hot-middleware/client';\nObject.keys(config.entry).forEach(function (name, i) {\n    var extras = [devClient]\n    config.entry[name] = extras.concat(config.entry[name])\n})\n\nmodule.exports = config;\n```\n\nä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯è¦è®² webpack.config.js æ–‡ä»¶ä¸­çš„å…¥å£é…ç½®ä¿®æ”¹ä¸ºå¤šå…¥å£é…ç½®çš„æ–¹å¼ï¼Œè¿™ä¸ªä¿®æ”¹ä¸ä¼šå½±å“æ„å»ºï¼Œæ‰€ä»¥æ— æ‰€è°“ï¼š\n\n```\nentry: {\n    index: path.resolve(__dirname, '../app/index/index.js')\n},\n```\n\né‡å¯ä½ çš„æœåŠ¡ï¼Œåˆ·æ–°ä¸€ä¸‹æµè§ˆå™¨ï¼Œç„¶åä¿®æ”¹ Favlist.vue ä¸­çš„èƒŒæ™¯è‰²ä¸º greenï¼š\n\n```\n<style>\n    html{\n        background: green;\n    }\n</style>\n```\n\nå†æ¬¡æŸ¥çœ‹æµè§ˆå™¨ï¼Œå‘ç°å¯ä»¥çƒ­åŠ è½½ã€‚ä½†æ˜¯è¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿè¿˜æ²¡æœ‰ï¼Œä¸ä¿¡ä½ ä¿®æ”¹ index.html æ–‡ä»¶ï¼Œçœ‹çœ‹ä¼šä¸ä¼šçƒ­åŠ è½½ï¼Œå®é™…ä¸Šä¸ä¼šï¼Œä½ è¿˜æ˜¯éœ€è¦æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œä¸ºäº†èƒ½å¤Ÿå½“ index.html æ–‡ä»¶çš„æ”¹åŠ¨ä¹Ÿèƒ½å¤Ÿè§¦å‘è‡ªåŠ¨åˆ·æ–°ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›å·¥ä½œã€‚\n\n*<b>ç¬¬ä¸€æ­¥ï¼šåœ¨ dev-server.js æ–‡ä»¶ä¸­ç›‘å¬htmlæ–‡ä»¶æ”¹å˜äº‹ä»¶ï¼Œä¿®æ”¹åçš„ dev-server.js æ–‡ä»¶å¦‚ä¸‹ï¼š</b>*\n\n```\n// å¼•å…¥å¿…è¦çš„æ¨¡å—\nvar express = require('express')\nvar webpack = require('webpack')\nvar config = require('./webpack.dev.conf')\n\n// åˆ›å»ºä¸€ä¸ªexpresså®ä¾‹\nvar app = express()\n\n// è°ƒç”¨webpackå¹¶æŠŠé…ç½®ä¼ é€’è¿‡å»\nvar compiler = webpack(config)\n\n// ä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶\nvar devMiddleware = require('webpack-dev-middleware')(compiler, {\n    publicPath: config.output.publicPath,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\nvar hotMiddleware = require('webpack-hot-middleware')(compiler)\n\n// webpackæ’ä»¶ï¼Œç›‘å¬htmlæ–‡ä»¶æ”¹å˜äº‹ä»¶\ncompiler.plugin('compilation', function (compilation) {\n    compilation.plugin('html-webpack-plugin-after-emit', function (data, cb) {\n        // å‘å¸ƒäº‹ä»¶\n        hotMiddleware.publish({ action: 'reload' })\n        cb()\n    })\n})\n\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(devMiddleware)\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(hotMiddleware)\n\n// ç›‘å¬ 8888ç«¯å£ï¼Œå¼€å¯æœåŠ¡å™¨\napp.listen(8888, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log('Listening at http://localhost:8888')\n})\n\n```\n\nä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¢åŠ äº†å¦‚ä¸‹ä»£ç ï¼š\n\n```\n// webpackæ’ä»¶ï¼Œç›‘å¬htmlæ–‡ä»¶æ”¹å˜äº‹ä»¶\ncompiler.plugin('compilation', function (compilation) {\n    compilation.plugin('html-webpack-plugin-after-emit', function (data, cb) {\n        // å‘å¸ƒäº‹ä»¶\n        hotMiddleware.publish({ action: 'reload' })\n        cb()\n    })\n})\n```\n\nè¿™æ®µä»£ç å¯èƒ½ä½ çœ‹ä¸æ‡‚ï¼Œå› ä¸ºè¿™æ¶‰åŠåˆ°webpackæ’ä»¶çš„ç¼–å†™ï¼Œè¯»è€…å¯ä»¥å‚é˜…ä¸‹é¢çš„è¿æ¥ï¼š\n\n[webpack æ’ä»¶doc1](https://github.com/webpack/docs/wiki/plugins)\n\n[webpack æ’ä»¶doc2](https://github.com/webpack/docs/wiki/How-to-write-a-plugin)\n\nåœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬ç›‘å¬äº† 'html-webpack-plugin-after-emit' äº‹ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹ä»¶æ˜¯ä»å“ªé‡Œå‘å°„çš„å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡åå­—å¯çŸ¥ï¼Œè¿™ä¸ªäº‹ä»¶åº”è¯¥å’Œhtml-webpack-pluginè¿™ä¸ªæ’ä»¶æœ‰å…³ï¼Œåœ¨npmæœç´¢ [html-webpack-plugin](https://www.npmjs.com/package/html-webpack-plugin) æ’ä»¶ï¼Œåœ¨é¡µé¢æœ€åº•éƒ¨æˆ‘ä»¬å¯ä»¥å‘ç°å¦‚ä¸‹å›¾ï¼š\n\n![html-webpack-pluginå¯ä»¥å‘å°„äº‹ä»¶](http://7xlolm.com1.z0.glb.clouddn.com/20160325i.jpg)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œhtml-webpack-plugin è¿™ä¸ªæ’ä»¶çš„ç¡®æä¾›äº†å‡ ä¸ªå¯é€‰çš„äº‹ä»¶ï¼Œä¸‹é¢ä¹Ÿæä¾›äº†ä½¿ç”¨æ–¹æ³•ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿç›‘å¬åˆ°htmlæ–‡ä»¶çš„å˜åŒ–ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„ä»£ç å‘å¸ƒä¸€ä¸ªäº‹ä»¶ï¼š\n\n```\nhotMiddleware.publish({ action: 'reload' })\n```\n\n*<b>ç¬¬äºŒæ­¥ï¼šä¿®æ”¹ webpack.dev.conf.js æ–‡ä»¶å¦‚ä¸‹ï¼š</b>*\n\n```\n\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\nvar path = require('path');\nvar webpack = require('webpack');\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require('./webpack.config');\n\nconfig.output.publicPath = '/';\n\nconfig.plugins = [\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin(),\n    new HtmlWebpackPlugin({\n        filename: 'app/index/index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n];\n\n// var devClient = 'webpack-hot-middleware/client';\nvar devClient = './build/dev-client';\nObject.keys(config.entry).forEach(function (name, i) {\n    var extras = [devClient]\n    config.entry[name] = extras.concat(config.entry[name])\n})\n\nmodule.exports = config;\n```\n\næˆ‘ä»¬ä¿®æ”¹äº†devClientå˜é‡ï¼Œå°† 'webpack-hot-middleware/client' æ›¿æ¢æˆ './build/dev-client'ï¼Œæœ€ç»ˆä¼šå¯¼è‡´ï¼Œæˆ‘ä»¬å…¥å£é…ç½®ä¼šå˜æˆä¸‹é¢è¿™æ ·ï¼š\n\n```\nentry: {\n    index: [\n        './build/dev-client',\n        path.resolve(__dirname, '../app/index/index.js')\n    ]\n},\n```\n\n*<b>ç¬¬ä¸‰æ­¥ï¼šæ–°å»º build/dev-client.js æ–‡ä»¶ï¼Œå¹¶ç¼–è¾‘å¦‚ä¸‹å†…å®¹ï¼š</b>*\n\n```\nvar hotClient = require('webpack-hot-middleware/client')\n\n// è®¢é˜…äº‹ä»¶ï¼Œå½“ event.action === 'reload' æ—¶æ‰§è¡Œé¡µé¢åˆ·æ–°\nhotClient.subscribe(function (event) {\n    if (event.action === 'reload') {\n        window.location.reload()\n    }\n})\n\n```\n\nè¿™é‡Œæˆ‘ä»¬é™¤äº†å¼•å…¥ 'webpack-hot-middleware/client' ä¹‹å¤–è®¢é˜…äº†ä¸€ä¸ªäº‹ä»¶ï¼Œå½“ event.action === 'reload' æ—¶è§¦å‘ï¼Œè¿˜è®°å¾—æˆ‘ä»¬åœ¨ dev-server.js ä¸­å‘å¸ƒçš„äº‹ä»¶å—ï¼š\n\n```\nhotMiddleware.publish({ action: 'reload' })\n```\n\nè¿™æ ·ï¼Œå½“æˆ‘ä»¬çš„htmlæ–‡ä»¶æ”¹å˜åï¼Œå°±å¯ä»¥ç›‘å¬çš„åˆ°ï¼Œæœ€ç»ˆä¼šæ‰§è¡Œé¡µé¢åˆ·æ–°ï¼Œè€Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åˆ·æ–°ï¼Œç°åœ¨é‡å¯æœåŠ¡ï¼Œå»å°è¯•èƒ½å¦å¯¹htmlæ–‡ä»¶çƒ­åŠ è½½å§ã€‚ç­”æ¡ˆæ˜¯yesã€‚\nå¥½äº†ï¼Œå¼€å‘ç¯å¢ƒç»ˆäºæå®šäº†ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥è°ˆä¸€è°ˆç”Ÿäº§ç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯æ„å»ºè¾“å‡ºï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ‰§è¡Œä¸€ä¸‹æ„å»ºå‘½ä»¤ï¼Œçœ‹çœ‹è¾“å‡ºçš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Œä¸ºäº†ä¸å¿…æ¯æ¬¡éƒ½è¦è¾“å…¥ä¸‹é¢è¿™æ¡é•¿å‘½ä»¤ï¼š\n\n```\nwebpack --display-modules --display-chunks --config build/webpack.config.js\n```\n\næˆ‘ä»¬åœ¨ package.js æ–‡ä»¶ä¸­æ·»åŠ  \"scripts\" é¡¹ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![npm](http://7xlolm.com1.z0.glb.clouddn.com/20160325m.jpg)\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ‰§è¡Œä¸‹é¢å‘½ä»¤æ¥è¿›è¡Œæ„å»ºï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜å¢åŠ äº†ä¸€æ¡å¼€å¯å¼€å‘æœåŠ¡å™¨çš„å‘½ä»¤ï¼š\n\n```\n// æ„å»º\nnpm run build\n// å¼€å¯å¼€å‘æœåŠ¡å™¨\nnpm run dev\n```\n\nå›è¿‡å¤´æ¥ï¼Œæˆ‘ä»¬æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š npm run buildï¼ŒæŸ¥çœ‹è¾“å‡ºå†…å®¹ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![è¾“å‡ºå†…å®¹](http://7xlolm.com1.z0.glb.clouddn.com/20160325n.jpg)\n\nç°åœ¨æˆ‘ä»¬åªæœ‰ä¸€ä¸ªjsæ–‡ä»¶è¾“å‡ºäº†ï¼Œå¹¶æ²¡æœ‰cssæ–‡ä»¶è¾“å‡ºï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬å¸Œæœ›cssæ–‡ä»¶ç”Ÿæˆå•ç‹¬çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨ extract-text-webpack-plugin æ’ä»¶ï¼Œå®‰è£…ï¼š\n\n```\nnpm install extract-text-webpack-plugin --save-dev\n```\n\nç„¶ååœ¨buildç›®å½•ä¸‹æ–°å»º webpack.prod.conf.js æ–‡ä»¶ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªä½¿æˆ‘ä»¬åŒºåˆ«äºå¼€å‘ç¯å¢ƒï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œå¹¶ç¼–è¾‘ä¸€ä¸‹å†…å®¹ï¼š\n\n```\n\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\nvar ExtractTextPlugin = require('extract-text-webpack-plugin')\nvar path = require('path');\nvar webpack = require('webpack');\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require('./webpack.config');\n\nconfig.vue = {\n    loaders: {\n        css: ExtractTextPlugin.extract(\"css\")\n    }\n};\n\nconfig.plugins = [\n    // æå–cssä¸ºå•æ–‡ä»¶\n    new ExtractTextPlugin(\"../[name].[contenthash].css\"),\n\n    new HtmlWebpackPlugin({\n        filename: '../index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n];\n\nmodule.exports = config;\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¦†ç›–äº† webpack.config.js é…ç½®æ–‡ä»¶çš„ config.plugins é¡¹ï¼Œå¹¶ä¸”æ·»åŠ äº† config.vue é¡¹ï¼Œè¡¥è¡€è¯çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå°±æ˜¯è¿™ä¹ˆç”¨çš„ï¼Œå¦‚æœä¸€å®šè¦çŸ¥é“ä¸ºä»€ä¹ˆä¹Ÿå¯ä»¥ï¼Œè¿™éœ€è¦ä½ å¤šå»äº†è§£vueä»¥åŠvue-loaderçš„å·¥ä½œåŸç†ï¼Œè¿™é‡Œæœ‰è¿æ¥[ç‚¹å‡»è¿™é‡Œ](http://vuejs.github.io/vue-loader/configurations/extract-css.html)\nç„¶åä¿®æ”¹ package.json æ–‡ä»¶ä¸­çš„ script é¡¹ä¸ºå¦‚ä¸‹ï¼š\n\n```\n\"scripts\": {\n    \"build\": \"webpack --display-modules --display-chunks --config build/webpack.prod.conf.js\",\n    \"dev\": \"node ./build/dev-server.js\"\n},\n```\n\næˆ‘ä»¬ä½¿ç”¨ webpack.prod.conf.js ä¸ºé…ç½®å»æ„å»ºï¼Œæ¥ä¸‹æ¥æ‰§è¡Œï¼š\n\n```\nnpm run build\n```\n\næŸ¥çœ‹ä½ çš„è¾“å‡ºå†…å®¹ï¼Œå¦‚ä¸‹å›¾ï¼Œcssæ–‡ä»¶æœªæå–å‡ºæ¥äº†ï¼š\n\n![cssæ–‡ä»¶è¢«æå–](http://7xlolm.com1.z0.glb.clouddn.com/20160325l.jpg)\n\nå¦å¤–æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å¦‚ä¸‹æ’ä»¶åœ¨æˆ‘ä»¬çš„ webpack.prod.conf.js æ–‡ä»¶ä¸­ï¼Œä½œä¸ºç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼š\n\n```\nconfig.plugins = [\n    new webpack.DefinePlugin({\n        'process.env': {\n            NODE_ENV: '\"production\"'\n        }\n    }),\n    // å‹ç¼©ä»£ç \n    new webpack.optimize.UglifyJsPlugin({\n        compress: {\n            warnings: false\n        }\n    }),\n    new webpack.optimize.OccurenceOrderPlugin(),\n    // æå–cssä¸ºå•æ–‡ä»¶\n    new ExtractTextPlugin(\"../[name].[contenthash].css\"),\n    new HtmlWebpackPlugin({\n        filename: '../index.html',\n        template: path.resolve(__dirname, '../app/index/index.html'),\n        inject: true\n    })\n];\n```\n\nå¤§å®¶å¯ä»¥æœç´¢è¿™äº›æ’ä»¶ï¼Œäº†è§£ä»–çš„ä½œç”¨ï¼Œè¿™ç¯‡æ–‡ç« è¦ä»‹ç»çš„å¤ªå¤šï¼Œæ‰€ä»¥æˆ‘ä¸€ä¸€è®²è§£äº†ã€‚\n\nåˆ°è¿™é‡Œå®é™…ä¸Šæ­å»ºçš„å·²ç»å·®ä¸å¤šäº†ï¼Œå”¯ä¸€è¦åšçš„å°±æ˜¯å®Œå–„ï¼Œæ¯”å¦‚å…¬å…±æ¨¡å—çš„æå–ï¼Œå¦‚ä½•åŠ è½½å›¾ç‰‡ï¼Œå¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•æå–å…¬å…±æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ CommonsChunkPlugin æ’ä»¶ï¼Œåœ¨ webpack.prod.conf.js æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹æ’ä»¶ï¼š\n\n```\nnew webpack.optimize.CommonsChunkPlugin({\n    name: 'vendors',\n    filename: 'vendors.js',\n}),\n```\n\nç„¶ååœ¨ webpack.config.js æ–‡ä»¶ä¸­é…ç½®å…¥å£æ–‡ä»¶ï¼š\n\n```\nentry: {\n    index: path.resolve(__dirname, '../app/index/index.js'),\n    vendors: [\n        'Vue'\n    ]\n},\n```\n\nä¸Šé¢ä»£ç çš„æ„æ€æ˜¯ï¼Œæˆ‘ä»¬æŠŠVue.jså½“åšå…¬å…±æ¨¡å—å•ç‹¬æ‰“åŒ…ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªæ•°ç»„ä¸­å¢åŠ å…¶ä»–æ¨¡å—ï¼Œä¸€èµ·ä½œä¸ºå…¬å…±æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼Œç„¶åæŸ¥çœ‹è¾“å‡ºï¼Œå¦‚ä¸‹å›¾ï¼ŒæˆåŠŸæå–ï¼š\n\n![æå–å…¬å…±æ¨¡å—](http://7xlolm.com1.z0.glb.clouddn.com/20160325u.jpg)\n\nå¯¹äºåŠ è½½å›¾ç‰‡çš„é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œwebpackçš„å“²å­¦æ˜¯ä¸€åˆ‡çš†æ˜¯æ¨¡å—ï¼Œç„¶åé€šè¿‡ç›¸åº”çš„loaderå»åŠ è½½ï¼Œæ‰€ä»¥åŠ è½½å›¾ç‰‡ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ° url-loaderï¼Œåœ¨webpack.config.js æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªloaderé…ç½®ï¼š\n\n```\nloaders: [\n    // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n    {\n        test: /\\.vue$/, \n        loader: 'vue'   \n    },\n    {\n        test: /\\.js$/,\n        loader: 'babel?presets=es2015',\n        exclude: /node_modules/\n    },\n    // åŠ è½½å›¾ç‰‡\n    {\n        test: /\\.(png|jpg|gif|svg)$/,\n        loader: 'url',\n        query: {\n            limit: 10000,\n            name: '[name].[ext]?[hash:7]'\n        }\n    }\n]\n```\n\nè¿™æ ·ï¼Œå½“æˆ‘ä»¬çš„cssæ ·å¼è¡¨æ–‡ä»¶ä¸­ä½¿ç”¨ url(xxxx.png)æˆ–è€…jsä¸­å»require('xxxx.png')çš„æ—¶å€™ï¼Œwebpackå°±çŸ¥é“å¦‚ä½•å¤„ç†ï¼Œå¦å¤–url-loaderçš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œä»¥ä¸Šé¢çš„é…ç½®æ¥è¯´ï¼Œå½“æˆ‘ä»¬çš„å›¾ç‰‡å¤§å°å°äº10000å­—èŠ‚çš„æ—¶å€™ï¼Œwebpackä¼šæŠŠå›¾ç‰‡è½¬æ¢æˆbase64æ ¼å¼æ’å…¥åˆ°ä»£ç ä¸­ï¼Œä»è€Œå‡å°‘httpè¯·æ±‚ï¼Œå¦å¤–ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œè°ˆåˆ°çš„ä»»ä½•ä¸€ä¸ªloaderéƒ½å¯ä»¥åœ¨npmä¸­æŸ¥æ‰¾åˆ°ï¼Œè¯»è€…å¯ä»¥æŸ¥è¯¢æ›´å¤šçš„loaderäº†è§£å¹¶ä½¿ç”¨ã€‚\n\n\n\n\n","slug":"åŸºäºwebpackå’Œvue.jsæ­å»ºçš„H5ç«¯æ¡†æ¶(å…¶å®ä¸»è¦ç”¨äºHybridå¼€å‘H5ç«¯æ¡†æ¶ï¼Œä½†æ˜¯ä¾ç„¶èƒ½å¤Ÿä½œä¸ºçº¯webç«¯ä½¿ç”¨)","published":1,"updated":"2016-06-06T03:38:56.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx521001847fyy3f49pii","content":"<p>äººç±»çš„å‘å±•å¾—ç›Šäºå¯¹è¿½æ±‚ä¸æ–­çš„æå‡ï¼Œåœ¨èƒ½æ´»ç€çš„åŸºç¡€ä¸Šæ˜¯å¦è¦æ´»å¾—æ½‡æ´’ä¸€ç‚¹ï¼ŒæŠ€æœ¯çš„å‘å±•äº¦å¦‚æ˜¯ã€‚åœ¨å…¬å¸ä½œä¸ºä¸€ä¸ªæœ€æœ€æœ€æœ€æœ€æœ€æœ€åº•å±‚çš„æ¬ç –ç å†œï¼Œç»å†äº†ä¸¤ä¸ªç‰ˆæœ¬çš„é“¸(zhe)ç‚¼(mo)ä¹‹åï¼Œæˆ‘ç—›ä¸‹å†³å¿ƒä»Šåä¸€å®šè¦ï¼šâ€¦â€¦â€¦â€¦..ä¸€å®šè¦å’Œäº§å“æƒº(shi)æƒº(bu)ç›¸(liang)æƒœ(li)ã€‚</p>\n<a id=\"more\"></a>\n<h1 id=\"å¼€å§‹ä¹‹å‰\"><a href=\"#å¼€å§‹ä¹‹å‰\" class=\"headerlink\" title=\"å¼€å§‹ä¹‹å‰\"></a>å¼€å§‹ä¹‹å‰</h1><p>æœ¬æ–‡åŒ…å«ä»¥ä¸‹æŠ€æœ¯ï¼Œæ–‡ä¸­å°½é‡ç»™ä¸è¯¦ç»†çš„æè¿°ï¼Œå¹¶ä¸”é™„ä¸Šå‚è€ƒé“¾æ¥ï¼Œè¯»è€…å¯ä»¥æ·±å…¥å­¦ä¹ ï¼š</p>\n<p>1ã€<a href=\"http://webpack.github.io/\" target=\"_blank\" rel=\"external\">webpack</a><br>2ã€<a href=\"http://cn.vuejs.org/\" target=\"_blank\" rel=\"external\">Vue.js</a><br>3ã€<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"external\">npm</a><br>4ã€nodejs â€”- è¿™ä¸ªå°±ä¸ç»™è¿æ¥äº†ï¼Œå› ä¸ºä¸Šé¢çš„è¿æ¥éƒ½æ˜¯åœ¨ä½ å®è·µçš„è¿‡ç¨‹ä¸­è¦å»ä¸æ–­è®¿é—®çš„<br>5ã€<a href=\"http://es6.ruanyifeng.com/#README\" target=\"_blank\" rel=\"external\">ES6è¯­æ³•</a></p>\n<p>å¦å¤–ï¼Œè¿™å¥—æ•™ç¨‹çš„ä»£ç éƒ½åœ¨æˆ‘çš„githubä¸Šï¼Œè¯»è€…å¯ä»¥å¯¹ç…§ç€ä»£ç æ¥çœ‹ï¼Œä¸è¿‡è¿˜æ˜¯å¸Œæœ›å¤§å®¶è‡ªå·±äº²æ‰‹æ­å»ºï¼Œä½“éªŒè¿™ä¸ªè¿‡ç¨‹ï¼Œgitåœ°å€ï¼š</p>\n<p><a href=\"https://github.com/HcySunYang/h5_frame\" target=\"_blank\" rel=\"external\">gitåœ°å€</a></p>\n<h1 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h1><p>åœ¨å¯¹ç€äº§å“é«˜ä¸¾ä¸­æŒ‡æ€’å‘å¿ƒä¸­ä¹‹æ„¤åï¼ŒçœŸæ­£èƒ½å¤Ÿè§£å†³é—®é¢˜çš„æ˜¯è‡ªèº«ä¸Šçš„æ”¹å˜ï¼Œæœ‰å¥è¯è¯´çš„å¥½ï¼šä½ è™½ç„¶æ”¹å˜ä¸äº†å…¨ä¸–ç•Œï¼Œä½†æ˜¯ä½ æœ‰æœºä¼šæ”¹å˜ä½ è‡ªå·±ã€‚ç§‰æ‰¿ç€â€œä¸å¬è€äººè¨€ï¼Œåƒäºåœ¨çœ¼å‰â€çš„ä¼˜è‰¯ä½œé£ï¼Œæˆ‘è¿˜æ˜¯å†³å®šç©ç«è‡ªç„šã€‚</p>\n<h3 id=\"é—®é¢˜æ‰€åœ¨\"><a href=\"#é—®é¢˜æ‰€åœ¨\" class=\"headerlink\" title=\"é—®é¢˜æ‰€åœ¨\"></a>é—®é¢˜æ‰€åœ¨</h3><p>ä¹‹å‰çš„é¡¹ç›®æ€»ç»“ä¸ºä»¥ä¸‹å†…å®¹ï¼š</p>\n<blockquote>\n<p>1ã€AMDæ¨¡å—è§„èŒƒå¼€å‘ï¼Œä½¿ç”¨requirejså®ç°ï¼Œä½¿ç”¨rjsæ‰“åŒ…ï¼Œæœ€ç»ˆå¯¼è‡´çš„ç»“æœæ˜¯ï¼Œè¾“å‡ºçš„é¡¹ç›®è‡ƒè‚¿ï¼Œè‚¿çš„å°±åƒä¸€å¨ç‹—ä¸ç†â€¦â€¦ä¸å¿ç›´è§†<br>2ã€ä½¿ç”¨gulpè¿›è¡Œæ‰“åŒ…ï¼Œè¿™ä¸€ç‚¹è²Œä¼¼æ²¡æœ‰å¯åæ§½çš„åœ°æ–¹ï¼Œæ¯•ç«Ÿéƒ½æ˜¯è¢«gruntæŠ˜ç£¨è¿‡æ¥çš„â€¦â€¦<br>3ã€æ•°æ®çš„æ¸²æŸ“ä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼Œè¿™å°±æ„å‘³ç€ä½ è¦æ‰‹åŠ¨ç®¡ç†DOMï¼Œè¿™æ ·ï¼Œä½ çš„ä¸šåŠ¡ä»£ç å‚æ‚ç€ä½ çš„æ•°æ®å¤„ç†ã€DOMç®¡ç†ï¼Œæ»¡å±å¹•çš„æ¯›çº¿â€¦â€¦<br>4ã€æ¨¡å—åŒ–ä¸è¶³ï¼Œè™½ç„¶ä½¿ç”¨requireè¿›è¡Œäº†æ¨¡å—ç®¡ç†ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘è¿˜æ˜¯å……æ–¥åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œè¿™ä¸æœ€è¿‘æµè¡Œçš„ç»„ä»¶åŒ–æ¦‚å¿µå†°ç«ä¸å®¹ï¼Œæ‹’ç»è½åâ€¦â€¦<br>5ã€è¯¸å¦‚ æ‰©å±•æ€§ ã€ ç»´æŠ¤æ€§ æˆ‘æƒ³æ—©å·²ä¸è¨€è€Œå–»ï¼Œä¸éœ€èµ˜è¿°ï¼Œå†è¿°å°±çœŸTMæ˜¯ç´¯èµ˜äº†ã€‚</p>\n</blockquote>\n<p>æ–°æ¡†æ¶è¦è§£å†³çš„é—®é¢˜ï¼š</p>\n<blockquote>\n<p>1ã€è¦ä½¿æ„å»ºè¾“å‡ºçš„é¡¹ç›®åƒä½ é‚»å®¶å°å¦¹å¦¹ä¸€æ ·ã€ç˜¦çš„çš®åŒ…éª¨ã€‚ï¼ˆä¹Ÿè®¸æ˜¯è¥å…»ä¸è‰¯ï¼‰<br>2ã€è¦å®ç°çœŸæ­£çš„æ¨¡å—åŒ–ã€ç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼ï¼ŒçœŸæ­£å»è§£å†³ç»´æŠ¤éš¾ã€æ‰©å±•éš¾çš„é—®é¢˜ã€‚ï¼ˆä»æ­¤ä¸æ€•äº§å“æ±ªï¼‰<br>3ã€ä¸šåŠ¡é€»è¾‘ä¸“æ³¨æ•°æ®å¤„ç†ï¼Œæ‰‹åŠ¨ç®¡ç†DOMçš„å¹´ä»£å°±åƒâ€¦â€¦åƒä»€ä¹ˆå‘¢ï¼Ÿï¼ˆæ¯•ç«Ÿæˆäººç”¨å“ä¹Ÿè¶Šæ¥è¶Šè‡ªåŠ¨åŒ–äº†ï¼‰<br>4ã€ç­‰ç­‰â€¦â€¦.ï¼ˆå…¶å®å¥½å¤„æ— éœ€èµ˜è¿°ï¼Œæ¥ï¼Œå¾€ä¸‹çœ‹ï¼‰</p>\n</blockquote>\n<p>ä¸ºäº†è¾¾æˆä»¥ä¸Šç›®æ ‡ï¼Œæˆ‘ä»¬æ¢è®¨ä¸€ä¸‹è§£å†³æ–¹æ¡ˆï¼š</p>\n<p><em><b>1ã€è€é¡¹ç›®çš„æ„å»ºè¾“å‡ºä¸ºä»€ä¹ˆè‡ƒè‚¿ï¼Ÿ</b></em></p>\n<p>ç­”ï¼šå› ä¸ºä½¿ç”¨çš„æ˜¯requireçš„rjsè¿›è¡Œæ„å»ºæ‰“åŒ…çš„ï¼Œäº†è§£rjsçš„éƒ½çŸ¥é“ï¼Œå®ƒä¼šæŠŠé¡¹ç›®æ‰€æœ‰ä¾èµ–éƒ½æ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰å¾ˆå¤šé¡µé¢ä¾èµ–è¿™ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆrjså¹¶ä¸ä¼šæŠŠè¿™ä¸ªæ¨¡å—æå–å‡ºæ¥ä½œä¸ºå…¬å…±æ¨¡å—ï¼Œæ‰€ä»¥å°±ä¼šæœ‰å¾ˆå¤šå¤åˆ¶æ€§çš„å†…å®¹ï¼Œæ‰€ä»¥é¡¹ç›®è‡ªç„¶è‡ƒè‚¿ã€‚</p>\n<p><em>è§£å†³æ–¹æ¡ˆï¼š</em>ä½¿ç”¨webpacké…åˆç›¸åº”çš„loaderï¼Œæ¥å®Œæˆæ¨¡å—åŠ è½½å’Œæ„å»ºçš„å·¥ä½œã€‚</p>\n<p><em><b>2ã€è€é¡¹ç›®ä¸ºä»€ä¹ˆæ¨¡å—åŒ–çš„ä¸è¶³ï¼Ÿ</b></em></p>\n<p>ç­”ï¼šè€é¡¹ç›®çš„æ¨¡å—åŒ–ï¼Œä»…ä»…ä½“ç°åœ¨jså±‚é¢ï¼Œè§£å†³äº†æ¨¡å—å¼•ç”¨çš„é—®é¢˜ï¼Œä½†åœ¨å¼€å‘æ–¹å¼ä¸Šï¼Œä¾ç„¶å¯ä»¥çœ‹åšæ˜¯è¿‡ç¨‹å¼çš„ï¼Œè¿™æ ·çš„ç»“æœå°±å¯¼è‡´äº†é¡¹ç›®çš„éš¾æ‰©å±•å’Œéš¾ç»´æŠ¤ï¼Œè®©å¼€å‘äººå‘˜åœ¨ä¸äº§å“æ±ªçš„å¯¹å³™ä¸­ï¼Œå¹¶ä¸ä»å®¹ã€‚</p>\n<p><em>è§£å†³æ–¹æ¡ˆï¼š</em>Vue.jsèƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³ç»„ä»¶åŒ–çš„é—®é¢˜ï¼Œé…åˆ Vue.js å®˜æ–¹æä¾›çš„ <em>vue-loader</em> èƒ½å¤Ÿå¾ˆå¥½çš„ç»“åˆwebpackåšç»„ä»¶åŒ–çš„å¼€å‘æ¶æ„ã€‚</p>\n<p><em><b>3ã€å¦‚ä½•é¿å…æ‰‹åŠ¨ç®¡ç†DOMï¼Ÿ</b></em></p>\n<p>ç­”ï¼šå¦‚æœä½ åœ¨åšæ•°æ®å±•ç¤ºè¿™ä¸€å—çš„å¼€å‘å·¥ä½œï¼Œç›¸ä¿¡ä½ ä¸€å®šä½“ä¼šé¢‡æ·±ï¼Œå‘é€httpè¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œæ‹¿åˆ°è¿”å›çš„æ•°æ®åæ‰‹åŠ¨æ¸²æŸ“DOMè‡³é¡µé¢ï¼Œè¿™æ˜¯æœ€åŸå§‹çš„å¼€å‘æ–¹å¼ï¼Œæ— éå†åŠ ä¸€ä¸ªæ¨¡æ¿å¼•æ“ä¹‹ç±»çš„ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯é¿å…ä¸äº†æ‰‹åŠ¨æ¸²æŸ“ï¼Œå¦‚æœé¡µé¢é€»è¾‘å¤æ‚ï¼Œæ¯”å¦‚ç»™ä½ æ¥ä¸€ä¸ªç¿»é¡µçš„åŠŸèƒ½ï¼Œå†æ¥ä¸€ä¸ªç­›é€‰é¡¹ï¼Œä¼°è®¡ä½ ä¼šè§‰å¾—ä¸–ç•Œå¹¶ä¸é‚£ä¹ˆç¾å¥½ã€‚</p>\n<p><em>è§£å†³æ–¹æ¡ˆï¼š</em>MVVMæ¨¡å¼èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€ŒVue.jsçš„æ ¸å¿ƒä¹Ÿæ˜¯MVVMã€‚</p>\n<h1 id=\"webpack\"><a href=\"#webpack\" class=\"headerlink\" title=\"webpack\"></a>webpack</h1><p>ä½ è‚¯å®šå¬è¯´è¿‡webpackï¼Œå¦‚æœç›´æ¥å¯¹ä½ æè¿°ä»€ä¹ˆæ˜¯webpackä½ å¯èƒ½æ„Ÿå—ä¸åˆ°ä»–çš„å¥½å¤„ï¼Œé‚£ä¹ˆåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ç›¸ä¿¡ä½ è‚¯å®šä½¿ç”¨è¿‡gulpæˆ–è€…gruntï¼Œå¦‚æœä½ æ²¡ä½¿ç”¨è¿‡ä¹Ÿå¯ä»¥ï¼Œè‡³å°‘ä½ è¦å¬è¯´è¿‡å¹¶ä¸”çŸ¥é“gulpå’Œgruntæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œå‡å¦‚è¿™ä¸ªä½ è¿˜ä¸æ¸…æ¥šï¼Œé‚£ä¹ˆä½ å¹¶ä¸æ˜¯ä¸€ä¸ªåˆæ ¼çš„å‰ç«¯å¼€å‘äººå‘˜ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿä¸é€‚åˆä½ ï¼Œä½ å¯ä»¥ä»åŸºç¡€çš„åœ°æ–¹æ…¢æ…¢å­¦èµ·ã€‚</p>\n<p>gulpå’Œgruntå¯¹äºæ¯ä¸€ä¸ªå‰ç«¯å¼€å‘äººå‘˜åº”è¯¥æ˜¯ä¸é™Œç”Ÿçš„ï¼Œå®ƒä»¬ä¸ºå‰ç«¯æä¾›äº†è‡ªåŠ¨åŒ–æ„å»ºçš„èƒ½åŠ›ï¼Œå¹¶ä¸”æœ‰è‡ªå·±çš„ç”Ÿæ€åœˆï¼Œæœ‰å¾ˆå¤šæ’ä»¶ï¼Œä½¿å¾—æˆ‘ä»¬å‘Šåˆ«åˆ€è€•ç«ç§çš„æ—¶ä»£ï¼Œä½†æ˜¯å®ƒä»¬å¹¶æ²¡æœ‰è§£å†³æ¨¡å—åŠ è½½çš„é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰çš„é¡¹ç›®æ˜¯ä½¿ç”¨gulpæ„å»ºçš„ï¼Œä½†æ˜¯æ¨¡å—åŒ–å¾—å·¥ä½œè¿˜æ˜¯è¦é requireå’Œrjsæ¥å®Œæˆï¼Œè€Œgulpé™¤äº†å®Œæˆä¸€äº›å…¶ä»–ä»»åŠ¡ä¹‹å¤–ï¼Œå°±å˜æˆäº†å¸®åŠ©æˆ‘ä»¬å…é™¤æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤çš„å·¥å…·äº†ï¼Œåˆ«æ— å®ƒç”¨ã€‚</p>\n<p>è€Œwebpackå°±ä¸åŒäº†ï¼Œwebpackçš„å“²å­¦æ˜¯ä¸€åˆ‡çš†æ˜¯æ¨¡å—ï¼Œæ— è®ºæ˜¯js/css/sass/img/coffeejs/ttfâ€¦.ç­‰ç­‰ï¼Œwebpackå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„loaderå»æŠŠä¸€åˆ‡èµ„æºå½“åšæ¨¡å—åŠ è½½ï¼Œè¿™æ ·å°±è§£å†³äº†æ¨¡å—ä¾èµ–çš„é—®é¢˜ï¼ŒåŒæ—¶ï¼Œåˆ©ç”¨æ’ä»¶è¿˜å¯ä»¥å¯¹é¡¹ç›®è¿›è¡Œä¼˜åŒ–ï¼Œç”±äºæ¨¡å—çš„åŠ è½½å’Œé¡¹ç›®çš„æ„å»ºä¼˜åŒ–éƒ½æ˜¯é€šè¿‡webpackä¸€ä¸ªâ€äººâ€œæ¥è§£å†³çš„ï¼Œæ‰€ä»¥æ¨¡å—çš„åŠ è½½å’Œé¡¹ç›®çš„æ„å»ºä¼˜åŒ–å¹¶ä¸æ˜¯æ— æœºåˆ†ç¦»çš„ï¼Œè€Œæ˜¯æœ‰æœºçš„ç»“åˆåœ¨ä¸€èµ·çš„ï¼Œæ˜¯ä¸€ä¸ªç»„åˆçš„è¿‡ç¨‹ï¼Œè¿™ä½¿å¾—webpackåœ¨è¿™æ–¹é¢èƒ½å¤Ÿå®Œæˆçš„æ›´å‡ºè‰²ï¼Œè¿™ä¹Ÿæ˜¯webpackçš„ä¼˜åŠ¿æ‰€åœ¨ã€‚</p>\n<p>å¦‚æœä½ çœ‹ä¸æ‡‚ä¸Šé¢çš„æè¿°ï¼Œæ²¡å…³ç³»ï¼Œä½ åªéœ€è¦çŸ¥é“ä¸€ä¸‹å‡ ç‚¹ï¼š</p>\n<p>1ã€è¿‡å»ä½¿ç”¨requireå’Œrjsç­‰è¿›è¡Œæ¨¡å—åŠ è½½çš„æ–¹å¼ï¼Œå¯ä»¥æ›¿æ¢ä¸ºwebpackæä¾›çš„æŒ‡å®šloaderå»å®Œæˆï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±å¼€å‘åŠ è½½ç‰¹å®šèµ„æºçš„loaderã€‚<br>2ã€è¿‡å»ä½¿ç”¨gulpå’Œgruntå®Œæˆé¡¹ç›®æ„å»ºä¼˜åŒ–çš„æ–¹å¼ï¼Œå¯ä»¥æ›¿æ¢æˆwebpackæä¾›çš„æ’ä»¶å’Œç‰¹å®šçš„é…ç½®å»å®Œæˆã€‚<br>3ã€ç”±äºæ¨¡å—çš„åŠ è½½å’Œé¡¹ç›®çš„æ„å»ºä¼˜åŒ–æœ‰æœºçš„ç»“åˆï¼Œæ‰€ä»¥webpackèƒ½å¤Ÿæ›´å¥½çš„å®Œæˆè¿™é¡¹å·¥ä½œ<br>4ã€å¹¶ä¸æ˜¯è¯´æœ‰äº†webpackå°±æ·˜æ±°çš„gulpç­‰ï¼Œæœ‰äº›ç‰¹å®šçš„ä»»åŠ¡ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨gulpå»è‡ªå®šä¹‰å®Œæˆçš„ã€‚ä½†æ˜¯ä¸ä¿è¯webpackçš„æœªæ¥å‘å±•è¶‹åŠ¿ä¼šæ€ä¹ˆæ ·ã€‚</p>\n<p>æœ€åï¼Œç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªå®˜æ–¹çš„æ•™ç¨‹ï¼Œè¿™ä¸ªæ•™ç¨‹çš„æœ€å¼€å§‹æœ‰å‘çš„åœ°æ–¹ï¼Œå¦‚æœè¯»è€…é‡åˆ°äº†å‘ï¼Œå¯ä»¥åœ¨è¿™é‡Œç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä¼šä¸ºå¤§å®¶è§£ç­”ï¼Œä¸è¿‡æ€»ä½“æ¥è®²ï¼Œè¿™ä¸ªæ•™ç¨‹é€‚åˆå…¥é—¨ï¼Œå”¯ä¸€ä¸è¶³çš„å°±æ˜¯æ•™ç¨‹æ˜¯è‹±æ–‡çš„ï¼Œè‹±æ–‡çš„ä¹Ÿä¸ç”¨æ€•ï¼Œæœ¬äººçš„è‹±è¯­æ²¡è¿‡å››çº§ï¼Œä½†æ˜¯ç°åœ¨ä¾ç„¶èƒ½å¤Ÿçœ‹å¾—æ‡‚è‹±æ–‡æŠ€æœ¯æ–‡ç« ã€‚æ•™ç¨‹é“¾æ¥ï¼š<a href=\"http://blog.madewithlove.be/post/webpack-your-bags/\" target=\"_blank\" rel=\"external\">http://blog.madewithlove.be/post/webpack-your-bags/</a></p>\n<h1 id=\"Vue-js\"><a href=\"#Vue-js\" class=\"headerlink\" title=\"Vue.js\"></a>Vue.js</h1><p><a href=\"http://cn.vuejs.org/\" target=\"_blank\" rel=\"external\">Vue.js</a>æ˜¯ä¸€ä¸ªMVVMæ¨¡å¼çš„æ¡†æ¶ï¼Œå¦‚æœè¯»è€…æœ‰angularç»éªŒï¼Œä¸€å®šèƒ½å¤Ÿå¾ˆå¿«å…¥é—¨Vueçš„ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨Vueè€Œä¸ç”¨angularï¼Œ<br>é¦–å…ˆï¼ŒVueçš„ä½“ç§¯å°ï¼Œè½»é‡åœ¨ç§»åŠ¨ç«¯å¼€å‘å§‹ç»ˆæ˜¯ä¸€ä¸ªä¸å¯å¿½ç•¥çš„è¯é¢˜ï¼Œå…¶æ¬¡ï¼ŒVueåœ¨å®ç°ä¸Šä¸angularæœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œè¯»è€…å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ä¸ªé“¾æ¥æ¥äº†è§£ï¼š</p>\n<p>1ã€<a href=\"http://cn.vuejs.org/guide/reactivity.html\" target=\"_blank\" rel=\"external\">Vueçš„å˜åŒ–è¿½è¸ªå’Œè®¡ç®—å±æ€§çš„åŒºåˆ«ç­‰</a></p>\n<p>2ã€<a href=\"http://cn.vuejs.org/guide/comparison.html\" target=\"_blank\" rel=\"external\">Vue ä¸ angular åŠ react ç­‰æ¡†æ¶çš„å¯¹æ¯”</a></p>\n<p>3ã€ç¬¬ä¸‰ç‚¹å°±æ˜¯Vueæä¾›äº†webpackçš„loader â€”-&gt; [vue-loader]ï¼Œä½¿ç”¨å®ƒå¯ä»¥è®©é¡¹ç›®çš„ç»„ä»¶åŒ–æ€æƒ³æ›´åŠ æ¸…æ™°</p>\n<p>ç»¼ä¸Šæ‰€è¿°ï¼Œè¿™å°±æ˜¯é€‰ç”¨Vueçš„åŸå› </p>\n<h1 id=\"npm-å’Œ-nodejs\"><a href=\"#npm-å’Œ-nodejs\" class=\"headerlink\" title=\"npm å’Œ nodejs\"></a>npm å’Œ nodejs</h1><p>npm çš„å…¨ç§°æ˜¯ <em>nodejsåŒ…ç®¡ç†</em>ï¼Œç°åœ¨è¶Šæ¥è¶Šå¤šçš„é¡¹ç›®(åŒ…)éƒ½å¯ä»¥é€šè¿‡npmæ¥å®‰è£…ç®¡ç†ï¼Œnodejsæ˜¯jsè¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„å¹³å°ï¼Œå®ƒä½¿å¾—jsçš„èƒ½åŠ›è¿›ä¸€æ­¥æé«˜ï¼Œæˆ‘ä»¬è¿˜è¦ä½¿ç”¨nodejsé…åˆ webpack æ¥å®Œæˆçƒ­åŠ è½½çš„åŠŸèƒ½ã€‚æ‰€ä»¥è¯»è€…æœ€å¥½æœ‰nodejsçš„å¼€å‘ç»éªŒï¼Œå¦‚æœæœ‰expressçš„ç»éªŒæ›´å¥½ã€‚</p>\n<h1 id=\"è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥ä»é›¶æ­å»ºè¿™ä¸ªé¡¹ç›®\"><a href=\"#è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥ä»é›¶æ­å»ºè¿™ä¸ªé¡¹ç›®\" class=\"headerlink\" title=\"è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥ä»é›¶æ­å»ºè¿™ä¸ªé¡¹ç›®\"></a>è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥ä»é›¶æ­å»ºè¿™ä¸ªé¡¹ç›®</h1><p>é¦–å…ˆæ–°å»ºä¸€ä¸ªç›®å½•ï¼Œåä¸º myProject ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ã€‚ç„¶åæ‰§è¡Œä¸€äº›åŸºæœ¬çš„æ­¥éª¤ï¼Œæ¯”å¦‚ npm init å‘½ä»¤ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ç”Ÿæˆ package.json æ–‡ä»¶ï¼Œè¿™å‡ ä¹æ˜¯å¿…é€‰çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„é¡¹ç›®è¦æœ‰å¾ˆå¤šä¾èµ–ï¼Œéƒ½æ˜¯é€šè¿‡npmæ¥ç®¡ç†çš„ï¼Œè€Œnpmå¯¹äºæˆ‘ä»¬é¡¹ç›®çš„ç®¡ç†ï¼Œåˆ™æ˜¯é€šè¿‡package.jsonæ–‡ä»¶ï¼š</p>\n<pre><code class=\"$\">npm init\n</code></pre>\n<p>æ‰§è¡Œnpm initä¹‹åï¼Œä¼šæç¤ºä½ å¡«å†™ä¸€äº›é¡¹ç›®çš„ä¿¡æ¯ï¼Œä¸€ç›´å›è½¦é»˜è®¤å°±å¥½äº†ï¼Œæˆ–è€…ç›´æ¥æ‰§è¡Œ npm init -y ç›´æ¥è·³è¿‡è¯¢é—®æ­¥éª¤<br>ç„¶åæˆ‘ä»¬æ–°å»ºä¸€ä¸ªå«åš app çš„ç›®å½•ï¼Œè¿™ä¸ªæ˜¯æˆ‘ä»¬é¡µé¢æ¨¡å—çš„ç›®å½•ï¼Œå†åœ¨appç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªindexç›®å½•ï¼Œå‡è®¾è¿™ä¸ªæ˜¯é¦–é¡µæ¨¡å—çš„ç›®å½•ï¼Œç„¶åå†åœ¨indexç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ª index.html æ–‡ä»¶å’Œ index.js æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯é¦–é¡µå…¥å£htmlæ–‡ä»¶å’Œä¸»jsæ–‡ä»¶ï¼Œç„¶åå†åœ¨indexç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªcomponentsç›®å½•ï¼Œè¿™ä¸ªç›®å½•ç”¨ä½œå­˜æ”¾é¦–é¡µç»„ä»¶æ¨¡å—çš„ç›®å½•ï¼Œå› ä¸ºæˆ‘ä»¬æœ€ç»ˆè¦å®ç°ç»„ä»¶åŒ–å¼€å‘ã€‚è¿™æ ·ï¼Œå½“ä½ å®Œæˆä¸Šé¢çš„æ­¥éª¤åï¼Œä½ çš„é¡¹ç›®çœ‹ä¸Šå»åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325b.jpg\" alt=\"é¡¹ç›®ç»“æ„\"></p>\n<p>æ¥ä¸‹æ¥é€šè¿‡npmå®‰è£…é¡¹ç›®ä¾èµ–é¡¹ï¼š</p>\n<pre><code class=\"$\">npm install\\\n  webpack webpack-dev-server\\\n  vue-loader vue-html-loader css-loader vue-style-loader vue-hot-reload-api\\\n  babel-loader babel-core babel-plugin-transform-runtime babel-preset-es2015\\\n  babel-runtime@5\\\n  --save-dev\n\nnpm install vue --save\n</code></pre>\n<p>è¿™ä¸ªæ—¶å€™ï¼Œä½ çš„package.jsonæ–‡ä»¶çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>\n<pre><code>&quot;devDependencies&quot;: {\n    &quot;babel-core&quot;: &quot;^6.3.17&quot;,\n    &quot;babel-loader&quot;: &quot;^6.2.0&quot;,\n    &quot;babel-plugin-transform-runtime&quot;: &quot;^6.3.13&quot;,\n    &quot;babel-preset-es2015&quot;: &quot;^6.3.13&quot;,\n    &quot;babel-runtime&quot;: &quot;^5.8.34&quot;,\n    &quot;css-loader&quot;: &quot;^0.23.0&quot;,\n    &quot;vue-hot-reload-api&quot;: &quot;^1.2.2&quot;,\n    &quot;vue-html-loader&quot;: &quot;^1.0.0&quot;,\n    &quot;vue-style-loader&quot;: &quot;^1.0.0&quot;,\n    &quot;vue-loader&quot;: &quot;^7.2.0&quot;,\n    &quot;webpack&quot;: &quot;^1.12.9&quot;,\n    &quot;webpack-dev-server&quot;: &quot;^1.14.0&quot;\n  },\n  &quot;dependencies&quot;: {\n    &quot;vue&quot;: &quot;^1.0.13&quot;\n  },\n</code></pre><p>æˆ‘ä»¬å®‰è£…äº† babel ä¸€ç³»åˆ—åŒ…ï¼Œç”¨æ¥è§£æES6è¯­æ³•ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ES6æ¥å¼€å‘é¡¹ç›®ï¼Œå¦‚æœä½ ä¸äº†è§£ES6è¯­æ³•ï¼Œå»ºè®®ä½ çœ‹ä¸€çœ‹<a href=\"http://es6.ruanyifeng.com/\" target=\"_blank\" rel=\"external\">é˜®è€å¸ˆçš„æ•™ç¨‹</a>ï¼Œç„¶åæˆ‘ä»¬å®‰è£…äº†ä¸€äº›loaderåŒ…ï¼Œæ¯”å¦‚css-loader/vue-loaderç­‰ç­‰ï¼Œå› ä¸ºwebpackæ˜¯ä½¿ç”¨è¿™äº›æŒ‡å®šçš„loaderå»åŠ è½½æŒ‡å®šçš„æ–‡ä»¶çš„ã€‚</p>\n<p>å¦å¤–æˆ‘ä»¬è¿˜ä½¿ç”¨ npm install vue â€“save å‘½ä»¤å®‰è£…äº† vue ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„vue.jsï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åƒå¼€å‘nodejsåº”ç”¨ä¸€æ ·ï¼Œç›´æ¥require(â€˜vueâ€™);å³å¯ï¼Œè€Œä¸éœ€è¦é€šè¿‡scriptæ ‡ç­¾å¼•å…¥ï¼Œè¿™ä¸€ç‚¹åœ¨å¼€å‘ä¸­å¾ˆçˆ½ã€‚</p>\n<p>å®‰è£…å®Œäº†ä¾èµ–ï¼Œç¼–è¾‘ä»¥ä¸‹æ–‡ä»¶å¹¶ä¿å­˜åˆ°ç›¸åº”ä½ç½®ï¼š</p>\n<p>1ã€index.htmlæ–‡ä»¶ï¼š</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;zh&quot;&gt;\n    &lt;head&gt;\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, height=device-height, initial-scale=1.0, user-scalable=no&quot;&gt;\n        &lt;meta charset=&quot;utf-8&quot;&gt;\n        &lt;title&gt;é¦–é¡µ&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;!-- vueçš„ç»„ä»¶ä»¥è‡ªå®šä¹‰æ ‡ç­¾çš„å½¢å¼ä½¿ç”¨ --&gt;\n        &lt;favlist&gt;&lt;/favlist&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>2ã€index.jsæ–‡ä»¶ï¼š</p>\n<pre><code>import Vue from &#39;Vue&#39;\nimport Favlist from &#39;./components/Favlist&#39;\n\nnew Vue({\n    el: &#39;body&#39;,\n    components: { Favlist }\n})\n</code></pre><p>3ã€åœ¨componentsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª Favlist.vue æ–‡ä»¶ï¼Œä½œä¸ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç»„ä»¶ï¼š</p>\n<pre><code>&lt;template&gt;\n    &lt;div v-for=&quot;n in 10&quot;&gt;div&lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n    export default {\n        data () {\n            return {\n                msg: &#39;Hello World!&#39;\n            }\n        }\n    }\n&lt;/script&gt;\n\n&lt;style&gt;\n    html{\n        background: red;\n    }\n&lt;/style&gt;\n</code></pre><p>è¦çœ‹æ‡‚ä¸Šé¢çš„ä»£ç ï¼Œä½ éœ€è¦äº†è§£vue.jsï¼Œå‡å¦‚ä½ çœ‹ä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨index.htmlä¸­ä½¿ç”¨äº†è‡ªå®šä¹‰æ ‡ç­¾ï¼ˆå³ç»„ä»¶ï¼‰ï¼Œç„¶ååœ¨index.jsä¸­å¼•å…¥äº†Vueå’Œæˆ‘ä»¬çš„Favlist.vueç»„ä»¶ï¼ŒFavlist.vueæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åŸºæœ¬çš„vueç»„ä»¶è¯­æ³•ï¼Œæœ€åï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒè¿è¡Œèµ·æ¥ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦webpackäº†ã€‚</p>\n<p>åœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»º build ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾æˆ‘ä»¬çš„æ„å»ºç›¸å…³çš„ä»£ç æ–‡ä»¶ç­‰ï¼Œç„¶ååœ¨buildç›®å½•ä¸‹æ–°å»º webpack.config.js è¿™æ˜¯æˆ‘ä»¬çš„webpacké…ç½®æ–‡ä»¶ï¼Œwebpackéœ€è¦é€šè¿‡è¯»å–ä½ çš„é…ç½®ï¼Œè¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œç±»ä¼¼äºgulpfile.jsæˆ–è€…gruntfile.jsç­‰ã€‚</p>\n<p>webpack.config.js</p>\n<pre><code>// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require(&#39;path&#39;);\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, &#39;../app/index/index.js&#39;),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, &#39;../output/static&#39;),\n        publicPath: &#39;static/&#39;,\n        filename: &#39;[name].[hash].js&#39;,\n        chunkFilename: &#39;[id].[chunkhash].js&#39;\n    },\n    module: {\n\n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: &#39;vue&#39;   \n            }\n        ]\n    }\n}\n</code></pre><p>ä¸Šä¾‹ä¸­ï¼Œç›¸ä¿¡ä½ å·²ç»çœ‹æ‡‚äº†æˆ‘çš„é…ç½®ï¼Œå…¥å£æ–‡ä»¶æ˜¯index.jsæ–‡ä»¶ï¼Œé…ç½®äº†ç›¸åº”è¾“å‡ºï¼Œç„¶åä½¿ç”¨ vue-loader å»åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æ„å»ºé¡¹ç›®äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š</p>\n<pre><code>webpack --display-modules --display-chunks --config build/webpack.config.js\n</code></pre><p>é€šè¿‡webpackå‘½ä»¤ï¼Œå¹¶ä¸”é€šè¿‡ â€“config é€‰é¡¹æŒ‡å®šäº†æˆ‘ä»¬é…ç½®æ–‡ä»¶çš„ä½ç½®æ˜¯ â€˜build/webpack.config.jsâ€™ï¼Œå¹¶é€šè¿‡ â€“display-modules å’Œ â€“display-chunks é€‰é¡¹æ˜¾ç¤ºç›¸åº”çš„ä¿¡æ¯ã€‚å¦‚æœä½ æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œå¯èƒ½å¾—åˆ°ä¸‹å›¾çš„é”™è¯¯ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325c.jpg\" alt=\"æŠ¥é”™\"></p>\n<p>é”™è¯¯æç¤ºæˆ‘ä»¬åº”è¯¥é€‰æ‹©åˆé€‚çš„loaderå»åŠ è½½è¿™ä¸ª â€˜./app/index/index.jsâ€™ è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”è¯´ä¸æœŸæœ›index.jsæ–‡ä»¶ä¸­çš„æ ‡è¯†ç¬¦ï¼ˆUnexpected tokenï¼‰ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†ES6çš„è¯­æ³• import è¯­å¥ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨ babel-loader å»åŠ è½½æˆ‘ä»¬çš„jsæ–‡ä»¶ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªloadersé¡¹ç›®ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require(&#39;path&#39;);\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, &#39;../app/index/index.js&#39;),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, &#39;../output/static&#39;),\n        publicPath: &#39;static/&#39;,\n        filename: &#39;[name].[hash].js&#39;,\n        chunkFilename: &#39;[id].[chunkhash].js&#39;\n    },\n    module: {\n\n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: &#39;vue&#39;   \n            },\n            {\n                test: /\\.js$/,\n                loader: &#39;babel?presets=es2015&#39;,\n                exclude: /node_modules/\n            }\n        ]\n    }\n}\n</code></pre><p>ç°åœ¨å†è¿è¡Œæ„å»ºå‘½ä»¤ ï¼š â€˜webpack â€“display-modules â€“display-chunks â€“config build/webpack.config.jsâ€™</p>\n<p>sorryï¼Œä¸å‡ºæ„å¤–ï¼Œä½ åº”è¯¥å¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325d.jpg\" alt=\"é”™è¯¯\"></p>\n<p>å®ƒè¯´æ²¡æœ‰å‘ç° â€˜./components/Favlistâ€™ æ¨¡å—ï¼Œè€Œæˆ‘ä»¬æ˜æ˜æœ‰ ./components/Favlist.vue æ–‡ä»¶ï¼Œä¸ºä»€ä¹ˆå®ƒæ²¡å‘ç°å‘¢ï¼Ÿå®ƒçäº†ï¼Ÿå…¶å®æ˜¯è¿™æ ·çš„ï¼Œå½“webpackè¯•å›¾å»åŠ è½½æ¨¡å—çš„æ—¶å€™ï¼Œå®ƒé»˜è®¤æ˜¯æŸ¥æ‰¾ä»¥ .js ç»“å°¾çš„æ–‡ä»¶çš„ï¼Œå®ƒå¹¶ä¸çŸ¥é“ .vue ç»“å°¾çš„æ–‡ä»¶æ˜¯ä»€ä¹ˆé¬¼ç©æ„å„¿ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å‘Šè¯‰webpackï¼Œé‡åˆ° .vue ç»“å°¾çš„ä¹Ÿè¦å»åŠ è½½ï¼Œæ·»åŠ  resolve é…ç½®é¡¹ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require(&#39;path&#39;);\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, &#39;../app/index/index.js&#39;),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, &#39;../output/static&#39;),\n        publicPath: &#39;static/&#39;,\n        filename: &#39;[name].[hash].js&#39;,\n        chunkFilename: &#39;[id].[chunkhash].js&#39;\n    },\n    resolve: {\n        extensions: [&#39;&#39;, &#39;.js&#39;, &#39;.vue&#39;]\n    },\n    module: {\n\n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: &#39;vue&#39;   \n            },\n            {\n                test: /\\.js$/,\n                loader: &#39;babel?presets=es2015&#39;,\n                exclude: /node_modules/\n            }\n        ]\n    }\n}\n</code></pre><p>è¿™æ ·ï¼Œå½“æˆ‘ä»¬å»åŠ è½½ â€˜./components/Favlistâ€™ è¿™æ ·çš„æ¨¡å—æ—¶ï¼Œwebpacké¦–å…ˆä¼šæŸ¥æ‰¾ ./components/Favlist.js å¦‚æœæ²¡æœ‰å‘ç°Favlist.jsæ–‡ä»¶å°±ä¼šç»§ç»­æŸ¥æ‰¾ Favlist.vue æ–‡ä»¶ï¼Œç°åœ¨å†æ¬¡è¿è¡Œæ„å»ºå‘½ä»¤ï¼Œæˆ‘ä»¬æˆåŠŸäº†ï¼Œè¿™æ—¶æˆ‘ä»¬ä¼šåœ¨æˆ‘ä»¬çš„è¾“å‡ºç›®å½•ä¸­çœ‹åˆ°ä¸€ä¸ªjsæ–‡ä»¶ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325e.jpg\" alt=\"è¾“å‡º\"></p>\n<p>ä¹‹æ‰€ä»¥ä¼šè¿™æ ·è¾“å‡ºï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„ webpack.config.js æ–‡ä»¶ä¸­çš„è¾“å‡ºé…ç½®ä¸­æŒ‡å®šäº†ç›¸åº”çš„è¾“å‡ºä¿¡æ¯ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¿®æ”¹ index.html ï¼Œå°†è¾“å‡ºçš„jsæ–‡ä»¶å¼•å…¥ï¼š</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;zh&quot;&gt;\n    &lt;head&gt;\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, height=device-height, initial-scale=1.0, user-scalable=no&quot;&gt;\n        &lt;meta charset=&quot;utf-8&quot;&gt;\n        &lt;title&gt;é¦–é¡µ&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;!-- vueçš„ç»„ä»¶ä»¥è‡ªå®šä¹‰æ ‡ç­¾çš„å½¢å¼ä½¿ç”¨ --&gt;\n        &lt;favlist&gt;&lt;/favlist&gt;\n\n        &lt;script src=&quot;../../output/static/main.ce853b65bcffc3b16328.js&quot;&gt;&lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ç„¶åç”¨æµè§ˆå™¨æ‰“å¼€è¿™ä¸ªé¡µé¢ï¼Œä½ å¯ä»¥çœ‹åˆ°ä½ å†™çš„ä»£ç æ­£ç¡®çš„æ‰§è¡Œäº†ã€‚</p>\n<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œéš¾é“æˆ‘ä»¬æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨çš„å¼•å…¥è¾“å‡ºçš„jsæ–‡ä»¶å—ï¼Ÿå› ä¸ºæ¯æ¬¡æ„å»ºè¾“å‡ºçš„jsæ–‡ä»¶éƒ½å¸¦æœ‰ hash å€¼ï¼Œå¦‚ main.ce853b65bcffc3b16328.jsï¼Œå°±ä¸èƒ½æ›´æ™ºèƒ½ä¸€ç‚¹å—ï¼Ÿæ¯æ¬¡éƒ½è‡ªåŠ¨å†™å…¥ï¼Ÿæ€ä¹ˆä¼šä¸å¯èƒ½ï¼Œå¦åˆ™è¿™ä¸œè¥¿è¿˜èƒ½ç«å—ï¼Œè¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨webpackçš„æ’ä»¶äº†ï¼Œ<a href=\"https://www.npmjs.com/package/html-webpack-plugin\" target=\"_blank\" rel=\"external\">html-webpack-plugin</a>æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥åˆ›å»ºhtmlæ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å°†ä¾èµ–å†™å…¥htmlæ–‡ä»¶ä¸­ã€‚</p>\n<p>é¦–å…ˆå®‰è£… html-webpack-plugin æ’ä»¶ï¼š</p>\n<pre><code>npm install html-webpack-plugin --save-dev\n</code></pre><p>ç„¶ååœ¨ä¿®æ”¹é…ç½®é¡¹ï¼š</p>\n<pre><code>// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require(&#39;path&#39;);\nvar HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, &#39;../app/index/index.js&#39;),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, &#39;../output/static&#39;),\n        publicPath: &#39;static/&#39;,\n        filename: &#39;[name].[hash].js&#39;,\n        chunkFilename: &#39;[id].[chunkhash].js&#39;\n    },\n    resolve: {\n        extensions: [&#39;&#39;, &#39;.js&#39;, &#39;.vue&#39;]\n    },\n    module: {\n\n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: &#39;vue&#39;   \n            },\n            {\n                test: /\\.js$/,\n                loader: &#39;babel?presets=es2015&#39;,\n                exclude: /node_modules/\n            }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            filename: &#39;../index.html&#39;,\n            template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n            inject: true\n        })\n    ]\n}\n</code></pre><p>ç„¶åå†æ¬¡æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼ŒæˆåŠŸä¹‹åï¼Œçœ‹ä½ çš„è¾“å‡ºç›®å½•ï¼Œå¤šå‡ºæ¥ä¸€ä¸ªindex.htmlæ–‡ä»¶ï¼ŒåŒå‡»å®ƒï¼Œä»£ç æ­£ç¡®æ‰§è¡Œï¼Œä½ å¯ä»¥æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æŸ¥çœ‹ä¸€ä¸‹ï¼Œwebpackè‡ªåŠ¨å¸®æˆ‘ä»¬å¼•å…¥äº†ç›¸åº”çš„æ–‡ä»¶ã€‚</p>\n<p>é—®é¢˜ç»§ç»­æ¥äº†ï¼Œéš¾é“æ¯æ¬¡æˆ‘ä»¬éƒ½è¦æ„å»ºä¹‹åæ‰èƒ½æŸ¥çœ‹è¿è¡Œçš„ä»£ç å—ï¼Ÿé‚£å²‚ä¸æ˜¯å¾ˆæ²¡æœ‰æ•ˆç‡ï¼Œåˆ«æ‹…å¿ƒï¼Œwebpackæä¾›äº†å‡ ç§æ–¹å¼ï¼Œè¿›è¡Œçƒ­åŠ è½½ï¼Œåœ¨å¼€å‘æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ç§æ–¹å¼æ¥æé«˜æ•ˆç‡ï¼Œè¿™é‡Œè¦ä»‹ç»çš„ï¼Œæ˜¯ä½¿ç”¨ <a href=\"https://www.npmjs.com/package/webpack-dev-middleware\" target=\"_blank\" rel=\"external\">webpack-dev-middleware</a>ä¸­é—´ä»¶å’Œ<a href=\"https://www.npmjs.com/package/webpack-hot-middleware\" target=\"_blank\" rel=\"external\">webpack-hot-middleware</a>ä¸­é—´ä»¶ï¼Œé¦–å…ˆå®‰è£…ä¸¤ä¸ªä¸­é—´ä»¶ï¼š</p>\n<pre><code>npm install webpack-dev-middleware webpack-hot-middleware --save-dev\n</code></pre><p>å¦å¤–ï¼Œè¿˜è¦å®‰è£…expressï¼Œè¿™æ˜¯ä¸€ä¸ªnodejsæ¡†æ¶</p>\n<pre><code>npm install express --save-dev\n</code></pre><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘å…ˆç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸¤ä¸ªä¸­é—´ä»¶ï¼Œä¹‹æ‰€ä»¥å«åšä¸­é—´ä»¶ï¼Œæ˜¯å› ä¸ºnodejsçš„ä¸€ä¸ªå«åšexpressçš„æ¡†æ¶ä¸­æœ‰ä¸­é—´ä»¶çš„æ¦‚å¿µï¼Œè€Œè¿™ä¸¤ä¸ªåŒ…è¦ä½œä¸ºexpressä¸­é—´ä»¶ä½¿ç”¨ï¼Œæ‰€ä»¥ç§°å®ƒä»¬ä¸ºä¸­é—´ä»¶ï¼Œé‚£ä¹ˆä»–ä»¬èƒ½å¹²ä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<p><em><b>1ã€webpack-dev-middleware</b></em></p>\n<p>æˆ‘ä»¬ä¹‹å‰æ‰€é¢ä¸´çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„ä»£ç æ”¹åŠ¨äº†ï¼Œæˆ‘ä»¬è¦æƒ³çœ‹åˆ°æµè§ˆå™¨çš„å˜åŒ–ï¼Œéœ€è¦å…ˆå¯¹é¡¹ç›®è¿›è¡Œæ„å»ºï¼Œç„¶åæ‰èƒ½æŸ¥çœ‹æ•ˆæœï¼Œè¿™æ ·å¯¹äºå¼€å‘æ•ˆç‡æ¥è®²ï¼Œç®€ç›´å°±æ˜¯ä¸å¯å¿å—çš„ä¸€ä»¶äº‹ï¼Œè¯•æƒ³æˆ‘ä»…ä»…ä¿®æ”¹ä¸€ä¸ªèƒŒæ™¯é¢œè‰²å°±è¦æ„å»ºä¸€ä¸‹é¡¹ç›®ï¼Œè¿™å°¼ç›å‘çˆ¹å•Šï¼Œå¥½åœ¨æœ‰<a href=\"https://www.npmjs.com/package/webpack-dev-middleware\" target=\"_blank\" rel=\"external\">webpack-dev-middleware</a>ä¸­é—´ä»¶ï¼Œå®ƒæ˜¯å¯¹webpackä¸€ä¸ªç®€å•çš„åŒ…è£…ï¼Œå®ƒå¯ä»¥é€šè¿‡è¿æ¥æœåŠ¡å™¨æœåŠ¡é‚£äº›ä»webpackå‘å°„å‡ºæ¥çš„æ–‡ä»¶ï¼Œå®ƒæœ‰ä¸€ä¸‹å‡ ç‚¹å¥½å¤„ï¼š</p>\n<p>1ã€ä¸ä¼šå‘ç¡¬ç›˜å†™æ–‡ä»¶ï¼Œè€Œæ˜¯åœ¨å†…å­˜ä¸­ï¼Œæ³¨æ„æˆ‘ä»¬æ„å»ºé¡¹ç›®å®é™…å°±æ˜¯å‘ç¡¬ç›˜å†™æ–‡ä»¶ã€‚</p>\n<p>2ã€å½“æ–‡ä»¶æ”¹å˜çš„æ—¶å€™ï¼Œè¿™ä¸ªä¸­é—´ä»¶ä¸ä¼šå†æœåŠ¡æ—§çš„åŒ…ï¼Œä½ å¯ä»¥ç›´æ¥å¸…æ–°æµè§ˆå™¨å°±èƒ½çœ‹åˆ°æœ€æ–°çš„æ•ˆæœï¼Œè¿™æ ·ä½ å°±ä¸å¿…ç­‰å¾…æ„å»ºçš„æ—¶é—´ï¼Œæ‰€è§å³æ‰€å¾—ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬åœ¨buildç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª dev-server.js çš„æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä¸€ä¸‹å†…å®¹ï¼š</p>\n<pre><code>// å¼•å…¥å¿…è¦çš„æ¨¡å—\nvar express = require(&#39;express&#39;)\nvar webpack = require(&#39;webpack&#39;)\nvar config = require(&#39;./webpack.config&#39;)\n\n// åˆ›å»ºä¸€ä¸ªexpresså®ä¾‹\nvar app = express()\n\n// è°ƒç”¨webpackå¹¶æŠŠé…ç½®ä¼ é€’è¿‡å»\nvar compiler = webpack(config)\n\n// ä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶\nvar devMiddleware = require(&#39;webpack-dev-middleware&#39;)(compiler, {\n    publicPath: config.output.publicPath,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(devMiddleware)\n\n// ç›‘å¬ 8888ç«¯å£ï¼Œå¼€å¯æœåŠ¡å™¨\napp.listen(8888, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log(&#39;Listening at http://localhost:8888&#39;)\n})\n</code></pre><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¼€å¯æœåŠ¡ï¼š</p>\n<pre><code>node build/dev-server.js\n</code></pre><p>å¦‚æœçœ‹åˆ°ä¸‹å›¾æ‰€ç¤ºï¼Œè¯æ˜ä½ çš„æœåŠ¡æˆåŠŸå¼€å¯äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325f.jpg\" alt=\"å¼€å¯æœåŠ¡æˆåŠŸ\"></p>\n<p>æ¥ä¸‹æ¥æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ï¼š</p>\n<pre><code>http://localhost:8888/app/index/index.html\n</code></pre><p>å›è½¦ï¼Œå¦‚æœä¸å‡ºæ„å¤–ï¼Œä½ åº”è¯¥å¾—åˆ°ä¸€ä¸ª404ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325g.jpg\" alt=\"404\"></p>\n<p>æˆ‘ä»¬è¦å¯¹æˆ‘ä»¬çš„ webpack.config.js é…ç½®æ–‡ä»¶åšä¸¤å¤„ä¿®æ”¹ï¼š</p>\n<p>1ã€å°† config.output.publicPath ä¿®æ”¹ä¸º â€˜/â€˜ï¼š</p>\n<pre><code>output: {\n    // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n    path: path.resolve(__dirname, &#39;../output/static&#39;),\n    publicPath: &#39;/&#39;,\n    filename: &#39;[name].[hash].js&#39;,\n    chunkFilename: &#39;[id].[chunkhash].js&#39;\n},\n</code></pre><p>2ã€å°† plugins ä¸­ HtmlWebpackPlugin ä¸­çš„ filename ä¿®æ”¹ä¸º â€˜app/index/index.htmlâ€™</p>\n<pre><code>plugins: [\n    new HtmlWebpackPlugin({\n        filename: &#39;app/index/index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n]\n</code></pre><p>é‡å¯æœåŠ¡ï¼Œå†åˆ·æ–°é¡µé¢ï¼Œå¦‚æœçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œè¯æ˜ä½ æˆåŠŸäº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325h.jpg\" alt=\"æˆåŠŸ\"></p>\n<p>ä½†æ˜¯è¿™æ ·å¼€å‘æ¨¡å¼ä¸‹çš„ç¡®æ˜¯æˆåŠŸäº†ï¼Œå¯æ˜¯æˆ‘ä»¬ç›´æ¥ä¿®æ”¹äº† webpack.config.js æ–‡ä»¶ï¼Œè¿™å°±æ„å‘³ç€å½“æˆ‘ä»¬æ‰§è¡Œ æ„å»ºå‘½ä»¤ çš„æ—¶å€™ï¼Œé…ç½®å˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ„å»ºä¹Ÿè·Ÿç€å˜äº†ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªå¥½çš„æ–¹å¼æ˜¯ï¼Œä¸å»ä¿®æ”¹webpack.config.jsæ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨buildç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª webpack.dev.conf.jsæ–‡ä»¶ï¼Œæ„æ€æ˜¯å¼€å‘æ¨¡å¼ä¸‹è¦è¯»å–çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä¸€ä¸‹å†…å®¹ï¼š</p>\n<pre><code>var HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)\nvar path = require(&#39;path&#39;);\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require(&#39;./webpack.config&#39;);\n\nconfig.output.publicPath = &#39;/&#39;;\n\nconfig.plugins = [\n    new HtmlWebpackPlugin({\n        filename: &#39;app/index/index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n];\n\nmodule.exports = config;\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨devç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶ä¸­è¦†ç›–äº†åŸºæœ¬é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨dev-server.jsä¸­å°† </p>\n<pre><code>var config = require(&#39;./webpack.config&#39;)\n</code></pre><p>ä¿®æ”¹ä¸ºï¼š</p>\n<pre><code>var config = require(&#39;./webpack.dev.conf&#39;)\n</code></pre><p>å³å¯ï¼Œç„¶åï¼Œé‡å¯æœåŠ¡ï¼Œåˆ·æ–°æµè§ˆå™¨ï¼Œä½ åº”è¯¥å¾—åˆ°åŒæ ·çš„æˆåŠŸç»“æœï¼Œè€Œè¿™ä¸€æ¬¡å½“æˆ‘ä»¬æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š</p>\n<pre><code>webpack --display-modules --display-chunks --config build/webpack.config.js\n</code></pre><p>å¹¶ä¸ä¼šå½±å“æ„å»ºè¾“å‡ºï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ç›´æ¥ä¿®æ”¹webpack.config.jsæ–‡ä»¶ã€‚</p>\n<p>ç°åœ¨æˆ‘ä»¬å·²ç»ä½¿ç”¨ webpack-dev-middleware æ­å»ºåŸºæœ¬çš„å¼€å‘ç¯å¢ƒäº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸æ»¡è¶³ï¼Œå› ä¸ºæˆ‘ä»¬æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨å»åˆ·æ–°æµè§ˆå™¨ï¼Œæ‰€è°“çš„çƒ­åŠ è½½ï¼Œæ„æ€å°±æ˜¯è¯´èƒ½å¤Ÿè¿½è¸ªæˆ‘ä»¬ä»£ç çš„å˜åŒ–ï¼Œå¹¶è‡ªåŠ¨æ›´æ–°ç•Œé¢ï¼Œç”šè‡³è¿˜èƒ½ä¿ç•™ç¨‹åºçŠ¶æ€ã€‚è¦å®Œæˆçƒ­åŠ è½½ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨å¦å¤–ä¸€ä¸ªä¸­é—´ä»¶ <em>webpack-hot-middleware</em></p>\n<p><em><b>2ã€webpack-hot-middleware</b></em></p>\n<p><a href=\"https://www.npmjs.com/package/webpack-hot-middleware\" target=\"_blank\" rel=\"external\">webpack-hot-middleware</a> åªé…åˆ webpack-dev-middleware ä½¿ç”¨ï¼Œå®ƒèƒ½ç»™ä½ æä¾›çƒ­åŠ è½½ã€‚</p>\n<p>å®ƒçš„ä½¿ç”¨å¾ˆç®€å•ï¼Œæ€»å…±åˆ†4æ­¥ï¼š</p>\n<p>1ã€å®‰è£…ï¼Œæˆ‘ä»¬ä¸Šé¢å·²ç»å®‰è£…è¿‡äº†<br>2ã€åœ¨ webpack.dev.conf.js é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸‰ä¸ªæ’ä»¶ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>\nvar HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)\nvar path = require(&#39;path&#39;);\nvar webpack = require(&#39;webpack&#39;);\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require(&#39;./webpack.config&#39;);\n\nconfig.output.publicPath = &#39;/&#39;;\n\nconfig.plugins = [\n    // æ·»åŠ ä¸‰ä¸ªæ’ä»¶\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin(),\n\n    new HtmlWebpackPlugin({\n        filename: &#39;app/index/index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n];\n\nmodule.exports = config;\n</code></pre><p>3ã€åœ¨ webpack.config.js æ–‡ä»¶ä¸­å…¥å£é…ç½®ä¸­æ·»åŠ  â€˜webpack-hot-middleware/clientâ€™ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>entry: [&#39;webpack-hot-middleware/client&#39;, path.resolve(__dirname, &#39;../app/index/index.js&#39;)],\n</code></pre><p>4ã€åœ¨ dev-server.js æ–‡ä»¶ä¸­ä½¿ç”¨æ’ä»¶</p>\n<pre><code>// å¼•å…¥å¿…è¦çš„æ¨¡å—\nvar express = require(&#39;express&#39;)\nvar webpack = require(&#39;webpack&#39;)\nvar config = require(&#39;./webpack.dev.conf&#39;)\n\n// åˆ›å»ºä¸€ä¸ªexpresså®ä¾‹\nvar app = express()\n\n// è°ƒç”¨webpackå¹¶æŠŠé…ç½®ä¼ é€’è¿‡å»\nvar compiler = webpack(config)\n\n// ä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶\nvar devMiddleware = require(&#39;webpack-dev-middleware&#39;)(compiler, {\n    publicPath: config.output.publicPath,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\n// ä½¿ç”¨ webpack-hot-middleware ä¸­é—´ä»¶\nvar hotMiddleware = require(&#39;webpack-hot-middleware&#39;)(compiler)\n\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(devMiddleware)\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(hotMiddleware)\n\n// ç›‘å¬ 8888ç«¯å£ï¼Œå¼€å¯æœåŠ¡å™¨\napp.listen(8888, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log(&#39;Listening at http://localhost:8888&#39;)\n})\n</code></pre><p>okï¼Œç°åœ¨é‡å¯çš„æœåŠ¡ï¼Œç„¶åä¿®æ”¹ Favlist.vue ä¸­çš„é¡µé¢èƒŒæ™¯é¢œè‰²ä¸º â€˜#000â€™ï¼š</p>\n<pre><code>&lt;style&gt;\n    html{\n        background: #000;\n    }\n&lt;/style&gt;\n</code></pre><p>ç„¶åæŸ¥çœ‹ä½ çš„æµè§ˆå™¨ï¼Œæ˜¯ä¸æ˜¯ä½ è¿˜æ²¡æœ‰åˆ·æ–°å°±å·²ç»å¾—å¸¦æ”¹å˜äº†ï¼Ÿ</p>\n<p>é‚£ä¹ˆè¿™æ ·å°±å®Œç¾äº†å—ï¼Ÿè¿˜æ²¡æœ‰ï¼Œå¦‚æœä½ ç»†å¿ƒï¼Œä½ ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬ä¸Šé¢åœ¨ç¬¬2æ­¥ä¸­ä¿®æ”¹äº† webpack.config.js è¿™ä¸ªåŸºæœ¬é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹äº†å…¥å£é…ç½®ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>entry: [&#39;webpack-hot-middleware/client&#39;, path.resolve(__dirname, &#39;../app/index/index.js&#39;)],\n</code></pre><p>è¿™ä¹Ÿä¼šå¯¼è‡´æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„é—®é¢˜ï¼Œå°±æ˜¯ä¼šå½±å“æ„å»ºï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸è¦ç›´æ¥ä¿®æ”¹ webpack.config.js æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯åœ¨ webpack.dev.conf.js æ–‡ä»¶ä¸­é…ç½®ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>\nvar HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)\nvar path = require(&#39;path&#39;);\nvar webpack = require(&#39;webpack&#39;);\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require(&#39;./webpack.config&#39;);\n\nconfig.output.publicPath = &#39;/&#39;;\n\nconfig.plugins = [\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin(),\n    new HtmlWebpackPlugin({\n        filename: &#39;app/index/index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n];\n\n// åŠ¨æ€å‘å…¥å£é…ç½®ä¸­æ³¨å…¥ webpack-hot-middleware/client\nvar devClient = &#39;webpack-hot-middleware/client&#39;;\nObject.keys(config.entry).forEach(function (name, i) {\n    var extras = [devClient]\n    config.entry[name] = extras.concat(config.entry[name])\n})\n\nmodule.exports = config;\n</code></pre><p>ä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯è¦è®² webpack.config.js æ–‡ä»¶ä¸­çš„å…¥å£é…ç½®ä¿®æ”¹ä¸ºå¤šå…¥å£é…ç½®çš„æ–¹å¼ï¼Œè¿™ä¸ªä¿®æ”¹ä¸ä¼šå½±å“æ„å»ºï¼Œæ‰€ä»¥æ— æ‰€è°“ï¼š</p>\n<pre><code>entry: {\n    index: path.resolve(__dirname, &#39;../app/index/index.js&#39;)\n},\n</code></pre><p>é‡å¯ä½ çš„æœåŠ¡ï¼Œåˆ·æ–°ä¸€ä¸‹æµè§ˆå™¨ï¼Œç„¶åä¿®æ”¹ Favlist.vue ä¸­çš„èƒŒæ™¯è‰²ä¸º greenï¼š</p>\n<pre><code>&lt;style&gt;\n    html{\n        background: green;\n    }\n&lt;/style&gt;\n</code></pre><p>å†æ¬¡æŸ¥çœ‹æµè§ˆå™¨ï¼Œå‘ç°å¯ä»¥çƒ­åŠ è½½ã€‚ä½†æ˜¯è¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿè¿˜æ²¡æœ‰ï¼Œä¸ä¿¡ä½ ä¿®æ”¹ index.html æ–‡ä»¶ï¼Œçœ‹çœ‹ä¼šä¸ä¼šçƒ­åŠ è½½ï¼Œå®é™…ä¸Šä¸ä¼šï¼Œä½ è¿˜æ˜¯éœ€è¦æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œä¸ºäº†èƒ½å¤Ÿå½“ index.html æ–‡ä»¶çš„æ”¹åŠ¨ä¹Ÿèƒ½å¤Ÿè§¦å‘è‡ªåŠ¨åˆ·æ–°ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›å·¥ä½œã€‚</p>\n<p><em><b>ç¬¬ä¸€æ­¥ï¼šåœ¨ dev-server.js æ–‡ä»¶ä¸­ç›‘å¬htmlæ–‡ä»¶æ”¹å˜äº‹ä»¶ï¼Œä¿®æ”¹åçš„ dev-server.js æ–‡ä»¶å¦‚ä¸‹ï¼š</b></em></p>\n<pre><code>// å¼•å…¥å¿…è¦çš„æ¨¡å—\nvar express = require(&#39;express&#39;)\nvar webpack = require(&#39;webpack&#39;)\nvar config = require(&#39;./webpack.dev.conf&#39;)\n\n// åˆ›å»ºä¸€ä¸ªexpresså®ä¾‹\nvar app = express()\n\n// è°ƒç”¨webpackå¹¶æŠŠé…ç½®ä¼ é€’è¿‡å»\nvar compiler = webpack(config)\n\n// ä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶\nvar devMiddleware = require(&#39;webpack-dev-middleware&#39;)(compiler, {\n    publicPath: config.output.publicPath,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\nvar hotMiddleware = require(&#39;webpack-hot-middleware&#39;)(compiler)\n\n// webpackæ’ä»¶ï¼Œç›‘å¬htmlæ–‡ä»¶æ”¹å˜äº‹ä»¶\ncompiler.plugin(&#39;compilation&#39;, function (compilation) {\n    compilation.plugin(&#39;html-webpack-plugin-after-emit&#39;, function (data, cb) {\n        // å‘å¸ƒäº‹ä»¶\n        hotMiddleware.publish({ action: &#39;reload&#39; })\n        cb()\n    })\n})\n\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(devMiddleware)\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(hotMiddleware)\n\n// ç›‘å¬ 8888ç«¯å£ï¼Œå¼€å¯æœåŠ¡å™¨\napp.listen(8888, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log(&#39;Listening at http://localhost:8888&#39;)\n})\n</code></pre><p>ä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¢åŠ äº†å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>// webpackæ’ä»¶ï¼Œç›‘å¬htmlæ–‡ä»¶æ”¹å˜äº‹ä»¶\ncompiler.plugin(&#39;compilation&#39;, function (compilation) {\n    compilation.plugin(&#39;html-webpack-plugin-after-emit&#39;, function (data, cb) {\n        // å‘å¸ƒäº‹ä»¶\n        hotMiddleware.publish({ action: &#39;reload&#39; })\n        cb()\n    })\n})\n</code></pre><p>è¿™æ®µä»£ç å¯èƒ½ä½ çœ‹ä¸æ‡‚ï¼Œå› ä¸ºè¿™æ¶‰åŠåˆ°webpackæ’ä»¶çš„ç¼–å†™ï¼Œè¯»è€…å¯ä»¥å‚é˜…ä¸‹é¢çš„è¿æ¥ï¼š</p>\n<p><a href=\"https://github.com/webpack/docs/wiki/plugins\" target=\"_blank\" rel=\"external\">webpack æ’ä»¶doc1</a></p>\n<p><a href=\"https://github.com/webpack/docs/wiki/How-to-write-a-plugin\" target=\"_blank\" rel=\"external\">webpack æ’ä»¶doc2</a></p>\n<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬ç›‘å¬äº† â€˜html-webpack-plugin-after-emitâ€™ äº‹ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹ä»¶æ˜¯ä»å“ªé‡Œå‘å°„çš„å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡åå­—å¯çŸ¥ï¼Œè¿™ä¸ªäº‹ä»¶åº”è¯¥å’Œhtml-webpack-pluginè¿™ä¸ªæ’ä»¶æœ‰å…³ï¼Œåœ¨npmæœç´¢ <a href=\"https://www.npmjs.com/package/html-webpack-plugin\" target=\"_blank\" rel=\"external\">html-webpack-plugin</a> æ’ä»¶ï¼Œåœ¨é¡µé¢æœ€åº•éƒ¨æˆ‘ä»¬å¯ä»¥å‘ç°å¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325i.jpg\" alt=\"html-webpack-pluginå¯ä»¥å‘å°„äº‹ä»¶\"></p>\n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œhtml-webpack-plugin è¿™ä¸ªæ’ä»¶çš„ç¡®æä¾›äº†å‡ ä¸ªå¯é€‰çš„äº‹ä»¶ï¼Œä¸‹é¢ä¹Ÿæä¾›äº†ä½¿ç”¨æ–¹æ³•ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿç›‘å¬åˆ°htmlæ–‡ä»¶çš„å˜åŒ–ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„ä»£ç å‘å¸ƒä¸€ä¸ªäº‹ä»¶ï¼š</p>\n<pre><code>hotMiddleware.publish({ action: &#39;reload&#39; })\n</code></pre><p><em><b>ç¬¬äºŒæ­¥ï¼šä¿®æ”¹ webpack.dev.conf.js æ–‡ä»¶å¦‚ä¸‹ï¼š</b></em></p>\n<pre><code>\nvar HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)\nvar path = require(&#39;path&#39;);\nvar webpack = require(&#39;webpack&#39;);\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require(&#39;./webpack.config&#39;);\n\nconfig.output.publicPath = &#39;/&#39;;\n\nconfig.plugins = [\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin(),\n    new HtmlWebpackPlugin({\n        filename: &#39;app/index/index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n];\n\n// var devClient = &#39;webpack-hot-middleware/client&#39;;\nvar devClient = &#39;./build/dev-client&#39;;\nObject.keys(config.entry).forEach(function (name, i) {\n    var extras = [devClient]\n    config.entry[name] = extras.concat(config.entry[name])\n})\n\nmodule.exports = config;\n</code></pre><p>æˆ‘ä»¬ä¿®æ”¹äº†devClientå˜é‡ï¼Œå°† â€˜webpack-hot-middleware/clientâ€™ æ›¿æ¢æˆ â€˜./build/dev-clientâ€™ï¼Œæœ€ç»ˆä¼šå¯¼è‡´ï¼Œæˆ‘ä»¬å…¥å£é…ç½®ä¼šå˜æˆä¸‹é¢è¿™æ ·ï¼š</p>\n<pre><code>entry: {\n    index: [\n        &#39;./build/dev-client&#39;,\n        path.resolve(__dirname, &#39;../app/index/index.js&#39;)\n    ]\n},\n</code></pre><p><em><b>ç¬¬ä¸‰æ­¥ï¼šæ–°å»º build/dev-client.js æ–‡ä»¶ï¼Œå¹¶ç¼–è¾‘å¦‚ä¸‹å†…å®¹ï¼š</b></em></p>\n<pre><code>var hotClient = require(&#39;webpack-hot-middleware/client&#39;)\n\n// è®¢é˜…äº‹ä»¶ï¼Œå½“ event.action === &#39;reload&#39; æ—¶æ‰§è¡Œé¡µé¢åˆ·æ–°\nhotClient.subscribe(function (event) {\n    if (event.action === &#39;reload&#39;) {\n        window.location.reload()\n    }\n})\n</code></pre><p>è¿™é‡Œæˆ‘ä»¬é™¤äº†å¼•å…¥ â€˜webpack-hot-middleware/clientâ€™ ä¹‹å¤–è®¢é˜…äº†ä¸€ä¸ªäº‹ä»¶ï¼Œå½“ event.action === â€˜reloadâ€™ æ—¶è§¦å‘ï¼Œè¿˜è®°å¾—æˆ‘ä»¬åœ¨ dev-server.js ä¸­å‘å¸ƒçš„äº‹ä»¶å—ï¼š</p>\n<pre><code>hotMiddleware.publish({ action: &#39;reload&#39; })\n</code></pre><p>è¿™æ ·ï¼Œå½“æˆ‘ä»¬çš„htmlæ–‡ä»¶æ”¹å˜åï¼Œå°±å¯ä»¥ç›‘å¬çš„åˆ°ï¼Œæœ€ç»ˆä¼šæ‰§è¡Œé¡µé¢åˆ·æ–°ï¼Œè€Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åˆ·æ–°ï¼Œç°åœ¨é‡å¯æœåŠ¡ï¼Œå»å°è¯•èƒ½å¦å¯¹htmlæ–‡ä»¶çƒ­åŠ è½½å§ã€‚ç­”æ¡ˆæ˜¯yesã€‚<br>å¥½äº†ï¼Œå¼€å‘ç¯å¢ƒç»ˆäºæå®šäº†ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥è°ˆä¸€è°ˆç”Ÿäº§ç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯æ„å»ºè¾“å‡ºï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ‰§è¡Œä¸€ä¸‹æ„å»ºå‘½ä»¤ï¼Œçœ‹çœ‹è¾“å‡ºçš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Œä¸ºäº†ä¸å¿…æ¯æ¬¡éƒ½è¦è¾“å…¥ä¸‹é¢è¿™æ¡é•¿å‘½ä»¤ï¼š</p>\n<pre><code>webpack --display-modules --display-chunks --config build/webpack.config.js\n</code></pre><p>æˆ‘ä»¬åœ¨ package.js æ–‡ä»¶ä¸­æ·»åŠ  â€œscriptsâ€ é¡¹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325m.jpg\" alt=\"npm\"></p>\n<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ‰§è¡Œä¸‹é¢å‘½ä»¤æ¥è¿›è¡Œæ„å»ºï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜å¢åŠ äº†ä¸€æ¡å¼€å¯å¼€å‘æœåŠ¡å™¨çš„å‘½ä»¤ï¼š</p>\n<pre><code>// æ„å»º\nnpm run build\n// å¼€å¯å¼€å‘æœåŠ¡å™¨\nnpm run dev\n</code></pre><p>å›è¿‡å¤´æ¥ï¼Œæˆ‘ä»¬æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š npm run buildï¼ŒæŸ¥çœ‹è¾“å‡ºå†…å®¹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325n.jpg\" alt=\"è¾“å‡ºå†…å®¹\"></p>\n<p>ç°åœ¨æˆ‘ä»¬åªæœ‰ä¸€ä¸ªjsæ–‡ä»¶è¾“å‡ºäº†ï¼Œå¹¶æ²¡æœ‰cssæ–‡ä»¶è¾“å‡ºï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬å¸Œæœ›cssæ–‡ä»¶ç”Ÿæˆå•ç‹¬çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨ extract-text-webpack-plugin æ’ä»¶ï¼Œå®‰è£…ï¼š</p>\n<pre><code>npm install extract-text-webpack-plugin --save-dev\n</code></pre><p>ç„¶ååœ¨buildç›®å½•ä¸‹æ–°å»º webpack.prod.conf.js æ–‡ä»¶ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªä½¿æˆ‘ä»¬åŒºåˆ«äºå¼€å‘ç¯å¢ƒï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œå¹¶ç¼–è¾‘ä¸€ä¸‹å†…å®¹ï¼š</p>\n<pre><code>\nvar HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)\nvar ExtractTextPlugin = require(&#39;extract-text-webpack-plugin&#39;)\nvar path = require(&#39;path&#39;);\nvar webpack = require(&#39;webpack&#39;);\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require(&#39;./webpack.config&#39;);\n\nconfig.vue = {\n    loaders: {\n        css: ExtractTextPlugin.extract(&quot;css&quot;)\n    }\n};\n\nconfig.plugins = [\n    // æå–cssä¸ºå•æ–‡ä»¶\n    new ExtractTextPlugin(&quot;../[name].[contenthash].css&quot;),\n\n    new HtmlWebpackPlugin({\n        filename: &#39;../index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n];\n\nmodule.exports = config;\n</code></pre><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¦†ç›–äº† webpack.config.js é…ç½®æ–‡ä»¶çš„ config.plugins é¡¹ï¼Œå¹¶ä¸”æ·»åŠ äº† config.vue é¡¹ï¼Œè¡¥è¡€è¯çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå°±æ˜¯è¿™ä¹ˆç”¨çš„ï¼Œå¦‚æœä¸€å®šè¦çŸ¥é“ä¸ºä»€ä¹ˆä¹Ÿå¯ä»¥ï¼Œè¿™éœ€è¦ä½ å¤šå»äº†è§£vueä»¥åŠvue-loaderçš„å·¥ä½œåŸç†ï¼Œè¿™é‡Œæœ‰è¿æ¥<a href=\"http://vuejs.github.io/vue-loader/configurations/extract-css.html\" target=\"_blank\" rel=\"external\">ç‚¹å‡»è¿™é‡Œ</a><br>ç„¶åä¿®æ”¹ package.json æ–‡ä»¶ä¸­çš„ script é¡¹ä¸ºå¦‚ä¸‹ï¼š</p>\n<pre><code>&quot;scripts&quot;: {\n    &quot;build&quot;: &quot;webpack --display-modules --display-chunks --config build/webpack.prod.conf.js&quot;,\n    &quot;dev&quot;: &quot;node ./build/dev-server.js&quot;\n},\n</code></pre><p>æˆ‘ä»¬ä½¿ç”¨ webpack.prod.conf.js ä¸ºé…ç½®å»æ„å»ºï¼Œæ¥ä¸‹æ¥æ‰§è¡Œï¼š</p>\n<pre><code>npm run build\n</code></pre><p>æŸ¥çœ‹ä½ çš„è¾“å‡ºå†…å®¹ï¼Œå¦‚ä¸‹å›¾ï¼Œcssæ–‡ä»¶æœªæå–å‡ºæ¥äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325l.jpg\" alt=\"cssæ–‡ä»¶è¢«æå–\"></p>\n<p>å¦å¤–æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å¦‚ä¸‹æ’ä»¶åœ¨æˆ‘ä»¬çš„ webpack.prod.conf.js æ–‡ä»¶ä¸­ï¼Œä½œä¸ºç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼š</p>\n<pre><code>config.plugins = [\n    new webpack.DefinePlugin({\n        &#39;process.env&#39;: {\n            NODE_ENV: &#39;&quot;production&quot;&#39;\n        }\n    }),\n    // å‹ç¼©ä»£ç \n    new webpack.optimize.UglifyJsPlugin({\n        compress: {\n            warnings: false\n        }\n    }),\n    new webpack.optimize.OccurenceOrderPlugin(),\n    // æå–cssä¸ºå•æ–‡ä»¶\n    new ExtractTextPlugin(&quot;../[name].[contenthash].css&quot;),\n    new HtmlWebpackPlugin({\n        filename: &#39;../index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n];\n</code></pre><p>å¤§å®¶å¯ä»¥æœç´¢è¿™äº›æ’ä»¶ï¼Œäº†è§£ä»–çš„ä½œç”¨ï¼Œè¿™ç¯‡æ–‡ç« è¦ä»‹ç»çš„å¤ªå¤šï¼Œæ‰€ä»¥æˆ‘ä¸€ä¸€è®²è§£äº†ã€‚</p>\n<p>åˆ°è¿™é‡Œå®é™…ä¸Šæ­å»ºçš„å·²ç»å·®ä¸å¤šäº†ï¼Œå”¯ä¸€è¦åšçš„å°±æ˜¯å®Œå–„ï¼Œæ¯”å¦‚å…¬å…±æ¨¡å—çš„æå–ï¼Œå¦‚ä½•åŠ è½½å›¾ç‰‡ï¼Œå¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•æå–å…¬å…±æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ CommonsChunkPlugin æ’ä»¶ï¼Œåœ¨ webpack.prod.conf.js æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹æ’ä»¶ï¼š</p>\n<pre><code>new webpack.optimize.CommonsChunkPlugin({\n    name: &#39;vendors&#39;,\n    filename: &#39;vendors.js&#39;,\n}),\n</code></pre><p>ç„¶ååœ¨ webpack.config.js æ–‡ä»¶ä¸­é…ç½®å…¥å£æ–‡ä»¶ï¼š</p>\n<pre><code>entry: {\n    index: path.resolve(__dirname, &#39;../app/index/index.js&#39;),\n    vendors: [\n        &#39;Vue&#39;\n    ]\n},\n</code></pre><p>ä¸Šé¢ä»£ç çš„æ„æ€æ˜¯ï¼Œæˆ‘ä»¬æŠŠVue.jså½“åšå…¬å…±æ¨¡å—å•ç‹¬æ‰“åŒ…ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªæ•°ç»„ä¸­å¢åŠ å…¶ä»–æ¨¡å—ï¼Œä¸€èµ·ä½œä¸ºå…¬å…±æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼Œç„¶åæŸ¥çœ‹è¾“å‡ºï¼Œå¦‚ä¸‹å›¾ï¼ŒæˆåŠŸæå–ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325u.jpg\" alt=\"æå–å…¬å…±æ¨¡å—\"></p>\n<p>å¯¹äºåŠ è½½å›¾ç‰‡çš„é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œwebpackçš„å“²å­¦æ˜¯ä¸€åˆ‡çš†æ˜¯æ¨¡å—ï¼Œç„¶åé€šè¿‡ç›¸åº”çš„loaderå»åŠ è½½ï¼Œæ‰€ä»¥åŠ è½½å›¾ç‰‡ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ° url-loaderï¼Œåœ¨webpack.config.js æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªloaderé…ç½®ï¼š</p>\n<pre><code>loaders: [\n    // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n    {\n        test: /\\.vue$/, \n        loader: &#39;vue&#39;   \n    },\n    {\n        test: /\\.js$/,\n        loader: &#39;babel?presets=es2015&#39;,\n        exclude: /node_modules/\n    },\n    // åŠ è½½å›¾ç‰‡\n    {\n        test: /\\.(png|jpg|gif|svg)$/,\n        loader: &#39;url&#39;,\n        query: {\n            limit: 10000,\n            name: &#39;[name].[ext]?[hash:7]&#39;\n        }\n    }\n]\n</code></pre><p>è¿™æ ·ï¼Œå½“æˆ‘ä»¬çš„cssæ ·å¼è¡¨æ–‡ä»¶ä¸­ä½¿ç”¨ url(xxxx.png)æˆ–è€…jsä¸­å»require(â€˜xxxx.pngâ€™)çš„æ—¶å€™ï¼Œwebpackå°±çŸ¥é“å¦‚ä½•å¤„ç†ï¼Œå¦å¤–url-loaderçš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œä»¥ä¸Šé¢çš„é…ç½®æ¥è¯´ï¼Œå½“æˆ‘ä»¬çš„å›¾ç‰‡å¤§å°å°äº10000å­—èŠ‚çš„æ—¶å€™ï¼Œwebpackä¼šæŠŠå›¾ç‰‡è½¬æ¢æˆbase64æ ¼å¼æ’å…¥åˆ°ä»£ç ä¸­ï¼Œä»è€Œå‡å°‘httpè¯·æ±‚ï¼Œå¦å¤–ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œè°ˆåˆ°çš„ä»»ä½•ä¸€ä¸ªloaderéƒ½å¯ä»¥åœ¨npmä¸­æŸ¥æ‰¾åˆ°ï¼Œè¯»è€…å¯ä»¥æŸ¥è¯¢æ›´å¤šçš„loaderäº†è§£å¹¶ä½¿ç”¨ã€‚</p>\n","site":{"data":{}},"excerpt":"<p>äººç±»çš„å‘å±•å¾—ç›Šäºå¯¹è¿½æ±‚ä¸æ–­çš„æå‡ï¼Œåœ¨èƒ½æ´»ç€çš„åŸºç¡€ä¸Šæ˜¯å¦è¦æ´»å¾—æ½‡æ´’ä¸€ç‚¹ï¼ŒæŠ€æœ¯çš„å‘å±•äº¦å¦‚æ˜¯ã€‚åœ¨å…¬å¸ä½œä¸ºä¸€ä¸ªæœ€æœ€æœ€æœ€æœ€æœ€æœ€åº•å±‚çš„æ¬ç –ç å†œï¼Œç»å†äº†ä¸¤ä¸ªç‰ˆæœ¬çš„é“¸(zhe)ç‚¼(mo)ä¹‹åï¼Œæˆ‘ç—›ä¸‹å†³å¿ƒä»Šåä¸€å®šè¦ï¼šâ€¦â€¦â€¦â€¦..ä¸€å®šè¦å’Œäº§å“æƒº(shi)æƒº(bu)ç›¸(liang)æƒœ(li)ã€‚</p>","more":"<h1 id=\"å¼€å§‹ä¹‹å‰\"><a href=\"#å¼€å§‹ä¹‹å‰\" class=\"headerlink\" title=\"å¼€å§‹ä¹‹å‰\"></a>å¼€å§‹ä¹‹å‰</h1><p>æœ¬æ–‡åŒ…å«ä»¥ä¸‹æŠ€æœ¯ï¼Œæ–‡ä¸­å°½é‡ç»™ä¸è¯¦ç»†çš„æè¿°ï¼Œå¹¶ä¸”é™„ä¸Šå‚è€ƒé“¾æ¥ï¼Œè¯»è€…å¯ä»¥æ·±å…¥å­¦ä¹ ï¼š</p>\n<p>1ã€<a href=\"http://webpack.github.io/\" target=\"_blank\" rel=\"external\">webpack</a><br>2ã€<a href=\"http://cn.vuejs.org/\" target=\"_blank\" rel=\"external\">Vue.js</a><br>3ã€<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"external\">npm</a><br>4ã€nodejs â€”- è¿™ä¸ªå°±ä¸ç»™è¿æ¥äº†ï¼Œå› ä¸ºä¸Šé¢çš„è¿æ¥éƒ½æ˜¯åœ¨ä½ å®è·µçš„è¿‡ç¨‹ä¸­è¦å»ä¸æ–­è®¿é—®çš„<br>5ã€<a href=\"http://es6.ruanyifeng.com/#README\" target=\"_blank\" rel=\"external\">ES6è¯­æ³•</a></p>\n<p>å¦å¤–ï¼Œè¿™å¥—æ•™ç¨‹çš„ä»£ç éƒ½åœ¨æˆ‘çš„githubä¸Šï¼Œè¯»è€…å¯ä»¥å¯¹ç…§ç€ä»£ç æ¥çœ‹ï¼Œä¸è¿‡è¿˜æ˜¯å¸Œæœ›å¤§å®¶è‡ªå·±äº²æ‰‹æ­å»ºï¼Œä½“éªŒè¿™ä¸ªè¿‡ç¨‹ï¼Œgitåœ°å€ï¼š</p>\n<p><a href=\"https://github.com/HcySunYang/h5_frame\" target=\"_blank\" rel=\"external\">gitåœ°å€</a></p>\n<h1 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h1><p>åœ¨å¯¹ç€äº§å“é«˜ä¸¾ä¸­æŒ‡æ€’å‘å¿ƒä¸­ä¹‹æ„¤åï¼ŒçœŸæ­£èƒ½å¤Ÿè§£å†³é—®é¢˜çš„æ˜¯è‡ªèº«ä¸Šçš„æ”¹å˜ï¼Œæœ‰å¥è¯è¯´çš„å¥½ï¼šä½ è™½ç„¶æ”¹å˜ä¸äº†å…¨ä¸–ç•Œï¼Œä½†æ˜¯ä½ æœ‰æœºä¼šæ”¹å˜ä½ è‡ªå·±ã€‚ç§‰æ‰¿ç€â€œä¸å¬è€äººè¨€ï¼Œåƒäºåœ¨çœ¼å‰â€çš„ä¼˜è‰¯ä½œé£ï¼Œæˆ‘è¿˜æ˜¯å†³å®šç©ç«è‡ªç„šã€‚</p>\n<h3 id=\"é—®é¢˜æ‰€åœ¨\"><a href=\"#é—®é¢˜æ‰€åœ¨\" class=\"headerlink\" title=\"é—®é¢˜æ‰€åœ¨\"></a>é—®é¢˜æ‰€åœ¨</h3><p>ä¹‹å‰çš„é¡¹ç›®æ€»ç»“ä¸ºä»¥ä¸‹å†…å®¹ï¼š</p>\n<blockquote>\n<p>1ã€AMDæ¨¡å—è§„èŒƒå¼€å‘ï¼Œä½¿ç”¨requirejså®ç°ï¼Œä½¿ç”¨rjsæ‰“åŒ…ï¼Œæœ€ç»ˆå¯¼è‡´çš„ç»“æœæ˜¯ï¼Œè¾“å‡ºçš„é¡¹ç›®è‡ƒè‚¿ï¼Œè‚¿çš„å°±åƒä¸€å¨ç‹—ä¸ç†â€¦â€¦ä¸å¿ç›´è§†<br>2ã€ä½¿ç”¨gulpè¿›è¡Œæ‰“åŒ…ï¼Œè¿™ä¸€ç‚¹è²Œä¼¼æ²¡æœ‰å¯åæ§½çš„åœ°æ–¹ï¼Œæ¯•ç«Ÿéƒ½æ˜¯è¢«gruntæŠ˜ç£¨è¿‡æ¥çš„â€¦â€¦<br>3ã€æ•°æ®çš„æ¸²æŸ“ä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼Œè¿™å°±æ„å‘³ç€ä½ è¦æ‰‹åŠ¨ç®¡ç†DOMï¼Œè¿™æ ·ï¼Œä½ çš„ä¸šåŠ¡ä»£ç å‚æ‚ç€ä½ çš„æ•°æ®å¤„ç†ã€DOMç®¡ç†ï¼Œæ»¡å±å¹•çš„æ¯›çº¿â€¦â€¦<br>4ã€æ¨¡å—åŒ–ä¸è¶³ï¼Œè™½ç„¶ä½¿ç”¨requireè¿›è¡Œäº†æ¨¡å—ç®¡ç†ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘è¿˜æ˜¯å……æ–¥åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œè¿™ä¸æœ€è¿‘æµè¡Œçš„ç»„ä»¶åŒ–æ¦‚å¿µå†°ç«ä¸å®¹ï¼Œæ‹’ç»è½åâ€¦â€¦<br>5ã€è¯¸å¦‚ æ‰©å±•æ€§ ã€ ç»´æŠ¤æ€§ æˆ‘æƒ³æ—©å·²ä¸è¨€è€Œå–»ï¼Œä¸éœ€èµ˜è¿°ï¼Œå†è¿°å°±çœŸTMæ˜¯ç´¯èµ˜äº†ã€‚</p>\n</blockquote>\n<p>æ–°æ¡†æ¶è¦è§£å†³çš„é—®é¢˜ï¼š</p>\n<blockquote>\n<p>1ã€è¦ä½¿æ„å»ºè¾“å‡ºçš„é¡¹ç›®åƒä½ é‚»å®¶å°å¦¹å¦¹ä¸€æ ·ã€ç˜¦çš„çš®åŒ…éª¨ã€‚ï¼ˆä¹Ÿè®¸æ˜¯è¥å…»ä¸è‰¯ï¼‰<br>2ã€è¦å®ç°çœŸæ­£çš„æ¨¡å—åŒ–ã€ç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼ï¼ŒçœŸæ­£å»è§£å†³ç»´æŠ¤éš¾ã€æ‰©å±•éš¾çš„é—®é¢˜ã€‚ï¼ˆä»æ­¤ä¸æ€•äº§å“æ±ªï¼‰<br>3ã€ä¸šåŠ¡é€»è¾‘ä¸“æ³¨æ•°æ®å¤„ç†ï¼Œæ‰‹åŠ¨ç®¡ç†DOMçš„å¹´ä»£å°±åƒâ€¦â€¦åƒä»€ä¹ˆå‘¢ï¼Ÿï¼ˆæ¯•ç«Ÿæˆäººç”¨å“ä¹Ÿè¶Šæ¥è¶Šè‡ªåŠ¨åŒ–äº†ï¼‰<br>4ã€ç­‰ç­‰â€¦â€¦.ï¼ˆå…¶å®å¥½å¤„æ— éœ€èµ˜è¿°ï¼Œæ¥ï¼Œå¾€ä¸‹çœ‹ï¼‰</p>\n</blockquote>\n<p>ä¸ºäº†è¾¾æˆä»¥ä¸Šç›®æ ‡ï¼Œæˆ‘ä»¬æ¢è®¨ä¸€ä¸‹è§£å†³æ–¹æ¡ˆï¼š</p>\n<p><em><b>1ã€è€é¡¹ç›®çš„æ„å»ºè¾“å‡ºä¸ºä»€ä¹ˆè‡ƒè‚¿ï¼Ÿ</b></em></p>\n<p>ç­”ï¼šå› ä¸ºä½¿ç”¨çš„æ˜¯requireçš„rjsè¿›è¡Œæ„å»ºæ‰“åŒ…çš„ï¼Œäº†è§£rjsçš„éƒ½çŸ¥é“ï¼Œå®ƒä¼šæŠŠé¡¹ç›®æ‰€æœ‰ä¾èµ–éƒ½æ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰å¾ˆå¤šé¡µé¢ä¾èµ–è¿™ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆrjså¹¶ä¸ä¼šæŠŠè¿™ä¸ªæ¨¡å—æå–å‡ºæ¥ä½œä¸ºå…¬å…±æ¨¡å—ï¼Œæ‰€ä»¥å°±ä¼šæœ‰å¾ˆå¤šå¤åˆ¶æ€§çš„å†…å®¹ï¼Œæ‰€ä»¥é¡¹ç›®è‡ªç„¶è‡ƒè‚¿ã€‚</p>\n<p><em>è§£å†³æ–¹æ¡ˆï¼š</em>ä½¿ç”¨webpacké…åˆç›¸åº”çš„loaderï¼Œæ¥å®Œæˆæ¨¡å—åŠ è½½å’Œæ„å»ºçš„å·¥ä½œã€‚</p>\n<p><em><b>2ã€è€é¡¹ç›®ä¸ºä»€ä¹ˆæ¨¡å—åŒ–çš„ä¸è¶³ï¼Ÿ</b></em></p>\n<p>ç­”ï¼šè€é¡¹ç›®çš„æ¨¡å—åŒ–ï¼Œä»…ä»…ä½“ç°åœ¨jså±‚é¢ï¼Œè§£å†³äº†æ¨¡å—å¼•ç”¨çš„é—®é¢˜ï¼Œä½†åœ¨å¼€å‘æ–¹å¼ä¸Šï¼Œä¾ç„¶å¯ä»¥çœ‹åšæ˜¯è¿‡ç¨‹å¼çš„ï¼Œè¿™æ ·çš„ç»“æœå°±å¯¼è‡´äº†é¡¹ç›®çš„éš¾æ‰©å±•å’Œéš¾ç»´æŠ¤ï¼Œè®©å¼€å‘äººå‘˜åœ¨ä¸äº§å“æ±ªçš„å¯¹å³™ä¸­ï¼Œå¹¶ä¸ä»å®¹ã€‚</p>\n<p><em>è§£å†³æ–¹æ¡ˆï¼š</em>Vue.jsèƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³ç»„ä»¶åŒ–çš„é—®é¢˜ï¼Œé…åˆ Vue.js å®˜æ–¹æä¾›çš„ <em>vue-loader</em> èƒ½å¤Ÿå¾ˆå¥½çš„ç»“åˆwebpackåšç»„ä»¶åŒ–çš„å¼€å‘æ¶æ„ã€‚</p>\n<p><em><b>3ã€å¦‚ä½•é¿å…æ‰‹åŠ¨ç®¡ç†DOMï¼Ÿ</b></em></p>\n<p>ç­”ï¼šå¦‚æœä½ åœ¨åšæ•°æ®å±•ç¤ºè¿™ä¸€å—çš„å¼€å‘å·¥ä½œï¼Œç›¸ä¿¡ä½ ä¸€å®šä½“ä¼šé¢‡æ·±ï¼Œå‘é€httpè¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œæ‹¿åˆ°è¿”å›çš„æ•°æ®åæ‰‹åŠ¨æ¸²æŸ“DOMè‡³é¡µé¢ï¼Œè¿™æ˜¯æœ€åŸå§‹çš„å¼€å‘æ–¹å¼ï¼Œæ— éå†åŠ ä¸€ä¸ªæ¨¡æ¿å¼•æ“ä¹‹ç±»çš„ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯é¿å…ä¸äº†æ‰‹åŠ¨æ¸²æŸ“ï¼Œå¦‚æœé¡µé¢é€»è¾‘å¤æ‚ï¼Œæ¯”å¦‚ç»™ä½ æ¥ä¸€ä¸ªç¿»é¡µçš„åŠŸèƒ½ï¼Œå†æ¥ä¸€ä¸ªç­›é€‰é¡¹ï¼Œä¼°è®¡ä½ ä¼šè§‰å¾—ä¸–ç•Œå¹¶ä¸é‚£ä¹ˆç¾å¥½ã€‚</p>\n<p><em>è§£å†³æ–¹æ¡ˆï¼š</em>MVVMæ¨¡å¼èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€ŒVue.jsçš„æ ¸å¿ƒä¹Ÿæ˜¯MVVMã€‚</p>\n<h1 id=\"webpack\"><a href=\"#webpack\" class=\"headerlink\" title=\"webpack\"></a>webpack</h1><p>ä½ è‚¯å®šå¬è¯´è¿‡webpackï¼Œå¦‚æœç›´æ¥å¯¹ä½ æè¿°ä»€ä¹ˆæ˜¯webpackä½ å¯èƒ½æ„Ÿå—ä¸åˆ°ä»–çš„å¥½å¤„ï¼Œé‚£ä¹ˆåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ç›¸ä¿¡ä½ è‚¯å®šä½¿ç”¨è¿‡gulpæˆ–è€…gruntï¼Œå¦‚æœä½ æ²¡ä½¿ç”¨è¿‡ä¹Ÿå¯ä»¥ï¼Œè‡³å°‘ä½ è¦å¬è¯´è¿‡å¹¶ä¸”çŸ¥é“gulpå’Œgruntæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œå‡å¦‚è¿™ä¸ªä½ è¿˜ä¸æ¸…æ¥šï¼Œé‚£ä¹ˆä½ å¹¶ä¸æ˜¯ä¸€ä¸ªåˆæ ¼çš„å‰ç«¯å¼€å‘äººå‘˜ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿä¸é€‚åˆä½ ï¼Œä½ å¯ä»¥ä»åŸºç¡€çš„åœ°æ–¹æ…¢æ…¢å­¦èµ·ã€‚</p>\n<p>gulpå’Œgruntå¯¹äºæ¯ä¸€ä¸ªå‰ç«¯å¼€å‘äººå‘˜åº”è¯¥æ˜¯ä¸é™Œç”Ÿçš„ï¼Œå®ƒä»¬ä¸ºå‰ç«¯æä¾›äº†è‡ªåŠ¨åŒ–æ„å»ºçš„èƒ½åŠ›ï¼Œå¹¶ä¸”æœ‰è‡ªå·±çš„ç”Ÿæ€åœˆï¼Œæœ‰å¾ˆå¤šæ’ä»¶ï¼Œä½¿å¾—æˆ‘ä»¬å‘Šåˆ«åˆ€è€•ç«ç§çš„æ—¶ä»£ï¼Œä½†æ˜¯å®ƒä»¬å¹¶æ²¡æœ‰è§£å†³æ¨¡å—åŠ è½½çš„é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰çš„é¡¹ç›®æ˜¯ä½¿ç”¨gulpæ„å»ºçš„ï¼Œä½†æ˜¯æ¨¡å—åŒ–å¾—å·¥ä½œè¿˜æ˜¯è¦é requireå’Œrjsæ¥å®Œæˆï¼Œè€Œgulpé™¤äº†å®Œæˆä¸€äº›å…¶ä»–ä»»åŠ¡ä¹‹å¤–ï¼Œå°±å˜æˆäº†å¸®åŠ©æˆ‘ä»¬å…é™¤æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤çš„å·¥å…·äº†ï¼Œåˆ«æ— å®ƒç”¨ã€‚</p>\n<p>è€Œwebpackå°±ä¸åŒäº†ï¼Œwebpackçš„å“²å­¦æ˜¯ä¸€åˆ‡çš†æ˜¯æ¨¡å—ï¼Œæ— è®ºæ˜¯js/css/sass/img/coffeejs/ttfâ€¦.ç­‰ç­‰ï¼Œwebpackå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„loaderå»æŠŠä¸€åˆ‡èµ„æºå½“åšæ¨¡å—åŠ è½½ï¼Œè¿™æ ·å°±è§£å†³äº†æ¨¡å—ä¾èµ–çš„é—®é¢˜ï¼ŒåŒæ—¶ï¼Œåˆ©ç”¨æ’ä»¶è¿˜å¯ä»¥å¯¹é¡¹ç›®è¿›è¡Œä¼˜åŒ–ï¼Œç”±äºæ¨¡å—çš„åŠ è½½å’Œé¡¹ç›®çš„æ„å»ºä¼˜åŒ–éƒ½æ˜¯é€šè¿‡webpackä¸€ä¸ªâ€äººâ€œæ¥è§£å†³çš„ï¼Œæ‰€ä»¥æ¨¡å—çš„åŠ è½½å’Œé¡¹ç›®çš„æ„å»ºä¼˜åŒ–å¹¶ä¸æ˜¯æ— æœºåˆ†ç¦»çš„ï¼Œè€Œæ˜¯æœ‰æœºçš„ç»“åˆåœ¨ä¸€èµ·çš„ï¼Œæ˜¯ä¸€ä¸ªç»„åˆçš„è¿‡ç¨‹ï¼Œè¿™ä½¿å¾—webpackåœ¨è¿™æ–¹é¢èƒ½å¤Ÿå®Œæˆçš„æ›´å‡ºè‰²ï¼Œè¿™ä¹Ÿæ˜¯webpackçš„ä¼˜åŠ¿æ‰€åœ¨ã€‚</p>\n<p>å¦‚æœä½ çœ‹ä¸æ‡‚ä¸Šé¢çš„æè¿°ï¼Œæ²¡å…³ç³»ï¼Œä½ åªéœ€è¦çŸ¥é“ä¸€ä¸‹å‡ ç‚¹ï¼š</p>\n<p>1ã€è¿‡å»ä½¿ç”¨requireå’Œrjsç­‰è¿›è¡Œæ¨¡å—åŠ è½½çš„æ–¹å¼ï¼Œå¯ä»¥æ›¿æ¢ä¸ºwebpackæä¾›çš„æŒ‡å®šloaderå»å®Œæˆï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±å¼€å‘åŠ è½½ç‰¹å®šèµ„æºçš„loaderã€‚<br>2ã€è¿‡å»ä½¿ç”¨gulpå’Œgruntå®Œæˆé¡¹ç›®æ„å»ºä¼˜åŒ–çš„æ–¹å¼ï¼Œå¯ä»¥æ›¿æ¢æˆwebpackæä¾›çš„æ’ä»¶å’Œç‰¹å®šçš„é…ç½®å»å®Œæˆã€‚<br>3ã€ç”±äºæ¨¡å—çš„åŠ è½½å’Œé¡¹ç›®çš„æ„å»ºä¼˜åŒ–æœ‰æœºçš„ç»“åˆï¼Œæ‰€ä»¥webpackèƒ½å¤Ÿæ›´å¥½çš„å®Œæˆè¿™é¡¹å·¥ä½œ<br>4ã€å¹¶ä¸æ˜¯è¯´æœ‰äº†webpackå°±æ·˜æ±°çš„gulpç­‰ï¼Œæœ‰äº›ç‰¹å®šçš„ä»»åŠ¡ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨gulpå»è‡ªå®šä¹‰å®Œæˆçš„ã€‚ä½†æ˜¯ä¸ä¿è¯webpackçš„æœªæ¥å‘å±•è¶‹åŠ¿ä¼šæ€ä¹ˆæ ·ã€‚</p>\n<p>æœ€åï¼Œç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªå®˜æ–¹çš„æ•™ç¨‹ï¼Œè¿™ä¸ªæ•™ç¨‹çš„æœ€å¼€å§‹æœ‰å‘çš„åœ°æ–¹ï¼Œå¦‚æœè¯»è€…é‡åˆ°äº†å‘ï¼Œå¯ä»¥åœ¨è¿™é‡Œç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä¼šä¸ºå¤§å®¶è§£ç­”ï¼Œä¸è¿‡æ€»ä½“æ¥è®²ï¼Œè¿™ä¸ªæ•™ç¨‹é€‚åˆå…¥é—¨ï¼Œå”¯ä¸€ä¸è¶³çš„å°±æ˜¯æ•™ç¨‹æ˜¯è‹±æ–‡çš„ï¼Œè‹±æ–‡çš„ä¹Ÿä¸ç”¨æ€•ï¼Œæœ¬äººçš„è‹±è¯­æ²¡è¿‡å››çº§ï¼Œä½†æ˜¯ç°åœ¨ä¾ç„¶èƒ½å¤Ÿçœ‹å¾—æ‡‚è‹±æ–‡æŠ€æœ¯æ–‡ç« ã€‚æ•™ç¨‹é“¾æ¥ï¼š<a href=\"http://blog.madewithlove.be/post/webpack-your-bags/\" target=\"_blank\" rel=\"external\">http://blog.madewithlove.be/post/webpack-your-bags/</a></p>\n<h1 id=\"Vue-js\"><a href=\"#Vue-js\" class=\"headerlink\" title=\"Vue.js\"></a>Vue.js</h1><p><a href=\"http://cn.vuejs.org/\" target=\"_blank\" rel=\"external\">Vue.js</a>æ˜¯ä¸€ä¸ªMVVMæ¨¡å¼çš„æ¡†æ¶ï¼Œå¦‚æœè¯»è€…æœ‰angularç»éªŒï¼Œä¸€å®šèƒ½å¤Ÿå¾ˆå¿«å…¥é—¨Vueçš„ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨Vueè€Œä¸ç”¨angularï¼Œ<br>é¦–å…ˆï¼ŒVueçš„ä½“ç§¯å°ï¼Œè½»é‡åœ¨ç§»åŠ¨ç«¯å¼€å‘å§‹ç»ˆæ˜¯ä¸€ä¸ªä¸å¯å¿½ç•¥çš„è¯é¢˜ï¼Œå…¶æ¬¡ï¼ŒVueåœ¨å®ç°ä¸Šä¸angularæœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œè¯»è€…å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ä¸ªé“¾æ¥æ¥äº†è§£ï¼š</p>\n<p>1ã€<a href=\"http://cn.vuejs.org/guide/reactivity.html\" target=\"_blank\" rel=\"external\">Vueçš„å˜åŒ–è¿½è¸ªå’Œè®¡ç®—å±æ€§çš„åŒºåˆ«ç­‰</a></p>\n<p>2ã€<a href=\"http://cn.vuejs.org/guide/comparison.html\" target=\"_blank\" rel=\"external\">Vue ä¸ angular åŠ react ç­‰æ¡†æ¶çš„å¯¹æ¯”</a></p>\n<p>3ã€ç¬¬ä¸‰ç‚¹å°±æ˜¯Vueæä¾›äº†webpackçš„loader â€”-&gt; [vue-loader]ï¼Œä½¿ç”¨å®ƒå¯ä»¥è®©é¡¹ç›®çš„ç»„ä»¶åŒ–æ€æƒ³æ›´åŠ æ¸…æ™°</p>\n<p>ç»¼ä¸Šæ‰€è¿°ï¼Œè¿™å°±æ˜¯é€‰ç”¨Vueçš„åŸå› </p>\n<h1 id=\"npm-å’Œ-nodejs\"><a href=\"#npm-å’Œ-nodejs\" class=\"headerlink\" title=\"npm å’Œ nodejs\"></a>npm å’Œ nodejs</h1><p>npm çš„å…¨ç§°æ˜¯ <em>nodejsåŒ…ç®¡ç†</em>ï¼Œç°åœ¨è¶Šæ¥è¶Šå¤šçš„é¡¹ç›®(åŒ…)éƒ½å¯ä»¥é€šè¿‡npmæ¥å®‰è£…ç®¡ç†ï¼Œnodejsæ˜¯jsè¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„å¹³å°ï¼Œå®ƒä½¿å¾—jsçš„èƒ½åŠ›è¿›ä¸€æ­¥æé«˜ï¼Œæˆ‘ä»¬è¿˜è¦ä½¿ç”¨nodejsé…åˆ webpack æ¥å®Œæˆçƒ­åŠ è½½çš„åŠŸèƒ½ã€‚æ‰€ä»¥è¯»è€…æœ€å¥½æœ‰nodejsçš„å¼€å‘ç»éªŒï¼Œå¦‚æœæœ‰expressçš„ç»éªŒæ›´å¥½ã€‚</p>\n<h1 id=\"è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥ä»é›¶æ­å»ºè¿™ä¸ªé¡¹ç›®\"><a href=\"#è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥ä»é›¶æ­å»ºè¿™ä¸ªé¡¹ç›®\" class=\"headerlink\" title=\"è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥ä»é›¶æ­å»ºè¿™ä¸ªé¡¹ç›®\"></a>è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥ä»é›¶æ­å»ºè¿™ä¸ªé¡¹ç›®</h1><p>é¦–å…ˆæ–°å»ºä¸€ä¸ªç›®å½•ï¼Œåä¸º myProject ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ã€‚ç„¶åæ‰§è¡Œä¸€äº›åŸºæœ¬çš„æ­¥éª¤ï¼Œæ¯”å¦‚ npm init å‘½ä»¤ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ç”Ÿæˆ package.json æ–‡ä»¶ï¼Œè¿™å‡ ä¹æ˜¯å¿…é€‰çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„é¡¹ç›®è¦æœ‰å¾ˆå¤šä¾èµ–ï¼Œéƒ½æ˜¯é€šè¿‡npmæ¥ç®¡ç†çš„ï¼Œè€Œnpmå¯¹äºæˆ‘ä»¬é¡¹ç›®çš„ç®¡ç†ï¼Œåˆ™æ˜¯é€šè¿‡package.jsonæ–‡ä»¶ï¼š</p>\n<pre><code class=\"$\">npm init\n</code></pre>\n<p>æ‰§è¡Œnpm initä¹‹åï¼Œä¼šæç¤ºä½ å¡«å†™ä¸€äº›é¡¹ç›®çš„ä¿¡æ¯ï¼Œä¸€ç›´å›è½¦é»˜è®¤å°±å¥½äº†ï¼Œæˆ–è€…ç›´æ¥æ‰§è¡Œ npm init -y ç›´æ¥è·³è¿‡è¯¢é—®æ­¥éª¤<br>ç„¶åæˆ‘ä»¬æ–°å»ºä¸€ä¸ªå«åš app çš„ç›®å½•ï¼Œè¿™ä¸ªæ˜¯æˆ‘ä»¬é¡µé¢æ¨¡å—çš„ç›®å½•ï¼Œå†åœ¨appç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªindexç›®å½•ï¼Œå‡è®¾è¿™ä¸ªæ˜¯é¦–é¡µæ¨¡å—çš„ç›®å½•ï¼Œç„¶åå†åœ¨indexç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ª index.html æ–‡ä»¶å’Œ index.js æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯é¦–é¡µå…¥å£htmlæ–‡ä»¶å’Œä¸»jsæ–‡ä»¶ï¼Œç„¶åå†åœ¨indexç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªcomponentsç›®å½•ï¼Œè¿™ä¸ªç›®å½•ç”¨ä½œå­˜æ”¾é¦–é¡µç»„ä»¶æ¨¡å—çš„ç›®å½•ï¼Œå› ä¸ºæˆ‘ä»¬æœ€ç»ˆè¦å®ç°ç»„ä»¶åŒ–å¼€å‘ã€‚è¿™æ ·ï¼Œå½“ä½ å®Œæˆä¸Šé¢çš„æ­¥éª¤åï¼Œä½ çš„é¡¹ç›®çœ‹ä¸Šå»åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325b.jpg\" alt=\"é¡¹ç›®ç»“æ„\"></p>\n<p>æ¥ä¸‹æ¥é€šè¿‡npmå®‰è£…é¡¹ç›®ä¾èµ–é¡¹ï¼š</p>\n<pre><code class=\"$\">npm install\\\n  webpack webpack-dev-server\\\n  vue-loader vue-html-loader css-loader vue-style-loader vue-hot-reload-api\\\n  babel-loader babel-core babel-plugin-transform-runtime babel-preset-es2015\\\n  babel-runtime@5\\\n  --save-dev\n\nnpm install vue --save\n</code></pre>\n<p>è¿™ä¸ªæ—¶å€™ï¼Œä½ çš„package.jsonæ–‡ä»¶çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>\n<pre><code>&quot;devDependencies&quot;: {\n    &quot;babel-core&quot;: &quot;^6.3.17&quot;,\n    &quot;babel-loader&quot;: &quot;^6.2.0&quot;,\n    &quot;babel-plugin-transform-runtime&quot;: &quot;^6.3.13&quot;,\n    &quot;babel-preset-es2015&quot;: &quot;^6.3.13&quot;,\n    &quot;babel-runtime&quot;: &quot;^5.8.34&quot;,\n    &quot;css-loader&quot;: &quot;^0.23.0&quot;,\n    &quot;vue-hot-reload-api&quot;: &quot;^1.2.2&quot;,\n    &quot;vue-html-loader&quot;: &quot;^1.0.0&quot;,\n    &quot;vue-style-loader&quot;: &quot;^1.0.0&quot;,\n    &quot;vue-loader&quot;: &quot;^7.2.0&quot;,\n    &quot;webpack&quot;: &quot;^1.12.9&quot;,\n    &quot;webpack-dev-server&quot;: &quot;^1.14.0&quot;\n  },\n  &quot;dependencies&quot;: {\n    &quot;vue&quot;: &quot;^1.0.13&quot;\n  },\n</code></pre><p>æˆ‘ä»¬å®‰è£…äº† babel ä¸€ç³»åˆ—åŒ…ï¼Œç”¨æ¥è§£æES6è¯­æ³•ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ES6æ¥å¼€å‘é¡¹ç›®ï¼Œå¦‚æœä½ ä¸äº†è§£ES6è¯­æ³•ï¼Œå»ºè®®ä½ çœ‹ä¸€çœ‹<a href=\"http://es6.ruanyifeng.com/\" target=\"_blank\" rel=\"external\">é˜®è€å¸ˆçš„æ•™ç¨‹</a>ï¼Œç„¶åæˆ‘ä»¬å®‰è£…äº†ä¸€äº›loaderåŒ…ï¼Œæ¯”å¦‚css-loader/vue-loaderç­‰ç­‰ï¼Œå› ä¸ºwebpackæ˜¯ä½¿ç”¨è¿™äº›æŒ‡å®šçš„loaderå»åŠ è½½æŒ‡å®šçš„æ–‡ä»¶çš„ã€‚</p>\n<p>å¦å¤–æˆ‘ä»¬è¿˜ä½¿ç”¨ npm install vue â€“save å‘½ä»¤å®‰è£…äº† vue ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„vue.jsï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åƒå¼€å‘nodejsåº”ç”¨ä¸€æ ·ï¼Œç›´æ¥require(â€˜vueâ€™);å³å¯ï¼Œè€Œä¸éœ€è¦é€šè¿‡scriptæ ‡ç­¾å¼•å…¥ï¼Œè¿™ä¸€ç‚¹åœ¨å¼€å‘ä¸­å¾ˆçˆ½ã€‚</p>\n<p>å®‰è£…å®Œäº†ä¾èµ–ï¼Œç¼–è¾‘ä»¥ä¸‹æ–‡ä»¶å¹¶ä¿å­˜åˆ°ç›¸åº”ä½ç½®ï¼š</p>\n<p>1ã€index.htmlæ–‡ä»¶ï¼š</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;zh&quot;&gt;\n    &lt;head&gt;\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, height=device-height, initial-scale=1.0, user-scalable=no&quot;&gt;\n        &lt;meta charset=&quot;utf-8&quot;&gt;\n        &lt;title&gt;é¦–é¡µ&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;!-- vueçš„ç»„ä»¶ä»¥è‡ªå®šä¹‰æ ‡ç­¾çš„å½¢å¼ä½¿ç”¨ --&gt;\n        &lt;favlist&gt;&lt;/favlist&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>2ã€index.jsæ–‡ä»¶ï¼š</p>\n<pre><code>import Vue from &#39;Vue&#39;\nimport Favlist from &#39;./components/Favlist&#39;\n\nnew Vue({\n    el: &#39;body&#39;,\n    components: { Favlist }\n})\n</code></pre><p>3ã€åœ¨componentsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª Favlist.vue æ–‡ä»¶ï¼Œä½œä¸ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç»„ä»¶ï¼š</p>\n<pre><code>&lt;template&gt;\n    &lt;div v-for=&quot;n in 10&quot;&gt;div&lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n    export default {\n        data () {\n            return {\n                msg: &#39;Hello World!&#39;\n            }\n        }\n    }\n&lt;/script&gt;\n\n&lt;style&gt;\n    html{\n        background: red;\n    }\n&lt;/style&gt;\n</code></pre><p>è¦çœ‹æ‡‚ä¸Šé¢çš„ä»£ç ï¼Œä½ éœ€è¦äº†è§£vue.jsï¼Œå‡å¦‚ä½ çœ‹ä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨index.htmlä¸­ä½¿ç”¨äº†è‡ªå®šä¹‰æ ‡ç­¾ï¼ˆå³ç»„ä»¶ï¼‰ï¼Œç„¶ååœ¨index.jsä¸­å¼•å…¥äº†Vueå’Œæˆ‘ä»¬çš„Favlist.vueç»„ä»¶ï¼ŒFavlist.vueæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åŸºæœ¬çš„vueç»„ä»¶è¯­æ³•ï¼Œæœ€åï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒè¿è¡Œèµ·æ¥ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦webpackäº†ã€‚</p>\n<p>åœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»º build ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾æˆ‘ä»¬çš„æ„å»ºç›¸å…³çš„ä»£ç æ–‡ä»¶ç­‰ï¼Œç„¶ååœ¨buildç›®å½•ä¸‹æ–°å»º webpack.config.js è¿™æ˜¯æˆ‘ä»¬çš„webpacké…ç½®æ–‡ä»¶ï¼Œwebpackéœ€è¦é€šè¿‡è¯»å–ä½ çš„é…ç½®ï¼Œè¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œç±»ä¼¼äºgulpfile.jsæˆ–è€…gruntfile.jsç­‰ã€‚</p>\n<p>webpack.config.js</p>\n<pre><code>// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require(&#39;path&#39;);\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, &#39;../app/index/index.js&#39;),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, &#39;../output/static&#39;),\n        publicPath: &#39;static/&#39;,\n        filename: &#39;[name].[hash].js&#39;,\n        chunkFilename: &#39;[id].[chunkhash].js&#39;\n    },\n    module: {\n\n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: &#39;vue&#39;   \n            }\n        ]\n    }\n}\n</code></pre><p>ä¸Šä¾‹ä¸­ï¼Œç›¸ä¿¡ä½ å·²ç»çœ‹æ‡‚äº†æˆ‘çš„é…ç½®ï¼Œå…¥å£æ–‡ä»¶æ˜¯index.jsæ–‡ä»¶ï¼Œé…ç½®äº†ç›¸åº”è¾“å‡ºï¼Œç„¶åä½¿ç”¨ vue-loader å»åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æ„å»ºé¡¹ç›®äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š</p>\n<pre><code>webpack --display-modules --display-chunks --config build/webpack.config.js\n</code></pre><p>é€šè¿‡webpackå‘½ä»¤ï¼Œå¹¶ä¸”é€šè¿‡ â€“config é€‰é¡¹æŒ‡å®šäº†æˆ‘ä»¬é…ç½®æ–‡ä»¶çš„ä½ç½®æ˜¯ â€˜build/webpack.config.jsâ€™ï¼Œå¹¶é€šè¿‡ â€“display-modules å’Œ â€“display-chunks é€‰é¡¹æ˜¾ç¤ºç›¸åº”çš„ä¿¡æ¯ã€‚å¦‚æœä½ æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œå¯èƒ½å¾—åˆ°ä¸‹å›¾çš„é”™è¯¯ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325c.jpg\" alt=\"æŠ¥é”™\"></p>\n<p>é”™è¯¯æç¤ºæˆ‘ä»¬åº”è¯¥é€‰æ‹©åˆé€‚çš„loaderå»åŠ è½½è¿™ä¸ª â€˜./app/index/index.jsâ€™ è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”è¯´ä¸æœŸæœ›index.jsæ–‡ä»¶ä¸­çš„æ ‡è¯†ç¬¦ï¼ˆUnexpected tokenï¼‰ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†ES6çš„è¯­æ³• import è¯­å¥ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨ babel-loader å»åŠ è½½æˆ‘ä»¬çš„jsæ–‡ä»¶ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªloadersé¡¹ç›®ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require(&#39;path&#39;);\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, &#39;../app/index/index.js&#39;),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, &#39;../output/static&#39;),\n        publicPath: &#39;static/&#39;,\n        filename: &#39;[name].[hash].js&#39;,\n        chunkFilename: &#39;[id].[chunkhash].js&#39;\n    },\n    module: {\n\n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: &#39;vue&#39;   \n            },\n            {\n                test: /\\.js$/,\n                loader: &#39;babel?presets=es2015&#39;,\n                exclude: /node_modules/\n            }\n        ]\n    }\n}\n</code></pre><p>ç°åœ¨å†è¿è¡Œæ„å»ºå‘½ä»¤ ï¼š â€˜webpack â€“display-modules â€“display-chunks â€“config build/webpack.config.jsâ€™</p>\n<p>sorryï¼Œä¸å‡ºæ„å¤–ï¼Œä½ åº”è¯¥å¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325d.jpg\" alt=\"é”™è¯¯\"></p>\n<p>å®ƒè¯´æ²¡æœ‰å‘ç° â€˜./components/Favlistâ€™ æ¨¡å—ï¼Œè€Œæˆ‘ä»¬æ˜æ˜æœ‰ ./components/Favlist.vue æ–‡ä»¶ï¼Œä¸ºä»€ä¹ˆå®ƒæ²¡å‘ç°å‘¢ï¼Ÿå®ƒçäº†ï¼Ÿå…¶å®æ˜¯è¿™æ ·çš„ï¼Œå½“webpackè¯•å›¾å»åŠ è½½æ¨¡å—çš„æ—¶å€™ï¼Œå®ƒé»˜è®¤æ˜¯æŸ¥æ‰¾ä»¥ .js ç»“å°¾çš„æ–‡ä»¶çš„ï¼Œå®ƒå¹¶ä¸çŸ¥é“ .vue ç»“å°¾çš„æ–‡ä»¶æ˜¯ä»€ä¹ˆé¬¼ç©æ„å„¿ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å‘Šè¯‰webpackï¼Œé‡åˆ° .vue ç»“å°¾çš„ä¹Ÿè¦å»åŠ è½½ï¼Œæ·»åŠ  resolve é…ç½®é¡¹ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require(&#39;path&#39;);\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, &#39;../app/index/index.js&#39;),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, &#39;../output/static&#39;),\n        publicPath: &#39;static/&#39;,\n        filename: &#39;[name].[hash].js&#39;,\n        chunkFilename: &#39;[id].[chunkhash].js&#39;\n    },\n    resolve: {\n        extensions: [&#39;&#39;, &#39;.js&#39;, &#39;.vue&#39;]\n    },\n    module: {\n\n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: &#39;vue&#39;   \n            },\n            {\n                test: /\\.js$/,\n                loader: &#39;babel?presets=es2015&#39;,\n                exclude: /node_modules/\n            }\n        ]\n    }\n}\n</code></pre><p>è¿™æ ·ï¼Œå½“æˆ‘ä»¬å»åŠ è½½ â€˜./components/Favlistâ€™ è¿™æ ·çš„æ¨¡å—æ—¶ï¼Œwebpacké¦–å…ˆä¼šæŸ¥æ‰¾ ./components/Favlist.js å¦‚æœæ²¡æœ‰å‘ç°Favlist.jsæ–‡ä»¶å°±ä¼šç»§ç»­æŸ¥æ‰¾ Favlist.vue æ–‡ä»¶ï¼Œç°åœ¨å†æ¬¡è¿è¡Œæ„å»ºå‘½ä»¤ï¼Œæˆ‘ä»¬æˆåŠŸäº†ï¼Œè¿™æ—¶æˆ‘ä»¬ä¼šåœ¨æˆ‘ä»¬çš„è¾“å‡ºç›®å½•ä¸­çœ‹åˆ°ä¸€ä¸ªjsæ–‡ä»¶ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325e.jpg\" alt=\"è¾“å‡º\"></p>\n<p>ä¹‹æ‰€ä»¥ä¼šè¿™æ ·è¾“å‡ºï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„ webpack.config.js æ–‡ä»¶ä¸­çš„è¾“å‡ºé…ç½®ä¸­æŒ‡å®šäº†ç›¸åº”çš„è¾“å‡ºä¿¡æ¯ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¿®æ”¹ index.html ï¼Œå°†è¾“å‡ºçš„jsæ–‡ä»¶å¼•å…¥ï¼š</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;zh&quot;&gt;\n    &lt;head&gt;\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, height=device-height, initial-scale=1.0, user-scalable=no&quot;&gt;\n        &lt;meta charset=&quot;utf-8&quot;&gt;\n        &lt;title&gt;é¦–é¡µ&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;!-- vueçš„ç»„ä»¶ä»¥è‡ªå®šä¹‰æ ‡ç­¾çš„å½¢å¼ä½¿ç”¨ --&gt;\n        &lt;favlist&gt;&lt;/favlist&gt;\n\n        &lt;script src=&quot;../../output/static/main.ce853b65bcffc3b16328.js&quot;&gt;&lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>ç„¶åç”¨æµè§ˆå™¨æ‰“å¼€è¿™ä¸ªé¡µé¢ï¼Œä½ å¯ä»¥çœ‹åˆ°ä½ å†™çš„ä»£ç æ­£ç¡®çš„æ‰§è¡Œäº†ã€‚</p>\n<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œéš¾é“æˆ‘ä»¬æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨çš„å¼•å…¥è¾“å‡ºçš„jsæ–‡ä»¶å—ï¼Ÿå› ä¸ºæ¯æ¬¡æ„å»ºè¾“å‡ºçš„jsæ–‡ä»¶éƒ½å¸¦æœ‰ hash å€¼ï¼Œå¦‚ main.ce853b65bcffc3b16328.jsï¼Œå°±ä¸èƒ½æ›´æ™ºèƒ½ä¸€ç‚¹å—ï¼Ÿæ¯æ¬¡éƒ½è‡ªåŠ¨å†™å…¥ï¼Ÿæ€ä¹ˆä¼šä¸å¯èƒ½ï¼Œå¦åˆ™è¿™ä¸œè¥¿è¿˜èƒ½ç«å—ï¼Œè¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨webpackçš„æ’ä»¶äº†ï¼Œ<a href=\"https://www.npmjs.com/package/html-webpack-plugin\" target=\"_blank\" rel=\"external\">html-webpack-plugin</a>æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥åˆ›å»ºhtmlæ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å°†ä¾èµ–å†™å…¥htmlæ–‡ä»¶ä¸­ã€‚</p>\n<p>é¦–å…ˆå®‰è£… html-webpack-plugin æ’ä»¶ï¼š</p>\n<pre><code>npm install html-webpack-plugin --save-dev\n</code></pre><p>ç„¶ååœ¨ä¿®æ”¹é…ç½®é¡¹ï¼š</p>\n<pre><code>// nodejs ä¸­çš„pathæ¨¡å—\nvar path = require(&#39;path&#39;);\nvar HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)\n\nmodule.exports = {\n    // å…¥å£æ–‡ä»¶ï¼Œpath.resolve()æ–¹æ³•ï¼Œå¯ä»¥ç»“åˆæˆ‘ä»¬ç»™å®šçš„ä¸¤ä¸ªå‚æ•°æœ€åç”Ÿæˆç»å¯¹è·¯å¾„ï¼Œæœ€ç»ˆæŒ‡å‘çš„å°±æ˜¯æˆ‘ä»¬çš„index.jsæ–‡ä»¶\n    entry: path.resolve(__dirname, &#39;../app/index/index.js&#39;),\n    // è¾“å‡ºé…ç½®\n    output: {\n        // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n        path: path.resolve(__dirname, &#39;../output/static&#39;),\n        publicPath: &#39;static/&#39;,\n        filename: &#39;[name].[hash].js&#39;,\n        chunkFilename: &#39;[id].[chunkhash].js&#39;\n    },\n    resolve: {\n        extensions: [&#39;&#39;, &#39;.js&#39;, &#39;.vue&#39;]\n    },\n    module: {\n\n        loaders: [\n            // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n            {\n                test: /\\.vue$/, \n                loader: &#39;vue&#39;   \n            },\n            {\n                test: /\\.js$/,\n                loader: &#39;babel?presets=es2015&#39;,\n                exclude: /node_modules/\n            }\n        ]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            filename: &#39;../index.html&#39;,\n            template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n            inject: true\n        })\n    ]\n}\n</code></pre><p>ç„¶åå†æ¬¡æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼ŒæˆåŠŸä¹‹åï¼Œçœ‹ä½ çš„è¾“å‡ºç›®å½•ï¼Œå¤šå‡ºæ¥ä¸€ä¸ªindex.htmlæ–‡ä»¶ï¼ŒåŒå‡»å®ƒï¼Œä»£ç æ­£ç¡®æ‰§è¡Œï¼Œä½ å¯ä»¥æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æŸ¥çœ‹ä¸€ä¸‹ï¼Œwebpackè‡ªåŠ¨å¸®æˆ‘ä»¬å¼•å…¥äº†ç›¸åº”çš„æ–‡ä»¶ã€‚</p>\n<p>é—®é¢˜ç»§ç»­æ¥äº†ï¼Œéš¾é“æ¯æ¬¡æˆ‘ä»¬éƒ½è¦æ„å»ºä¹‹åæ‰èƒ½æŸ¥çœ‹è¿è¡Œçš„ä»£ç å—ï¼Ÿé‚£å²‚ä¸æ˜¯å¾ˆæ²¡æœ‰æ•ˆç‡ï¼Œåˆ«æ‹…å¿ƒï¼Œwebpackæä¾›äº†å‡ ç§æ–¹å¼ï¼Œè¿›è¡Œçƒ­åŠ è½½ï¼Œåœ¨å¼€å‘æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ç§æ–¹å¼æ¥æé«˜æ•ˆç‡ï¼Œè¿™é‡Œè¦ä»‹ç»çš„ï¼Œæ˜¯ä½¿ç”¨ <a href=\"https://www.npmjs.com/package/webpack-dev-middleware\" target=\"_blank\" rel=\"external\">webpack-dev-middleware</a>ä¸­é—´ä»¶å’Œ<a href=\"https://www.npmjs.com/package/webpack-hot-middleware\" target=\"_blank\" rel=\"external\">webpack-hot-middleware</a>ä¸­é—´ä»¶ï¼Œé¦–å…ˆå®‰è£…ä¸¤ä¸ªä¸­é—´ä»¶ï¼š</p>\n<pre><code>npm install webpack-dev-middleware webpack-hot-middleware --save-dev\n</code></pre><p>å¦å¤–ï¼Œè¿˜è¦å®‰è£…expressï¼Œè¿™æ˜¯ä¸€ä¸ªnodejsæ¡†æ¶</p>\n<pre><code>npm install express --save-dev\n</code></pre><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘å…ˆç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸¤ä¸ªä¸­é—´ä»¶ï¼Œä¹‹æ‰€ä»¥å«åšä¸­é—´ä»¶ï¼Œæ˜¯å› ä¸ºnodejsçš„ä¸€ä¸ªå«åšexpressçš„æ¡†æ¶ä¸­æœ‰ä¸­é—´ä»¶çš„æ¦‚å¿µï¼Œè€Œè¿™ä¸¤ä¸ªåŒ…è¦ä½œä¸ºexpressä¸­é—´ä»¶ä½¿ç”¨ï¼Œæ‰€ä»¥ç§°å®ƒä»¬ä¸ºä¸­é—´ä»¶ï¼Œé‚£ä¹ˆä»–ä»¬èƒ½å¹²ä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<p><em><b>1ã€webpack-dev-middleware</b></em></p>\n<p>æˆ‘ä»¬ä¹‹å‰æ‰€é¢ä¸´çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„ä»£ç æ”¹åŠ¨äº†ï¼Œæˆ‘ä»¬è¦æƒ³çœ‹åˆ°æµè§ˆå™¨çš„å˜åŒ–ï¼Œéœ€è¦å…ˆå¯¹é¡¹ç›®è¿›è¡Œæ„å»ºï¼Œç„¶åæ‰èƒ½æŸ¥çœ‹æ•ˆæœï¼Œè¿™æ ·å¯¹äºå¼€å‘æ•ˆç‡æ¥è®²ï¼Œç®€ç›´å°±æ˜¯ä¸å¯å¿å—çš„ä¸€ä»¶äº‹ï¼Œè¯•æƒ³æˆ‘ä»…ä»…ä¿®æ”¹ä¸€ä¸ªèƒŒæ™¯é¢œè‰²å°±è¦æ„å»ºä¸€ä¸‹é¡¹ç›®ï¼Œè¿™å°¼ç›å‘çˆ¹å•Šï¼Œå¥½åœ¨æœ‰<a href=\"https://www.npmjs.com/package/webpack-dev-middleware\" target=\"_blank\" rel=\"external\">webpack-dev-middleware</a>ä¸­é—´ä»¶ï¼Œå®ƒæ˜¯å¯¹webpackä¸€ä¸ªç®€å•çš„åŒ…è£…ï¼Œå®ƒå¯ä»¥é€šè¿‡è¿æ¥æœåŠ¡å™¨æœåŠ¡é‚£äº›ä»webpackå‘å°„å‡ºæ¥çš„æ–‡ä»¶ï¼Œå®ƒæœ‰ä¸€ä¸‹å‡ ç‚¹å¥½å¤„ï¼š</p>\n<p>1ã€ä¸ä¼šå‘ç¡¬ç›˜å†™æ–‡ä»¶ï¼Œè€Œæ˜¯åœ¨å†…å­˜ä¸­ï¼Œæ³¨æ„æˆ‘ä»¬æ„å»ºé¡¹ç›®å®é™…å°±æ˜¯å‘ç¡¬ç›˜å†™æ–‡ä»¶ã€‚</p>\n<p>2ã€å½“æ–‡ä»¶æ”¹å˜çš„æ—¶å€™ï¼Œè¿™ä¸ªä¸­é—´ä»¶ä¸ä¼šå†æœåŠ¡æ—§çš„åŒ…ï¼Œä½ å¯ä»¥ç›´æ¥å¸…æ–°æµè§ˆå™¨å°±èƒ½çœ‹åˆ°æœ€æ–°çš„æ•ˆæœï¼Œè¿™æ ·ä½ å°±ä¸å¿…ç­‰å¾…æ„å»ºçš„æ—¶é—´ï¼Œæ‰€è§å³æ‰€å¾—ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬åœ¨buildç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª dev-server.js çš„æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä¸€ä¸‹å†…å®¹ï¼š</p>\n<pre><code>// å¼•å…¥å¿…è¦çš„æ¨¡å—\nvar express = require(&#39;express&#39;)\nvar webpack = require(&#39;webpack&#39;)\nvar config = require(&#39;./webpack.config&#39;)\n\n// åˆ›å»ºä¸€ä¸ªexpresså®ä¾‹\nvar app = express()\n\n// è°ƒç”¨webpackå¹¶æŠŠé…ç½®ä¼ é€’è¿‡å»\nvar compiler = webpack(config)\n\n// ä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶\nvar devMiddleware = require(&#39;webpack-dev-middleware&#39;)(compiler, {\n    publicPath: config.output.publicPath,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(devMiddleware)\n\n// ç›‘å¬ 8888ç«¯å£ï¼Œå¼€å¯æœåŠ¡å™¨\napp.listen(8888, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log(&#39;Listening at http://localhost:8888&#39;)\n})\n</code></pre><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¼€å¯æœåŠ¡ï¼š</p>\n<pre><code>node build/dev-server.js\n</code></pre><p>å¦‚æœçœ‹åˆ°ä¸‹å›¾æ‰€ç¤ºï¼Œè¯æ˜ä½ çš„æœåŠ¡æˆåŠŸå¼€å¯äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325f.jpg\" alt=\"å¼€å¯æœåŠ¡æˆåŠŸ\"></p>\n<p>æ¥ä¸‹æ¥æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ï¼š</p>\n<pre><code>http://localhost:8888/app/index/index.html\n</code></pre><p>å›è½¦ï¼Œå¦‚æœä¸å‡ºæ„å¤–ï¼Œä½ åº”è¯¥å¾—åˆ°ä¸€ä¸ª404ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325g.jpg\" alt=\"404\"></p>\n<p>æˆ‘ä»¬è¦å¯¹æˆ‘ä»¬çš„ webpack.config.js é…ç½®æ–‡ä»¶åšä¸¤å¤„ä¿®æ”¹ï¼š</p>\n<p>1ã€å°† config.output.publicPath ä¿®æ”¹ä¸º â€˜/â€˜ï¼š</p>\n<pre><code>output: {\n    // è¾“å‡ºè·¯å¾„æ˜¯ myProject/output/static\n    path: path.resolve(__dirname, &#39;../output/static&#39;),\n    publicPath: &#39;/&#39;,\n    filename: &#39;[name].[hash].js&#39;,\n    chunkFilename: &#39;[id].[chunkhash].js&#39;\n},\n</code></pre><p>2ã€å°† plugins ä¸­ HtmlWebpackPlugin ä¸­çš„ filename ä¿®æ”¹ä¸º â€˜app/index/index.htmlâ€™</p>\n<pre><code>plugins: [\n    new HtmlWebpackPlugin({\n        filename: &#39;app/index/index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n]\n</code></pre><p>é‡å¯æœåŠ¡ï¼Œå†åˆ·æ–°é¡µé¢ï¼Œå¦‚æœçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œè¯æ˜ä½ æˆåŠŸäº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325h.jpg\" alt=\"æˆåŠŸ\"></p>\n<p>ä½†æ˜¯è¿™æ ·å¼€å‘æ¨¡å¼ä¸‹çš„ç¡®æ˜¯æˆåŠŸäº†ï¼Œå¯æ˜¯æˆ‘ä»¬ç›´æ¥ä¿®æ”¹äº† webpack.config.js æ–‡ä»¶ï¼Œè¿™å°±æ„å‘³ç€å½“æˆ‘ä»¬æ‰§è¡Œ æ„å»ºå‘½ä»¤ çš„æ—¶å€™ï¼Œé…ç½®å˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ„å»ºä¹Ÿè·Ÿç€å˜äº†ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªå¥½çš„æ–¹å¼æ˜¯ï¼Œä¸å»ä¿®æ”¹webpack.config.jsæ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨buildç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª webpack.dev.conf.jsæ–‡ä»¶ï¼Œæ„æ€æ˜¯å¼€å‘æ¨¡å¼ä¸‹è¦è¯»å–çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä¸€ä¸‹å†…å®¹ï¼š</p>\n<pre><code>var HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)\nvar path = require(&#39;path&#39;);\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require(&#39;./webpack.config&#39;);\n\nconfig.output.publicPath = &#39;/&#39;;\n\nconfig.plugins = [\n    new HtmlWebpackPlugin({\n        filename: &#39;app/index/index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n];\n\nmodule.exports = config;\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨devç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶ä¸­è¦†ç›–äº†åŸºæœ¬é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨dev-server.jsä¸­å°† </p>\n<pre><code>var config = require(&#39;./webpack.config&#39;)\n</code></pre><p>ä¿®æ”¹ä¸ºï¼š</p>\n<pre><code>var config = require(&#39;./webpack.dev.conf&#39;)\n</code></pre><p>å³å¯ï¼Œç„¶åï¼Œé‡å¯æœåŠ¡ï¼Œåˆ·æ–°æµè§ˆå™¨ï¼Œä½ åº”è¯¥å¾—åˆ°åŒæ ·çš„æˆåŠŸç»“æœï¼Œè€Œè¿™ä¸€æ¬¡å½“æˆ‘ä»¬æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š</p>\n<pre><code>webpack --display-modules --display-chunks --config build/webpack.config.js\n</code></pre><p>å¹¶ä¸ä¼šå½±å“æ„å»ºè¾“å‡ºï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ç›´æ¥ä¿®æ”¹webpack.config.jsæ–‡ä»¶ã€‚</p>\n<p>ç°åœ¨æˆ‘ä»¬å·²ç»ä½¿ç”¨ webpack-dev-middleware æ­å»ºåŸºæœ¬çš„å¼€å‘ç¯å¢ƒäº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸æ»¡è¶³ï¼Œå› ä¸ºæˆ‘ä»¬æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨å»åˆ·æ–°æµè§ˆå™¨ï¼Œæ‰€è°“çš„çƒ­åŠ è½½ï¼Œæ„æ€å°±æ˜¯è¯´èƒ½å¤Ÿè¿½è¸ªæˆ‘ä»¬ä»£ç çš„å˜åŒ–ï¼Œå¹¶è‡ªåŠ¨æ›´æ–°ç•Œé¢ï¼Œç”šè‡³è¿˜èƒ½ä¿ç•™ç¨‹åºçŠ¶æ€ã€‚è¦å®Œæˆçƒ­åŠ è½½ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨å¦å¤–ä¸€ä¸ªä¸­é—´ä»¶ <em>webpack-hot-middleware</em></p>\n<p><em><b>2ã€webpack-hot-middleware</b></em></p>\n<p><a href=\"https://www.npmjs.com/package/webpack-hot-middleware\" target=\"_blank\" rel=\"external\">webpack-hot-middleware</a> åªé…åˆ webpack-dev-middleware ä½¿ç”¨ï¼Œå®ƒèƒ½ç»™ä½ æä¾›çƒ­åŠ è½½ã€‚</p>\n<p>å®ƒçš„ä½¿ç”¨å¾ˆç®€å•ï¼Œæ€»å…±åˆ†4æ­¥ï¼š</p>\n<p>1ã€å®‰è£…ï¼Œæˆ‘ä»¬ä¸Šé¢å·²ç»å®‰è£…è¿‡äº†<br>2ã€åœ¨ webpack.dev.conf.js é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸‰ä¸ªæ’ä»¶ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>\nvar HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)\nvar path = require(&#39;path&#39;);\nvar webpack = require(&#39;webpack&#39;);\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require(&#39;./webpack.config&#39;);\n\nconfig.output.publicPath = &#39;/&#39;;\n\nconfig.plugins = [\n    // æ·»åŠ ä¸‰ä¸ªæ’ä»¶\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin(),\n\n    new HtmlWebpackPlugin({\n        filename: &#39;app/index/index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n];\n\nmodule.exports = config;\n</code></pre><p>3ã€åœ¨ webpack.config.js æ–‡ä»¶ä¸­å…¥å£é…ç½®ä¸­æ·»åŠ  â€˜webpack-hot-middleware/clientâ€™ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>entry: [&#39;webpack-hot-middleware/client&#39;, path.resolve(__dirname, &#39;../app/index/index.js&#39;)],\n</code></pre><p>4ã€åœ¨ dev-server.js æ–‡ä»¶ä¸­ä½¿ç”¨æ’ä»¶</p>\n<pre><code>// å¼•å…¥å¿…è¦çš„æ¨¡å—\nvar express = require(&#39;express&#39;)\nvar webpack = require(&#39;webpack&#39;)\nvar config = require(&#39;./webpack.dev.conf&#39;)\n\n// åˆ›å»ºä¸€ä¸ªexpresså®ä¾‹\nvar app = express()\n\n// è°ƒç”¨webpackå¹¶æŠŠé…ç½®ä¼ é€’è¿‡å»\nvar compiler = webpack(config)\n\n// ä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶\nvar devMiddleware = require(&#39;webpack-dev-middleware&#39;)(compiler, {\n    publicPath: config.output.publicPath,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\n// ä½¿ç”¨ webpack-hot-middleware ä¸­é—´ä»¶\nvar hotMiddleware = require(&#39;webpack-hot-middleware&#39;)(compiler)\n\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(devMiddleware)\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(hotMiddleware)\n\n// ç›‘å¬ 8888ç«¯å£ï¼Œå¼€å¯æœåŠ¡å™¨\napp.listen(8888, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log(&#39;Listening at http://localhost:8888&#39;)\n})\n</code></pre><p>okï¼Œç°åœ¨é‡å¯çš„æœåŠ¡ï¼Œç„¶åä¿®æ”¹ Favlist.vue ä¸­çš„é¡µé¢èƒŒæ™¯é¢œè‰²ä¸º â€˜#000â€™ï¼š</p>\n<pre><code>&lt;style&gt;\n    html{\n        background: #000;\n    }\n&lt;/style&gt;\n</code></pre><p>ç„¶åæŸ¥çœ‹ä½ çš„æµè§ˆå™¨ï¼Œæ˜¯ä¸æ˜¯ä½ è¿˜æ²¡æœ‰åˆ·æ–°å°±å·²ç»å¾—å¸¦æ”¹å˜äº†ï¼Ÿ</p>\n<p>é‚£ä¹ˆè¿™æ ·å°±å®Œç¾äº†å—ï¼Ÿè¿˜æ²¡æœ‰ï¼Œå¦‚æœä½ ç»†å¿ƒï¼Œä½ ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬ä¸Šé¢åœ¨ç¬¬2æ­¥ä¸­ä¿®æ”¹äº† webpack.config.js è¿™ä¸ªåŸºæœ¬é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹äº†å…¥å£é…ç½®ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>entry: [&#39;webpack-hot-middleware/client&#39;, path.resolve(__dirname, &#39;../app/index/index.js&#39;)],\n</code></pre><p>è¿™ä¹Ÿä¼šå¯¼è‡´æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„é—®é¢˜ï¼Œå°±æ˜¯ä¼šå½±å“æ„å»ºï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸è¦ç›´æ¥ä¿®æ”¹ webpack.config.js æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯åœ¨ webpack.dev.conf.js æ–‡ä»¶ä¸­é…ç½®ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>\nvar HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)\nvar path = require(&#39;path&#39;);\nvar webpack = require(&#39;webpack&#39;);\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require(&#39;./webpack.config&#39;);\n\nconfig.output.publicPath = &#39;/&#39;;\n\nconfig.plugins = [\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin(),\n    new HtmlWebpackPlugin({\n        filename: &#39;app/index/index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n];\n\n// åŠ¨æ€å‘å…¥å£é…ç½®ä¸­æ³¨å…¥ webpack-hot-middleware/client\nvar devClient = &#39;webpack-hot-middleware/client&#39;;\nObject.keys(config.entry).forEach(function (name, i) {\n    var extras = [devClient]\n    config.entry[name] = extras.concat(config.entry[name])\n})\n\nmodule.exports = config;\n</code></pre><p>ä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯è¦è®² webpack.config.js æ–‡ä»¶ä¸­çš„å…¥å£é…ç½®ä¿®æ”¹ä¸ºå¤šå…¥å£é…ç½®çš„æ–¹å¼ï¼Œè¿™ä¸ªä¿®æ”¹ä¸ä¼šå½±å“æ„å»ºï¼Œæ‰€ä»¥æ— æ‰€è°“ï¼š</p>\n<pre><code>entry: {\n    index: path.resolve(__dirname, &#39;../app/index/index.js&#39;)\n},\n</code></pre><p>é‡å¯ä½ çš„æœåŠ¡ï¼Œåˆ·æ–°ä¸€ä¸‹æµè§ˆå™¨ï¼Œç„¶åä¿®æ”¹ Favlist.vue ä¸­çš„èƒŒæ™¯è‰²ä¸º greenï¼š</p>\n<pre><code>&lt;style&gt;\n    html{\n        background: green;\n    }\n&lt;/style&gt;\n</code></pre><p>å†æ¬¡æŸ¥çœ‹æµè§ˆå™¨ï¼Œå‘ç°å¯ä»¥çƒ­åŠ è½½ã€‚ä½†æ˜¯è¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿè¿˜æ²¡æœ‰ï¼Œä¸ä¿¡ä½ ä¿®æ”¹ index.html æ–‡ä»¶ï¼Œçœ‹çœ‹ä¼šä¸ä¼šçƒ­åŠ è½½ï¼Œå®é™…ä¸Šä¸ä¼šï¼Œä½ è¿˜æ˜¯éœ€è¦æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œä¸ºäº†èƒ½å¤Ÿå½“ index.html æ–‡ä»¶çš„æ”¹åŠ¨ä¹Ÿèƒ½å¤Ÿè§¦å‘è‡ªåŠ¨åˆ·æ–°ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›å·¥ä½œã€‚</p>\n<p><em><b>ç¬¬ä¸€æ­¥ï¼šåœ¨ dev-server.js æ–‡ä»¶ä¸­ç›‘å¬htmlæ–‡ä»¶æ”¹å˜äº‹ä»¶ï¼Œä¿®æ”¹åçš„ dev-server.js æ–‡ä»¶å¦‚ä¸‹ï¼š</b></em></p>\n<pre><code>// å¼•å…¥å¿…è¦çš„æ¨¡å—\nvar express = require(&#39;express&#39;)\nvar webpack = require(&#39;webpack&#39;)\nvar config = require(&#39;./webpack.dev.conf&#39;)\n\n// åˆ›å»ºä¸€ä¸ªexpresså®ä¾‹\nvar app = express()\n\n// è°ƒç”¨webpackå¹¶æŠŠé…ç½®ä¼ é€’è¿‡å»\nvar compiler = webpack(config)\n\n// ä½¿ç”¨ webpack-dev-middleware ä¸­é—´ä»¶\nvar devMiddleware = require(&#39;webpack-dev-middleware&#39;)(compiler, {\n    publicPath: config.output.publicPath,\n    stats: {\n        colors: true,\n        chunks: false\n    }\n})\n\nvar hotMiddleware = require(&#39;webpack-hot-middleware&#39;)(compiler)\n\n// webpackæ’ä»¶ï¼Œç›‘å¬htmlæ–‡ä»¶æ”¹å˜äº‹ä»¶\ncompiler.plugin(&#39;compilation&#39;, function (compilation) {\n    compilation.plugin(&#39;html-webpack-plugin-after-emit&#39;, function (data, cb) {\n        // å‘å¸ƒäº‹ä»¶\n        hotMiddleware.publish({ action: &#39;reload&#39; })\n        cb()\n    })\n})\n\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(devMiddleware)\n// æ³¨å†Œä¸­é—´ä»¶\napp.use(hotMiddleware)\n\n// ç›‘å¬ 8888ç«¯å£ï¼Œå¼€å¯æœåŠ¡å™¨\napp.listen(8888, function (err) {\n    if (err) {\n        console.log(err)\n        return\n    }\n    console.log(&#39;Listening at http://localhost:8888&#39;)\n})\n</code></pre><p>ä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¢åŠ äº†å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>// webpackæ’ä»¶ï¼Œç›‘å¬htmlæ–‡ä»¶æ”¹å˜äº‹ä»¶\ncompiler.plugin(&#39;compilation&#39;, function (compilation) {\n    compilation.plugin(&#39;html-webpack-plugin-after-emit&#39;, function (data, cb) {\n        // å‘å¸ƒäº‹ä»¶\n        hotMiddleware.publish({ action: &#39;reload&#39; })\n        cb()\n    })\n})\n</code></pre><p>è¿™æ®µä»£ç å¯èƒ½ä½ çœ‹ä¸æ‡‚ï¼Œå› ä¸ºè¿™æ¶‰åŠåˆ°webpackæ’ä»¶çš„ç¼–å†™ï¼Œè¯»è€…å¯ä»¥å‚é˜…ä¸‹é¢çš„è¿æ¥ï¼š</p>\n<p><a href=\"https://github.com/webpack/docs/wiki/plugins\" target=\"_blank\" rel=\"external\">webpack æ’ä»¶doc1</a></p>\n<p><a href=\"https://github.com/webpack/docs/wiki/How-to-write-a-plugin\" target=\"_blank\" rel=\"external\">webpack æ’ä»¶doc2</a></p>\n<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬ç›‘å¬äº† â€˜html-webpack-plugin-after-emitâ€™ äº‹ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹ä»¶æ˜¯ä»å“ªé‡Œå‘å°„çš„å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡åå­—å¯çŸ¥ï¼Œè¿™ä¸ªäº‹ä»¶åº”è¯¥å’Œhtml-webpack-pluginè¿™ä¸ªæ’ä»¶æœ‰å…³ï¼Œåœ¨npmæœç´¢ <a href=\"https://www.npmjs.com/package/html-webpack-plugin\" target=\"_blank\" rel=\"external\">html-webpack-plugin</a> æ’ä»¶ï¼Œåœ¨é¡µé¢æœ€åº•éƒ¨æˆ‘ä»¬å¯ä»¥å‘ç°å¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325i.jpg\" alt=\"html-webpack-pluginå¯ä»¥å‘å°„äº‹ä»¶\"></p>\n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œhtml-webpack-plugin è¿™ä¸ªæ’ä»¶çš„ç¡®æä¾›äº†å‡ ä¸ªå¯é€‰çš„äº‹ä»¶ï¼Œä¸‹é¢ä¹Ÿæä¾›äº†ä½¿ç”¨æ–¹æ³•ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿç›‘å¬åˆ°htmlæ–‡ä»¶çš„å˜åŒ–ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„ä»£ç å‘å¸ƒä¸€ä¸ªäº‹ä»¶ï¼š</p>\n<pre><code>hotMiddleware.publish({ action: &#39;reload&#39; })\n</code></pre><p><em><b>ç¬¬äºŒæ­¥ï¼šä¿®æ”¹ webpack.dev.conf.js æ–‡ä»¶å¦‚ä¸‹ï¼š</b></em></p>\n<pre><code>\nvar HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)\nvar path = require(&#39;path&#39;);\nvar webpack = require(&#39;webpack&#39;);\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require(&#39;./webpack.config&#39;);\n\nconfig.output.publicPath = &#39;/&#39;;\n\nconfig.plugins = [\n    new webpack.optimize.OccurenceOrderPlugin(),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin(),\n    new HtmlWebpackPlugin({\n        filename: &#39;app/index/index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n];\n\n// var devClient = &#39;webpack-hot-middleware/client&#39;;\nvar devClient = &#39;./build/dev-client&#39;;\nObject.keys(config.entry).forEach(function (name, i) {\n    var extras = [devClient]\n    config.entry[name] = extras.concat(config.entry[name])\n})\n\nmodule.exports = config;\n</code></pre><p>æˆ‘ä»¬ä¿®æ”¹äº†devClientå˜é‡ï¼Œå°† â€˜webpack-hot-middleware/clientâ€™ æ›¿æ¢æˆ â€˜./build/dev-clientâ€™ï¼Œæœ€ç»ˆä¼šå¯¼è‡´ï¼Œæˆ‘ä»¬å…¥å£é…ç½®ä¼šå˜æˆä¸‹é¢è¿™æ ·ï¼š</p>\n<pre><code>entry: {\n    index: [\n        &#39;./build/dev-client&#39;,\n        path.resolve(__dirname, &#39;../app/index/index.js&#39;)\n    ]\n},\n</code></pre><p><em><b>ç¬¬ä¸‰æ­¥ï¼šæ–°å»º build/dev-client.js æ–‡ä»¶ï¼Œå¹¶ç¼–è¾‘å¦‚ä¸‹å†…å®¹ï¼š</b></em></p>\n<pre><code>var hotClient = require(&#39;webpack-hot-middleware/client&#39;)\n\n// è®¢é˜…äº‹ä»¶ï¼Œå½“ event.action === &#39;reload&#39; æ—¶æ‰§è¡Œé¡µé¢åˆ·æ–°\nhotClient.subscribe(function (event) {\n    if (event.action === &#39;reload&#39;) {\n        window.location.reload()\n    }\n})\n</code></pre><p>è¿™é‡Œæˆ‘ä»¬é™¤äº†å¼•å…¥ â€˜webpack-hot-middleware/clientâ€™ ä¹‹å¤–è®¢é˜…äº†ä¸€ä¸ªäº‹ä»¶ï¼Œå½“ event.action === â€˜reloadâ€™ æ—¶è§¦å‘ï¼Œè¿˜è®°å¾—æˆ‘ä»¬åœ¨ dev-server.js ä¸­å‘å¸ƒçš„äº‹ä»¶å—ï¼š</p>\n<pre><code>hotMiddleware.publish({ action: &#39;reload&#39; })\n</code></pre><p>è¿™æ ·ï¼Œå½“æˆ‘ä»¬çš„htmlæ–‡ä»¶æ”¹å˜åï¼Œå°±å¯ä»¥ç›‘å¬çš„åˆ°ï¼Œæœ€ç»ˆä¼šæ‰§è¡Œé¡µé¢åˆ·æ–°ï¼Œè€Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åˆ·æ–°ï¼Œç°åœ¨é‡å¯æœåŠ¡ï¼Œå»å°è¯•èƒ½å¦å¯¹htmlæ–‡ä»¶çƒ­åŠ è½½å§ã€‚ç­”æ¡ˆæ˜¯yesã€‚<br>å¥½äº†ï¼Œå¼€å‘ç¯å¢ƒç»ˆäºæå®šäº†ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥è°ˆä¸€è°ˆç”Ÿäº§ç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯æ„å»ºè¾“å‡ºï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ‰§è¡Œä¸€ä¸‹æ„å»ºå‘½ä»¤ï¼Œçœ‹çœ‹è¾“å‡ºçš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Œä¸ºäº†ä¸å¿…æ¯æ¬¡éƒ½è¦è¾“å…¥ä¸‹é¢è¿™æ¡é•¿å‘½ä»¤ï¼š</p>\n<pre><code>webpack --display-modules --display-chunks --config build/webpack.config.js\n</code></pre><p>æˆ‘ä»¬åœ¨ package.js æ–‡ä»¶ä¸­æ·»åŠ  â€œscriptsâ€ é¡¹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325m.jpg\" alt=\"npm\"></p>\n<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ‰§è¡Œä¸‹é¢å‘½ä»¤æ¥è¿›è¡Œæ„å»ºï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜å¢åŠ äº†ä¸€æ¡å¼€å¯å¼€å‘æœåŠ¡å™¨çš„å‘½ä»¤ï¼š</p>\n<pre><code>// æ„å»º\nnpm run build\n// å¼€å¯å¼€å‘æœåŠ¡å™¨\nnpm run dev\n</code></pre><p>å›è¿‡å¤´æ¥ï¼Œæˆ‘ä»¬æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š npm run buildï¼ŒæŸ¥çœ‹è¾“å‡ºå†…å®¹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325n.jpg\" alt=\"è¾“å‡ºå†…å®¹\"></p>\n<p>ç°åœ¨æˆ‘ä»¬åªæœ‰ä¸€ä¸ªjsæ–‡ä»¶è¾“å‡ºäº†ï¼Œå¹¶æ²¡æœ‰cssæ–‡ä»¶è¾“å‡ºï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬å¸Œæœ›cssæ–‡ä»¶ç”Ÿæˆå•ç‹¬çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨ extract-text-webpack-plugin æ’ä»¶ï¼Œå®‰è£…ï¼š</p>\n<pre><code>npm install extract-text-webpack-plugin --save-dev\n</code></pre><p>ç„¶ååœ¨buildç›®å½•ä¸‹æ–°å»º webpack.prod.conf.js æ–‡ä»¶ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªä½¿æˆ‘ä»¬åŒºåˆ«äºå¼€å‘ç¯å¢ƒï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œå¹¶ç¼–è¾‘ä¸€ä¸‹å†…å®¹ï¼š</p>\n<pre><code>\nvar HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)\nvar ExtractTextPlugin = require(&#39;extract-text-webpack-plugin&#39;)\nvar path = require(&#39;path&#39;);\nvar webpack = require(&#39;webpack&#39;);\n// å¼•å…¥åŸºæœ¬é…ç½®\nvar config = require(&#39;./webpack.config&#39;);\n\nconfig.vue = {\n    loaders: {\n        css: ExtractTextPlugin.extract(&quot;css&quot;)\n    }\n};\n\nconfig.plugins = [\n    // æå–cssä¸ºå•æ–‡ä»¶\n    new ExtractTextPlugin(&quot;../[name].[contenthash].css&quot;),\n\n    new HtmlWebpackPlugin({\n        filename: &#39;../index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n];\n\nmodule.exports = config;\n</code></pre><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¦†ç›–äº† webpack.config.js é…ç½®æ–‡ä»¶çš„ config.plugins é¡¹ï¼Œå¹¶ä¸”æ·»åŠ äº† config.vue é¡¹ï¼Œè¡¥è¡€è¯çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå°±æ˜¯è¿™ä¹ˆç”¨çš„ï¼Œå¦‚æœä¸€å®šè¦çŸ¥é“ä¸ºä»€ä¹ˆä¹Ÿå¯ä»¥ï¼Œè¿™éœ€è¦ä½ å¤šå»äº†è§£vueä»¥åŠvue-loaderçš„å·¥ä½œåŸç†ï¼Œè¿™é‡Œæœ‰è¿æ¥<a href=\"http://vuejs.github.io/vue-loader/configurations/extract-css.html\" target=\"_blank\" rel=\"external\">ç‚¹å‡»è¿™é‡Œ</a><br>ç„¶åä¿®æ”¹ package.json æ–‡ä»¶ä¸­çš„ script é¡¹ä¸ºå¦‚ä¸‹ï¼š</p>\n<pre><code>&quot;scripts&quot;: {\n    &quot;build&quot;: &quot;webpack --display-modules --display-chunks --config build/webpack.prod.conf.js&quot;,\n    &quot;dev&quot;: &quot;node ./build/dev-server.js&quot;\n},\n</code></pre><p>æˆ‘ä»¬ä½¿ç”¨ webpack.prod.conf.js ä¸ºé…ç½®å»æ„å»ºï¼Œæ¥ä¸‹æ¥æ‰§è¡Œï¼š</p>\n<pre><code>npm run build\n</code></pre><p>æŸ¥çœ‹ä½ çš„è¾“å‡ºå†…å®¹ï¼Œå¦‚ä¸‹å›¾ï¼Œcssæ–‡ä»¶æœªæå–å‡ºæ¥äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325l.jpg\" alt=\"cssæ–‡ä»¶è¢«æå–\"></p>\n<p>å¦å¤–æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å¦‚ä¸‹æ’ä»¶åœ¨æˆ‘ä»¬çš„ webpack.prod.conf.js æ–‡ä»¶ä¸­ï¼Œä½œä¸ºç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼š</p>\n<pre><code>config.plugins = [\n    new webpack.DefinePlugin({\n        &#39;process.env&#39;: {\n            NODE_ENV: &#39;&quot;production&quot;&#39;\n        }\n    }),\n    // å‹ç¼©ä»£ç \n    new webpack.optimize.UglifyJsPlugin({\n        compress: {\n            warnings: false\n        }\n    }),\n    new webpack.optimize.OccurenceOrderPlugin(),\n    // æå–cssä¸ºå•æ–‡ä»¶\n    new ExtractTextPlugin(&quot;../[name].[contenthash].css&quot;),\n    new HtmlWebpackPlugin({\n        filename: &#39;../index.html&#39;,\n        template: path.resolve(__dirname, &#39;../app/index/index.html&#39;),\n        inject: true\n    })\n];\n</code></pre><p>å¤§å®¶å¯ä»¥æœç´¢è¿™äº›æ’ä»¶ï¼Œäº†è§£ä»–çš„ä½œç”¨ï¼Œè¿™ç¯‡æ–‡ç« è¦ä»‹ç»çš„å¤ªå¤šï¼Œæ‰€ä»¥æˆ‘ä¸€ä¸€è®²è§£äº†ã€‚</p>\n<p>åˆ°è¿™é‡Œå®é™…ä¸Šæ­å»ºçš„å·²ç»å·®ä¸å¤šäº†ï¼Œå”¯ä¸€è¦åšçš„å°±æ˜¯å®Œå–„ï¼Œæ¯”å¦‚å…¬å…±æ¨¡å—çš„æå–ï¼Œå¦‚ä½•åŠ è½½å›¾ç‰‡ï¼Œå¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•æå–å…¬å…±æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ CommonsChunkPlugin æ’ä»¶ï¼Œåœ¨ webpack.prod.conf.js æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹æ’ä»¶ï¼š</p>\n<pre><code>new webpack.optimize.CommonsChunkPlugin({\n    name: &#39;vendors&#39;,\n    filename: &#39;vendors.js&#39;,\n}),\n</code></pre><p>ç„¶ååœ¨ webpack.config.js æ–‡ä»¶ä¸­é…ç½®å…¥å£æ–‡ä»¶ï¼š</p>\n<pre><code>entry: {\n    index: path.resolve(__dirname, &#39;../app/index/index.js&#39;),\n    vendors: [\n        &#39;Vue&#39;\n    ]\n},\n</code></pre><p>ä¸Šé¢ä»£ç çš„æ„æ€æ˜¯ï¼Œæˆ‘ä»¬æŠŠVue.jså½“åšå…¬å…±æ¨¡å—å•ç‹¬æ‰“åŒ…ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªæ•°ç»„ä¸­å¢åŠ å…¶ä»–æ¨¡å—ï¼Œä¸€èµ·ä½œä¸ºå…¬å…±æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼Œç„¶åæŸ¥çœ‹è¾“å‡ºï¼Œå¦‚ä¸‹å›¾ï¼ŒæˆåŠŸæå–ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/20160325u.jpg\" alt=\"æå–å…¬å…±æ¨¡å—\"></p>\n<p>å¯¹äºåŠ è½½å›¾ç‰‡çš„é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œwebpackçš„å“²å­¦æ˜¯ä¸€åˆ‡çš†æ˜¯æ¨¡å—ï¼Œç„¶åé€šè¿‡ç›¸åº”çš„loaderå»åŠ è½½ï¼Œæ‰€ä»¥åŠ è½½å›¾ç‰‡ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ° url-loaderï¼Œåœ¨webpack.config.js æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªloaderé…ç½®ï¼š</p>\n<pre><code>loaders: [\n    // ä½¿ç”¨vue-loader åŠ è½½ .vue ç»“å°¾çš„æ–‡ä»¶\n    {\n        test: /\\.vue$/, \n        loader: &#39;vue&#39;   \n    },\n    {\n        test: /\\.js$/,\n        loader: &#39;babel?presets=es2015&#39;,\n        exclude: /node_modules/\n    },\n    // åŠ è½½å›¾ç‰‡\n    {\n        test: /\\.(png|jpg|gif|svg)$/,\n        loader: &#39;url&#39;,\n        query: {\n            limit: 10000,\n            name: &#39;[name].[ext]?[hash:7]&#39;\n        }\n    }\n]\n</code></pre><p>è¿™æ ·ï¼Œå½“æˆ‘ä»¬çš„cssæ ·å¼è¡¨æ–‡ä»¶ä¸­ä½¿ç”¨ url(xxxx.png)æˆ–è€…jsä¸­å»require(â€˜xxxx.pngâ€™)çš„æ—¶å€™ï¼Œwebpackå°±çŸ¥é“å¦‚ä½•å¤„ç†ï¼Œå¦å¤–url-loaderçš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œä»¥ä¸Šé¢çš„é…ç½®æ¥è¯´ï¼Œå½“æˆ‘ä»¬çš„å›¾ç‰‡å¤§å°å°äº10000å­—èŠ‚çš„æ—¶å€™ï¼Œwebpackä¼šæŠŠå›¾ç‰‡è½¬æ¢æˆbase64æ ¼å¼æ’å…¥åˆ°ä»£ç ä¸­ï¼Œä»è€Œå‡å°‘httpè¯·æ±‚ï¼Œå¦å¤–ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œè°ˆåˆ°çš„ä»»ä½•ä¸€ä¸ªloaderéƒ½å¯ä»¥åœ¨npmä¸­æŸ¥æ‰¾åˆ°ï¼Œè¯»è€…å¯ä»¥æŸ¥è¯¢æ›´å¤šçš„loaderäº†è§£å¹¶ä½¿ç”¨ã€‚</p>"},{"title":"ä½¿ç”¨weinreè°ƒè¯•ç§»åŠ¨ç«¯é¡µé¢","date":"2016-08-13T03:39:03.000Z","_content":"\nweinre çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œweinre çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œweinre çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œä¸‰éå¤Ÿäº†ã€‚\n\n<!-- more -->\n\n\n# ä½¿ç”¨ weinre è°ƒè¯•ç§»åŠ¨é¡µé¢\n\n## å®‰è£… weinre \n\n```\nnpm install -g weinre\n```\n\n## å¯åŠ¨æœåŠ¡\n\n```\nweinre --httpPort 8080 --boundHost -all-\n```\n\næŒ‡å®šç«¯å£å·ï¼Œå½“æœåŠ¡å¯åŠ¨æˆåŠŸä¹‹åï¼Œæ ¹æ®æç¤ºï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç›¸åº”åœ°å€ï¼š\n\n![æç¤º](http://7xlolm.com1.z0.glb.clouddn.com/gitblog1.pic.jpg)\n\n## æµè§ˆå™¨æŸ¥çœ‹\n\næˆ‘çš„ipæ˜¯ 192.168.45.166ï¼Œä½ åº”è¯¥è¾“å…¥ä½ çš„ipåœ°å€ï¼š\n\n![æŸ¥çœ‹](http://7xlolm.com1.z0.glb.clouddn.com/gitblog3.pic_hd.jpg)\n\nè¿™é‡Œæœ‰ä¸‰ä¸ªé“¾æ¥éœ€è¦æ³¨æ„çš„åœ°æ–¹\n\nç¬¬ä¸€ä¸ªé“¾æ¥(å³\thttp://192.168.45.166:8080/client/#anonymous)ï¼š\n\næ­¤é“¾æ¥å°†å¯åŠ¨weinreå®¢æˆ·ç«¯é¡µé¢ï¼Œä¹Ÿå°±æ˜¯è°ƒè¯•å™¨æœ¬èº«ã€‚ç‚¹å‡»æ­¤é“¾æ¥å°†å¸¦æ‚¨è¿›å…¥è¿œç¨‹æ§åˆ¶é¢æ¿\n\nç¬¬äºŒä¸ªè¿æ¥(å³http://192.168.45.166:8080/doc/)ï¼š\n\nå½“ç„¶å°±æ˜¯æ–‡æ¡£çš„è¿æ¥å•¦\n\nç¬¬ä¸‰ä¸ªè¿æ¥(å³http://192.168.45.166:8080/target/target-script-min.js#anonymous)\n\nè¿™ä¸ªè¿æ¥ï¼Œæ˜¯ä¸€ä¸ªjsè„šæœ¬ï¼Œæ˜¯ä½ è¦åœ¨éœ€è¦è°ƒè¯•çš„é¡µé¢å¼•å…¥çš„ä¸€æ®µjsè„šæœ¬ï¼š\n\n```\n// ipåœ°å€è¦æ¢æˆä½ çš„ipå“¦\n<script src=\"http://192.168.45.166:8080/target/target-script-min.js#anonymous\"></script>\n```\n\n## è°ƒè¯•\n\næœåŠ¡å¯åŠ¨äº†ï¼Œä¹Ÿåœ¨ä½ çš„é¡µé¢ä¸­å¼•å…¥ä¸Šè¿°è„šæœ¬äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±å¯ä»¥ç‚¹å‡»ä¸Šè¿°ç¬¬ä¸€ä¸ªé“¾æ¥è·³è½¬åˆ°è°ƒè¯•å™¨é¡µé¢äº†ï¼š\n\n![è°ƒè¯•](http://7xlolm.com1.z0.glb.clouddn.com/4.pic_hd.jpg)\n\n\n\n\n\n","source":"_posts/2016/08/13/ä½¿ç”¨weinreè°ƒè¯•ç§»åŠ¨ç«¯é¡µé¢.md","raw":"title: ä½¿ç”¨weinreè°ƒè¯•ç§»åŠ¨ç«¯é¡µé¢\ndate: 2016-08-13 11:39:03\ncategories:\n- WebFrontEnd\ntags:\n- debug\n- ç§»åŠ¨è°ƒè¯•\n---\n\nweinre çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œweinre çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œweinre çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œä¸‰éå¤Ÿäº†ã€‚\n\n<!-- more -->\n\n\n# ä½¿ç”¨ weinre è°ƒè¯•ç§»åŠ¨é¡µé¢\n\n## å®‰è£… weinre \n\n```\nnpm install -g weinre\n```\n\n## å¯åŠ¨æœåŠ¡\n\n```\nweinre --httpPort 8080 --boundHost -all-\n```\n\næŒ‡å®šç«¯å£å·ï¼Œå½“æœåŠ¡å¯åŠ¨æˆåŠŸä¹‹åï¼Œæ ¹æ®æç¤ºï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç›¸åº”åœ°å€ï¼š\n\n![æç¤º](http://7xlolm.com1.z0.glb.clouddn.com/gitblog1.pic.jpg)\n\n## æµè§ˆå™¨æŸ¥çœ‹\n\næˆ‘çš„ipæ˜¯ 192.168.45.166ï¼Œä½ åº”è¯¥è¾“å…¥ä½ çš„ipåœ°å€ï¼š\n\n![æŸ¥çœ‹](http://7xlolm.com1.z0.glb.clouddn.com/gitblog3.pic_hd.jpg)\n\nè¿™é‡Œæœ‰ä¸‰ä¸ªé“¾æ¥éœ€è¦æ³¨æ„çš„åœ°æ–¹\n\nç¬¬ä¸€ä¸ªé“¾æ¥(å³\thttp://192.168.45.166:8080/client/#anonymous)ï¼š\n\næ­¤é“¾æ¥å°†å¯åŠ¨weinreå®¢æˆ·ç«¯é¡µé¢ï¼Œä¹Ÿå°±æ˜¯è°ƒè¯•å™¨æœ¬èº«ã€‚ç‚¹å‡»æ­¤é“¾æ¥å°†å¸¦æ‚¨è¿›å…¥è¿œç¨‹æ§åˆ¶é¢æ¿\n\nç¬¬äºŒä¸ªè¿æ¥(å³http://192.168.45.166:8080/doc/)ï¼š\n\nå½“ç„¶å°±æ˜¯æ–‡æ¡£çš„è¿æ¥å•¦\n\nç¬¬ä¸‰ä¸ªè¿æ¥(å³http://192.168.45.166:8080/target/target-script-min.js#anonymous)\n\nè¿™ä¸ªè¿æ¥ï¼Œæ˜¯ä¸€ä¸ªjsè„šæœ¬ï¼Œæ˜¯ä½ è¦åœ¨éœ€è¦è°ƒè¯•çš„é¡µé¢å¼•å…¥çš„ä¸€æ®µjsè„šæœ¬ï¼š\n\n```\n// ipåœ°å€è¦æ¢æˆä½ çš„ipå“¦\n<script src=\"http://192.168.45.166:8080/target/target-script-min.js#anonymous\"></script>\n```\n\n## è°ƒè¯•\n\næœåŠ¡å¯åŠ¨äº†ï¼Œä¹Ÿåœ¨ä½ çš„é¡µé¢ä¸­å¼•å…¥ä¸Šè¿°è„šæœ¬äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±å¯ä»¥ç‚¹å‡»ä¸Šè¿°ç¬¬ä¸€ä¸ªé“¾æ¥è·³è½¬åˆ°è°ƒè¯•å™¨é¡µé¢äº†ï¼š\n\n![è°ƒè¯•](http://7xlolm.com1.z0.glb.clouddn.com/4.pic_hd.jpg)\n\n\n\n\n\n","slug":"ä½¿ç”¨weinreè°ƒè¯•ç§»åŠ¨ç«¯é¡µé¢","published":1,"updated":"2016-08-13T03:41:48.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx521001a47fyy5kq82vt","content":"<p>weinre çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œweinre çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œweinre çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œä¸‰éå¤Ÿäº†ã€‚</p>\n<a id=\"more\"></a>\n<h1 id=\"ä½¿ç”¨-weinre-è°ƒè¯•ç§»åŠ¨é¡µé¢\"><a href=\"#ä½¿ç”¨-weinre-è°ƒè¯•ç§»åŠ¨é¡µé¢\" class=\"headerlink\" title=\"ä½¿ç”¨ weinre è°ƒè¯•ç§»åŠ¨é¡µé¢\"></a>ä½¿ç”¨ weinre è°ƒè¯•ç§»åŠ¨é¡µé¢</h1><h2 id=\"å®‰è£…-weinre\"><a href=\"#å®‰è£…-weinre\" class=\"headerlink\" title=\"å®‰è£… weinre\"></a>å®‰è£… weinre</h2><pre><code>npm install -g weinre\n</code></pre><h2 id=\"å¯åŠ¨æœåŠ¡\"><a href=\"#å¯åŠ¨æœåŠ¡\" class=\"headerlink\" title=\"å¯åŠ¨æœåŠ¡\"></a>å¯åŠ¨æœåŠ¡</h2><pre><code>weinre --httpPort 8080 --boundHost -all-\n</code></pre><p>æŒ‡å®šç«¯å£å·ï¼Œå½“æœåŠ¡å¯åŠ¨æˆåŠŸä¹‹åï¼Œæ ¹æ®æç¤ºï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç›¸åº”åœ°å€ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/gitblog1.pic.jpg\" alt=\"æç¤º\"></p>\n<h2 id=\"æµè§ˆå™¨æŸ¥çœ‹\"><a href=\"#æµè§ˆå™¨æŸ¥çœ‹\" class=\"headerlink\" title=\"æµè§ˆå™¨æŸ¥çœ‹\"></a>æµè§ˆå™¨æŸ¥çœ‹</h2><p>æˆ‘çš„ipæ˜¯ 192.168.45.166ï¼Œä½ åº”è¯¥è¾“å…¥ä½ çš„ipåœ°å€ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/gitblog3.pic_hd.jpg\" alt=\"æŸ¥çœ‹\"></p>\n<p>è¿™é‡Œæœ‰ä¸‰ä¸ªé“¾æ¥éœ€è¦æ³¨æ„çš„åœ°æ–¹</p>\n<p>ç¬¬ä¸€ä¸ªé“¾æ¥(å³    <a href=\"http://192.168.45.166:8080/client/#anonymous)ï¼š\" target=\"_blank\" rel=\"external\">http://192.168.45.166:8080/client/#anonymous)ï¼š</a></p>\n<p>æ­¤é“¾æ¥å°†å¯åŠ¨weinreå®¢æˆ·ç«¯é¡µé¢ï¼Œä¹Ÿå°±æ˜¯è°ƒè¯•å™¨æœ¬èº«ã€‚ç‚¹å‡»æ­¤é“¾æ¥å°†å¸¦æ‚¨è¿›å…¥è¿œç¨‹æ§åˆ¶é¢æ¿</p>\n<p>ç¬¬äºŒä¸ªè¿æ¥(å³<a href=\"http://192.168.45.166:8080/doc/)ï¼š\" target=\"_blank\" rel=\"external\">http://192.168.45.166:8080/doc/)ï¼š</a></p>\n<p>å½“ç„¶å°±æ˜¯æ–‡æ¡£çš„è¿æ¥å•¦</p>\n<p>ç¬¬ä¸‰ä¸ªè¿æ¥(å³<a href=\"http://192.168.45.166:8080/target/target-script-min.js#anonymous\" target=\"_blank\" rel=\"external\">http://192.168.45.166:8080/target/target-script-min.js#anonymous</a>)</p>\n<p>è¿™ä¸ªè¿æ¥ï¼Œæ˜¯ä¸€ä¸ªjsè„šæœ¬ï¼Œæ˜¯ä½ è¦åœ¨éœ€è¦è°ƒè¯•çš„é¡µé¢å¼•å…¥çš„ä¸€æ®µjsè„šæœ¬ï¼š</p>\n<pre><code>// ipåœ°å€è¦æ¢æˆä½ çš„ipå“¦\n&lt;script src=&quot;http://192.168.45.166:8080/target/target-script-min.js#anonymous&quot;&gt;&lt;/script&gt;\n</code></pre><h2 id=\"è°ƒè¯•\"><a href=\"#è°ƒè¯•\" class=\"headerlink\" title=\"è°ƒè¯•\"></a>è°ƒè¯•</h2><p>æœåŠ¡å¯åŠ¨äº†ï¼Œä¹Ÿåœ¨ä½ çš„é¡µé¢ä¸­å¼•å…¥ä¸Šè¿°è„šæœ¬äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±å¯ä»¥ç‚¹å‡»ä¸Šè¿°ç¬¬ä¸€ä¸ªé“¾æ¥è·³è½¬åˆ°è°ƒè¯•å™¨é¡µé¢äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/4.pic_hd.jpg\" alt=\"è°ƒè¯•\"></p>\n","site":{"data":{}},"excerpt":"<p>weinre çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œweinre çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œweinre çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œä¸‰éå¤Ÿäº†ã€‚</p>","more":"<h1 id=\"ä½¿ç”¨-weinre-è°ƒè¯•ç§»åŠ¨é¡µé¢\"><a href=\"#ä½¿ç”¨-weinre-è°ƒè¯•ç§»åŠ¨é¡µé¢\" class=\"headerlink\" title=\"ä½¿ç”¨ weinre è°ƒè¯•ç§»åŠ¨é¡µé¢\"></a>ä½¿ç”¨ weinre è°ƒè¯•ç§»åŠ¨é¡µé¢</h1><h2 id=\"å®‰è£…-weinre\"><a href=\"#å®‰è£…-weinre\" class=\"headerlink\" title=\"å®‰è£… weinre\"></a>å®‰è£… weinre</h2><pre><code>npm install -g weinre\n</code></pre><h2 id=\"å¯åŠ¨æœåŠ¡\"><a href=\"#å¯åŠ¨æœåŠ¡\" class=\"headerlink\" title=\"å¯åŠ¨æœåŠ¡\"></a>å¯åŠ¨æœåŠ¡</h2><pre><code>weinre --httpPort 8080 --boundHost -all-\n</code></pre><p>æŒ‡å®šç«¯å£å·ï¼Œå½“æœåŠ¡å¯åŠ¨æˆåŠŸä¹‹åï¼Œæ ¹æ®æç¤ºï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç›¸åº”åœ°å€ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/gitblog1.pic.jpg\" alt=\"æç¤º\"></p>\n<h2 id=\"æµè§ˆå™¨æŸ¥çœ‹\"><a href=\"#æµè§ˆå™¨æŸ¥çœ‹\" class=\"headerlink\" title=\"æµè§ˆå™¨æŸ¥çœ‹\"></a>æµè§ˆå™¨æŸ¥çœ‹</h2><p>æˆ‘çš„ipæ˜¯ 192.168.45.166ï¼Œä½ åº”è¯¥è¾“å…¥ä½ çš„ipåœ°å€ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/gitblog3.pic_hd.jpg\" alt=\"æŸ¥çœ‹\"></p>\n<p>è¿™é‡Œæœ‰ä¸‰ä¸ªé“¾æ¥éœ€è¦æ³¨æ„çš„åœ°æ–¹</p>\n<p>ç¬¬ä¸€ä¸ªé“¾æ¥(å³    <a href=\"http://192.168.45.166:8080/client/#anonymous)ï¼š\" target=\"_blank\" rel=\"external\">http://192.168.45.166:8080/client/#anonymous)ï¼š</a></p>\n<p>æ­¤é“¾æ¥å°†å¯åŠ¨weinreå®¢æˆ·ç«¯é¡µé¢ï¼Œä¹Ÿå°±æ˜¯è°ƒè¯•å™¨æœ¬èº«ã€‚ç‚¹å‡»æ­¤é“¾æ¥å°†å¸¦æ‚¨è¿›å…¥è¿œç¨‹æ§åˆ¶é¢æ¿</p>\n<p>ç¬¬äºŒä¸ªè¿æ¥(å³<a href=\"http://192.168.45.166:8080/doc/)ï¼š\" target=\"_blank\" rel=\"external\">http://192.168.45.166:8080/doc/)ï¼š</a></p>\n<p>å½“ç„¶å°±æ˜¯æ–‡æ¡£çš„è¿æ¥å•¦</p>\n<p>ç¬¬ä¸‰ä¸ªè¿æ¥(å³<a href=\"http://192.168.45.166:8080/target/target-script-min.js#anonymous\" target=\"_blank\" rel=\"external\">http://192.168.45.166:8080/target/target-script-min.js#anonymous</a>)</p>\n<p>è¿™ä¸ªè¿æ¥ï¼Œæ˜¯ä¸€ä¸ªjsè„šæœ¬ï¼Œæ˜¯ä½ è¦åœ¨éœ€è¦è°ƒè¯•çš„é¡µé¢å¼•å…¥çš„ä¸€æ®µjsè„šæœ¬ï¼š</p>\n<pre><code>// ipåœ°å€è¦æ¢æˆä½ çš„ipå“¦\n&lt;script src=&quot;http://192.168.45.166:8080/target/target-script-min.js#anonymous&quot;&gt;&lt;/script&gt;\n</code></pre><h2 id=\"è°ƒè¯•\"><a href=\"#è°ƒè¯•\" class=\"headerlink\" title=\"è°ƒè¯•\"></a>è°ƒè¯•</h2><p>æœåŠ¡å¯åŠ¨äº†ï¼Œä¹Ÿåœ¨ä½ çš„é¡µé¢ä¸­å¼•å…¥ä¸Šè¿°è„šæœ¬äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±å¯ä»¥ç‚¹å‡»ä¸Šè¿°ç¬¬ä¸€ä¸ªé“¾æ¥è·³è½¬åˆ°è°ƒè¯•å™¨é¡µé¢äº†ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/4.pic_hd.jpg\" alt=\"è°ƒè¯•\"></p>"},{"title":"Vue2.1.7æºç å­¦ä¹ ","date":"2017-03-03T03:17:21.000Z","_content":"\nåŸæœ¬æ–‡ç« çš„åå­—å«åšã€Šæºç è§£æã€‹ï¼Œä¸è¿‡åæ¥æƒ³æƒ³ï¼Œè¿˜æ˜¯ç”¨â€œæºç å­¦ä¹ â€æ¥çš„åˆé€‚ä¸€ç‚¹ï¼Œåœ¨æ²¡æœ‰å½»åº•æŒæ¡æºç ä¸­çš„æ¯ä¸€ä¸ªå­—æ¯ä¹‹å‰ï¼Œâ€œè§£æâ€å°±æœ‰ç‚¹æ ‡é¢˜å…šäº†ã€‚å»ºè®®åœ¨çœ‹è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œæœ€å¥½æ‰“å¼€2.1.7çš„æºç å¯¹ç…§ç€çœ‹ï¼Œè¿™æ ·å¯èƒ½æ›´å®¹æ˜“ç†è§£ã€‚å¦å¤–æœ¬äººæ°´å¹³æœ‰é™ï¼Œæ–‡ä¸­æœ‰é”™è¯¯æˆ–ä¸å¦¥çš„åœ°æ–¹æœ›å¤§å®¶å¤šå¤šæŒ‡æ­£å…±åŒæˆé•¿ã€‚\n\nè¡¥å……ï¼šVue 2.2 åˆšåˆšå‘å¸ƒï¼Œä½œä¸ºä¸€ä¸ªç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦ä»Vueä»£ç çš„ç»„ç»‡ï¼ŒVueæ„é€ å‡½æ•°çš„è¿˜åŸï¼ŒåŸå‹çš„è®¾è®¡ï¼Œä»¥åŠå‚æ•°é€‰é¡¹çš„å¤„ç†å’Œå·²ç»è¢«å†™çƒ‚äº†çš„æ•°æ®ç»‘å®šä¸å¦‚ä½•ä½¿ç”¨ Virtual DOM æ›´æ–°è§†å›¾å…¥æ‰‹ã€‚ä»æ•´ä½“çš„å¤§æ–¹å‘è§‚å¯Ÿæ¡†æ¶ï¼Œè¿™ä¹ˆçœ‹æ¥ `V2.1.7` å¯¹äºç†è§£ `V2.2` çš„ä»£ç ä¸ä¼šæœ‰å¤ªå¤§çš„å½±å“ã€‚è¯¥ç³»åˆ—æ–‡ç« çš„åç»­æ–‡ç« ï¼Œéƒ½ä¼šä»æœ€æ–°çš„æºç å…¥æ‰‹ï¼Œå¹¶å¯¹æ”¹åŠ¨çš„åœ°æ–¹åšç›¸åº”çš„æç¤ºã€‚\n\n<!-- more -->\n\nå¾ˆä¹…ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼š[JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–](http://hcysun.me/2016/04/28/JavaScript%E5%AE%9E%E7%8E%B0MVVM%E4%B9%8B%E6%88%91%E5%B0%B1%E6%98%AF%E6%83%B3%E7%9B%91%E6%B5%8B%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%98%E5%8C%96/)ï¼Œæ–‡ç« å¼€å¤´æåˆ°äº†æˆ‘å†™åšå®¢çš„é£æ ¼ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œåªå†™åŠªåŠ›è®©å°ç™½ï¼Œç”šè‡³æ˜¯å°å­¦ç”Ÿéƒ½èƒ½çœ‹æ˜ç™½çš„æ–‡ç« ã€‚è¿™ä¸å…ä¼šå¯¼è‡´å¯¹äºæŸäº›åŒå­¦æ¥è¯´è¿™ç¯‡æ–‡ç« æœ‰äº›å¢¨è¿¹ï¼Œæ‰€ä»¥å¤§å®¶æ ¹æ®è‡ªå·±çš„å–œå¥½ï¼Œå¯ä»¥è¯¦ç»†çš„çœ‹ï¼Œä¹Ÿå¯ä»¥è·³è·ƒç€çœ‹ã€‚\n\n## <span style=\"color: #ff6600;\">ä¸€ã€ä»äº†è§£ä¸€ä¸ªå¼€æºé¡¹ç›®å…¥æ‰‹<span>\n\nè¦çœ‹ä¸€ä¸ªé¡¹ç›®çš„æºç ï¼Œä¸è¦ä¸€ä¸Šæ¥å°±çœ‹ï¼Œå…ˆå»äº†è§£ä¸€ä¸‹é¡¹ç›®æœ¬èº«çš„å…ƒæ•°æ®å’Œä¾èµ–ï¼Œé™¤æ­¤ä¹‹å¤–æœ€å¥½ä¹Ÿäº†è§£ä¸€ä¸‹ PR è§„åˆ™ï¼ŒIssue Reporting è§„åˆ™ç­‰ç­‰ã€‚ç‰¹åˆ«æ˜¯â€œå‰ç«¯â€å¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬åœ¨çœ‹æºç ä¹‹å‰ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„åº”è¯¥æ˜¯ï¼š`package.json`æ–‡ä»¶ã€‚\n\nåœ¨ `package.json` æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æœ€åº”è¯¥å…³æ³¨çš„å°±æ˜¯ `scripts` å­—æ®µå’Œ `devDependencies` ä»¥åŠ `dependencies` å­—æ®µï¼Œé€šè¿‡ `scripts` å­—æ®µæˆ‘ä»¬å¯ä»¥çŸ¥é“é¡¹ç›®ä¸­å®šä¹‰çš„è„šæœ¬å‘½ä»¤ï¼Œé€šè¿‡ `devDependencies` å’Œ `dependencies` å­—æ®µæˆ‘ä»¬å¯ä»¥äº†è§£é¡¹ç›®çš„ä¾èµ–æƒ…å†µã€‚\n\näº†è§£äº†è¿™äº›ä¹‹åï¼Œå¦‚æœæœ‰ä¾èµ–æˆ‘ä»¬å°± `npm install` å®‰è£…ä¾èµ–å°±okäº†ã€‚\n\né™¤äº† `package.json` ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜è¦é˜…è¯»é¡¹ç›®çš„è´¡çŒ®è§„åˆ™æ–‡æ¡£ï¼Œäº†è§£å¦‚ä½•å¼€å§‹ï¼Œä¸€ä¸ªå¥½çš„å¼€æºé¡¹ç›®è‚¯å®šä¼šåŒ…å«è¿™éƒ¨åˆ†å†…å®¹çš„ï¼ŒVueä¹Ÿä¸ä¾‹å¤–ï¼š[https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md](https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md)ï¼Œåœ¨è¿™ä¸ªæ–‡æ¡£é‡Œè¯´æ˜äº†ä¸€äº›è¡Œä¸ºå‡†åˆ™ï¼ŒPRæŒ‡å—ï¼ŒIssue Reporting æŒ‡å—ï¼ŒDevelopment Setup ä»¥åŠ é¡¹ç›®ç»“æ„ã€‚é€šè¿‡é˜…è¯»è¿™äº›å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£é¡¹ç›®å¦‚ä½•å¼€å§‹ï¼Œå¦‚ä½•å¼€å‘ä»¥åŠç›®å½•çš„è¯´æ˜ï¼Œä¸‹é¢æ˜¯å¯¹é‡è¦ç›®å½•å’Œæ–‡ä»¶çš„ç®€å•ä»‹ç»ï¼Œè¿™äº›å†…å®¹ä½ éƒ½å¯ä»¥å»è‡ªå·±é˜…è¯»è·å–ï¼š\n\n```\nâ”œâ”€â”€ build --------------------------------- æ„å»ºç›¸å…³çš„æ–‡ä»¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¸éœ€è¦åŠ¨\nâ”œâ”€â”€ dist ---------------------------------- æ„å»ºåæ–‡ä»¶çš„è¾“å‡ºç›®å½•\nâ”œâ”€â”€ examples ------------------------------ å­˜æ”¾ä¸€äº›ä½¿ç”¨Vueå¼€å‘çš„åº”ç”¨æ¡ˆä¾‹\nâ”œâ”€â”€ flow ---------------------------------- ç±»å‹å£°æ˜ï¼Œä½¿ç”¨å¼€æºé¡¹ç›® [Flow](https://flowtype.org/)\nâ”œâ”€â”€ package.json -------------------------- ä¸è§£é‡Š\nâ”œâ”€â”€ test ---------------------------------- åŒ…å«æ‰€æœ‰æµ‹è¯•æ–‡ä»¶\nâ”œâ”€â”€ src ----------------------------------- è¿™ä¸ªæ˜¯æˆ‘ä»¬æœ€åº”è¯¥å…³æ³¨çš„ç›®å½•ï¼ŒåŒ…å«äº†æºç \nâ”‚   â”œâ”€â”€ entries --------------------------- åŒ…å«äº†ä¸åŒçš„æ„å»ºæˆ–åŒ…çš„å…¥å£æ–‡ä»¶\nâ”‚   â”‚   â”œâ”€â”€ web-runtime.js ---------------- è¿è¡Œæ—¶æ„å»ºçš„å…¥å£ï¼Œè¾“å‡º dist/vue.common.js æ–‡ä»¶ï¼Œä¸åŒ…å«æ¨¡æ¿(template)åˆ°renderå‡½æ•°çš„ç¼–è¯‘å™¨ï¼Œæ‰€ä»¥ä¸æ”¯æŒ `template` é€‰é¡¹ï¼Œæˆ‘ä»¬ä½¿ç”¨vueé»˜è®¤å¯¼å‡ºçš„å°±æ˜¯è¿™ä¸ªè¿è¡Œæ—¶çš„ç‰ˆæœ¬ã€‚å¤§å®¶ä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„\nâ”‚   â”‚   â”œâ”€â”€ web-runtime-with-compiler.js -- ç‹¬ç«‹æ„å»ºç‰ˆæœ¬çš„å…¥å£ï¼Œè¾“å‡º dist/vue.jsï¼Œå®ƒåŒ…å«æ¨¡æ¿(template)åˆ°renderå‡½æ•°çš„ç¼–è¯‘å™¨\nâ”‚   â”‚   â”œâ”€â”€ web-compiler.js --------------- vue-template-compiler åŒ…çš„å…¥å£æ–‡ä»¶\nâ”‚   â”‚   â”œâ”€â”€ web-server-renderer.js -------- vue-server-renderer åŒ…çš„å…¥å£æ–‡ä»¶\nâ”‚   â”œâ”€â”€ compiler -------------------------- ç¼–è¯‘å™¨ä»£ç çš„å­˜æ”¾ç›®å½•ï¼Œå°† template ç¼–è¯‘ä¸º render å‡½æ•°\nâ”‚   â”‚   â”œâ”€â”€ parser ------------------------ å­˜æ”¾å°†æ¨¡æ¿å­—ç¬¦ä¸²è½¬æ¢æˆå…ƒç´ æŠ½è±¡è¯­æ³•æ ‘çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ codegen ----------------------- å­˜æ”¾ä»æŠ½è±¡è¯­æ³•æ ‘(AST)ç”Ÿæˆrenderå‡½æ•°çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ optimizer.js ------------------ åˆ†æé™æ€æ ‘ï¼Œä¼˜åŒ–vdomæ¸²æŸ“\nâ”‚   â”œâ”€â”€ core ------------------------------ å­˜æ”¾é€šç”¨çš„ï¼Œå¹³å°æ— å…³çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ observer ---------------------- ååº”ç³»ç»Ÿï¼ŒåŒ…å«æ•°æ®è§‚æµ‹çš„æ ¸å¿ƒä»£ç \nâ”‚   â”‚   â”œâ”€â”€ vdom -------------------------- åŒ…å«è™šæ‹ŸDOMåˆ›å»º(creation)å’Œæ‰“è¡¥ä¸(patching)çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ instance ---------------------- åŒ…å«Vueæ„é€ å‡½æ•°è®¾è®¡ç›¸å…³çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ global-api -------------------- åŒ…å«ç»™Vueæ„é€ å‡½æ•°æŒ‚è½½å…¨å±€æ–¹æ³•(é™æ€æ–¹æ³•)æˆ–å±æ€§çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ components -------------------- åŒ…å«æŠ½è±¡å‡ºæ¥çš„é€šç”¨ç»„ä»¶\nâ”‚   â”œâ”€â”€ server ---------------------------- åŒ…å«æœåŠ¡ç«¯æ¸²æŸ“(server-side rendering)çš„ç›¸å…³ä»£ç \nâ”‚   â”œâ”€â”€ platforms ------------------------- åŒ…å«å¹³å°ç‰¹æœ‰çš„ç›¸å…³ä»£ç \nâ”‚   â”œâ”€â”€ sfc ------------------------------- åŒ…å«å•æ–‡ä»¶ç»„ä»¶(.vueæ–‡ä»¶)çš„è§£æé€»è¾‘ï¼Œç”¨äºvue-template-compileråŒ…\nâ”‚   â”œâ”€â”€ shared ---------------------------- åŒ…å«æ•´ä¸ªä»£ç åº“é€šç”¨çš„ä»£ç \n```\n\nå¤§æ¦‚äº†è§£äº†é‡è¦ç›®å½•å’Œæ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŸ¥çœ‹ [Development Setup](https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md#development-setup) ä¸­çš„å¸¸ç”¨å‘½ä»¤éƒ¨åˆ†ï¼Œæ¥äº†è§£å¦‚ä½•å¼€å§‹è¿™ä¸ªé¡¹ç›®äº†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ ·çš„ä»‹ç»ï¼š\n\n```\n# watch and auto re-build dist/vue.js\n$ npm run dev\n\n# watch and auto re-run unit tests in Chrome\n$ npm run dev:test\n```\n\nç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦è¿è¡Œ `npm run dev` å³å¯ç›‘æµ‹æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨é‡æ–°æ„å»ºè¾“å‡º dist/vue.jsï¼Œç„¶åè¿è¡Œ `npm run dev:test` æ¥æµ‹è¯•ã€‚ä¸è¿‡ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä¼šåœ¨ `examples` ç›®å½•æ–°å»ºä¸€ä¸ªä¾‹å­ï¼Œç„¶åå¼•ç”¨ dist/vue.js è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹¿è¿™ä¸ªä¾‹å­ä¸€è¾¹æ”¹Vueæºç ä¸€è¾¹çœ‹è‡ªå·±å†™çš„ä»£ç æƒ³æ€ä¹ˆç©æ€ä¹ˆç©ã€‚\n\n## <span style=\"color: #ff6600;\">äºŒã€çœ‹æºç çš„å°æç¤º</span>\n\nåœ¨çœŸæ­£æ­¥å…¥æºç ä¸–ç•Œä¹‹å‰ï¼Œæˆ‘æƒ³ç®€å•è¯´ä¸€è¯´çœ‹æºç çš„æŠ€å·§ï¼š\n\n### *æ³¨é‡å¤§ä½“æ¡†æ¶ï¼Œä»å®è§‚åˆ°å¾®è§‚*\n\nå½“ä½ çœ‹ä¸€ä¸ªé¡¹ç›®ä»£ç çš„æ—¶å€™ï¼Œæœ€å¥½æ˜¯èƒ½æ‰¾åˆ°ä¸€æ¡ä¸»çº¿ï¼Œå…ˆæŠŠå¤§ä½“æµç¨‹ç»“æ„æ‘¸æ¸…æ¥šï¼Œå†æ·±å…¥åˆ°ç»†èŠ‚ï¼Œé€é¡¹å‡»ç ´ï¼Œæ‹¿Vueä¸¾ä¸ªæ —å­ï¼šå‡å¦‚ä½ å·²ç»çŸ¥é“Vueä¸­æ•°æ®çŠ¶æ€æ”¹å˜åä¼šé‡‡ç”¨virtual DOMçš„æ–¹å¼æ›´æ–°DOMï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœä½ ä¸äº†è§£virtual DOMï¼Œé‚£ä¹ˆå¬æˆ‘ä¸€å¥â€œæš‚ä¸”ä¸è¦å»ç ”ç©¶å†…éƒ¨å…·ä½“å®ç°ï¼Œå› ä¸ºè¿™ä¼šæ˜¯ä½ ä¸§å¤±ä¸»çº¿â€ï¼Œè€Œä½ ä»…ä»…éœ€è¦çŸ¥é“virtual DOMåˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š\n\n>ä¸€ã€createElement(): ç”¨ JavaScriptå¯¹è±¡(è™šæ‹Ÿæ ‘) æè¿° çœŸå®DOMå¯¹è±¡(çœŸå®æ ‘)\n>äºŒã€diff(oldNode, newNode) : å¯¹æ¯”æ–°æ—§ä¸¤ä¸ªè™šæ‹Ÿæ ‘çš„åŒºåˆ«ï¼Œæ”¶é›†å·®å¼‚\n>ä¸‰ã€patch() : å°†å·®å¼‚åº”ç”¨åˆ°çœŸå®DOMæ ‘\n\næœ‰çš„æ—¶å€™ ç¬¬äºŒæ­¥ å¯èƒ½ä¸ ç¬¬ä¸‰æ­¥ åˆå¹¶æˆä¸€æ­¥(Vue ä¸­çš„patchå°±æ˜¯è¿™æ ·)ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æ¯”å¦‚ `src/compiler/codegen` å†…çš„ä»£ç ï¼Œå¯èƒ½ä½ ä¸çŸ¥é“ä»–å†™äº†ä»€ä¹ˆï¼Œç›´æ¥å»çœ‹å®ƒä¼šè®©ä½ å¾ˆç—›è‹¦ï¼Œä½†æ˜¯ä½ åªéœ€è¦çŸ¥é“ codegen æ˜¯ç”¨æ¥å°†æŠ½è±¡è¯­æ³•æ ‘(AST)ç”Ÿæˆrenderå‡½æ•°çš„å°±OKäº†ï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š\n\n```js\nfunction anonymous() {\n\twith(this){return _c('p',{attrs:{\"id\":\"app\"}},[_v(\"\\n      \"+_s(a)+\"\\n      \"),_c('my-com')])}\n}\n```\n\nå½“æˆ‘ä»¬çŸ¥é“äº†ä¸€ä¸ªä¸œè¥¿å­˜åœ¨ï¼Œä¸”çŸ¥é“å®ƒå­˜åœ¨çš„ç›®çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾ˆå®¹æ˜“æŠ“ä½è¿™æ¡ä¸»çº¿ï¼Œè¿™ä¸ªç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« å°±æ˜¯å›´ç»•å¤§ä½“ä¸»çº¿å±•å¼€çš„ã€‚äº†è§£å¤§ä½“ä¹‹åï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†æ¯éƒ¨åˆ†å†…å®¹éƒ½æ˜¯åšä»€ä¹ˆçš„ï¼Œæ¯”å¦‚ codegen æ˜¯ç”Ÿæˆç±»ä¼¼ä¸Šé¢è´´å‡ºçš„ä»£ç æ‰€ç¤ºçš„å‡½æ•°çš„ï¼Œé‚£ä¹ˆå†å»çœ‹codegenä¸‹çš„ä»£ç æ—¶ï¼Œç›®çš„æ€§å°±ä¼šæ›´å¼ºï¼Œå°±æ›´å®¹æ˜“ç†è§£ã€‚\n\n## <span style=\"color: #ff6600;\">ä¸‰ã€Vue çš„æ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆæ ·çš„<span>\n\nbalabalaä¸€å¤§å †ï¼Œå¼€å§‹æ¥å¹²è´§å§ã€‚æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯ææ¸…æ¥š Vue æ„é€ å‡½æ•°åˆ°åº•æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚\n\næˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ `new` æ“ä½œç¬¦æ¥è°ƒç”¨ `Vue`ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ `Vue` åº”è¯¥æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€ä»¶è¦åšçš„äº‹å„¿å°±æ˜¯æŠŠæ„é€ å‡½æ•°å…ˆæ‰’çš„ä¸€æ¸…äºŒæ¥šï¼Œå¦‚ä½•å¯»æ‰¾ `Vue` æ„é€ å‡½æ•°å‘¢ï¼Ÿå½“ç„¶æ˜¯ä» entry å¼€å§‹å•¦ï¼Œè¿˜è®°çš„æˆ‘ä»¬è¿è¡Œ `npm run dev` å‘½ä»¤åï¼Œä¼šè¾“å‡º `dist/vue.js` å—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å»çœ‹çœ‹ `npm run dev` å¹²äº†ä»€ä¹ˆï¼š\n\n```\n\"dev\": \"TARGET=web-full-dev rollup -w -c build/config.js\",\n```\n\né¦–å…ˆå°† TARGET å¾—å€¼è®¾ç½®ä¸º 'web-full-dev'ï¼Œç„¶åï¼Œç„¶åï¼Œç„¶åå¦‚æœä½ ä¸äº†è§£ rollup å°±åº”è¯¥ç®€å•å»çœ‹ä¸€ä¸‹å•¦......ï¼Œç®€å•çš„è¯´å°±æ˜¯ä¸€ä¸ªJavaScriptæ¨¡å—æ‰“åŒ…å™¨ï¼Œä½ å¯ä»¥æŠŠå®ƒç®€å•çš„ç†è§£ä¸ºå’Œ webpack ä¸€æ ·ï¼Œåªä¸è¿‡å®ƒæœ‰ä»–çš„ä¼˜åŠ¿ï¼Œæ¯”å¦‚ Tree-shaking (webpack2ä¹Ÿæœ‰)ï¼Œä½†åŒæ ·ï¼Œåœ¨æŸäº›åœºæ™¯å®ƒä¹Ÿæœ‰ä»–çš„åŠ£åŠ¿ã€‚ã€‚ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œå…¶ä¸­ `-w` å°±æ˜¯watchï¼Œ`-c` å°±æ˜¯æŒ‡å®šé…ç½®æ–‡ä»¶ä¸º `build/config.js` ï¼Œæˆ‘ä»¬æ‰“å¼€è¿™ä¸ªé…ç½®æ–‡ä»¶çœ‹ä¸€çœ‹ï¼š\n\n```js\n// å¼•å…¥ä¾èµ–ï¼Œå®šä¹‰ banner\n...\n\n// builds å¯¹è±¡\nconst builds = {\n\t...\n\t// Runtime+compiler development build (Browser)\n\t'web-full-dev': {\n\t    entry: path.resolve(__dirname, '../src/entries/web-runtime-with-compiler.js'),\n\t    dest: path.resolve(__dirname, '../dist/vue.js'),\n\t    format: 'umd',\n\t    env: 'development',\n\t    alias: { he: './entity-decoder' },\n\t    banner\n\t},\n\t...\n}\n\n// ç”Ÿæˆé…ç½®çš„æ–¹æ³•\nfunction genConfig(opts){\n\t...\n}\n\nif (process.env.TARGET) {\n  module.exports = genConfig(builds[process.env.TARGET])\n} else {\n  exports.getBuild = name => genConfig(builds[name])\n  exports.getAllBuilds = () => Object.keys(builds).map(name => genConfig(builds[name]))\n}\n```\n\nä¸Šé¢çš„ä»£ç æ˜¯ç®€åŒ–è¿‡çš„ï¼Œå½“æˆ‘ä»¬è¿è¡Œ `npm run dev` çš„æ—¶å€™ `process.env.TARGET` çš„å€¼ç­‰äº 'web-full-dev'ï¼Œæ‰€ä»¥\n\n```js\nmodule.exports = genConfig(builds[process.env.TARGET])\n```\n\nè¿™å¥ä»£ç ç›¸å½“äºï¼š\n\n```js\nmodule.exports = genConfig({\n    entry: path.resolve(__dirname, '../src/entries/web-runtime-with-compiler.js'),\n    dest: path.resolve(__dirname, '../dist/vue.js'),\n    format: 'umd',\n    env: 'development',\n    alias: { he: './entity-decoder' },\n    banner\n})\n```\n\næœ€ç»ˆï¼ŒgenConfig å‡½æ•°è¿”å›ä¸€ä¸ª config å¯¹è±¡ï¼Œè¿™ä¸ªconfigå¯¹è±¡å°±æ˜¯Rollupçš„é…ç½®å¯¹è±¡ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±ä¸éš¾çœ‹åˆ°ï¼Œå…¥å£æ–‡ä»¶æ˜¯ï¼š\n\n```\nsrc/entries/web-runtime-with-compiler.js\n```\n\næˆ‘ä»¬æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œä¸è¦å¿˜äº†æˆ‘ä»¬çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬åœ¨å¯»æ‰¾Vueæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶çš„ç¬¬ä¸€è¡Œä»£ç æ˜¯ï¼š\n\n```js\nimport Vue from './web-runtime'\n```\n\nè¿™ä¸ªæ—¶å€™ï¼Œä½ å°±åº”è¯¥çŸ¥é“ï¼Œè¿™ä¸ªæ–‡ä»¶æš‚æ—¶ä¸ä½ æ— ç¼˜ï¼Œä½ åº”è¯¥æ‰“å¼€ `web-runtime.js` æ–‡ä»¶ï¼Œä¸è¿‡å½“ä½ æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œä½ å‘ç°ç¬¬ä¸€è¡Œæ˜¯è¿™æ ·çš„ï¼š\n\n```js\nimport Vue from 'core/index'\n```\n\nä¾ç…§æ­¤æ€è·¯ï¼Œæœ€ç»ˆæˆ‘ä»¬å¯»æ‰¾åˆ°Vueæ„é€ å‡½æ•°çš„ä½ç½®åº”è¯¥æ˜¯åœ¨ `src/core/instance/index.js` æ–‡ä»¶ä¸­ï¼Œå…¶å®æˆ‘ä»¬çŒœä¹ŸçŒœå¾—åˆ°ï¼Œä¸Šé¢ä»‹ç»ç›®å½•çš„æ—¶å€™è¯´è¿‡ï¼šinstance æ˜¯å­˜æ”¾Vueæ„é€ å‡½æ•°è®¾è®¡ç›¸å…³ä»£ç çš„ç›®å½•ã€‚æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯»æ‰¾çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š\n\n![å¯»æ‰¾ Vue æ„é€ å‡½æ•°è·¯çº¿](http://7xlolm.com1.z0.glb.clouddn.com/vueimg2BD0DCC6-D689-4809-93D3-2F979E8F8C0C.png)\n\næˆ‘ä»¬å›å¤´çœ‹ä¸€çœ‹ `src/core/instance/index.js` æ–‡ä»¶ï¼Œå¾ˆç®€å•ï¼š\n\n```js\nimport { initMixin } from './init'\nimport { stateMixin } from './state'\nimport { renderMixin } from './render'\nimport { eventsMixin } from './events'\nimport { lifecycleMixin } from './lifecycle'\nimport { warn } from '../util/index'\n\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)) {\n    warn('Vue is a constructor and should be called with the `new` keyword')\n  }\n  this._init(options)\n}\n\ninitMixin(Vue)\nstateMixin(Vue)\neventsMixin(Vue)\nlifecycleMixin(Vue)\nrenderMixin(Vue)\n\nexport default Vue\n```\n\nå¼•å…¥ä¾èµ–ï¼Œå®šä¹‰ Vue æ„é€ å‡½æ•°ï¼Œç„¶åä»¥Vueæ„é€ å‡½æ•°ä¸ºå‚æ•°ï¼Œè°ƒç”¨äº†äº”ä¸ªæ–¹æ³•ï¼Œæœ€åå¯¼å‡º Vueã€‚è¿™äº”ä¸ªæ–¹æ³•åˆ†åˆ«æ¥è‡ªäº”ä¸ªæ–‡ä»¶ï¼š`init.js` `state.js` `render.js` `events.js` ä»¥åŠ `lifecycle.js`ã€‚\n\næ‰“å¼€è¿™äº”ä¸ªæ–‡ä»¶ï¼Œæ‰¾åˆ°ç›¸åº”çš„æ–¹æ³•ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™äº›æ–¹æ³•çš„ä½œç”¨ï¼Œå°±æ˜¯åœ¨ Vue çš„åŸå‹ prototype ä¸ŠæŒ‚è½½æ–¹æ³•æˆ–å±æ€§ï¼Œç»å†äº†è¿™äº”ä¸ªæ–¹æ³•åçš„Vueä¼šå˜æˆè¿™æ ·ï¼š\n\n```js\n// initMixin(Vue)\tsrc/core/instance/init.js **************************************************\nVue.prototype._init = function (options?: Object) {}\n\n// stateMixin(Vue)\tsrc/core/instance/state.js **************************************************\nVue.prototype.$data\nVue.prototype.$set = set\nVue.prototype.$delete = del\nVue.prototype.$watch = function(){}\n\n// renderMixin(Vue)\tsrc/core/instance/render.js **************************************************\nVue.prototype.$nextTick = function (fn: Function) {}\nVue.prototype._render = function (): VNode {}\nVue.prototype._s = _toString\nVue.prototype._v = createTextVNode\nVue.prototype._n = toNumber\nVue.prototype._e = createEmptyVNode\nVue.prototype._q = looseEqual\nVue.prototype._i = looseIndexOf\nVue.prototype._m = function(){}\nVue.prototype._o = function(){}\nVue.prototype._f = function resolveFilter (id) {}\nVue.prototype._l = function(){}\nVue.prototype._t = function(){}\nVue.prototype._b = function(){}\nVue.prototype._k = function(){}\n\n// eventsMixin(Vue)\tsrc/core/instance/events.js **************************************************\nVue.prototype.$on = function (event: string, fn: Function): Component {}\nVue.prototype.$once = function (event: string, fn: Function): Component {}\nVue.prototype.$off = function (event?: string, fn?: Function): Component {}\nVue.prototype.$emit = function (event: string): Component {}\n\n// lifecycleMixin(Vue)\tsrc/core/instance/lifecycle.js **************************************************\nVue.prototype._mount = function(){}\nVue.prototype._update = function (vnode: VNode, hydrating?: boolean) {}\nVue.prototype._updateFromParent = function(){}\nVue.prototype.$forceUpdate = function () {}\nVue.prototype.$destroy = function () {}\n```\n\nè¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿå¹¶æ²¡æœ‰ï¼Œæ ¹æ®æˆ‘ä»¬ä¹‹å‰å¯»æ‰¾ Vue çš„è·¯çº¿ï¼Œè¿™åªæ˜¯åˆšåˆšå¼€å§‹ï¼Œæˆ‘ä»¬è¿½æº¯è·¯çº¿å¾€å›èµ°ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªå¤„ç† Vue æ„é€ å‡½æ•°çš„åº”è¯¥æ˜¯ `src/core/index.js` æ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰“å¼€å®ƒï¼š\n\n```js\nimport Vue from './instance/index'\nimport { initGlobalAPI } from './global-api/index'\nimport { isServerRendering } from 'core/util/env'\n\ninitGlobalAPI(Vue)\n\nObject.defineProperty(Vue.prototype, '$isServer', {\n  get: isServerRendering\n})\n\nVue.version = '__VERSION__'\n\nexport default Vue\n```\n\nè¿™ä¸ªæ–‡ä»¶ä¹Ÿå¾ˆç®€å•ï¼Œä» instance/index ä¸­å¯¼å…¥å·²ç»åœ¨åŸå‹ä¸ŠæŒ‚è½½äº†æ–¹æ³•å’Œå±æ€§åçš„ Vueï¼Œç„¶åå¯¼å…¥ `initGlobalAPI` å’Œ `isServerRendering`ï¼Œä¹‹åå°†Vueä½œä¸ºå‚æ•°ä¼ ç»™  `initGlobalAPI` ï¼Œæœ€ååˆåœ¨ `Vue.prototype` ä¸ŠæŒ‚è½½äº† `$isServer` ï¼Œåœ¨ `Vue` ä¸ŠæŒ‚è½½äº† `version` å±æ€§ã€‚\n\n`initGlobalAPI` çš„ä½œç”¨æ˜¯åœ¨ `Vue` æ„é€ å‡½æ•°ä¸ŠæŒ‚è½½é™æ€å±æ€§å’Œæ–¹æ³•ï¼Œ`Vue` åœ¨ç»è¿‡ `initGlobalAPI` ä¹‹åï¼Œä¼šå˜æˆè¿™æ ·ï¼š\n\n```js\n// src/core/index.js / src/core/global-api/index.js\nVue.config\nVue.util = util\nVue.set = set\nVue.delete = del\nVue.nextTick = util.nextTick\nVue.options = {\n    components: {\n        KeepAlive\n    },\n    directives: {},\n    filters: {},\n    _base: Vue\n}\nVue.use\nVue.mixin\nVue.cid = 0\nVue.extend\nVue.component = function(){}\nVue.directive = function(){}\nVue.filter = function(){}\n\nVue.prototype.$isServer\nVue.version = '__VERSION__'\n```\n\nå…¶ä¸­ï¼Œç¨å¾®å¤æ‚ä¸€ç‚¹çš„å°±æ˜¯ `Vue.options`ï¼Œå¤§å®¶ç¨å¾®åˆ†æåˆ†æå°±ä¼šçŸ¥é“ä»–çš„ç¡®é•¿æˆé‚£ä¸ªæ ·å­ã€‚ä¸‹ä¸€ä¸ªå°±æ˜¯ `web-runtime.js` æ–‡ä»¶äº†ï¼Œ`web-runtime.js` æ–‡ä»¶ä¸»è¦åšäº†ä¸‰ä»¶äº‹å„¿ï¼š\n\n> 1ã€è¦†ç›– `Vue.config` çš„å±æ€§ï¼Œå°†å…¶è®¾ç½®ä¸ºå¹³å°ç‰¹æœ‰çš„ä¸€äº›æ–¹æ³•\n> 2ã€`Vue.options.directives` å’Œ `Vue.options.components` å®‰è£…å¹³å°ç‰¹æœ‰çš„æŒ‡ä»¤å’Œç»„ä»¶\n> 3ã€åœ¨ `Vue.prototype` ä¸Šå®šä¹‰ `__patch__` å’Œ `$mount`\n\nç»è¿‡ `web-runtime.js` æ–‡ä»¶ä¹‹åï¼Œ`Vue` å˜æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š\n\n```js\n// å®‰è£…å¹³å°ç‰¹å®šçš„utils\nVue.config.isUnknownElement = isUnknownElement\nVue.config.isReservedTag = isReservedTag\nVue.config.getTagNamespace = getTagNamespace\nVue.config.mustUseProp = mustUseProp\n// å®‰è£…å¹³å°ç‰¹å®šçš„ æŒ‡ä»¤ å’Œ ç»„ä»¶\nVue.options = {\n    components: {\n        KeepAlive,\n        Transition,\n        TransitionGroup\n    },\n    directives: {\n        model,\n        show\n    },\n    filters: {},\n    _base: Vue\n}\nVue.prototype.__patch__\nVue.prototype.$mount\n```\n\nè¿™é‡Œå¤§å®¶è¦æ³¨æ„çš„æ˜¯ `Vue.options` çš„å˜åŒ–ã€‚å¦å¤–è¿™é‡Œçš„ `$mount` æ–¹æ³•å¾ˆç®€å•ï¼š\n\n```js\nVue.prototype.$mount = function (\n  el?: string | Element,\n  hydrating?: boolean\n): Component {\n  el = el && inBrowser ? query(el) : undefined\n  return this._mount(el, hydrating)\n}\n```\n\né¦–å…ˆæ ¹æ®æ˜¯å¦æ˜¯æµè§ˆå™¨ç¯å¢ƒå†³å®šè¦ä¸è¦ `query(el)` è·å–å…ƒç´ ï¼Œç„¶åå°† `el` ä½œä¸ºå‚æ•°ä¼ é€’ç»™ `this._mount()`ã€‚\n\næœ€åä¸€ä¸ªå¤„ç† Vue çš„æ–‡ä»¶å°±æ˜¯å…¥å£æ–‡ä»¶ `web-runtime-with-compiler.js` äº†ï¼Œè¯¥æ–‡ä»¶åšäº†ä¸¤ä»¶äº‹ï¼š\n\n1ã€ç¼“å­˜æ¥è‡ª `web-runtime.js` æ–‡ä»¶çš„ `$mount` å‡½æ•°\n\n```js\nconst mount = Vue.prototype.$mount\n```\n\nç„¶åè¦†ç›–è¦†ç›–äº† `Vue.prototype.$mount`\n\n2ã€åœ¨ Vue ä¸ŠæŒ‚è½½ `compile`\n\n```js\nVue.compile = compileToFunctions\n```\n\ncompileToFunctions å‡½æ•°çš„ä½œç”¨ï¼Œå°±æ˜¯å°†æ¨¡æ¿ `template` ç¼–è¯‘ä¸ºrenderå‡½æ•°ã€‚\n\nè‡³æ­¤ï¼Œæˆ‘ä»¬ç®—æ˜¯è¿˜åŸäº† Vue æ„é€ å‡½æ•°ï¼Œæ€»ç»“ä¸€ä¸‹ï¼š\n\n> 1ã€`Vue.prototype` ä¸‹çš„å±æ€§å’Œæ–¹æ³•çš„æŒ‚è½½ä¸»è¦æ˜¯åœ¨ `src/core/instance` ç›®å½•ä¸­çš„ä»£ç å¤„ç†çš„\n\n> 2ã€`Vue` ä¸‹çš„é™æ€å±æ€§å’Œæ–¹æ³•çš„æŒ‚è½½ä¸»è¦æ˜¯åœ¨ `src/core/global-api` ç›®å½•ä¸‹çš„ä»£ç å¤„ç†çš„\n\n> 3ã€`web-runtime.js` ä¸»è¦æ˜¯æ·»åŠ webå¹³å°ç‰¹æœ‰çš„é…ç½®ã€ç»„ä»¶å’ŒæŒ‡ä»¤ï¼Œ`web-runtime-with-compiler.js` ç»™Vueçš„ `$mount` æ–¹æ³•æ·»åŠ  `compiler` ç¼–è¯‘å™¨ï¼Œæ”¯æŒ `template`ã€‚\n\n## <span style=\"color: #ff6600;\">å››ã€ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­</span>\n\nåœ¨äº†è§£äº† `Vue` æ„é€ å‡½æ•°çš„è®¾è®¡ä¹‹åï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­å°±è¦ç™»åœºäº†ï¼ŒæŒå£°æœ‰è¯·ï¼š\n\n```js\nlet v = new Vue({\n\tel: '#app',\n\tdata: {\n\t\ta: 1,\n\t\tb: [1, 2, 3]\n\t}\n})\n```\n\nå¥½å§ï¼Œæˆ‘æ‰¿è®¤è¿™æ®µä»£ç ä½ å®¶æ²¡æ»¡æœˆçš„å­©å­éƒ½ä¼šå†™äº†ã€‚è¿™æ®µä»£ç å°±æ˜¯æˆ‘ä»¬è´¯ç©¿å§‹ç»ˆçš„ä¾‹å­ï¼Œå®ƒå°±æ˜¯è¿™ç¯‡æ–‡ç« çš„ä¸»çº¿ï¼Œåœ¨åç»­çš„è®²è§£ä¸­ï¼Œéƒ½ä¼šä»¥è¿™æ®µä»£ç ä¸ºä¾‹ï¼Œå½“è®²åˆ°å¿…è¦çš„åœ°æ–¹ï¼Œä¼šä¸ºå…¶æ·»åŠ é€‰é¡¹ï¼Œæ¯”å¦‚è®²è®¡ç®—å±æ€§çš„æ—¶å€™å½“ç„¶è¦åŠ ä¸Šä¸€ä¸ª `computed` å±æ€§äº†ã€‚ä¸è¿‡åœ¨æœ€å¼€å§‹ï¼Œæˆ‘åªä¼ é€’äº†ä¸¤ä¸ªé€‰é¡¹ `el` ä»¥åŠ `data`ï¼Œâ€œæˆ‘ä»¬çœ‹çœ‹æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œè®©æˆ‘ä»¬æ‹­ç›®ä»¥å¾…â€œ ---- NBAçƒæ˜Ÿåœ¨æ¥å—é‡‡è®¿æ—¶æœ€å–œæ¬¢è¯´è¿™å¥è¯ã€‚\n\n*å½“æˆ‘ä»¬æŒ‰ç…§ä¾‹å­é‚£æ ·ç¼–ç ä½¿ç”¨Vueçš„æ—¶å€™ï¼ŒVueéƒ½åšäº†ä»€ä¹ˆï¼Ÿ*\n\næƒ³è¦çŸ¥é“Vueéƒ½å¹²äº†ä»€ä¹ˆï¼Œæˆ‘ä»¬å°±è¦æ‰¾åˆ° Vue åˆå§‹åŒ–ç¨‹åºï¼ŒæŸ¥çœ‹ Vue æ„é€ å‡½æ•°ï¼š\n\n```js\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)) {\n    warn('Vue is a constructor and should be called with the `new` keyword')\n  }\n  this._init(options)\n}\n```\n\næˆ‘ä»¬å‘ç°ï¼Œ`_init()` æ–¹æ³•å°±æ˜¯Vueè°ƒç”¨çš„ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œç„¶åå°†æˆ‘ä»¬çš„å‚æ•° `options` é€ä¼ äº†è¿‡å»ã€‚åœ¨è°ƒç”¨ `_init()` ä¹‹å‰ï¼Œè¿˜åšäº†ä¸€ä¸ªå®‰å…¨æ¨¡å¼çš„å¤„ç†ï¼Œå‘Šè¯‰å¼€å‘è€…å¿…é¡»ä½¿ç”¨ `new` æ“ä½œç¬¦è°ƒç”¨ Vueã€‚æ ¹æ®ä¹‹å‰æˆ‘ä»¬çš„æ•´ç†ï¼Œ`_init()` æ–¹æ³•åº”è¯¥æ˜¯åœ¨ `src/core/instance/init.js` æ–‡ä»¶ä¸­å®šä¹‰çš„ï¼Œæˆ‘ä»¬æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æŸ¥çœ‹ `_init()` æ–¹æ³•ï¼š\n\n```js\n  Vue.prototype._init = function (options?: Object) {\n    const vm: Component = this\n    // a uid\n    vm._uid = uid++\n    // a flag to avoid this being observed\n    vm._isVue = true\n    // merge options\n    if (options && options._isComponent) {\n      // optimize internal component instantiation\n      // since dynamic options merging is pretty slow, and none of the\n      // internal component options needs special treatment.\n      initInternalComponent(vm, options)\n    } else {\n      vm.$options = mergeOptions(\n        resolveConstructorOptions(vm.constructor),\n        options || {},\n        vm\n      )\n    }\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      initProxy(vm)\n    } else {\n      vm._renderProxy = vm\n    }\n\n    // expose real self\n    vm._self = vm\n    initLifecycle(vm)\n    initEvents(vm)\n    callHook(vm, 'beforeCreate')\n    initState(vm)\n    callHook(vm, 'created')\n    initRender(vm)\n  }\n```\n\n`_init()` æ–¹æ³•åœ¨ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œåœ¨ `this` å¯¹è±¡ä¸Šå®šä¹‰äº†ä¸¤ä¸ªå±æ€§ï¼š`_uid` å’Œ `_isVue`ï¼Œç„¶ååˆ¤æ–­æœ‰æ²¡æœ‰å®šä¹‰ `options._isComponent`ï¼Œåœ¨ä½¿ç”¨ Vue å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯ä¸ä¼šä½¿ç”¨ `_isComponent` é€‰é¡¹çš„ï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯ Vue å†…éƒ¨ä½¿ç”¨çš„ï¼ŒæŒ‰ç…§æœ¬èŠ‚å¼€å¤´çš„ä¾‹å­ï¼Œè¿™é‡Œä¼šèµ° `else` åˆ†æ”¯ï¼Œä¹Ÿå°±æ˜¯è¿™æ®µä»£ç ï¼š\n\n```js\n  vm.$options = mergeOptions(\n    resolveConstructorOptions(vm.constructor),\n    options || {},\n    vm\n  )\n```\n\nè¿™æ · `Vue` ç¬¬ä¸€æ­¥æ‰€åšçš„äº‹æƒ…å°±æ¥äº†ï¼š<span style=\"color: red;\">*ä½¿ç”¨ç­–ç•¥å¯¹è±¡åˆå¹¶å‚æ•°é€‰é¡¹*</span>\n\nå¯ä»¥å‘ç°ï¼ŒVueä½¿ç”¨ `mergeOptions` æ¥å¤„ç†æˆ‘ä»¬è°ƒç”¨Vueæ—¶ä¼ å…¥çš„å‚æ•°é€‰é¡¹(options)ï¼Œç„¶åå°†è¿”å›å€¼èµ‹å€¼ç»™ `this.$options` (vm === this)ï¼Œä¼ ç»™ `mergeOptions` æ–¹æ³•ä¸‰ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸€çœ‹ï¼Œé¦–å…ˆæ˜¯ï¼š`resolveConstructorOptions(vm.constructor)`ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼š\n\n```js\nexport function resolveConstructorOptions (Ctor: Class<Component>) {\n  let options = Ctor.options\n  if (Ctor.super) {\n    const superOptions = Ctor.super.options\n    const cachedSuperOptions = Ctor.superOptions\n    const extendOptions = Ctor.extendOptions\n    if (superOptions !== cachedSuperOptions) {\n      // super option changed\n      Ctor.superOptions = superOptions\n      extendOptions.render = options.render\n      extendOptions.staticRenderFns = options.staticRenderFns\n      extendOptions._scopeId = options._scopeId\n      options = Ctor.options = mergeOptions(superOptions, extendOptions)\n      if (options.name) {\n        options.components[options.name] = Ctor\n      }\n    }\n  }\n  return options\n}\n```\n\nè¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•° `Ctor`ï¼Œé€šè¿‡ä¼ å…¥çš„ `vm.constructor` æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå…¶å®å°±æ˜¯ `Vue` æ„é€ å‡½æ•°æœ¬èº«ã€‚æ‰€ä»¥ä¸‹é¢è¿™å¥ä»£ç ï¼š\n\n```js\nlet options = Ctor.options\n```\n\nç›¸å½“äºï¼š\n\n```js\nlet options = Vue.options\n```\n\nå¤§å®¶è¿˜è®°å¾— `Vue.options` å—ï¼Ÿåœ¨å¯»æ‰¾Vueæ„é€ å‡½æ•°ä¸€èŠ‚é‡Œï¼Œæˆ‘ä»¬æ•´ç†äº† `Vue.options` åº”è¯¥é•¿æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š\n\n```js\nVue.options = {\n    components: {\n        KeepAlive,\n        Transition,\n        TransitionGroup\n    },\n    directives: {\n        model,\n        show\n    },\n    filters: {},\n    _base: Vue\n}\n```\n\nä¹‹ååˆ¤æ–­æ˜¯å¦å®šä¹‰äº† `Vue.super` ï¼Œè¿™ä¸ªæ˜¯ç”¨æ¥å¤„ç†ç»§æ‰¿çš„ï¼Œæˆ‘ä»¬åç»­å†è®²ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œ`resolveConstructorOptions` æ–¹æ³•ç›´æ¥è¿”å›äº† `Vue.options`ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼ é€’ç»™ `mergeOptions` æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ `Vue.options`ã€‚\n\nä¼ ç»™ `mergeOptions` æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬è°ƒç”¨Vueæ„é€ å‡½æ•°æ—¶çš„å‚æ•°é€‰é¡¹ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ `vm` ä¹Ÿå°±æ˜¯ `this` å¯¹è±¡ï¼ŒæŒ‰ç…§æœ¬èŠ‚å¼€å¤´çš„ä¾‹å­é‚£æ ·ä½¿ç”¨ Vueï¼Œæœ€ç»ˆè¿è¡Œçš„ä»£ç åº”è¯¥å¦‚ä¸‹ï¼š\n\n```js\n  vm.$options = mergeOptions(\n  \t// Vue.options\n    {\n\t    components: {\n\t        KeepAlive,\n\t        Transition,\n\t        TransitionGroup\n\t    },\n\t    directives: {\n\t        model,\n\t        show\n\t    },\n\t    filters: {},\n\t    _base: Vue\n\t},\n\t// è°ƒç”¨Vueæ„é€ å‡½æ•°æ—¶ä¼ å…¥çš„å‚æ•°é€‰é¡¹ options\n    {\n    \tel: '#app',\n\t\tdata: {\n\t\t\ta: 1,\n\t\t\tb: [1, 2, 3]\n\t\t}\n    },\n    // this\n    vm\n  )\n```\n\näº†è§£äº†è¿™äº›ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹çœ‹ `mergeOptions` åˆ°åº•åšäº†äº›ä»€ä¹ˆäº†ï¼Œæ ¹æ®å¼•ç”¨å¯»æ‰¾åˆ° `mergeOptions` åº”è¯¥æ˜¯åœ¨ `src/core/util/options.js` æ–‡ä»¶ä¸­å®šä¹‰çš„ã€‚è¿™ä¸ªæ–‡ä»¶ç¬¬ä¸€æ¬¡çœ‹å¯èƒ½ä¼šå¤´å¤§ï¼Œä¸‹é¢æ˜¯æˆ‘å¤„ç†åçš„ç®€ç•¥å±•ç¤ºï¼Œå¤§å®¶çœ‹ä¸Šå»åº”è¯¥æ›´å®¹æ˜“ç†è§£äº†ï¼š\n\n```js\n// 1ã€å¼•ç”¨ä¾èµ–\nimport Vue from '../instance/index'\nå…¶ä»–å¼•ç”¨...\n\n// 2ã€åˆå¹¶çˆ¶å­é€‰é¡¹å€¼ä¸ºæœ€ç»ˆå€¼çš„ç­–ç•¥å¯¹è±¡ï¼Œæ­¤æ—¶ strats æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå› ä¸º config.optionMergeStrategies = Object.create(null)\nconst strats = config.optionMergeStrategies\n// 3ã€åœ¨ strats å¯¹è±¡ä¸Šå®šä¹‰ä¸å‚æ•°é€‰é¡¹åç§°ç›¸åŒçš„æ–¹æ³•\nstrats.el = \nstrats.propsData = function (parent, child, vm, key){}\nstrats.data = function (parentVal, childVal, vm)\n\nconfig._lifecycleHooks.forEach(hook => {\n  strats[hook] = mergeHook\n})\n\nconfig._assetTypes.forEach(function (type) {\n  strats[type + 's'] = mergeAssets\n})\n\nstrats.watch = function (parentVal, childVal)\n\nstrats.props =\nstrats.methods =\nstrats.computed = function (parentVal: ?Object, childVal: ?Object)\n// é»˜è®¤çš„åˆå¹¶ç­–ç•¥ï¼Œå¦‚æœæœ‰ `childVal` åˆ™è¿”å› `childVal` æ²¡æœ‰åˆ™è¿”å› `parentVal`\nconst defaultStrat = function (parentVal: any, childVal: any): any {\n  return childVal === undefined\n    ? parentVal\n    : childVal\n}\n\n// 4ã€mergeOptions ä¸­æ ¹æ®å‚æ•°é€‰é¡¹è°ƒç”¨åŒåçš„ç­–ç•¥æ–¹æ³•è¿›è¡Œåˆå¹¶å¤„ç†\nexport function mergeOptions (\n  parent: Object,\n  child: Object,\n  vm?: Component\n): Object {\n\n  // å…¶ä»–ä»£ç \n  ...\n\n  const options = {}\n  let key\n  for (key in parent) {\n    mergeField(key)\n  }\n  for (key in child) {\n    if (!hasOwn(parent, key)) {\n      mergeField(key)\n    }\n  }\n  function mergeField (key) {\n    const strat = strats[key] || defaultStrat\n    options[key] = strat(parent[key], child[key], vm, key)\n  }\n  return options\n\t\n}\n\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘çœç•¥äº†ä¸€äº›å·¥å…·å‡½æ•°ï¼Œä¾‹å¦‚ `mergeHook` å’Œ `mergeAssets` ç­‰ç­‰ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯è¿™æ®µä»£ç ï¼š\n\n```js\nconfig._lifecycleHooks.forEach(hook => {\n  strats[hook] = mergeHook\n})\n\nconfig._assetTypes.forEach(function (type) {\n  strats[type + 's'] = mergeAssets\n})\n```\n\n`config` å¯¹è±¡å¼•ç”¨è‡ª `src/core/config.js` æ–‡ä»¶ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯åœ¨ `strats` ä¸‹æ·»åŠ äº†ç›¸åº”çš„ç”Ÿå‘½å‘¨æœŸé€‰é¡¹çš„åˆå¹¶ç­–ç•¥å‡½æ•°ä¸º `mergeHook`ï¼Œæ·»åŠ æŒ‡ä»¤(directives)ã€ç»„ä»¶(components)ã€è¿‡æ»¤å™¨(filters)ç­‰é€‰é¡¹çš„åˆå¹¶ç­–ç•¥å‡½æ•°ä¸º `mergeAssets`ã€‚\n\nè¿™æ ·çœ‹æ¥å°±æ¸…æ™°å¤šäº†ï¼Œæ‹¿æˆ‘ä»¬è´¯ç©¿æœ¬æ–‡çš„ä¾‹å­æ¥è¯´ï¼š\n\n```js\nlet v = new Vue({\n\tel: '#app',\n\tdata: {\n\t\ta: 1,\n\t\tb: [1, 2, 3]\n\t}\n})\n```\n\nå…¶ä¸­ `el` é€‰é¡¹ä¼šä½¿ç”¨ `defaultStrat` é»˜è®¤ç­–ç•¥å‡½æ•°å¤„ç†ï¼Œ`data` é€‰é¡¹åˆ™ä¼šä½¿ç”¨ `strats.data` ç­–ç•¥å‡½æ•°å¤„ç†ï¼Œå¹¶ä¸”æ ¹æ® `strats.data` ä¸­çš„é€»è¾‘ï¼Œ`strats.data` æ–¹æ³•æœ€ç»ˆä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ï¼š`mergedInstanceDataFn`ã€‚\n\nè¿™é‡Œå°±ä¸è¯¦ç»†çš„è®²è§£æ¯ä¸€ä¸ªç­–ç•¥å‡½æ•°çš„å†…å®¹äº†ï¼Œåç»­éƒ½ä¼šè®²åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯æŠ“ä½ä¸»çº¿ç†æ¸…æ€è·¯ä¸ºä¸»ï¼Œåªéœ€è¦çŸ¥é“Vueåœ¨å¤„ç†é€‰é¡¹çš„æ—¶å€™ï¼Œä½¿ç”¨äº†ä¸€ä¸ªç­–ç•¥å¯¹è±¡å¯¹çˆ¶å­é€‰é¡¹è¿›è¡Œåˆå¹¶ã€‚å¹¶å°†æœ€ç»ˆçš„å€¼èµ‹å€¼ç»™å®ä¾‹ä¸‹çš„ `$options` å±æ€§å³ï¼š`this.$options`ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç»§ç»­æŸ¥çœ‹ `_init()` æ–¹æ³•åœ¨åˆå¹¶å®Œé€‰é¡¹ä¹‹åï¼Œåˆåšäº†ä»€ä¹ˆï¼š\n\nåˆå¹¶å®Œé€‰é¡¹ä¹‹åï¼ŒVue ç¬¬äºŒéƒ¨åšçš„äº‹æƒ…å°±æ¥äº†ï¼š<span style=\"color: red;\">*åˆå§‹åŒ–å·¥ä½œä¸Vueå®ä¾‹å¯¹è±¡çš„è®¾è®¡*</span>\n\nå‰é¢è®²äº† Vue æ„é€ å‡½æ•°çš„è®¾è®¡ï¼Œå¹¶ä¸”æ•´ç†äº† *VueåŸå‹å±æ€§ä¸æ–¹æ³•* å’Œ *Vueé™æ€å±æ€§ä¸æ–¹æ³•*ï¼Œè€Œ Vue å®ä¾‹å¯¹è±¡å°±æ˜¯é€šè¿‡æ„é€ å‡½æ•°åˆ›é€ å‡ºæ¥çš„ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ Vue å®ä¾‹å¯¹è±¡æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Œä¸‹é¢çš„ä»£ç æ˜¯ `_init()` æ–¹æ³•åˆå¹¶å®Œé€‰é¡¹ä¹‹åçš„ä»£ç ï¼š\n\n```js\n\t/* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      initProxy(vm)\n    } else {\n      vm._renderProxy = vm\n    }\n\n    // expose real self\n\tvm._self = vm\n    initLifecycle(vm)\n    initEvents(vm)\n    callHook(vm, 'beforeCreate')\n    initState(vm)\n    callHook(vm, 'created')\n    initRender(vm)\n```\n\næ ¹æ®ä¸Šé¢çš„ä»£ç ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¼šä¸ºå®ä¾‹æ·»åŠ ä¸¤ä¸ªå±æ€§ï¼Œå¹¶ä¸”å±æ€§å€¼éƒ½ä¸ºå®ä¾‹æœ¬èº«ï¼š\n\n```js\nvm._renderProxy = vm\nvm._self = vm\n```\n\nç„¶åï¼Œè°ƒç”¨äº†å››ä¸ª `init*` æ–¹æ³•åˆ†åˆ«ä¸ºï¼š`initLifecycle`ã€`initEvents`ã€`initState`ã€`initRender`ï¼Œä¸”åœ¨ `initState` å‰ååˆ†åˆ«å›è°ƒäº†ç”Ÿå‘½å‘¨æœŸé’©å­ `beforeCreate` å’Œ `created`ï¼Œè€Œ `initRender` æ˜¯åœ¨ `created` é’©å­æ‰§è¡Œä¹‹åæ‰§è¡Œçš„ï¼Œçœ‹åˆ°è¿™é‡Œï¼Œä¹Ÿå°±æ˜ç™½äº†ä¸ºä»€ä¹ˆ created çš„æ—¶å€™ä¸èƒ½æ“ä½œDOMäº†ã€‚å› ä¸ºè¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰æ¸²æŸ“çœŸæ­£çš„DOMå…ƒç´ åˆ°æ–‡æ¡£ä¸­ã€‚`created` ä»…ä»…ä»£è¡¨æ•°æ®çŠ¶æ€çš„åˆå§‹åŒ–å®Œæˆã€‚\n\næ ¹æ®å››ä¸ª `init*` æ–¹æ³•çš„å¼•ç”¨å…³ç³»æ‰“å¼€å¯¹åº”çš„æ–‡ä»¶æŸ¥çœ‹å¯¹åº”çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å‘ç°ï¼Œè¿™äº›æ–¹æ³•æ˜¯åœ¨å¤„ç†Vueå®ä¾‹å¯¹è±¡ï¼Œä»¥åŠåšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œï¼Œç±»ä¼¼æ•´ç†Vueæ„é€ å‡½æ•°ä¸€æ ·ï¼Œæˆ‘åŒæ ·é’ˆå¯¹Vueå®ä¾‹åšäº†å±æ€§å’Œæ–¹æ³•çš„æ•´ç†ï¼Œå¦‚ä¸‹ï¼š\n\n```js\n// åœ¨ Vue.prototype._init ä¸­æ·»åŠ çš„å±æ€§ \t\t**********************************************************\nthis._uid = uid++\nthis._isVue = true\nthis.$options = {\n    components,\n    directives,\n    filters,\n    _base,\n    el,\n    data: mergedInstanceDataFn()\n}\nthis._renderProxy = this\nthis._self = this\n\n// åœ¨ initLifecycle ä¸­æ·»åŠ çš„å±æ€§\t\t**********************************************************\nthis.$parent = parent\nthis.$root = parent ? parent.$root : this\n \nthis.$children = []\nthis.$refs = {}\n\nthis._watcher = null\nthis._inactive = false\nthis._isMounted = false\nthis._isDestroyed = false\nthis._isBeingDestroyed = false\n\n// åœ¨ initEvents\t ä¸­æ·»åŠ çš„å±æ€§\t \t**********************************************************\nthis._events = {}\nthis._updateListeners = function(){}\n\n// åœ¨ initState ä¸­æ·»åŠ çš„å±æ€§\t\t**********************************************************\nthis._watchers = []\n    // initData\n    this._data\n\n// åœ¨ initRender\t ä¸­æ·»åŠ çš„å±æ€§ \t**********************************************************\nthis.$vnode = null // the placeholder node in parent tree\nthis._vnode = null // the root of the child tree\nthis._staticTrees = null\nthis.$slots\nthis.$scopedSlots\nthis._c\nthis.$createElement\n```\n\nä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªVueå®ä¾‹æ‰€åŒ…å«çš„å±æ€§å’Œæ–¹æ³•ï¼Œé™¤æ­¤ä¹‹å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ `initEvents` ä¸­é™¤äº†æ·»åŠ å±æ€§ä¹‹å¤–ï¼Œå¦‚æœæœ‰ `vm.$options._parentListeners` è¿˜è¦è°ƒç”¨ `vm._updateListeners()` æ–¹æ³•ï¼Œåœ¨ `initState` ä¸­åˆè°ƒç”¨äº†ä¸€äº›å…¶ä»–initæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\n\n```js\nexport function initState (vm: Component) {\n  vm._watchers = []\n  initProps(vm)\n  initMethods(vm)\n  initData(vm)\n  initComputed(vm)\n  initWatch(vm)\n}\n```\n\næœ€ååœ¨ `initRender` ä¸­å¦‚æœæœ‰ `vm.$options.el` è¿˜è¦è°ƒç”¨ `vm.$mount(vm.$options.el)`ï¼Œå¦‚ä¸‹ï¼š\n\n```js\n  if (vm.$options.el) {\n    vm.$mount(vm.$options.el)\n  }\n```\n\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¦‚æœä¸ä¼ é€’ `el` é€‰é¡¹å°±éœ€è¦æ‰‹åŠ¨ mount çš„åŸå› äº†ã€‚\n\né‚£ä¹ˆæˆ‘ä»¬ä¾ç…§æˆ‘ä»¬æœ¬èŠ‚å¼€å¤´çš„çš„ä¾‹å­ï¼Œä»¥åŠåˆå§‹åŒ–çš„å…ˆåé¡ºåºæ¥é€ä¸€çœ‹ä¸€çœ‹éƒ½å‘ç”Ÿäº†ä»€ä¹ˆã€‚æˆ‘ä»¬å°† `initState` ä¸­çš„ `init*` æ–¹æ³•å±•å¼€æ¥çœ‹ï¼Œæ‰§è¡Œé¡ºåºåº”è¯¥æ˜¯è¿™æ ·çš„ï¼ˆä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ‰§è¡Œï¼‰ï¼š\n\n```\ninitLifecycle(vm)\ninitEvents(vm)\ncallHook(vm, 'beforeCreate')\ninitProps(vm)\ninitMethods(vm)\ninitData(vm)\ninitComputed(vm)\ninitWatch(vm)\ncallHook(vm, 'created')\ninitRender(vm)\n```\n\né¦–å…ˆæ˜¯ `initLifecycle`ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨å°±æ˜¯åœ¨å®ä¾‹ä¸Šæ·»åŠ ä¸€äº›å±æ€§ï¼Œç„¶åæ˜¯ `initEvents`ï¼Œç”±äº `vm.$options._parentListeners` çš„å€¼ä¸º `undefined` æ‰€ä»¥ä¹Ÿä»…ä»…æ˜¯åœ¨å®ä¾‹ä¸Šæ·»åŠ å±æ€§ï¼Œ `vm._updateListeners(listeners)` å¹¶ä¸ä¼šæ‰§è¡Œï¼Œç”±äºæˆ‘ä»¬åªä¼ é€’äº† `el` å’Œ `data`ï¼Œæ‰€ä»¥ `initProps`ã€`initMethods`ã€`initComputed`ã€`initWatch` è¿™å››ä¸ªæ–¹æ³•ä»€ä¹ˆéƒ½ä¸ä¼šåšï¼Œåªæœ‰ `initData` ä¼šæ‰§è¡Œã€‚æœ€åæ˜¯ `initRender`ï¼Œé™¤äº†åœ¨å®ä¾‹ä¸Šæ·»åŠ ä¸€äº›å±æ€§å¤–ï¼Œç”±äºæˆ‘ä»¬ä¼ é€’äº† `el` é€‰é¡¹ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œ `vm.$mount(vm.$options.el)`ã€‚\n\nç»¼ä¸Šæ‰€è¿°ï¼šæŒ‰ç…§æˆ‘ä»¬çš„ä¾‹å­é‚£æ ·å†™ï¼Œåˆå§‹åŒ–å·¥ä½œåªåŒ…å«ä¸¤ä¸ªä¸»è¦å†…å®¹å³ï¼š`initData` å’Œ `initRender`ã€‚\n\n## <span style=\"color: #ff6600;\">äº”ã€é€šè¿‡`initData`çœ‹Vueçš„æ•°æ®å“åº”ç³»ç»Ÿ</span>\n\nVueçš„æ•°æ®å“åº”ç³»ç»ŸåŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š`Observer`ã€`Dep`ã€`Watcher`ã€‚å…³äºæ•°æ®å“åº”ç³»ç»Ÿçš„å†…å®¹çœŸçš„å·²ç»è¢«æ–‡ç« è®²çƒ‚äº†ï¼Œæ‰€ä»¥æˆ‘å°±ç®€å•çš„è¯´ä¸€ä¸‹ï¼ŒåŠ›æ±‚å¤§å®¶èƒ½ç†è§£å°±okï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹ä¸€ä¸‹ `initData` ä¸­çš„ä»£ç ï¼š\n\n```\nfunction initData (vm: Component) {\n  let data = vm.$options.data\n  data = vm._data = typeof data === 'function'\n    ? data.call(vm)\n    : data || {}\n  if (!isPlainObject(data)) {\n    data = {}\n    process.env.NODE_ENV !== 'production' && warn(\n      'data functions should return an object:\\n' +\n      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\n      vm\n    )\n  }\n  // proxy data on instance\n  const keys = Object.keys(data)\n  const props = vm.$options.props\n  let i = keys.length\n  while (i--) {\n    if (props && hasOwn(props, keys[i])) {\n      process.env.NODE_ENV !== 'production' && warn(\n        `The data property \"${keys[i]}\" is already declared as a prop. ` +\n        `Use prop default value instead.`,\n        vm\n      )\n    } else {\n      proxy(vm, keys[i])\n    }\n  }\n  // observe data\n  observe(data)\n  data.__ob__ && data.__ob__.vmCount++\n}\n```\n\né¦–å…ˆï¼Œå…ˆæ‹¿åˆ° data æ•°æ®ï¼š`let data = vm.$options.data`ï¼Œå¤§å®¶è¿˜è®°å¾—æ­¤æ—¶ `vm.$options.data` çš„å€¼åº”è¯¥æ˜¯é€šè¿‡ `mergeOptions` åˆå¹¶å¤„ç†åçš„ `mergedInstanceDataFn` å‡½æ•°å—ï¼Ÿæ‰€ä»¥åœ¨å¾—åˆ° data åï¼Œå®ƒåˆåˆ¤æ–­äº† data çš„æ•°æ®ç±»å‹æ˜¯ä¸æ˜¯ 'function'ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯ï¼šdata è¿˜æ˜¯æˆ‘ä»¬ä¼ å…¥çš„æ•°æ®é€‰é¡¹çš„ dataï¼Œå³ï¼š\n\n```\ndata: {\n\ta: 1,\n\tb: [1, 2, 3]\n}\n```\n\nç„¶ååœ¨å®ä¾‹å¯¹è±¡ä¸Šå®šä¹‰ `_data` å±æ€§ï¼Œè¯¥å±æ€§ä¸ `data` æ˜¯ç›¸åŒçš„å¼•ç”¨ã€‚\n\nç„¶åæ˜¯ä¸€ä¸ª `while` å¾ªç¯ï¼Œå¾ªç¯çš„ç›®çš„æ˜¯åœ¨å®ä¾‹å¯¹è±¡ä¸Šå¯¹æ•°æ®è¿›è¡Œä»£ç†ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½é€šè¿‡ `this.a` æ¥è®¿é—® `data.a` äº†ï¼Œä»£ç çš„å¤„ç†æ˜¯åœ¨ `proxy` å‡½æ•°ä¸­ï¼Œè¯¥å‡½æ•°éå¸¸ç®€å•ï¼Œä»…ä»…æ˜¯åœ¨å®ä¾‹å¯¹è±¡ä¸Šè®¾ç½®ä¸ `data` å±æ€§åŒåçš„è®¿é—®å™¨å±æ€§ï¼Œç„¶åä½¿ç”¨ `_data` åšæ•°æ®åŠ«æŒï¼Œå¦‚ä¸‹ï¼š\n\n```\nfunction proxy (vm: Component, key: string) {\n  if (!isReserved(key)) {\n    Object.defineProperty(vm, key, {\n      configurable: true,\n      enumerable: true,\n      get: function proxyGetter () {\n        return vm._data[key]\n      },\n      set: function proxySetter (val) {\n        vm._data[key] = val\n      }\n    })\n  }\n}\n```\n\nåšå®Œæ•°æ®çš„ä»£ç†ï¼Œå°±æ­£å¼è¿›å…¥å“åº”ç³»ç»Ÿï¼Œ\n\n```\nobserve(data)\n```\n\næˆ‘ä»¬è¯´è¿‡ï¼Œæ•°æ®å“åº”ç³»ç»Ÿä¸»è¦åŒ…å«ä¸‰éƒ¨åˆ†ï¼š`Observer`ã€`Dep`ã€`Watcher`ï¼Œä»£ç åˆ†åˆ«å­˜æ”¾åœ¨ï¼š`observer/index.js`ã€`observer/dep.js` ä»¥åŠ `observer/watcher.js` æ–‡ä»¶ä¸­ï¼Œè¿™å›æˆ‘ä»¬æ¢ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬å…ˆä¸çœ‹å…¶æºç ï¼Œå¤§å®¶å…ˆè·Ÿç€æˆ‘çš„æ€è·¯æ¥æ€è€ƒï¼Œæœ€åå›å¤´å†å»çœ‹ä»£ç ï¼Œä½ ä¼šæœ‰ä¸€ç§ï¼šâ€å¥¥ï¼Œä¸è¿‡å¦‚æ­¤â€œçš„æ„Ÿè§‰ã€‚\n\nå‡å¦‚ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹ä»£ç ï¼š\n\n```js\nvar data = {\n    a: 1,\n    b: {\n        c: 2\n    }\n}\n\nobserver(data)\n\nnew Watch('a', () => {\n    alert(9)\n})\nnew Watch('a', () => {\n    alert(90)\n})\nnew Watch('b.c', () => {\n    alert(80)\n})\n```\n\nè¿™æ®µä»£ç ç›®çš„æ˜¯ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªæ•°æ®å¯¹è±¡ `data`ï¼Œç„¶åé€šè¿‡ observer å¯¹å…¶è¿›è¡Œè§‚æµ‹ï¼Œä¹‹åå®šä¹‰äº†ä¸‰ä¸ªè§‚å¯Ÿè€…ï¼Œå½“æ•°æ®æœ‰å˜åŒ–æ—¶ï¼Œæ‰§è¡Œç›¸åº”çš„æ–¹æ³•ï¼Œè¿™ä¸ªåŠŸèƒ½ä½¿ç”¨Vueçš„å®ç°åŸæ¥è¦å¦‚ä½•å»å®ç°ï¼Ÿå…¶å®å°±æ˜¯åœ¨é—® `observer` æ€ä¹ˆå†™ï¼Ÿ`Watch` æ„é€ å‡½æ•°åˆæ€ä¹ˆå†™ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬é€ä¸€å®ç°ã€‚\n\né¦–å…ˆï¼Œobserver çš„ä½œç”¨æ˜¯ï¼šå°†æ•°æ®å¯¹è±¡dataçš„å±æ€§è½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§ï¼š\n\n```\nclass Observer {\n    constructor (data) {\n        this.walk(data)\n    }\n    walk (data) {\n        // éå† data å¯¹è±¡å±æ€§ï¼Œè°ƒç”¨ defineReactive æ–¹æ³•\n        let keys = Object.keys(data)\n        for(let i = 0; i < keys.length; i++){\n            defineReactive(data, keys[i], data[keys[i]])\n        }\n    }\n}\n\n// defineReactiveæ–¹æ³•ä»…ä»…å°†dataçš„å±æ€§è½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§\nfunction defineReactive (data, key, val) {\n\t// é€’å½’è§‚æµ‹å­å±æ€§\n    observer(val)\n\n    Object.defineProperty(data, key, {\n        enumerable: true,\n        configurable: true,\n        get: function () {\n            return val\n        },\n        set: function (newVal) {\n            if(val === newVal){\n                return\n            }\n            // å¯¹æ–°å€¼è¿›è¡Œè§‚æµ‹\n            observer(newVal)\n        }\n    })\n}\n\n// observer æ–¹æ³•é¦–å…ˆåˆ¤æ–­dataæ˜¯ä¸æ˜¯çº¯JavaScriptå¯¹è±¡ï¼Œå¦‚æœæ˜¯ï¼Œè°ƒç”¨ Observer ç±»è¿›è¡Œè§‚æµ‹\nfunction observer (data) {\n    if(Object.prototype.toString.call(data) !== '[object Object]') {\n        return\n    }\n    new Observer(data)\n}\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº† observer æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ£€æµ‹äº†æ•°æ®dataæ˜¯ä¸æ˜¯çº¯JavaScriptå¯¹è±¡ï¼Œå¦‚æœæ˜¯å°±è°ƒç”¨ `Observer` ç±»ï¼Œå¹¶å°† `data` ä½œä¸ºå‚æ•°é€ä¼ ã€‚åœ¨ `Observer` ç±»ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `walk` æ–¹æ³•å¯¹æ•°æ®dataçš„å±æ€§å¾ªç¯è°ƒç”¨ `defineReactive` æ–¹æ³•ï¼Œ`defineReactive` æ–¹æ³•å¾ˆç®€å•ï¼Œä»…ä»…æ˜¯å°†æ•°æ®dataçš„å±æ€§è½¬ä¸ºè®¿é—®å™¨å±æ€§ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œé€’å½’è§‚æµ‹ï¼Œå¦åˆ™åªèƒ½è§‚æµ‹æ•°æ®dataçš„ç›´å±å­å±æ€§ã€‚è¿™æ ·æˆ‘ä»¬çš„ç¬¬ä¸€æ­¥å·¥ä½œå°±å®Œæˆäº†ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹æˆ–è€…è·å–dataå±æ€§å€¼çš„æ—¶å€™ï¼Œé€šè¿‡ `get` å’Œ `set` å³èƒ½è·å–åˆ°é€šçŸ¥ã€‚\n\næˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ï¼Œæ¥çœ‹ä¸€ä¸‹ `Watch`ï¼š\n\n```\nnew Watch('a', () => {\n    alert(9)\n})\n```\n\nç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œ`Watch` è¦æ€ä¹ˆå’Œ `observer` å…³è”ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿæˆ‘ä»¬çœ‹çœ‹ `Watch` å®ƒçŸ¥é“äº›ä»€ä¹ˆï¼Œé€šè¿‡ä¸Šé¢è°ƒç”¨ `Watch` çš„æ–¹å¼ï¼Œä¼ é€’ç»™ `Watch` ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ 'a' æˆ‘ä»¬å¯ä»¥ç§°å…¶ä¸ºè¡¨è¾¾å¼ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å›è°ƒå‡½æ•°ã€‚æ‰€ä»¥æˆ‘ä»¬ç›®å‰åªèƒ½å†™å‡ºè¿™æ ·çš„ä»£ç ï¼š\n\n```\nclass Watch {\n    constructor (exp, fn) {\n        this.exp = exp\n        this.fn = fn\n    }\n}\n```\n\né‚£ä¹ˆè¦æ€ä¹ˆå…³è”å‘¢ï¼Œå¤§å®¶çœ‹ä¸‹é¢çš„ä»£ç ä¼šå‘ç”Ÿä»€ä¹ˆï¼š\n\n```\nclass Watch {\n    constructor (exp, fn) {\n        this.exp = exp\n        this.fn = fn\n        data[exp]\n    }\n}\n```\n\nå¤šäº†ä¸€å¥ `data[exp]`ï¼Œè¿™å¥è¯æ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯åœ¨è·å– `data` ä¸‹æŸä¸ªå±æ€§çš„å€¼ï¼Œæ¯”å¦‚ exp ä¸º 'a' çš„è¯ï¼Œé‚£ä¹ˆ `data[exp]` å°±ç›¸å½“äºåœ¨è·å– `data.a` çš„å€¼ï¼Œé‚£è¿™ä¼šæ”¾ç”Ÿä»€ä¹ˆï¼Ÿå¤§å®¶ä¸è¦å¿˜äº†ï¼Œæ­¤æ—¶æ•°æ® `data` ä¸‹çš„å±æ€§å·²ç»æ˜¯è®¿é—®å™¨å±æ€§äº†ï¼Œæ‰€ä»¥è¿™ä¹ˆåšçš„ç»“æœä¼šç›´æ¥è§¦å‘å¯¹åº”å±æ€§çš„ `get` å‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å°±æˆåŠŸçš„å’Œ `observer` äº§ç”Ÿäº†å…³è”ï¼Œä½†è¿™æ ·è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜æ˜¯æ²¡æœ‰è¾¾åˆ°ç›®çš„ï¼Œä¸è¿‡æˆ‘ä»¬å·²ç»æ— é™æ¥è¿‘äº†ï¼Œæˆ‘ä»¬ç»§ç»­æ€è€ƒçœ‹ä¸€ä¸‹å¯ä¸å¯ä»¥è¿™æ ·ï¼š\n\n> æ—¢ç„¶åœ¨ `Watch` ä¸­å¯¹è¡¨è¾¾å¼æ±‚å€¼ï¼Œèƒ½å¤Ÿè§¦å‘ `observer` çš„ `get`ï¼Œé‚£ä¹ˆå¯ä¸å¯ä»¥åœ¨ `get` ä¸­æ”¶é›† `Watch` ä¸­å‡½æ•°å‘¢ï¼Ÿ\n\nç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ `Dep` å‡ºåœºäº†ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¾èµ–æ”¶é›†å™¨ã€‚æˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼š`data` ä¸‹çš„æ¯ä¸€ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ `Dep` å¯¹è±¡ï¼Œåœ¨ `get` ä¸­æ”¶é›†ä»…é’ˆå¯¹è¯¥å±æ€§çš„ä¾èµ–ï¼Œç„¶ååœ¨ `set` æ–¹æ³•ä¸­è§¦å‘æ‰€æœ‰æ”¶é›†çš„ä¾èµ–ï¼Œè¿™æ ·å°±æå®šäº†ï¼Œçœ‹å¦‚ä¸‹ä»£ç ï¼š\n\n```\nclass Dep {\n    constructor () {\n        this.subs = []\n    }\n    addSub () {\n        this.subs.push(Dep.target)\n    }\n    notify () {\n        for(let i = 0; i < this.subs.length; i++){\n            this.subs[i].fn()\n        }\n    }\n}\nDep.target = null\nfunction pushTarget(watch){\n    Dep.target = watch\n}\n\nclass Watch {\n    constructor (exp, fn) {\n        this.exp = exp\n        this.fn = fn\n        pushTarget(this)\n        data[exp]\n    }\n}\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨ `Watch` ä¸­å¢åŠ äº† `pushTarget(this)`ï¼Œå¯ä»¥å‘ç°ï¼Œè¿™å¥ä»£ç çš„ä½œç”¨æ˜¯å°† `Dep.target` çš„å€¼è®¾ç½®ä¸ºè¯¥Watchå¯¹è±¡ã€‚åœ¨ `pushTarget` ä¹‹åæˆ‘ä»¬æ‰å¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œæ¥ç€ï¼Œæˆ‘ä»¬ä¿®æ”¹ `defineReactive` ä»£ç å¦‚ä¸‹\n\n```\nfunction defineReactive (data, key, val) {\n    observer(val)\n    let dep = new Dep()\t\t// æ–°å¢\n    Object.defineProperty(data, key, {\n        enumerable: true,\n        configurable: true,\n        get: function () {\n            dep.addSub()\t// æ–°å¢\n            return val\n        },\n        set: function (newVal) {\n            if(val === newVal){\n                return\n            }\n            observer(newVal)\n            dep.notify()\t// æ–°å¢\n        }\n    })\n}\n```\n\nå¦‚æ ‡æ³¨ï¼Œæ–°å¢äº†ä¸‰å¥ä»£ç ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œ`Watch` ä¸­å¯¹è¡¨è¾¾å¼æ±‚å€¼ä¼šè§¦å‘ `get` æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨ `get` æ–¹æ³•ä¸­è°ƒç”¨äº† `dep.addSub`ï¼Œä¹Ÿå°±æ‰§è¡Œäº†è¿™å¥ä»£ç ï¼š`this.subs.push(Dep.target)`ï¼Œç”±äºåœ¨è¿™å¥ä»£ç æ‰§è¡Œä¹‹å‰ï¼Œ`Dep.target` çš„å€¼å·²ç»è¢«è®¾ç½®ä¸ºä¸€ä¸ª `Watch` å¯¹è±¡äº†ï¼Œæ‰€ä»¥æœ€ç»ˆç»“æœå°±æ˜¯æ”¶é›†äº†ä¸€ä¸ª `Watch` å¯¹è±¡ï¼Œç„¶ååœ¨ `set` æ–¹æ³•ä¸­æˆ‘ä»¬è°ƒç”¨äº† `dep.notify`ï¼Œæ‰€ä»¥å½“dataå±æ€§å€¼å˜åŒ–çš„æ—¶å€™ï¼Œå°±ä¼šé€šè¿‡ `dep.notify` å¾ªç¯è°ƒç”¨æ‰€æœ‰æ”¶é›†çš„Watchå¯¹è±¡ä¸­çš„å›è°ƒå‡½æ•°ï¼š\n\n```\nnotify () {\n    for(let i = 0; i < this.subs.length; i++){\n        this.subs[i].fn()\n    }\n}\n```\n\nè¿™æ · `observer`ã€`Dep`ã€`Watch` ä¸‰è€…å°±è”ç³»æˆä¸ºä¸€ä¸ªæœ‰æœºçš„æ•´ä½“ï¼Œå®ç°äº†æˆ‘ä»¬æœ€åˆçš„ç›®æ ‡ï¼Œå®Œæ•´çš„ä»£ç å¯ä»¥æˆ³è¿™é‡Œï¼š[observer-dep-watch](https://github.com/HcySunYang/observer-dep-watch)ã€‚è¿™é‡Œè¿˜ç»™å¤§å®¶æŒ–äº†ä¸ªå‘ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å¤„ç†å¯¹æ•°ç»„çš„è§‚æµ‹ï¼Œç”±äºæ¯”è¾ƒå¤æ‚å¹¶ä¸”è¿™åˆä¸æ˜¯æˆ‘ä»¬è®¨è®ºçš„é‡ç‚¹ï¼Œå¦‚æœå¤§å®¶æƒ³äº†è§£å¯ä»¥æˆ³æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š[JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–](http://hcysun.me/2016/04/28/JavaScript%E5%AE%9E%E7%8E%B0MVVM%E4%B9%8B%E6%88%91%E5%B0%B1%E6%98%AF%E6%83%B3%E7%9B%91%E6%B5%8B%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%98%E5%8C%96/)ï¼Œå¦å¤–ï¼Œåœ¨ Watch ä¸­å¯¹è¡¨è¾¾å¼æ±‚å€¼çš„æ—¶å€™ä¹Ÿåªåšäº†ç›´æ¥å­å±æ€§çš„æ±‚å€¼ï¼Œæ‰€ä»¥å¦‚æœ exp çš„å€¼ä¸º 'a.b' çš„æ—¶å€™ï¼Œå°±ä¸å¯ä»¥ç”¨äº†ï¼ŒVueçš„åšæ³•æ˜¯ä½¿ç”¨ `.` åˆ†å‰²è¡¨è¾¾å¼å­—ç¬¦ä¸²ä¸ºæ•°ç»„ï¼Œç„¶åéå†ä¸€ä¸‹å¯¹å…¶è¿›è¡Œæ±‚å€¼ï¼Œå¤§å®¶å¯ä»¥æŸ¥çœ‹å…¶æºç ã€‚å¦‚ä¸‹ï¼š\n\n```\n/**\n * Parse simple path.\n */\nconst bailRE = /[^\\w.$]/\nexport function parsePath (path: string): any {\n  if (bailRE.test(path)) {\n    return\n  } else {\n    const segments = path.split('.')\n    return function (obj) {\n      for (let i = 0; i < segments.length; i++) {\n        if (!obj) return\n        obj = obj[segments[i]]\n      }\n      return obj\n    }\n  }\n}\n```\n\nVue çš„æ±‚å€¼ä»£ç æ˜¯åœ¨ `src/core/util/lang.js` æ–‡ä»¶ä¸­ `parsePath` å‡½æ•°ä¸­å®ç°çš„ã€‚æ€»ç»“ä¸€ä¸‹Vueçš„ä¾èµ–æ”¶é›†è¿‡ç¨‹åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n\n![Vueçš„ä¾èµ–æ”¶é›†è¿‡ç¨‹](http://7xlolm.com1.z0.glb.clouddn.com/vueimgdep.png)\n\nå®é™…ä¸Šï¼ŒVueå¹¶æ²¡æœ‰ç›´æ¥åœ¨ `get` ä¸­è°ƒç”¨ `addSub`ï¼Œè€Œæ˜¯è°ƒç”¨çš„ `dep.depend`ï¼Œç›®çš„æ˜¯å°†å½“å‰çš„ dep å¯¹è±¡æ”¶é›†åˆ° watch å¯¹è±¡ä¸­ï¼Œå¦‚æœè¦å®Œæ•´çš„æµç¨‹ï¼Œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼šï¼ˆå¤§å®¶æ³¨æ„æ•°æ®çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æ‹¥æœ‰è‡ªå·±çš„ `dep` å¯¹è±¡å’Œ `get` æ–¹æ³•ã€‚ï¼‰\n\n![Vueå®Œæ•´çš„æ”¶é›†ä¾èµ–çš„æµç¨‹](http://7xlolm.com1.z0.glb.clouddn.com/all.png)\n\nè¿™æ · Vue å°±å»ºç«‹äº†ä¸€å¥—æ•°æ®å“åº”ç³»ç»Ÿï¼Œä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼ŒæŒ‰ç…§æˆ‘ä»¬çš„ä¾‹å­é‚£æ ·å†™ï¼Œåˆå§‹åŒ–å·¥ä½œåªåŒ…å«ä¸¤ä¸ªä¸»è¦å†…å®¹å³ï¼š`initData` å’Œ `initRender`ã€‚ç°åœ¨ `initData` æˆ‘ä»¬åˆ†æå®Œäº†ï¼Œæ¥ä¸‹æ¥çœ‹ä¸€çœ‹ `initRender`\n\n## <span style=\"color: #ff6600;\">å…­ã€é€šè¿‡`initRender`çœ‹Vueçš„ render(æ¸²æŸ“) ä¸ re-render(é‡æ–°æ¸²æŸ“)</span>\n\nåœ¨ `initRender` æ–¹æ³•ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä¾‹å­ä¸­ä¼ é€’äº† `el` é€‰é¡¹ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä»£ç ä¼šæ‰§è¡Œï¼š\n\n```\n  if (vm.$options.el) {\n    vm.$mount(vm.$options.el)\n  }\n```\n\nè¿™é‡Œï¼Œè°ƒç”¨äº† `$mount` æ–¹æ³•ï¼Œåœ¨è¿˜åŸVueæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ•´ç†è¿‡æ‰€æœ‰çš„æ–¹æ³•ï¼Œå…¶ä¸­ `$mount` æ–¹æ³•åœ¨ä¸¤ä¸ªåœ°æ–¹å‡ºç°è¿‡ï¼š\n\n1ã€åœ¨ `web-runtime.js` æ–‡ä»¶ä¸­ï¼š\n\n```\nVue.prototype.$mount = function (\n  el?: string | Element,\n  hydrating?: boolean\n): Component {\n  el = el && inBrowser ? query(el) : undefined\n  return this._mount(el, hydrating)\n}\n```\n\nå®ƒçš„ä½œç”¨æ˜¯é€šè¿‡ `el` è·å–ç›¸åº”çš„DOMå…ƒç´ ï¼Œç„¶åè°ƒç”¨ `lifecycle.js` æ–‡ä»¶ä¸­çš„ `_mount` æ–¹æ³•ã€‚\n\n2ã€åœ¨ `web-runtime-with-compiler.js` æ–‡ä»¶ä¸­ï¼š\n\n```\n// ç¼“å­˜äº†æ¥è‡ª web-runtime.js çš„ $mount æ–¹æ³•\nconst mount = Vue.prototype.$mount\n// é‡å†™ $mount æ–¹æ³•\nVue.prototype.$mount = function (\n  el?: string | Element,\n  hydrating?: boolean\n): Component {\n  // æ ¹æ® el è·å–ç›¸åº”çš„DOMå…ƒç´ \n  el = el && query(el)\n  // ä¸å…è®¸ä½ å°† el æŒ‚è½½åˆ° html æ ‡ç­¾æˆ–è€… body æ ‡ç­¾\n  if (el === document.body || el === document.documentElement) {\n    process.env.NODE_ENV !== 'production' && warn(\n      `Do not mount Vue to <html> or <body> - mount to normal elements instead.`\n    )\n    return this\n  }\n\n  const options = this.$options\n  // å¦‚æœæˆ‘ä»¬æ²¡æœ‰å†™ render é€‰é¡¹ï¼Œé‚£ä¹ˆå°±å°è¯•å°† template æˆ–è€… el è½¬åŒ–ä¸º render å‡½æ•°\n  if (!options.render) {\n    let template = options.template\n    if (template) {\n      if (typeof template === 'string') {\n        if (template.charAt(0) === '#') {\n          template = idToTemplate(template)\n          /* istanbul ignore if */\n          if (process.env.NODE_ENV !== 'production' && !template) {\n            warn(\n              `Template element not found or is empty: ${options.template}`,\n              this\n            )\n          }\n        }\n      } else if (template.nodeType) {\n        template = template.innerHTML\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('invalid template option:' + template, this)\n        }\n        return this\n      }\n    } else if (el) {\n      template = getOuterHTML(el)\n    }\n    if (template) {\n      const { render, staticRenderFns } = compileToFunctions(template, {\n        warn,\n        shouldDecodeNewlines,\n        delimiters: options.delimiters\n      }, this)\n      options.render = render\n      options.staticRenderFns = staticRenderFns\n    }\n  }\n  // è°ƒç”¨å·²ç»ç¼“å­˜ä¸‹æ¥çš„ web-runtime.js æ–‡ä»¶ä¸­çš„ $mount æ–¹æ³•\n  return mount.call(this, el, hydrating)\n}\n```\n\nåˆ†æä¸€ä¸‹å¯çŸ¥ `web-runtime-with-compiler.js` çš„é€»è¾‘å¦‚ä¸‹ï¼š\n\n1ã€ç¼“å­˜æ¥è‡ª `web-runtime.js` æ–‡ä»¶çš„ `$mount` æ–¹æ³•\n\n2ã€åˆ¤æ–­æœ‰æ²¡æœ‰ä¼ é€’ `render` é€‰é¡¹ï¼Œå¦‚æœæœ‰ç›´æ¥è°ƒç”¨æ¥è‡ª `web-runtime.js` æ–‡ä»¶çš„ $mount æ–¹æ³•\n\n3ã€å¦‚æœæ²¡æœ‰ä¼ é€’ `render` é€‰é¡¹ï¼Œé‚£ä¹ˆæŸ¥çœ‹æœ‰æ²¡æœ‰ `template` é€‰é¡¹ï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ `compileToFunctions` å‡½æ•°æ ¹æ®å…¶å†…å®¹ç¼–è¯‘æˆ `render` å‡½æ•°\n\n4ã€å¦‚æœæ²¡æœ‰ `template` é€‰é¡¹ï¼Œé‚£ä¹ˆæŸ¥çœ‹æœ‰æ²¡æœ‰ `el` é€‰é¡¹ï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ `compileToFunctions` å‡½æ•°å°†å…¶å†…å®¹(template = getOuterHTML(el))ç¼–è¯‘æˆ `render` å‡½æ•°\n\n5ã€å°†ç¼–è¯‘æˆçš„ `render` å‡½æ•°æŒ‚è½½åˆ° `this.$options` å±æ€§ä¸‹ï¼Œå¹¶è°ƒç”¨ç¼“å­˜ä¸‹æ¥çš„ `web-runtime.js` æ–‡ä»¶ä¸­çš„ $mount æ–¹æ³•\n\nç®€å•çš„ç”¨ä¸€å¼ å›¾è¡¨ç¤º `mount` æ–¹æ³•çš„è°ƒç”¨å…³ç³»ï¼Œä»ä¸Šè‡³ä¸‹è°ƒç”¨ï¼š\n\n![mountè°ƒç”¨å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/vueimgmount.png)\n\nä¸è¿‡ä¸ç®¡æ€æ ·ï¼Œæˆ‘ä»¬å‘ç°è¿™äº›æ­¥éª¤çš„æœ€ç»ˆç›®çš„æ˜¯ç”Ÿæˆ `render` å‡½æ•°ï¼Œç„¶åå†è°ƒç”¨ `lifecycle.js` æ–‡ä»¶ä¸­çš„ `_mount` æ–¹æ³•ï¼Œæˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªæ–¹æ³•åšäº†ä»€ä¹ˆäº‹æƒ…ï¼ŒæŸ¥çœ‹ `_mount` æ–¹æ³•çš„ä»£ç ï¼Œè¿™æ˜¯ç®€åŒ–è¿‡å¾—ï¼š\n\n```\n  Vue.prototype._mount = function (\n    el?: Element | void,\n    hydrating?: boolean\n  ): Component {\n    const vm: Component = this\n\n    // åœ¨Vueå®ä¾‹å¯¹è±¡ä¸Šæ·»åŠ  $el å±æ€§ï¼ŒæŒ‡å‘æŒ‚è½½ç‚¹å…ƒç´ \n    vm.$el = el\n\n    // è§¦å‘ beforeMount ç”Ÿå‘½å‘¨æœŸé’©å­\n    callHook(vm, 'beforeMount')\n\n    vm._watcher = new Watcher(vm, () => {\n      vm._update(vm._render(), hydrating)\n    }, noop)\n\n    // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡mountåˆ™è§¦å‘ mounted ç”Ÿå‘½å‘¨æœŸé’©å­\n    if (vm.$vnode == null) {\n      vm._isMounted = true\n      callHook(vm, 'mounted')\n    }\n    return vm\n  }\n```\n\nä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œè¯¥æ³¨é‡Šçš„éƒ½æ³¨é‡Šäº†ï¼Œå”¯ä¸€éœ€è¦çœ‹çš„å°±æ˜¯è¿™æ®µä»£ç ï¼š\n\n```\nvm._watcher = new Watcher(vm, () => {\n  vm._update(vm._render(), hydrating)\n}, noop)\n```\n\nçœ‹ä¸Šå»å¾ˆçœ¼ç†Ÿæœ‰æ²¡æœ‰ï¼Ÿæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨Vueéƒ½æ˜¯è¿™æ ·ä½¿ç”¨ watchçš„ï¼š\n\n```\nthis.$watch('a', (newVal, oldVal) => {\n\t\n})\n// æˆ–è€…\nthis.$watch(function(){\n\treturn this.a + this.b\n}, (newVal, oldVal) => {\n\t\n})\n```\n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ è¡¨è¾¾å¼æˆ–è€…å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å¯é€‰çš„é€‰é¡¹ã€‚åŸç†æ˜¯ `Watch` å†…éƒ¨å¯¹è¡¨è¾¾å¼æ±‚å€¼æˆ–è€…å¯¹å‡½æ•°æ±‚å€¼ä»è€Œè§¦å‘æ•°æ®çš„ `get` æ–¹æ³•æ”¶é›†ä¾èµ–ã€‚å¯æ˜¯ `_mount` æ–¹æ³•ä¸­ä½¿ç”¨ `Watcher` çš„æ—¶å€™ç¬¬ä¸€ä¸ªå‚æ•° `vm` æ˜¯ä»€ä¹ˆé¬¼ã€‚æˆ‘ä»¬ä¸å¦¨å»çœ‹çœ‹æºç ä¸­ `$watch` å‡½æ•°æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæ ¹æ®ä¹‹å‰è¿˜åŸVueæ„é€ å‡½æ•°ä¸­æ‰€æ•´ç†çš„å†…å®¹å¯çŸ¥ï¼š`$warch` æ–¹æ³•æ˜¯åœ¨ `src/core/instance/state.js` æ–‡ä»¶ä¸­çš„ `stateMixin` æ–¹æ³•ä¸­å®šä¹‰çš„ï¼Œæºç å¦‚ä¸‹ï¼š\n\n```\n  Vue.prototype.$watch = function (\n    expOrFn: string | Function,\n    cb: Function,\n    options?: Object\n  ): Function {\n    const vm: Component = this\n    options = options || {}\n    options.user = true\n    const watcher = new Watcher(vm, expOrFn, cb, options)\n    if (options.immediate) {\n      cb.call(vm, watcher.value)\n    }\n    return function unwatchFn () {\n      watcher.teardown()\n    }\n  }\n```\n\næˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ`$warch` å…¶å®æ˜¯å¯¹ `Watcher` çš„ä¸€ä¸ªå°è£…ï¼Œå†…éƒ¨çš„ `Watcher` çš„ç¬¬ä¸€ä¸ªå‚æ•°å®é™…ä¸Šä¹Ÿæ˜¯ `vm` å³ï¼šVueå®ä¾‹å¯¹è±¡ï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬å¯ä»¥åœ¨ `Watcher` çš„æºç ä¸­å¾—åˆ°éªŒè¯ï¼Œä»£å¼€ `observer/watcher.js` æ–‡ä»¶æŸ¥çœ‹ï¼š\n\n```js\nexport default class Watcher {\n\n  constructor (\n    vm: Component,\n    expOrFn: string | Function,\n    cb: Function,\n    options?: Object = {}\n  ) {\n    \n  }\n}\n```\n\nå¯ä»¥å‘ç°çœŸæ­£çš„ `Watcher` ç¬¬ä¸€ä¸ªå‚æ•°å®é™…ä¸Šå°±æ˜¯ `vm`ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¡¨è¾¾å¼æˆ–è€…å‡½æ•°ï¼Œç„¶åä»¥æ­¤ç±»æ¨ï¼Œæ‰€ä»¥ç°åœ¨å†æ¥çœ‹ `_mount` ä¸­çš„è¿™æ®µä»£ç ï¼š\n\n```\nvm._watcher = new Watcher(vm, () => {\n  vm._update(vm._render(), hydrating)\n}, noop)\n```\n\nå¿½ç•¥ç¬¬ä¸€ä¸ªå‚æ•° `vm`ï¼Œä¹Ÿå°±è¯´ï¼Œ`Watcher` å†…éƒ¨åº”è¯¥å¯¹ç¬¬äºŒä¸ªå‚æ•°æ±‚å€¼ï¼Œä¹Ÿå°±æ˜¯è¿è¡Œè¿™ä¸ªå‡½æ•°ï¼š\n\n```\n() => {\n  vm._update(vm._render(), hydrating)\n}\n```\n\næ‰€ä»¥ `vm._render()` å‡½æ•°è¢«ç¬¬ä¸€ä¸ªæ‰§è¡Œï¼Œè¯¥å‡½æ•°åœ¨ `src/core/instance/render.js` ä¸­ï¼Œè¯¥æ–¹æ³•ä¸­çš„ä»£ç å¾ˆå¤šï¼Œä¸‹é¢æ˜¯ç®€åŒ–è¿‡çš„ï¼š\n\n```\n  Vue.prototype._render = function (): VNode {\n    const vm: Component = this\n    // è§£æ„å‡º $options ä¸­çš„ render å‡½æ•°\n    const {\n      render,\n      staticRenderFns,\n      _parentVnode\n    } = vm.$options\n    ...\n\n    let vnode\n    try {\n      // è¿è¡Œ render å‡½æ•°\n      vnode = render.call(vm._renderProxy, vm.$createElement)\n    } catch (e) {\n      ...\n    }\n    \n    // set parent\n    vnode.parent = _parentVnode\n    return vnode\n  }\n```\n\n`_render` æ–¹æ³•é¦–å…ˆä» `vm.$options` ä¸­è§£æ„å‡º `render` å‡½æ•°ï¼Œå¤§å®¶åº”è¯¥è®°å¾—ï¼š`vm.$options.render` æ–¹æ³•æ˜¯åœ¨ `web-runtime-with-compiler.js` æ–‡ä»¶ä¸­é€šè¿‡ `compileToFunctions` æ–¹æ³•å°† `template` æˆ– `el` ç¼–è¯‘è€Œæ¥çš„ã€‚è§£æ„å‡º `render` å‡½æ•°åï¼Œæ¥ä¸‹æ¥ä¾¿æ‰§è¡Œäº†è¯¥æ–¹æ³•ï¼š\n\n```\nvnode = render.call(vm._renderProxy, vm.$createElement)\n```\n\nå…¶ä¸­ä½¿ç”¨ `call` æŒ‡å®šäº† `render` å‡½æ•°çš„ä½œç”¨åŸŸç¯å¢ƒä¸º `vm._renderProxy`ï¼Œè¿™ä¸ªå±æ€§åœ¨æˆ‘ä»¬æ•´ç†å®ä¾‹å¯¹è±¡çš„æ—¶å€™çŸ¥é“ï¼Œä»–æ˜¯åœ¨ `Vue.prototype._init` æ–¹æ³•ä¸­è¢«æ·»åŠ çš„ï¼Œå³ï¼š`vm._renderProxy = vm`ï¼Œå…¶å®å°±æ˜¯Vueå®ä¾‹å¯¹è±¡æœ¬èº«ï¼Œç„¶åä¼ é€’äº†ä¸€ä¸ªå‚æ•°ï¼š`vm.$createElement`ã€‚é‚£ä¹ˆ `render` å‡½æ•°åˆ°åº•æ˜¯å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿè®©æˆ‘ä»¬æ ¹æ®ä¸Šé¢é‚£å¥ä»£ç çŒœä¸€çŒœï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ `render` å‡½æ•°æ˜¯ä» `template` æˆ– `el` ç¼–è¯‘è€Œæ¥çš„ï¼Œå¦‚æœæ²¡é”™çš„è¯åº”è¯¥æ˜¯è¿”å›ä¸€ä¸ªè™šæ‹ŸDOMå¯¹è±¡ã€‚æˆ‘ä»¬ä¸å¦¨ä½¿ç”¨ `console.log` æ‰“å°ä¸€ä¸‹ `render` å‡½æ•°ï¼Œå½“æˆ‘ä»¬çš„æ¨¡æ¿è¿™æ ·ç¼–å†™æ—¶ï¼š\n\n```\n<ul id=\"app\">\n  <li>{{a}}</li>\n</ul>\n```\n\næ‰“å°çš„ `render` å‡½æ•°å¦‚ä¸‹ï¼š\n\n![renderå‡½æ•°1](http://7xlolm.com1.z0.glb.clouddn.com/vueimgr2.png)\n\næˆ‘ä»¬ä¿®æ”¹æ¨¡æ¿ä¸ºï¼š\n\n```\n<ul id=\"app\">\n  <li v-for=\"i in b\">{{a}}</li>\n</ul>\n```\n\næ‰“å°å‡ºæ¥çš„ `render` å‡½æ•°å¦‚ä¸‹ï¼š\n\n![renderå‡½æ•°2](http://7xlolm.com1.z0.glb.clouddn.com/vueimgr3.png)\n\nå…¶å®äº†è§£Vue2.xç‰ˆæœ¬çš„åŒå­¦éƒ½çŸ¥é“ï¼ŒVueæä¾›äº† `render` é€‰é¡¹ï¼Œä½œä¸º `template` çš„ä»£æ›¿æ–¹æ¡ˆï¼ŒåŒæ—¶ä¸ºJavaScriptæä¾›äº†å®Œå…¨ç¼–ç¨‹çš„èƒ½åŠ›ï¼Œä¸‹é¢ä¸¤ç§ç¼–å†™æ¨¡æ¿çš„æ–¹å¼å®é™…æ˜¯ç­‰ä»·çš„ï¼š\n\n```js\n// æ–¹æ¡ˆä¸€ï¼š\nnew Vue({\n\tel: '#app',\n\tdata: {\n\t\ta: 1\n\t},\n\ttemplate: '<ul><li>{{a}}</li><li>{{a}}</li></ul>'\n})\n\n// æ–¹æ¡ˆäºŒï¼š\nnew Vue({\n\tel: '#app',\n\trender: function (createElement) {\n\t\tcreateElement('ul', [\n\t\t\tcreateElement('li', this.a),\n\t\t\tcreateElement('li', this.a)\n\t\t])\n\t}\n})\n```\n\nç°åœ¨æˆ‘ä»¬å†æ¥çœ‹æˆ‘ä»¬æ‰“å°çš„ `render` å‡½æ•°ï¼š\n\n```\nfunction anonymous() {\n\twith(this){\n\t\treturn _c('ul', { \n\t\t\tattrs: {\"id\": \"app\"}\n\t\t},[\n\t\t\t_c('li', [_v(_s(a))])\n\t\t])\n\t}\n}\n```\n\næ˜¯ä¸æ˜¯ä¸æˆ‘ä»¬è‡ªå·±å†™ `render` å‡½æ•°å¾ˆåƒï¼Ÿå› ä¸º render å‡½æ•°çš„ä½œç”¨åŸŸè¢«ç»‘å®šåˆ°äº†Vueå®ä¾‹ï¼Œå³ï¼š`render.call(vm._renderProxy, vm.$createElement)`ï¼Œæ‰€ä»¥ä¸Šé¢ä»£ç ä¸­ `_c`ã€`_v`ã€`_s` ä»¥åŠå˜é‡ `a`ç›¸å½“äºVueå®ä¾‹ä¸‹çš„æ–¹æ³•å’Œå˜é‡ã€‚å¤§å®¶è¿˜è®°å¾—è¯¸å¦‚ `_c`ã€`_v`ã€`_s` è¿™æ ·çš„æ–¹æ³•åœ¨å“ªé‡Œå®šä¹‰çš„å—ï¼Ÿæˆ‘ä»¬åœ¨æ•´ç†Vueæ„é€ å‡½æ•°çš„æ—¶å€™çŸ¥é“ï¼Œä»–ä»¬åœ¨ `src/core/instance/render.js` æ–‡ä»¶ä¸­çš„ `renderMixin` æ–¹æ³•ä¸­å®šä¹‰ï¼Œé™¤äº†è¿™äº›ä¹‹å¤–è¿˜æœ‰è¯¸å¦‚ï¼š`_l`ã€ `_m`ã€ `_o` ç­‰ç­‰ã€‚å…¶ä¸­ `_l` å°±åœ¨æˆ‘ä»¬ä½¿ç”¨ `v-for` æŒ‡ä»¤çš„æ—¶å€™å‡ºç°äº†ã€‚æ‰€ä»¥ç°åœ¨å¤§å®¶çŸ¥é“ä¸ºä»€ä¹ˆè¿™äº›æ–¹æ³•éƒ½è¢«å®šä¹‰åœ¨ `render.js` æ–‡ä»¶ä¸­äº†å§ï¼Œå› ä¸ºä»–ä»¬å°±æ˜¯ä¸ºäº†æ„é€ å‡º `render` å‡½æ•°è€Œå­˜åœ¨çš„ã€‚\n\nç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº† `render` å‡½æ•°çš„é•¿ç›¸ï¼Œä¹ŸçŸ¥é“äº† `render` å‡½æ•°çš„ä½œç”¨åŸŸæ˜¯Vueå®ä¾‹æœ¬èº«å³ï¼š`this`(æˆ–`vm`)ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬æ‰§è¡Œ `render` å‡½æ•°æ—¶ï¼Œå…¶ä¸­çš„å˜é‡å¦‚ï¼š`a`ï¼Œå°±ç›¸å½“äºï¼š`this.a`ï¼Œæˆ‘ä»¬çŸ¥é“è¿™æ˜¯åœ¨æ±‚å€¼ï¼Œæ‰€ä»¥ `_mount` ä¸­çš„è¿™æ®µä»£ç ï¼š\n\n```\nvm._watcher = new Watcher(vm, () => {\n  vm._update(vm._render(), hydrating)\n}, noop)\n```\n\nå½“ `vm._render` æ‰§è¡Œçš„æ—¶å€™ï¼Œæ‰€ä¾èµ–çš„å˜é‡å°±ä¼šè¢«æ±‚å€¼ï¼Œå¹¶è¢«æ”¶é›†ä¸ºä¾èµ–ã€‚æŒ‰ç…§Vueä¸­ `watcher.js` çš„é€»è¾‘ï¼Œå½“ä¾èµ–çš„å˜é‡æœ‰å˜åŒ–æ—¶ä¸ä»…ä»…å›è°ƒå‡½æ•°è¢«æ‰§è¡Œï¼Œå®é™…ä¸Šè¿˜è¦é‡æ–°æ±‚å€¼ï¼Œå³è¿˜è¦æ‰§è¡Œä¸€éï¼š\n\n```\n() => {\n  vm._update(vm._render(), hydrating)\n}\n```\n\nè¿™å®é™…ä¸Šå°±åšåˆ°äº† `re-render`ï¼Œå› ä¸º `vm._update` å°±æ˜¯æ–‡ç« å¼€å¤´æ‰€è¯´çš„è™šæ‹ŸDOMä¸­çš„æœ€åä¸€æ­¥ï¼š`patch`\n\n`vm_render` æ–¹æ³•æœ€ç»ˆè¿”å›ä¸€ä¸ª `vnode` å¯¹è±¡ï¼Œå³è™šæ‹ŸDOMï¼Œç„¶åä½œä¸º `vm_update` çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’äº†è¿‡å»ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ `vm_update` çš„é€»è¾‘ï¼Œåœ¨ `src/core/instance/lifecycle.js` æ–‡ä»¶ä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š\n\n```js\n    if (!prevVnode) {\n      // initial render\n      vm.$el = vm.__patch__(\n        vm.$el, vnode, hydrating, false /* removeOnly */,\n        vm.$options._parentElm,\n        vm.$options._refElm\n      )\n    } else {\n      // updates\n      vm.$el = vm.__patch__(prevVnode, vnode)\n    }\n```\n\nå¦‚æœè¿˜æ²¡æœ‰ `prevVnode` è¯´æ˜æ˜¯é¦–æ¬¡æ¸²æŸ“ï¼Œç›´æ¥åˆ›å»ºçœŸå®DOMã€‚å¦‚æœå·²ç»æœ‰äº† `prevVnode` è¯´æ˜ä¸æ˜¯é¦–æ¬¡æ¸²æŸ“ï¼Œé‚£ä¹ˆå°±é‡‡ç”¨ `patch` ç®—æ³•è¿›è¡Œå¿…è¦çš„DOMæ“ä½œã€‚è¿™å°±æ˜¯Vueæ›´æ–°DOMçš„é€»è¾‘ã€‚åªä¸è¿‡æˆ‘ä»¬æ²¡æœ‰å°† virtual DOM å†…éƒ¨çš„å®ç°ã€‚\n\nç°åœ¨æˆ‘ä»¬æ¥å¥½å¥½ç†ç†æ€è·¯ï¼Œå½“æˆ‘ä»¬å†™å¦‚ä¸‹ä»£ç æ—¶ï¼š\n\n```\nnew Vue({\n\tel: '#app',\n\tdata: {\n\t\ta: 1,\n\t\tb: [1, 2, 3]\n\t}\n})\n```\n\nVue æ‰€åšçš„äº‹ï¼š\n\n> 1ã€æ„å»ºæ•°æ®å“åº”ç³»ç»Ÿï¼Œä½¿ç”¨ `Observer` å°†æ•°æ®dataè½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§ï¼›å°† `el` ç¼–è¯‘ä¸º `render` å‡½æ•°ï¼Œ`render` å‡½æ•°è¿”å›å€¼ä¸ºè™šæ‹ŸDOM\n\n> 2ã€åœ¨ `_mount` ä¸­å¯¹ `_update` æ±‚å€¼ï¼Œè€Œ `_update` åˆä¼šå¯¹ `render` æ±‚å€¼ï¼Œ`render` å†…éƒ¨åˆä¼šå¯¹ä¾èµ–çš„å˜é‡æ±‚å€¼ï¼Œæ”¶é›†ä¸ºè¢«æ±‚å€¼çš„å˜é‡çš„ä¾èµ–ï¼Œå½“å˜é‡æ”¹å˜æ—¶ï¼Œ`_update` åˆä¼šé‡æ–°æ‰§è¡Œä¸€éï¼Œä»è€Œåšåˆ° `re-render`ã€‚\n\nç”¨ä¸€å¼ è¯¦ç»†ä¸€ç‚¹çš„å›¾è¡¨ç¤ºå°±æ˜¯è¿™æ ·çš„ï¼š\n\n![è¯¦ç»†æµç¨‹](http://7xlolm.com1.z0.glb.clouddn.com/vueimgdetail.png)\n\nåˆ°æ­¤ï¼Œæˆ‘ä»¬ä»å¤§ä½“æµç¨‹ï¼ŒæŒ‘ç€é‡ç‚¹çš„èµ°äº†ä¸€éVueï¼Œä½†æ˜¯è¿˜æœ‰å¾ˆå¤šç»†èŠ‚æˆ‘ä»¬æ²¡æœ‰æåŠï¼Œæ¯”å¦‚ï¼š\n\n1ã€å°†æ¨¡æ¿è½¬ä¸º `render` å‡½æ•°çš„æ—¶å€™ï¼Œå®é™…æ˜¯å…ˆç”Ÿæˆçš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œå†å°†æŠ½è±¡è¯­æ³•æ ‘è½¬æˆçš„ `render` å‡½æ•°ï¼Œè€Œä¸”è¿™ä¸€æ•´å¥—çš„ä»£ç æˆ‘ä»¬ä¹Ÿæ²¡æœ‰æåŠï¼Œå› ä¸ºä»–åœ¨å¤æ‚äº†ï¼Œå…¶å®è¿™éƒ¨åˆ†å†…å®¹å°±æ˜¯åœ¨å®Œæ­£åˆ™ã€‚\n\n2ã€æˆ‘ä»¬ä¹Ÿæ²¡æœ‰è¯¦ç»†çš„è®² Virtual DOM çš„å®ç°åŸç†ï¼Œç½‘ä¸Šå·²ç»æœ‰æ–‡ç« è®²äº†ï¼Œå¤§å®¶å¯ä»¥æœä¸€æœ\n\n3ã€æˆ‘ä»¬çš„ä¾‹å­ä¸­ä»…ä»…ä¼ é€’äº† `el` ï¼Œ`data` é€‰é¡¹ï¼Œå¤§å®¶çŸ¥é“ Vue æ”¯æŒçš„é€‰é¡¹å¾ˆå¤šï¼Œæ¯”å¦‚æˆ‘ä»¬éƒ½æ²¡æœ‰è®²åˆ°ï¼Œä½†éƒ½æ˜¯è§¦ç±»æ—é€šçš„ï¼Œæ¯”å¦‚ä½ ææ¸…æ¥šäº† `data` é€‰é¡¹å†å»çœ‹ `computed` é€‰é¡¹æˆ–è€… `props` é€‰é¡¹å°±ä¼šå¾ˆå®¹æ˜“ï¼Œæ¯”å¦‚ä½ çŸ¥é“äº† `Watcher` çš„å·¥ä½œæœºåˆ¶å†å»çœ‹ `watch` é€‰é¡¹å°±ä¼šå¾ˆå®¹æ˜“ã€‚\n\næœ¬ç¯‡æ–‡ç« ä½œä¸ºVueæºç çš„å¯è’™æ–‡ç« ï¼Œä¹Ÿè®¸è¿˜æœ‰å¾ˆå¤šç¼ºé™·ï¼Œå…¨å½“æŠ›ç –å¼•ç‰äº†ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2017/03/03/Vueæºç å­¦ä¹ .md","raw":"title: Vue2.1.7æºç å­¦ä¹ \ndate: 2017-03-03 11:17:21\ncategories:\n- WebFrontEnd\ntags:\n- æºç \n- Vue\n---\n\nåŸæœ¬æ–‡ç« çš„åå­—å«åšã€Šæºç è§£æã€‹ï¼Œä¸è¿‡åæ¥æƒ³æƒ³ï¼Œè¿˜æ˜¯ç”¨â€œæºç å­¦ä¹ â€æ¥çš„åˆé€‚ä¸€ç‚¹ï¼Œåœ¨æ²¡æœ‰å½»åº•æŒæ¡æºç ä¸­çš„æ¯ä¸€ä¸ªå­—æ¯ä¹‹å‰ï¼Œâ€œè§£æâ€å°±æœ‰ç‚¹æ ‡é¢˜å…šäº†ã€‚å»ºè®®åœ¨çœ‹è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œæœ€å¥½æ‰“å¼€2.1.7çš„æºç å¯¹ç…§ç€çœ‹ï¼Œè¿™æ ·å¯èƒ½æ›´å®¹æ˜“ç†è§£ã€‚å¦å¤–æœ¬äººæ°´å¹³æœ‰é™ï¼Œæ–‡ä¸­æœ‰é”™è¯¯æˆ–ä¸å¦¥çš„åœ°æ–¹æœ›å¤§å®¶å¤šå¤šæŒ‡æ­£å…±åŒæˆé•¿ã€‚\n\nè¡¥å……ï¼šVue 2.2 åˆšåˆšå‘å¸ƒï¼Œä½œä¸ºä¸€ä¸ªç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦ä»Vueä»£ç çš„ç»„ç»‡ï¼ŒVueæ„é€ å‡½æ•°çš„è¿˜åŸï¼ŒåŸå‹çš„è®¾è®¡ï¼Œä»¥åŠå‚æ•°é€‰é¡¹çš„å¤„ç†å’Œå·²ç»è¢«å†™çƒ‚äº†çš„æ•°æ®ç»‘å®šä¸å¦‚ä½•ä½¿ç”¨ Virtual DOM æ›´æ–°è§†å›¾å…¥æ‰‹ã€‚ä»æ•´ä½“çš„å¤§æ–¹å‘è§‚å¯Ÿæ¡†æ¶ï¼Œè¿™ä¹ˆçœ‹æ¥ `V2.1.7` å¯¹äºç†è§£ `V2.2` çš„ä»£ç ä¸ä¼šæœ‰å¤ªå¤§çš„å½±å“ã€‚è¯¥ç³»åˆ—æ–‡ç« çš„åç»­æ–‡ç« ï¼Œéƒ½ä¼šä»æœ€æ–°çš„æºç å…¥æ‰‹ï¼Œå¹¶å¯¹æ”¹åŠ¨çš„åœ°æ–¹åšç›¸åº”çš„æç¤ºã€‚\n\n<!-- more -->\n\nå¾ˆä¹…ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼š[JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–](http://hcysun.me/2016/04/28/JavaScript%E5%AE%9E%E7%8E%B0MVVM%E4%B9%8B%E6%88%91%E5%B0%B1%E6%98%AF%E6%83%B3%E7%9B%91%E6%B5%8B%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%98%E5%8C%96/)ï¼Œæ–‡ç« å¼€å¤´æåˆ°äº†æˆ‘å†™åšå®¢çš„é£æ ¼ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œåªå†™åŠªåŠ›è®©å°ç™½ï¼Œç”šè‡³æ˜¯å°å­¦ç”Ÿéƒ½èƒ½çœ‹æ˜ç™½çš„æ–‡ç« ã€‚è¿™ä¸å…ä¼šå¯¼è‡´å¯¹äºæŸäº›åŒå­¦æ¥è¯´è¿™ç¯‡æ–‡ç« æœ‰äº›å¢¨è¿¹ï¼Œæ‰€ä»¥å¤§å®¶æ ¹æ®è‡ªå·±çš„å–œå¥½ï¼Œå¯ä»¥è¯¦ç»†çš„çœ‹ï¼Œä¹Ÿå¯ä»¥è·³è·ƒç€çœ‹ã€‚\n\n## <span style=\"color: #ff6600;\">ä¸€ã€ä»äº†è§£ä¸€ä¸ªå¼€æºé¡¹ç›®å…¥æ‰‹<span>\n\nè¦çœ‹ä¸€ä¸ªé¡¹ç›®çš„æºç ï¼Œä¸è¦ä¸€ä¸Šæ¥å°±çœ‹ï¼Œå…ˆå»äº†è§£ä¸€ä¸‹é¡¹ç›®æœ¬èº«çš„å…ƒæ•°æ®å’Œä¾èµ–ï¼Œé™¤æ­¤ä¹‹å¤–æœ€å¥½ä¹Ÿäº†è§£ä¸€ä¸‹ PR è§„åˆ™ï¼ŒIssue Reporting è§„åˆ™ç­‰ç­‰ã€‚ç‰¹åˆ«æ˜¯â€œå‰ç«¯â€å¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬åœ¨çœ‹æºç ä¹‹å‰ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„åº”è¯¥æ˜¯ï¼š`package.json`æ–‡ä»¶ã€‚\n\nåœ¨ `package.json` æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æœ€åº”è¯¥å…³æ³¨çš„å°±æ˜¯ `scripts` å­—æ®µå’Œ `devDependencies` ä»¥åŠ `dependencies` å­—æ®µï¼Œé€šè¿‡ `scripts` å­—æ®µæˆ‘ä»¬å¯ä»¥çŸ¥é“é¡¹ç›®ä¸­å®šä¹‰çš„è„šæœ¬å‘½ä»¤ï¼Œé€šè¿‡ `devDependencies` å’Œ `dependencies` å­—æ®µæˆ‘ä»¬å¯ä»¥äº†è§£é¡¹ç›®çš„ä¾èµ–æƒ…å†µã€‚\n\näº†è§£äº†è¿™äº›ä¹‹åï¼Œå¦‚æœæœ‰ä¾èµ–æˆ‘ä»¬å°± `npm install` å®‰è£…ä¾èµ–å°±okäº†ã€‚\n\né™¤äº† `package.json` ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜è¦é˜…è¯»é¡¹ç›®çš„è´¡çŒ®è§„åˆ™æ–‡æ¡£ï¼Œäº†è§£å¦‚ä½•å¼€å§‹ï¼Œä¸€ä¸ªå¥½çš„å¼€æºé¡¹ç›®è‚¯å®šä¼šåŒ…å«è¿™éƒ¨åˆ†å†…å®¹çš„ï¼ŒVueä¹Ÿä¸ä¾‹å¤–ï¼š[https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md](https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md)ï¼Œåœ¨è¿™ä¸ªæ–‡æ¡£é‡Œè¯´æ˜äº†ä¸€äº›è¡Œä¸ºå‡†åˆ™ï¼ŒPRæŒ‡å—ï¼ŒIssue Reporting æŒ‡å—ï¼ŒDevelopment Setup ä»¥åŠ é¡¹ç›®ç»“æ„ã€‚é€šè¿‡é˜…è¯»è¿™äº›å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£é¡¹ç›®å¦‚ä½•å¼€å§‹ï¼Œå¦‚ä½•å¼€å‘ä»¥åŠç›®å½•çš„è¯´æ˜ï¼Œä¸‹é¢æ˜¯å¯¹é‡è¦ç›®å½•å’Œæ–‡ä»¶çš„ç®€å•ä»‹ç»ï¼Œè¿™äº›å†…å®¹ä½ éƒ½å¯ä»¥å»è‡ªå·±é˜…è¯»è·å–ï¼š\n\n```\nâ”œâ”€â”€ build --------------------------------- æ„å»ºç›¸å…³çš„æ–‡ä»¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¸éœ€è¦åŠ¨\nâ”œâ”€â”€ dist ---------------------------------- æ„å»ºåæ–‡ä»¶çš„è¾“å‡ºç›®å½•\nâ”œâ”€â”€ examples ------------------------------ å­˜æ”¾ä¸€äº›ä½¿ç”¨Vueå¼€å‘çš„åº”ç”¨æ¡ˆä¾‹\nâ”œâ”€â”€ flow ---------------------------------- ç±»å‹å£°æ˜ï¼Œä½¿ç”¨å¼€æºé¡¹ç›® [Flow](https://flowtype.org/)\nâ”œâ”€â”€ package.json -------------------------- ä¸è§£é‡Š\nâ”œâ”€â”€ test ---------------------------------- åŒ…å«æ‰€æœ‰æµ‹è¯•æ–‡ä»¶\nâ”œâ”€â”€ src ----------------------------------- è¿™ä¸ªæ˜¯æˆ‘ä»¬æœ€åº”è¯¥å…³æ³¨çš„ç›®å½•ï¼ŒåŒ…å«äº†æºç \nâ”‚   â”œâ”€â”€ entries --------------------------- åŒ…å«äº†ä¸åŒçš„æ„å»ºæˆ–åŒ…çš„å…¥å£æ–‡ä»¶\nâ”‚   â”‚   â”œâ”€â”€ web-runtime.js ---------------- è¿è¡Œæ—¶æ„å»ºçš„å…¥å£ï¼Œè¾“å‡º dist/vue.common.js æ–‡ä»¶ï¼Œä¸åŒ…å«æ¨¡æ¿(template)åˆ°renderå‡½æ•°çš„ç¼–è¯‘å™¨ï¼Œæ‰€ä»¥ä¸æ”¯æŒ `template` é€‰é¡¹ï¼Œæˆ‘ä»¬ä½¿ç”¨vueé»˜è®¤å¯¼å‡ºçš„å°±æ˜¯è¿™ä¸ªè¿è¡Œæ—¶çš„ç‰ˆæœ¬ã€‚å¤§å®¶ä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„\nâ”‚   â”‚   â”œâ”€â”€ web-runtime-with-compiler.js -- ç‹¬ç«‹æ„å»ºç‰ˆæœ¬çš„å…¥å£ï¼Œè¾“å‡º dist/vue.jsï¼Œå®ƒåŒ…å«æ¨¡æ¿(template)åˆ°renderå‡½æ•°çš„ç¼–è¯‘å™¨\nâ”‚   â”‚   â”œâ”€â”€ web-compiler.js --------------- vue-template-compiler åŒ…çš„å…¥å£æ–‡ä»¶\nâ”‚   â”‚   â”œâ”€â”€ web-server-renderer.js -------- vue-server-renderer åŒ…çš„å…¥å£æ–‡ä»¶\nâ”‚   â”œâ”€â”€ compiler -------------------------- ç¼–è¯‘å™¨ä»£ç çš„å­˜æ”¾ç›®å½•ï¼Œå°† template ç¼–è¯‘ä¸º render å‡½æ•°\nâ”‚   â”‚   â”œâ”€â”€ parser ------------------------ å­˜æ”¾å°†æ¨¡æ¿å­—ç¬¦ä¸²è½¬æ¢æˆå…ƒç´ æŠ½è±¡è¯­æ³•æ ‘çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ codegen ----------------------- å­˜æ”¾ä»æŠ½è±¡è¯­æ³•æ ‘(AST)ç”Ÿæˆrenderå‡½æ•°çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ optimizer.js ------------------ åˆ†æé™æ€æ ‘ï¼Œä¼˜åŒ–vdomæ¸²æŸ“\nâ”‚   â”œâ”€â”€ core ------------------------------ å­˜æ”¾é€šç”¨çš„ï¼Œå¹³å°æ— å…³çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ observer ---------------------- ååº”ç³»ç»Ÿï¼ŒåŒ…å«æ•°æ®è§‚æµ‹çš„æ ¸å¿ƒä»£ç \nâ”‚   â”‚   â”œâ”€â”€ vdom -------------------------- åŒ…å«è™šæ‹ŸDOMåˆ›å»º(creation)å’Œæ‰“è¡¥ä¸(patching)çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ instance ---------------------- åŒ…å«Vueæ„é€ å‡½æ•°è®¾è®¡ç›¸å…³çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ global-api -------------------- åŒ…å«ç»™Vueæ„é€ å‡½æ•°æŒ‚è½½å…¨å±€æ–¹æ³•(é™æ€æ–¹æ³•)æˆ–å±æ€§çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ components -------------------- åŒ…å«æŠ½è±¡å‡ºæ¥çš„é€šç”¨ç»„ä»¶\nâ”‚   â”œâ”€â”€ server ---------------------------- åŒ…å«æœåŠ¡ç«¯æ¸²æŸ“(server-side rendering)çš„ç›¸å…³ä»£ç \nâ”‚   â”œâ”€â”€ platforms ------------------------- åŒ…å«å¹³å°ç‰¹æœ‰çš„ç›¸å…³ä»£ç \nâ”‚   â”œâ”€â”€ sfc ------------------------------- åŒ…å«å•æ–‡ä»¶ç»„ä»¶(.vueæ–‡ä»¶)çš„è§£æé€»è¾‘ï¼Œç”¨äºvue-template-compileråŒ…\nâ”‚   â”œâ”€â”€ shared ---------------------------- åŒ…å«æ•´ä¸ªä»£ç åº“é€šç”¨çš„ä»£ç \n```\n\nå¤§æ¦‚äº†è§£äº†é‡è¦ç›®å½•å’Œæ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŸ¥çœ‹ [Development Setup](https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md#development-setup) ä¸­çš„å¸¸ç”¨å‘½ä»¤éƒ¨åˆ†ï¼Œæ¥äº†è§£å¦‚ä½•å¼€å§‹è¿™ä¸ªé¡¹ç›®äº†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ ·çš„ä»‹ç»ï¼š\n\n```\n# watch and auto re-build dist/vue.js\n$ npm run dev\n\n# watch and auto re-run unit tests in Chrome\n$ npm run dev:test\n```\n\nç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦è¿è¡Œ `npm run dev` å³å¯ç›‘æµ‹æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨é‡æ–°æ„å»ºè¾“å‡º dist/vue.jsï¼Œç„¶åè¿è¡Œ `npm run dev:test` æ¥æµ‹è¯•ã€‚ä¸è¿‡ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä¼šåœ¨ `examples` ç›®å½•æ–°å»ºä¸€ä¸ªä¾‹å­ï¼Œç„¶åå¼•ç”¨ dist/vue.js è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹¿è¿™ä¸ªä¾‹å­ä¸€è¾¹æ”¹Vueæºç ä¸€è¾¹çœ‹è‡ªå·±å†™çš„ä»£ç æƒ³æ€ä¹ˆç©æ€ä¹ˆç©ã€‚\n\n## <span style=\"color: #ff6600;\">äºŒã€çœ‹æºç çš„å°æç¤º</span>\n\nåœ¨çœŸæ­£æ­¥å…¥æºç ä¸–ç•Œä¹‹å‰ï¼Œæˆ‘æƒ³ç®€å•è¯´ä¸€è¯´çœ‹æºç çš„æŠ€å·§ï¼š\n\n### *æ³¨é‡å¤§ä½“æ¡†æ¶ï¼Œä»å®è§‚åˆ°å¾®è§‚*\n\nå½“ä½ çœ‹ä¸€ä¸ªé¡¹ç›®ä»£ç çš„æ—¶å€™ï¼Œæœ€å¥½æ˜¯èƒ½æ‰¾åˆ°ä¸€æ¡ä¸»çº¿ï¼Œå…ˆæŠŠå¤§ä½“æµç¨‹ç»“æ„æ‘¸æ¸…æ¥šï¼Œå†æ·±å…¥åˆ°ç»†èŠ‚ï¼Œé€é¡¹å‡»ç ´ï¼Œæ‹¿Vueä¸¾ä¸ªæ —å­ï¼šå‡å¦‚ä½ å·²ç»çŸ¥é“Vueä¸­æ•°æ®çŠ¶æ€æ”¹å˜åä¼šé‡‡ç”¨virtual DOMçš„æ–¹å¼æ›´æ–°DOMï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœä½ ä¸äº†è§£virtual DOMï¼Œé‚£ä¹ˆå¬æˆ‘ä¸€å¥â€œæš‚ä¸”ä¸è¦å»ç ”ç©¶å†…éƒ¨å…·ä½“å®ç°ï¼Œå› ä¸ºè¿™ä¼šæ˜¯ä½ ä¸§å¤±ä¸»çº¿â€ï¼Œè€Œä½ ä»…ä»…éœ€è¦çŸ¥é“virtual DOMåˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š\n\n>ä¸€ã€createElement(): ç”¨ JavaScriptå¯¹è±¡(è™šæ‹Ÿæ ‘) æè¿° çœŸå®DOMå¯¹è±¡(çœŸå®æ ‘)\n>äºŒã€diff(oldNode, newNode) : å¯¹æ¯”æ–°æ—§ä¸¤ä¸ªè™šæ‹Ÿæ ‘çš„åŒºåˆ«ï¼Œæ”¶é›†å·®å¼‚\n>ä¸‰ã€patch() : å°†å·®å¼‚åº”ç”¨åˆ°çœŸå®DOMæ ‘\n\næœ‰çš„æ—¶å€™ ç¬¬äºŒæ­¥ å¯èƒ½ä¸ ç¬¬ä¸‰æ­¥ åˆå¹¶æˆä¸€æ­¥(Vue ä¸­çš„patchå°±æ˜¯è¿™æ ·)ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æ¯”å¦‚ `src/compiler/codegen` å†…çš„ä»£ç ï¼Œå¯èƒ½ä½ ä¸çŸ¥é“ä»–å†™äº†ä»€ä¹ˆï¼Œç›´æ¥å»çœ‹å®ƒä¼šè®©ä½ å¾ˆç—›è‹¦ï¼Œä½†æ˜¯ä½ åªéœ€è¦çŸ¥é“ codegen æ˜¯ç”¨æ¥å°†æŠ½è±¡è¯­æ³•æ ‘(AST)ç”Ÿæˆrenderå‡½æ•°çš„å°±OKäº†ï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š\n\n```js\nfunction anonymous() {\n\twith(this){return _c('p',{attrs:{\"id\":\"app\"}},[_v(\"\\n      \"+_s(a)+\"\\n      \"),_c('my-com')])}\n}\n```\n\nå½“æˆ‘ä»¬çŸ¥é“äº†ä¸€ä¸ªä¸œè¥¿å­˜åœ¨ï¼Œä¸”çŸ¥é“å®ƒå­˜åœ¨çš„ç›®çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾ˆå®¹æ˜“æŠ“ä½è¿™æ¡ä¸»çº¿ï¼Œè¿™ä¸ªç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« å°±æ˜¯å›´ç»•å¤§ä½“ä¸»çº¿å±•å¼€çš„ã€‚äº†è§£å¤§ä½“ä¹‹åï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†æ¯éƒ¨åˆ†å†…å®¹éƒ½æ˜¯åšä»€ä¹ˆçš„ï¼Œæ¯”å¦‚ codegen æ˜¯ç”Ÿæˆç±»ä¼¼ä¸Šé¢è´´å‡ºçš„ä»£ç æ‰€ç¤ºçš„å‡½æ•°çš„ï¼Œé‚£ä¹ˆå†å»çœ‹codegenä¸‹çš„ä»£ç æ—¶ï¼Œç›®çš„æ€§å°±ä¼šæ›´å¼ºï¼Œå°±æ›´å®¹æ˜“ç†è§£ã€‚\n\n## <span style=\"color: #ff6600;\">ä¸‰ã€Vue çš„æ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆæ ·çš„<span>\n\nbalabalaä¸€å¤§å †ï¼Œå¼€å§‹æ¥å¹²è´§å§ã€‚æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯ææ¸…æ¥š Vue æ„é€ å‡½æ•°åˆ°åº•æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚\n\næˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ `new` æ“ä½œç¬¦æ¥è°ƒç”¨ `Vue`ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ `Vue` åº”è¯¥æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€ä»¶è¦åšçš„äº‹å„¿å°±æ˜¯æŠŠæ„é€ å‡½æ•°å…ˆæ‰’çš„ä¸€æ¸…äºŒæ¥šï¼Œå¦‚ä½•å¯»æ‰¾ `Vue` æ„é€ å‡½æ•°å‘¢ï¼Ÿå½“ç„¶æ˜¯ä» entry å¼€å§‹å•¦ï¼Œè¿˜è®°çš„æˆ‘ä»¬è¿è¡Œ `npm run dev` å‘½ä»¤åï¼Œä¼šè¾“å‡º `dist/vue.js` å—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å»çœ‹çœ‹ `npm run dev` å¹²äº†ä»€ä¹ˆï¼š\n\n```\n\"dev\": \"TARGET=web-full-dev rollup -w -c build/config.js\",\n```\n\né¦–å…ˆå°† TARGET å¾—å€¼è®¾ç½®ä¸º 'web-full-dev'ï¼Œç„¶åï¼Œç„¶åï¼Œç„¶åå¦‚æœä½ ä¸äº†è§£ rollup å°±åº”è¯¥ç®€å•å»çœ‹ä¸€ä¸‹å•¦......ï¼Œç®€å•çš„è¯´å°±æ˜¯ä¸€ä¸ªJavaScriptæ¨¡å—æ‰“åŒ…å™¨ï¼Œä½ å¯ä»¥æŠŠå®ƒç®€å•çš„ç†è§£ä¸ºå’Œ webpack ä¸€æ ·ï¼Œåªä¸è¿‡å®ƒæœ‰ä»–çš„ä¼˜åŠ¿ï¼Œæ¯”å¦‚ Tree-shaking (webpack2ä¹Ÿæœ‰)ï¼Œä½†åŒæ ·ï¼Œåœ¨æŸäº›åœºæ™¯å®ƒä¹Ÿæœ‰ä»–çš„åŠ£åŠ¿ã€‚ã€‚ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œå…¶ä¸­ `-w` å°±æ˜¯watchï¼Œ`-c` å°±æ˜¯æŒ‡å®šé…ç½®æ–‡ä»¶ä¸º `build/config.js` ï¼Œæˆ‘ä»¬æ‰“å¼€è¿™ä¸ªé…ç½®æ–‡ä»¶çœ‹ä¸€çœ‹ï¼š\n\n```js\n// å¼•å…¥ä¾èµ–ï¼Œå®šä¹‰ banner\n...\n\n// builds å¯¹è±¡\nconst builds = {\n\t...\n\t// Runtime+compiler development build (Browser)\n\t'web-full-dev': {\n\t    entry: path.resolve(__dirname, '../src/entries/web-runtime-with-compiler.js'),\n\t    dest: path.resolve(__dirname, '../dist/vue.js'),\n\t    format: 'umd',\n\t    env: 'development',\n\t    alias: { he: './entity-decoder' },\n\t    banner\n\t},\n\t...\n}\n\n// ç”Ÿæˆé…ç½®çš„æ–¹æ³•\nfunction genConfig(opts){\n\t...\n}\n\nif (process.env.TARGET) {\n  module.exports = genConfig(builds[process.env.TARGET])\n} else {\n  exports.getBuild = name => genConfig(builds[name])\n  exports.getAllBuilds = () => Object.keys(builds).map(name => genConfig(builds[name]))\n}\n```\n\nä¸Šé¢çš„ä»£ç æ˜¯ç®€åŒ–è¿‡çš„ï¼Œå½“æˆ‘ä»¬è¿è¡Œ `npm run dev` çš„æ—¶å€™ `process.env.TARGET` çš„å€¼ç­‰äº 'web-full-dev'ï¼Œæ‰€ä»¥\n\n```js\nmodule.exports = genConfig(builds[process.env.TARGET])\n```\n\nè¿™å¥ä»£ç ç›¸å½“äºï¼š\n\n```js\nmodule.exports = genConfig({\n    entry: path.resolve(__dirname, '../src/entries/web-runtime-with-compiler.js'),\n    dest: path.resolve(__dirname, '../dist/vue.js'),\n    format: 'umd',\n    env: 'development',\n    alias: { he: './entity-decoder' },\n    banner\n})\n```\n\næœ€ç»ˆï¼ŒgenConfig å‡½æ•°è¿”å›ä¸€ä¸ª config å¯¹è±¡ï¼Œè¿™ä¸ªconfigå¯¹è±¡å°±æ˜¯Rollupçš„é…ç½®å¯¹è±¡ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±ä¸éš¾çœ‹åˆ°ï¼Œå…¥å£æ–‡ä»¶æ˜¯ï¼š\n\n```\nsrc/entries/web-runtime-with-compiler.js\n```\n\næˆ‘ä»¬æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œä¸è¦å¿˜äº†æˆ‘ä»¬çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬åœ¨å¯»æ‰¾Vueæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶çš„ç¬¬ä¸€è¡Œä»£ç æ˜¯ï¼š\n\n```js\nimport Vue from './web-runtime'\n```\n\nè¿™ä¸ªæ—¶å€™ï¼Œä½ å°±åº”è¯¥çŸ¥é“ï¼Œè¿™ä¸ªæ–‡ä»¶æš‚æ—¶ä¸ä½ æ— ç¼˜ï¼Œä½ åº”è¯¥æ‰“å¼€ `web-runtime.js` æ–‡ä»¶ï¼Œä¸è¿‡å½“ä½ æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œä½ å‘ç°ç¬¬ä¸€è¡Œæ˜¯è¿™æ ·çš„ï¼š\n\n```js\nimport Vue from 'core/index'\n```\n\nä¾ç…§æ­¤æ€è·¯ï¼Œæœ€ç»ˆæˆ‘ä»¬å¯»æ‰¾åˆ°Vueæ„é€ å‡½æ•°çš„ä½ç½®åº”è¯¥æ˜¯åœ¨ `src/core/instance/index.js` æ–‡ä»¶ä¸­ï¼Œå…¶å®æˆ‘ä»¬çŒœä¹ŸçŒœå¾—åˆ°ï¼Œä¸Šé¢ä»‹ç»ç›®å½•çš„æ—¶å€™è¯´è¿‡ï¼šinstance æ˜¯å­˜æ”¾Vueæ„é€ å‡½æ•°è®¾è®¡ç›¸å…³ä»£ç çš„ç›®å½•ã€‚æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯»æ‰¾çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š\n\n![å¯»æ‰¾ Vue æ„é€ å‡½æ•°è·¯çº¿](http://7xlolm.com1.z0.glb.clouddn.com/vueimg2BD0DCC6-D689-4809-93D3-2F979E8F8C0C.png)\n\næˆ‘ä»¬å›å¤´çœ‹ä¸€çœ‹ `src/core/instance/index.js` æ–‡ä»¶ï¼Œå¾ˆç®€å•ï¼š\n\n```js\nimport { initMixin } from './init'\nimport { stateMixin } from './state'\nimport { renderMixin } from './render'\nimport { eventsMixin } from './events'\nimport { lifecycleMixin } from './lifecycle'\nimport { warn } from '../util/index'\n\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)) {\n    warn('Vue is a constructor and should be called with the `new` keyword')\n  }\n  this._init(options)\n}\n\ninitMixin(Vue)\nstateMixin(Vue)\neventsMixin(Vue)\nlifecycleMixin(Vue)\nrenderMixin(Vue)\n\nexport default Vue\n```\n\nå¼•å…¥ä¾èµ–ï¼Œå®šä¹‰ Vue æ„é€ å‡½æ•°ï¼Œç„¶åä»¥Vueæ„é€ å‡½æ•°ä¸ºå‚æ•°ï¼Œè°ƒç”¨äº†äº”ä¸ªæ–¹æ³•ï¼Œæœ€åå¯¼å‡º Vueã€‚è¿™äº”ä¸ªæ–¹æ³•åˆ†åˆ«æ¥è‡ªäº”ä¸ªæ–‡ä»¶ï¼š`init.js` `state.js` `render.js` `events.js` ä»¥åŠ `lifecycle.js`ã€‚\n\næ‰“å¼€è¿™äº”ä¸ªæ–‡ä»¶ï¼Œæ‰¾åˆ°ç›¸åº”çš„æ–¹æ³•ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™äº›æ–¹æ³•çš„ä½œç”¨ï¼Œå°±æ˜¯åœ¨ Vue çš„åŸå‹ prototype ä¸ŠæŒ‚è½½æ–¹æ³•æˆ–å±æ€§ï¼Œç»å†äº†è¿™äº”ä¸ªæ–¹æ³•åçš„Vueä¼šå˜æˆè¿™æ ·ï¼š\n\n```js\n// initMixin(Vue)\tsrc/core/instance/init.js **************************************************\nVue.prototype._init = function (options?: Object) {}\n\n// stateMixin(Vue)\tsrc/core/instance/state.js **************************************************\nVue.prototype.$data\nVue.prototype.$set = set\nVue.prototype.$delete = del\nVue.prototype.$watch = function(){}\n\n// renderMixin(Vue)\tsrc/core/instance/render.js **************************************************\nVue.prototype.$nextTick = function (fn: Function) {}\nVue.prototype._render = function (): VNode {}\nVue.prototype._s = _toString\nVue.prototype._v = createTextVNode\nVue.prototype._n = toNumber\nVue.prototype._e = createEmptyVNode\nVue.prototype._q = looseEqual\nVue.prototype._i = looseIndexOf\nVue.prototype._m = function(){}\nVue.prototype._o = function(){}\nVue.prototype._f = function resolveFilter (id) {}\nVue.prototype._l = function(){}\nVue.prototype._t = function(){}\nVue.prototype._b = function(){}\nVue.prototype._k = function(){}\n\n// eventsMixin(Vue)\tsrc/core/instance/events.js **************************************************\nVue.prototype.$on = function (event: string, fn: Function): Component {}\nVue.prototype.$once = function (event: string, fn: Function): Component {}\nVue.prototype.$off = function (event?: string, fn?: Function): Component {}\nVue.prototype.$emit = function (event: string): Component {}\n\n// lifecycleMixin(Vue)\tsrc/core/instance/lifecycle.js **************************************************\nVue.prototype._mount = function(){}\nVue.prototype._update = function (vnode: VNode, hydrating?: boolean) {}\nVue.prototype._updateFromParent = function(){}\nVue.prototype.$forceUpdate = function () {}\nVue.prototype.$destroy = function () {}\n```\n\nè¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿå¹¶æ²¡æœ‰ï¼Œæ ¹æ®æˆ‘ä»¬ä¹‹å‰å¯»æ‰¾ Vue çš„è·¯çº¿ï¼Œè¿™åªæ˜¯åˆšåˆšå¼€å§‹ï¼Œæˆ‘ä»¬è¿½æº¯è·¯çº¿å¾€å›èµ°ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªå¤„ç† Vue æ„é€ å‡½æ•°çš„åº”è¯¥æ˜¯ `src/core/index.js` æ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰“å¼€å®ƒï¼š\n\n```js\nimport Vue from './instance/index'\nimport { initGlobalAPI } from './global-api/index'\nimport { isServerRendering } from 'core/util/env'\n\ninitGlobalAPI(Vue)\n\nObject.defineProperty(Vue.prototype, '$isServer', {\n  get: isServerRendering\n})\n\nVue.version = '__VERSION__'\n\nexport default Vue\n```\n\nè¿™ä¸ªæ–‡ä»¶ä¹Ÿå¾ˆç®€å•ï¼Œä» instance/index ä¸­å¯¼å…¥å·²ç»åœ¨åŸå‹ä¸ŠæŒ‚è½½äº†æ–¹æ³•å’Œå±æ€§åçš„ Vueï¼Œç„¶åå¯¼å…¥ `initGlobalAPI` å’Œ `isServerRendering`ï¼Œä¹‹åå°†Vueä½œä¸ºå‚æ•°ä¼ ç»™  `initGlobalAPI` ï¼Œæœ€ååˆåœ¨ `Vue.prototype` ä¸ŠæŒ‚è½½äº† `$isServer` ï¼Œåœ¨ `Vue` ä¸ŠæŒ‚è½½äº† `version` å±æ€§ã€‚\n\n`initGlobalAPI` çš„ä½œç”¨æ˜¯åœ¨ `Vue` æ„é€ å‡½æ•°ä¸ŠæŒ‚è½½é™æ€å±æ€§å’Œæ–¹æ³•ï¼Œ`Vue` åœ¨ç»è¿‡ `initGlobalAPI` ä¹‹åï¼Œä¼šå˜æˆè¿™æ ·ï¼š\n\n```js\n// src/core/index.js / src/core/global-api/index.js\nVue.config\nVue.util = util\nVue.set = set\nVue.delete = del\nVue.nextTick = util.nextTick\nVue.options = {\n    components: {\n        KeepAlive\n    },\n    directives: {},\n    filters: {},\n    _base: Vue\n}\nVue.use\nVue.mixin\nVue.cid = 0\nVue.extend\nVue.component = function(){}\nVue.directive = function(){}\nVue.filter = function(){}\n\nVue.prototype.$isServer\nVue.version = '__VERSION__'\n```\n\nå…¶ä¸­ï¼Œç¨å¾®å¤æ‚ä¸€ç‚¹çš„å°±æ˜¯ `Vue.options`ï¼Œå¤§å®¶ç¨å¾®åˆ†æåˆ†æå°±ä¼šçŸ¥é“ä»–çš„ç¡®é•¿æˆé‚£ä¸ªæ ·å­ã€‚ä¸‹ä¸€ä¸ªå°±æ˜¯ `web-runtime.js` æ–‡ä»¶äº†ï¼Œ`web-runtime.js` æ–‡ä»¶ä¸»è¦åšäº†ä¸‰ä»¶äº‹å„¿ï¼š\n\n> 1ã€è¦†ç›– `Vue.config` çš„å±æ€§ï¼Œå°†å…¶è®¾ç½®ä¸ºå¹³å°ç‰¹æœ‰çš„ä¸€äº›æ–¹æ³•\n> 2ã€`Vue.options.directives` å’Œ `Vue.options.components` å®‰è£…å¹³å°ç‰¹æœ‰çš„æŒ‡ä»¤å’Œç»„ä»¶\n> 3ã€åœ¨ `Vue.prototype` ä¸Šå®šä¹‰ `__patch__` å’Œ `$mount`\n\nç»è¿‡ `web-runtime.js` æ–‡ä»¶ä¹‹åï¼Œ`Vue` å˜æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š\n\n```js\n// å®‰è£…å¹³å°ç‰¹å®šçš„utils\nVue.config.isUnknownElement = isUnknownElement\nVue.config.isReservedTag = isReservedTag\nVue.config.getTagNamespace = getTagNamespace\nVue.config.mustUseProp = mustUseProp\n// å®‰è£…å¹³å°ç‰¹å®šçš„ æŒ‡ä»¤ å’Œ ç»„ä»¶\nVue.options = {\n    components: {\n        KeepAlive,\n        Transition,\n        TransitionGroup\n    },\n    directives: {\n        model,\n        show\n    },\n    filters: {},\n    _base: Vue\n}\nVue.prototype.__patch__\nVue.prototype.$mount\n```\n\nè¿™é‡Œå¤§å®¶è¦æ³¨æ„çš„æ˜¯ `Vue.options` çš„å˜åŒ–ã€‚å¦å¤–è¿™é‡Œçš„ `$mount` æ–¹æ³•å¾ˆç®€å•ï¼š\n\n```js\nVue.prototype.$mount = function (\n  el?: string | Element,\n  hydrating?: boolean\n): Component {\n  el = el && inBrowser ? query(el) : undefined\n  return this._mount(el, hydrating)\n}\n```\n\né¦–å…ˆæ ¹æ®æ˜¯å¦æ˜¯æµè§ˆå™¨ç¯å¢ƒå†³å®šè¦ä¸è¦ `query(el)` è·å–å…ƒç´ ï¼Œç„¶åå°† `el` ä½œä¸ºå‚æ•°ä¼ é€’ç»™ `this._mount()`ã€‚\n\næœ€åä¸€ä¸ªå¤„ç† Vue çš„æ–‡ä»¶å°±æ˜¯å…¥å£æ–‡ä»¶ `web-runtime-with-compiler.js` äº†ï¼Œè¯¥æ–‡ä»¶åšäº†ä¸¤ä»¶äº‹ï¼š\n\n1ã€ç¼“å­˜æ¥è‡ª `web-runtime.js` æ–‡ä»¶çš„ `$mount` å‡½æ•°\n\n```js\nconst mount = Vue.prototype.$mount\n```\n\nç„¶åè¦†ç›–è¦†ç›–äº† `Vue.prototype.$mount`\n\n2ã€åœ¨ Vue ä¸ŠæŒ‚è½½ `compile`\n\n```js\nVue.compile = compileToFunctions\n```\n\ncompileToFunctions å‡½æ•°çš„ä½œç”¨ï¼Œå°±æ˜¯å°†æ¨¡æ¿ `template` ç¼–è¯‘ä¸ºrenderå‡½æ•°ã€‚\n\nè‡³æ­¤ï¼Œæˆ‘ä»¬ç®—æ˜¯è¿˜åŸäº† Vue æ„é€ å‡½æ•°ï¼Œæ€»ç»“ä¸€ä¸‹ï¼š\n\n> 1ã€`Vue.prototype` ä¸‹çš„å±æ€§å’Œæ–¹æ³•çš„æŒ‚è½½ä¸»è¦æ˜¯åœ¨ `src/core/instance` ç›®å½•ä¸­çš„ä»£ç å¤„ç†çš„\n\n> 2ã€`Vue` ä¸‹çš„é™æ€å±æ€§å’Œæ–¹æ³•çš„æŒ‚è½½ä¸»è¦æ˜¯åœ¨ `src/core/global-api` ç›®å½•ä¸‹çš„ä»£ç å¤„ç†çš„\n\n> 3ã€`web-runtime.js` ä¸»è¦æ˜¯æ·»åŠ webå¹³å°ç‰¹æœ‰çš„é…ç½®ã€ç»„ä»¶å’ŒæŒ‡ä»¤ï¼Œ`web-runtime-with-compiler.js` ç»™Vueçš„ `$mount` æ–¹æ³•æ·»åŠ  `compiler` ç¼–è¯‘å™¨ï¼Œæ”¯æŒ `template`ã€‚\n\n## <span style=\"color: #ff6600;\">å››ã€ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­</span>\n\nåœ¨äº†è§£äº† `Vue` æ„é€ å‡½æ•°çš„è®¾è®¡ä¹‹åï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­å°±è¦ç™»åœºäº†ï¼ŒæŒå£°æœ‰è¯·ï¼š\n\n```js\nlet v = new Vue({\n\tel: '#app',\n\tdata: {\n\t\ta: 1,\n\t\tb: [1, 2, 3]\n\t}\n})\n```\n\nå¥½å§ï¼Œæˆ‘æ‰¿è®¤è¿™æ®µä»£ç ä½ å®¶æ²¡æ»¡æœˆçš„å­©å­éƒ½ä¼šå†™äº†ã€‚è¿™æ®µä»£ç å°±æ˜¯æˆ‘ä»¬è´¯ç©¿å§‹ç»ˆçš„ä¾‹å­ï¼Œå®ƒå°±æ˜¯è¿™ç¯‡æ–‡ç« çš„ä¸»çº¿ï¼Œåœ¨åç»­çš„è®²è§£ä¸­ï¼Œéƒ½ä¼šä»¥è¿™æ®µä»£ç ä¸ºä¾‹ï¼Œå½“è®²åˆ°å¿…è¦çš„åœ°æ–¹ï¼Œä¼šä¸ºå…¶æ·»åŠ é€‰é¡¹ï¼Œæ¯”å¦‚è®²è®¡ç®—å±æ€§çš„æ—¶å€™å½“ç„¶è¦åŠ ä¸Šä¸€ä¸ª `computed` å±æ€§äº†ã€‚ä¸è¿‡åœ¨æœ€å¼€å§‹ï¼Œæˆ‘åªä¼ é€’äº†ä¸¤ä¸ªé€‰é¡¹ `el` ä»¥åŠ `data`ï¼Œâ€œæˆ‘ä»¬çœ‹çœ‹æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œè®©æˆ‘ä»¬æ‹­ç›®ä»¥å¾…â€œ ---- NBAçƒæ˜Ÿåœ¨æ¥å—é‡‡è®¿æ—¶æœ€å–œæ¬¢è¯´è¿™å¥è¯ã€‚\n\n*å½“æˆ‘ä»¬æŒ‰ç…§ä¾‹å­é‚£æ ·ç¼–ç ä½¿ç”¨Vueçš„æ—¶å€™ï¼ŒVueéƒ½åšäº†ä»€ä¹ˆï¼Ÿ*\n\næƒ³è¦çŸ¥é“Vueéƒ½å¹²äº†ä»€ä¹ˆï¼Œæˆ‘ä»¬å°±è¦æ‰¾åˆ° Vue åˆå§‹åŒ–ç¨‹åºï¼ŒæŸ¥çœ‹ Vue æ„é€ å‡½æ•°ï¼š\n\n```js\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)) {\n    warn('Vue is a constructor and should be called with the `new` keyword')\n  }\n  this._init(options)\n}\n```\n\næˆ‘ä»¬å‘ç°ï¼Œ`_init()` æ–¹æ³•å°±æ˜¯Vueè°ƒç”¨çš„ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œç„¶åå°†æˆ‘ä»¬çš„å‚æ•° `options` é€ä¼ äº†è¿‡å»ã€‚åœ¨è°ƒç”¨ `_init()` ä¹‹å‰ï¼Œè¿˜åšäº†ä¸€ä¸ªå®‰å…¨æ¨¡å¼çš„å¤„ç†ï¼Œå‘Šè¯‰å¼€å‘è€…å¿…é¡»ä½¿ç”¨ `new` æ“ä½œç¬¦è°ƒç”¨ Vueã€‚æ ¹æ®ä¹‹å‰æˆ‘ä»¬çš„æ•´ç†ï¼Œ`_init()` æ–¹æ³•åº”è¯¥æ˜¯åœ¨ `src/core/instance/init.js` æ–‡ä»¶ä¸­å®šä¹‰çš„ï¼Œæˆ‘ä»¬æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æŸ¥çœ‹ `_init()` æ–¹æ³•ï¼š\n\n```js\n  Vue.prototype._init = function (options?: Object) {\n    const vm: Component = this\n    // a uid\n    vm._uid = uid++\n    // a flag to avoid this being observed\n    vm._isVue = true\n    // merge options\n    if (options && options._isComponent) {\n      // optimize internal component instantiation\n      // since dynamic options merging is pretty slow, and none of the\n      // internal component options needs special treatment.\n      initInternalComponent(vm, options)\n    } else {\n      vm.$options = mergeOptions(\n        resolveConstructorOptions(vm.constructor),\n        options || {},\n        vm\n      )\n    }\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      initProxy(vm)\n    } else {\n      vm._renderProxy = vm\n    }\n\n    // expose real self\n    vm._self = vm\n    initLifecycle(vm)\n    initEvents(vm)\n    callHook(vm, 'beforeCreate')\n    initState(vm)\n    callHook(vm, 'created')\n    initRender(vm)\n  }\n```\n\n`_init()` æ–¹æ³•åœ¨ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œåœ¨ `this` å¯¹è±¡ä¸Šå®šä¹‰äº†ä¸¤ä¸ªå±æ€§ï¼š`_uid` å’Œ `_isVue`ï¼Œç„¶ååˆ¤æ–­æœ‰æ²¡æœ‰å®šä¹‰ `options._isComponent`ï¼Œåœ¨ä½¿ç”¨ Vue å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯ä¸ä¼šä½¿ç”¨ `_isComponent` é€‰é¡¹çš„ï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯ Vue å†…éƒ¨ä½¿ç”¨çš„ï¼ŒæŒ‰ç…§æœ¬èŠ‚å¼€å¤´çš„ä¾‹å­ï¼Œè¿™é‡Œä¼šèµ° `else` åˆ†æ”¯ï¼Œä¹Ÿå°±æ˜¯è¿™æ®µä»£ç ï¼š\n\n```js\n  vm.$options = mergeOptions(\n    resolveConstructorOptions(vm.constructor),\n    options || {},\n    vm\n  )\n```\n\nè¿™æ · `Vue` ç¬¬ä¸€æ­¥æ‰€åšçš„äº‹æƒ…å°±æ¥äº†ï¼š<span style=\"color: red;\">*ä½¿ç”¨ç­–ç•¥å¯¹è±¡åˆå¹¶å‚æ•°é€‰é¡¹*</span>\n\nå¯ä»¥å‘ç°ï¼ŒVueä½¿ç”¨ `mergeOptions` æ¥å¤„ç†æˆ‘ä»¬è°ƒç”¨Vueæ—¶ä¼ å…¥çš„å‚æ•°é€‰é¡¹(options)ï¼Œç„¶åå°†è¿”å›å€¼èµ‹å€¼ç»™ `this.$options` (vm === this)ï¼Œä¼ ç»™ `mergeOptions` æ–¹æ³•ä¸‰ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸€çœ‹ï¼Œé¦–å…ˆæ˜¯ï¼š`resolveConstructorOptions(vm.constructor)`ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼š\n\n```js\nexport function resolveConstructorOptions (Ctor: Class<Component>) {\n  let options = Ctor.options\n  if (Ctor.super) {\n    const superOptions = Ctor.super.options\n    const cachedSuperOptions = Ctor.superOptions\n    const extendOptions = Ctor.extendOptions\n    if (superOptions !== cachedSuperOptions) {\n      // super option changed\n      Ctor.superOptions = superOptions\n      extendOptions.render = options.render\n      extendOptions.staticRenderFns = options.staticRenderFns\n      extendOptions._scopeId = options._scopeId\n      options = Ctor.options = mergeOptions(superOptions, extendOptions)\n      if (options.name) {\n        options.components[options.name] = Ctor\n      }\n    }\n  }\n  return options\n}\n```\n\nè¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•° `Ctor`ï¼Œé€šè¿‡ä¼ å…¥çš„ `vm.constructor` æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå…¶å®å°±æ˜¯ `Vue` æ„é€ å‡½æ•°æœ¬èº«ã€‚æ‰€ä»¥ä¸‹é¢è¿™å¥ä»£ç ï¼š\n\n```js\nlet options = Ctor.options\n```\n\nç›¸å½“äºï¼š\n\n```js\nlet options = Vue.options\n```\n\nå¤§å®¶è¿˜è®°å¾— `Vue.options` å—ï¼Ÿåœ¨å¯»æ‰¾Vueæ„é€ å‡½æ•°ä¸€èŠ‚é‡Œï¼Œæˆ‘ä»¬æ•´ç†äº† `Vue.options` åº”è¯¥é•¿æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š\n\n```js\nVue.options = {\n    components: {\n        KeepAlive,\n        Transition,\n        TransitionGroup\n    },\n    directives: {\n        model,\n        show\n    },\n    filters: {},\n    _base: Vue\n}\n```\n\nä¹‹ååˆ¤æ–­æ˜¯å¦å®šä¹‰äº† `Vue.super` ï¼Œè¿™ä¸ªæ˜¯ç”¨æ¥å¤„ç†ç»§æ‰¿çš„ï¼Œæˆ‘ä»¬åç»­å†è®²ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œ`resolveConstructorOptions` æ–¹æ³•ç›´æ¥è¿”å›äº† `Vue.options`ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼ é€’ç»™ `mergeOptions` æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ `Vue.options`ã€‚\n\nä¼ ç»™ `mergeOptions` æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬è°ƒç”¨Vueæ„é€ å‡½æ•°æ—¶çš„å‚æ•°é€‰é¡¹ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ `vm` ä¹Ÿå°±æ˜¯ `this` å¯¹è±¡ï¼ŒæŒ‰ç…§æœ¬èŠ‚å¼€å¤´çš„ä¾‹å­é‚£æ ·ä½¿ç”¨ Vueï¼Œæœ€ç»ˆè¿è¡Œçš„ä»£ç åº”è¯¥å¦‚ä¸‹ï¼š\n\n```js\n  vm.$options = mergeOptions(\n  \t// Vue.options\n    {\n\t    components: {\n\t        KeepAlive,\n\t        Transition,\n\t        TransitionGroup\n\t    },\n\t    directives: {\n\t        model,\n\t        show\n\t    },\n\t    filters: {},\n\t    _base: Vue\n\t},\n\t// è°ƒç”¨Vueæ„é€ å‡½æ•°æ—¶ä¼ å…¥çš„å‚æ•°é€‰é¡¹ options\n    {\n    \tel: '#app',\n\t\tdata: {\n\t\t\ta: 1,\n\t\t\tb: [1, 2, 3]\n\t\t}\n    },\n    // this\n    vm\n  )\n```\n\näº†è§£äº†è¿™äº›ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹çœ‹ `mergeOptions` åˆ°åº•åšäº†äº›ä»€ä¹ˆäº†ï¼Œæ ¹æ®å¼•ç”¨å¯»æ‰¾åˆ° `mergeOptions` åº”è¯¥æ˜¯åœ¨ `src/core/util/options.js` æ–‡ä»¶ä¸­å®šä¹‰çš„ã€‚è¿™ä¸ªæ–‡ä»¶ç¬¬ä¸€æ¬¡çœ‹å¯èƒ½ä¼šå¤´å¤§ï¼Œä¸‹é¢æ˜¯æˆ‘å¤„ç†åçš„ç®€ç•¥å±•ç¤ºï¼Œå¤§å®¶çœ‹ä¸Šå»åº”è¯¥æ›´å®¹æ˜“ç†è§£äº†ï¼š\n\n```js\n// 1ã€å¼•ç”¨ä¾èµ–\nimport Vue from '../instance/index'\nå…¶ä»–å¼•ç”¨...\n\n// 2ã€åˆå¹¶çˆ¶å­é€‰é¡¹å€¼ä¸ºæœ€ç»ˆå€¼çš„ç­–ç•¥å¯¹è±¡ï¼Œæ­¤æ—¶ strats æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå› ä¸º config.optionMergeStrategies = Object.create(null)\nconst strats = config.optionMergeStrategies\n// 3ã€åœ¨ strats å¯¹è±¡ä¸Šå®šä¹‰ä¸å‚æ•°é€‰é¡¹åç§°ç›¸åŒçš„æ–¹æ³•\nstrats.el = \nstrats.propsData = function (parent, child, vm, key){}\nstrats.data = function (parentVal, childVal, vm)\n\nconfig._lifecycleHooks.forEach(hook => {\n  strats[hook] = mergeHook\n})\n\nconfig._assetTypes.forEach(function (type) {\n  strats[type + 's'] = mergeAssets\n})\n\nstrats.watch = function (parentVal, childVal)\n\nstrats.props =\nstrats.methods =\nstrats.computed = function (parentVal: ?Object, childVal: ?Object)\n// é»˜è®¤çš„åˆå¹¶ç­–ç•¥ï¼Œå¦‚æœæœ‰ `childVal` åˆ™è¿”å› `childVal` æ²¡æœ‰åˆ™è¿”å› `parentVal`\nconst defaultStrat = function (parentVal: any, childVal: any): any {\n  return childVal === undefined\n    ? parentVal\n    : childVal\n}\n\n// 4ã€mergeOptions ä¸­æ ¹æ®å‚æ•°é€‰é¡¹è°ƒç”¨åŒåçš„ç­–ç•¥æ–¹æ³•è¿›è¡Œåˆå¹¶å¤„ç†\nexport function mergeOptions (\n  parent: Object,\n  child: Object,\n  vm?: Component\n): Object {\n\n  // å…¶ä»–ä»£ç \n  ...\n\n  const options = {}\n  let key\n  for (key in parent) {\n    mergeField(key)\n  }\n  for (key in child) {\n    if (!hasOwn(parent, key)) {\n      mergeField(key)\n    }\n  }\n  function mergeField (key) {\n    const strat = strats[key] || defaultStrat\n    options[key] = strat(parent[key], child[key], vm, key)\n  }\n  return options\n\t\n}\n\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘çœç•¥äº†ä¸€äº›å·¥å…·å‡½æ•°ï¼Œä¾‹å¦‚ `mergeHook` å’Œ `mergeAssets` ç­‰ç­‰ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯è¿™æ®µä»£ç ï¼š\n\n```js\nconfig._lifecycleHooks.forEach(hook => {\n  strats[hook] = mergeHook\n})\n\nconfig._assetTypes.forEach(function (type) {\n  strats[type + 's'] = mergeAssets\n})\n```\n\n`config` å¯¹è±¡å¼•ç”¨è‡ª `src/core/config.js` æ–‡ä»¶ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯åœ¨ `strats` ä¸‹æ·»åŠ äº†ç›¸åº”çš„ç”Ÿå‘½å‘¨æœŸé€‰é¡¹çš„åˆå¹¶ç­–ç•¥å‡½æ•°ä¸º `mergeHook`ï¼Œæ·»åŠ æŒ‡ä»¤(directives)ã€ç»„ä»¶(components)ã€è¿‡æ»¤å™¨(filters)ç­‰é€‰é¡¹çš„åˆå¹¶ç­–ç•¥å‡½æ•°ä¸º `mergeAssets`ã€‚\n\nè¿™æ ·çœ‹æ¥å°±æ¸…æ™°å¤šäº†ï¼Œæ‹¿æˆ‘ä»¬è´¯ç©¿æœ¬æ–‡çš„ä¾‹å­æ¥è¯´ï¼š\n\n```js\nlet v = new Vue({\n\tel: '#app',\n\tdata: {\n\t\ta: 1,\n\t\tb: [1, 2, 3]\n\t}\n})\n```\n\nå…¶ä¸­ `el` é€‰é¡¹ä¼šä½¿ç”¨ `defaultStrat` é»˜è®¤ç­–ç•¥å‡½æ•°å¤„ç†ï¼Œ`data` é€‰é¡¹åˆ™ä¼šä½¿ç”¨ `strats.data` ç­–ç•¥å‡½æ•°å¤„ç†ï¼Œå¹¶ä¸”æ ¹æ® `strats.data` ä¸­çš„é€»è¾‘ï¼Œ`strats.data` æ–¹æ³•æœ€ç»ˆä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ï¼š`mergedInstanceDataFn`ã€‚\n\nè¿™é‡Œå°±ä¸è¯¦ç»†çš„è®²è§£æ¯ä¸€ä¸ªç­–ç•¥å‡½æ•°çš„å†…å®¹äº†ï¼Œåç»­éƒ½ä¼šè®²åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯æŠ“ä½ä¸»çº¿ç†æ¸…æ€è·¯ä¸ºä¸»ï¼Œåªéœ€è¦çŸ¥é“Vueåœ¨å¤„ç†é€‰é¡¹çš„æ—¶å€™ï¼Œä½¿ç”¨äº†ä¸€ä¸ªç­–ç•¥å¯¹è±¡å¯¹çˆ¶å­é€‰é¡¹è¿›è¡Œåˆå¹¶ã€‚å¹¶å°†æœ€ç»ˆçš„å€¼èµ‹å€¼ç»™å®ä¾‹ä¸‹çš„ `$options` å±æ€§å³ï¼š`this.$options`ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç»§ç»­æŸ¥çœ‹ `_init()` æ–¹æ³•åœ¨åˆå¹¶å®Œé€‰é¡¹ä¹‹åï¼Œåˆåšäº†ä»€ä¹ˆï¼š\n\nåˆå¹¶å®Œé€‰é¡¹ä¹‹åï¼ŒVue ç¬¬äºŒéƒ¨åšçš„äº‹æƒ…å°±æ¥äº†ï¼š<span style=\"color: red;\">*åˆå§‹åŒ–å·¥ä½œä¸Vueå®ä¾‹å¯¹è±¡çš„è®¾è®¡*</span>\n\nå‰é¢è®²äº† Vue æ„é€ å‡½æ•°çš„è®¾è®¡ï¼Œå¹¶ä¸”æ•´ç†äº† *VueåŸå‹å±æ€§ä¸æ–¹æ³•* å’Œ *Vueé™æ€å±æ€§ä¸æ–¹æ³•*ï¼Œè€Œ Vue å®ä¾‹å¯¹è±¡å°±æ˜¯é€šè¿‡æ„é€ å‡½æ•°åˆ›é€ å‡ºæ¥çš„ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ Vue å®ä¾‹å¯¹è±¡æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Œä¸‹é¢çš„ä»£ç æ˜¯ `_init()` æ–¹æ³•åˆå¹¶å®Œé€‰é¡¹ä¹‹åçš„ä»£ç ï¼š\n\n```js\n\t/* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      initProxy(vm)\n    } else {\n      vm._renderProxy = vm\n    }\n\n    // expose real self\n\tvm._self = vm\n    initLifecycle(vm)\n    initEvents(vm)\n    callHook(vm, 'beforeCreate')\n    initState(vm)\n    callHook(vm, 'created')\n    initRender(vm)\n```\n\næ ¹æ®ä¸Šé¢çš„ä»£ç ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¼šä¸ºå®ä¾‹æ·»åŠ ä¸¤ä¸ªå±æ€§ï¼Œå¹¶ä¸”å±æ€§å€¼éƒ½ä¸ºå®ä¾‹æœ¬èº«ï¼š\n\n```js\nvm._renderProxy = vm\nvm._self = vm\n```\n\nç„¶åï¼Œè°ƒç”¨äº†å››ä¸ª `init*` æ–¹æ³•åˆ†åˆ«ä¸ºï¼š`initLifecycle`ã€`initEvents`ã€`initState`ã€`initRender`ï¼Œä¸”åœ¨ `initState` å‰ååˆ†åˆ«å›è°ƒäº†ç”Ÿå‘½å‘¨æœŸé’©å­ `beforeCreate` å’Œ `created`ï¼Œè€Œ `initRender` æ˜¯åœ¨ `created` é’©å­æ‰§è¡Œä¹‹åæ‰§è¡Œçš„ï¼Œçœ‹åˆ°è¿™é‡Œï¼Œä¹Ÿå°±æ˜ç™½äº†ä¸ºä»€ä¹ˆ created çš„æ—¶å€™ä¸èƒ½æ“ä½œDOMäº†ã€‚å› ä¸ºè¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰æ¸²æŸ“çœŸæ­£çš„DOMå…ƒç´ åˆ°æ–‡æ¡£ä¸­ã€‚`created` ä»…ä»…ä»£è¡¨æ•°æ®çŠ¶æ€çš„åˆå§‹åŒ–å®Œæˆã€‚\n\næ ¹æ®å››ä¸ª `init*` æ–¹æ³•çš„å¼•ç”¨å…³ç³»æ‰“å¼€å¯¹åº”çš„æ–‡ä»¶æŸ¥çœ‹å¯¹åº”çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å‘ç°ï¼Œè¿™äº›æ–¹æ³•æ˜¯åœ¨å¤„ç†Vueå®ä¾‹å¯¹è±¡ï¼Œä»¥åŠåšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œï¼Œç±»ä¼¼æ•´ç†Vueæ„é€ å‡½æ•°ä¸€æ ·ï¼Œæˆ‘åŒæ ·é’ˆå¯¹Vueå®ä¾‹åšäº†å±æ€§å’Œæ–¹æ³•çš„æ•´ç†ï¼Œå¦‚ä¸‹ï¼š\n\n```js\n// åœ¨ Vue.prototype._init ä¸­æ·»åŠ çš„å±æ€§ \t\t**********************************************************\nthis._uid = uid++\nthis._isVue = true\nthis.$options = {\n    components,\n    directives,\n    filters,\n    _base,\n    el,\n    data: mergedInstanceDataFn()\n}\nthis._renderProxy = this\nthis._self = this\n\n// åœ¨ initLifecycle ä¸­æ·»åŠ çš„å±æ€§\t\t**********************************************************\nthis.$parent = parent\nthis.$root = parent ? parent.$root : this\n \nthis.$children = []\nthis.$refs = {}\n\nthis._watcher = null\nthis._inactive = false\nthis._isMounted = false\nthis._isDestroyed = false\nthis._isBeingDestroyed = false\n\n// åœ¨ initEvents\t ä¸­æ·»åŠ çš„å±æ€§\t \t**********************************************************\nthis._events = {}\nthis._updateListeners = function(){}\n\n// åœ¨ initState ä¸­æ·»åŠ çš„å±æ€§\t\t**********************************************************\nthis._watchers = []\n    // initData\n    this._data\n\n// åœ¨ initRender\t ä¸­æ·»åŠ çš„å±æ€§ \t**********************************************************\nthis.$vnode = null // the placeholder node in parent tree\nthis._vnode = null // the root of the child tree\nthis._staticTrees = null\nthis.$slots\nthis.$scopedSlots\nthis._c\nthis.$createElement\n```\n\nä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªVueå®ä¾‹æ‰€åŒ…å«çš„å±æ€§å’Œæ–¹æ³•ï¼Œé™¤æ­¤ä¹‹å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ `initEvents` ä¸­é™¤äº†æ·»åŠ å±æ€§ä¹‹å¤–ï¼Œå¦‚æœæœ‰ `vm.$options._parentListeners` è¿˜è¦è°ƒç”¨ `vm._updateListeners()` æ–¹æ³•ï¼Œåœ¨ `initState` ä¸­åˆè°ƒç”¨äº†ä¸€äº›å…¶ä»–initæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\n\n```js\nexport function initState (vm: Component) {\n  vm._watchers = []\n  initProps(vm)\n  initMethods(vm)\n  initData(vm)\n  initComputed(vm)\n  initWatch(vm)\n}\n```\n\næœ€ååœ¨ `initRender` ä¸­å¦‚æœæœ‰ `vm.$options.el` è¿˜è¦è°ƒç”¨ `vm.$mount(vm.$options.el)`ï¼Œå¦‚ä¸‹ï¼š\n\n```js\n  if (vm.$options.el) {\n    vm.$mount(vm.$options.el)\n  }\n```\n\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¦‚æœä¸ä¼ é€’ `el` é€‰é¡¹å°±éœ€è¦æ‰‹åŠ¨ mount çš„åŸå› äº†ã€‚\n\né‚£ä¹ˆæˆ‘ä»¬ä¾ç…§æˆ‘ä»¬æœ¬èŠ‚å¼€å¤´çš„çš„ä¾‹å­ï¼Œä»¥åŠåˆå§‹åŒ–çš„å…ˆåé¡ºåºæ¥é€ä¸€çœ‹ä¸€çœ‹éƒ½å‘ç”Ÿäº†ä»€ä¹ˆã€‚æˆ‘ä»¬å°† `initState` ä¸­çš„ `init*` æ–¹æ³•å±•å¼€æ¥çœ‹ï¼Œæ‰§è¡Œé¡ºåºåº”è¯¥æ˜¯è¿™æ ·çš„ï¼ˆä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ‰§è¡Œï¼‰ï¼š\n\n```\ninitLifecycle(vm)\ninitEvents(vm)\ncallHook(vm, 'beforeCreate')\ninitProps(vm)\ninitMethods(vm)\ninitData(vm)\ninitComputed(vm)\ninitWatch(vm)\ncallHook(vm, 'created')\ninitRender(vm)\n```\n\né¦–å…ˆæ˜¯ `initLifecycle`ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨å°±æ˜¯åœ¨å®ä¾‹ä¸Šæ·»åŠ ä¸€äº›å±æ€§ï¼Œç„¶åæ˜¯ `initEvents`ï¼Œç”±äº `vm.$options._parentListeners` çš„å€¼ä¸º `undefined` æ‰€ä»¥ä¹Ÿä»…ä»…æ˜¯åœ¨å®ä¾‹ä¸Šæ·»åŠ å±æ€§ï¼Œ `vm._updateListeners(listeners)` å¹¶ä¸ä¼šæ‰§è¡Œï¼Œç”±äºæˆ‘ä»¬åªä¼ é€’äº† `el` å’Œ `data`ï¼Œæ‰€ä»¥ `initProps`ã€`initMethods`ã€`initComputed`ã€`initWatch` è¿™å››ä¸ªæ–¹æ³•ä»€ä¹ˆéƒ½ä¸ä¼šåšï¼Œåªæœ‰ `initData` ä¼šæ‰§è¡Œã€‚æœ€åæ˜¯ `initRender`ï¼Œé™¤äº†åœ¨å®ä¾‹ä¸Šæ·»åŠ ä¸€äº›å±æ€§å¤–ï¼Œç”±äºæˆ‘ä»¬ä¼ é€’äº† `el` é€‰é¡¹ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œ `vm.$mount(vm.$options.el)`ã€‚\n\nç»¼ä¸Šæ‰€è¿°ï¼šæŒ‰ç…§æˆ‘ä»¬çš„ä¾‹å­é‚£æ ·å†™ï¼Œåˆå§‹åŒ–å·¥ä½œåªåŒ…å«ä¸¤ä¸ªä¸»è¦å†…å®¹å³ï¼š`initData` å’Œ `initRender`ã€‚\n\n## <span style=\"color: #ff6600;\">äº”ã€é€šè¿‡`initData`çœ‹Vueçš„æ•°æ®å“åº”ç³»ç»Ÿ</span>\n\nVueçš„æ•°æ®å“åº”ç³»ç»ŸåŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š`Observer`ã€`Dep`ã€`Watcher`ã€‚å…³äºæ•°æ®å“åº”ç³»ç»Ÿçš„å†…å®¹çœŸçš„å·²ç»è¢«æ–‡ç« è®²çƒ‚äº†ï¼Œæ‰€ä»¥æˆ‘å°±ç®€å•çš„è¯´ä¸€ä¸‹ï¼ŒåŠ›æ±‚å¤§å®¶èƒ½ç†è§£å°±okï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹ä¸€ä¸‹ `initData` ä¸­çš„ä»£ç ï¼š\n\n```\nfunction initData (vm: Component) {\n  let data = vm.$options.data\n  data = vm._data = typeof data === 'function'\n    ? data.call(vm)\n    : data || {}\n  if (!isPlainObject(data)) {\n    data = {}\n    process.env.NODE_ENV !== 'production' && warn(\n      'data functions should return an object:\\n' +\n      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\n      vm\n    )\n  }\n  // proxy data on instance\n  const keys = Object.keys(data)\n  const props = vm.$options.props\n  let i = keys.length\n  while (i--) {\n    if (props && hasOwn(props, keys[i])) {\n      process.env.NODE_ENV !== 'production' && warn(\n        `The data property \"${keys[i]}\" is already declared as a prop. ` +\n        `Use prop default value instead.`,\n        vm\n      )\n    } else {\n      proxy(vm, keys[i])\n    }\n  }\n  // observe data\n  observe(data)\n  data.__ob__ && data.__ob__.vmCount++\n}\n```\n\né¦–å…ˆï¼Œå…ˆæ‹¿åˆ° data æ•°æ®ï¼š`let data = vm.$options.data`ï¼Œå¤§å®¶è¿˜è®°å¾—æ­¤æ—¶ `vm.$options.data` çš„å€¼åº”è¯¥æ˜¯é€šè¿‡ `mergeOptions` åˆå¹¶å¤„ç†åçš„ `mergedInstanceDataFn` å‡½æ•°å—ï¼Ÿæ‰€ä»¥åœ¨å¾—åˆ° data åï¼Œå®ƒåˆåˆ¤æ–­äº† data çš„æ•°æ®ç±»å‹æ˜¯ä¸æ˜¯ 'function'ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯ï¼šdata è¿˜æ˜¯æˆ‘ä»¬ä¼ å…¥çš„æ•°æ®é€‰é¡¹çš„ dataï¼Œå³ï¼š\n\n```\ndata: {\n\ta: 1,\n\tb: [1, 2, 3]\n}\n```\n\nç„¶ååœ¨å®ä¾‹å¯¹è±¡ä¸Šå®šä¹‰ `_data` å±æ€§ï¼Œè¯¥å±æ€§ä¸ `data` æ˜¯ç›¸åŒçš„å¼•ç”¨ã€‚\n\nç„¶åæ˜¯ä¸€ä¸ª `while` å¾ªç¯ï¼Œå¾ªç¯çš„ç›®çš„æ˜¯åœ¨å®ä¾‹å¯¹è±¡ä¸Šå¯¹æ•°æ®è¿›è¡Œä»£ç†ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½é€šè¿‡ `this.a` æ¥è®¿é—® `data.a` äº†ï¼Œä»£ç çš„å¤„ç†æ˜¯åœ¨ `proxy` å‡½æ•°ä¸­ï¼Œè¯¥å‡½æ•°éå¸¸ç®€å•ï¼Œä»…ä»…æ˜¯åœ¨å®ä¾‹å¯¹è±¡ä¸Šè®¾ç½®ä¸ `data` å±æ€§åŒåçš„è®¿é—®å™¨å±æ€§ï¼Œç„¶åä½¿ç”¨ `_data` åšæ•°æ®åŠ«æŒï¼Œå¦‚ä¸‹ï¼š\n\n```\nfunction proxy (vm: Component, key: string) {\n  if (!isReserved(key)) {\n    Object.defineProperty(vm, key, {\n      configurable: true,\n      enumerable: true,\n      get: function proxyGetter () {\n        return vm._data[key]\n      },\n      set: function proxySetter (val) {\n        vm._data[key] = val\n      }\n    })\n  }\n}\n```\n\nåšå®Œæ•°æ®çš„ä»£ç†ï¼Œå°±æ­£å¼è¿›å…¥å“åº”ç³»ç»Ÿï¼Œ\n\n```\nobserve(data)\n```\n\næˆ‘ä»¬è¯´è¿‡ï¼Œæ•°æ®å“åº”ç³»ç»Ÿä¸»è¦åŒ…å«ä¸‰éƒ¨åˆ†ï¼š`Observer`ã€`Dep`ã€`Watcher`ï¼Œä»£ç åˆ†åˆ«å­˜æ”¾åœ¨ï¼š`observer/index.js`ã€`observer/dep.js` ä»¥åŠ `observer/watcher.js` æ–‡ä»¶ä¸­ï¼Œè¿™å›æˆ‘ä»¬æ¢ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬å…ˆä¸çœ‹å…¶æºç ï¼Œå¤§å®¶å…ˆè·Ÿç€æˆ‘çš„æ€è·¯æ¥æ€è€ƒï¼Œæœ€åå›å¤´å†å»çœ‹ä»£ç ï¼Œä½ ä¼šæœ‰ä¸€ç§ï¼šâ€å¥¥ï¼Œä¸è¿‡å¦‚æ­¤â€œçš„æ„Ÿè§‰ã€‚\n\nå‡å¦‚ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹ä»£ç ï¼š\n\n```js\nvar data = {\n    a: 1,\n    b: {\n        c: 2\n    }\n}\n\nobserver(data)\n\nnew Watch('a', () => {\n    alert(9)\n})\nnew Watch('a', () => {\n    alert(90)\n})\nnew Watch('b.c', () => {\n    alert(80)\n})\n```\n\nè¿™æ®µä»£ç ç›®çš„æ˜¯ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªæ•°æ®å¯¹è±¡ `data`ï¼Œç„¶åé€šè¿‡ observer å¯¹å…¶è¿›è¡Œè§‚æµ‹ï¼Œä¹‹åå®šä¹‰äº†ä¸‰ä¸ªè§‚å¯Ÿè€…ï¼Œå½“æ•°æ®æœ‰å˜åŒ–æ—¶ï¼Œæ‰§è¡Œç›¸åº”çš„æ–¹æ³•ï¼Œè¿™ä¸ªåŠŸèƒ½ä½¿ç”¨Vueçš„å®ç°åŸæ¥è¦å¦‚ä½•å»å®ç°ï¼Ÿå…¶å®å°±æ˜¯åœ¨é—® `observer` æ€ä¹ˆå†™ï¼Ÿ`Watch` æ„é€ å‡½æ•°åˆæ€ä¹ˆå†™ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬é€ä¸€å®ç°ã€‚\n\né¦–å…ˆï¼Œobserver çš„ä½œç”¨æ˜¯ï¼šå°†æ•°æ®å¯¹è±¡dataçš„å±æ€§è½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§ï¼š\n\n```\nclass Observer {\n    constructor (data) {\n        this.walk(data)\n    }\n    walk (data) {\n        // éå† data å¯¹è±¡å±æ€§ï¼Œè°ƒç”¨ defineReactive æ–¹æ³•\n        let keys = Object.keys(data)\n        for(let i = 0; i < keys.length; i++){\n            defineReactive(data, keys[i], data[keys[i]])\n        }\n    }\n}\n\n// defineReactiveæ–¹æ³•ä»…ä»…å°†dataçš„å±æ€§è½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§\nfunction defineReactive (data, key, val) {\n\t// é€’å½’è§‚æµ‹å­å±æ€§\n    observer(val)\n\n    Object.defineProperty(data, key, {\n        enumerable: true,\n        configurable: true,\n        get: function () {\n            return val\n        },\n        set: function (newVal) {\n            if(val === newVal){\n                return\n            }\n            // å¯¹æ–°å€¼è¿›è¡Œè§‚æµ‹\n            observer(newVal)\n        }\n    })\n}\n\n// observer æ–¹æ³•é¦–å…ˆåˆ¤æ–­dataæ˜¯ä¸æ˜¯çº¯JavaScriptå¯¹è±¡ï¼Œå¦‚æœæ˜¯ï¼Œè°ƒç”¨ Observer ç±»è¿›è¡Œè§‚æµ‹\nfunction observer (data) {\n    if(Object.prototype.toString.call(data) !== '[object Object]') {\n        return\n    }\n    new Observer(data)\n}\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº† observer æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ£€æµ‹äº†æ•°æ®dataæ˜¯ä¸æ˜¯çº¯JavaScriptå¯¹è±¡ï¼Œå¦‚æœæ˜¯å°±è°ƒç”¨ `Observer` ç±»ï¼Œå¹¶å°† `data` ä½œä¸ºå‚æ•°é€ä¼ ã€‚åœ¨ `Observer` ç±»ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `walk` æ–¹æ³•å¯¹æ•°æ®dataçš„å±æ€§å¾ªç¯è°ƒç”¨ `defineReactive` æ–¹æ³•ï¼Œ`defineReactive` æ–¹æ³•å¾ˆç®€å•ï¼Œä»…ä»…æ˜¯å°†æ•°æ®dataçš„å±æ€§è½¬ä¸ºè®¿é—®å™¨å±æ€§ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œé€’å½’è§‚æµ‹ï¼Œå¦åˆ™åªèƒ½è§‚æµ‹æ•°æ®dataçš„ç›´å±å­å±æ€§ã€‚è¿™æ ·æˆ‘ä»¬çš„ç¬¬ä¸€æ­¥å·¥ä½œå°±å®Œæˆäº†ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹æˆ–è€…è·å–dataå±æ€§å€¼çš„æ—¶å€™ï¼Œé€šè¿‡ `get` å’Œ `set` å³èƒ½è·å–åˆ°é€šçŸ¥ã€‚\n\næˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ï¼Œæ¥çœ‹ä¸€ä¸‹ `Watch`ï¼š\n\n```\nnew Watch('a', () => {\n    alert(9)\n})\n```\n\nç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œ`Watch` è¦æ€ä¹ˆå’Œ `observer` å…³è”ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿæˆ‘ä»¬çœ‹çœ‹ `Watch` å®ƒçŸ¥é“äº›ä»€ä¹ˆï¼Œé€šè¿‡ä¸Šé¢è°ƒç”¨ `Watch` çš„æ–¹å¼ï¼Œä¼ é€’ç»™ `Watch` ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ 'a' æˆ‘ä»¬å¯ä»¥ç§°å…¶ä¸ºè¡¨è¾¾å¼ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å›è°ƒå‡½æ•°ã€‚æ‰€ä»¥æˆ‘ä»¬ç›®å‰åªèƒ½å†™å‡ºè¿™æ ·çš„ä»£ç ï¼š\n\n```\nclass Watch {\n    constructor (exp, fn) {\n        this.exp = exp\n        this.fn = fn\n    }\n}\n```\n\né‚£ä¹ˆè¦æ€ä¹ˆå…³è”å‘¢ï¼Œå¤§å®¶çœ‹ä¸‹é¢çš„ä»£ç ä¼šå‘ç”Ÿä»€ä¹ˆï¼š\n\n```\nclass Watch {\n    constructor (exp, fn) {\n        this.exp = exp\n        this.fn = fn\n        data[exp]\n    }\n}\n```\n\nå¤šäº†ä¸€å¥ `data[exp]`ï¼Œè¿™å¥è¯æ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯åœ¨è·å– `data` ä¸‹æŸä¸ªå±æ€§çš„å€¼ï¼Œæ¯”å¦‚ exp ä¸º 'a' çš„è¯ï¼Œé‚£ä¹ˆ `data[exp]` å°±ç›¸å½“äºåœ¨è·å– `data.a` çš„å€¼ï¼Œé‚£è¿™ä¼šæ”¾ç”Ÿä»€ä¹ˆï¼Ÿå¤§å®¶ä¸è¦å¿˜äº†ï¼Œæ­¤æ—¶æ•°æ® `data` ä¸‹çš„å±æ€§å·²ç»æ˜¯è®¿é—®å™¨å±æ€§äº†ï¼Œæ‰€ä»¥è¿™ä¹ˆåšçš„ç»“æœä¼šç›´æ¥è§¦å‘å¯¹åº”å±æ€§çš„ `get` å‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å°±æˆåŠŸçš„å’Œ `observer` äº§ç”Ÿäº†å…³è”ï¼Œä½†è¿™æ ·è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜æ˜¯æ²¡æœ‰è¾¾åˆ°ç›®çš„ï¼Œä¸è¿‡æˆ‘ä»¬å·²ç»æ— é™æ¥è¿‘äº†ï¼Œæˆ‘ä»¬ç»§ç»­æ€è€ƒçœ‹ä¸€ä¸‹å¯ä¸å¯ä»¥è¿™æ ·ï¼š\n\n> æ—¢ç„¶åœ¨ `Watch` ä¸­å¯¹è¡¨è¾¾å¼æ±‚å€¼ï¼Œèƒ½å¤Ÿè§¦å‘ `observer` çš„ `get`ï¼Œé‚£ä¹ˆå¯ä¸å¯ä»¥åœ¨ `get` ä¸­æ”¶é›† `Watch` ä¸­å‡½æ•°å‘¢ï¼Ÿ\n\nç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ `Dep` å‡ºåœºäº†ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¾èµ–æ”¶é›†å™¨ã€‚æˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼š`data` ä¸‹çš„æ¯ä¸€ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ `Dep` å¯¹è±¡ï¼Œåœ¨ `get` ä¸­æ”¶é›†ä»…é’ˆå¯¹è¯¥å±æ€§çš„ä¾èµ–ï¼Œç„¶ååœ¨ `set` æ–¹æ³•ä¸­è§¦å‘æ‰€æœ‰æ”¶é›†çš„ä¾èµ–ï¼Œè¿™æ ·å°±æå®šäº†ï¼Œçœ‹å¦‚ä¸‹ä»£ç ï¼š\n\n```\nclass Dep {\n    constructor () {\n        this.subs = []\n    }\n    addSub () {\n        this.subs.push(Dep.target)\n    }\n    notify () {\n        for(let i = 0; i < this.subs.length; i++){\n            this.subs[i].fn()\n        }\n    }\n}\nDep.target = null\nfunction pushTarget(watch){\n    Dep.target = watch\n}\n\nclass Watch {\n    constructor (exp, fn) {\n        this.exp = exp\n        this.fn = fn\n        pushTarget(this)\n        data[exp]\n    }\n}\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨ `Watch` ä¸­å¢åŠ äº† `pushTarget(this)`ï¼Œå¯ä»¥å‘ç°ï¼Œè¿™å¥ä»£ç çš„ä½œç”¨æ˜¯å°† `Dep.target` çš„å€¼è®¾ç½®ä¸ºè¯¥Watchå¯¹è±¡ã€‚åœ¨ `pushTarget` ä¹‹åæˆ‘ä»¬æ‰å¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œæ¥ç€ï¼Œæˆ‘ä»¬ä¿®æ”¹ `defineReactive` ä»£ç å¦‚ä¸‹\n\n```\nfunction defineReactive (data, key, val) {\n    observer(val)\n    let dep = new Dep()\t\t// æ–°å¢\n    Object.defineProperty(data, key, {\n        enumerable: true,\n        configurable: true,\n        get: function () {\n            dep.addSub()\t// æ–°å¢\n            return val\n        },\n        set: function (newVal) {\n            if(val === newVal){\n                return\n            }\n            observer(newVal)\n            dep.notify()\t// æ–°å¢\n        }\n    })\n}\n```\n\nå¦‚æ ‡æ³¨ï¼Œæ–°å¢äº†ä¸‰å¥ä»£ç ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œ`Watch` ä¸­å¯¹è¡¨è¾¾å¼æ±‚å€¼ä¼šè§¦å‘ `get` æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨ `get` æ–¹æ³•ä¸­è°ƒç”¨äº† `dep.addSub`ï¼Œä¹Ÿå°±æ‰§è¡Œäº†è¿™å¥ä»£ç ï¼š`this.subs.push(Dep.target)`ï¼Œç”±äºåœ¨è¿™å¥ä»£ç æ‰§è¡Œä¹‹å‰ï¼Œ`Dep.target` çš„å€¼å·²ç»è¢«è®¾ç½®ä¸ºä¸€ä¸ª `Watch` å¯¹è±¡äº†ï¼Œæ‰€ä»¥æœ€ç»ˆç»“æœå°±æ˜¯æ”¶é›†äº†ä¸€ä¸ª `Watch` å¯¹è±¡ï¼Œç„¶ååœ¨ `set` æ–¹æ³•ä¸­æˆ‘ä»¬è°ƒç”¨äº† `dep.notify`ï¼Œæ‰€ä»¥å½“dataå±æ€§å€¼å˜åŒ–çš„æ—¶å€™ï¼Œå°±ä¼šé€šè¿‡ `dep.notify` å¾ªç¯è°ƒç”¨æ‰€æœ‰æ”¶é›†çš„Watchå¯¹è±¡ä¸­çš„å›è°ƒå‡½æ•°ï¼š\n\n```\nnotify () {\n    for(let i = 0; i < this.subs.length; i++){\n        this.subs[i].fn()\n    }\n}\n```\n\nè¿™æ · `observer`ã€`Dep`ã€`Watch` ä¸‰è€…å°±è”ç³»æˆä¸ºä¸€ä¸ªæœ‰æœºçš„æ•´ä½“ï¼Œå®ç°äº†æˆ‘ä»¬æœ€åˆçš„ç›®æ ‡ï¼Œå®Œæ•´çš„ä»£ç å¯ä»¥æˆ³è¿™é‡Œï¼š[observer-dep-watch](https://github.com/HcySunYang/observer-dep-watch)ã€‚è¿™é‡Œè¿˜ç»™å¤§å®¶æŒ–äº†ä¸ªå‘ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å¤„ç†å¯¹æ•°ç»„çš„è§‚æµ‹ï¼Œç”±äºæ¯”è¾ƒå¤æ‚å¹¶ä¸”è¿™åˆä¸æ˜¯æˆ‘ä»¬è®¨è®ºçš„é‡ç‚¹ï¼Œå¦‚æœå¤§å®¶æƒ³äº†è§£å¯ä»¥æˆ³æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š[JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–](http://hcysun.me/2016/04/28/JavaScript%E5%AE%9E%E7%8E%B0MVVM%E4%B9%8B%E6%88%91%E5%B0%B1%E6%98%AF%E6%83%B3%E7%9B%91%E6%B5%8B%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%98%E5%8C%96/)ï¼Œå¦å¤–ï¼Œåœ¨ Watch ä¸­å¯¹è¡¨è¾¾å¼æ±‚å€¼çš„æ—¶å€™ä¹Ÿåªåšäº†ç›´æ¥å­å±æ€§çš„æ±‚å€¼ï¼Œæ‰€ä»¥å¦‚æœ exp çš„å€¼ä¸º 'a.b' çš„æ—¶å€™ï¼Œå°±ä¸å¯ä»¥ç”¨äº†ï¼ŒVueçš„åšæ³•æ˜¯ä½¿ç”¨ `.` åˆ†å‰²è¡¨è¾¾å¼å­—ç¬¦ä¸²ä¸ºæ•°ç»„ï¼Œç„¶åéå†ä¸€ä¸‹å¯¹å…¶è¿›è¡Œæ±‚å€¼ï¼Œå¤§å®¶å¯ä»¥æŸ¥çœ‹å…¶æºç ã€‚å¦‚ä¸‹ï¼š\n\n```\n/**\n * Parse simple path.\n */\nconst bailRE = /[^\\w.$]/\nexport function parsePath (path: string): any {\n  if (bailRE.test(path)) {\n    return\n  } else {\n    const segments = path.split('.')\n    return function (obj) {\n      for (let i = 0; i < segments.length; i++) {\n        if (!obj) return\n        obj = obj[segments[i]]\n      }\n      return obj\n    }\n  }\n}\n```\n\nVue çš„æ±‚å€¼ä»£ç æ˜¯åœ¨ `src/core/util/lang.js` æ–‡ä»¶ä¸­ `parsePath` å‡½æ•°ä¸­å®ç°çš„ã€‚æ€»ç»“ä¸€ä¸‹Vueçš„ä¾èµ–æ”¶é›†è¿‡ç¨‹åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n\n![Vueçš„ä¾èµ–æ”¶é›†è¿‡ç¨‹](http://7xlolm.com1.z0.glb.clouddn.com/vueimgdep.png)\n\nå®é™…ä¸Šï¼ŒVueå¹¶æ²¡æœ‰ç›´æ¥åœ¨ `get` ä¸­è°ƒç”¨ `addSub`ï¼Œè€Œæ˜¯è°ƒç”¨çš„ `dep.depend`ï¼Œç›®çš„æ˜¯å°†å½“å‰çš„ dep å¯¹è±¡æ”¶é›†åˆ° watch å¯¹è±¡ä¸­ï¼Œå¦‚æœè¦å®Œæ•´çš„æµç¨‹ï¼Œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼šï¼ˆå¤§å®¶æ³¨æ„æ•°æ®çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æ‹¥æœ‰è‡ªå·±çš„ `dep` å¯¹è±¡å’Œ `get` æ–¹æ³•ã€‚ï¼‰\n\n![Vueå®Œæ•´çš„æ”¶é›†ä¾èµ–çš„æµç¨‹](http://7xlolm.com1.z0.glb.clouddn.com/all.png)\n\nè¿™æ · Vue å°±å»ºç«‹äº†ä¸€å¥—æ•°æ®å“åº”ç³»ç»Ÿï¼Œä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼ŒæŒ‰ç…§æˆ‘ä»¬çš„ä¾‹å­é‚£æ ·å†™ï¼Œåˆå§‹åŒ–å·¥ä½œåªåŒ…å«ä¸¤ä¸ªä¸»è¦å†…å®¹å³ï¼š`initData` å’Œ `initRender`ã€‚ç°åœ¨ `initData` æˆ‘ä»¬åˆ†æå®Œäº†ï¼Œæ¥ä¸‹æ¥çœ‹ä¸€çœ‹ `initRender`\n\n## <span style=\"color: #ff6600;\">å…­ã€é€šè¿‡`initRender`çœ‹Vueçš„ render(æ¸²æŸ“) ä¸ re-render(é‡æ–°æ¸²æŸ“)</span>\n\nåœ¨ `initRender` æ–¹æ³•ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä¾‹å­ä¸­ä¼ é€’äº† `el` é€‰é¡¹ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä»£ç ä¼šæ‰§è¡Œï¼š\n\n```\n  if (vm.$options.el) {\n    vm.$mount(vm.$options.el)\n  }\n```\n\nè¿™é‡Œï¼Œè°ƒç”¨äº† `$mount` æ–¹æ³•ï¼Œåœ¨è¿˜åŸVueæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ•´ç†è¿‡æ‰€æœ‰çš„æ–¹æ³•ï¼Œå…¶ä¸­ `$mount` æ–¹æ³•åœ¨ä¸¤ä¸ªåœ°æ–¹å‡ºç°è¿‡ï¼š\n\n1ã€åœ¨ `web-runtime.js` æ–‡ä»¶ä¸­ï¼š\n\n```\nVue.prototype.$mount = function (\n  el?: string | Element,\n  hydrating?: boolean\n): Component {\n  el = el && inBrowser ? query(el) : undefined\n  return this._mount(el, hydrating)\n}\n```\n\nå®ƒçš„ä½œç”¨æ˜¯é€šè¿‡ `el` è·å–ç›¸åº”çš„DOMå…ƒç´ ï¼Œç„¶åè°ƒç”¨ `lifecycle.js` æ–‡ä»¶ä¸­çš„ `_mount` æ–¹æ³•ã€‚\n\n2ã€åœ¨ `web-runtime-with-compiler.js` æ–‡ä»¶ä¸­ï¼š\n\n```\n// ç¼“å­˜äº†æ¥è‡ª web-runtime.js çš„ $mount æ–¹æ³•\nconst mount = Vue.prototype.$mount\n// é‡å†™ $mount æ–¹æ³•\nVue.prototype.$mount = function (\n  el?: string | Element,\n  hydrating?: boolean\n): Component {\n  // æ ¹æ® el è·å–ç›¸åº”çš„DOMå…ƒç´ \n  el = el && query(el)\n  // ä¸å…è®¸ä½ å°† el æŒ‚è½½åˆ° html æ ‡ç­¾æˆ–è€… body æ ‡ç­¾\n  if (el === document.body || el === document.documentElement) {\n    process.env.NODE_ENV !== 'production' && warn(\n      `Do not mount Vue to <html> or <body> - mount to normal elements instead.`\n    )\n    return this\n  }\n\n  const options = this.$options\n  // å¦‚æœæˆ‘ä»¬æ²¡æœ‰å†™ render é€‰é¡¹ï¼Œé‚£ä¹ˆå°±å°è¯•å°† template æˆ–è€… el è½¬åŒ–ä¸º render å‡½æ•°\n  if (!options.render) {\n    let template = options.template\n    if (template) {\n      if (typeof template === 'string') {\n        if (template.charAt(0) === '#') {\n          template = idToTemplate(template)\n          /* istanbul ignore if */\n          if (process.env.NODE_ENV !== 'production' && !template) {\n            warn(\n              `Template element not found or is empty: ${options.template}`,\n              this\n            )\n          }\n        }\n      } else if (template.nodeType) {\n        template = template.innerHTML\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('invalid template option:' + template, this)\n        }\n        return this\n      }\n    } else if (el) {\n      template = getOuterHTML(el)\n    }\n    if (template) {\n      const { render, staticRenderFns } = compileToFunctions(template, {\n        warn,\n        shouldDecodeNewlines,\n        delimiters: options.delimiters\n      }, this)\n      options.render = render\n      options.staticRenderFns = staticRenderFns\n    }\n  }\n  // è°ƒç”¨å·²ç»ç¼“å­˜ä¸‹æ¥çš„ web-runtime.js æ–‡ä»¶ä¸­çš„ $mount æ–¹æ³•\n  return mount.call(this, el, hydrating)\n}\n```\n\nåˆ†æä¸€ä¸‹å¯çŸ¥ `web-runtime-with-compiler.js` çš„é€»è¾‘å¦‚ä¸‹ï¼š\n\n1ã€ç¼“å­˜æ¥è‡ª `web-runtime.js` æ–‡ä»¶çš„ `$mount` æ–¹æ³•\n\n2ã€åˆ¤æ–­æœ‰æ²¡æœ‰ä¼ é€’ `render` é€‰é¡¹ï¼Œå¦‚æœæœ‰ç›´æ¥è°ƒç”¨æ¥è‡ª `web-runtime.js` æ–‡ä»¶çš„ $mount æ–¹æ³•\n\n3ã€å¦‚æœæ²¡æœ‰ä¼ é€’ `render` é€‰é¡¹ï¼Œé‚£ä¹ˆæŸ¥çœ‹æœ‰æ²¡æœ‰ `template` é€‰é¡¹ï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ `compileToFunctions` å‡½æ•°æ ¹æ®å…¶å†…å®¹ç¼–è¯‘æˆ `render` å‡½æ•°\n\n4ã€å¦‚æœæ²¡æœ‰ `template` é€‰é¡¹ï¼Œé‚£ä¹ˆæŸ¥çœ‹æœ‰æ²¡æœ‰ `el` é€‰é¡¹ï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ `compileToFunctions` å‡½æ•°å°†å…¶å†…å®¹(template = getOuterHTML(el))ç¼–è¯‘æˆ `render` å‡½æ•°\n\n5ã€å°†ç¼–è¯‘æˆçš„ `render` å‡½æ•°æŒ‚è½½åˆ° `this.$options` å±æ€§ä¸‹ï¼Œå¹¶è°ƒç”¨ç¼“å­˜ä¸‹æ¥çš„ `web-runtime.js` æ–‡ä»¶ä¸­çš„ $mount æ–¹æ³•\n\nç®€å•çš„ç”¨ä¸€å¼ å›¾è¡¨ç¤º `mount` æ–¹æ³•çš„è°ƒç”¨å…³ç³»ï¼Œä»ä¸Šè‡³ä¸‹è°ƒç”¨ï¼š\n\n![mountè°ƒç”¨å…³ç³»](http://7xlolm.com1.z0.glb.clouddn.com/vueimgmount.png)\n\nä¸è¿‡ä¸ç®¡æ€æ ·ï¼Œæˆ‘ä»¬å‘ç°è¿™äº›æ­¥éª¤çš„æœ€ç»ˆç›®çš„æ˜¯ç”Ÿæˆ `render` å‡½æ•°ï¼Œç„¶åå†è°ƒç”¨ `lifecycle.js` æ–‡ä»¶ä¸­çš„ `_mount` æ–¹æ³•ï¼Œæˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªæ–¹æ³•åšäº†ä»€ä¹ˆäº‹æƒ…ï¼ŒæŸ¥çœ‹ `_mount` æ–¹æ³•çš„ä»£ç ï¼Œè¿™æ˜¯ç®€åŒ–è¿‡å¾—ï¼š\n\n```\n  Vue.prototype._mount = function (\n    el?: Element | void,\n    hydrating?: boolean\n  ): Component {\n    const vm: Component = this\n\n    // åœ¨Vueå®ä¾‹å¯¹è±¡ä¸Šæ·»åŠ  $el å±æ€§ï¼ŒæŒ‡å‘æŒ‚è½½ç‚¹å…ƒç´ \n    vm.$el = el\n\n    // è§¦å‘ beforeMount ç”Ÿå‘½å‘¨æœŸé’©å­\n    callHook(vm, 'beforeMount')\n\n    vm._watcher = new Watcher(vm, () => {\n      vm._update(vm._render(), hydrating)\n    }, noop)\n\n    // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡mountåˆ™è§¦å‘ mounted ç”Ÿå‘½å‘¨æœŸé’©å­\n    if (vm.$vnode == null) {\n      vm._isMounted = true\n      callHook(vm, 'mounted')\n    }\n    return vm\n  }\n```\n\nä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œè¯¥æ³¨é‡Šçš„éƒ½æ³¨é‡Šäº†ï¼Œå”¯ä¸€éœ€è¦çœ‹çš„å°±æ˜¯è¿™æ®µä»£ç ï¼š\n\n```\nvm._watcher = new Watcher(vm, () => {\n  vm._update(vm._render(), hydrating)\n}, noop)\n```\n\nçœ‹ä¸Šå»å¾ˆçœ¼ç†Ÿæœ‰æ²¡æœ‰ï¼Ÿæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨Vueéƒ½æ˜¯è¿™æ ·ä½¿ç”¨ watchçš„ï¼š\n\n```\nthis.$watch('a', (newVal, oldVal) => {\n\t\n})\n// æˆ–è€…\nthis.$watch(function(){\n\treturn this.a + this.b\n}, (newVal, oldVal) => {\n\t\n})\n```\n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ è¡¨è¾¾å¼æˆ–è€…å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å¯é€‰çš„é€‰é¡¹ã€‚åŸç†æ˜¯ `Watch` å†…éƒ¨å¯¹è¡¨è¾¾å¼æ±‚å€¼æˆ–è€…å¯¹å‡½æ•°æ±‚å€¼ä»è€Œè§¦å‘æ•°æ®çš„ `get` æ–¹æ³•æ”¶é›†ä¾èµ–ã€‚å¯æ˜¯ `_mount` æ–¹æ³•ä¸­ä½¿ç”¨ `Watcher` çš„æ—¶å€™ç¬¬ä¸€ä¸ªå‚æ•° `vm` æ˜¯ä»€ä¹ˆé¬¼ã€‚æˆ‘ä»¬ä¸å¦¨å»çœ‹çœ‹æºç ä¸­ `$watch` å‡½æ•°æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæ ¹æ®ä¹‹å‰è¿˜åŸVueæ„é€ å‡½æ•°ä¸­æ‰€æ•´ç†çš„å†…å®¹å¯çŸ¥ï¼š`$warch` æ–¹æ³•æ˜¯åœ¨ `src/core/instance/state.js` æ–‡ä»¶ä¸­çš„ `stateMixin` æ–¹æ³•ä¸­å®šä¹‰çš„ï¼Œæºç å¦‚ä¸‹ï¼š\n\n```\n  Vue.prototype.$watch = function (\n    expOrFn: string | Function,\n    cb: Function,\n    options?: Object\n  ): Function {\n    const vm: Component = this\n    options = options || {}\n    options.user = true\n    const watcher = new Watcher(vm, expOrFn, cb, options)\n    if (options.immediate) {\n      cb.call(vm, watcher.value)\n    }\n    return function unwatchFn () {\n      watcher.teardown()\n    }\n  }\n```\n\næˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ`$warch` å…¶å®æ˜¯å¯¹ `Watcher` çš„ä¸€ä¸ªå°è£…ï¼Œå†…éƒ¨çš„ `Watcher` çš„ç¬¬ä¸€ä¸ªå‚æ•°å®é™…ä¸Šä¹Ÿæ˜¯ `vm` å³ï¼šVueå®ä¾‹å¯¹è±¡ï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬å¯ä»¥åœ¨ `Watcher` çš„æºç ä¸­å¾—åˆ°éªŒè¯ï¼Œä»£å¼€ `observer/watcher.js` æ–‡ä»¶æŸ¥çœ‹ï¼š\n\n```js\nexport default class Watcher {\n\n  constructor (\n    vm: Component,\n    expOrFn: string | Function,\n    cb: Function,\n    options?: Object = {}\n  ) {\n    \n  }\n}\n```\n\nå¯ä»¥å‘ç°çœŸæ­£çš„ `Watcher` ç¬¬ä¸€ä¸ªå‚æ•°å®é™…ä¸Šå°±æ˜¯ `vm`ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¡¨è¾¾å¼æˆ–è€…å‡½æ•°ï¼Œç„¶åä»¥æ­¤ç±»æ¨ï¼Œæ‰€ä»¥ç°åœ¨å†æ¥çœ‹ `_mount` ä¸­çš„è¿™æ®µä»£ç ï¼š\n\n```\nvm._watcher = new Watcher(vm, () => {\n  vm._update(vm._render(), hydrating)\n}, noop)\n```\n\nå¿½ç•¥ç¬¬ä¸€ä¸ªå‚æ•° `vm`ï¼Œä¹Ÿå°±è¯´ï¼Œ`Watcher` å†…éƒ¨åº”è¯¥å¯¹ç¬¬äºŒä¸ªå‚æ•°æ±‚å€¼ï¼Œä¹Ÿå°±æ˜¯è¿è¡Œè¿™ä¸ªå‡½æ•°ï¼š\n\n```\n() => {\n  vm._update(vm._render(), hydrating)\n}\n```\n\næ‰€ä»¥ `vm._render()` å‡½æ•°è¢«ç¬¬ä¸€ä¸ªæ‰§è¡Œï¼Œè¯¥å‡½æ•°åœ¨ `src/core/instance/render.js` ä¸­ï¼Œè¯¥æ–¹æ³•ä¸­çš„ä»£ç å¾ˆå¤šï¼Œä¸‹é¢æ˜¯ç®€åŒ–è¿‡çš„ï¼š\n\n```\n  Vue.prototype._render = function (): VNode {\n    const vm: Component = this\n    // è§£æ„å‡º $options ä¸­çš„ render å‡½æ•°\n    const {\n      render,\n      staticRenderFns,\n      _parentVnode\n    } = vm.$options\n    ...\n\n    let vnode\n    try {\n      // è¿è¡Œ render å‡½æ•°\n      vnode = render.call(vm._renderProxy, vm.$createElement)\n    } catch (e) {\n      ...\n    }\n    \n    // set parent\n    vnode.parent = _parentVnode\n    return vnode\n  }\n```\n\n`_render` æ–¹æ³•é¦–å…ˆä» `vm.$options` ä¸­è§£æ„å‡º `render` å‡½æ•°ï¼Œå¤§å®¶åº”è¯¥è®°å¾—ï¼š`vm.$options.render` æ–¹æ³•æ˜¯åœ¨ `web-runtime-with-compiler.js` æ–‡ä»¶ä¸­é€šè¿‡ `compileToFunctions` æ–¹æ³•å°† `template` æˆ– `el` ç¼–è¯‘è€Œæ¥çš„ã€‚è§£æ„å‡º `render` å‡½æ•°åï¼Œæ¥ä¸‹æ¥ä¾¿æ‰§è¡Œäº†è¯¥æ–¹æ³•ï¼š\n\n```\nvnode = render.call(vm._renderProxy, vm.$createElement)\n```\n\nå…¶ä¸­ä½¿ç”¨ `call` æŒ‡å®šäº† `render` å‡½æ•°çš„ä½œç”¨åŸŸç¯å¢ƒä¸º `vm._renderProxy`ï¼Œè¿™ä¸ªå±æ€§åœ¨æˆ‘ä»¬æ•´ç†å®ä¾‹å¯¹è±¡çš„æ—¶å€™çŸ¥é“ï¼Œä»–æ˜¯åœ¨ `Vue.prototype._init` æ–¹æ³•ä¸­è¢«æ·»åŠ çš„ï¼Œå³ï¼š`vm._renderProxy = vm`ï¼Œå…¶å®å°±æ˜¯Vueå®ä¾‹å¯¹è±¡æœ¬èº«ï¼Œç„¶åä¼ é€’äº†ä¸€ä¸ªå‚æ•°ï¼š`vm.$createElement`ã€‚é‚£ä¹ˆ `render` å‡½æ•°åˆ°åº•æ˜¯å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿè®©æˆ‘ä»¬æ ¹æ®ä¸Šé¢é‚£å¥ä»£ç çŒœä¸€çŒœï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ `render` å‡½æ•°æ˜¯ä» `template` æˆ– `el` ç¼–è¯‘è€Œæ¥çš„ï¼Œå¦‚æœæ²¡é”™çš„è¯åº”è¯¥æ˜¯è¿”å›ä¸€ä¸ªè™šæ‹ŸDOMå¯¹è±¡ã€‚æˆ‘ä»¬ä¸å¦¨ä½¿ç”¨ `console.log` æ‰“å°ä¸€ä¸‹ `render` å‡½æ•°ï¼Œå½“æˆ‘ä»¬çš„æ¨¡æ¿è¿™æ ·ç¼–å†™æ—¶ï¼š\n\n```\n<ul id=\"app\">\n  <li>{{a}}</li>\n</ul>\n```\n\næ‰“å°çš„ `render` å‡½æ•°å¦‚ä¸‹ï¼š\n\n![renderå‡½æ•°1](http://7xlolm.com1.z0.glb.clouddn.com/vueimgr2.png)\n\næˆ‘ä»¬ä¿®æ”¹æ¨¡æ¿ä¸ºï¼š\n\n```\n<ul id=\"app\">\n  <li v-for=\"i in b\">{{a}}</li>\n</ul>\n```\n\næ‰“å°å‡ºæ¥çš„ `render` å‡½æ•°å¦‚ä¸‹ï¼š\n\n![renderå‡½æ•°2](http://7xlolm.com1.z0.glb.clouddn.com/vueimgr3.png)\n\nå…¶å®äº†è§£Vue2.xç‰ˆæœ¬çš„åŒå­¦éƒ½çŸ¥é“ï¼ŒVueæä¾›äº† `render` é€‰é¡¹ï¼Œä½œä¸º `template` çš„ä»£æ›¿æ–¹æ¡ˆï¼ŒåŒæ—¶ä¸ºJavaScriptæä¾›äº†å®Œå…¨ç¼–ç¨‹çš„èƒ½åŠ›ï¼Œä¸‹é¢ä¸¤ç§ç¼–å†™æ¨¡æ¿çš„æ–¹å¼å®é™…æ˜¯ç­‰ä»·çš„ï¼š\n\n```js\n// æ–¹æ¡ˆä¸€ï¼š\nnew Vue({\n\tel: '#app',\n\tdata: {\n\t\ta: 1\n\t},\n\ttemplate: '<ul><li>{{a}}</li><li>{{a}}</li></ul>'\n})\n\n// æ–¹æ¡ˆäºŒï¼š\nnew Vue({\n\tel: '#app',\n\trender: function (createElement) {\n\t\tcreateElement('ul', [\n\t\t\tcreateElement('li', this.a),\n\t\t\tcreateElement('li', this.a)\n\t\t])\n\t}\n})\n```\n\nç°åœ¨æˆ‘ä»¬å†æ¥çœ‹æˆ‘ä»¬æ‰“å°çš„ `render` å‡½æ•°ï¼š\n\n```\nfunction anonymous() {\n\twith(this){\n\t\treturn _c('ul', { \n\t\t\tattrs: {\"id\": \"app\"}\n\t\t},[\n\t\t\t_c('li', [_v(_s(a))])\n\t\t])\n\t}\n}\n```\n\næ˜¯ä¸æ˜¯ä¸æˆ‘ä»¬è‡ªå·±å†™ `render` å‡½æ•°å¾ˆåƒï¼Ÿå› ä¸º render å‡½æ•°çš„ä½œç”¨åŸŸè¢«ç»‘å®šåˆ°äº†Vueå®ä¾‹ï¼Œå³ï¼š`render.call(vm._renderProxy, vm.$createElement)`ï¼Œæ‰€ä»¥ä¸Šé¢ä»£ç ä¸­ `_c`ã€`_v`ã€`_s` ä»¥åŠå˜é‡ `a`ç›¸å½“äºVueå®ä¾‹ä¸‹çš„æ–¹æ³•å’Œå˜é‡ã€‚å¤§å®¶è¿˜è®°å¾—è¯¸å¦‚ `_c`ã€`_v`ã€`_s` è¿™æ ·çš„æ–¹æ³•åœ¨å“ªé‡Œå®šä¹‰çš„å—ï¼Ÿæˆ‘ä»¬åœ¨æ•´ç†Vueæ„é€ å‡½æ•°çš„æ—¶å€™çŸ¥é“ï¼Œä»–ä»¬åœ¨ `src/core/instance/render.js` æ–‡ä»¶ä¸­çš„ `renderMixin` æ–¹æ³•ä¸­å®šä¹‰ï¼Œé™¤äº†è¿™äº›ä¹‹å¤–è¿˜æœ‰è¯¸å¦‚ï¼š`_l`ã€ `_m`ã€ `_o` ç­‰ç­‰ã€‚å…¶ä¸­ `_l` å°±åœ¨æˆ‘ä»¬ä½¿ç”¨ `v-for` æŒ‡ä»¤çš„æ—¶å€™å‡ºç°äº†ã€‚æ‰€ä»¥ç°åœ¨å¤§å®¶çŸ¥é“ä¸ºä»€ä¹ˆè¿™äº›æ–¹æ³•éƒ½è¢«å®šä¹‰åœ¨ `render.js` æ–‡ä»¶ä¸­äº†å§ï¼Œå› ä¸ºä»–ä»¬å°±æ˜¯ä¸ºäº†æ„é€ å‡º `render` å‡½æ•°è€Œå­˜åœ¨çš„ã€‚\n\nç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº† `render` å‡½æ•°çš„é•¿ç›¸ï¼Œä¹ŸçŸ¥é“äº† `render` å‡½æ•°çš„ä½œç”¨åŸŸæ˜¯Vueå®ä¾‹æœ¬èº«å³ï¼š`this`(æˆ–`vm`)ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬æ‰§è¡Œ `render` å‡½æ•°æ—¶ï¼Œå…¶ä¸­çš„å˜é‡å¦‚ï¼š`a`ï¼Œå°±ç›¸å½“äºï¼š`this.a`ï¼Œæˆ‘ä»¬çŸ¥é“è¿™æ˜¯åœ¨æ±‚å€¼ï¼Œæ‰€ä»¥ `_mount` ä¸­çš„è¿™æ®µä»£ç ï¼š\n\n```\nvm._watcher = new Watcher(vm, () => {\n  vm._update(vm._render(), hydrating)\n}, noop)\n```\n\nå½“ `vm._render` æ‰§è¡Œçš„æ—¶å€™ï¼Œæ‰€ä¾èµ–çš„å˜é‡å°±ä¼šè¢«æ±‚å€¼ï¼Œå¹¶è¢«æ”¶é›†ä¸ºä¾èµ–ã€‚æŒ‰ç…§Vueä¸­ `watcher.js` çš„é€»è¾‘ï¼Œå½“ä¾èµ–çš„å˜é‡æœ‰å˜åŒ–æ—¶ä¸ä»…ä»…å›è°ƒå‡½æ•°è¢«æ‰§è¡Œï¼Œå®é™…ä¸Šè¿˜è¦é‡æ–°æ±‚å€¼ï¼Œå³è¿˜è¦æ‰§è¡Œä¸€éï¼š\n\n```\n() => {\n  vm._update(vm._render(), hydrating)\n}\n```\n\nè¿™å®é™…ä¸Šå°±åšåˆ°äº† `re-render`ï¼Œå› ä¸º `vm._update` å°±æ˜¯æ–‡ç« å¼€å¤´æ‰€è¯´çš„è™šæ‹ŸDOMä¸­çš„æœ€åä¸€æ­¥ï¼š`patch`\n\n`vm_render` æ–¹æ³•æœ€ç»ˆè¿”å›ä¸€ä¸ª `vnode` å¯¹è±¡ï¼Œå³è™šæ‹ŸDOMï¼Œç„¶åä½œä¸º `vm_update` çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’äº†è¿‡å»ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ `vm_update` çš„é€»è¾‘ï¼Œåœ¨ `src/core/instance/lifecycle.js` æ–‡ä»¶ä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š\n\n```js\n    if (!prevVnode) {\n      // initial render\n      vm.$el = vm.__patch__(\n        vm.$el, vnode, hydrating, false /* removeOnly */,\n        vm.$options._parentElm,\n        vm.$options._refElm\n      )\n    } else {\n      // updates\n      vm.$el = vm.__patch__(prevVnode, vnode)\n    }\n```\n\nå¦‚æœè¿˜æ²¡æœ‰ `prevVnode` è¯´æ˜æ˜¯é¦–æ¬¡æ¸²æŸ“ï¼Œç›´æ¥åˆ›å»ºçœŸå®DOMã€‚å¦‚æœå·²ç»æœ‰äº† `prevVnode` è¯´æ˜ä¸æ˜¯é¦–æ¬¡æ¸²æŸ“ï¼Œé‚£ä¹ˆå°±é‡‡ç”¨ `patch` ç®—æ³•è¿›è¡Œå¿…è¦çš„DOMæ“ä½œã€‚è¿™å°±æ˜¯Vueæ›´æ–°DOMçš„é€»è¾‘ã€‚åªä¸è¿‡æˆ‘ä»¬æ²¡æœ‰å°† virtual DOM å†…éƒ¨çš„å®ç°ã€‚\n\nç°åœ¨æˆ‘ä»¬æ¥å¥½å¥½ç†ç†æ€è·¯ï¼Œå½“æˆ‘ä»¬å†™å¦‚ä¸‹ä»£ç æ—¶ï¼š\n\n```\nnew Vue({\n\tel: '#app',\n\tdata: {\n\t\ta: 1,\n\t\tb: [1, 2, 3]\n\t}\n})\n```\n\nVue æ‰€åšçš„äº‹ï¼š\n\n> 1ã€æ„å»ºæ•°æ®å“åº”ç³»ç»Ÿï¼Œä½¿ç”¨ `Observer` å°†æ•°æ®dataè½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§ï¼›å°† `el` ç¼–è¯‘ä¸º `render` å‡½æ•°ï¼Œ`render` å‡½æ•°è¿”å›å€¼ä¸ºè™šæ‹ŸDOM\n\n> 2ã€åœ¨ `_mount` ä¸­å¯¹ `_update` æ±‚å€¼ï¼Œè€Œ `_update` åˆä¼šå¯¹ `render` æ±‚å€¼ï¼Œ`render` å†…éƒ¨åˆä¼šå¯¹ä¾èµ–çš„å˜é‡æ±‚å€¼ï¼Œæ”¶é›†ä¸ºè¢«æ±‚å€¼çš„å˜é‡çš„ä¾èµ–ï¼Œå½“å˜é‡æ”¹å˜æ—¶ï¼Œ`_update` åˆä¼šé‡æ–°æ‰§è¡Œä¸€éï¼Œä»è€Œåšåˆ° `re-render`ã€‚\n\nç”¨ä¸€å¼ è¯¦ç»†ä¸€ç‚¹çš„å›¾è¡¨ç¤ºå°±æ˜¯è¿™æ ·çš„ï¼š\n\n![è¯¦ç»†æµç¨‹](http://7xlolm.com1.z0.glb.clouddn.com/vueimgdetail.png)\n\nåˆ°æ­¤ï¼Œæˆ‘ä»¬ä»å¤§ä½“æµç¨‹ï¼ŒæŒ‘ç€é‡ç‚¹çš„èµ°äº†ä¸€éVueï¼Œä½†æ˜¯è¿˜æœ‰å¾ˆå¤šç»†èŠ‚æˆ‘ä»¬æ²¡æœ‰æåŠï¼Œæ¯”å¦‚ï¼š\n\n1ã€å°†æ¨¡æ¿è½¬ä¸º `render` å‡½æ•°çš„æ—¶å€™ï¼Œå®é™…æ˜¯å…ˆç”Ÿæˆçš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œå†å°†æŠ½è±¡è¯­æ³•æ ‘è½¬æˆçš„ `render` å‡½æ•°ï¼Œè€Œä¸”è¿™ä¸€æ•´å¥—çš„ä»£ç æˆ‘ä»¬ä¹Ÿæ²¡æœ‰æåŠï¼Œå› ä¸ºä»–åœ¨å¤æ‚äº†ï¼Œå…¶å®è¿™éƒ¨åˆ†å†…å®¹å°±æ˜¯åœ¨å®Œæ­£åˆ™ã€‚\n\n2ã€æˆ‘ä»¬ä¹Ÿæ²¡æœ‰è¯¦ç»†çš„è®² Virtual DOM çš„å®ç°åŸç†ï¼Œç½‘ä¸Šå·²ç»æœ‰æ–‡ç« è®²äº†ï¼Œå¤§å®¶å¯ä»¥æœä¸€æœ\n\n3ã€æˆ‘ä»¬çš„ä¾‹å­ä¸­ä»…ä»…ä¼ é€’äº† `el` ï¼Œ`data` é€‰é¡¹ï¼Œå¤§å®¶çŸ¥é“ Vue æ”¯æŒçš„é€‰é¡¹å¾ˆå¤šï¼Œæ¯”å¦‚æˆ‘ä»¬éƒ½æ²¡æœ‰è®²åˆ°ï¼Œä½†éƒ½æ˜¯è§¦ç±»æ—é€šçš„ï¼Œæ¯”å¦‚ä½ ææ¸…æ¥šäº† `data` é€‰é¡¹å†å»çœ‹ `computed` é€‰é¡¹æˆ–è€… `props` é€‰é¡¹å°±ä¼šå¾ˆå®¹æ˜“ï¼Œæ¯”å¦‚ä½ çŸ¥é“äº† `Watcher` çš„å·¥ä½œæœºåˆ¶å†å»çœ‹ `watch` é€‰é¡¹å°±ä¼šå¾ˆå®¹æ˜“ã€‚\n\næœ¬ç¯‡æ–‡ç« ä½œä¸ºVueæºç çš„å¯è’™æ–‡ç« ï¼Œä¹Ÿè®¸è¿˜æœ‰å¾ˆå¤šç¼ºé™·ï¼Œå…¨å½“æŠ›ç –å¼•ç‰äº†ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"Vueæºç å­¦ä¹ ","published":1,"updated":"2017-05-09T10:54:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx531004447fymw65xbw5","content":"<p>åŸæœ¬æ–‡ç« çš„åå­—å«åšã€Šæºç è§£æã€‹ï¼Œä¸è¿‡åæ¥æƒ³æƒ³ï¼Œè¿˜æ˜¯ç”¨â€œæºç å­¦ä¹ â€æ¥çš„åˆé€‚ä¸€ç‚¹ï¼Œåœ¨æ²¡æœ‰å½»åº•æŒæ¡æºç ä¸­çš„æ¯ä¸€ä¸ªå­—æ¯ä¹‹å‰ï¼Œâ€œè§£æâ€å°±æœ‰ç‚¹æ ‡é¢˜å…šäº†ã€‚å»ºè®®åœ¨çœ‹è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œæœ€å¥½æ‰“å¼€2.1.7çš„æºç å¯¹ç…§ç€çœ‹ï¼Œè¿™æ ·å¯èƒ½æ›´å®¹æ˜“ç†è§£ã€‚å¦å¤–æœ¬äººæ°´å¹³æœ‰é™ï¼Œæ–‡ä¸­æœ‰é”™è¯¯æˆ–ä¸å¦¥çš„åœ°æ–¹æœ›å¤§å®¶å¤šå¤šæŒ‡æ­£å…±åŒæˆé•¿ã€‚</p>\n<p>è¡¥å……ï¼šVue 2.2 åˆšåˆšå‘å¸ƒï¼Œä½œä¸ºä¸€ä¸ªç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦ä»Vueä»£ç çš„ç»„ç»‡ï¼ŒVueæ„é€ å‡½æ•°çš„è¿˜åŸï¼ŒåŸå‹çš„è®¾è®¡ï¼Œä»¥åŠå‚æ•°é€‰é¡¹çš„å¤„ç†å’Œå·²ç»è¢«å†™çƒ‚äº†çš„æ•°æ®ç»‘å®šä¸å¦‚ä½•ä½¿ç”¨ Virtual DOM æ›´æ–°è§†å›¾å…¥æ‰‹ã€‚ä»æ•´ä½“çš„å¤§æ–¹å‘è§‚å¯Ÿæ¡†æ¶ï¼Œè¿™ä¹ˆçœ‹æ¥ <code>V2.1.7</code> å¯¹äºç†è§£ <code>V2.2</code> çš„ä»£ç ä¸ä¼šæœ‰å¤ªå¤§çš„å½±å“ã€‚è¯¥ç³»åˆ—æ–‡ç« çš„åç»­æ–‡ç« ï¼Œéƒ½ä¼šä»æœ€æ–°çš„æºç å…¥æ‰‹ï¼Œå¹¶å¯¹æ”¹åŠ¨çš„åœ°æ–¹åšç›¸åº”çš„æç¤ºã€‚</p>\n<a id=\"more\"></a>\n<p>å¾ˆä¹…ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼š<a href=\"http://hcysun.me/2016/04/28/JavaScript%E5%AE%9E%E7%8E%B0MVVM%E4%B9%8B%E6%88%91%E5%B0%B1%E6%98%AF%E6%83%B3%E7%9B%91%E6%B5%8B%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%98%E5%8C%96/\">JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–</a>ï¼Œæ–‡ç« å¼€å¤´æåˆ°äº†æˆ‘å†™åšå®¢çš„é£æ ¼ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œåªå†™åŠªåŠ›è®©å°ç™½ï¼Œç”šè‡³æ˜¯å°å­¦ç”Ÿéƒ½èƒ½çœ‹æ˜ç™½çš„æ–‡ç« ã€‚è¿™ä¸å…ä¼šå¯¼è‡´å¯¹äºæŸäº›åŒå­¦æ¥è¯´è¿™ç¯‡æ–‡ç« æœ‰äº›å¢¨è¿¹ï¼Œæ‰€ä»¥å¤§å®¶æ ¹æ®è‡ªå·±çš„å–œå¥½ï¼Œå¯ä»¥è¯¦ç»†çš„çœ‹ï¼Œä¹Ÿå¯ä»¥è·³è·ƒç€çœ‹ã€‚</p>\n<h2 id=\"ä¸€ã€ä»äº†è§£ä¸€ä¸ªå¼€æºé¡¹ç›®å…¥æ‰‹\"><a href=\"#ä¸€ã€ä»äº†è§£ä¸€ä¸ªå¼€æºé¡¹ç›®å…¥æ‰‹\" class=\"headerlink\" title=\"ä¸€ã€ä»äº†è§£ä¸€ä¸ªå¼€æºé¡¹ç›®å…¥æ‰‹\"></a><span style=\"color: #ff6600;\">ä¸€ã€ä»äº†è§£ä¸€ä¸ªå¼€æºé¡¹ç›®å…¥æ‰‹<span></span></span></h2><p>è¦çœ‹ä¸€ä¸ªé¡¹ç›®çš„æºç ï¼Œä¸è¦ä¸€ä¸Šæ¥å°±çœ‹ï¼Œå…ˆå»äº†è§£ä¸€ä¸‹é¡¹ç›®æœ¬èº«çš„å…ƒæ•°æ®å’Œä¾èµ–ï¼Œé™¤æ­¤ä¹‹å¤–æœ€å¥½ä¹Ÿäº†è§£ä¸€ä¸‹ PR è§„åˆ™ï¼ŒIssue Reporting è§„åˆ™ç­‰ç­‰ã€‚ç‰¹åˆ«æ˜¯â€œå‰ç«¯â€å¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬åœ¨çœ‹æºç ä¹‹å‰ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„åº”è¯¥æ˜¯ï¼š<code>package.json</code>æ–‡ä»¶ã€‚</p>\n<p>åœ¨ <code>package.json</code> æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æœ€åº”è¯¥å…³æ³¨çš„å°±æ˜¯ <code>scripts</code> å­—æ®µå’Œ <code>devDependencies</code> ä»¥åŠ <code>dependencies</code> å­—æ®µï¼Œé€šè¿‡ <code>scripts</code> å­—æ®µæˆ‘ä»¬å¯ä»¥çŸ¥é“é¡¹ç›®ä¸­å®šä¹‰çš„è„šæœ¬å‘½ä»¤ï¼Œé€šè¿‡ <code>devDependencies</code> å’Œ <code>dependencies</code> å­—æ®µæˆ‘ä»¬å¯ä»¥äº†è§£é¡¹ç›®çš„ä¾èµ–æƒ…å†µã€‚</p>\n<p>äº†è§£äº†è¿™äº›ä¹‹åï¼Œå¦‚æœæœ‰ä¾èµ–æˆ‘ä»¬å°± <code>npm install</code> å®‰è£…ä¾èµ–å°±okäº†ã€‚</p>\n<p>é™¤äº† <code>package.json</code> ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜è¦é˜…è¯»é¡¹ç›®çš„è´¡çŒ®è§„åˆ™æ–‡æ¡£ï¼Œäº†è§£å¦‚ä½•å¼€å§‹ï¼Œä¸€ä¸ªå¥½çš„å¼€æºé¡¹ç›®è‚¯å®šä¼šåŒ…å«è¿™éƒ¨åˆ†å†…å®¹çš„ï¼ŒVueä¹Ÿä¸ä¾‹å¤–ï¼š<a href=\"https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md\" target=\"_blank\" rel=\"external\">https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md</a>ï¼Œåœ¨è¿™ä¸ªæ–‡æ¡£é‡Œè¯´æ˜äº†ä¸€äº›è¡Œä¸ºå‡†åˆ™ï¼ŒPRæŒ‡å—ï¼ŒIssue Reporting æŒ‡å—ï¼ŒDevelopment Setup ä»¥åŠ é¡¹ç›®ç»“æ„ã€‚é€šè¿‡é˜…è¯»è¿™äº›å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£é¡¹ç›®å¦‚ä½•å¼€å§‹ï¼Œå¦‚ä½•å¼€å‘ä»¥åŠç›®å½•çš„è¯´æ˜ï¼Œä¸‹é¢æ˜¯å¯¹é‡è¦ç›®å½•å’Œæ–‡ä»¶çš„ç®€å•ä»‹ç»ï¼Œè¿™äº›å†…å®¹ä½ éƒ½å¯ä»¥å»è‡ªå·±é˜…è¯»è·å–ï¼š</p>\n<pre><code>â”œâ”€â”€ build --------------------------------- æ„å»ºç›¸å…³çš„æ–‡ä»¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¸éœ€è¦åŠ¨\nâ”œâ”€â”€ dist ---------------------------------- æ„å»ºåæ–‡ä»¶çš„è¾“å‡ºç›®å½•\nâ”œâ”€â”€ examples ------------------------------ å­˜æ”¾ä¸€äº›ä½¿ç”¨Vueå¼€å‘çš„åº”ç”¨æ¡ˆä¾‹\nâ”œâ”€â”€ flow ---------------------------------- ç±»å‹å£°æ˜ï¼Œä½¿ç”¨å¼€æºé¡¹ç›® [Flow](https://flowtype.org/)\nâ”œâ”€â”€ package.json -------------------------- ä¸è§£é‡Š\nâ”œâ”€â”€ test ---------------------------------- åŒ…å«æ‰€æœ‰æµ‹è¯•æ–‡ä»¶\nâ”œâ”€â”€ src ----------------------------------- è¿™ä¸ªæ˜¯æˆ‘ä»¬æœ€åº”è¯¥å…³æ³¨çš„ç›®å½•ï¼ŒåŒ…å«äº†æºç \nâ”‚   â”œâ”€â”€ entries --------------------------- åŒ…å«äº†ä¸åŒçš„æ„å»ºæˆ–åŒ…çš„å…¥å£æ–‡ä»¶\nâ”‚   â”‚   â”œâ”€â”€ web-runtime.js ---------------- è¿è¡Œæ—¶æ„å»ºçš„å…¥å£ï¼Œè¾“å‡º dist/vue.common.js æ–‡ä»¶ï¼Œä¸åŒ…å«æ¨¡æ¿(template)åˆ°renderå‡½æ•°çš„ç¼–è¯‘å™¨ï¼Œæ‰€ä»¥ä¸æ”¯æŒ `template` é€‰é¡¹ï¼Œæˆ‘ä»¬ä½¿ç”¨vueé»˜è®¤å¯¼å‡ºçš„å°±æ˜¯è¿™ä¸ªè¿è¡Œæ—¶çš„ç‰ˆæœ¬ã€‚å¤§å®¶ä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„\nâ”‚   â”‚   â”œâ”€â”€ web-runtime-with-compiler.js -- ç‹¬ç«‹æ„å»ºç‰ˆæœ¬çš„å…¥å£ï¼Œè¾“å‡º dist/vue.jsï¼Œå®ƒåŒ…å«æ¨¡æ¿(template)åˆ°renderå‡½æ•°çš„ç¼–è¯‘å™¨\nâ”‚   â”‚   â”œâ”€â”€ web-compiler.js --------------- vue-template-compiler åŒ…çš„å…¥å£æ–‡ä»¶\nâ”‚   â”‚   â”œâ”€â”€ web-server-renderer.js -------- vue-server-renderer åŒ…çš„å…¥å£æ–‡ä»¶\nâ”‚   â”œâ”€â”€ compiler -------------------------- ç¼–è¯‘å™¨ä»£ç çš„å­˜æ”¾ç›®å½•ï¼Œå°† template ç¼–è¯‘ä¸º render å‡½æ•°\nâ”‚   â”‚   â”œâ”€â”€ parser ------------------------ å­˜æ”¾å°†æ¨¡æ¿å­—ç¬¦ä¸²è½¬æ¢æˆå…ƒç´ æŠ½è±¡è¯­æ³•æ ‘çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ codegen ----------------------- å­˜æ”¾ä»æŠ½è±¡è¯­æ³•æ ‘(AST)ç”Ÿæˆrenderå‡½æ•°çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ optimizer.js ------------------ åˆ†æé™æ€æ ‘ï¼Œä¼˜åŒ–vdomæ¸²æŸ“\nâ”‚   â”œâ”€â”€ core ------------------------------ å­˜æ”¾é€šç”¨çš„ï¼Œå¹³å°æ— å…³çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ observer ---------------------- ååº”ç³»ç»Ÿï¼ŒåŒ…å«æ•°æ®è§‚æµ‹çš„æ ¸å¿ƒä»£ç \nâ”‚   â”‚   â”œâ”€â”€ vdom -------------------------- åŒ…å«è™šæ‹ŸDOMåˆ›å»º(creation)å’Œæ‰“è¡¥ä¸(patching)çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ instance ---------------------- åŒ…å«Vueæ„é€ å‡½æ•°è®¾è®¡ç›¸å…³çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ global-api -------------------- åŒ…å«ç»™Vueæ„é€ å‡½æ•°æŒ‚è½½å…¨å±€æ–¹æ³•(é™æ€æ–¹æ³•)æˆ–å±æ€§çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ components -------------------- åŒ…å«æŠ½è±¡å‡ºæ¥çš„é€šç”¨ç»„ä»¶\nâ”‚   â”œâ”€â”€ server ---------------------------- åŒ…å«æœåŠ¡ç«¯æ¸²æŸ“(server-side rendering)çš„ç›¸å…³ä»£ç \nâ”‚   â”œâ”€â”€ platforms ------------------------- åŒ…å«å¹³å°ç‰¹æœ‰çš„ç›¸å…³ä»£ç \nâ”‚   â”œâ”€â”€ sfc ------------------------------- åŒ…å«å•æ–‡ä»¶ç»„ä»¶(.vueæ–‡ä»¶)çš„è§£æé€»è¾‘ï¼Œç”¨äºvue-template-compileråŒ…\nâ”‚   â”œâ”€â”€ shared ---------------------------- åŒ…å«æ•´ä¸ªä»£ç åº“é€šç”¨çš„ä»£ç \n</code></pre><p>å¤§æ¦‚äº†è§£äº†é‡è¦ç›®å½•å’Œæ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŸ¥çœ‹ <a href=\"https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md#development-setup\" target=\"_blank\" rel=\"external\">Development Setup</a> ä¸­çš„å¸¸ç”¨å‘½ä»¤éƒ¨åˆ†ï¼Œæ¥äº†è§£å¦‚ä½•å¼€å§‹è¿™ä¸ªé¡¹ç›®äº†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ ·çš„ä»‹ç»ï¼š</p>\n<pre><code># watch and auto re-build dist/vue.js\n$ npm run dev\n\n# watch and auto re-run unit tests in Chrome\n$ npm run dev:test\n</code></pre><p>ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦è¿è¡Œ <code>npm run dev</code> å³å¯ç›‘æµ‹æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨é‡æ–°æ„å»ºè¾“å‡º dist/vue.jsï¼Œç„¶åè¿è¡Œ <code>npm run dev:test</code> æ¥æµ‹è¯•ã€‚ä¸è¿‡ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä¼šåœ¨ <code>examples</code> ç›®å½•æ–°å»ºä¸€ä¸ªä¾‹å­ï¼Œç„¶åå¼•ç”¨ dist/vue.js è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹¿è¿™ä¸ªä¾‹å­ä¸€è¾¹æ”¹Vueæºç ä¸€è¾¹çœ‹è‡ªå·±å†™çš„ä»£ç æƒ³æ€ä¹ˆç©æ€ä¹ˆç©ã€‚</p>\n<h2 id=\"äºŒã€çœ‹æºç çš„å°æç¤º\"><a href=\"#äºŒã€çœ‹æºç çš„å°æç¤º\" class=\"headerlink\" title=\"äºŒã€çœ‹æºç çš„å°æç¤º\"></a><span style=\"color: #ff6600;\">äºŒã€çœ‹æºç çš„å°æç¤º</span></h2><p>åœ¨çœŸæ­£æ­¥å…¥æºç ä¸–ç•Œä¹‹å‰ï¼Œæˆ‘æƒ³ç®€å•è¯´ä¸€è¯´çœ‹æºç çš„æŠ€å·§ï¼š</p>\n<h3 id=\"æ³¨é‡å¤§ä½“æ¡†æ¶ï¼Œä»å®è§‚åˆ°å¾®è§‚\"><a href=\"#æ³¨é‡å¤§ä½“æ¡†æ¶ï¼Œä»å®è§‚åˆ°å¾®è§‚\" class=\"headerlink\" title=\"æ³¨é‡å¤§ä½“æ¡†æ¶ï¼Œä»å®è§‚åˆ°å¾®è§‚\"></a><em>æ³¨é‡å¤§ä½“æ¡†æ¶ï¼Œä»å®è§‚åˆ°å¾®è§‚</em></h3><p>å½“ä½ çœ‹ä¸€ä¸ªé¡¹ç›®ä»£ç çš„æ—¶å€™ï¼Œæœ€å¥½æ˜¯èƒ½æ‰¾åˆ°ä¸€æ¡ä¸»çº¿ï¼Œå…ˆæŠŠå¤§ä½“æµç¨‹ç»“æ„æ‘¸æ¸…æ¥šï¼Œå†æ·±å…¥åˆ°ç»†èŠ‚ï¼Œé€é¡¹å‡»ç ´ï¼Œæ‹¿Vueä¸¾ä¸ªæ —å­ï¼šå‡å¦‚ä½ å·²ç»çŸ¥é“Vueä¸­æ•°æ®çŠ¶æ€æ”¹å˜åä¼šé‡‡ç”¨virtual DOMçš„æ–¹å¼æ›´æ–°DOMï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœä½ ä¸äº†è§£virtual DOMï¼Œé‚£ä¹ˆå¬æˆ‘ä¸€å¥â€œæš‚ä¸”ä¸è¦å»ç ”ç©¶å†…éƒ¨å…·ä½“å®ç°ï¼Œå› ä¸ºè¿™ä¼šæ˜¯ä½ ä¸§å¤±ä¸»çº¿â€ï¼Œè€Œä½ ä»…ä»…éœ€è¦çŸ¥é“virtual DOMåˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š</p>\n<blockquote>\n<p>ä¸€ã€createElement(): ç”¨ JavaScriptå¯¹è±¡(è™šæ‹Ÿæ ‘) æè¿° çœŸå®DOMå¯¹è±¡(çœŸå®æ ‘)<br>äºŒã€diff(oldNode, newNode) : å¯¹æ¯”æ–°æ—§ä¸¤ä¸ªè™šæ‹Ÿæ ‘çš„åŒºåˆ«ï¼Œæ”¶é›†å·®å¼‚<br>ä¸‰ã€patch() : å°†å·®å¼‚åº”ç”¨åˆ°çœŸå®DOMæ ‘</p>\n</blockquote>\n<p>æœ‰çš„æ—¶å€™ ç¬¬äºŒæ­¥ å¯èƒ½ä¸ ç¬¬ä¸‰æ­¥ åˆå¹¶æˆä¸€æ­¥(Vue ä¸­çš„patchå°±æ˜¯è¿™æ ·)ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æ¯”å¦‚ <code>src/compiler/codegen</code> å†…çš„ä»£ç ï¼Œå¯èƒ½ä½ ä¸çŸ¥é“ä»–å†™äº†ä»€ä¹ˆï¼Œç›´æ¥å»çœ‹å®ƒä¼šè®©ä½ å¾ˆç—›è‹¦ï¼Œä½†æ˜¯ä½ åªéœ€è¦çŸ¥é“ codegen æ˜¯ç”¨æ¥å°†æŠ½è±¡è¯­æ³•æ ‘(AST)ç”Ÿæˆrenderå‡½æ•°çš„å°±OKäº†ï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š</p>\n<pre><code class=\"js\">function anonymous() {\n    with(this){return _c(&#39;p&#39;,{attrs:{&quot;id&quot;:&quot;app&quot;}},[_v(&quot;\\n      &quot;+_s(a)+&quot;\\n      &quot;),_c(&#39;my-com&#39;)])}\n}\n</code></pre>\n<p>å½“æˆ‘ä»¬çŸ¥é“äº†ä¸€ä¸ªä¸œè¥¿å­˜åœ¨ï¼Œä¸”çŸ¥é“å®ƒå­˜åœ¨çš„ç›®çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾ˆå®¹æ˜“æŠ“ä½è¿™æ¡ä¸»çº¿ï¼Œè¿™ä¸ªç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« å°±æ˜¯å›´ç»•å¤§ä½“ä¸»çº¿å±•å¼€çš„ã€‚äº†è§£å¤§ä½“ä¹‹åï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†æ¯éƒ¨åˆ†å†…å®¹éƒ½æ˜¯åšä»€ä¹ˆçš„ï¼Œæ¯”å¦‚ codegen æ˜¯ç”Ÿæˆç±»ä¼¼ä¸Šé¢è´´å‡ºçš„ä»£ç æ‰€ç¤ºçš„å‡½æ•°çš„ï¼Œé‚£ä¹ˆå†å»çœ‹codegenä¸‹çš„ä»£ç æ—¶ï¼Œç›®çš„æ€§å°±ä¼šæ›´å¼ºï¼Œå°±æ›´å®¹æ˜“ç†è§£ã€‚</p>\n<h2 id=\"ä¸‰ã€Vue-çš„æ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆæ ·çš„\"><a href=\"#ä¸‰ã€Vue-çš„æ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆæ ·çš„\" class=\"headerlink\" title=\"ä¸‰ã€Vue çš„æ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆæ ·çš„\"></a><span style=\"color: #ff6600;\">ä¸‰ã€Vue çš„æ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆæ ·çš„<span></span></span></h2><p>balabalaä¸€å¤§å †ï¼Œå¼€å§‹æ¥å¹²è´§å§ã€‚æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯ææ¸…æ¥š Vue æ„é€ å‡½æ•°åˆ°åº•æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚</p>\n<p>æˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦æ¥è°ƒç”¨ <code>Vue</code>ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ <code>Vue</code> åº”è¯¥æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€ä»¶è¦åšçš„äº‹å„¿å°±æ˜¯æŠŠæ„é€ å‡½æ•°å…ˆæ‰’çš„ä¸€æ¸…äºŒæ¥šï¼Œå¦‚ä½•å¯»æ‰¾ <code>Vue</code> æ„é€ å‡½æ•°å‘¢ï¼Ÿå½“ç„¶æ˜¯ä» entry å¼€å§‹å•¦ï¼Œè¿˜è®°çš„æˆ‘ä»¬è¿è¡Œ <code>npm run dev</code> å‘½ä»¤åï¼Œä¼šè¾“å‡º <code>dist/vue.js</code> å—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å»çœ‹çœ‹ <code>npm run dev</code> å¹²äº†ä»€ä¹ˆï¼š</p>\n<pre><code>&quot;dev&quot;: &quot;TARGET=web-full-dev rollup -w -c build/config.js&quot;,\n</code></pre><p>é¦–å…ˆå°† TARGET å¾—å€¼è®¾ç½®ä¸º â€˜web-full-devâ€™ï¼Œç„¶åï¼Œç„¶åï¼Œç„¶åå¦‚æœä½ ä¸äº†è§£ rollup å°±åº”è¯¥ç®€å•å»çœ‹ä¸€ä¸‹å•¦â€¦â€¦ï¼Œç®€å•çš„è¯´å°±æ˜¯ä¸€ä¸ªJavaScriptæ¨¡å—æ‰“åŒ…å™¨ï¼Œä½ å¯ä»¥æŠŠå®ƒç®€å•çš„ç†è§£ä¸ºå’Œ webpack ä¸€æ ·ï¼Œåªä¸è¿‡å®ƒæœ‰ä»–çš„ä¼˜åŠ¿ï¼Œæ¯”å¦‚ Tree-shaking (webpack2ä¹Ÿæœ‰)ï¼Œä½†åŒæ ·ï¼Œåœ¨æŸäº›åœºæ™¯å®ƒä¹Ÿæœ‰ä»–çš„åŠ£åŠ¿ã€‚ã€‚ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œå…¶ä¸­ <code>-w</code> å°±æ˜¯watchï¼Œ<code>-c</code> å°±æ˜¯æŒ‡å®šé…ç½®æ–‡ä»¶ä¸º <code>build/config.js</code> ï¼Œæˆ‘ä»¬æ‰“å¼€è¿™ä¸ªé…ç½®æ–‡ä»¶çœ‹ä¸€çœ‹ï¼š</p>\n<pre><code class=\"js\">// å¼•å…¥ä¾èµ–ï¼Œå®šä¹‰ banner\n...\n\n// builds å¯¹è±¡\nconst builds = {\n    ...\n    // Runtime+compiler development build (Browser)\n    &#39;web-full-dev&#39;: {\n        entry: path.resolve(__dirname, &#39;../src/entries/web-runtime-with-compiler.js&#39;),\n        dest: path.resolve(__dirname, &#39;../dist/vue.js&#39;),\n        format: &#39;umd&#39;,\n        env: &#39;development&#39;,\n        alias: { he: &#39;./entity-decoder&#39; },\n        banner\n    },\n    ...\n}\n\n// ç”Ÿæˆé…ç½®çš„æ–¹æ³•\nfunction genConfig(opts){\n    ...\n}\n\nif (process.env.TARGET) {\n  module.exports = genConfig(builds[process.env.TARGET])\n} else {\n  exports.getBuild = name =&gt; genConfig(builds[name])\n  exports.getAllBuilds = () =&gt; Object.keys(builds).map(name =&gt; genConfig(builds[name]))\n}\n</code></pre>\n<p>ä¸Šé¢çš„ä»£ç æ˜¯ç®€åŒ–è¿‡çš„ï¼Œå½“æˆ‘ä»¬è¿è¡Œ <code>npm run dev</code> çš„æ—¶å€™ <code>process.env.TARGET</code> çš„å€¼ç­‰äº â€˜web-full-devâ€™ï¼Œæ‰€ä»¥</p>\n<pre><code class=\"js\">module.exports = genConfig(builds[process.env.TARGET])\n</code></pre>\n<p>è¿™å¥ä»£ç ç›¸å½“äºï¼š</p>\n<pre><code class=\"js\">module.exports = genConfig({\n    entry: path.resolve(__dirname, &#39;../src/entries/web-runtime-with-compiler.js&#39;),\n    dest: path.resolve(__dirname, &#39;../dist/vue.js&#39;),\n    format: &#39;umd&#39;,\n    env: &#39;development&#39;,\n    alias: { he: &#39;./entity-decoder&#39; },\n    banner\n})\n</code></pre>\n<p>æœ€ç»ˆï¼ŒgenConfig å‡½æ•°è¿”å›ä¸€ä¸ª config å¯¹è±¡ï¼Œè¿™ä¸ªconfigå¯¹è±¡å°±æ˜¯Rollupçš„é…ç½®å¯¹è±¡ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±ä¸éš¾çœ‹åˆ°ï¼Œå…¥å£æ–‡ä»¶æ˜¯ï¼š</p>\n<pre><code>src/entries/web-runtime-with-compiler.js\n</code></pre><p>æˆ‘ä»¬æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œä¸è¦å¿˜äº†æˆ‘ä»¬çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬åœ¨å¯»æ‰¾Vueæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶çš„ç¬¬ä¸€è¡Œä»£ç æ˜¯ï¼š</p>\n<pre><code class=\"js\">import Vue from &#39;./web-runtime&#39;\n</code></pre>\n<p>è¿™ä¸ªæ—¶å€™ï¼Œä½ å°±åº”è¯¥çŸ¥é“ï¼Œè¿™ä¸ªæ–‡ä»¶æš‚æ—¶ä¸ä½ æ— ç¼˜ï¼Œä½ åº”è¯¥æ‰“å¼€ <code>web-runtime.js</code> æ–‡ä»¶ï¼Œä¸è¿‡å½“ä½ æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œä½ å‘ç°ç¬¬ä¸€è¡Œæ˜¯è¿™æ ·çš„ï¼š</p>\n<pre><code class=\"js\">import Vue from &#39;core/index&#39;\n</code></pre>\n<p>ä¾ç…§æ­¤æ€è·¯ï¼Œæœ€ç»ˆæˆ‘ä»¬å¯»æ‰¾åˆ°Vueæ„é€ å‡½æ•°çš„ä½ç½®åº”è¯¥æ˜¯åœ¨ <code>src/core/instance/index.js</code> æ–‡ä»¶ä¸­ï¼Œå…¶å®æˆ‘ä»¬çŒœä¹ŸçŒœå¾—åˆ°ï¼Œä¸Šé¢ä»‹ç»ç›®å½•çš„æ—¶å€™è¯´è¿‡ï¼šinstance æ˜¯å­˜æ”¾Vueæ„é€ å‡½æ•°è®¾è®¡ç›¸å…³ä»£ç çš„ç›®å½•ã€‚æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯»æ‰¾çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/vueimg2BD0DCC6-D689-4809-93D3-2F979E8F8C0C.png\" alt=\"å¯»æ‰¾ Vue æ„é€ å‡½æ•°è·¯çº¿\"></p>\n<p>æˆ‘ä»¬å›å¤´çœ‹ä¸€çœ‹ <code>src/core/instance/index.js</code> æ–‡ä»¶ï¼Œå¾ˆç®€å•ï¼š</p>\n<pre><code class=\"js\">import { initMixin } from &#39;./init&#39;\nimport { stateMixin } from &#39;./state&#39;\nimport { renderMixin } from &#39;./render&#39;\nimport { eventsMixin } from &#39;./events&#39;\nimport { lifecycleMixin } from &#39;./lifecycle&#39;\nimport { warn } from &#39;../util/index&#39;\n\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== &#39;production&#39; &amp;&amp;\n    !(this instanceof Vue)) {\n    warn(&#39;Vue is a constructor and should be called with the `new` keyword&#39;)\n  }\n  this._init(options)\n}\n\ninitMixin(Vue)\nstateMixin(Vue)\neventsMixin(Vue)\nlifecycleMixin(Vue)\nrenderMixin(Vue)\n\nexport default Vue\n</code></pre>\n<p>å¼•å…¥ä¾èµ–ï¼Œå®šä¹‰ Vue æ„é€ å‡½æ•°ï¼Œç„¶åä»¥Vueæ„é€ å‡½æ•°ä¸ºå‚æ•°ï¼Œè°ƒç”¨äº†äº”ä¸ªæ–¹æ³•ï¼Œæœ€åå¯¼å‡º Vueã€‚è¿™äº”ä¸ªæ–¹æ³•åˆ†åˆ«æ¥è‡ªäº”ä¸ªæ–‡ä»¶ï¼š<code>init.js</code> <code>state.js</code> <code>render.js</code> <code>events.js</code> ä»¥åŠ <code>lifecycle.js</code>ã€‚</p>\n<p>æ‰“å¼€è¿™äº”ä¸ªæ–‡ä»¶ï¼Œæ‰¾åˆ°ç›¸åº”çš„æ–¹æ³•ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™äº›æ–¹æ³•çš„ä½œç”¨ï¼Œå°±æ˜¯åœ¨ Vue çš„åŸå‹ prototype ä¸ŠæŒ‚è½½æ–¹æ³•æˆ–å±æ€§ï¼Œç»å†äº†è¿™äº”ä¸ªæ–¹æ³•åçš„Vueä¼šå˜æˆè¿™æ ·ï¼š</p>\n<pre><code class=\"js\">// initMixin(Vue)    src/core/instance/init.js **************************************************\nVue.prototype._init = function (options?: Object) {}\n\n// stateMixin(Vue)    src/core/instance/state.js **************************************************\nVue.prototype.$data\nVue.prototype.$set = set\nVue.prototype.$delete = del\nVue.prototype.$watch = function(){}\n\n// renderMixin(Vue)    src/core/instance/render.js **************************************************\nVue.prototype.$nextTick = function (fn: Function) {}\nVue.prototype._render = function (): VNode {}\nVue.prototype._s = _toString\nVue.prototype._v = createTextVNode\nVue.prototype._n = toNumber\nVue.prototype._e = createEmptyVNode\nVue.prototype._q = looseEqual\nVue.prototype._i = looseIndexOf\nVue.prototype._m = function(){}\nVue.prototype._o = function(){}\nVue.prototype._f = function resolveFilter (id) {}\nVue.prototype._l = function(){}\nVue.prototype._t = function(){}\nVue.prototype._b = function(){}\nVue.prototype._k = function(){}\n\n// eventsMixin(Vue)    src/core/instance/events.js **************************************************\nVue.prototype.$on = function (event: string, fn: Function): Component {}\nVue.prototype.$once = function (event: string, fn: Function): Component {}\nVue.prototype.$off = function (event?: string, fn?: Function): Component {}\nVue.prototype.$emit = function (event: string): Component {}\n\n// lifecycleMixin(Vue)    src/core/instance/lifecycle.js **************************************************\nVue.prototype._mount = function(){}\nVue.prototype._update = function (vnode: VNode, hydrating?: boolean) {}\nVue.prototype._updateFromParent = function(){}\nVue.prototype.$forceUpdate = function () {}\nVue.prototype.$destroy = function () {}\n</code></pre>\n<p>è¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿå¹¶æ²¡æœ‰ï¼Œæ ¹æ®æˆ‘ä»¬ä¹‹å‰å¯»æ‰¾ Vue çš„è·¯çº¿ï¼Œè¿™åªæ˜¯åˆšåˆšå¼€å§‹ï¼Œæˆ‘ä»¬è¿½æº¯è·¯çº¿å¾€å›èµ°ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªå¤„ç† Vue æ„é€ å‡½æ•°çš„åº”è¯¥æ˜¯ <code>src/core/index.js</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰“å¼€å®ƒï¼š</p>\n<pre><code class=\"js\">import Vue from &#39;./instance/index&#39;\nimport { initGlobalAPI } from &#39;./global-api/index&#39;\nimport { isServerRendering } from &#39;core/util/env&#39;\n\ninitGlobalAPI(Vue)\n\nObject.defineProperty(Vue.prototype, &#39;$isServer&#39;, {\n  get: isServerRendering\n})\n\nVue.version = &#39;__VERSION__&#39;\n\nexport default Vue\n</code></pre>\n<p>è¿™ä¸ªæ–‡ä»¶ä¹Ÿå¾ˆç®€å•ï¼Œä» instance/index ä¸­å¯¼å…¥å·²ç»åœ¨åŸå‹ä¸ŠæŒ‚è½½äº†æ–¹æ³•å’Œå±æ€§åçš„ Vueï¼Œç„¶åå¯¼å…¥ <code>initGlobalAPI</code> å’Œ <code>isServerRendering</code>ï¼Œä¹‹åå°†Vueä½œä¸ºå‚æ•°ä¼ ç»™  <code>initGlobalAPI</code> ï¼Œæœ€ååˆåœ¨ <code>Vue.prototype</code> ä¸ŠæŒ‚è½½äº† <code>$isServer</code> ï¼Œåœ¨ <code>Vue</code> ä¸ŠæŒ‚è½½äº† <code>version</code> å±æ€§ã€‚</p>\n<p><code>initGlobalAPI</code> çš„ä½œç”¨æ˜¯åœ¨ <code>Vue</code> æ„é€ å‡½æ•°ä¸ŠæŒ‚è½½é™æ€å±æ€§å’Œæ–¹æ³•ï¼Œ<code>Vue</code> åœ¨ç»è¿‡ <code>initGlobalAPI</code> ä¹‹åï¼Œä¼šå˜æˆè¿™æ ·ï¼š</p>\n<pre><code class=\"js\">// src/core/index.js / src/core/global-api/index.js\nVue.config\nVue.util = util\nVue.set = set\nVue.delete = del\nVue.nextTick = util.nextTick\nVue.options = {\n    components: {\n        KeepAlive\n    },\n    directives: {},\n    filters: {},\n    _base: Vue\n}\nVue.use\nVue.mixin\nVue.cid = 0\nVue.extend\nVue.component = function(){}\nVue.directive = function(){}\nVue.filter = function(){}\n\nVue.prototype.$isServer\nVue.version = &#39;__VERSION__&#39;\n</code></pre>\n<p>å…¶ä¸­ï¼Œç¨å¾®å¤æ‚ä¸€ç‚¹çš„å°±æ˜¯ <code>Vue.options</code>ï¼Œå¤§å®¶ç¨å¾®åˆ†æåˆ†æå°±ä¼šçŸ¥é“ä»–çš„ç¡®é•¿æˆé‚£ä¸ªæ ·å­ã€‚ä¸‹ä¸€ä¸ªå°±æ˜¯ <code>web-runtime.js</code> æ–‡ä»¶äº†ï¼Œ<code>web-runtime.js</code> æ–‡ä»¶ä¸»è¦åšäº†ä¸‰ä»¶äº‹å„¿ï¼š</p>\n<blockquote>\n<p>1ã€è¦†ç›– <code>Vue.config</code> çš„å±æ€§ï¼Œå°†å…¶è®¾ç½®ä¸ºå¹³å°ç‰¹æœ‰çš„ä¸€äº›æ–¹æ³•<br>2ã€<code>Vue.options.directives</code> å’Œ <code>Vue.options.components</code> å®‰è£…å¹³å°ç‰¹æœ‰çš„æŒ‡ä»¤å’Œç»„ä»¶<br>3ã€åœ¨ <code>Vue.prototype</code> ä¸Šå®šä¹‰ <code>__patch__</code> å’Œ <code>$mount</code></p>\n</blockquote>\n<p>ç»è¿‡ <code>web-runtime.js</code> æ–‡ä»¶ä¹‹åï¼Œ<code>Vue</code> å˜æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p>\n<pre><code class=\"js\">// å®‰è£…å¹³å°ç‰¹å®šçš„utils\nVue.config.isUnknownElement = isUnknownElement\nVue.config.isReservedTag = isReservedTag\nVue.config.getTagNamespace = getTagNamespace\nVue.config.mustUseProp = mustUseProp\n// å®‰è£…å¹³å°ç‰¹å®šçš„ æŒ‡ä»¤ å’Œ ç»„ä»¶\nVue.options = {\n    components: {\n        KeepAlive,\n        Transition,\n        TransitionGroup\n    },\n    directives: {\n        model,\n        show\n    },\n    filters: {},\n    _base: Vue\n}\nVue.prototype.__patch__\nVue.prototype.$mount\n</code></pre>\n<p>è¿™é‡Œå¤§å®¶è¦æ³¨æ„çš„æ˜¯ <code>Vue.options</code> çš„å˜åŒ–ã€‚å¦å¤–è¿™é‡Œçš„ <code>$mount</code> æ–¹æ³•å¾ˆç®€å•ï¼š</p>\n<pre><code class=\"js\">Vue.prototype.$mount = function (\n  el?: string | Element,\n  hydrating?: boolean\n): Component {\n  el = el &amp;&amp; inBrowser ? query(el) : undefined\n  return this._mount(el, hydrating)\n}\n</code></pre>\n<p>é¦–å…ˆæ ¹æ®æ˜¯å¦æ˜¯æµè§ˆå™¨ç¯å¢ƒå†³å®šè¦ä¸è¦ <code>query(el)</code> è·å–å…ƒç´ ï¼Œç„¶åå°† <code>el</code> ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>this._mount()</code>ã€‚</p>\n<p>æœ€åä¸€ä¸ªå¤„ç† Vue çš„æ–‡ä»¶å°±æ˜¯å…¥å£æ–‡ä»¶ <code>web-runtime-with-compiler.js</code> äº†ï¼Œè¯¥æ–‡ä»¶åšäº†ä¸¤ä»¶äº‹ï¼š</p>\n<p>1ã€ç¼“å­˜æ¥è‡ª <code>web-runtime.js</code> æ–‡ä»¶çš„ <code>$mount</code> å‡½æ•°</p>\n<pre><code class=\"js\">const mount = Vue.prototype.$mount\n</code></pre>\n<p>ç„¶åè¦†ç›–è¦†ç›–äº† <code>Vue.prototype.$mount</code></p>\n<p>2ã€åœ¨ Vue ä¸ŠæŒ‚è½½ <code>compile</code></p>\n<pre><code class=\"js\">Vue.compile = compileToFunctions\n</code></pre>\n<p>compileToFunctions å‡½æ•°çš„ä½œç”¨ï¼Œå°±æ˜¯å°†æ¨¡æ¿ <code>template</code> ç¼–è¯‘ä¸ºrenderå‡½æ•°ã€‚</p>\n<p>è‡³æ­¤ï¼Œæˆ‘ä»¬ç®—æ˜¯è¿˜åŸäº† Vue æ„é€ å‡½æ•°ï¼Œæ€»ç»“ä¸€ä¸‹ï¼š</p>\n<blockquote>\n<p>1ã€<code>Vue.prototype</code> ä¸‹çš„å±æ€§å’Œæ–¹æ³•çš„æŒ‚è½½ä¸»è¦æ˜¯åœ¨ <code>src/core/instance</code> ç›®å½•ä¸­çš„ä»£ç å¤„ç†çš„</p>\n<p>2ã€<code>Vue</code> ä¸‹çš„é™æ€å±æ€§å’Œæ–¹æ³•çš„æŒ‚è½½ä¸»è¦æ˜¯åœ¨ <code>src/core/global-api</code> ç›®å½•ä¸‹çš„ä»£ç å¤„ç†çš„</p>\n<p>3ã€<code>web-runtime.js</code> ä¸»è¦æ˜¯æ·»åŠ webå¹³å°ç‰¹æœ‰çš„é…ç½®ã€ç»„ä»¶å’ŒæŒ‡ä»¤ï¼Œ<code>web-runtime-with-compiler.js</code> ç»™Vueçš„ <code>$mount</code> æ–¹æ³•æ·»åŠ  <code>compiler</code> ç¼–è¯‘å™¨ï¼Œæ”¯æŒ <code>template</code>ã€‚</p>\n</blockquote>\n<h2 id=\"å››ã€ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­\"><a href=\"#å››ã€ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­\" class=\"headerlink\" title=\"å››ã€ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­\"></a><span style=\"color: #ff6600;\">å››ã€ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­</span></h2><p>åœ¨äº†è§£äº† <code>Vue</code> æ„é€ å‡½æ•°çš„è®¾è®¡ä¹‹åï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­å°±è¦ç™»åœºäº†ï¼ŒæŒå£°æœ‰è¯·ï¼š</p>\n<pre><code class=\"js\">let v = new Vue({\n    el: &#39;#app&#39;,\n    data: {\n        a: 1,\n        b: [1, 2, 3]\n    }\n})\n</code></pre>\n<p>å¥½å§ï¼Œæˆ‘æ‰¿è®¤è¿™æ®µä»£ç ä½ å®¶æ²¡æ»¡æœˆçš„å­©å­éƒ½ä¼šå†™äº†ã€‚è¿™æ®µä»£ç å°±æ˜¯æˆ‘ä»¬è´¯ç©¿å§‹ç»ˆçš„ä¾‹å­ï¼Œå®ƒå°±æ˜¯è¿™ç¯‡æ–‡ç« çš„ä¸»çº¿ï¼Œåœ¨åç»­çš„è®²è§£ä¸­ï¼Œéƒ½ä¼šä»¥è¿™æ®µä»£ç ä¸ºä¾‹ï¼Œå½“è®²åˆ°å¿…è¦çš„åœ°æ–¹ï¼Œä¼šä¸ºå…¶æ·»åŠ é€‰é¡¹ï¼Œæ¯”å¦‚è®²è®¡ç®—å±æ€§çš„æ—¶å€™å½“ç„¶è¦åŠ ä¸Šä¸€ä¸ª <code>computed</code> å±æ€§äº†ã€‚ä¸è¿‡åœ¨æœ€å¼€å§‹ï¼Œæˆ‘åªä¼ é€’äº†ä¸¤ä¸ªé€‰é¡¹ <code>el</code> ä»¥åŠ <code>data</code>ï¼Œâ€œæˆ‘ä»¬çœ‹çœ‹æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œè®©æˆ‘ä»¬æ‹­ç›®ä»¥å¾…â€œ â€”- NBAçƒæ˜Ÿåœ¨æ¥å—é‡‡è®¿æ—¶æœ€å–œæ¬¢è¯´è¿™å¥è¯ã€‚</p>\n<p><em>å½“æˆ‘ä»¬æŒ‰ç…§ä¾‹å­é‚£æ ·ç¼–ç ä½¿ç”¨Vueçš„æ—¶å€™ï¼ŒVueéƒ½åšäº†ä»€ä¹ˆï¼Ÿ</em></p>\n<p>æƒ³è¦çŸ¥é“Vueéƒ½å¹²äº†ä»€ä¹ˆï¼Œæˆ‘ä»¬å°±è¦æ‰¾åˆ° Vue åˆå§‹åŒ–ç¨‹åºï¼ŒæŸ¥çœ‹ Vue æ„é€ å‡½æ•°ï¼š</p>\n<pre><code class=\"js\">function Vue (options) {\n  if (process.env.NODE_ENV !== &#39;production&#39; &amp;&amp;\n    !(this instanceof Vue)) {\n    warn(&#39;Vue is a constructor and should be called with the `new` keyword&#39;)\n  }\n  this._init(options)\n}\n</code></pre>\n<p>æˆ‘ä»¬å‘ç°ï¼Œ<code>_init()</code> æ–¹æ³•å°±æ˜¯Vueè°ƒç”¨çš„ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œç„¶åå°†æˆ‘ä»¬çš„å‚æ•° <code>options</code> é€ä¼ äº†è¿‡å»ã€‚åœ¨è°ƒç”¨ <code>_init()</code> ä¹‹å‰ï¼Œè¿˜åšäº†ä¸€ä¸ªå®‰å…¨æ¨¡å¼çš„å¤„ç†ï¼Œå‘Šè¯‰å¼€å‘è€…å¿…é¡»ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦è°ƒç”¨ Vueã€‚æ ¹æ®ä¹‹å‰æˆ‘ä»¬çš„æ•´ç†ï¼Œ<code>_init()</code> æ–¹æ³•åº”è¯¥æ˜¯åœ¨ <code>src/core/instance/init.js</code> æ–‡ä»¶ä¸­å®šä¹‰çš„ï¼Œæˆ‘ä»¬æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æŸ¥çœ‹ <code>_init()</code> æ–¹æ³•ï¼š</p>\n<pre><code class=\"js\">  Vue.prototype._init = function (options?: Object) {\n    const vm: Component = this\n    // a uid\n    vm._uid = uid++\n    // a flag to avoid this being observed\n    vm._isVue = true\n    // merge options\n    if (options &amp;&amp; options._isComponent) {\n      // optimize internal component instantiation\n      // since dynamic options merging is pretty slow, and none of the\n      // internal component options needs special treatment.\n      initInternalComponent(vm, options)\n    } else {\n      vm.$options = mergeOptions(\n        resolveConstructorOptions(vm.constructor),\n        options || {},\n        vm\n      )\n    }\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== &#39;production&#39;) {\n      initProxy(vm)\n    } else {\n      vm._renderProxy = vm\n    }\n\n    // expose real self\n    vm._self = vm\n    initLifecycle(vm)\n    initEvents(vm)\n    callHook(vm, &#39;beforeCreate&#39;)\n    initState(vm)\n    callHook(vm, &#39;created&#39;)\n    initRender(vm)\n  }\n</code></pre>\n<p><code>_init()</code> æ–¹æ³•åœ¨ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œåœ¨ <code>this</code> å¯¹è±¡ä¸Šå®šä¹‰äº†ä¸¤ä¸ªå±æ€§ï¼š<code>_uid</code> å’Œ <code>_isVue</code>ï¼Œç„¶ååˆ¤æ–­æœ‰æ²¡æœ‰å®šä¹‰ <code>options._isComponent</code>ï¼Œåœ¨ä½¿ç”¨ Vue å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯ä¸ä¼šä½¿ç”¨ <code>_isComponent</code> é€‰é¡¹çš„ï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯ Vue å†…éƒ¨ä½¿ç”¨çš„ï¼ŒæŒ‰ç…§æœ¬èŠ‚å¼€å¤´çš„ä¾‹å­ï¼Œè¿™é‡Œä¼šèµ° <code>else</code> åˆ†æ”¯ï¼Œä¹Ÿå°±æ˜¯è¿™æ®µä»£ç ï¼š</p>\n<pre><code class=\"js\">  vm.$options = mergeOptions(\n    resolveConstructorOptions(vm.constructor),\n    options || {},\n    vm\n  )\n</code></pre>\n<p>è¿™æ · <code>Vue</code> ç¬¬ä¸€æ­¥æ‰€åšçš„äº‹æƒ…å°±æ¥äº†ï¼š<span style=\"color: red;\"><em>ä½¿ç”¨ç­–ç•¥å¯¹è±¡åˆå¹¶å‚æ•°é€‰é¡¹</em></span></p>\n<p>å¯ä»¥å‘ç°ï¼ŒVueä½¿ç”¨ <code>mergeOptions</code> æ¥å¤„ç†æˆ‘ä»¬è°ƒç”¨Vueæ—¶ä¼ å…¥çš„å‚æ•°é€‰é¡¹(options)ï¼Œç„¶åå°†è¿”å›å€¼èµ‹å€¼ç»™ <code>this.$options</code> (vm === this)ï¼Œä¼ ç»™ <code>mergeOptions</code> æ–¹æ³•ä¸‰ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸€çœ‹ï¼Œé¦–å…ˆæ˜¯ï¼š<code>resolveConstructorOptions(vm.constructor)</code>ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼š</p>\n<pre><code class=\"js\">export function resolveConstructorOptions (Ctor: Class&lt;Component&gt;) {\n  let options = Ctor.options\n  if (Ctor.super) {\n    const superOptions = Ctor.super.options\n    const cachedSuperOptions = Ctor.superOptions\n    const extendOptions = Ctor.extendOptions\n    if (superOptions !== cachedSuperOptions) {\n      // super option changed\n      Ctor.superOptions = superOptions\n      extendOptions.render = options.render\n      extendOptions.staticRenderFns = options.staticRenderFns\n      extendOptions._scopeId = options._scopeId\n      options = Ctor.options = mergeOptions(superOptions, extendOptions)\n      if (options.name) {\n        options.components[options.name] = Ctor\n      }\n    }\n  }\n  return options\n}\n</code></pre>\n<p>è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•° <code>Ctor</code>ï¼Œé€šè¿‡ä¼ å…¥çš„ <code>vm.constructor</code> æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå…¶å®å°±æ˜¯ <code>Vue</code> æ„é€ å‡½æ•°æœ¬èº«ã€‚æ‰€ä»¥ä¸‹é¢è¿™å¥ä»£ç ï¼š</p>\n<pre><code class=\"js\">let options = Ctor.options\n</code></pre>\n<p>ç›¸å½“äºï¼š</p>\n<pre><code class=\"js\">let options = Vue.options\n</code></pre>\n<p>å¤§å®¶è¿˜è®°å¾— <code>Vue.options</code> å—ï¼Ÿåœ¨å¯»æ‰¾Vueæ„é€ å‡½æ•°ä¸€èŠ‚é‡Œï¼Œæˆ‘ä»¬æ•´ç†äº† <code>Vue.options</code> åº”è¯¥é•¿æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p>\n<pre><code class=\"js\">Vue.options = {\n    components: {\n        KeepAlive,\n        Transition,\n        TransitionGroup\n    },\n    directives: {\n        model,\n        show\n    },\n    filters: {},\n    _base: Vue\n}\n</code></pre>\n<p>ä¹‹ååˆ¤æ–­æ˜¯å¦å®šä¹‰äº† <code>Vue.super</code> ï¼Œè¿™ä¸ªæ˜¯ç”¨æ¥å¤„ç†ç»§æ‰¿çš„ï¼Œæˆ‘ä»¬åç»­å†è®²ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œ<code>resolveConstructorOptions</code> æ–¹æ³•ç›´æ¥è¿”å›äº† <code>Vue.options</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼ é€’ç»™ <code>mergeOptions</code> æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ <code>Vue.options</code>ã€‚</p>\n<p>ä¼ ç»™ <code>mergeOptions</code> æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬è°ƒç”¨Vueæ„é€ å‡½æ•°æ—¶çš„å‚æ•°é€‰é¡¹ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ <code>vm</code> ä¹Ÿå°±æ˜¯ <code>this</code> å¯¹è±¡ï¼ŒæŒ‰ç…§æœ¬èŠ‚å¼€å¤´çš„ä¾‹å­é‚£æ ·ä½¿ç”¨ Vueï¼Œæœ€ç»ˆè¿è¡Œçš„ä»£ç åº”è¯¥å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">  vm.$options = mergeOptions(\n      // Vue.options\n    {\n        components: {\n            KeepAlive,\n            Transition,\n            TransitionGroup\n        },\n        directives: {\n            model,\n            show\n        },\n        filters: {},\n        _base: Vue\n    },\n    // è°ƒç”¨Vueæ„é€ å‡½æ•°æ—¶ä¼ å…¥çš„å‚æ•°é€‰é¡¹ options\n    {\n        el: &#39;#app&#39;,\n        data: {\n            a: 1,\n            b: [1, 2, 3]\n        }\n    },\n    // this\n    vm\n  )\n</code></pre>\n<p>äº†è§£äº†è¿™äº›ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹çœ‹ <code>mergeOptions</code> åˆ°åº•åšäº†äº›ä»€ä¹ˆäº†ï¼Œæ ¹æ®å¼•ç”¨å¯»æ‰¾åˆ° <code>mergeOptions</code> åº”è¯¥æ˜¯åœ¨ <code>src/core/util/options.js</code> æ–‡ä»¶ä¸­å®šä¹‰çš„ã€‚è¿™ä¸ªæ–‡ä»¶ç¬¬ä¸€æ¬¡çœ‹å¯èƒ½ä¼šå¤´å¤§ï¼Œä¸‹é¢æ˜¯æˆ‘å¤„ç†åçš„ç®€ç•¥å±•ç¤ºï¼Œå¤§å®¶çœ‹ä¸Šå»åº”è¯¥æ›´å®¹æ˜“ç†è§£äº†ï¼š</p>\n<pre><code class=\"js\">// 1ã€å¼•ç”¨ä¾èµ–\nimport Vue from &#39;../instance/index&#39;\nå…¶ä»–å¼•ç”¨...\n\n// 2ã€åˆå¹¶çˆ¶å­é€‰é¡¹å€¼ä¸ºæœ€ç»ˆå€¼çš„ç­–ç•¥å¯¹è±¡ï¼Œæ­¤æ—¶ strats æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå› ä¸º config.optionMergeStrategies = Object.create(null)\nconst strats = config.optionMergeStrategies\n// 3ã€åœ¨ strats å¯¹è±¡ä¸Šå®šä¹‰ä¸å‚æ•°é€‰é¡¹åç§°ç›¸åŒçš„æ–¹æ³•\nstrats.el = \nstrats.propsData = function (parent, child, vm, key){}\nstrats.data = function (parentVal, childVal, vm)\n\nconfig._lifecycleHooks.forEach(hook =&gt; {\n  strats[hook] = mergeHook\n})\n\nconfig._assetTypes.forEach(function (type) {\n  strats[type + &#39;s&#39;] = mergeAssets\n})\n\nstrats.watch = function (parentVal, childVal)\n\nstrats.props =\nstrats.methods =\nstrats.computed = function (parentVal: ?Object, childVal: ?Object)\n// é»˜è®¤çš„åˆå¹¶ç­–ç•¥ï¼Œå¦‚æœæœ‰ `childVal` åˆ™è¿”å› `childVal` æ²¡æœ‰åˆ™è¿”å› `parentVal`\nconst defaultStrat = function (parentVal: any, childVal: any): any {\n  return childVal === undefined\n    ? parentVal\n    : childVal\n}\n\n// 4ã€mergeOptions ä¸­æ ¹æ®å‚æ•°é€‰é¡¹è°ƒç”¨åŒåçš„ç­–ç•¥æ–¹æ³•è¿›è¡Œåˆå¹¶å¤„ç†\nexport function mergeOptions (\n  parent: Object,\n  child: Object,\n  vm?: Component\n): Object {\n\n  // å…¶ä»–ä»£ç \n  ...\n\n  const options = {}\n  let key\n  for (key in parent) {\n    mergeField(key)\n  }\n  for (key in child) {\n    if (!hasOwn(parent, key)) {\n      mergeField(key)\n    }\n  }\n  function mergeField (key) {\n    const strat = strats[key] || defaultStrat\n    options[key] = strat(parent[key], child[key], vm, key)\n  }\n  return options\n\n}\n</code></pre>\n<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘çœç•¥äº†ä¸€äº›å·¥å…·å‡½æ•°ï¼Œä¾‹å¦‚ <code>mergeHook</code> å’Œ <code>mergeAssets</code> ç­‰ç­‰ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯è¿™æ®µä»£ç ï¼š</p>\n<pre><code class=\"js\">config._lifecycleHooks.forEach(hook =&gt; {\n  strats[hook] = mergeHook\n})\n\nconfig._assetTypes.forEach(function (type) {\n  strats[type + &#39;s&#39;] = mergeAssets\n})\n</code></pre>\n<p><code>config</code> å¯¹è±¡å¼•ç”¨è‡ª <code>src/core/config.js</code> æ–‡ä»¶ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯åœ¨ <code>strats</code> ä¸‹æ·»åŠ äº†ç›¸åº”çš„ç”Ÿå‘½å‘¨æœŸé€‰é¡¹çš„åˆå¹¶ç­–ç•¥å‡½æ•°ä¸º <code>mergeHook</code>ï¼Œæ·»åŠ æŒ‡ä»¤(directives)ã€ç»„ä»¶(components)ã€è¿‡æ»¤å™¨(filters)ç­‰é€‰é¡¹çš„åˆå¹¶ç­–ç•¥å‡½æ•°ä¸º <code>mergeAssets</code>ã€‚</p>\n<p>è¿™æ ·çœ‹æ¥å°±æ¸…æ™°å¤šäº†ï¼Œæ‹¿æˆ‘ä»¬è´¯ç©¿æœ¬æ–‡çš„ä¾‹å­æ¥è¯´ï¼š</p>\n<pre><code class=\"js\">let v = new Vue({\n    el: &#39;#app&#39;,\n    data: {\n        a: 1,\n        b: [1, 2, 3]\n    }\n})\n</code></pre>\n<p>å…¶ä¸­ <code>el</code> é€‰é¡¹ä¼šä½¿ç”¨ <code>defaultStrat</code> é»˜è®¤ç­–ç•¥å‡½æ•°å¤„ç†ï¼Œ<code>data</code> é€‰é¡¹åˆ™ä¼šä½¿ç”¨ <code>strats.data</code> ç­–ç•¥å‡½æ•°å¤„ç†ï¼Œå¹¶ä¸”æ ¹æ® <code>strats.data</code> ä¸­çš„é€»è¾‘ï¼Œ<code>strats.data</code> æ–¹æ³•æœ€ç»ˆä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ï¼š<code>mergedInstanceDataFn</code>ã€‚</p>\n<p>è¿™é‡Œå°±ä¸è¯¦ç»†çš„è®²è§£æ¯ä¸€ä¸ªç­–ç•¥å‡½æ•°çš„å†…å®¹äº†ï¼Œåç»­éƒ½ä¼šè®²åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯æŠ“ä½ä¸»çº¿ç†æ¸…æ€è·¯ä¸ºä¸»ï¼Œåªéœ€è¦çŸ¥é“Vueåœ¨å¤„ç†é€‰é¡¹çš„æ—¶å€™ï¼Œä½¿ç”¨äº†ä¸€ä¸ªç­–ç•¥å¯¹è±¡å¯¹çˆ¶å­é€‰é¡¹è¿›è¡Œåˆå¹¶ã€‚å¹¶å°†æœ€ç»ˆçš„å€¼èµ‹å€¼ç»™å®ä¾‹ä¸‹çš„ <code>$options</code> å±æ€§å³ï¼š<code>this.$options</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç»§ç»­æŸ¥çœ‹ <code>_init()</code> æ–¹æ³•åœ¨åˆå¹¶å®Œé€‰é¡¹ä¹‹åï¼Œåˆåšäº†ä»€ä¹ˆï¼š</p>\n<p>åˆå¹¶å®Œé€‰é¡¹ä¹‹åï¼ŒVue ç¬¬äºŒéƒ¨åšçš„äº‹æƒ…å°±æ¥äº†ï¼š<span style=\"color: red;\"><em>åˆå§‹åŒ–å·¥ä½œä¸Vueå®ä¾‹å¯¹è±¡çš„è®¾è®¡</em></span></p>\n<p>å‰é¢è®²äº† Vue æ„é€ å‡½æ•°çš„è®¾è®¡ï¼Œå¹¶ä¸”æ•´ç†äº† <em>VueåŸå‹å±æ€§ä¸æ–¹æ³•</em> å’Œ <em>Vueé™æ€å±æ€§ä¸æ–¹æ³•</em>ï¼Œè€Œ Vue å®ä¾‹å¯¹è±¡å°±æ˜¯é€šè¿‡æ„é€ å‡½æ•°åˆ›é€ å‡ºæ¥çš„ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ Vue å®ä¾‹å¯¹è±¡æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Œä¸‹é¢çš„ä»£ç æ˜¯ <code>_init()</code> æ–¹æ³•åˆå¹¶å®Œé€‰é¡¹ä¹‹åçš„ä»£ç ï¼š</p>\n<pre><code class=\"js\">    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== &#39;production&#39;) {\n      initProxy(vm)\n    } else {\n      vm._renderProxy = vm\n    }\n\n    // expose real self\n    vm._self = vm\n    initLifecycle(vm)\n    initEvents(vm)\n    callHook(vm, &#39;beforeCreate&#39;)\n    initState(vm)\n    callHook(vm, &#39;created&#39;)\n    initRender(vm)\n</code></pre>\n<p>æ ¹æ®ä¸Šé¢çš„ä»£ç ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¼šä¸ºå®ä¾‹æ·»åŠ ä¸¤ä¸ªå±æ€§ï¼Œå¹¶ä¸”å±æ€§å€¼éƒ½ä¸ºå®ä¾‹æœ¬èº«ï¼š</p>\n<pre><code class=\"js\">vm._renderProxy = vm\nvm._self = vm\n</code></pre>\n<p>ç„¶åï¼Œè°ƒç”¨äº†å››ä¸ª <code>init*</code> æ–¹æ³•åˆ†åˆ«ä¸ºï¼š<code>initLifecycle</code>ã€<code>initEvents</code>ã€<code>initState</code>ã€<code>initRender</code>ï¼Œä¸”åœ¨ <code>initState</code> å‰ååˆ†åˆ«å›è°ƒäº†ç”Ÿå‘½å‘¨æœŸé’©å­ <code>beforeCreate</code> å’Œ <code>created</code>ï¼Œè€Œ <code>initRender</code> æ˜¯åœ¨ <code>created</code> é’©å­æ‰§è¡Œä¹‹åæ‰§è¡Œçš„ï¼Œçœ‹åˆ°è¿™é‡Œï¼Œä¹Ÿå°±æ˜ç™½äº†ä¸ºä»€ä¹ˆ created çš„æ—¶å€™ä¸èƒ½æ“ä½œDOMäº†ã€‚å› ä¸ºè¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰æ¸²æŸ“çœŸæ­£çš„DOMå…ƒç´ åˆ°æ–‡æ¡£ä¸­ã€‚<code>created</code> ä»…ä»…ä»£è¡¨æ•°æ®çŠ¶æ€çš„åˆå§‹åŒ–å®Œæˆã€‚</p>\n<p>æ ¹æ®å››ä¸ª <code>init*</code> æ–¹æ³•çš„å¼•ç”¨å…³ç³»æ‰“å¼€å¯¹åº”çš„æ–‡ä»¶æŸ¥çœ‹å¯¹åº”çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å‘ç°ï¼Œè¿™äº›æ–¹æ³•æ˜¯åœ¨å¤„ç†Vueå®ä¾‹å¯¹è±¡ï¼Œä»¥åŠåšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œï¼Œç±»ä¼¼æ•´ç†Vueæ„é€ å‡½æ•°ä¸€æ ·ï¼Œæˆ‘åŒæ ·é’ˆå¯¹Vueå®ä¾‹åšäº†å±æ€§å’Œæ–¹æ³•çš„æ•´ç†ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">// åœ¨ Vue.prototype._init ä¸­æ·»åŠ çš„å±æ€§         **********************************************************\nthis._uid = uid++\nthis._isVue = true\nthis.$options = {\n    components,\n    directives,\n    filters,\n    _base,\n    el,\n    data: mergedInstanceDataFn()\n}\nthis._renderProxy = this\nthis._self = this\n\n// åœ¨ initLifecycle ä¸­æ·»åŠ çš„å±æ€§        **********************************************************\nthis.$parent = parent\nthis.$root = parent ? parent.$root : this\n\nthis.$children = []\nthis.$refs = {}\n\nthis._watcher = null\nthis._inactive = false\nthis._isMounted = false\nthis._isDestroyed = false\nthis._isBeingDestroyed = false\n\n// åœ¨ initEvents     ä¸­æ·»åŠ çš„å±æ€§         **********************************************************\nthis._events = {}\nthis._updateListeners = function(){}\n\n// åœ¨ initState ä¸­æ·»åŠ çš„å±æ€§        **********************************************************\nthis._watchers = []\n    // initData\n    this._data\n\n// åœ¨ initRender     ä¸­æ·»åŠ çš„å±æ€§     **********************************************************\nthis.$vnode = null // the placeholder node in parent tree\nthis._vnode = null // the root of the child tree\nthis._staticTrees = null\nthis.$slots\nthis.$scopedSlots\nthis._c\nthis.$createElement\n</code></pre>\n<p>ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªVueå®ä¾‹æ‰€åŒ…å«çš„å±æ€§å’Œæ–¹æ³•ï¼Œé™¤æ­¤ä¹‹å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ <code>initEvents</code> ä¸­é™¤äº†æ·»åŠ å±æ€§ä¹‹å¤–ï¼Œå¦‚æœæœ‰ <code>vm.$options._parentListeners</code> è¿˜è¦è°ƒç”¨ <code>vm._updateListeners()</code> æ–¹æ³•ï¼Œåœ¨ <code>initState</code> ä¸­åˆè°ƒç”¨äº†ä¸€äº›å…¶ä»–initæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">export function initState (vm: Component) {\n  vm._watchers = []\n  initProps(vm)\n  initMethods(vm)\n  initData(vm)\n  initComputed(vm)\n  initWatch(vm)\n}\n</code></pre>\n<p>æœ€ååœ¨ <code>initRender</code> ä¸­å¦‚æœæœ‰ <code>vm.$options.el</code> è¿˜è¦è°ƒç”¨ <code>vm.$mount(vm.$options.el)</code>ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">  if (vm.$options.el) {\n    vm.$mount(vm.$options.el)\n  }\n</code></pre>\n<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¦‚æœä¸ä¼ é€’ <code>el</code> é€‰é¡¹å°±éœ€è¦æ‰‹åŠ¨ mount çš„åŸå› äº†ã€‚</p>\n<p>é‚£ä¹ˆæˆ‘ä»¬ä¾ç…§æˆ‘ä»¬æœ¬èŠ‚å¼€å¤´çš„çš„ä¾‹å­ï¼Œä»¥åŠåˆå§‹åŒ–çš„å…ˆåé¡ºåºæ¥é€ä¸€çœ‹ä¸€çœ‹éƒ½å‘ç”Ÿäº†ä»€ä¹ˆã€‚æˆ‘ä»¬å°† <code>initState</code> ä¸­çš„ <code>init*</code> æ–¹æ³•å±•å¼€æ¥çœ‹ï¼Œæ‰§è¡Œé¡ºåºåº”è¯¥æ˜¯è¿™æ ·çš„ï¼ˆä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ‰§è¡Œï¼‰ï¼š</p>\n<pre><code>initLifecycle(vm)\ninitEvents(vm)\ncallHook(vm, &#39;beforeCreate&#39;)\ninitProps(vm)\ninitMethods(vm)\ninitData(vm)\ninitComputed(vm)\ninitWatch(vm)\ncallHook(vm, &#39;created&#39;)\ninitRender(vm)\n</code></pre><p>é¦–å…ˆæ˜¯ <code>initLifecycle</code>ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨å°±æ˜¯åœ¨å®ä¾‹ä¸Šæ·»åŠ ä¸€äº›å±æ€§ï¼Œç„¶åæ˜¯ <code>initEvents</code>ï¼Œç”±äº <code>vm.$options._parentListeners</code> çš„å€¼ä¸º <code>undefined</code> æ‰€ä»¥ä¹Ÿä»…ä»…æ˜¯åœ¨å®ä¾‹ä¸Šæ·»åŠ å±æ€§ï¼Œ <code>vm._updateListeners(listeners)</code> å¹¶ä¸ä¼šæ‰§è¡Œï¼Œç”±äºæˆ‘ä»¬åªä¼ é€’äº† <code>el</code> å’Œ <code>data</code>ï¼Œæ‰€ä»¥ <code>initProps</code>ã€<code>initMethods</code>ã€<code>initComputed</code>ã€<code>initWatch</code> è¿™å››ä¸ªæ–¹æ³•ä»€ä¹ˆéƒ½ä¸ä¼šåšï¼Œåªæœ‰ <code>initData</code> ä¼šæ‰§è¡Œã€‚æœ€åæ˜¯ <code>initRender</code>ï¼Œé™¤äº†åœ¨å®ä¾‹ä¸Šæ·»åŠ ä¸€äº›å±æ€§å¤–ï¼Œç”±äºæˆ‘ä»¬ä¼ é€’äº† <code>el</code> é€‰é¡¹ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œ <code>vm.$mount(vm.$options.el)</code>ã€‚</p>\n<p>ç»¼ä¸Šæ‰€è¿°ï¼šæŒ‰ç…§æˆ‘ä»¬çš„ä¾‹å­é‚£æ ·å†™ï¼Œåˆå§‹åŒ–å·¥ä½œåªåŒ…å«ä¸¤ä¸ªä¸»è¦å†…å®¹å³ï¼š<code>initData</code> å’Œ <code>initRender</code>ã€‚</p>\n<h2 id=\"äº”ã€é€šè¿‡initDataçœ‹Vueçš„æ•°æ®å“åº”ç³»ç»Ÿ\"><a href=\"#äº”ã€é€šè¿‡initDataçœ‹Vueçš„æ•°æ®å“åº”ç³»ç»Ÿ\" class=\"headerlink\" title=\"äº”ã€é€šè¿‡initDataçœ‹Vueçš„æ•°æ®å“åº”ç³»ç»Ÿ\"></a><span style=\"color: #ff6600;\">äº”ã€é€šè¿‡<code>initData</code>çœ‹Vueçš„æ•°æ®å“åº”ç³»ç»Ÿ</span></h2><p>Vueçš„æ•°æ®å“åº”ç³»ç»ŸåŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š<code>Observer</code>ã€<code>Dep</code>ã€<code>Watcher</code>ã€‚å…³äºæ•°æ®å“åº”ç³»ç»Ÿçš„å†…å®¹çœŸçš„å·²ç»è¢«æ–‡ç« è®²çƒ‚äº†ï¼Œæ‰€ä»¥æˆ‘å°±ç®€å•çš„è¯´ä¸€ä¸‹ï¼ŒåŠ›æ±‚å¤§å®¶èƒ½ç†è§£å°±okï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹ä¸€ä¸‹ <code>initData</code> ä¸­çš„ä»£ç ï¼š</p>\n<pre><code>function initData (vm: Component) {\n  let data = vm.$options.data\n  data = vm._data = typeof data === &#39;function&#39;\n    ? data.call(vm)\n    : data || {}\n  if (!isPlainObject(data)) {\n    data = {}\n    process.env.NODE_ENV !== &#39;production&#39; &amp;&amp; warn(\n      &#39;data functions should return an object:\\n&#39; +\n      &#39;https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function&#39;,\n      vm\n    )\n  }\n  // proxy data on instance\n  const keys = Object.keys(data)\n  const props = vm.$options.props\n  let i = keys.length\n  while (i--) {\n    if (props &amp;&amp; hasOwn(props, keys[i])) {\n      process.env.NODE_ENV !== &#39;production&#39; &amp;&amp; warn(\n        `The data property &quot;${keys[i]}&quot; is already declared as a prop. ` +\n        `Use prop default value instead.`,\n        vm\n      )\n    } else {\n      proxy(vm, keys[i])\n    }\n  }\n  // observe data\n  observe(data)\n  data.__ob__ &amp;&amp; data.__ob__.vmCount++\n}\n</code></pre><p>é¦–å…ˆï¼Œå…ˆæ‹¿åˆ° data æ•°æ®ï¼š<code>let data = vm.$options.data</code>ï¼Œå¤§å®¶è¿˜è®°å¾—æ­¤æ—¶ <code>vm.$options.data</code> çš„å€¼åº”è¯¥æ˜¯é€šè¿‡ <code>mergeOptions</code> åˆå¹¶å¤„ç†åçš„ <code>mergedInstanceDataFn</code> å‡½æ•°å—ï¼Ÿæ‰€ä»¥åœ¨å¾—åˆ° data åï¼Œå®ƒåˆåˆ¤æ–­äº† data çš„æ•°æ®ç±»å‹æ˜¯ä¸æ˜¯ â€˜functionâ€™ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯ï¼šdata è¿˜æ˜¯æˆ‘ä»¬ä¼ å…¥çš„æ•°æ®é€‰é¡¹çš„ dataï¼Œå³ï¼š</p>\n<pre><code>data: {\n    a: 1,\n    b: [1, 2, 3]\n}\n</code></pre><p>ç„¶ååœ¨å®ä¾‹å¯¹è±¡ä¸Šå®šä¹‰ <code>_data</code> å±æ€§ï¼Œè¯¥å±æ€§ä¸ <code>data</code> æ˜¯ç›¸åŒçš„å¼•ç”¨ã€‚</p>\n<p>ç„¶åæ˜¯ä¸€ä¸ª <code>while</code> å¾ªç¯ï¼Œå¾ªç¯çš„ç›®çš„æ˜¯åœ¨å®ä¾‹å¯¹è±¡ä¸Šå¯¹æ•°æ®è¿›è¡Œä»£ç†ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½é€šè¿‡ <code>this.a</code> æ¥è®¿é—® <code>data.a</code> äº†ï¼Œä»£ç çš„å¤„ç†æ˜¯åœ¨ <code>proxy</code> å‡½æ•°ä¸­ï¼Œè¯¥å‡½æ•°éå¸¸ç®€å•ï¼Œä»…ä»…æ˜¯åœ¨å®ä¾‹å¯¹è±¡ä¸Šè®¾ç½®ä¸ <code>data</code> å±æ€§åŒåçš„è®¿é—®å™¨å±æ€§ï¼Œç„¶åä½¿ç”¨ <code>_data</code> åšæ•°æ®åŠ«æŒï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>function proxy (vm: Component, key: string) {\n  if (!isReserved(key)) {\n    Object.defineProperty(vm, key, {\n      configurable: true,\n      enumerable: true,\n      get: function proxyGetter () {\n        return vm._data[key]\n      },\n      set: function proxySetter (val) {\n        vm._data[key] = val\n      }\n    })\n  }\n}\n</code></pre><p>åšå®Œæ•°æ®çš„ä»£ç†ï¼Œå°±æ­£å¼è¿›å…¥å“åº”ç³»ç»Ÿï¼Œ</p>\n<pre><code>observe(data)\n</code></pre><p>æˆ‘ä»¬è¯´è¿‡ï¼Œæ•°æ®å“åº”ç³»ç»Ÿä¸»è¦åŒ…å«ä¸‰éƒ¨åˆ†ï¼š<code>Observer</code>ã€<code>Dep</code>ã€<code>Watcher</code>ï¼Œä»£ç åˆ†åˆ«å­˜æ”¾åœ¨ï¼š<code>observer/index.js</code>ã€<code>observer/dep.js</code> ä»¥åŠ <code>observer/watcher.js</code> æ–‡ä»¶ä¸­ï¼Œè¿™å›æˆ‘ä»¬æ¢ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬å…ˆä¸çœ‹å…¶æºç ï¼Œå¤§å®¶å…ˆè·Ÿç€æˆ‘çš„æ€è·¯æ¥æ€è€ƒï¼Œæœ€åå›å¤´å†å»çœ‹ä»£ç ï¼Œä½ ä¼šæœ‰ä¸€ç§ï¼šâ€å¥¥ï¼Œä¸è¿‡å¦‚æ­¤â€œçš„æ„Ÿè§‰ã€‚</p>\n<p>å‡å¦‚ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code class=\"js\">var data = {\n    a: 1,\n    b: {\n        c: 2\n    }\n}\n\nobserver(data)\n\nnew Watch(&#39;a&#39;, () =&gt; {\n    alert(9)\n})\nnew Watch(&#39;a&#39;, () =&gt; {\n    alert(90)\n})\nnew Watch(&#39;b.c&#39;, () =&gt; {\n    alert(80)\n})\n</code></pre>\n<p>è¿™æ®µä»£ç ç›®çš„æ˜¯ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªæ•°æ®å¯¹è±¡ <code>data</code>ï¼Œç„¶åé€šè¿‡ observer å¯¹å…¶è¿›è¡Œè§‚æµ‹ï¼Œä¹‹åå®šä¹‰äº†ä¸‰ä¸ªè§‚å¯Ÿè€…ï¼Œå½“æ•°æ®æœ‰å˜åŒ–æ—¶ï¼Œæ‰§è¡Œç›¸åº”çš„æ–¹æ³•ï¼Œè¿™ä¸ªåŠŸèƒ½ä½¿ç”¨Vueçš„å®ç°åŸæ¥è¦å¦‚ä½•å»å®ç°ï¼Ÿå…¶å®å°±æ˜¯åœ¨é—® <code>observer</code> æ€ä¹ˆå†™ï¼Ÿ<code>Watch</code> æ„é€ å‡½æ•°åˆæ€ä¹ˆå†™ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬é€ä¸€å®ç°ã€‚</p>\n<p>é¦–å…ˆï¼Œobserver çš„ä½œç”¨æ˜¯ï¼šå°†æ•°æ®å¯¹è±¡dataçš„å±æ€§è½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§ï¼š</p>\n<pre><code>class Observer {\n    constructor (data) {\n        this.walk(data)\n    }\n    walk (data) {\n        // éå† data å¯¹è±¡å±æ€§ï¼Œè°ƒç”¨ defineReactive æ–¹æ³•\n        let keys = Object.keys(data)\n        for(let i = 0; i &lt; keys.length; i++){\n            defineReactive(data, keys[i], data[keys[i]])\n        }\n    }\n}\n\n// defineReactiveæ–¹æ³•ä»…ä»…å°†dataçš„å±æ€§è½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§\nfunction defineReactive (data, key, val) {\n    // é€’å½’è§‚æµ‹å­å±æ€§\n    observer(val)\n\n    Object.defineProperty(data, key, {\n        enumerable: true,\n        configurable: true,\n        get: function () {\n            return val\n        },\n        set: function (newVal) {\n            if(val === newVal){\n                return\n            }\n            // å¯¹æ–°å€¼è¿›è¡Œè§‚æµ‹\n            observer(newVal)\n        }\n    })\n}\n\n// observer æ–¹æ³•é¦–å…ˆåˆ¤æ–­dataæ˜¯ä¸æ˜¯çº¯JavaScriptå¯¹è±¡ï¼Œå¦‚æœæ˜¯ï¼Œè°ƒç”¨ Observer ç±»è¿›è¡Œè§‚æµ‹\nfunction observer (data) {\n    if(Object.prototype.toString.call(data) !== &#39;[object Object]&#39;) {\n        return\n    }\n    new Observer(data)\n}\n</code></pre><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº† observer æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ£€æµ‹äº†æ•°æ®dataæ˜¯ä¸æ˜¯çº¯JavaScriptå¯¹è±¡ï¼Œå¦‚æœæ˜¯å°±è°ƒç”¨ <code>Observer</code> ç±»ï¼Œå¹¶å°† <code>data</code> ä½œä¸ºå‚æ•°é€ä¼ ã€‚åœ¨ <code>Observer</code> ç±»ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>walk</code> æ–¹æ³•å¯¹æ•°æ®dataçš„å±æ€§å¾ªç¯è°ƒç”¨ <code>defineReactive</code> æ–¹æ³•ï¼Œ<code>defineReactive</code> æ–¹æ³•å¾ˆç®€å•ï¼Œä»…ä»…æ˜¯å°†æ•°æ®dataçš„å±æ€§è½¬ä¸ºè®¿é—®å™¨å±æ€§ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œé€’å½’è§‚æµ‹ï¼Œå¦åˆ™åªèƒ½è§‚æµ‹æ•°æ®dataçš„ç›´å±å­å±æ€§ã€‚è¿™æ ·æˆ‘ä»¬çš„ç¬¬ä¸€æ­¥å·¥ä½œå°±å®Œæˆäº†ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹æˆ–è€…è·å–dataå±æ€§å€¼çš„æ—¶å€™ï¼Œé€šè¿‡ <code>get</code> å’Œ <code>set</code> å³èƒ½è·å–åˆ°é€šçŸ¥ã€‚</p>\n<p>æˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ï¼Œæ¥çœ‹ä¸€ä¸‹ <code>Watch</code>ï¼š</p>\n<pre><code>new Watch(&#39;a&#39;, () =&gt; {\n    alert(9)\n})\n</code></pre><p>ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œ<code>Watch</code> è¦æ€ä¹ˆå’Œ <code>observer</code> å…³è”ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿæˆ‘ä»¬çœ‹çœ‹ <code>Watch</code> å®ƒçŸ¥é“äº›ä»€ä¹ˆï¼Œé€šè¿‡ä¸Šé¢è°ƒç”¨ <code>Watch</code> çš„æ–¹å¼ï¼Œä¼ é€’ç»™ <code>Watch</code> ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ â€˜aâ€™ æˆ‘ä»¬å¯ä»¥ç§°å…¶ä¸ºè¡¨è¾¾å¼ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å›è°ƒå‡½æ•°ã€‚æ‰€ä»¥æˆ‘ä»¬ç›®å‰åªèƒ½å†™å‡ºè¿™æ ·çš„ä»£ç ï¼š</p>\n<pre><code>class Watch {\n    constructor (exp, fn) {\n        this.exp = exp\n        this.fn = fn\n    }\n}\n</code></pre><p>é‚£ä¹ˆè¦æ€ä¹ˆå…³è”å‘¢ï¼Œå¤§å®¶çœ‹ä¸‹é¢çš„ä»£ç ä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p>\n<pre><code>class Watch {\n    constructor (exp, fn) {\n        this.exp = exp\n        this.fn = fn\n        data[exp]\n    }\n}\n</code></pre><p>å¤šäº†ä¸€å¥ <code>data[exp]</code>ï¼Œè¿™å¥è¯æ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯åœ¨è·å– <code>data</code> ä¸‹æŸä¸ªå±æ€§çš„å€¼ï¼Œæ¯”å¦‚ exp ä¸º â€˜aâ€™ çš„è¯ï¼Œé‚£ä¹ˆ <code>data[exp]</code> å°±ç›¸å½“äºåœ¨è·å– <code>data.a</code> çš„å€¼ï¼Œé‚£è¿™ä¼šæ”¾ç”Ÿä»€ä¹ˆï¼Ÿå¤§å®¶ä¸è¦å¿˜äº†ï¼Œæ­¤æ—¶æ•°æ® <code>data</code> ä¸‹çš„å±æ€§å·²ç»æ˜¯è®¿é—®å™¨å±æ€§äº†ï¼Œæ‰€ä»¥è¿™ä¹ˆåšçš„ç»“æœä¼šç›´æ¥è§¦å‘å¯¹åº”å±æ€§çš„ <code>get</code> å‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å°±æˆåŠŸçš„å’Œ <code>observer</code> äº§ç”Ÿäº†å…³è”ï¼Œä½†è¿™æ ·è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜æ˜¯æ²¡æœ‰è¾¾åˆ°ç›®çš„ï¼Œä¸è¿‡æˆ‘ä»¬å·²ç»æ— é™æ¥è¿‘äº†ï¼Œæˆ‘ä»¬ç»§ç»­æ€è€ƒçœ‹ä¸€ä¸‹å¯ä¸å¯ä»¥è¿™æ ·ï¼š</p>\n<blockquote>\n<p>æ—¢ç„¶åœ¨ <code>Watch</code> ä¸­å¯¹è¡¨è¾¾å¼æ±‚å€¼ï¼Œèƒ½å¤Ÿè§¦å‘ <code>observer</code> çš„ <code>get</code>ï¼Œé‚£ä¹ˆå¯ä¸å¯ä»¥åœ¨ <code>get</code> ä¸­æ”¶é›† <code>Watch</code> ä¸­å‡½æ•°å‘¢ï¼Ÿ</p>\n</blockquote>\n<p>ç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ <code>Dep</code> å‡ºåœºäº†ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¾èµ–æ”¶é›†å™¨ã€‚æˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼š<code>data</code> ä¸‹çš„æ¯ä¸€ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ <code>Dep</code> å¯¹è±¡ï¼Œåœ¨ <code>get</code> ä¸­æ”¶é›†ä»…é’ˆå¯¹è¯¥å±æ€§çš„ä¾èµ–ï¼Œç„¶ååœ¨ <code>set</code> æ–¹æ³•ä¸­è§¦å‘æ‰€æœ‰æ”¶é›†çš„ä¾èµ–ï¼Œè¿™æ ·å°±æå®šäº†ï¼Œçœ‹å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>class Dep {\n    constructor () {\n        this.subs = []\n    }\n    addSub () {\n        this.subs.push(Dep.target)\n    }\n    notify () {\n        for(let i = 0; i &lt; this.subs.length; i++){\n            this.subs[i].fn()\n        }\n    }\n}\nDep.target = null\nfunction pushTarget(watch){\n    Dep.target = watch\n}\n\nclass Watch {\n    constructor (exp, fn) {\n        this.exp = exp\n        this.fn = fn\n        pushTarget(this)\n        data[exp]\n    }\n}\n</code></pre><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨ <code>Watch</code> ä¸­å¢åŠ äº† <code>pushTarget(this)</code>ï¼Œå¯ä»¥å‘ç°ï¼Œè¿™å¥ä»£ç çš„ä½œç”¨æ˜¯å°† <code>Dep.target</code> çš„å€¼è®¾ç½®ä¸ºè¯¥Watchå¯¹è±¡ã€‚åœ¨ <code>pushTarget</code> ä¹‹åæˆ‘ä»¬æ‰å¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œæ¥ç€ï¼Œæˆ‘ä»¬ä¿®æ”¹ <code>defineReactive</code> ä»£ç å¦‚ä¸‹</p>\n<pre><code>function defineReactive (data, key, val) {\n    observer(val)\n    let dep = new Dep()        // æ–°å¢\n    Object.defineProperty(data, key, {\n        enumerable: true,\n        configurable: true,\n        get: function () {\n            dep.addSub()    // æ–°å¢\n            return val\n        },\n        set: function (newVal) {\n            if(val === newVal){\n                return\n            }\n            observer(newVal)\n            dep.notify()    // æ–°å¢\n        }\n    })\n}\n</code></pre><p>å¦‚æ ‡æ³¨ï¼Œæ–°å¢äº†ä¸‰å¥ä»£ç ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œ<code>Watch</code> ä¸­å¯¹è¡¨è¾¾å¼æ±‚å€¼ä¼šè§¦å‘ <code>get</code> æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨ <code>get</code> æ–¹æ³•ä¸­è°ƒç”¨äº† <code>dep.addSub</code>ï¼Œä¹Ÿå°±æ‰§è¡Œäº†è¿™å¥ä»£ç ï¼š<code>this.subs.push(Dep.target)</code>ï¼Œç”±äºåœ¨è¿™å¥ä»£ç æ‰§è¡Œä¹‹å‰ï¼Œ<code>Dep.target</code> çš„å€¼å·²ç»è¢«è®¾ç½®ä¸ºä¸€ä¸ª <code>Watch</code> å¯¹è±¡äº†ï¼Œæ‰€ä»¥æœ€ç»ˆç»“æœå°±æ˜¯æ”¶é›†äº†ä¸€ä¸ª <code>Watch</code> å¯¹è±¡ï¼Œç„¶ååœ¨ <code>set</code> æ–¹æ³•ä¸­æˆ‘ä»¬è°ƒç”¨äº† <code>dep.notify</code>ï¼Œæ‰€ä»¥å½“dataå±æ€§å€¼å˜åŒ–çš„æ—¶å€™ï¼Œå°±ä¼šé€šè¿‡ <code>dep.notify</code> å¾ªç¯è°ƒç”¨æ‰€æœ‰æ”¶é›†çš„Watchå¯¹è±¡ä¸­çš„å›è°ƒå‡½æ•°ï¼š</p>\n<pre><code>notify () {\n    for(let i = 0; i &lt; this.subs.length; i++){\n        this.subs[i].fn()\n    }\n}\n</code></pre><p>è¿™æ · <code>observer</code>ã€<code>Dep</code>ã€<code>Watch</code> ä¸‰è€…å°±è”ç³»æˆä¸ºä¸€ä¸ªæœ‰æœºçš„æ•´ä½“ï¼Œå®ç°äº†æˆ‘ä»¬æœ€åˆçš„ç›®æ ‡ï¼Œå®Œæ•´çš„ä»£ç å¯ä»¥æˆ³è¿™é‡Œï¼š<a href=\"https://github.com/HcySunYang/observer-dep-watch\" target=\"_blank\" rel=\"external\">observer-dep-watch</a>ã€‚è¿™é‡Œè¿˜ç»™å¤§å®¶æŒ–äº†ä¸ªå‘ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å¤„ç†å¯¹æ•°ç»„çš„è§‚æµ‹ï¼Œç”±äºæ¯”è¾ƒå¤æ‚å¹¶ä¸”è¿™åˆä¸æ˜¯æˆ‘ä»¬è®¨è®ºçš„é‡ç‚¹ï¼Œå¦‚æœå¤§å®¶æƒ³äº†è§£å¯ä»¥æˆ³æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š<a href=\"http://hcysun.me/2016/04/28/JavaScript%E5%AE%9E%E7%8E%B0MVVM%E4%B9%8B%E6%88%91%E5%B0%B1%E6%98%AF%E6%83%B3%E7%9B%91%E6%B5%8B%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%98%E5%8C%96/\">JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–</a>ï¼Œå¦å¤–ï¼Œåœ¨ Watch ä¸­å¯¹è¡¨è¾¾å¼æ±‚å€¼çš„æ—¶å€™ä¹Ÿåªåšäº†ç›´æ¥å­å±æ€§çš„æ±‚å€¼ï¼Œæ‰€ä»¥å¦‚æœ exp çš„å€¼ä¸º â€˜a.bâ€™ çš„æ—¶å€™ï¼Œå°±ä¸å¯ä»¥ç”¨äº†ï¼ŒVueçš„åšæ³•æ˜¯ä½¿ç”¨ <code>.</code> åˆ†å‰²è¡¨è¾¾å¼å­—ç¬¦ä¸²ä¸ºæ•°ç»„ï¼Œç„¶åéå†ä¸€ä¸‹å¯¹å…¶è¿›è¡Œæ±‚å€¼ï¼Œå¤§å®¶å¯ä»¥æŸ¥çœ‹å…¶æºç ã€‚å¦‚ä¸‹ï¼š</p>\n<pre><code>/**\n * Parse simple path.\n */\nconst bailRE = /[^\\w.$]/\nexport function parsePath (path: string): any {\n  if (bailRE.test(path)) {\n    return\n  } else {\n    const segments = path.split(&#39;.&#39;)\n    return function (obj) {\n      for (let i = 0; i &lt; segments.length; i++) {\n        if (!obj) return\n        obj = obj[segments[i]]\n      }\n      return obj\n    }\n  }\n}\n</code></pre><p>Vue çš„æ±‚å€¼ä»£ç æ˜¯åœ¨ <code>src/core/util/lang.js</code> æ–‡ä»¶ä¸­ <code>parsePath</code> å‡½æ•°ä¸­å®ç°çš„ã€‚æ€»ç»“ä¸€ä¸‹Vueçš„ä¾èµ–æ”¶é›†è¿‡ç¨‹åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/vueimgdep.png\" alt=\"Vueçš„ä¾èµ–æ”¶é›†è¿‡ç¨‹\"></p>\n<p>å®é™…ä¸Šï¼ŒVueå¹¶æ²¡æœ‰ç›´æ¥åœ¨ <code>get</code> ä¸­è°ƒç”¨ <code>addSub</code>ï¼Œè€Œæ˜¯è°ƒç”¨çš„ <code>dep.depend</code>ï¼Œç›®çš„æ˜¯å°†å½“å‰çš„ dep å¯¹è±¡æ”¶é›†åˆ° watch å¯¹è±¡ä¸­ï¼Œå¦‚æœè¦å®Œæ•´çš„æµç¨‹ï¼Œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼šï¼ˆå¤§å®¶æ³¨æ„æ•°æ®çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æ‹¥æœ‰è‡ªå·±çš„ <code>dep</code> å¯¹è±¡å’Œ <code>get</code> æ–¹æ³•ã€‚ï¼‰</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/all.png\" alt=\"Vueå®Œæ•´çš„æ”¶é›†ä¾èµ–çš„æµç¨‹\"></p>\n<p>è¿™æ · Vue å°±å»ºç«‹äº†ä¸€å¥—æ•°æ®å“åº”ç³»ç»Ÿï¼Œä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼ŒæŒ‰ç…§æˆ‘ä»¬çš„ä¾‹å­é‚£æ ·å†™ï¼Œåˆå§‹åŒ–å·¥ä½œåªåŒ…å«ä¸¤ä¸ªä¸»è¦å†…å®¹å³ï¼š<code>initData</code> å’Œ <code>initRender</code>ã€‚ç°åœ¨ <code>initData</code> æˆ‘ä»¬åˆ†æå®Œäº†ï¼Œæ¥ä¸‹æ¥çœ‹ä¸€çœ‹ <code>initRender</code></p>\n<h2 id=\"å…­ã€é€šè¿‡initRenderçœ‹Vueçš„-render-æ¸²æŸ“-ä¸-re-render-é‡æ–°æ¸²æŸ“\"><a href=\"#å…­ã€é€šè¿‡initRenderçœ‹Vueçš„-render-æ¸²æŸ“-ä¸-re-render-é‡æ–°æ¸²æŸ“\" class=\"headerlink\" title=\"å…­ã€é€šè¿‡initRenderçœ‹Vueçš„ render(æ¸²æŸ“) ä¸ re-render(é‡æ–°æ¸²æŸ“)\"></a><span style=\"color: #ff6600;\">å…­ã€é€šè¿‡<code>initRender</code>çœ‹Vueçš„ render(æ¸²æŸ“) ä¸ re-render(é‡æ–°æ¸²æŸ“)</span></h2><p>åœ¨ <code>initRender</code> æ–¹æ³•ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä¾‹å­ä¸­ä¼ é€’äº† <code>el</code> é€‰é¡¹ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä»£ç ä¼šæ‰§è¡Œï¼š</p>\n<pre><code>  if (vm.$options.el) {\n    vm.$mount(vm.$options.el)\n  }\n</code></pre><p>è¿™é‡Œï¼Œè°ƒç”¨äº† <code>$mount</code> æ–¹æ³•ï¼Œåœ¨è¿˜åŸVueæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ•´ç†è¿‡æ‰€æœ‰çš„æ–¹æ³•ï¼Œå…¶ä¸­ <code>$mount</code> æ–¹æ³•åœ¨ä¸¤ä¸ªåœ°æ–¹å‡ºç°è¿‡ï¼š</p>\n<p>1ã€åœ¨ <code>web-runtime.js</code> æ–‡ä»¶ä¸­ï¼š</p>\n<pre><code>Vue.prototype.$mount = function (\n  el?: string | Element,\n  hydrating?: boolean\n): Component {\n  el = el &amp;&amp; inBrowser ? query(el) : undefined\n  return this._mount(el, hydrating)\n}\n</code></pre><p>å®ƒçš„ä½œç”¨æ˜¯é€šè¿‡ <code>el</code> è·å–ç›¸åº”çš„DOMå…ƒç´ ï¼Œç„¶åè°ƒç”¨ <code>lifecycle.js</code> æ–‡ä»¶ä¸­çš„ <code>_mount</code> æ–¹æ³•ã€‚</p>\n<p>2ã€åœ¨ <code>web-runtime-with-compiler.js</code> æ–‡ä»¶ä¸­ï¼š</p>\n<pre><code>// ç¼“å­˜äº†æ¥è‡ª web-runtime.js çš„ $mount æ–¹æ³•\nconst mount = Vue.prototype.$mount\n// é‡å†™ $mount æ–¹æ³•\nVue.prototype.$mount = function (\n  el?: string | Element,\n  hydrating?: boolean\n): Component {\n  // æ ¹æ® el è·å–ç›¸åº”çš„DOMå…ƒç´ \n  el = el &amp;&amp; query(el)\n  // ä¸å…è®¸ä½ å°† el æŒ‚è½½åˆ° html æ ‡ç­¾æˆ–è€… body æ ‡ç­¾\n  if (el === document.body || el === document.documentElement) {\n    process.env.NODE_ENV !== &#39;production&#39; &amp;&amp; warn(\n      `Do not mount Vue to &lt;html&gt; or &lt;body&gt; - mount to normal elements instead.`\n    )\n    return this\n  }\n\n  const options = this.$options\n  // å¦‚æœæˆ‘ä»¬æ²¡æœ‰å†™ render é€‰é¡¹ï¼Œé‚£ä¹ˆå°±å°è¯•å°† template æˆ–è€… el è½¬åŒ–ä¸º render å‡½æ•°\n  if (!options.render) {\n    let template = options.template\n    if (template) {\n      if (typeof template === &#39;string&#39;) {\n        if (template.charAt(0) === &#39;#&#39;) {\n          template = idToTemplate(template)\n          /* istanbul ignore if */\n          if (process.env.NODE_ENV !== &#39;production&#39; &amp;&amp; !template) {\n            warn(\n              `Template element not found or is empty: ${options.template}`,\n              this\n            )\n          }\n        }\n      } else if (template.nodeType) {\n        template = template.innerHTML\n      } else {\n        if (process.env.NODE_ENV !== &#39;production&#39;) {\n          warn(&#39;invalid template option:&#39; + template, this)\n        }\n        return this\n      }\n    } else if (el) {\n      template = getOuterHTML(el)\n    }\n    if (template) {\n      const { render, staticRenderFns } = compileToFunctions(template, {\n        warn,\n        shouldDecodeNewlines,\n        delimiters: options.delimiters\n      }, this)\n      options.render = render\n      options.staticRenderFns = staticRenderFns\n    }\n  }\n  // è°ƒç”¨å·²ç»ç¼“å­˜ä¸‹æ¥çš„ web-runtime.js æ–‡ä»¶ä¸­çš„ $mount æ–¹æ³•\n  return mount.call(this, el, hydrating)\n}\n</code></pre><p>åˆ†æä¸€ä¸‹å¯çŸ¥ <code>web-runtime-with-compiler.js</code> çš„é€»è¾‘å¦‚ä¸‹ï¼š</p>\n<p>1ã€ç¼“å­˜æ¥è‡ª <code>web-runtime.js</code> æ–‡ä»¶çš„ <code>$mount</code> æ–¹æ³•</p>\n<p>2ã€åˆ¤æ–­æœ‰æ²¡æœ‰ä¼ é€’ <code>render</code> é€‰é¡¹ï¼Œå¦‚æœæœ‰ç›´æ¥è°ƒç”¨æ¥è‡ª <code>web-runtime.js</code> æ–‡ä»¶çš„ $mount æ–¹æ³•</p>\n<p>3ã€å¦‚æœæ²¡æœ‰ä¼ é€’ <code>render</code> é€‰é¡¹ï¼Œé‚£ä¹ˆæŸ¥çœ‹æœ‰æ²¡æœ‰ <code>template</code> é€‰é¡¹ï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ <code>compileToFunctions</code> å‡½æ•°æ ¹æ®å…¶å†…å®¹ç¼–è¯‘æˆ <code>render</code> å‡½æ•°</p>\n<p>4ã€å¦‚æœæ²¡æœ‰ <code>template</code> é€‰é¡¹ï¼Œé‚£ä¹ˆæŸ¥çœ‹æœ‰æ²¡æœ‰ <code>el</code> é€‰é¡¹ï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ <code>compileToFunctions</code> å‡½æ•°å°†å…¶å†…å®¹(template = getOuterHTML(el))ç¼–è¯‘æˆ <code>render</code> å‡½æ•°</p>\n<p>5ã€å°†ç¼–è¯‘æˆçš„ <code>render</code> å‡½æ•°æŒ‚è½½åˆ° <code>this.$options</code> å±æ€§ä¸‹ï¼Œå¹¶è°ƒç”¨ç¼“å­˜ä¸‹æ¥çš„ <code>web-runtime.js</code> æ–‡ä»¶ä¸­çš„ $mount æ–¹æ³•</p>\n<p>ç®€å•çš„ç”¨ä¸€å¼ å›¾è¡¨ç¤º <code>mount</code> æ–¹æ³•çš„è°ƒç”¨å…³ç³»ï¼Œä»ä¸Šè‡³ä¸‹è°ƒç”¨ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/vueimgmount.png\" alt=\"mountè°ƒç”¨å…³ç³»\"></p>\n<p>ä¸è¿‡ä¸ç®¡æ€æ ·ï¼Œæˆ‘ä»¬å‘ç°è¿™äº›æ­¥éª¤çš„æœ€ç»ˆç›®çš„æ˜¯ç”Ÿæˆ <code>render</code> å‡½æ•°ï¼Œç„¶åå†è°ƒç”¨ <code>lifecycle.js</code> æ–‡ä»¶ä¸­çš„ <code>_mount</code> æ–¹æ³•ï¼Œæˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªæ–¹æ³•åšäº†ä»€ä¹ˆäº‹æƒ…ï¼ŒæŸ¥çœ‹ <code>_mount</code> æ–¹æ³•çš„ä»£ç ï¼Œè¿™æ˜¯ç®€åŒ–è¿‡å¾—ï¼š</p>\n<pre><code>  Vue.prototype._mount = function (\n    el?: Element | void,\n    hydrating?: boolean\n  ): Component {\n    const vm: Component = this\n\n    // åœ¨Vueå®ä¾‹å¯¹è±¡ä¸Šæ·»åŠ  $el å±æ€§ï¼ŒæŒ‡å‘æŒ‚è½½ç‚¹å…ƒç´ \n    vm.$el = el\n\n    // è§¦å‘ beforeMount ç”Ÿå‘½å‘¨æœŸé’©å­\n    callHook(vm, &#39;beforeMount&#39;)\n\n    vm._watcher = new Watcher(vm, () =&gt; {\n      vm._update(vm._render(), hydrating)\n    }, noop)\n\n    // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡mountåˆ™è§¦å‘ mounted ç”Ÿå‘½å‘¨æœŸé’©å­\n    if (vm.$vnode == null) {\n      vm._isMounted = true\n      callHook(vm, &#39;mounted&#39;)\n    }\n    return vm\n  }\n</code></pre><p>ä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œè¯¥æ³¨é‡Šçš„éƒ½æ³¨é‡Šäº†ï¼Œå”¯ä¸€éœ€è¦çœ‹çš„å°±æ˜¯è¿™æ®µä»£ç ï¼š</p>\n<pre><code>vm._watcher = new Watcher(vm, () =&gt; {\n  vm._update(vm._render(), hydrating)\n}, noop)\n</code></pre><p>çœ‹ä¸Šå»å¾ˆçœ¼ç†Ÿæœ‰æ²¡æœ‰ï¼Ÿæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨Vueéƒ½æ˜¯è¿™æ ·ä½¿ç”¨ watchçš„ï¼š</p>\n<pre><code>this.$watch(&#39;a&#39;, (newVal, oldVal) =&gt; {\n\n})\n// æˆ–è€…\nthis.$watch(function(){\n    return this.a + this.b\n}, (newVal, oldVal) =&gt; {\n\n})\n</code></pre><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ è¡¨è¾¾å¼æˆ–è€…å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å¯é€‰çš„é€‰é¡¹ã€‚åŸç†æ˜¯ <code>Watch</code> å†…éƒ¨å¯¹è¡¨è¾¾å¼æ±‚å€¼æˆ–è€…å¯¹å‡½æ•°æ±‚å€¼ä»è€Œè§¦å‘æ•°æ®çš„ <code>get</code> æ–¹æ³•æ”¶é›†ä¾èµ–ã€‚å¯æ˜¯ <code>_mount</code> æ–¹æ³•ä¸­ä½¿ç”¨ <code>Watcher</code> çš„æ—¶å€™ç¬¬ä¸€ä¸ªå‚æ•° <code>vm</code> æ˜¯ä»€ä¹ˆé¬¼ã€‚æˆ‘ä»¬ä¸å¦¨å»çœ‹çœ‹æºç ä¸­ <code>$watch</code> å‡½æ•°æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæ ¹æ®ä¹‹å‰è¿˜åŸVueæ„é€ å‡½æ•°ä¸­æ‰€æ•´ç†çš„å†…å®¹å¯çŸ¥ï¼š<code>$warch</code> æ–¹æ³•æ˜¯åœ¨ <code>src/core/instance/state.js</code> æ–‡ä»¶ä¸­çš„ <code>stateMixin</code> æ–¹æ³•ä¸­å®šä¹‰çš„ï¼Œæºç å¦‚ä¸‹ï¼š</p>\n<pre><code>  Vue.prototype.$watch = function (\n    expOrFn: string | Function,\n    cb: Function,\n    options?: Object\n  ): Function {\n    const vm: Component = this\n    options = options || {}\n    options.user = true\n    const watcher = new Watcher(vm, expOrFn, cb, options)\n    if (options.immediate) {\n      cb.call(vm, watcher.value)\n    }\n    return function unwatchFn () {\n      watcher.teardown()\n    }\n  }\n</code></pre><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ<code>$warch</code> å…¶å®æ˜¯å¯¹ <code>Watcher</code> çš„ä¸€ä¸ªå°è£…ï¼Œå†…éƒ¨çš„ <code>Watcher</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°å®é™…ä¸Šä¹Ÿæ˜¯ <code>vm</code> å³ï¼šVueå®ä¾‹å¯¹è±¡ï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬å¯ä»¥åœ¨ <code>Watcher</code> çš„æºç ä¸­å¾—åˆ°éªŒè¯ï¼Œä»£å¼€ <code>observer/watcher.js</code> æ–‡ä»¶æŸ¥çœ‹ï¼š</p>\n<pre><code class=\"js\">export default class Watcher {\n\n  constructor (\n    vm: Component,\n    expOrFn: string | Function,\n    cb: Function,\n    options?: Object = {}\n  ) {\n\n  }\n}\n</code></pre>\n<p>å¯ä»¥å‘ç°çœŸæ­£çš„ <code>Watcher</code> ç¬¬ä¸€ä¸ªå‚æ•°å®é™…ä¸Šå°±æ˜¯ <code>vm</code>ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¡¨è¾¾å¼æˆ–è€…å‡½æ•°ï¼Œç„¶åä»¥æ­¤ç±»æ¨ï¼Œæ‰€ä»¥ç°åœ¨å†æ¥çœ‹ <code>_mount</code> ä¸­çš„è¿™æ®µä»£ç ï¼š</p>\n<pre><code>vm._watcher = new Watcher(vm, () =&gt; {\n  vm._update(vm._render(), hydrating)\n}, noop)\n</code></pre><p>å¿½ç•¥ç¬¬ä¸€ä¸ªå‚æ•° <code>vm</code>ï¼Œä¹Ÿå°±è¯´ï¼Œ<code>Watcher</code> å†…éƒ¨åº”è¯¥å¯¹ç¬¬äºŒä¸ªå‚æ•°æ±‚å€¼ï¼Œä¹Ÿå°±æ˜¯è¿è¡Œè¿™ä¸ªå‡½æ•°ï¼š</p>\n<pre><code>() =&gt; {\n  vm._update(vm._render(), hydrating)\n}\n</code></pre><p>æ‰€ä»¥ <code>vm._render()</code> å‡½æ•°è¢«ç¬¬ä¸€ä¸ªæ‰§è¡Œï¼Œè¯¥å‡½æ•°åœ¨ <code>src/core/instance/render.js</code> ä¸­ï¼Œè¯¥æ–¹æ³•ä¸­çš„ä»£ç å¾ˆå¤šï¼Œä¸‹é¢æ˜¯ç®€åŒ–è¿‡çš„ï¼š</p>\n<pre><code>  Vue.prototype._render = function (): VNode {\n    const vm: Component = this\n    // è§£æ„å‡º $options ä¸­çš„ render å‡½æ•°\n    const {\n      render,\n      staticRenderFns,\n      _parentVnode\n    } = vm.$options\n    ...\n\n    let vnode\n    try {\n      // è¿è¡Œ render å‡½æ•°\n      vnode = render.call(vm._renderProxy, vm.$createElement)\n    } catch (e) {\n      ...\n    }\n\n    // set parent\n    vnode.parent = _parentVnode\n    return vnode\n  }\n</code></pre><p><code>_render</code> æ–¹æ³•é¦–å…ˆä» <code>vm.$options</code> ä¸­è§£æ„å‡º <code>render</code> å‡½æ•°ï¼Œå¤§å®¶åº”è¯¥è®°å¾—ï¼š<code>vm.$options.render</code> æ–¹æ³•æ˜¯åœ¨ <code>web-runtime-with-compiler.js</code> æ–‡ä»¶ä¸­é€šè¿‡ <code>compileToFunctions</code> æ–¹æ³•å°† <code>template</code> æˆ– <code>el</code> ç¼–è¯‘è€Œæ¥çš„ã€‚è§£æ„å‡º <code>render</code> å‡½æ•°åï¼Œæ¥ä¸‹æ¥ä¾¿æ‰§è¡Œäº†è¯¥æ–¹æ³•ï¼š</p>\n<pre><code>vnode = render.call(vm._renderProxy, vm.$createElement)\n</code></pre><p>å…¶ä¸­ä½¿ç”¨ <code>call</code> æŒ‡å®šäº† <code>render</code> å‡½æ•°çš„ä½œç”¨åŸŸç¯å¢ƒä¸º <code>vm._renderProxy</code>ï¼Œè¿™ä¸ªå±æ€§åœ¨æˆ‘ä»¬æ•´ç†å®ä¾‹å¯¹è±¡çš„æ—¶å€™çŸ¥é“ï¼Œä»–æ˜¯åœ¨ <code>Vue.prototype._init</code> æ–¹æ³•ä¸­è¢«æ·»åŠ çš„ï¼Œå³ï¼š<code>vm._renderProxy = vm</code>ï¼Œå…¶å®å°±æ˜¯Vueå®ä¾‹å¯¹è±¡æœ¬èº«ï¼Œç„¶åä¼ é€’äº†ä¸€ä¸ªå‚æ•°ï¼š<code>vm.$createElement</code>ã€‚é‚£ä¹ˆ <code>render</code> å‡½æ•°åˆ°åº•æ˜¯å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿè®©æˆ‘ä»¬æ ¹æ®ä¸Šé¢é‚£å¥ä»£ç çŒœä¸€çŒœï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ <code>render</code> å‡½æ•°æ˜¯ä» <code>template</code> æˆ– <code>el</code> ç¼–è¯‘è€Œæ¥çš„ï¼Œå¦‚æœæ²¡é”™çš„è¯åº”è¯¥æ˜¯è¿”å›ä¸€ä¸ªè™šæ‹ŸDOMå¯¹è±¡ã€‚æˆ‘ä»¬ä¸å¦¨ä½¿ç”¨ <code>console.log</code> æ‰“å°ä¸€ä¸‹ <code>render</code> å‡½æ•°ï¼Œå½“æˆ‘ä»¬çš„æ¨¡æ¿è¿™æ ·ç¼–å†™æ—¶ï¼š</p>\n<pre><code>&lt;ul id=&quot;app&quot;&gt;\n  &lt;li&gt;{{a}}&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre><p>æ‰“å°çš„ <code>render</code> å‡½æ•°å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/vueimgr2.png\" alt=\"renderå‡½æ•°1\"></p>\n<p>æˆ‘ä»¬ä¿®æ”¹æ¨¡æ¿ä¸ºï¼š</p>\n<pre><code>&lt;ul id=&quot;app&quot;&gt;\n  &lt;li v-for=&quot;i in b&quot;&gt;{{a}}&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre><p>æ‰“å°å‡ºæ¥çš„ <code>render</code> å‡½æ•°å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/vueimgr3.png\" alt=\"renderå‡½æ•°2\"></p>\n<p>å…¶å®äº†è§£Vue2.xç‰ˆæœ¬çš„åŒå­¦éƒ½çŸ¥é“ï¼ŒVueæä¾›äº† <code>render</code> é€‰é¡¹ï¼Œä½œä¸º <code>template</code> çš„ä»£æ›¿æ–¹æ¡ˆï¼ŒåŒæ—¶ä¸ºJavaScriptæä¾›äº†å®Œå…¨ç¼–ç¨‹çš„èƒ½åŠ›ï¼Œä¸‹é¢ä¸¤ç§ç¼–å†™æ¨¡æ¿çš„æ–¹å¼å®é™…æ˜¯ç­‰ä»·çš„ï¼š</p>\n<pre><code class=\"js\">// æ–¹æ¡ˆä¸€ï¼š\nnew Vue({\n    el: &#39;#app&#39;,\n    data: {\n        a: 1\n    },\n    template: &#39;&lt;ul&gt;&lt;li&gt;{{a}}&lt;/li&gt;&lt;li&gt;{{a}}&lt;/li&gt;&lt;/ul&gt;&#39;\n})\n\n// æ–¹æ¡ˆäºŒï¼š\nnew Vue({\n    el: &#39;#app&#39;,\n    render: function (createElement) {\n        createElement(&#39;ul&#39;, [\n            createElement(&#39;li&#39;, this.a),\n            createElement(&#39;li&#39;, this.a)\n        ])\n    }\n})\n</code></pre>\n<p>ç°åœ¨æˆ‘ä»¬å†æ¥çœ‹æˆ‘ä»¬æ‰“å°çš„ <code>render</code> å‡½æ•°ï¼š</p>\n<pre><code>function anonymous() {\n    with(this){\n        return _c(&#39;ul&#39;, { \n            attrs: {&quot;id&quot;: &quot;app&quot;}\n        },[\n            _c(&#39;li&#39;, [_v(_s(a))])\n        ])\n    }\n}\n</code></pre><p>æ˜¯ä¸æ˜¯ä¸æˆ‘ä»¬è‡ªå·±å†™ <code>render</code> å‡½æ•°å¾ˆåƒï¼Ÿå› ä¸º render å‡½æ•°çš„ä½œç”¨åŸŸè¢«ç»‘å®šåˆ°äº†Vueå®ä¾‹ï¼Œå³ï¼š<code>render.call(vm._renderProxy, vm.$createElement)</code>ï¼Œæ‰€ä»¥ä¸Šé¢ä»£ç ä¸­ <code>_c</code>ã€<code>_v</code>ã€<code>_s</code> ä»¥åŠå˜é‡ <code>a</code>ç›¸å½“äºVueå®ä¾‹ä¸‹çš„æ–¹æ³•å’Œå˜é‡ã€‚å¤§å®¶è¿˜è®°å¾—è¯¸å¦‚ <code>_c</code>ã€<code>_v</code>ã€<code>_s</code> è¿™æ ·çš„æ–¹æ³•åœ¨å“ªé‡Œå®šä¹‰çš„å—ï¼Ÿæˆ‘ä»¬åœ¨æ•´ç†Vueæ„é€ å‡½æ•°çš„æ—¶å€™çŸ¥é“ï¼Œä»–ä»¬åœ¨ <code>src/core/instance/render.js</code> æ–‡ä»¶ä¸­çš„ <code>renderMixin</code> æ–¹æ³•ä¸­å®šä¹‰ï¼Œé™¤äº†è¿™äº›ä¹‹å¤–è¿˜æœ‰è¯¸å¦‚ï¼š<code>_l</code>ã€ <code>_m</code>ã€ <code>_o</code> ç­‰ç­‰ã€‚å…¶ä¸­ <code>_l</code> å°±åœ¨æˆ‘ä»¬ä½¿ç”¨ <code>v-for</code> æŒ‡ä»¤çš„æ—¶å€™å‡ºç°äº†ã€‚æ‰€ä»¥ç°åœ¨å¤§å®¶çŸ¥é“ä¸ºä»€ä¹ˆè¿™äº›æ–¹æ³•éƒ½è¢«å®šä¹‰åœ¨ <code>render.js</code> æ–‡ä»¶ä¸­äº†å§ï¼Œå› ä¸ºä»–ä»¬å°±æ˜¯ä¸ºäº†æ„é€ å‡º <code>render</code> å‡½æ•°è€Œå­˜åœ¨çš„ã€‚</p>\n<p>ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº† <code>render</code> å‡½æ•°çš„é•¿ç›¸ï¼Œä¹ŸçŸ¥é“äº† <code>render</code> å‡½æ•°çš„ä½œç”¨åŸŸæ˜¯Vueå®ä¾‹æœ¬èº«å³ï¼š<code>this</code>(æˆ–<code>vm</code>)ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬æ‰§è¡Œ <code>render</code> å‡½æ•°æ—¶ï¼Œå…¶ä¸­çš„å˜é‡å¦‚ï¼š<code>a</code>ï¼Œå°±ç›¸å½“äºï¼š<code>this.a</code>ï¼Œæˆ‘ä»¬çŸ¥é“è¿™æ˜¯åœ¨æ±‚å€¼ï¼Œæ‰€ä»¥ <code>_mount</code> ä¸­çš„è¿™æ®µä»£ç ï¼š</p>\n<pre><code>vm._watcher = new Watcher(vm, () =&gt; {\n  vm._update(vm._render(), hydrating)\n}, noop)\n</code></pre><p>å½“ <code>vm._render</code> æ‰§è¡Œçš„æ—¶å€™ï¼Œæ‰€ä¾èµ–çš„å˜é‡å°±ä¼šè¢«æ±‚å€¼ï¼Œå¹¶è¢«æ”¶é›†ä¸ºä¾èµ–ã€‚æŒ‰ç…§Vueä¸­ <code>watcher.js</code> çš„é€»è¾‘ï¼Œå½“ä¾èµ–çš„å˜é‡æœ‰å˜åŒ–æ—¶ä¸ä»…ä»…å›è°ƒå‡½æ•°è¢«æ‰§è¡Œï¼Œå®é™…ä¸Šè¿˜è¦é‡æ–°æ±‚å€¼ï¼Œå³è¿˜è¦æ‰§è¡Œä¸€éï¼š</p>\n<pre><code>() =&gt; {\n  vm._update(vm._render(), hydrating)\n}\n</code></pre><p>è¿™å®é™…ä¸Šå°±åšåˆ°äº† <code>re-render</code>ï¼Œå› ä¸º <code>vm._update</code> å°±æ˜¯æ–‡ç« å¼€å¤´æ‰€è¯´çš„è™šæ‹ŸDOMä¸­çš„æœ€åä¸€æ­¥ï¼š<code>patch</code></p>\n<p><code>vm_render</code> æ–¹æ³•æœ€ç»ˆè¿”å›ä¸€ä¸ª <code>vnode</code> å¯¹è±¡ï¼Œå³è™šæ‹ŸDOMï¼Œç„¶åä½œä¸º <code>vm_update</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’äº†è¿‡å»ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ <code>vm_update</code> çš„é€»è¾‘ï¼Œåœ¨ <code>src/core/instance/lifecycle.js</code> æ–‡ä»¶ä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š</p>\n<pre><code class=\"js\">    if (!prevVnode) {\n      // initial render\n      vm.$el = vm.__patch__(\n        vm.$el, vnode, hydrating, false /* removeOnly */,\n        vm.$options._parentElm,\n        vm.$options._refElm\n      )\n    } else {\n      // updates\n      vm.$el = vm.__patch__(prevVnode, vnode)\n    }\n</code></pre>\n<p>å¦‚æœè¿˜æ²¡æœ‰ <code>prevVnode</code> è¯´æ˜æ˜¯é¦–æ¬¡æ¸²æŸ“ï¼Œç›´æ¥åˆ›å»ºçœŸå®DOMã€‚å¦‚æœå·²ç»æœ‰äº† <code>prevVnode</code> è¯´æ˜ä¸æ˜¯é¦–æ¬¡æ¸²æŸ“ï¼Œé‚£ä¹ˆå°±é‡‡ç”¨ <code>patch</code> ç®—æ³•è¿›è¡Œå¿…è¦çš„DOMæ“ä½œã€‚è¿™å°±æ˜¯Vueæ›´æ–°DOMçš„é€»è¾‘ã€‚åªä¸è¿‡æˆ‘ä»¬æ²¡æœ‰å°† virtual DOM å†…éƒ¨çš„å®ç°ã€‚</p>\n<p>ç°åœ¨æˆ‘ä»¬æ¥å¥½å¥½ç†ç†æ€è·¯ï¼Œå½“æˆ‘ä»¬å†™å¦‚ä¸‹ä»£ç æ—¶ï¼š</p>\n<pre><code>new Vue({\n    el: &#39;#app&#39;,\n    data: {\n        a: 1,\n        b: [1, 2, 3]\n    }\n})\n</code></pre><p>Vue æ‰€åšçš„äº‹ï¼š</p>\n<blockquote>\n<p>1ã€æ„å»ºæ•°æ®å“åº”ç³»ç»Ÿï¼Œä½¿ç”¨ <code>Observer</code> å°†æ•°æ®dataè½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§ï¼›å°† <code>el</code> ç¼–è¯‘ä¸º <code>render</code> å‡½æ•°ï¼Œ<code>render</code> å‡½æ•°è¿”å›å€¼ä¸ºè™šæ‹ŸDOM</p>\n<p>2ã€åœ¨ <code>_mount</code> ä¸­å¯¹ <code>_update</code> æ±‚å€¼ï¼Œè€Œ <code>_update</code> åˆä¼šå¯¹ <code>render</code> æ±‚å€¼ï¼Œ<code>render</code> å†…éƒ¨åˆä¼šå¯¹ä¾èµ–çš„å˜é‡æ±‚å€¼ï¼Œæ”¶é›†ä¸ºè¢«æ±‚å€¼çš„å˜é‡çš„ä¾èµ–ï¼Œå½“å˜é‡æ”¹å˜æ—¶ï¼Œ<code>_update</code> åˆä¼šé‡æ–°æ‰§è¡Œä¸€éï¼Œä»è€Œåšåˆ° <code>re-render</code>ã€‚</p>\n</blockquote>\n<p>ç”¨ä¸€å¼ è¯¦ç»†ä¸€ç‚¹çš„å›¾è¡¨ç¤ºå°±æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/vueimgdetail.png\" alt=\"è¯¦ç»†æµç¨‹\"></p>\n<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬ä»å¤§ä½“æµç¨‹ï¼ŒæŒ‘ç€é‡ç‚¹çš„èµ°äº†ä¸€éVueï¼Œä½†æ˜¯è¿˜æœ‰å¾ˆå¤šç»†èŠ‚æˆ‘ä»¬æ²¡æœ‰æåŠï¼Œæ¯”å¦‚ï¼š</p>\n<p>1ã€å°†æ¨¡æ¿è½¬ä¸º <code>render</code> å‡½æ•°çš„æ—¶å€™ï¼Œå®é™…æ˜¯å…ˆç”Ÿæˆçš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œå†å°†æŠ½è±¡è¯­æ³•æ ‘è½¬æˆçš„ <code>render</code> å‡½æ•°ï¼Œè€Œä¸”è¿™ä¸€æ•´å¥—çš„ä»£ç æˆ‘ä»¬ä¹Ÿæ²¡æœ‰æåŠï¼Œå› ä¸ºä»–åœ¨å¤æ‚äº†ï¼Œå…¶å®è¿™éƒ¨åˆ†å†…å®¹å°±æ˜¯åœ¨å®Œæ­£åˆ™ã€‚</p>\n<p>2ã€æˆ‘ä»¬ä¹Ÿæ²¡æœ‰è¯¦ç»†çš„è®² Virtual DOM çš„å®ç°åŸç†ï¼Œç½‘ä¸Šå·²ç»æœ‰æ–‡ç« è®²äº†ï¼Œå¤§å®¶å¯ä»¥æœä¸€æœ</p>\n<p>3ã€æˆ‘ä»¬çš„ä¾‹å­ä¸­ä»…ä»…ä¼ é€’äº† <code>el</code> ï¼Œ<code>data</code> é€‰é¡¹ï¼Œå¤§å®¶çŸ¥é“ Vue æ”¯æŒçš„é€‰é¡¹å¾ˆå¤šï¼Œæ¯”å¦‚æˆ‘ä»¬éƒ½æ²¡æœ‰è®²åˆ°ï¼Œä½†éƒ½æ˜¯è§¦ç±»æ—é€šçš„ï¼Œæ¯”å¦‚ä½ ææ¸…æ¥šäº† <code>data</code> é€‰é¡¹å†å»çœ‹ <code>computed</code> é€‰é¡¹æˆ–è€… <code>props</code> é€‰é¡¹å°±ä¼šå¾ˆå®¹æ˜“ï¼Œæ¯”å¦‚ä½ çŸ¥é“äº† <code>Watcher</code> çš„å·¥ä½œæœºåˆ¶å†å»çœ‹ <code>watch</code> é€‰é¡¹å°±ä¼šå¾ˆå®¹æ˜“ã€‚</p>\n<p>æœ¬ç¯‡æ–‡ç« ä½œä¸ºVueæºç çš„å¯è’™æ–‡ç« ï¼Œä¹Ÿè®¸è¿˜æœ‰å¾ˆå¤šç¼ºé™·ï¼Œå…¨å½“æŠ›ç –å¼•ç‰äº†ã€‚</p>\n","site":{"data":{}},"excerpt":"<p>åŸæœ¬æ–‡ç« çš„åå­—å«åšã€Šæºç è§£æã€‹ï¼Œä¸è¿‡åæ¥æƒ³æƒ³ï¼Œè¿˜æ˜¯ç”¨â€œæºç å­¦ä¹ â€æ¥çš„åˆé€‚ä¸€ç‚¹ï¼Œåœ¨æ²¡æœ‰å½»åº•æŒæ¡æºç ä¸­çš„æ¯ä¸€ä¸ªå­—æ¯ä¹‹å‰ï¼Œâ€œè§£æâ€å°±æœ‰ç‚¹æ ‡é¢˜å…šäº†ã€‚å»ºè®®åœ¨çœ‹è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œæœ€å¥½æ‰“å¼€2.1.7çš„æºç å¯¹ç…§ç€çœ‹ï¼Œè¿™æ ·å¯èƒ½æ›´å®¹æ˜“ç†è§£ã€‚å¦å¤–æœ¬äººæ°´å¹³æœ‰é™ï¼Œæ–‡ä¸­æœ‰é”™è¯¯æˆ–ä¸å¦¥çš„åœ°æ–¹æœ›å¤§å®¶å¤šå¤šæŒ‡æ­£å…±åŒæˆé•¿ã€‚</p>\n<p>è¡¥å……ï¼šVue 2.2 åˆšåˆšå‘å¸ƒï¼Œä½œä¸ºä¸€ä¸ªç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦ä»Vueä»£ç çš„ç»„ç»‡ï¼ŒVueæ„é€ å‡½æ•°çš„è¿˜åŸï¼ŒåŸå‹çš„è®¾è®¡ï¼Œä»¥åŠå‚æ•°é€‰é¡¹çš„å¤„ç†å’Œå·²ç»è¢«å†™çƒ‚äº†çš„æ•°æ®ç»‘å®šä¸å¦‚ä½•ä½¿ç”¨ Virtual DOM æ›´æ–°è§†å›¾å…¥æ‰‹ã€‚ä»æ•´ä½“çš„å¤§æ–¹å‘è§‚å¯Ÿæ¡†æ¶ï¼Œè¿™ä¹ˆçœ‹æ¥ <code>V2.1.7</code> å¯¹äºç†è§£ <code>V2.2</code> çš„ä»£ç ä¸ä¼šæœ‰å¤ªå¤§çš„å½±å“ã€‚è¯¥ç³»åˆ—æ–‡ç« çš„åç»­æ–‡ç« ï¼Œéƒ½ä¼šä»æœ€æ–°çš„æºç å…¥æ‰‹ï¼Œå¹¶å¯¹æ”¹åŠ¨çš„åœ°æ–¹åšç›¸åº”çš„æç¤ºã€‚</p>","more":"<p>å¾ˆä¹…ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼š<a href=\"http://hcysun.me/2016/04/28/JavaScript%E5%AE%9E%E7%8E%B0MVVM%E4%B9%8B%E6%88%91%E5%B0%B1%E6%98%AF%E6%83%B3%E7%9B%91%E6%B5%8B%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%98%E5%8C%96/\">JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–</a>ï¼Œæ–‡ç« å¼€å¤´æåˆ°äº†æˆ‘å†™åšå®¢çš„é£æ ¼ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œåªå†™åŠªåŠ›è®©å°ç™½ï¼Œç”šè‡³æ˜¯å°å­¦ç”Ÿéƒ½èƒ½çœ‹æ˜ç™½çš„æ–‡ç« ã€‚è¿™ä¸å…ä¼šå¯¼è‡´å¯¹äºæŸäº›åŒå­¦æ¥è¯´è¿™ç¯‡æ–‡ç« æœ‰äº›å¢¨è¿¹ï¼Œæ‰€ä»¥å¤§å®¶æ ¹æ®è‡ªå·±çš„å–œå¥½ï¼Œå¯ä»¥è¯¦ç»†çš„çœ‹ï¼Œä¹Ÿå¯ä»¥è·³è·ƒç€çœ‹ã€‚</p>\n<h2 id=\"ä¸€ã€ä»äº†è§£ä¸€ä¸ªå¼€æºé¡¹ç›®å…¥æ‰‹\"><a href=\"#ä¸€ã€ä»äº†è§£ä¸€ä¸ªå¼€æºé¡¹ç›®å…¥æ‰‹\" class=\"headerlink\" title=\"ä¸€ã€ä»äº†è§£ä¸€ä¸ªå¼€æºé¡¹ç›®å…¥æ‰‹\"></a><span style=\"color: #ff6600;\">ä¸€ã€ä»äº†è§£ä¸€ä¸ªå¼€æºé¡¹ç›®å…¥æ‰‹<span></span></span></h2><p>è¦çœ‹ä¸€ä¸ªé¡¹ç›®çš„æºç ï¼Œä¸è¦ä¸€ä¸Šæ¥å°±çœ‹ï¼Œå…ˆå»äº†è§£ä¸€ä¸‹é¡¹ç›®æœ¬èº«çš„å…ƒæ•°æ®å’Œä¾èµ–ï¼Œé™¤æ­¤ä¹‹å¤–æœ€å¥½ä¹Ÿäº†è§£ä¸€ä¸‹ PR è§„åˆ™ï¼ŒIssue Reporting è§„åˆ™ç­‰ç­‰ã€‚ç‰¹åˆ«æ˜¯â€œå‰ç«¯â€å¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬åœ¨çœ‹æºç ä¹‹å‰ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„åº”è¯¥æ˜¯ï¼š<code>package.json</code>æ–‡ä»¶ã€‚</p>\n<p>åœ¨ <code>package.json</code> æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æœ€åº”è¯¥å…³æ³¨çš„å°±æ˜¯ <code>scripts</code> å­—æ®µå’Œ <code>devDependencies</code> ä»¥åŠ <code>dependencies</code> å­—æ®µï¼Œé€šè¿‡ <code>scripts</code> å­—æ®µæˆ‘ä»¬å¯ä»¥çŸ¥é“é¡¹ç›®ä¸­å®šä¹‰çš„è„šæœ¬å‘½ä»¤ï¼Œé€šè¿‡ <code>devDependencies</code> å’Œ <code>dependencies</code> å­—æ®µæˆ‘ä»¬å¯ä»¥äº†è§£é¡¹ç›®çš„ä¾èµ–æƒ…å†µã€‚</p>\n<p>äº†è§£äº†è¿™äº›ä¹‹åï¼Œå¦‚æœæœ‰ä¾èµ–æˆ‘ä»¬å°± <code>npm install</code> å®‰è£…ä¾èµ–å°±okäº†ã€‚</p>\n<p>é™¤äº† <code>package.json</code> ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜è¦é˜…è¯»é¡¹ç›®çš„è´¡çŒ®è§„åˆ™æ–‡æ¡£ï¼Œäº†è§£å¦‚ä½•å¼€å§‹ï¼Œä¸€ä¸ªå¥½çš„å¼€æºé¡¹ç›®è‚¯å®šä¼šåŒ…å«è¿™éƒ¨åˆ†å†…å®¹çš„ï¼ŒVueä¹Ÿä¸ä¾‹å¤–ï¼š<a href=\"https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md\" target=\"_blank\" rel=\"external\">https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md</a>ï¼Œåœ¨è¿™ä¸ªæ–‡æ¡£é‡Œè¯´æ˜äº†ä¸€äº›è¡Œä¸ºå‡†åˆ™ï¼ŒPRæŒ‡å—ï¼ŒIssue Reporting æŒ‡å—ï¼ŒDevelopment Setup ä»¥åŠ é¡¹ç›®ç»“æ„ã€‚é€šè¿‡é˜…è¯»è¿™äº›å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£é¡¹ç›®å¦‚ä½•å¼€å§‹ï¼Œå¦‚ä½•å¼€å‘ä»¥åŠç›®å½•çš„è¯´æ˜ï¼Œä¸‹é¢æ˜¯å¯¹é‡è¦ç›®å½•å’Œæ–‡ä»¶çš„ç®€å•ä»‹ç»ï¼Œè¿™äº›å†…å®¹ä½ éƒ½å¯ä»¥å»è‡ªå·±é˜…è¯»è·å–ï¼š</p>\n<pre><code>â”œâ”€â”€ build --------------------------------- æ„å»ºç›¸å…³çš„æ–‡ä»¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¸éœ€è¦åŠ¨\nâ”œâ”€â”€ dist ---------------------------------- æ„å»ºåæ–‡ä»¶çš„è¾“å‡ºç›®å½•\nâ”œâ”€â”€ examples ------------------------------ å­˜æ”¾ä¸€äº›ä½¿ç”¨Vueå¼€å‘çš„åº”ç”¨æ¡ˆä¾‹\nâ”œâ”€â”€ flow ---------------------------------- ç±»å‹å£°æ˜ï¼Œä½¿ç”¨å¼€æºé¡¹ç›® [Flow](https://flowtype.org/)\nâ”œâ”€â”€ package.json -------------------------- ä¸è§£é‡Š\nâ”œâ”€â”€ test ---------------------------------- åŒ…å«æ‰€æœ‰æµ‹è¯•æ–‡ä»¶\nâ”œâ”€â”€ src ----------------------------------- è¿™ä¸ªæ˜¯æˆ‘ä»¬æœ€åº”è¯¥å…³æ³¨çš„ç›®å½•ï¼ŒåŒ…å«äº†æºç \nâ”‚   â”œâ”€â”€ entries --------------------------- åŒ…å«äº†ä¸åŒçš„æ„å»ºæˆ–åŒ…çš„å…¥å£æ–‡ä»¶\nâ”‚   â”‚   â”œâ”€â”€ web-runtime.js ---------------- è¿è¡Œæ—¶æ„å»ºçš„å…¥å£ï¼Œè¾“å‡º dist/vue.common.js æ–‡ä»¶ï¼Œä¸åŒ…å«æ¨¡æ¿(template)åˆ°renderå‡½æ•°çš„ç¼–è¯‘å™¨ï¼Œæ‰€ä»¥ä¸æ”¯æŒ `template` é€‰é¡¹ï¼Œæˆ‘ä»¬ä½¿ç”¨vueé»˜è®¤å¯¼å‡ºçš„å°±æ˜¯è¿™ä¸ªè¿è¡Œæ—¶çš„ç‰ˆæœ¬ã€‚å¤§å®¶ä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„\nâ”‚   â”‚   â”œâ”€â”€ web-runtime-with-compiler.js -- ç‹¬ç«‹æ„å»ºç‰ˆæœ¬çš„å…¥å£ï¼Œè¾“å‡º dist/vue.jsï¼Œå®ƒåŒ…å«æ¨¡æ¿(template)åˆ°renderå‡½æ•°çš„ç¼–è¯‘å™¨\nâ”‚   â”‚   â”œâ”€â”€ web-compiler.js --------------- vue-template-compiler åŒ…çš„å…¥å£æ–‡ä»¶\nâ”‚   â”‚   â”œâ”€â”€ web-server-renderer.js -------- vue-server-renderer åŒ…çš„å…¥å£æ–‡ä»¶\nâ”‚   â”œâ”€â”€ compiler -------------------------- ç¼–è¯‘å™¨ä»£ç çš„å­˜æ”¾ç›®å½•ï¼Œå°† template ç¼–è¯‘ä¸º render å‡½æ•°\nâ”‚   â”‚   â”œâ”€â”€ parser ------------------------ å­˜æ”¾å°†æ¨¡æ¿å­—ç¬¦ä¸²è½¬æ¢æˆå…ƒç´ æŠ½è±¡è¯­æ³•æ ‘çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ codegen ----------------------- å­˜æ”¾ä»æŠ½è±¡è¯­æ³•æ ‘(AST)ç”Ÿæˆrenderå‡½æ•°çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ optimizer.js ------------------ åˆ†æé™æ€æ ‘ï¼Œä¼˜åŒ–vdomæ¸²æŸ“\nâ”‚   â”œâ”€â”€ core ------------------------------ å­˜æ”¾é€šç”¨çš„ï¼Œå¹³å°æ— å…³çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ observer ---------------------- ååº”ç³»ç»Ÿï¼ŒåŒ…å«æ•°æ®è§‚æµ‹çš„æ ¸å¿ƒä»£ç \nâ”‚   â”‚   â”œâ”€â”€ vdom -------------------------- åŒ…å«è™šæ‹ŸDOMåˆ›å»º(creation)å’Œæ‰“è¡¥ä¸(patching)çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ instance ---------------------- åŒ…å«Vueæ„é€ å‡½æ•°è®¾è®¡ç›¸å…³çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ global-api -------------------- åŒ…å«ç»™Vueæ„é€ å‡½æ•°æŒ‚è½½å…¨å±€æ–¹æ³•(é™æ€æ–¹æ³•)æˆ–å±æ€§çš„ä»£ç \nâ”‚   â”‚   â”œâ”€â”€ components -------------------- åŒ…å«æŠ½è±¡å‡ºæ¥çš„é€šç”¨ç»„ä»¶\nâ”‚   â”œâ”€â”€ server ---------------------------- åŒ…å«æœåŠ¡ç«¯æ¸²æŸ“(server-side rendering)çš„ç›¸å…³ä»£ç \nâ”‚   â”œâ”€â”€ platforms ------------------------- åŒ…å«å¹³å°ç‰¹æœ‰çš„ç›¸å…³ä»£ç \nâ”‚   â”œâ”€â”€ sfc ------------------------------- åŒ…å«å•æ–‡ä»¶ç»„ä»¶(.vueæ–‡ä»¶)çš„è§£æé€»è¾‘ï¼Œç”¨äºvue-template-compileråŒ…\nâ”‚   â”œâ”€â”€ shared ---------------------------- åŒ…å«æ•´ä¸ªä»£ç åº“é€šç”¨çš„ä»£ç \n</code></pre><p>å¤§æ¦‚äº†è§£äº†é‡è¦ç›®å½•å’Œæ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŸ¥çœ‹ <a href=\"https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md#development-setup\" target=\"_blank\" rel=\"external\">Development Setup</a> ä¸­çš„å¸¸ç”¨å‘½ä»¤éƒ¨åˆ†ï¼Œæ¥äº†è§£å¦‚ä½•å¼€å§‹è¿™ä¸ªé¡¹ç›®äº†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ ·çš„ä»‹ç»ï¼š</p>\n<pre><code># watch and auto re-build dist/vue.js\n$ npm run dev\n\n# watch and auto re-run unit tests in Chrome\n$ npm run dev:test\n</code></pre><p>ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦è¿è¡Œ <code>npm run dev</code> å³å¯ç›‘æµ‹æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨é‡æ–°æ„å»ºè¾“å‡º dist/vue.jsï¼Œç„¶åè¿è¡Œ <code>npm run dev:test</code> æ¥æµ‹è¯•ã€‚ä¸è¿‡ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä¼šåœ¨ <code>examples</code> ç›®å½•æ–°å»ºä¸€ä¸ªä¾‹å­ï¼Œç„¶åå¼•ç”¨ dist/vue.js è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹¿è¿™ä¸ªä¾‹å­ä¸€è¾¹æ”¹Vueæºç ä¸€è¾¹çœ‹è‡ªå·±å†™çš„ä»£ç æƒ³æ€ä¹ˆç©æ€ä¹ˆç©ã€‚</p>\n<h2 id=\"äºŒã€çœ‹æºç çš„å°æç¤º\"><a href=\"#äºŒã€çœ‹æºç çš„å°æç¤º\" class=\"headerlink\" title=\"äºŒã€çœ‹æºç çš„å°æç¤º\"></a><span style=\"color: #ff6600;\">äºŒã€çœ‹æºç çš„å°æç¤º</span></h2><p>åœ¨çœŸæ­£æ­¥å…¥æºç ä¸–ç•Œä¹‹å‰ï¼Œæˆ‘æƒ³ç®€å•è¯´ä¸€è¯´çœ‹æºç çš„æŠ€å·§ï¼š</p>\n<h3 id=\"æ³¨é‡å¤§ä½“æ¡†æ¶ï¼Œä»å®è§‚åˆ°å¾®è§‚\"><a href=\"#æ³¨é‡å¤§ä½“æ¡†æ¶ï¼Œä»å®è§‚åˆ°å¾®è§‚\" class=\"headerlink\" title=\"æ³¨é‡å¤§ä½“æ¡†æ¶ï¼Œä»å®è§‚åˆ°å¾®è§‚\"></a><em>æ³¨é‡å¤§ä½“æ¡†æ¶ï¼Œä»å®è§‚åˆ°å¾®è§‚</em></h3><p>å½“ä½ çœ‹ä¸€ä¸ªé¡¹ç›®ä»£ç çš„æ—¶å€™ï¼Œæœ€å¥½æ˜¯èƒ½æ‰¾åˆ°ä¸€æ¡ä¸»çº¿ï¼Œå…ˆæŠŠå¤§ä½“æµç¨‹ç»“æ„æ‘¸æ¸…æ¥šï¼Œå†æ·±å…¥åˆ°ç»†èŠ‚ï¼Œé€é¡¹å‡»ç ´ï¼Œæ‹¿Vueä¸¾ä¸ªæ —å­ï¼šå‡å¦‚ä½ å·²ç»çŸ¥é“Vueä¸­æ•°æ®çŠ¶æ€æ”¹å˜åä¼šé‡‡ç”¨virtual DOMçš„æ–¹å¼æ›´æ–°DOMï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœä½ ä¸äº†è§£virtual DOMï¼Œé‚£ä¹ˆå¬æˆ‘ä¸€å¥â€œæš‚ä¸”ä¸è¦å»ç ”ç©¶å†…éƒ¨å…·ä½“å®ç°ï¼Œå› ä¸ºè¿™ä¼šæ˜¯ä½ ä¸§å¤±ä¸»çº¿â€ï¼Œè€Œä½ ä»…ä»…éœ€è¦çŸ¥é“virtual DOMåˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š</p>\n<blockquote>\n<p>ä¸€ã€createElement(): ç”¨ JavaScriptå¯¹è±¡(è™šæ‹Ÿæ ‘) æè¿° çœŸå®DOMå¯¹è±¡(çœŸå®æ ‘)<br>äºŒã€diff(oldNode, newNode) : å¯¹æ¯”æ–°æ—§ä¸¤ä¸ªè™šæ‹Ÿæ ‘çš„åŒºåˆ«ï¼Œæ”¶é›†å·®å¼‚<br>ä¸‰ã€patch() : å°†å·®å¼‚åº”ç”¨åˆ°çœŸå®DOMæ ‘</p>\n</blockquote>\n<p>æœ‰çš„æ—¶å€™ ç¬¬äºŒæ­¥ å¯èƒ½ä¸ ç¬¬ä¸‰æ­¥ åˆå¹¶æˆä¸€æ­¥(Vue ä¸­çš„patchå°±æ˜¯è¿™æ ·)ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æ¯”å¦‚ <code>src/compiler/codegen</code> å†…çš„ä»£ç ï¼Œå¯èƒ½ä½ ä¸çŸ¥é“ä»–å†™äº†ä»€ä¹ˆï¼Œç›´æ¥å»çœ‹å®ƒä¼šè®©ä½ å¾ˆç—›è‹¦ï¼Œä½†æ˜¯ä½ åªéœ€è¦çŸ¥é“ codegen æ˜¯ç”¨æ¥å°†æŠ½è±¡è¯­æ³•æ ‘(AST)ç”Ÿæˆrenderå‡½æ•°çš„å°±OKäº†ï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š</p>\n<pre><code class=\"js\">function anonymous() {\n    with(this){return _c(&#39;p&#39;,{attrs:{&quot;id&quot;:&quot;app&quot;}},[_v(&quot;\\n      &quot;+_s(a)+&quot;\\n      &quot;),_c(&#39;my-com&#39;)])}\n}\n</code></pre>\n<p>å½“æˆ‘ä»¬çŸ¥é“äº†ä¸€ä¸ªä¸œè¥¿å­˜åœ¨ï¼Œä¸”çŸ¥é“å®ƒå­˜åœ¨çš„ç›®çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾ˆå®¹æ˜“æŠ“ä½è¿™æ¡ä¸»çº¿ï¼Œè¿™ä¸ªç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« å°±æ˜¯å›´ç»•å¤§ä½“ä¸»çº¿å±•å¼€çš„ã€‚äº†è§£å¤§ä½“ä¹‹åï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†æ¯éƒ¨åˆ†å†…å®¹éƒ½æ˜¯åšä»€ä¹ˆçš„ï¼Œæ¯”å¦‚ codegen æ˜¯ç”Ÿæˆç±»ä¼¼ä¸Šé¢è´´å‡ºçš„ä»£ç æ‰€ç¤ºçš„å‡½æ•°çš„ï¼Œé‚£ä¹ˆå†å»çœ‹codegenä¸‹çš„ä»£ç æ—¶ï¼Œç›®çš„æ€§å°±ä¼šæ›´å¼ºï¼Œå°±æ›´å®¹æ˜“ç†è§£ã€‚</p>\n<h2 id=\"ä¸‰ã€Vue-çš„æ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆæ ·çš„\"><a href=\"#ä¸‰ã€Vue-çš„æ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆæ ·çš„\" class=\"headerlink\" title=\"ä¸‰ã€Vue çš„æ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆæ ·çš„\"></a><span style=\"color: #ff6600;\">ä¸‰ã€Vue çš„æ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆæ ·çš„<span></span></span></h2><p>balabalaä¸€å¤§å †ï¼Œå¼€å§‹æ¥å¹²è´§å§ã€‚æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯ææ¸…æ¥š Vue æ„é€ å‡½æ•°åˆ°åº•æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚</p>\n<p>æˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦æ¥è°ƒç”¨ <code>Vue</code>ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ <code>Vue</code> åº”è¯¥æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€ä»¶è¦åšçš„äº‹å„¿å°±æ˜¯æŠŠæ„é€ å‡½æ•°å…ˆæ‰’çš„ä¸€æ¸…äºŒæ¥šï¼Œå¦‚ä½•å¯»æ‰¾ <code>Vue</code> æ„é€ å‡½æ•°å‘¢ï¼Ÿå½“ç„¶æ˜¯ä» entry å¼€å§‹å•¦ï¼Œè¿˜è®°çš„æˆ‘ä»¬è¿è¡Œ <code>npm run dev</code> å‘½ä»¤åï¼Œä¼šè¾“å‡º <code>dist/vue.js</code> å—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å»çœ‹çœ‹ <code>npm run dev</code> å¹²äº†ä»€ä¹ˆï¼š</p>\n<pre><code>&quot;dev&quot;: &quot;TARGET=web-full-dev rollup -w -c build/config.js&quot;,\n</code></pre><p>é¦–å…ˆå°† TARGET å¾—å€¼è®¾ç½®ä¸º â€˜web-full-devâ€™ï¼Œç„¶åï¼Œç„¶åï¼Œç„¶åå¦‚æœä½ ä¸äº†è§£ rollup å°±åº”è¯¥ç®€å•å»çœ‹ä¸€ä¸‹å•¦â€¦â€¦ï¼Œç®€å•çš„è¯´å°±æ˜¯ä¸€ä¸ªJavaScriptæ¨¡å—æ‰“åŒ…å™¨ï¼Œä½ å¯ä»¥æŠŠå®ƒç®€å•çš„ç†è§£ä¸ºå’Œ webpack ä¸€æ ·ï¼Œåªä¸è¿‡å®ƒæœ‰ä»–çš„ä¼˜åŠ¿ï¼Œæ¯”å¦‚ Tree-shaking (webpack2ä¹Ÿæœ‰)ï¼Œä½†åŒæ ·ï¼Œåœ¨æŸäº›åœºæ™¯å®ƒä¹Ÿæœ‰ä»–çš„åŠ£åŠ¿ã€‚ã€‚ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œå…¶ä¸­ <code>-w</code> å°±æ˜¯watchï¼Œ<code>-c</code> å°±æ˜¯æŒ‡å®šé…ç½®æ–‡ä»¶ä¸º <code>build/config.js</code> ï¼Œæˆ‘ä»¬æ‰“å¼€è¿™ä¸ªé…ç½®æ–‡ä»¶çœ‹ä¸€çœ‹ï¼š</p>\n<pre><code class=\"js\">// å¼•å…¥ä¾èµ–ï¼Œå®šä¹‰ banner\n...\n\n// builds å¯¹è±¡\nconst builds = {\n    ...\n    // Runtime+compiler development build (Browser)\n    &#39;web-full-dev&#39;: {\n        entry: path.resolve(__dirname, &#39;../src/entries/web-runtime-with-compiler.js&#39;),\n        dest: path.resolve(__dirname, &#39;../dist/vue.js&#39;),\n        format: &#39;umd&#39;,\n        env: &#39;development&#39;,\n        alias: { he: &#39;./entity-decoder&#39; },\n        banner\n    },\n    ...\n}\n\n// ç”Ÿæˆé…ç½®çš„æ–¹æ³•\nfunction genConfig(opts){\n    ...\n}\n\nif (process.env.TARGET) {\n  module.exports = genConfig(builds[process.env.TARGET])\n} else {\n  exports.getBuild = name =&gt; genConfig(builds[name])\n  exports.getAllBuilds = () =&gt; Object.keys(builds).map(name =&gt; genConfig(builds[name]))\n}\n</code></pre>\n<p>ä¸Šé¢çš„ä»£ç æ˜¯ç®€åŒ–è¿‡çš„ï¼Œå½“æˆ‘ä»¬è¿è¡Œ <code>npm run dev</code> çš„æ—¶å€™ <code>process.env.TARGET</code> çš„å€¼ç­‰äº â€˜web-full-devâ€™ï¼Œæ‰€ä»¥</p>\n<pre><code class=\"js\">module.exports = genConfig(builds[process.env.TARGET])\n</code></pre>\n<p>è¿™å¥ä»£ç ç›¸å½“äºï¼š</p>\n<pre><code class=\"js\">module.exports = genConfig({\n    entry: path.resolve(__dirname, &#39;../src/entries/web-runtime-with-compiler.js&#39;),\n    dest: path.resolve(__dirname, &#39;../dist/vue.js&#39;),\n    format: &#39;umd&#39;,\n    env: &#39;development&#39;,\n    alias: { he: &#39;./entity-decoder&#39; },\n    banner\n})\n</code></pre>\n<p>æœ€ç»ˆï¼ŒgenConfig å‡½æ•°è¿”å›ä¸€ä¸ª config å¯¹è±¡ï¼Œè¿™ä¸ªconfigå¯¹è±¡å°±æ˜¯Rollupçš„é…ç½®å¯¹è±¡ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±ä¸éš¾çœ‹åˆ°ï¼Œå…¥å£æ–‡ä»¶æ˜¯ï¼š</p>\n<pre><code>src/entries/web-runtime-with-compiler.js\n</code></pre><p>æˆ‘ä»¬æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œä¸è¦å¿˜äº†æˆ‘ä»¬çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬åœ¨å¯»æ‰¾Vueæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶çš„ç¬¬ä¸€è¡Œä»£ç æ˜¯ï¼š</p>\n<pre><code class=\"js\">import Vue from &#39;./web-runtime&#39;\n</code></pre>\n<p>è¿™ä¸ªæ—¶å€™ï¼Œä½ å°±åº”è¯¥çŸ¥é“ï¼Œè¿™ä¸ªæ–‡ä»¶æš‚æ—¶ä¸ä½ æ— ç¼˜ï¼Œä½ åº”è¯¥æ‰“å¼€ <code>web-runtime.js</code> æ–‡ä»¶ï¼Œä¸è¿‡å½“ä½ æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œä½ å‘ç°ç¬¬ä¸€è¡Œæ˜¯è¿™æ ·çš„ï¼š</p>\n<pre><code class=\"js\">import Vue from &#39;core/index&#39;\n</code></pre>\n<p>ä¾ç…§æ­¤æ€è·¯ï¼Œæœ€ç»ˆæˆ‘ä»¬å¯»æ‰¾åˆ°Vueæ„é€ å‡½æ•°çš„ä½ç½®åº”è¯¥æ˜¯åœ¨ <code>src/core/instance/index.js</code> æ–‡ä»¶ä¸­ï¼Œå…¶å®æˆ‘ä»¬çŒœä¹ŸçŒœå¾—åˆ°ï¼Œä¸Šé¢ä»‹ç»ç›®å½•çš„æ—¶å€™è¯´è¿‡ï¼šinstance æ˜¯å­˜æ”¾Vueæ„é€ å‡½æ•°è®¾è®¡ç›¸å…³ä»£ç çš„ç›®å½•ã€‚æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯»æ‰¾çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/vueimg2BD0DCC6-D689-4809-93D3-2F979E8F8C0C.png\" alt=\"å¯»æ‰¾ Vue æ„é€ å‡½æ•°è·¯çº¿\"></p>\n<p>æˆ‘ä»¬å›å¤´çœ‹ä¸€çœ‹ <code>src/core/instance/index.js</code> æ–‡ä»¶ï¼Œå¾ˆç®€å•ï¼š</p>\n<pre><code class=\"js\">import { initMixin } from &#39;./init&#39;\nimport { stateMixin } from &#39;./state&#39;\nimport { renderMixin } from &#39;./render&#39;\nimport { eventsMixin } from &#39;./events&#39;\nimport { lifecycleMixin } from &#39;./lifecycle&#39;\nimport { warn } from &#39;../util/index&#39;\n\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== &#39;production&#39; &amp;&amp;\n    !(this instanceof Vue)) {\n    warn(&#39;Vue is a constructor and should be called with the `new` keyword&#39;)\n  }\n  this._init(options)\n}\n\ninitMixin(Vue)\nstateMixin(Vue)\neventsMixin(Vue)\nlifecycleMixin(Vue)\nrenderMixin(Vue)\n\nexport default Vue\n</code></pre>\n<p>å¼•å…¥ä¾èµ–ï¼Œå®šä¹‰ Vue æ„é€ å‡½æ•°ï¼Œç„¶åä»¥Vueæ„é€ å‡½æ•°ä¸ºå‚æ•°ï¼Œè°ƒç”¨äº†äº”ä¸ªæ–¹æ³•ï¼Œæœ€åå¯¼å‡º Vueã€‚è¿™äº”ä¸ªæ–¹æ³•åˆ†åˆ«æ¥è‡ªäº”ä¸ªæ–‡ä»¶ï¼š<code>init.js</code> <code>state.js</code> <code>render.js</code> <code>events.js</code> ä»¥åŠ <code>lifecycle.js</code>ã€‚</p>\n<p>æ‰“å¼€è¿™äº”ä¸ªæ–‡ä»¶ï¼Œæ‰¾åˆ°ç›¸åº”çš„æ–¹æ³•ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™äº›æ–¹æ³•çš„ä½œç”¨ï¼Œå°±æ˜¯åœ¨ Vue çš„åŸå‹ prototype ä¸ŠæŒ‚è½½æ–¹æ³•æˆ–å±æ€§ï¼Œç»å†äº†è¿™äº”ä¸ªæ–¹æ³•åçš„Vueä¼šå˜æˆè¿™æ ·ï¼š</p>\n<pre><code class=\"js\">// initMixin(Vue)    src/core/instance/init.js **************************************************\nVue.prototype._init = function (options?: Object) {}\n\n// stateMixin(Vue)    src/core/instance/state.js **************************************************\nVue.prototype.$data\nVue.prototype.$set = set\nVue.prototype.$delete = del\nVue.prototype.$watch = function(){}\n\n// renderMixin(Vue)    src/core/instance/render.js **************************************************\nVue.prototype.$nextTick = function (fn: Function) {}\nVue.prototype._render = function (): VNode {}\nVue.prototype._s = _toString\nVue.prototype._v = createTextVNode\nVue.prototype._n = toNumber\nVue.prototype._e = createEmptyVNode\nVue.prototype._q = looseEqual\nVue.prototype._i = looseIndexOf\nVue.prototype._m = function(){}\nVue.prototype._o = function(){}\nVue.prototype._f = function resolveFilter (id) {}\nVue.prototype._l = function(){}\nVue.prototype._t = function(){}\nVue.prototype._b = function(){}\nVue.prototype._k = function(){}\n\n// eventsMixin(Vue)    src/core/instance/events.js **************************************************\nVue.prototype.$on = function (event: string, fn: Function): Component {}\nVue.prototype.$once = function (event: string, fn: Function): Component {}\nVue.prototype.$off = function (event?: string, fn?: Function): Component {}\nVue.prototype.$emit = function (event: string): Component {}\n\n// lifecycleMixin(Vue)    src/core/instance/lifecycle.js **************************************************\nVue.prototype._mount = function(){}\nVue.prototype._update = function (vnode: VNode, hydrating?: boolean) {}\nVue.prototype._updateFromParent = function(){}\nVue.prototype.$forceUpdate = function () {}\nVue.prototype.$destroy = function () {}\n</code></pre>\n<p>è¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿå¹¶æ²¡æœ‰ï¼Œæ ¹æ®æˆ‘ä»¬ä¹‹å‰å¯»æ‰¾ Vue çš„è·¯çº¿ï¼Œè¿™åªæ˜¯åˆšåˆšå¼€å§‹ï¼Œæˆ‘ä»¬è¿½æº¯è·¯çº¿å¾€å›èµ°ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªå¤„ç† Vue æ„é€ å‡½æ•°çš„åº”è¯¥æ˜¯ <code>src/core/index.js</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰“å¼€å®ƒï¼š</p>\n<pre><code class=\"js\">import Vue from &#39;./instance/index&#39;\nimport { initGlobalAPI } from &#39;./global-api/index&#39;\nimport { isServerRendering } from &#39;core/util/env&#39;\n\ninitGlobalAPI(Vue)\n\nObject.defineProperty(Vue.prototype, &#39;$isServer&#39;, {\n  get: isServerRendering\n})\n\nVue.version = &#39;__VERSION__&#39;\n\nexport default Vue\n</code></pre>\n<p>è¿™ä¸ªæ–‡ä»¶ä¹Ÿå¾ˆç®€å•ï¼Œä» instance/index ä¸­å¯¼å…¥å·²ç»åœ¨åŸå‹ä¸ŠæŒ‚è½½äº†æ–¹æ³•å’Œå±æ€§åçš„ Vueï¼Œç„¶åå¯¼å…¥ <code>initGlobalAPI</code> å’Œ <code>isServerRendering</code>ï¼Œä¹‹åå°†Vueä½œä¸ºå‚æ•°ä¼ ç»™  <code>initGlobalAPI</code> ï¼Œæœ€ååˆåœ¨ <code>Vue.prototype</code> ä¸ŠæŒ‚è½½äº† <code>$isServer</code> ï¼Œåœ¨ <code>Vue</code> ä¸ŠæŒ‚è½½äº† <code>version</code> å±æ€§ã€‚</p>\n<p><code>initGlobalAPI</code> çš„ä½œç”¨æ˜¯åœ¨ <code>Vue</code> æ„é€ å‡½æ•°ä¸ŠæŒ‚è½½é™æ€å±æ€§å’Œæ–¹æ³•ï¼Œ<code>Vue</code> åœ¨ç»è¿‡ <code>initGlobalAPI</code> ä¹‹åï¼Œä¼šå˜æˆè¿™æ ·ï¼š</p>\n<pre><code class=\"js\">// src/core/index.js / src/core/global-api/index.js\nVue.config\nVue.util = util\nVue.set = set\nVue.delete = del\nVue.nextTick = util.nextTick\nVue.options = {\n    components: {\n        KeepAlive\n    },\n    directives: {},\n    filters: {},\n    _base: Vue\n}\nVue.use\nVue.mixin\nVue.cid = 0\nVue.extend\nVue.component = function(){}\nVue.directive = function(){}\nVue.filter = function(){}\n\nVue.prototype.$isServer\nVue.version = &#39;__VERSION__&#39;\n</code></pre>\n<p>å…¶ä¸­ï¼Œç¨å¾®å¤æ‚ä¸€ç‚¹çš„å°±æ˜¯ <code>Vue.options</code>ï¼Œå¤§å®¶ç¨å¾®åˆ†æåˆ†æå°±ä¼šçŸ¥é“ä»–çš„ç¡®é•¿æˆé‚£ä¸ªæ ·å­ã€‚ä¸‹ä¸€ä¸ªå°±æ˜¯ <code>web-runtime.js</code> æ–‡ä»¶äº†ï¼Œ<code>web-runtime.js</code> æ–‡ä»¶ä¸»è¦åšäº†ä¸‰ä»¶äº‹å„¿ï¼š</p>\n<blockquote>\n<p>1ã€è¦†ç›– <code>Vue.config</code> çš„å±æ€§ï¼Œå°†å…¶è®¾ç½®ä¸ºå¹³å°ç‰¹æœ‰çš„ä¸€äº›æ–¹æ³•<br>2ã€<code>Vue.options.directives</code> å’Œ <code>Vue.options.components</code> å®‰è£…å¹³å°ç‰¹æœ‰çš„æŒ‡ä»¤å’Œç»„ä»¶<br>3ã€åœ¨ <code>Vue.prototype</code> ä¸Šå®šä¹‰ <code>__patch__</code> å’Œ <code>$mount</code></p>\n</blockquote>\n<p>ç»è¿‡ <code>web-runtime.js</code> æ–‡ä»¶ä¹‹åï¼Œ<code>Vue</code> å˜æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p>\n<pre><code class=\"js\">// å®‰è£…å¹³å°ç‰¹å®šçš„utils\nVue.config.isUnknownElement = isUnknownElement\nVue.config.isReservedTag = isReservedTag\nVue.config.getTagNamespace = getTagNamespace\nVue.config.mustUseProp = mustUseProp\n// å®‰è£…å¹³å°ç‰¹å®šçš„ æŒ‡ä»¤ å’Œ ç»„ä»¶\nVue.options = {\n    components: {\n        KeepAlive,\n        Transition,\n        TransitionGroup\n    },\n    directives: {\n        model,\n        show\n    },\n    filters: {},\n    _base: Vue\n}\nVue.prototype.__patch__\nVue.prototype.$mount\n</code></pre>\n<p>è¿™é‡Œå¤§å®¶è¦æ³¨æ„çš„æ˜¯ <code>Vue.options</code> çš„å˜åŒ–ã€‚å¦å¤–è¿™é‡Œçš„ <code>$mount</code> æ–¹æ³•å¾ˆç®€å•ï¼š</p>\n<pre><code class=\"js\">Vue.prototype.$mount = function (\n  el?: string | Element,\n  hydrating?: boolean\n): Component {\n  el = el &amp;&amp; inBrowser ? query(el) : undefined\n  return this._mount(el, hydrating)\n}\n</code></pre>\n<p>é¦–å…ˆæ ¹æ®æ˜¯å¦æ˜¯æµè§ˆå™¨ç¯å¢ƒå†³å®šè¦ä¸è¦ <code>query(el)</code> è·å–å…ƒç´ ï¼Œç„¶åå°† <code>el</code> ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>this._mount()</code>ã€‚</p>\n<p>æœ€åä¸€ä¸ªå¤„ç† Vue çš„æ–‡ä»¶å°±æ˜¯å…¥å£æ–‡ä»¶ <code>web-runtime-with-compiler.js</code> äº†ï¼Œè¯¥æ–‡ä»¶åšäº†ä¸¤ä»¶äº‹ï¼š</p>\n<p>1ã€ç¼“å­˜æ¥è‡ª <code>web-runtime.js</code> æ–‡ä»¶çš„ <code>$mount</code> å‡½æ•°</p>\n<pre><code class=\"js\">const mount = Vue.prototype.$mount\n</code></pre>\n<p>ç„¶åè¦†ç›–è¦†ç›–äº† <code>Vue.prototype.$mount</code></p>\n<p>2ã€åœ¨ Vue ä¸ŠæŒ‚è½½ <code>compile</code></p>\n<pre><code class=\"js\">Vue.compile = compileToFunctions\n</code></pre>\n<p>compileToFunctions å‡½æ•°çš„ä½œç”¨ï¼Œå°±æ˜¯å°†æ¨¡æ¿ <code>template</code> ç¼–è¯‘ä¸ºrenderå‡½æ•°ã€‚</p>\n<p>è‡³æ­¤ï¼Œæˆ‘ä»¬ç®—æ˜¯è¿˜åŸäº† Vue æ„é€ å‡½æ•°ï¼Œæ€»ç»“ä¸€ä¸‹ï¼š</p>\n<blockquote>\n<p>1ã€<code>Vue.prototype</code> ä¸‹çš„å±æ€§å’Œæ–¹æ³•çš„æŒ‚è½½ä¸»è¦æ˜¯åœ¨ <code>src/core/instance</code> ç›®å½•ä¸­çš„ä»£ç å¤„ç†çš„</p>\n<p>2ã€<code>Vue</code> ä¸‹çš„é™æ€å±æ€§å’Œæ–¹æ³•çš„æŒ‚è½½ä¸»è¦æ˜¯åœ¨ <code>src/core/global-api</code> ç›®å½•ä¸‹çš„ä»£ç å¤„ç†çš„</p>\n<p>3ã€<code>web-runtime.js</code> ä¸»è¦æ˜¯æ·»åŠ webå¹³å°ç‰¹æœ‰çš„é…ç½®ã€ç»„ä»¶å’ŒæŒ‡ä»¤ï¼Œ<code>web-runtime-with-compiler.js</code> ç»™Vueçš„ <code>$mount</code> æ–¹æ³•æ·»åŠ  <code>compiler</code> ç¼–è¯‘å™¨ï¼Œæ”¯æŒ <code>template</code>ã€‚</p>\n</blockquote>\n<h2 id=\"å››ã€ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­\"><a href=\"#å››ã€ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­\" class=\"headerlink\" title=\"å››ã€ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­\"></a><span style=\"color: #ff6600;\">å››ã€ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­</span></h2><p>åœ¨äº†è§£äº† <code>Vue</code> æ„é€ å‡½æ•°çš„è®¾è®¡ä¹‹åï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­å°±è¦ç™»åœºäº†ï¼ŒæŒå£°æœ‰è¯·ï¼š</p>\n<pre><code class=\"js\">let v = new Vue({\n    el: &#39;#app&#39;,\n    data: {\n        a: 1,\n        b: [1, 2, 3]\n    }\n})\n</code></pre>\n<p>å¥½å§ï¼Œæˆ‘æ‰¿è®¤è¿™æ®µä»£ç ä½ å®¶æ²¡æ»¡æœˆçš„å­©å­éƒ½ä¼šå†™äº†ã€‚è¿™æ®µä»£ç å°±æ˜¯æˆ‘ä»¬è´¯ç©¿å§‹ç»ˆçš„ä¾‹å­ï¼Œå®ƒå°±æ˜¯è¿™ç¯‡æ–‡ç« çš„ä¸»çº¿ï¼Œåœ¨åç»­çš„è®²è§£ä¸­ï¼Œéƒ½ä¼šä»¥è¿™æ®µä»£ç ä¸ºä¾‹ï¼Œå½“è®²åˆ°å¿…è¦çš„åœ°æ–¹ï¼Œä¼šä¸ºå…¶æ·»åŠ é€‰é¡¹ï¼Œæ¯”å¦‚è®²è®¡ç®—å±æ€§çš„æ—¶å€™å½“ç„¶è¦åŠ ä¸Šä¸€ä¸ª <code>computed</code> å±æ€§äº†ã€‚ä¸è¿‡åœ¨æœ€å¼€å§‹ï¼Œæˆ‘åªä¼ é€’äº†ä¸¤ä¸ªé€‰é¡¹ <code>el</code> ä»¥åŠ <code>data</code>ï¼Œâ€œæˆ‘ä»¬çœ‹çœ‹æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œè®©æˆ‘ä»¬æ‹­ç›®ä»¥å¾…â€œ â€”- NBAçƒæ˜Ÿåœ¨æ¥å—é‡‡è®¿æ—¶æœ€å–œæ¬¢è¯´è¿™å¥è¯ã€‚</p>\n<p><em>å½“æˆ‘ä»¬æŒ‰ç…§ä¾‹å­é‚£æ ·ç¼–ç ä½¿ç”¨Vueçš„æ—¶å€™ï¼ŒVueéƒ½åšäº†ä»€ä¹ˆï¼Ÿ</em></p>\n<p>æƒ³è¦çŸ¥é“Vueéƒ½å¹²äº†ä»€ä¹ˆï¼Œæˆ‘ä»¬å°±è¦æ‰¾åˆ° Vue åˆå§‹åŒ–ç¨‹åºï¼ŒæŸ¥çœ‹ Vue æ„é€ å‡½æ•°ï¼š</p>\n<pre><code class=\"js\">function Vue (options) {\n  if (process.env.NODE_ENV !== &#39;production&#39; &amp;&amp;\n    !(this instanceof Vue)) {\n    warn(&#39;Vue is a constructor and should be called with the `new` keyword&#39;)\n  }\n  this._init(options)\n}\n</code></pre>\n<p>æˆ‘ä»¬å‘ç°ï¼Œ<code>_init()</code> æ–¹æ³•å°±æ˜¯Vueè°ƒç”¨çš„ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œç„¶åå°†æˆ‘ä»¬çš„å‚æ•° <code>options</code> é€ä¼ äº†è¿‡å»ã€‚åœ¨è°ƒç”¨ <code>_init()</code> ä¹‹å‰ï¼Œè¿˜åšäº†ä¸€ä¸ªå®‰å…¨æ¨¡å¼çš„å¤„ç†ï¼Œå‘Šè¯‰å¼€å‘è€…å¿…é¡»ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦è°ƒç”¨ Vueã€‚æ ¹æ®ä¹‹å‰æˆ‘ä»¬çš„æ•´ç†ï¼Œ<code>_init()</code> æ–¹æ³•åº”è¯¥æ˜¯åœ¨ <code>src/core/instance/init.js</code> æ–‡ä»¶ä¸­å®šä¹‰çš„ï¼Œæˆ‘ä»¬æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æŸ¥çœ‹ <code>_init()</code> æ–¹æ³•ï¼š</p>\n<pre><code class=\"js\">  Vue.prototype._init = function (options?: Object) {\n    const vm: Component = this\n    // a uid\n    vm._uid = uid++\n    // a flag to avoid this being observed\n    vm._isVue = true\n    // merge options\n    if (options &amp;&amp; options._isComponent) {\n      // optimize internal component instantiation\n      // since dynamic options merging is pretty slow, and none of the\n      // internal component options needs special treatment.\n      initInternalComponent(vm, options)\n    } else {\n      vm.$options = mergeOptions(\n        resolveConstructorOptions(vm.constructor),\n        options || {},\n        vm\n      )\n    }\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== &#39;production&#39;) {\n      initProxy(vm)\n    } else {\n      vm._renderProxy = vm\n    }\n\n    // expose real self\n    vm._self = vm\n    initLifecycle(vm)\n    initEvents(vm)\n    callHook(vm, &#39;beforeCreate&#39;)\n    initState(vm)\n    callHook(vm, &#39;created&#39;)\n    initRender(vm)\n  }\n</code></pre>\n<p><code>_init()</code> æ–¹æ³•åœ¨ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œåœ¨ <code>this</code> å¯¹è±¡ä¸Šå®šä¹‰äº†ä¸¤ä¸ªå±æ€§ï¼š<code>_uid</code> å’Œ <code>_isVue</code>ï¼Œç„¶ååˆ¤æ–­æœ‰æ²¡æœ‰å®šä¹‰ <code>options._isComponent</code>ï¼Œåœ¨ä½¿ç”¨ Vue å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯ä¸ä¼šä½¿ç”¨ <code>_isComponent</code> é€‰é¡¹çš„ï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯ Vue å†…éƒ¨ä½¿ç”¨çš„ï¼ŒæŒ‰ç…§æœ¬èŠ‚å¼€å¤´çš„ä¾‹å­ï¼Œè¿™é‡Œä¼šèµ° <code>else</code> åˆ†æ”¯ï¼Œä¹Ÿå°±æ˜¯è¿™æ®µä»£ç ï¼š</p>\n<pre><code class=\"js\">  vm.$options = mergeOptions(\n    resolveConstructorOptions(vm.constructor),\n    options || {},\n    vm\n  )\n</code></pre>\n<p>è¿™æ · <code>Vue</code> ç¬¬ä¸€æ­¥æ‰€åšçš„äº‹æƒ…å°±æ¥äº†ï¼š<span style=\"color: red;\"><em>ä½¿ç”¨ç­–ç•¥å¯¹è±¡åˆå¹¶å‚æ•°é€‰é¡¹</em></span></p>\n<p>å¯ä»¥å‘ç°ï¼ŒVueä½¿ç”¨ <code>mergeOptions</code> æ¥å¤„ç†æˆ‘ä»¬è°ƒç”¨Vueæ—¶ä¼ å…¥çš„å‚æ•°é€‰é¡¹(options)ï¼Œç„¶åå°†è¿”å›å€¼èµ‹å€¼ç»™ <code>this.$options</code> (vm === this)ï¼Œä¼ ç»™ <code>mergeOptions</code> æ–¹æ³•ä¸‰ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸€çœ‹ï¼Œé¦–å…ˆæ˜¯ï¼š<code>resolveConstructorOptions(vm.constructor)</code>ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼š</p>\n<pre><code class=\"js\">export function resolveConstructorOptions (Ctor: Class&lt;Component&gt;) {\n  let options = Ctor.options\n  if (Ctor.super) {\n    const superOptions = Ctor.super.options\n    const cachedSuperOptions = Ctor.superOptions\n    const extendOptions = Ctor.extendOptions\n    if (superOptions !== cachedSuperOptions) {\n      // super option changed\n      Ctor.superOptions = superOptions\n      extendOptions.render = options.render\n      extendOptions.staticRenderFns = options.staticRenderFns\n      extendOptions._scopeId = options._scopeId\n      options = Ctor.options = mergeOptions(superOptions, extendOptions)\n      if (options.name) {\n        options.components[options.name] = Ctor\n      }\n    }\n  }\n  return options\n}\n</code></pre>\n<p>è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•° <code>Ctor</code>ï¼Œé€šè¿‡ä¼ å…¥çš„ <code>vm.constructor</code> æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå…¶å®å°±æ˜¯ <code>Vue</code> æ„é€ å‡½æ•°æœ¬èº«ã€‚æ‰€ä»¥ä¸‹é¢è¿™å¥ä»£ç ï¼š</p>\n<pre><code class=\"js\">let options = Ctor.options\n</code></pre>\n<p>ç›¸å½“äºï¼š</p>\n<pre><code class=\"js\">let options = Vue.options\n</code></pre>\n<p>å¤§å®¶è¿˜è®°å¾— <code>Vue.options</code> å—ï¼Ÿåœ¨å¯»æ‰¾Vueæ„é€ å‡½æ•°ä¸€èŠ‚é‡Œï¼Œæˆ‘ä»¬æ•´ç†äº† <code>Vue.options</code> åº”è¯¥é•¿æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p>\n<pre><code class=\"js\">Vue.options = {\n    components: {\n        KeepAlive,\n        Transition,\n        TransitionGroup\n    },\n    directives: {\n        model,\n        show\n    },\n    filters: {},\n    _base: Vue\n}\n</code></pre>\n<p>ä¹‹ååˆ¤æ–­æ˜¯å¦å®šä¹‰äº† <code>Vue.super</code> ï¼Œè¿™ä¸ªæ˜¯ç”¨æ¥å¤„ç†ç»§æ‰¿çš„ï¼Œæˆ‘ä»¬åç»­å†è®²ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œ<code>resolveConstructorOptions</code> æ–¹æ³•ç›´æ¥è¿”å›äº† <code>Vue.options</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼ é€’ç»™ <code>mergeOptions</code> æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ <code>Vue.options</code>ã€‚</p>\n<p>ä¼ ç»™ <code>mergeOptions</code> æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬è°ƒç”¨Vueæ„é€ å‡½æ•°æ—¶çš„å‚æ•°é€‰é¡¹ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ <code>vm</code> ä¹Ÿå°±æ˜¯ <code>this</code> å¯¹è±¡ï¼ŒæŒ‰ç…§æœ¬èŠ‚å¼€å¤´çš„ä¾‹å­é‚£æ ·ä½¿ç”¨ Vueï¼Œæœ€ç»ˆè¿è¡Œçš„ä»£ç åº”è¯¥å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">  vm.$options = mergeOptions(\n      // Vue.options\n    {\n        components: {\n            KeepAlive,\n            Transition,\n            TransitionGroup\n        },\n        directives: {\n            model,\n            show\n        },\n        filters: {},\n        _base: Vue\n    },\n    // è°ƒç”¨Vueæ„é€ å‡½æ•°æ—¶ä¼ å…¥çš„å‚æ•°é€‰é¡¹ options\n    {\n        el: &#39;#app&#39;,\n        data: {\n            a: 1,\n            b: [1, 2, 3]\n        }\n    },\n    // this\n    vm\n  )\n</code></pre>\n<p>äº†è§£äº†è¿™äº›ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹çœ‹ <code>mergeOptions</code> åˆ°åº•åšäº†äº›ä»€ä¹ˆäº†ï¼Œæ ¹æ®å¼•ç”¨å¯»æ‰¾åˆ° <code>mergeOptions</code> åº”è¯¥æ˜¯åœ¨ <code>src/core/util/options.js</code> æ–‡ä»¶ä¸­å®šä¹‰çš„ã€‚è¿™ä¸ªæ–‡ä»¶ç¬¬ä¸€æ¬¡çœ‹å¯èƒ½ä¼šå¤´å¤§ï¼Œä¸‹é¢æ˜¯æˆ‘å¤„ç†åçš„ç®€ç•¥å±•ç¤ºï¼Œå¤§å®¶çœ‹ä¸Šå»åº”è¯¥æ›´å®¹æ˜“ç†è§£äº†ï¼š</p>\n<pre><code class=\"js\">// 1ã€å¼•ç”¨ä¾èµ–\nimport Vue from &#39;../instance/index&#39;\nå…¶ä»–å¼•ç”¨...\n\n// 2ã€åˆå¹¶çˆ¶å­é€‰é¡¹å€¼ä¸ºæœ€ç»ˆå€¼çš„ç­–ç•¥å¯¹è±¡ï¼Œæ­¤æ—¶ strats æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå› ä¸º config.optionMergeStrategies = Object.create(null)\nconst strats = config.optionMergeStrategies\n// 3ã€åœ¨ strats å¯¹è±¡ä¸Šå®šä¹‰ä¸å‚æ•°é€‰é¡¹åç§°ç›¸åŒçš„æ–¹æ³•\nstrats.el = \nstrats.propsData = function (parent, child, vm, key){}\nstrats.data = function (parentVal, childVal, vm)\n\nconfig._lifecycleHooks.forEach(hook =&gt; {\n  strats[hook] = mergeHook\n})\n\nconfig._assetTypes.forEach(function (type) {\n  strats[type + &#39;s&#39;] = mergeAssets\n})\n\nstrats.watch = function (parentVal, childVal)\n\nstrats.props =\nstrats.methods =\nstrats.computed = function (parentVal: ?Object, childVal: ?Object)\n// é»˜è®¤çš„åˆå¹¶ç­–ç•¥ï¼Œå¦‚æœæœ‰ `childVal` åˆ™è¿”å› `childVal` æ²¡æœ‰åˆ™è¿”å› `parentVal`\nconst defaultStrat = function (parentVal: any, childVal: any): any {\n  return childVal === undefined\n    ? parentVal\n    : childVal\n}\n\n// 4ã€mergeOptions ä¸­æ ¹æ®å‚æ•°é€‰é¡¹è°ƒç”¨åŒåçš„ç­–ç•¥æ–¹æ³•è¿›è¡Œåˆå¹¶å¤„ç†\nexport function mergeOptions (\n  parent: Object,\n  child: Object,\n  vm?: Component\n): Object {\n\n  // å…¶ä»–ä»£ç \n  ...\n\n  const options = {}\n  let key\n  for (key in parent) {\n    mergeField(key)\n  }\n  for (key in child) {\n    if (!hasOwn(parent, key)) {\n      mergeField(key)\n    }\n  }\n  function mergeField (key) {\n    const strat = strats[key] || defaultStrat\n    options[key] = strat(parent[key], child[key], vm, key)\n  }\n  return options\n\n}\n</code></pre>\n<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘çœç•¥äº†ä¸€äº›å·¥å…·å‡½æ•°ï¼Œä¾‹å¦‚ <code>mergeHook</code> å’Œ <code>mergeAssets</code> ç­‰ç­‰ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯è¿™æ®µä»£ç ï¼š</p>\n<pre><code class=\"js\">config._lifecycleHooks.forEach(hook =&gt; {\n  strats[hook] = mergeHook\n})\n\nconfig._assetTypes.forEach(function (type) {\n  strats[type + &#39;s&#39;] = mergeAssets\n})\n</code></pre>\n<p><code>config</code> å¯¹è±¡å¼•ç”¨è‡ª <code>src/core/config.js</code> æ–‡ä»¶ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯åœ¨ <code>strats</code> ä¸‹æ·»åŠ äº†ç›¸åº”çš„ç”Ÿå‘½å‘¨æœŸé€‰é¡¹çš„åˆå¹¶ç­–ç•¥å‡½æ•°ä¸º <code>mergeHook</code>ï¼Œæ·»åŠ æŒ‡ä»¤(directives)ã€ç»„ä»¶(components)ã€è¿‡æ»¤å™¨(filters)ç­‰é€‰é¡¹çš„åˆå¹¶ç­–ç•¥å‡½æ•°ä¸º <code>mergeAssets</code>ã€‚</p>\n<p>è¿™æ ·çœ‹æ¥å°±æ¸…æ™°å¤šäº†ï¼Œæ‹¿æˆ‘ä»¬è´¯ç©¿æœ¬æ–‡çš„ä¾‹å­æ¥è¯´ï¼š</p>\n<pre><code class=\"js\">let v = new Vue({\n    el: &#39;#app&#39;,\n    data: {\n        a: 1,\n        b: [1, 2, 3]\n    }\n})\n</code></pre>\n<p>å…¶ä¸­ <code>el</code> é€‰é¡¹ä¼šä½¿ç”¨ <code>defaultStrat</code> é»˜è®¤ç­–ç•¥å‡½æ•°å¤„ç†ï¼Œ<code>data</code> é€‰é¡¹åˆ™ä¼šä½¿ç”¨ <code>strats.data</code> ç­–ç•¥å‡½æ•°å¤„ç†ï¼Œå¹¶ä¸”æ ¹æ® <code>strats.data</code> ä¸­çš„é€»è¾‘ï¼Œ<code>strats.data</code> æ–¹æ³•æœ€ç»ˆä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ï¼š<code>mergedInstanceDataFn</code>ã€‚</p>\n<p>è¿™é‡Œå°±ä¸è¯¦ç»†çš„è®²è§£æ¯ä¸€ä¸ªç­–ç•¥å‡½æ•°çš„å†…å®¹äº†ï¼Œåç»­éƒ½ä¼šè®²åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯æŠ“ä½ä¸»çº¿ç†æ¸…æ€è·¯ä¸ºä¸»ï¼Œåªéœ€è¦çŸ¥é“Vueåœ¨å¤„ç†é€‰é¡¹çš„æ—¶å€™ï¼Œä½¿ç”¨äº†ä¸€ä¸ªç­–ç•¥å¯¹è±¡å¯¹çˆ¶å­é€‰é¡¹è¿›è¡Œåˆå¹¶ã€‚å¹¶å°†æœ€ç»ˆçš„å€¼èµ‹å€¼ç»™å®ä¾‹ä¸‹çš„ <code>$options</code> å±æ€§å³ï¼š<code>this.$options</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç»§ç»­æŸ¥çœ‹ <code>_init()</code> æ–¹æ³•åœ¨åˆå¹¶å®Œé€‰é¡¹ä¹‹åï¼Œåˆåšäº†ä»€ä¹ˆï¼š</p>\n<p>åˆå¹¶å®Œé€‰é¡¹ä¹‹åï¼ŒVue ç¬¬äºŒéƒ¨åšçš„äº‹æƒ…å°±æ¥äº†ï¼š<span style=\"color: red;\"><em>åˆå§‹åŒ–å·¥ä½œä¸Vueå®ä¾‹å¯¹è±¡çš„è®¾è®¡</em></span></p>\n<p>å‰é¢è®²äº† Vue æ„é€ å‡½æ•°çš„è®¾è®¡ï¼Œå¹¶ä¸”æ•´ç†äº† <em>VueåŸå‹å±æ€§ä¸æ–¹æ³•</em> å’Œ <em>Vueé™æ€å±æ€§ä¸æ–¹æ³•</em>ï¼Œè€Œ Vue å®ä¾‹å¯¹è±¡å°±æ˜¯é€šè¿‡æ„é€ å‡½æ•°åˆ›é€ å‡ºæ¥çš„ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ Vue å®ä¾‹å¯¹è±¡æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Œä¸‹é¢çš„ä»£ç æ˜¯ <code>_init()</code> æ–¹æ³•åˆå¹¶å®Œé€‰é¡¹ä¹‹åçš„ä»£ç ï¼š</p>\n<pre><code class=\"js\">    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== &#39;production&#39;) {\n      initProxy(vm)\n    } else {\n      vm._renderProxy = vm\n    }\n\n    // expose real self\n    vm._self = vm\n    initLifecycle(vm)\n    initEvents(vm)\n    callHook(vm, &#39;beforeCreate&#39;)\n    initState(vm)\n    callHook(vm, &#39;created&#39;)\n    initRender(vm)\n</code></pre>\n<p>æ ¹æ®ä¸Šé¢çš„ä»£ç ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¼šä¸ºå®ä¾‹æ·»åŠ ä¸¤ä¸ªå±æ€§ï¼Œå¹¶ä¸”å±æ€§å€¼éƒ½ä¸ºå®ä¾‹æœ¬èº«ï¼š</p>\n<pre><code class=\"js\">vm._renderProxy = vm\nvm._self = vm\n</code></pre>\n<p>ç„¶åï¼Œè°ƒç”¨äº†å››ä¸ª <code>init*</code> æ–¹æ³•åˆ†åˆ«ä¸ºï¼š<code>initLifecycle</code>ã€<code>initEvents</code>ã€<code>initState</code>ã€<code>initRender</code>ï¼Œä¸”åœ¨ <code>initState</code> å‰ååˆ†åˆ«å›è°ƒäº†ç”Ÿå‘½å‘¨æœŸé’©å­ <code>beforeCreate</code> å’Œ <code>created</code>ï¼Œè€Œ <code>initRender</code> æ˜¯åœ¨ <code>created</code> é’©å­æ‰§è¡Œä¹‹åæ‰§è¡Œçš„ï¼Œçœ‹åˆ°è¿™é‡Œï¼Œä¹Ÿå°±æ˜ç™½äº†ä¸ºä»€ä¹ˆ created çš„æ—¶å€™ä¸èƒ½æ“ä½œDOMäº†ã€‚å› ä¸ºè¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰æ¸²æŸ“çœŸæ­£çš„DOMå…ƒç´ åˆ°æ–‡æ¡£ä¸­ã€‚<code>created</code> ä»…ä»…ä»£è¡¨æ•°æ®çŠ¶æ€çš„åˆå§‹åŒ–å®Œæˆã€‚</p>\n<p>æ ¹æ®å››ä¸ª <code>init*</code> æ–¹æ³•çš„å¼•ç”¨å…³ç³»æ‰“å¼€å¯¹åº”çš„æ–‡ä»¶æŸ¥çœ‹å¯¹åº”çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å‘ç°ï¼Œè¿™äº›æ–¹æ³•æ˜¯åœ¨å¤„ç†Vueå®ä¾‹å¯¹è±¡ï¼Œä»¥åŠåšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œï¼Œç±»ä¼¼æ•´ç†Vueæ„é€ å‡½æ•°ä¸€æ ·ï¼Œæˆ‘åŒæ ·é’ˆå¯¹Vueå®ä¾‹åšäº†å±æ€§å’Œæ–¹æ³•çš„æ•´ç†ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">// åœ¨ Vue.prototype._init ä¸­æ·»åŠ çš„å±æ€§         **********************************************************\nthis._uid = uid++\nthis._isVue = true\nthis.$options = {\n    components,\n    directives,\n    filters,\n    _base,\n    el,\n    data: mergedInstanceDataFn()\n}\nthis._renderProxy = this\nthis._self = this\n\n// åœ¨ initLifecycle ä¸­æ·»åŠ çš„å±æ€§        **********************************************************\nthis.$parent = parent\nthis.$root = parent ? parent.$root : this\n\nthis.$children = []\nthis.$refs = {}\n\nthis._watcher = null\nthis._inactive = false\nthis._isMounted = false\nthis._isDestroyed = false\nthis._isBeingDestroyed = false\n\n// åœ¨ initEvents     ä¸­æ·»åŠ çš„å±æ€§         **********************************************************\nthis._events = {}\nthis._updateListeners = function(){}\n\n// åœ¨ initState ä¸­æ·»åŠ çš„å±æ€§        **********************************************************\nthis._watchers = []\n    // initData\n    this._data\n\n// åœ¨ initRender     ä¸­æ·»åŠ çš„å±æ€§     **********************************************************\nthis.$vnode = null // the placeholder node in parent tree\nthis._vnode = null // the root of the child tree\nthis._staticTrees = null\nthis.$slots\nthis.$scopedSlots\nthis._c\nthis.$createElement\n</code></pre>\n<p>ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªVueå®ä¾‹æ‰€åŒ…å«çš„å±æ€§å’Œæ–¹æ³•ï¼Œé™¤æ­¤ä¹‹å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ <code>initEvents</code> ä¸­é™¤äº†æ·»åŠ å±æ€§ä¹‹å¤–ï¼Œå¦‚æœæœ‰ <code>vm.$options._parentListeners</code> è¿˜è¦è°ƒç”¨ <code>vm._updateListeners()</code> æ–¹æ³•ï¼Œåœ¨ <code>initState</code> ä¸­åˆè°ƒç”¨äº†ä¸€äº›å…¶ä»–initæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">export function initState (vm: Component) {\n  vm._watchers = []\n  initProps(vm)\n  initMethods(vm)\n  initData(vm)\n  initComputed(vm)\n  initWatch(vm)\n}\n</code></pre>\n<p>æœ€ååœ¨ <code>initRender</code> ä¸­å¦‚æœæœ‰ <code>vm.$options.el</code> è¿˜è¦è°ƒç”¨ <code>vm.$mount(vm.$options.el)</code>ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">  if (vm.$options.el) {\n    vm.$mount(vm.$options.el)\n  }\n</code></pre>\n<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¦‚æœä¸ä¼ é€’ <code>el</code> é€‰é¡¹å°±éœ€è¦æ‰‹åŠ¨ mount çš„åŸå› äº†ã€‚</p>\n<p>é‚£ä¹ˆæˆ‘ä»¬ä¾ç…§æˆ‘ä»¬æœ¬èŠ‚å¼€å¤´çš„çš„ä¾‹å­ï¼Œä»¥åŠåˆå§‹åŒ–çš„å…ˆåé¡ºåºæ¥é€ä¸€çœ‹ä¸€çœ‹éƒ½å‘ç”Ÿäº†ä»€ä¹ˆã€‚æˆ‘ä»¬å°† <code>initState</code> ä¸­çš„ <code>init*</code> æ–¹æ³•å±•å¼€æ¥çœ‹ï¼Œæ‰§è¡Œé¡ºåºåº”è¯¥æ˜¯è¿™æ ·çš„ï¼ˆä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ‰§è¡Œï¼‰ï¼š</p>\n<pre><code>initLifecycle(vm)\ninitEvents(vm)\ncallHook(vm, &#39;beforeCreate&#39;)\ninitProps(vm)\ninitMethods(vm)\ninitData(vm)\ninitComputed(vm)\ninitWatch(vm)\ncallHook(vm, &#39;created&#39;)\ninitRender(vm)\n</code></pre><p>é¦–å…ˆæ˜¯ <code>initLifecycle</code>ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨å°±æ˜¯åœ¨å®ä¾‹ä¸Šæ·»åŠ ä¸€äº›å±æ€§ï¼Œç„¶åæ˜¯ <code>initEvents</code>ï¼Œç”±äº <code>vm.$options._parentListeners</code> çš„å€¼ä¸º <code>undefined</code> æ‰€ä»¥ä¹Ÿä»…ä»…æ˜¯åœ¨å®ä¾‹ä¸Šæ·»åŠ å±æ€§ï¼Œ <code>vm._updateListeners(listeners)</code> å¹¶ä¸ä¼šæ‰§è¡Œï¼Œç”±äºæˆ‘ä»¬åªä¼ é€’äº† <code>el</code> å’Œ <code>data</code>ï¼Œæ‰€ä»¥ <code>initProps</code>ã€<code>initMethods</code>ã€<code>initComputed</code>ã€<code>initWatch</code> è¿™å››ä¸ªæ–¹æ³•ä»€ä¹ˆéƒ½ä¸ä¼šåšï¼Œåªæœ‰ <code>initData</code> ä¼šæ‰§è¡Œã€‚æœ€åæ˜¯ <code>initRender</code>ï¼Œé™¤äº†åœ¨å®ä¾‹ä¸Šæ·»åŠ ä¸€äº›å±æ€§å¤–ï¼Œç”±äºæˆ‘ä»¬ä¼ é€’äº† <code>el</code> é€‰é¡¹ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œ <code>vm.$mount(vm.$options.el)</code>ã€‚</p>\n<p>ç»¼ä¸Šæ‰€è¿°ï¼šæŒ‰ç…§æˆ‘ä»¬çš„ä¾‹å­é‚£æ ·å†™ï¼Œåˆå§‹åŒ–å·¥ä½œåªåŒ…å«ä¸¤ä¸ªä¸»è¦å†…å®¹å³ï¼š<code>initData</code> å’Œ <code>initRender</code>ã€‚</p>\n<h2 id=\"äº”ã€é€šè¿‡initDataçœ‹Vueçš„æ•°æ®å“åº”ç³»ç»Ÿ\"><a href=\"#äº”ã€é€šè¿‡initDataçœ‹Vueçš„æ•°æ®å“åº”ç³»ç»Ÿ\" class=\"headerlink\" title=\"äº”ã€é€šè¿‡initDataçœ‹Vueçš„æ•°æ®å“åº”ç³»ç»Ÿ\"></a><span style=\"color: #ff6600;\">äº”ã€é€šè¿‡<code>initData</code>çœ‹Vueçš„æ•°æ®å“åº”ç³»ç»Ÿ</span></h2><p>Vueçš„æ•°æ®å“åº”ç³»ç»ŸåŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š<code>Observer</code>ã€<code>Dep</code>ã€<code>Watcher</code>ã€‚å…³äºæ•°æ®å“åº”ç³»ç»Ÿçš„å†…å®¹çœŸçš„å·²ç»è¢«æ–‡ç« è®²çƒ‚äº†ï¼Œæ‰€ä»¥æˆ‘å°±ç®€å•çš„è¯´ä¸€ä¸‹ï¼ŒåŠ›æ±‚å¤§å®¶èƒ½ç†è§£å°±okï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹ä¸€ä¸‹ <code>initData</code> ä¸­çš„ä»£ç ï¼š</p>\n<pre><code>function initData (vm: Component) {\n  let data = vm.$options.data\n  data = vm._data = typeof data === &#39;function&#39;\n    ? data.call(vm)\n    : data || {}\n  if (!isPlainObject(data)) {\n    data = {}\n    process.env.NODE_ENV !== &#39;production&#39; &amp;&amp; warn(\n      &#39;data functions should return an object:\\n&#39; +\n      &#39;https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function&#39;,\n      vm\n    )\n  }\n  // proxy data on instance\n  const keys = Object.keys(data)\n  const props = vm.$options.props\n  let i = keys.length\n  while (i--) {\n    if (props &amp;&amp; hasOwn(props, keys[i])) {\n      process.env.NODE_ENV !== &#39;production&#39; &amp;&amp; warn(\n        `The data property &quot;${keys[i]}&quot; is already declared as a prop. ` +\n        `Use prop default value instead.`,\n        vm\n      )\n    } else {\n      proxy(vm, keys[i])\n    }\n  }\n  // observe data\n  observe(data)\n  data.__ob__ &amp;&amp; data.__ob__.vmCount++\n}\n</code></pre><p>é¦–å…ˆï¼Œå…ˆæ‹¿åˆ° data æ•°æ®ï¼š<code>let data = vm.$options.data</code>ï¼Œå¤§å®¶è¿˜è®°å¾—æ­¤æ—¶ <code>vm.$options.data</code> çš„å€¼åº”è¯¥æ˜¯é€šè¿‡ <code>mergeOptions</code> åˆå¹¶å¤„ç†åçš„ <code>mergedInstanceDataFn</code> å‡½æ•°å—ï¼Ÿæ‰€ä»¥åœ¨å¾—åˆ° data åï¼Œå®ƒåˆåˆ¤æ–­äº† data çš„æ•°æ®ç±»å‹æ˜¯ä¸æ˜¯ â€˜functionâ€™ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯ï¼šdata è¿˜æ˜¯æˆ‘ä»¬ä¼ å…¥çš„æ•°æ®é€‰é¡¹çš„ dataï¼Œå³ï¼š</p>\n<pre><code>data: {\n    a: 1,\n    b: [1, 2, 3]\n}\n</code></pre><p>ç„¶ååœ¨å®ä¾‹å¯¹è±¡ä¸Šå®šä¹‰ <code>_data</code> å±æ€§ï¼Œè¯¥å±æ€§ä¸ <code>data</code> æ˜¯ç›¸åŒçš„å¼•ç”¨ã€‚</p>\n<p>ç„¶åæ˜¯ä¸€ä¸ª <code>while</code> å¾ªç¯ï¼Œå¾ªç¯çš„ç›®çš„æ˜¯åœ¨å®ä¾‹å¯¹è±¡ä¸Šå¯¹æ•°æ®è¿›è¡Œä»£ç†ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½é€šè¿‡ <code>this.a</code> æ¥è®¿é—® <code>data.a</code> äº†ï¼Œä»£ç çš„å¤„ç†æ˜¯åœ¨ <code>proxy</code> å‡½æ•°ä¸­ï¼Œè¯¥å‡½æ•°éå¸¸ç®€å•ï¼Œä»…ä»…æ˜¯åœ¨å®ä¾‹å¯¹è±¡ä¸Šè®¾ç½®ä¸ <code>data</code> å±æ€§åŒåçš„è®¿é—®å™¨å±æ€§ï¼Œç„¶åä½¿ç”¨ <code>_data</code> åšæ•°æ®åŠ«æŒï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code>function proxy (vm: Component, key: string) {\n  if (!isReserved(key)) {\n    Object.defineProperty(vm, key, {\n      configurable: true,\n      enumerable: true,\n      get: function proxyGetter () {\n        return vm._data[key]\n      },\n      set: function proxySetter (val) {\n        vm._data[key] = val\n      }\n    })\n  }\n}\n</code></pre><p>åšå®Œæ•°æ®çš„ä»£ç†ï¼Œå°±æ­£å¼è¿›å…¥å“åº”ç³»ç»Ÿï¼Œ</p>\n<pre><code>observe(data)\n</code></pre><p>æˆ‘ä»¬è¯´è¿‡ï¼Œæ•°æ®å“åº”ç³»ç»Ÿä¸»è¦åŒ…å«ä¸‰éƒ¨åˆ†ï¼š<code>Observer</code>ã€<code>Dep</code>ã€<code>Watcher</code>ï¼Œä»£ç åˆ†åˆ«å­˜æ”¾åœ¨ï¼š<code>observer/index.js</code>ã€<code>observer/dep.js</code> ä»¥åŠ <code>observer/watcher.js</code> æ–‡ä»¶ä¸­ï¼Œè¿™å›æˆ‘ä»¬æ¢ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬å…ˆä¸çœ‹å…¶æºç ï¼Œå¤§å®¶å…ˆè·Ÿç€æˆ‘çš„æ€è·¯æ¥æ€è€ƒï¼Œæœ€åå›å¤´å†å»çœ‹ä»£ç ï¼Œä½ ä¼šæœ‰ä¸€ç§ï¼šâ€å¥¥ï¼Œä¸è¿‡å¦‚æ­¤â€œçš„æ„Ÿè§‰ã€‚</p>\n<p>å‡å¦‚ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code class=\"js\">var data = {\n    a: 1,\n    b: {\n        c: 2\n    }\n}\n\nobserver(data)\n\nnew Watch(&#39;a&#39;, () =&gt; {\n    alert(9)\n})\nnew Watch(&#39;a&#39;, () =&gt; {\n    alert(90)\n})\nnew Watch(&#39;b.c&#39;, () =&gt; {\n    alert(80)\n})\n</code></pre>\n<p>è¿™æ®µä»£ç ç›®çš„æ˜¯ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªæ•°æ®å¯¹è±¡ <code>data</code>ï¼Œç„¶åé€šè¿‡ observer å¯¹å…¶è¿›è¡Œè§‚æµ‹ï¼Œä¹‹åå®šä¹‰äº†ä¸‰ä¸ªè§‚å¯Ÿè€…ï¼Œå½“æ•°æ®æœ‰å˜åŒ–æ—¶ï¼Œæ‰§è¡Œç›¸åº”çš„æ–¹æ³•ï¼Œè¿™ä¸ªåŠŸèƒ½ä½¿ç”¨Vueçš„å®ç°åŸæ¥è¦å¦‚ä½•å»å®ç°ï¼Ÿå…¶å®å°±æ˜¯åœ¨é—® <code>observer</code> æ€ä¹ˆå†™ï¼Ÿ<code>Watch</code> æ„é€ å‡½æ•°åˆæ€ä¹ˆå†™ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬é€ä¸€å®ç°ã€‚</p>\n<p>é¦–å…ˆï¼Œobserver çš„ä½œç”¨æ˜¯ï¼šå°†æ•°æ®å¯¹è±¡dataçš„å±æ€§è½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§ï¼š</p>\n<pre><code>class Observer {\n    constructor (data) {\n        this.walk(data)\n    }\n    walk (data) {\n        // éå† data å¯¹è±¡å±æ€§ï¼Œè°ƒç”¨ defineReactive æ–¹æ³•\n        let keys = Object.keys(data)\n        for(let i = 0; i &lt; keys.length; i++){\n            defineReactive(data, keys[i], data[keys[i]])\n        }\n    }\n}\n\n// defineReactiveæ–¹æ³•ä»…ä»…å°†dataçš„å±æ€§è½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§\nfunction defineReactive (data, key, val) {\n    // é€’å½’è§‚æµ‹å­å±æ€§\n    observer(val)\n\n    Object.defineProperty(data, key, {\n        enumerable: true,\n        configurable: true,\n        get: function () {\n            return val\n        },\n        set: function (newVal) {\n            if(val === newVal){\n                return\n            }\n            // å¯¹æ–°å€¼è¿›è¡Œè§‚æµ‹\n            observer(newVal)\n        }\n    })\n}\n\n// observer æ–¹æ³•é¦–å…ˆåˆ¤æ–­dataæ˜¯ä¸æ˜¯çº¯JavaScriptå¯¹è±¡ï¼Œå¦‚æœæ˜¯ï¼Œè°ƒç”¨ Observer ç±»è¿›è¡Œè§‚æµ‹\nfunction observer (data) {\n    if(Object.prototype.toString.call(data) !== &#39;[object Object]&#39;) {\n        return\n    }\n    new Observer(data)\n}\n</code></pre><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº† observer æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ£€æµ‹äº†æ•°æ®dataæ˜¯ä¸æ˜¯çº¯JavaScriptå¯¹è±¡ï¼Œå¦‚æœæ˜¯å°±è°ƒç”¨ <code>Observer</code> ç±»ï¼Œå¹¶å°† <code>data</code> ä½œä¸ºå‚æ•°é€ä¼ ã€‚åœ¨ <code>Observer</code> ç±»ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>walk</code> æ–¹æ³•å¯¹æ•°æ®dataçš„å±æ€§å¾ªç¯è°ƒç”¨ <code>defineReactive</code> æ–¹æ³•ï¼Œ<code>defineReactive</code> æ–¹æ³•å¾ˆç®€å•ï¼Œä»…ä»…æ˜¯å°†æ•°æ®dataçš„å±æ€§è½¬ä¸ºè®¿é—®å™¨å±æ€§ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œé€’å½’è§‚æµ‹ï¼Œå¦åˆ™åªèƒ½è§‚æµ‹æ•°æ®dataçš„ç›´å±å­å±æ€§ã€‚è¿™æ ·æˆ‘ä»¬çš„ç¬¬ä¸€æ­¥å·¥ä½œå°±å®Œæˆäº†ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹æˆ–è€…è·å–dataå±æ€§å€¼çš„æ—¶å€™ï¼Œé€šè¿‡ <code>get</code> å’Œ <code>set</code> å³èƒ½è·å–åˆ°é€šçŸ¥ã€‚</p>\n<p>æˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ï¼Œæ¥çœ‹ä¸€ä¸‹ <code>Watch</code>ï¼š</p>\n<pre><code>new Watch(&#39;a&#39;, () =&gt; {\n    alert(9)\n})\n</code></pre><p>ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œ<code>Watch</code> è¦æ€ä¹ˆå’Œ <code>observer</code> å…³è”ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿæˆ‘ä»¬çœ‹çœ‹ <code>Watch</code> å®ƒçŸ¥é“äº›ä»€ä¹ˆï¼Œé€šè¿‡ä¸Šé¢è°ƒç”¨ <code>Watch</code> çš„æ–¹å¼ï¼Œä¼ é€’ç»™ <code>Watch</code> ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ â€˜aâ€™ æˆ‘ä»¬å¯ä»¥ç§°å…¶ä¸ºè¡¨è¾¾å¼ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å›è°ƒå‡½æ•°ã€‚æ‰€ä»¥æˆ‘ä»¬ç›®å‰åªèƒ½å†™å‡ºè¿™æ ·çš„ä»£ç ï¼š</p>\n<pre><code>class Watch {\n    constructor (exp, fn) {\n        this.exp = exp\n        this.fn = fn\n    }\n}\n</code></pre><p>é‚£ä¹ˆè¦æ€ä¹ˆå…³è”å‘¢ï¼Œå¤§å®¶çœ‹ä¸‹é¢çš„ä»£ç ä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p>\n<pre><code>class Watch {\n    constructor (exp, fn) {\n        this.exp = exp\n        this.fn = fn\n        data[exp]\n    }\n}\n</code></pre><p>å¤šäº†ä¸€å¥ <code>data[exp]</code>ï¼Œè¿™å¥è¯æ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯åœ¨è·å– <code>data</code> ä¸‹æŸä¸ªå±æ€§çš„å€¼ï¼Œæ¯”å¦‚ exp ä¸º â€˜aâ€™ çš„è¯ï¼Œé‚£ä¹ˆ <code>data[exp]</code> å°±ç›¸å½“äºåœ¨è·å– <code>data.a</code> çš„å€¼ï¼Œé‚£è¿™ä¼šæ”¾ç”Ÿä»€ä¹ˆï¼Ÿå¤§å®¶ä¸è¦å¿˜äº†ï¼Œæ­¤æ—¶æ•°æ® <code>data</code> ä¸‹çš„å±æ€§å·²ç»æ˜¯è®¿é—®å™¨å±æ€§äº†ï¼Œæ‰€ä»¥è¿™ä¹ˆåšçš„ç»“æœä¼šç›´æ¥è§¦å‘å¯¹åº”å±æ€§çš„ <code>get</code> å‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å°±æˆåŠŸçš„å’Œ <code>observer</code> äº§ç”Ÿäº†å…³è”ï¼Œä½†è¿™æ ·è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜æ˜¯æ²¡æœ‰è¾¾åˆ°ç›®çš„ï¼Œä¸è¿‡æˆ‘ä»¬å·²ç»æ— é™æ¥è¿‘äº†ï¼Œæˆ‘ä»¬ç»§ç»­æ€è€ƒçœ‹ä¸€ä¸‹å¯ä¸å¯ä»¥è¿™æ ·ï¼š</p>\n<blockquote>\n<p>æ—¢ç„¶åœ¨ <code>Watch</code> ä¸­å¯¹è¡¨è¾¾å¼æ±‚å€¼ï¼Œèƒ½å¤Ÿè§¦å‘ <code>observer</code> çš„ <code>get</code>ï¼Œé‚£ä¹ˆå¯ä¸å¯ä»¥åœ¨ <code>get</code> ä¸­æ”¶é›† <code>Watch</code> ä¸­å‡½æ•°å‘¢ï¼Ÿ</p>\n</blockquote>\n<p>ç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ <code>Dep</code> å‡ºåœºäº†ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¾èµ–æ”¶é›†å™¨ã€‚æˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼š<code>data</code> ä¸‹çš„æ¯ä¸€ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ <code>Dep</code> å¯¹è±¡ï¼Œåœ¨ <code>get</code> ä¸­æ”¶é›†ä»…é’ˆå¯¹è¯¥å±æ€§çš„ä¾èµ–ï¼Œç„¶ååœ¨ <code>set</code> æ–¹æ³•ä¸­è§¦å‘æ‰€æœ‰æ”¶é›†çš„ä¾èµ–ï¼Œè¿™æ ·å°±æå®šäº†ï¼Œçœ‹å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre><code>class Dep {\n    constructor () {\n        this.subs = []\n    }\n    addSub () {\n        this.subs.push(Dep.target)\n    }\n    notify () {\n        for(let i = 0; i &lt; this.subs.length; i++){\n            this.subs[i].fn()\n        }\n    }\n}\nDep.target = null\nfunction pushTarget(watch){\n    Dep.target = watch\n}\n\nclass Watch {\n    constructor (exp, fn) {\n        this.exp = exp\n        this.fn = fn\n        pushTarget(this)\n        data[exp]\n    }\n}\n</code></pre><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨ <code>Watch</code> ä¸­å¢åŠ äº† <code>pushTarget(this)</code>ï¼Œå¯ä»¥å‘ç°ï¼Œè¿™å¥ä»£ç çš„ä½œç”¨æ˜¯å°† <code>Dep.target</code> çš„å€¼è®¾ç½®ä¸ºè¯¥Watchå¯¹è±¡ã€‚åœ¨ <code>pushTarget</code> ä¹‹åæˆ‘ä»¬æ‰å¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œæ¥ç€ï¼Œæˆ‘ä»¬ä¿®æ”¹ <code>defineReactive</code> ä»£ç å¦‚ä¸‹</p>\n<pre><code>function defineReactive (data, key, val) {\n    observer(val)\n    let dep = new Dep()        // æ–°å¢\n    Object.defineProperty(data, key, {\n        enumerable: true,\n        configurable: true,\n        get: function () {\n            dep.addSub()    // æ–°å¢\n            return val\n        },\n        set: function (newVal) {\n            if(val === newVal){\n                return\n            }\n            observer(newVal)\n            dep.notify()    // æ–°å¢\n        }\n    })\n}\n</code></pre><p>å¦‚æ ‡æ³¨ï¼Œæ–°å¢äº†ä¸‰å¥ä»£ç ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œ<code>Watch</code> ä¸­å¯¹è¡¨è¾¾å¼æ±‚å€¼ä¼šè§¦å‘ <code>get</code> æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨ <code>get</code> æ–¹æ³•ä¸­è°ƒç”¨äº† <code>dep.addSub</code>ï¼Œä¹Ÿå°±æ‰§è¡Œäº†è¿™å¥ä»£ç ï¼š<code>this.subs.push(Dep.target)</code>ï¼Œç”±äºåœ¨è¿™å¥ä»£ç æ‰§è¡Œä¹‹å‰ï¼Œ<code>Dep.target</code> çš„å€¼å·²ç»è¢«è®¾ç½®ä¸ºä¸€ä¸ª <code>Watch</code> å¯¹è±¡äº†ï¼Œæ‰€ä»¥æœ€ç»ˆç»“æœå°±æ˜¯æ”¶é›†äº†ä¸€ä¸ª <code>Watch</code> å¯¹è±¡ï¼Œç„¶ååœ¨ <code>set</code> æ–¹æ³•ä¸­æˆ‘ä»¬è°ƒç”¨äº† <code>dep.notify</code>ï¼Œæ‰€ä»¥å½“dataå±æ€§å€¼å˜åŒ–çš„æ—¶å€™ï¼Œå°±ä¼šé€šè¿‡ <code>dep.notify</code> å¾ªç¯è°ƒç”¨æ‰€æœ‰æ”¶é›†çš„Watchå¯¹è±¡ä¸­çš„å›è°ƒå‡½æ•°ï¼š</p>\n<pre><code>notify () {\n    for(let i = 0; i &lt; this.subs.length; i++){\n        this.subs[i].fn()\n    }\n}\n</code></pre><p>è¿™æ · <code>observer</code>ã€<code>Dep</code>ã€<code>Watch</code> ä¸‰è€…å°±è”ç³»æˆä¸ºä¸€ä¸ªæœ‰æœºçš„æ•´ä½“ï¼Œå®ç°äº†æˆ‘ä»¬æœ€åˆçš„ç›®æ ‡ï¼Œå®Œæ•´çš„ä»£ç å¯ä»¥æˆ³è¿™é‡Œï¼š<a href=\"https://github.com/HcySunYang/observer-dep-watch\" target=\"_blank\" rel=\"external\">observer-dep-watch</a>ã€‚è¿™é‡Œè¿˜ç»™å¤§å®¶æŒ–äº†ä¸ªå‘ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å¤„ç†å¯¹æ•°ç»„çš„è§‚æµ‹ï¼Œç”±äºæ¯”è¾ƒå¤æ‚å¹¶ä¸”è¿™åˆä¸æ˜¯æˆ‘ä»¬è®¨è®ºçš„é‡ç‚¹ï¼Œå¦‚æœå¤§å®¶æƒ³äº†è§£å¯ä»¥æˆ³æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š<a href=\"http://hcysun.me/2016/04/28/JavaScript%E5%AE%9E%E7%8E%B0MVVM%E4%B9%8B%E6%88%91%E5%B0%B1%E6%98%AF%E6%83%B3%E7%9B%91%E6%B5%8B%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%98%E5%8C%96/\">JavaScriptå®ç°MVVMä¹‹æˆ‘å°±æ˜¯æƒ³ç›‘æµ‹ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å˜åŒ–</a>ï¼Œå¦å¤–ï¼Œåœ¨ Watch ä¸­å¯¹è¡¨è¾¾å¼æ±‚å€¼çš„æ—¶å€™ä¹Ÿåªåšäº†ç›´æ¥å­å±æ€§çš„æ±‚å€¼ï¼Œæ‰€ä»¥å¦‚æœ exp çš„å€¼ä¸º â€˜a.bâ€™ çš„æ—¶å€™ï¼Œå°±ä¸å¯ä»¥ç”¨äº†ï¼ŒVueçš„åšæ³•æ˜¯ä½¿ç”¨ <code>.</code> åˆ†å‰²è¡¨è¾¾å¼å­—ç¬¦ä¸²ä¸ºæ•°ç»„ï¼Œç„¶åéå†ä¸€ä¸‹å¯¹å…¶è¿›è¡Œæ±‚å€¼ï¼Œå¤§å®¶å¯ä»¥æŸ¥çœ‹å…¶æºç ã€‚å¦‚ä¸‹ï¼š</p>\n<pre><code>/**\n * Parse simple path.\n */\nconst bailRE = /[^\\w.$]/\nexport function parsePath (path: string): any {\n  if (bailRE.test(path)) {\n    return\n  } else {\n    const segments = path.split(&#39;.&#39;)\n    return function (obj) {\n      for (let i = 0; i &lt; segments.length; i++) {\n        if (!obj) return\n        obj = obj[segments[i]]\n      }\n      return obj\n    }\n  }\n}\n</code></pre><p>Vue çš„æ±‚å€¼ä»£ç æ˜¯åœ¨ <code>src/core/util/lang.js</code> æ–‡ä»¶ä¸­ <code>parsePath</code> å‡½æ•°ä¸­å®ç°çš„ã€‚æ€»ç»“ä¸€ä¸‹Vueçš„ä¾èµ–æ”¶é›†è¿‡ç¨‹åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/vueimgdep.png\" alt=\"Vueçš„ä¾èµ–æ”¶é›†è¿‡ç¨‹\"></p>\n<p>å®é™…ä¸Šï¼ŒVueå¹¶æ²¡æœ‰ç›´æ¥åœ¨ <code>get</code> ä¸­è°ƒç”¨ <code>addSub</code>ï¼Œè€Œæ˜¯è°ƒç”¨çš„ <code>dep.depend</code>ï¼Œç›®çš„æ˜¯å°†å½“å‰çš„ dep å¯¹è±¡æ”¶é›†åˆ° watch å¯¹è±¡ä¸­ï¼Œå¦‚æœè¦å®Œæ•´çš„æµç¨‹ï¼Œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼šï¼ˆå¤§å®¶æ³¨æ„æ•°æ®çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æ‹¥æœ‰è‡ªå·±çš„ <code>dep</code> å¯¹è±¡å’Œ <code>get</code> æ–¹æ³•ã€‚ï¼‰</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/all.png\" alt=\"Vueå®Œæ•´çš„æ”¶é›†ä¾èµ–çš„æµç¨‹\"></p>\n<p>è¿™æ · Vue å°±å»ºç«‹äº†ä¸€å¥—æ•°æ®å“åº”ç³»ç»Ÿï¼Œä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼ŒæŒ‰ç…§æˆ‘ä»¬çš„ä¾‹å­é‚£æ ·å†™ï¼Œåˆå§‹åŒ–å·¥ä½œåªåŒ…å«ä¸¤ä¸ªä¸»è¦å†…å®¹å³ï¼š<code>initData</code> å’Œ <code>initRender</code>ã€‚ç°åœ¨ <code>initData</code> æˆ‘ä»¬åˆ†æå®Œäº†ï¼Œæ¥ä¸‹æ¥çœ‹ä¸€çœ‹ <code>initRender</code></p>\n<h2 id=\"å…­ã€é€šè¿‡initRenderçœ‹Vueçš„-render-æ¸²æŸ“-ä¸-re-render-é‡æ–°æ¸²æŸ“\"><a href=\"#å…­ã€é€šè¿‡initRenderçœ‹Vueçš„-render-æ¸²æŸ“-ä¸-re-render-é‡æ–°æ¸²æŸ“\" class=\"headerlink\" title=\"å…­ã€é€šè¿‡initRenderçœ‹Vueçš„ render(æ¸²æŸ“) ä¸ re-render(é‡æ–°æ¸²æŸ“)\"></a><span style=\"color: #ff6600;\">å…­ã€é€šè¿‡<code>initRender</code>çœ‹Vueçš„ render(æ¸²æŸ“) ä¸ re-render(é‡æ–°æ¸²æŸ“)</span></h2><p>åœ¨ <code>initRender</code> æ–¹æ³•ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä¾‹å­ä¸­ä¼ é€’äº† <code>el</code> é€‰é¡¹ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä»£ç ä¼šæ‰§è¡Œï¼š</p>\n<pre><code>  if (vm.$options.el) {\n    vm.$mount(vm.$options.el)\n  }\n</code></pre><p>è¿™é‡Œï¼Œè°ƒç”¨äº† <code>$mount</code> æ–¹æ³•ï¼Œåœ¨è¿˜åŸVueæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ•´ç†è¿‡æ‰€æœ‰çš„æ–¹æ³•ï¼Œå…¶ä¸­ <code>$mount</code> æ–¹æ³•åœ¨ä¸¤ä¸ªåœ°æ–¹å‡ºç°è¿‡ï¼š</p>\n<p>1ã€åœ¨ <code>web-runtime.js</code> æ–‡ä»¶ä¸­ï¼š</p>\n<pre><code>Vue.prototype.$mount = function (\n  el?: string | Element,\n  hydrating?: boolean\n): Component {\n  el = el &amp;&amp; inBrowser ? query(el) : undefined\n  return this._mount(el, hydrating)\n}\n</code></pre><p>å®ƒçš„ä½œç”¨æ˜¯é€šè¿‡ <code>el</code> è·å–ç›¸åº”çš„DOMå…ƒç´ ï¼Œç„¶åè°ƒç”¨ <code>lifecycle.js</code> æ–‡ä»¶ä¸­çš„ <code>_mount</code> æ–¹æ³•ã€‚</p>\n<p>2ã€åœ¨ <code>web-runtime-with-compiler.js</code> æ–‡ä»¶ä¸­ï¼š</p>\n<pre><code>// ç¼“å­˜äº†æ¥è‡ª web-runtime.js çš„ $mount æ–¹æ³•\nconst mount = Vue.prototype.$mount\n// é‡å†™ $mount æ–¹æ³•\nVue.prototype.$mount = function (\n  el?: string | Element,\n  hydrating?: boolean\n): Component {\n  // æ ¹æ® el è·å–ç›¸åº”çš„DOMå…ƒç´ \n  el = el &amp;&amp; query(el)\n  // ä¸å…è®¸ä½ å°† el æŒ‚è½½åˆ° html æ ‡ç­¾æˆ–è€… body æ ‡ç­¾\n  if (el === document.body || el === document.documentElement) {\n    process.env.NODE_ENV !== &#39;production&#39; &amp;&amp; warn(\n      `Do not mount Vue to &lt;html&gt; or &lt;body&gt; - mount to normal elements instead.`\n    )\n    return this\n  }\n\n  const options = this.$options\n  // å¦‚æœæˆ‘ä»¬æ²¡æœ‰å†™ render é€‰é¡¹ï¼Œé‚£ä¹ˆå°±å°è¯•å°† template æˆ–è€… el è½¬åŒ–ä¸º render å‡½æ•°\n  if (!options.render) {\n    let template = options.template\n    if (template) {\n      if (typeof template === &#39;string&#39;) {\n        if (template.charAt(0) === &#39;#&#39;) {\n          template = idToTemplate(template)\n          /* istanbul ignore if */\n          if (process.env.NODE_ENV !== &#39;production&#39; &amp;&amp; !template) {\n            warn(\n              `Template element not found or is empty: ${options.template}`,\n              this\n            )\n          }\n        }\n      } else if (template.nodeType) {\n        template = template.innerHTML\n      } else {\n        if (process.env.NODE_ENV !== &#39;production&#39;) {\n          warn(&#39;invalid template option:&#39; + template, this)\n        }\n        return this\n      }\n    } else if (el) {\n      template = getOuterHTML(el)\n    }\n    if (template) {\n      const { render, staticRenderFns } = compileToFunctions(template, {\n        warn,\n        shouldDecodeNewlines,\n        delimiters: options.delimiters\n      }, this)\n      options.render = render\n      options.staticRenderFns = staticRenderFns\n    }\n  }\n  // è°ƒç”¨å·²ç»ç¼“å­˜ä¸‹æ¥çš„ web-runtime.js æ–‡ä»¶ä¸­çš„ $mount æ–¹æ³•\n  return mount.call(this, el, hydrating)\n}\n</code></pre><p>åˆ†æä¸€ä¸‹å¯çŸ¥ <code>web-runtime-with-compiler.js</code> çš„é€»è¾‘å¦‚ä¸‹ï¼š</p>\n<p>1ã€ç¼“å­˜æ¥è‡ª <code>web-runtime.js</code> æ–‡ä»¶çš„ <code>$mount</code> æ–¹æ³•</p>\n<p>2ã€åˆ¤æ–­æœ‰æ²¡æœ‰ä¼ é€’ <code>render</code> é€‰é¡¹ï¼Œå¦‚æœæœ‰ç›´æ¥è°ƒç”¨æ¥è‡ª <code>web-runtime.js</code> æ–‡ä»¶çš„ $mount æ–¹æ³•</p>\n<p>3ã€å¦‚æœæ²¡æœ‰ä¼ é€’ <code>render</code> é€‰é¡¹ï¼Œé‚£ä¹ˆæŸ¥çœ‹æœ‰æ²¡æœ‰ <code>template</code> é€‰é¡¹ï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ <code>compileToFunctions</code> å‡½æ•°æ ¹æ®å…¶å†…å®¹ç¼–è¯‘æˆ <code>render</code> å‡½æ•°</p>\n<p>4ã€å¦‚æœæ²¡æœ‰ <code>template</code> é€‰é¡¹ï¼Œé‚£ä¹ˆæŸ¥çœ‹æœ‰æ²¡æœ‰ <code>el</code> é€‰é¡¹ï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ <code>compileToFunctions</code> å‡½æ•°å°†å…¶å†…å®¹(template = getOuterHTML(el))ç¼–è¯‘æˆ <code>render</code> å‡½æ•°</p>\n<p>5ã€å°†ç¼–è¯‘æˆçš„ <code>render</code> å‡½æ•°æŒ‚è½½åˆ° <code>this.$options</code> å±æ€§ä¸‹ï¼Œå¹¶è°ƒç”¨ç¼“å­˜ä¸‹æ¥çš„ <code>web-runtime.js</code> æ–‡ä»¶ä¸­çš„ $mount æ–¹æ³•</p>\n<p>ç®€å•çš„ç”¨ä¸€å¼ å›¾è¡¨ç¤º <code>mount</code> æ–¹æ³•çš„è°ƒç”¨å…³ç³»ï¼Œä»ä¸Šè‡³ä¸‹è°ƒç”¨ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/vueimgmount.png\" alt=\"mountè°ƒç”¨å…³ç³»\"></p>\n<p>ä¸è¿‡ä¸ç®¡æ€æ ·ï¼Œæˆ‘ä»¬å‘ç°è¿™äº›æ­¥éª¤çš„æœ€ç»ˆç›®çš„æ˜¯ç”Ÿæˆ <code>render</code> å‡½æ•°ï¼Œç„¶åå†è°ƒç”¨ <code>lifecycle.js</code> æ–‡ä»¶ä¸­çš„ <code>_mount</code> æ–¹æ³•ï¼Œæˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªæ–¹æ³•åšäº†ä»€ä¹ˆäº‹æƒ…ï¼ŒæŸ¥çœ‹ <code>_mount</code> æ–¹æ³•çš„ä»£ç ï¼Œè¿™æ˜¯ç®€åŒ–è¿‡å¾—ï¼š</p>\n<pre><code>  Vue.prototype._mount = function (\n    el?: Element | void,\n    hydrating?: boolean\n  ): Component {\n    const vm: Component = this\n\n    // åœ¨Vueå®ä¾‹å¯¹è±¡ä¸Šæ·»åŠ  $el å±æ€§ï¼ŒæŒ‡å‘æŒ‚è½½ç‚¹å…ƒç´ \n    vm.$el = el\n\n    // è§¦å‘ beforeMount ç”Ÿå‘½å‘¨æœŸé’©å­\n    callHook(vm, &#39;beforeMount&#39;)\n\n    vm._watcher = new Watcher(vm, () =&gt; {\n      vm._update(vm._render(), hydrating)\n    }, noop)\n\n    // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡mountåˆ™è§¦å‘ mounted ç”Ÿå‘½å‘¨æœŸé’©å­\n    if (vm.$vnode == null) {\n      vm._isMounted = true\n      callHook(vm, &#39;mounted&#39;)\n    }\n    return vm\n  }\n</code></pre><p>ä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œè¯¥æ³¨é‡Šçš„éƒ½æ³¨é‡Šäº†ï¼Œå”¯ä¸€éœ€è¦çœ‹çš„å°±æ˜¯è¿™æ®µä»£ç ï¼š</p>\n<pre><code>vm._watcher = new Watcher(vm, () =&gt; {\n  vm._update(vm._render(), hydrating)\n}, noop)\n</code></pre><p>çœ‹ä¸Šå»å¾ˆçœ¼ç†Ÿæœ‰æ²¡æœ‰ï¼Ÿæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨Vueéƒ½æ˜¯è¿™æ ·ä½¿ç”¨ watchçš„ï¼š</p>\n<pre><code>this.$watch(&#39;a&#39;, (newVal, oldVal) =&gt; {\n\n})\n// æˆ–è€…\nthis.$watch(function(){\n    return this.a + this.b\n}, (newVal, oldVal) =&gt; {\n\n})\n</code></pre><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ è¡¨è¾¾å¼æˆ–è€…å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å¯é€‰çš„é€‰é¡¹ã€‚åŸç†æ˜¯ <code>Watch</code> å†…éƒ¨å¯¹è¡¨è¾¾å¼æ±‚å€¼æˆ–è€…å¯¹å‡½æ•°æ±‚å€¼ä»è€Œè§¦å‘æ•°æ®çš„ <code>get</code> æ–¹æ³•æ”¶é›†ä¾èµ–ã€‚å¯æ˜¯ <code>_mount</code> æ–¹æ³•ä¸­ä½¿ç”¨ <code>Watcher</code> çš„æ—¶å€™ç¬¬ä¸€ä¸ªå‚æ•° <code>vm</code> æ˜¯ä»€ä¹ˆé¬¼ã€‚æˆ‘ä»¬ä¸å¦¨å»çœ‹çœ‹æºç ä¸­ <code>$watch</code> å‡½æ•°æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæ ¹æ®ä¹‹å‰è¿˜åŸVueæ„é€ å‡½æ•°ä¸­æ‰€æ•´ç†çš„å†…å®¹å¯çŸ¥ï¼š<code>$warch</code> æ–¹æ³•æ˜¯åœ¨ <code>src/core/instance/state.js</code> æ–‡ä»¶ä¸­çš„ <code>stateMixin</code> æ–¹æ³•ä¸­å®šä¹‰çš„ï¼Œæºç å¦‚ä¸‹ï¼š</p>\n<pre><code>  Vue.prototype.$watch = function (\n    expOrFn: string | Function,\n    cb: Function,\n    options?: Object\n  ): Function {\n    const vm: Component = this\n    options = options || {}\n    options.user = true\n    const watcher = new Watcher(vm, expOrFn, cb, options)\n    if (options.immediate) {\n      cb.call(vm, watcher.value)\n    }\n    return function unwatchFn () {\n      watcher.teardown()\n    }\n  }\n</code></pre><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ<code>$warch</code> å…¶å®æ˜¯å¯¹ <code>Watcher</code> çš„ä¸€ä¸ªå°è£…ï¼Œå†…éƒ¨çš„ <code>Watcher</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°å®é™…ä¸Šä¹Ÿæ˜¯ <code>vm</code> å³ï¼šVueå®ä¾‹å¯¹è±¡ï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬å¯ä»¥åœ¨ <code>Watcher</code> çš„æºç ä¸­å¾—åˆ°éªŒè¯ï¼Œä»£å¼€ <code>observer/watcher.js</code> æ–‡ä»¶æŸ¥çœ‹ï¼š</p>\n<pre><code class=\"js\">export default class Watcher {\n\n  constructor (\n    vm: Component,\n    expOrFn: string | Function,\n    cb: Function,\n    options?: Object = {}\n  ) {\n\n  }\n}\n</code></pre>\n<p>å¯ä»¥å‘ç°çœŸæ­£çš„ <code>Watcher</code> ç¬¬ä¸€ä¸ªå‚æ•°å®é™…ä¸Šå°±æ˜¯ <code>vm</code>ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¡¨è¾¾å¼æˆ–è€…å‡½æ•°ï¼Œç„¶åä»¥æ­¤ç±»æ¨ï¼Œæ‰€ä»¥ç°åœ¨å†æ¥çœ‹ <code>_mount</code> ä¸­çš„è¿™æ®µä»£ç ï¼š</p>\n<pre><code>vm._watcher = new Watcher(vm, () =&gt; {\n  vm._update(vm._render(), hydrating)\n}, noop)\n</code></pre><p>å¿½ç•¥ç¬¬ä¸€ä¸ªå‚æ•° <code>vm</code>ï¼Œä¹Ÿå°±è¯´ï¼Œ<code>Watcher</code> å†…éƒ¨åº”è¯¥å¯¹ç¬¬äºŒä¸ªå‚æ•°æ±‚å€¼ï¼Œä¹Ÿå°±æ˜¯è¿è¡Œè¿™ä¸ªå‡½æ•°ï¼š</p>\n<pre><code>() =&gt; {\n  vm._update(vm._render(), hydrating)\n}\n</code></pre><p>æ‰€ä»¥ <code>vm._render()</code> å‡½æ•°è¢«ç¬¬ä¸€ä¸ªæ‰§è¡Œï¼Œè¯¥å‡½æ•°åœ¨ <code>src/core/instance/render.js</code> ä¸­ï¼Œè¯¥æ–¹æ³•ä¸­çš„ä»£ç å¾ˆå¤šï¼Œä¸‹é¢æ˜¯ç®€åŒ–è¿‡çš„ï¼š</p>\n<pre><code>  Vue.prototype._render = function (): VNode {\n    const vm: Component = this\n    // è§£æ„å‡º $options ä¸­çš„ render å‡½æ•°\n    const {\n      render,\n      staticRenderFns,\n      _parentVnode\n    } = vm.$options\n    ...\n\n    let vnode\n    try {\n      // è¿è¡Œ render å‡½æ•°\n      vnode = render.call(vm._renderProxy, vm.$createElement)\n    } catch (e) {\n      ...\n    }\n\n    // set parent\n    vnode.parent = _parentVnode\n    return vnode\n  }\n</code></pre><p><code>_render</code> æ–¹æ³•é¦–å…ˆä» <code>vm.$options</code> ä¸­è§£æ„å‡º <code>render</code> å‡½æ•°ï¼Œå¤§å®¶åº”è¯¥è®°å¾—ï¼š<code>vm.$options.render</code> æ–¹æ³•æ˜¯åœ¨ <code>web-runtime-with-compiler.js</code> æ–‡ä»¶ä¸­é€šè¿‡ <code>compileToFunctions</code> æ–¹æ³•å°† <code>template</code> æˆ– <code>el</code> ç¼–è¯‘è€Œæ¥çš„ã€‚è§£æ„å‡º <code>render</code> å‡½æ•°åï¼Œæ¥ä¸‹æ¥ä¾¿æ‰§è¡Œäº†è¯¥æ–¹æ³•ï¼š</p>\n<pre><code>vnode = render.call(vm._renderProxy, vm.$createElement)\n</code></pre><p>å…¶ä¸­ä½¿ç”¨ <code>call</code> æŒ‡å®šäº† <code>render</code> å‡½æ•°çš„ä½œç”¨åŸŸç¯å¢ƒä¸º <code>vm._renderProxy</code>ï¼Œè¿™ä¸ªå±æ€§åœ¨æˆ‘ä»¬æ•´ç†å®ä¾‹å¯¹è±¡çš„æ—¶å€™çŸ¥é“ï¼Œä»–æ˜¯åœ¨ <code>Vue.prototype._init</code> æ–¹æ³•ä¸­è¢«æ·»åŠ çš„ï¼Œå³ï¼š<code>vm._renderProxy = vm</code>ï¼Œå…¶å®å°±æ˜¯Vueå®ä¾‹å¯¹è±¡æœ¬èº«ï¼Œç„¶åä¼ é€’äº†ä¸€ä¸ªå‚æ•°ï¼š<code>vm.$createElement</code>ã€‚é‚£ä¹ˆ <code>render</code> å‡½æ•°åˆ°åº•æ˜¯å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿè®©æˆ‘ä»¬æ ¹æ®ä¸Šé¢é‚£å¥ä»£ç çŒœä¸€çŒœï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ <code>render</code> å‡½æ•°æ˜¯ä» <code>template</code> æˆ– <code>el</code> ç¼–è¯‘è€Œæ¥çš„ï¼Œå¦‚æœæ²¡é”™çš„è¯åº”è¯¥æ˜¯è¿”å›ä¸€ä¸ªè™šæ‹ŸDOMå¯¹è±¡ã€‚æˆ‘ä»¬ä¸å¦¨ä½¿ç”¨ <code>console.log</code> æ‰“å°ä¸€ä¸‹ <code>render</code> å‡½æ•°ï¼Œå½“æˆ‘ä»¬çš„æ¨¡æ¿è¿™æ ·ç¼–å†™æ—¶ï¼š</p>\n<pre><code>&lt;ul id=&quot;app&quot;&gt;\n  &lt;li&gt;{{a}}&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre><p>æ‰“å°çš„ <code>render</code> å‡½æ•°å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/vueimgr2.png\" alt=\"renderå‡½æ•°1\"></p>\n<p>æˆ‘ä»¬ä¿®æ”¹æ¨¡æ¿ä¸ºï¼š</p>\n<pre><code>&lt;ul id=&quot;app&quot;&gt;\n  &lt;li v-for=&quot;i in b&quot;&gt;{{a}}&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre><p>æ‰“å°å‡ºæ¥çš„ <code>render</code> å‡½æ•°å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/vueimgr3.png\" alt=\"renderå‡½æ•°2\"></p>\n<p>å…¶å®äº†è§£Vue2.xç‰ˆæœ¬çš„åŒå­¦éƒ½çŸ¥é“ï¼ŒVueæä¾›äº† <code>render</code> é€‰é¡¹ï¼Œä½œä¸º <code>template</code> çš„ä»£æ›¿æ–¹æ¡ˆï¼ŒåŒæ—¶ä¸ºJavaScriptæä¾›äº†å®Œå…¨ç¼–ç¨‹çš„èƒ½åŠ›ï¼Œä¸‹é¢ä¸¤ç§ç¼–å†™æ¨¡æ¿çš„æ–¹å¼å®é™…æ˜¯ç­‰ä»·çš„ï¼š</p>\n<pre><code class=\"js\">// æ–¹æ¡ˆä¸€ï¼š\nnew Vue({\n    el: &#39;#app&#39;,\n    data: {\n        a: 1\n    },\n    template: &#39;&lt;ul&gt;&lt;li&gt;{{a}}&lt;/li&gt;&lt;li&gt;{{a}}&lt;/li&gt;&lt;/ul&gt;&#39;\n})\n\n// æ–¹æ¡ˆäºŒï¼š\nnew Vue({\n    el: &#39;#app&#39;,\n    render: function (createElement) {\n        createElement(&#39;ul&#39;, [\n            createElement(&#39;li&#39;, this.a),\n            createElement(&#39;li&#39;, this.a)\n        ])\n    }\n})\n</code></pre>\n<p>ç°åœ¨æˆ‘ä»¬å†æ¥çœ‹æˆ‘ä»¬æ‰“å°çš„ <code>render</code> å‡½æ•°ï¼š</p>\n<pre><code>function anonymous() {\n    with(this){\n        return _c(&#39;ul&#39;, { \n            attrs: {&quot;id&quot;: &quot;app&quot;}\n        },[\n            _c(&#39;li&#39;, [_v(_s(a))])\n        ])\n    }\n}\n</code></pre><p>æ˜¯ä¸æ˜¯ä¸æˆ‘ä»¬è‡ªå·±å†™ <code>render</code> å‡½æ•°å¾ˆåƒï¼Ÿå› ä¸º render å‡½æ•°çš„ä½œç”¨åŸŸè¢«ç»‘å®šåˆ°äº†Vueå®ä¾‹ï¼Œå³ï¼š<code>render.call(vm._renderProxy, vm.$createElement)</code>ï¼Œæ‰€ä»¥ä¸Šé¢ä»£ç ä¸­ <code>_c</code>ã€<code>_v</code>ã€<code>_s</code> ä»¥åŠå˜é‡ <code>a</code>ç›¸å½“äºVueå®ä¾‹ä¸‹çš„æ–¹æ³•å’Œå˜é‡ã€‚å¤§å®¶è¿˜è®°å¾—è¯¸å¦‚ <code>_c</code>ã€<code>_v</code>ã€<code>_s</code> è¿™æ ·çš„æ–¹æ³•åœ¨å“ªé‡Œå®šä¹‰çš„å—ï¼Ÿæˆ‘ä»¬åœ¨æ•´ç†Vueæ„é€ å‡½æ•°çš„æ—¶å€™çŸ¥é“ï¼Œä»–ä»¬åœ¨ <code>src/core/instance/render.js</code> æ–‡ä»¶ä¸­çš„ <code>renderMixin</code> æ–¹æ³•ä¸­å®šä¹‰ï¼Œé™¤äº†è¿™äº›ä¹‹å¤–è¿˜æœ‰è¯¸å¦‚ï¼š<code>_l</code>ã€ <code>_m</code>ã€ <code>_o</code> ç­‰ç­‰ã€‚å…¶ä¸­ <code>_l</code> å°±åœ¨æˆ‘ä»¬ä½¿ç”¨ <code>v-for</code> æŒ‡ä»¤çš„æ—¶å€™å‡ºç°äº†ã€‚æ‰€ä»¥ç°åœ¨å¤§å®¶çŸ¥é“ä¸ºä»€ä¹ˆè¿™äº›æ–¹æ³•éƒ½è¢«å®šä¹‰åœ¨ <code>render.js</code> æ–‡ä»¶ä¸­äº†å§ï¼Œå› ä¸ºä»–ä»¬å°±æ˜¯ä¸ºäº†æ„é€ å‡º <code>render</code> å‡½æ•°è€Œå­˜åœ¨çš„ã€‚</p>\n<p>ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº† <code>render</code> å‡½æ•°çš„é•¿ç›¸ï¼Œä¹ŸçŸ¥é“äº† <code>render</code> å‡½æ•°çš„ä½œç”¨åŸŸæ˜¯Vueå®ä¾‹æœ¬èº«å³ï¼š<code>this</code>(æˆ–<code>vm</code>)ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬æ‰§è¡Œ <code>render</code> å‡½æ•°æ—¶ï¼Œå…¶ä¸­çš„å˜é‡å¦‚ï¼š<code>a</code>ï¼Œå°±ç›¸å½“äºï¼š<code>this.a</code>ï¼Œæˆ‘ä»¬çŸ¥é“è¿™æ˜¯åœ¨æ±‚å€¼ï¼Œæ‰€ä»¥ <code>_mount</code> ä¸­çš„è¿™æ®µä»£ç ï¼š</p>\n<pre><code>vm._watcher = new Watcher(vm, () =&gt; {\n  vm._update(vm._render(), hydrating)\n}, noop)\n</code></pre><p>å½“ <code>vm._render</code> æ‰§è¡Œçš„æ—¶å€™ï¼Œæ‰€ä¾èµ–çš„å˜é‡å°±ä¼šè¢«æ±‚å€¼ï¼Œå¹¶è¢«æ”¶é›†ä¸ºä¾èµ–ã€‚æŒ‰ç…§Vueä¸­ <code>watcher.js</code> çš„é€»è¾‘ï¼Œå½“ä¾èµ–çš„å˜é‡æœ‰å˜åŒ–æ—¶ä¸ä»…ä»…å›è°ƒå‡½æ•°è¢«æ‰§è¡Œï¼Œå®é™…ä¸Šè¿˜è¦é‡æ–°æ±‚å€¼ï¼Œå³è¿˜è¦æ‰§è¡Œä¸€éï¼š</p>\n<pre><code>() =&gt; {\n  vm._update(vm._render(), hydrating)\n}\n</code></pre><p>è¿™å®é™…ä¸Šå°±åšåˆ°äº† <code>re-render</code>ï¼Œå› ä¸º <code>vm._update</code> å°±æ˜¯æ–‡ç« å¼€å¤´æ‰€è¯´çš„è™šæ‹ŸDOMä¸­çš„æœ€åä¸€æ­¥ï¼š<code>patch</code></p>\n<p><code>vm_render</code> æ–¹æ³•æœ€ç»ˆè¿”å›ä¸€ä¸ª <code>vnode</code> å¯¹è±¡ï¼Œå³è™šæ‹ŸDOMï¼Œç„¶åä½œä¸º <code>vm_update</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’äº†è¿‡å»ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ <code>vm_update</code> çš„é€»è¾‘ï¼Œåœ¨ <code>src/core/instance/lifecycle.js</code> æ–‡ä»¶ä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š</p>\n<pre><code class=\"js\">    if (!prevVnode) {\n      // initial render\n      vm.$el = vm.__patch__(\n        vm.$el, vnode, hydrating, false /* removeOnly */,\n        vm.$options._parentElm,\n        vm.$options._refElm\n      )\n    } else {\n      // updates\n      vm.$el = vm.__patch__(prevVnode, vnode)\n    }\n</code></pre>\n<p>å¦‚æœè¿˜æ²¡æœ‰ <code>prevVnode</code> è¯´æ˜æ˜¯é¦–æ¬¡æ¸²æŸ“ï¼Œç›´æ¥åˆ›å»ºçœŸå®DOMã€‚å¦‚æœå·²ç»æœ‰äº† <code>prevVnode</code> è¯´æ˜ä¸æ˜¯é¦–æ¬¡æ¸²æŸ“ï¼Œé‚£ä¹ˆå°±é‡‡ç”¨ <code>patch</code> ç®—æ³•è¿›è¡Œå¿…è¦çš„DOMæ“ä½œã€‚è¿™å°±æ˜¯Vueæ›´æ–°DOMçš„é€»è¾‘ã€‚åªä¸è¿‡æˆ‘ä»¬æ²¡æœ‰å°† virtual DOM å†…éƒ¨çš„å®ç°ã€‚</p>\n<p>ç°åœ¨æˆ‘ä»¬æ¥å¥½å¥½ç†ç†æ€è·¯ï¼Œå½“æˆ‘ä»¬å†™å¦‚ä¸‹ä»£ç æ—¶ï¼š</p>\n<pre><code>new Vue({\n    el: &#39;#app&#39;,\n    data: {\n        a: 1,\n        b: [1, 2, 3]\n    }\n})\n</code></pre><p>Vue æ‰€åšçš„äº‹ï¼š</p>\n<blockquote>\n<p>1ã€æ„å»ºæ•°æ®å“åº”ç³»ç»Ÿï¼Œä½¿ç”¨ <code>Observer</code> å°†æ•°æ®dataè½¬æ¢ä¸ºè®¿é—®å™¨å±æ€§ï¼›å°† <code>el</code> ç¼–è¯‘ä¸º <code>render</code> å‡½æ•°ï¼Œ<code>render</code> å‡½æ•°è¿”å›å€¼ä¸ºè™šæ‹ŸDOM</p>\n<p>2ã€åœ¨ <code>_mount</code> ä¸­å¯¹ <code>_update</code> æ±‚å€¼ï¼Œè€Œ <code>_update</code> åˆä¼šå¯¹ <code>render</code> æ±‚å€¼ï¼Œ<code>render</code> å†…éƒ¨åˆä¼šå¯¹ä¾èµ–çš„å˜é‡æ±‚å€¼ï¼Œæ”¶é›†ä¸ºè¢«æ±‚å€¼çš„å˜é‡çš„ä¾èµ–ï¼Œå½“å˜é‡æ”¹å˜æ—¶ï¼Œ<code>_update</code> åˆä¼šé‡æ–°æ‰§è¡Œä¸€éï¼Œä»è€Œåšåˆ° <code>re-render</code>ã€‚</p>\n</blockquote>\n<p>ç”¨ä¸€å¼ è¯¦ç»†ä¸€ç‚¹çš„å›¾è¡¨ç¤ºå°±æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/vueimgdetail.png\" alt=\"è¯¦ç»†æµç¨‹\"></p>\n<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬ä»å¤§ä½“æµç¨‹ï¼ŒæŒ‘ç€é‡ç‚¹çš„èµ°äº†ä¸€éVueï¼Œä½†æ˜¯è¿˜æœ‰å¾ˆå¤šç»†èŠ‚æˆ‘ä»¬æ²¡æœ‰æåŠï¼Œæ¯”å¦‚ï¼š</p>\n<p>1ã€å°†æ¨¡æ¿è½¬ä¸º <code>render</code> å‡½æ•°çš„æ—¶å€™ï¼Œå®é™…æ˜¯å…ˆç”Ÿæˆçš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œå†å°†æŠ½è±¡è¯­æ³•æ ‘è½¬æˆçš„ <code>render</code> å‡½æ•°ï¼Œè€Œä¸”è¿™ä¸€æ•´å¥—çš„ä»£ç æˆ‘ä»¬ä¹Ÿæ²¡æœ‰æåŠï¼Œå› ä¸ºä»–åœ¨å¤æ‚äº†ï¼Œå…¶å®è¿™éƒ¨åˆ†å†…å®¹å°±æ˜¯åœ¨å®Œæ­£åˆ™ã€‚</p>\n<p>2ã€æˆ‘ä»¬ä¹Ÿæ²¡æœ‰è¯¦ç»†çš„è®² Virtual DOM çš„å®ç°åŸç†ï¼Œç½‘ä¸Šå·²ç»æœ‰æ–‡ç« è®²äº†ï¼Œå¤§å®¶å¯ä»¥æœä¸€æœ</p>\n<p>3ã€æˆ‘ä»¬çš„ä¾‹å­ä¸­ä»…ä»…ä¼ é€’äº† <code>el</code> ï¼Œ<code>data</code> é€‰é¡¹ï¼Œå¤§å®¶çŸ¥é“ Vue æ”¯æŒçš„é€‰é¡¹å¾ˆå¤šï¼Œæ¯”å¦‚æˆ‘ä»¬éƒ½æ²¡æœ‰è®²åˆ°ï¼Œä½†éƒ½æ˜¯è§¦ç±»æ—é€šçš„ï¼Œæ¯”å¦‚ä½ ææ¸…æ¥šäº† <code>data</code> é€‰é¡¹å†å»çœ‹ <code>computed</code> é€‰é¡¹æˆ–è€… <code>props</code> é€‰é¡¹å°±ä¼šå¾ˆå®¹æ˜“ï¼Œæ¯”å¦‚ä½ çŸ¥é“äº† <code>Watcher</code> çš„å·¥ä½œæœºåˆ¶å†å»çœ‹ <code>watch</code> é€‰é¡¹å°±ä¼šå¾ˆå®¹æ˜“ã€‚</p>\n<p>æœ¬ç¯‡æ–‡ç« ä½œä¸ºVueæºç çš„å¯è’™æ–‡ç« ï¼Œä¹Ÿè®¸è¿˜æœ‰å¾ˆå¤šç¼ºé™·ï¼Œå…¨å½“æŠ›ç –å¼•ç‰äº†ã€‚</p>"},{"title":"ä»çŸ©é˜µä¸ç©ºé—´æ“ä½œçš„å…³ç³»ç†è§£CSS3çš„transform","date":"2017-05-13T02:50:27.000Z","_content":"\nå‰ä¸ä¹…å¼€æºäº†ä¸€ä¸ªæ’ä»¶åŒ–ç§»åŠ¨ç«¯è¿åŠ¨æ•ˆæœåº“ [finger-mover](https://github.com/HcySunYang/finger-mover)ï¼Œè¯´åˆ°è¿åŠ¨æ•ˆæœï¼Œä¸å¾—ä¸æåˆ°CSS3çš„ `transform`ï¼Œä¹Ÿå°±æ˜¯å˜æ¢ã€‚è¿™ç¯‡æ–‡ç« æ¦‚æ‹¬äº†åœ¨å®ç° [finger-mover](https://github.com/HcySunYang/finger-mover) æ—¶å¯¹ `transform` çš„ç†è§£ä¸æ€»ç»“ã€‚\n\næ³¨ï¼šæ–‡ä¸­çš„å›¾ç‰‡å¤šæ•°æˆªå–è‡ªè§†é¢‘ï¼š[çº¿æ€§ä»£æ•°çš„æœ¬è´¨](http://www.bilibili.com/video/av6731067/index_1.html#page=1)ï¼Œä¹Ÿå¼ºçƒˆå»ºè®®å¤§å®¶ç³»ç»Ÿçš„è§‚çœ‹è¿™å¥—è§†é¢‘ã€‚å¦å¤–å¦‚æœæ–‡ä¸­æœ‰è¯¯è¯·ä¸åæŒ‡æ•™ã€‚\n\n<!-- more -->\n\næ–‡ç« ç»“æ„å¦‚ä¸‹ï¼š\n\n```\n* çŸ©é˜µ\n    * æ¦‚è¿°\n* å‘é‡\n    * ä»€ä¹ˆæ˜¯å‘é‡\n    * åŸºå‘é‡\n* çº¿æ€§å˜æ¢\n* å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ\n* å›åˆ° CSS çš„ transform\n```\n\næˆ‘ä¸çŸ¥é“å¤§å®¶æ‰€ç†è§£çš„çŸ©é˜µæ˜¯æ€æ ·çš„ï¼Œä½†æˆ‘æ‰€ç†è§£çš„çŸ©é˜µæ˜¯ï¼šè¯¥é˜µæ³•å…ç–«æ³•æœ¯æ”»å‡»ä¸”100%åä¼¤å¯¹æ–¹éšæœºä¸€ä¸ªå•ä½ï¼ˆå›åˆåˆ¶æ¸¸æˆï¼‰ã€‚\n\nä»¥ä¸Šæè¿°æ˜¯åœ¨å°å­¦æ—¶ä»£çš„ç†è§£ï¼Œç°åœ¨å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œæ…¢æ…¢è¯´......\n\n## çŸ©é˜µ\n\n#### æ¦‚è¿°\n\nçŸ©é˜µï¼Œæ˜¯çº¿æ€§ä»£æ•°ä¸­æ¶‰åŠçš„å†…å®¹ï¼Œçº¿æ€§ä»£æ•°åœ¨ç§‘å­¦é¢†åŸŸæœ‰å¾ˆå¤šåº”ç”¨çš„åœºæ™¯ï¼Œå¦‚ä¸‹ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformuse-the-scene.png?imageView/2/w/500)\n\nå¤§éƒ¨åˆ†åŒå­¦åœ¨å¤§å­¦æ—¶æœŸåº”è¯¥éƒ½å­¦è¿‡ä¸€æœ¬å«åšçº¿æ€§ä»£æ•°çš„ä¹¦ï¼Œå¦‚æœæ²¡çŒœé”™çš„è¯ï¼Œä½ ä»¬çš„è€å¸ˆåœ¨æ•™å­¦çš„æ—¶å€™å¤§å¤šéƒ½æ˜¯æ¦‚å¿µæ€§çš„çŒè¾“ï¼Œæ¯”å¦‚çŸ©é˜µä¹˜æ³•å¦‚ä½•è¿ç®—ï¼ŒåŠ æ³•å¦‚ä½•è¿ç®—ï¼Œå¤§å®¶åªè¦è®°ä½å°±okäº†ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†åŒå­¦éƒ½ä¸ç†è§£ï¼Œ*ä¸ºä»€ä¹ˆçŸ©é˜µçš„ä¹˜æ³•è¦è¿™æ ·ç®—ï¼ŸçŸ©é˜µä¹˜æ³•çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ*ï¼Œç‰¹åˆ«æ˜¯æˆ‘ä»¬æè®¡ç®—æœºçš„ï¼Œå¦‚æœæœ‰åšè¿‡ 2D/3D å˜æ¢çš„åŒå­¦ä¸€å®šå¬è¯´è¿‡çŸ©é˜µï¼Œæ¯”å¦‚åœ¨å‰ç«¯çš„CSSä¸­ï¼Œä½¿ç”¨ `transform` åš 2D/3D çš„å˜æ¢ï¼Œå…¶ä¸­å°±åº”ç”¨åˆ°äº†çŸ©é˜µçš„çŸ¥è¯†ï¼Œè¿™ç¯‡æ–‡ç« å¹¶ä¸æ˜¯ä¸€ç¯‡æ•°å­¦æ€§è´¨çš„æ–‡ç« ï¼Œæ‰€ä»¥å¤§å®¶ä¸è¦çœ‹äº†æ„Ÿè§‰ä¸€é˜µçœ©æ™•ï¼Œè¿™ç¯‡æ–‡ç« çš„ç›®çš„åœ¨äºï¼šä»çŸ©é˜µä¸ç©ºé—´ä¹‹é—´çš„å…³ç³»è®²è¿°ï¼šä¸ºä»€ä¹ˆçŸ©é˜µå¯ä»¥åº”ç”¨åœ¨ç©ºé—´æ“ä½œ(å˜æ¢)ã€‚æˆ–è€…ç”¨ä¸€å¥å¤§ç™½è¯ï¼š*è¿™ç©æ„å„¿æ€ä¹ˆå°±èƒ½è®©`div`ç¿»è¿‡æ¥ï¼Œè½¬è¿‡å»ï¼Œæ‰­çš„ä»–çˆ¹éƒ½ä¸è®¤è¯†ä»–çš„ã€‚*\n\nå…ˆçœ‹ä¸€æ®µ css ä»£ç ï¼š\n\n```css\n/* 2D */\ntransform: matrix(1, 0, 0, 1, 0, 0);\n/* 3D */\ntransform: matrix(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n```\n\nä¸Šé¢ä¸¤è¡Œ css ä»£ç å…¶å®ä»€ä¹ˆå˜æ¢éƒ½ä¸ä¼šåšï¼Œå› ä¸ºé‚£æ˜¯å˜æ¢çš„é»˜è®¤çŠ¶æ€ï¼Œå³æ²¡æœ‰å˜æ¢ã€‚ä½†æ˜¯å…¶ä¸­ä½¿ç”¨åˆ°äº† `matrix`ï¼Œç¿»è¯‘æˆä¸­æ–‡å«åšï¼šçŸ©é˜µã€‚å¦‚æœæœ‰æ·±å…¥ç ”ç©¶è¿‡ css çš„åŒå­¦å¯¹è¿™ä¸¤è¡Œä»£ç ä¹Ÿè®¸ä¸é™Œç”Ÿï¼Œä½†æ˜¯å¤§å¤šæ•°äººåœ¨ä½¿ç”¨ `transform` å˜æ¢æ—¶å¾ˆå°‘ç›´æ¥ä½¿ç”¨ `matrix` çŸ©é˜µï¼Œé™¤éä½ ä¸æƒ³è®©äººçœ‹æ‡‚ä½ åœ¨åšäº›ä»€ä¹ˆé¸Ÿå˜æ¢...ï¼Œæ‰€ä»¥æ›´å¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ç±»ä¼¼å¦‚ä¸‹è¯­æ³•ï¼š\n\n```css\ntransform: translateX(100px) rotateZ(30deg);\n```\n\nå¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œä¸€ç›®äº†ç„¶ï¼Œè¦åšä»€ä¹ˆå˜æ¢å¤§å®¶ä¸€çœ‹å°±çŸ¥é“äº†ã€‚ä½†å…¶å®ï¼Œè¿™åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå…¶åº•å±‚ä¾ç„¶ä½¿ç”¨çš„æ˜¯ `matrix`ã€‚\n\nå¦‚æœæƒ³è¦ç†è§£çŸ©é˜µä¸ºä½•å¯ä»¥åº”ç”¨åˆ° 2D/3D å˜æ¢ï¼Œé‚£ä¹ˆåªä»æ•°å€¼æ°´å¹³çš„è§’åº¦ç†è§£æ˜¯ä¸å¤Ÿçš„ï¼Œä½ éœ€è¦ä»å‡ ä½•çš„è§’åº¦å»ç†è§£çŸ©é˜µï¼Œè¿™å­˜åœ¨ç€æ ¹æœ¬æ€§çš„å·®å¼‚ã€‚è€Œè¿™ï¼Œä¹Ÿå°±æ˜¯æœ¬ç¯‡æ–‡ç« çš„çœŸæ­£æ„ä¹‰ã€‚\n\nä¸è¿‡ï¼Œè¿™éœ€è¦æˆ‘ä»¬å…ˆäº†è§£ä¸€äº›å¿…è¦çš„åŸºæœ¬æ¦‚å¿µï¼Œè¿™äº›æ¦‚å¿µè‡³å…³é‡è¦ï¼Œé¦–å…ˆå°±æ˜¯å‘é‡\n\n## å‘é‡\n\n#### ä»€ä¹ˆæ˜¯å‘é‡\n\næ—¢ç„¶çŸ©é˜µæ˜¯çº¿æ€§ä»£æ•°çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆå°±ä¸å¾—ä¸æåˆ° *å‘é‡*ï¼Œå› ä¸ºå‘é‡æ˜¯çº¿æ€§ä»£æ•°æœ€åŸºç¡€ã€æœ€æ ¹æºçš„ç»„æˆéƒ¨åˆ†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆææ¸…æ¥šï¼Œå‘é‡æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘è¯´è¿‡ï¼Œè¿™ç¯‡æ–‡ç« ä¸ä¼šå¾ˆâ€œæ•°å­¦â€ï¼Œæ‰€ä»¥å¤§å®¶ä¸è¦è¢«å“åˆ°ã€‚ç”¨ä¸€å¥è¯æè¿°å‘é‡æ˜¯ä»€ä¹ˆï¼š\n\n> å‘é‡ï¼šç©ºé—´ä¸­çš„ç®­å¤´\n\nè¿™ä¸ªåœ¨å¤§å®¶çš„å°è±¡é‡Œåº”è¯¥å¾ˆå¥½ç†è§£ï¼Œè¿™ä¸ªç®­å¤´ç”±ä¸¤ä¸ªå› ç´ å†³å®šï¼š`æ–¹å‘` å’Œ `é•¿åº¦`ï¼Œæˆ‘ä»¬å…ˆæŠŠç›®å…‰å±€é™åœ¨äºŒç»´ç©ºé—´ä¸‹ï¼Œå¦‚å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformarrow.png?imageView/2/w/500)\n\nä¸Šå›¾ä¸­ï¼Œåœ¨ä¸€ä¸ªåæ ‡ç³»ä¸­ç”»äº†å››ä¸ªä¸åŒé•¿åº¦å’Œæ–¹å‘çš„ç®­å¤´ï¼Œæ¯ä¸ªç®­å¤´ä»åŸç‚¹å‘å‡ºï¼Œä»–ä»¬ä»£è¡¨äº†äºŒç»´ç©ºé—´ä¸­çš„å››ä¸ªå‘é‡ï¼Œåœ¨çº¿æ€§ä»£æ•°ä¸­ï¼Œå‘é‡é€šå¸¸ä»¥åŸç‚¹ä½œä¸ºèµ·ç‚¹ã€‚\n\nå¦‚æœä½ å·²ç»ç†è§£äº†â€œå‘é‡æ˜¯ç©ºé—´ä¸­çš„ç®­å¤´â€è¿™ç§è§‚ç‚¹ï¼Œä¸‹é¢æˆ‘ä»¬å†è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬é‡æ–°ç”¨ä¸€å¥è¯æ¥æè¿°å‘é‡ï¼š\n\n> å‘é‡ï¼šæ˜¯æœ‰åºçš„æ•°å­—åˆ—è¡¨\n\nå‡è®¾å¤§å®¶å¯¹åæ ‡ç³»çš„æ¦‚å¿µéƒ½æœ‰æ‰€äº†è§£ï¼Œæˆ‘ä»¬è¿˜æ˜¯æŠŠç›®å…‰å±€é™åœ¨äºŒç»´ç©ºé—´ï¼Œåœ¨åæ ‡ç³»ä¸­ä»»æ„é€‰å–å•ä½é•¿åº¦ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿä½¿ç”¨ä¸€ä¸ªä¸€ä¸ªçš„åˆ»åº¦æ¥æ ‡åˆ»è¿™ä¸ªåæ ‡ç³»ï¼Œé€‰å–ç‰¹å®šçš„æ–¹å‘ä¸ºx/yè½´çš„æ­£æ–¹å‘ï¼Œé‚£ä¹ˆä¸éš¾çœ‹å‡ºï¼Œæ¯ä¸€ä¸ªå‘é‡ï¼Œéƒ½å¯ä»¥ç”¨å”¯ä¸€çš„ä¸€ä¸ªåæ ‡æ¥è¡¨ç¤ºï¼ŒåŒæ ·çš„ï¼Œåæ ‡ç³»ä¸­çš„æ¯ä¸€ä¸ªåæ ‡éƒ½å¯¹åº”ç€ä¸€ä¸ªå”¯ä¸€çš„ç®­å¤´(å‘é‡)ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformnumber.png?imageView/2/w/500)\n\nåœ¨åæ ‡ç³»ä¸­ï¼Œç”±äºåæ ‡é€šå¸¸ç”¨æ¥æ ‡ç¤ºä¸€ä¸ªç‚¹ï¼Œå¦‚ `P(2, 8)` è¡¨ç¤ºç‚¹ P çš„åæ ‡ä¸º `(2, 8)`ï¼Œä¸ºäº†åŒºåˆ†ç‚¹å’Œå‘é‡ï¼Œåœ¨è¡¨ç¤ºå‘é‡æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸æŠŠåæ ‡ç«–ç€å†™ï¼Œç„¶åç”¨ä¸€å¯¹å„¿ä¸­æ‹¬å·æ¥æè¿°ï¼Œå¦‚ä¸Šå›¾ä¸­çš„ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformpoint.png?imageView/2/w/500)\n\nåœ¨ä¸‰ç»´ç©ºé—´ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œå¦‚ä¸‹å›¾ï¼Œæˆ‘å°±ä¸åšé‡å¤çš„è§£é‡Šï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œæ¯ä¸€ä¸ªå‘é‡ç”± x/y/z ä¸‰ä¸ªæ•°å­—ç»„æˆçš„åæ ‡æ¥è¡¨ç¤ºï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transform3.png?imageView/2/w/500)\n\nå¯¹äºå‘é‡ï¼Œä½ åªéœ€è¦çŸ¥é“å®ƒæ˜¯â€œç©ºé—´ä¸­çš„ç®­å¤´â€æˆ–è€…â€œæœ‰åºçš„æ•°å­—åˆ—è¡¨â€è¿™å°±è¶³å¤Ÿäº†ï¼Œæ€ä¹ˆæ ·ï¼Ÿä¸éš¾ç†è§£å§ï¼Œæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ï¼Œåœ¨åæ ‡ç³»ä¸­å­˜åœ¨ä¸€ç§ç‰¹æ®Šçš„å‘é‡ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º *åŸºå‘é‡*ã€‚\n\n#### åŸºå‘é‡\n\nåŸºå‘é‡ï¼Œä¹Ÿå«å•ä½å‘é‡ï¼Œæ˜¯å•ä½é•¿åº¦ä¸º1çš„å‘é‡ï¼Œå¦‚ä¸‹å›¾ä¸­ï¼š`iå¸½` å’Œ `jå¸½` å°±æ˜¯è¿™ä¸ªäºŒç»´åæ ‡ç³»çš„åŸºå‘é‡ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformji-xl.png?imageView/2/w/500)\n\nå¯¹äºå‘é‡ï¼Œæˆ‘ä»¬å°±å…ˆä»‹ç»åˆ°è¿™é‡Œï¼Œè¿™å·²ç»è¶³å¤Ÿäº†ã€‚é™¤äº†å‘é‡ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µéœ€è¦å¤§å®¶äº†è§£ï¼Œå³çº¿æ€§å˜æ¢ã€‚\n\n## çº¿æ€§å˜æ¢\n\nâ€œå˜æ¢â€æœ¬è´¨ä¸Šæ˜¯â€œå‡½æ•°â€çš„ä¸€ç§èŠ±å“¨çš„å«æ³•ï¼Œç©ç¼–ç¨‹çš„éƒ½çŸ¥é“å‡½æ•°ï¼Œä¸åœ¨æ•°å­¦ä¸­çš„æ¦‚å¿µç±»ä¼¼ï¼Œå‡½æ•°æ¥æ”¶è¾“å…¥çš„å†…å®¹ï¼Œå¹¶è¾“å‡ºå¯¹åº”çš„ç»“æœï¼Œå¦‚å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformfunction.png?imageView/2/w/500)\n\nå˜æ¢ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œåªä¸è¿‡æ¥æ”¶å‘é‡ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¾“å‡ºå˜æ¢åçš„å‘é‡ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformtransform.png?imageView/2/w/500)\n\næ—¢ç„¶ â€œå˜æ¢â€ ä¸ â€œå‡½æ•°â€ æœ¬è´¨ç›¸åŒï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå«å˜æ¢è€Œä¸å«å‡½æ•°å‘¢ï¼Ÿè¿™å®é™…ä¸Šå°±æš—ç¤ºäº†æˆ‘ä»¬ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªè¾“å…¥è¾“å‡ºçš„è¿‡ç¨‹ï¼Œçœ‹åšä¸€ä¸ªå‘é‡ä»åˆå§‹çŠ¶æ€åˆ°æœ€ç»ˆçŠ¶æ€çš„ä¸€ä¸ªå˜åŒ–è¿‡ç¨‹ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transforminput-output.png?imageView/2/w/500)\n\nç°åœ¨ï¼Œæˆ‘ä»¬æŠŠæƒ…å†µå®è§‚ä¸€ä¸‹ï¼Œç›®å‰åªè®¨è®ºä¸€ä¸ªå‘é‡çš„å˜æ¢ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒäºŒç»´ç©ºé—´çš„ä¸€æ•´ä¸ªå¹³é¢ï¼Œå¯ä»¥çœ‹åšæ˜¯ç”±æ— æ•°ä¸ªå‘é‡ç»„æˆ(æˆ–è€…æ— æ•°ä¸ªç‚¹ç»„æˆï¼Œå› ä¸ºæ¯ä¸€ä¸ªç‚¹å”¯ä¸€æ ‡è¯†ä¸€ä¸ªå‘é‡ï¼Œæ‰€ä»¥è¿™é‡Œè¯´å¹³é¢ç”±æ— æ•°ä¸ªå‘é‡ç»„æˆ)ï¼Œå‡å¦‚è¿™æ— æ•°ä¸ªå‘é‡åŒæ—¶åšç›¸åŒçš„å˜æ¢ï¼Œé‚£å…¶å®å°±å¯ä»¥çœ‹åšæ˜¯å¹³é¢çš„å˜æ¢ï¼Œå¦‚ä¸‹å›¾ï¼š\n\nå˜æ¢å‰ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformbefore.png?imageView/2/w/500)\n\nå˜æ¢åï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformafter.png?imageView/2/w/500)\n\nä¸è¿‡ï¼Œå¹¶éæ‰€æœ‰å˜æ¢éƒ½å«åšçº¿æ€§å˜æ¢ï¼Œçº¿æ€§å˜æ¢å¿…é¡»è¦æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ï¼š\n* 1ã€ç›´çº¿åœ¨å˜æ¢åä»ç„¶ä¸ºç›´çº¿ï¼Œä¸èƒ½æœ‰æ‰€å¼¯æ›²\n* 2ã€åŸç‚¹ä¸èƒ½ç§»åŠ¨\n\nå¦‚ä¸‹å˜æ¢ï¼Œå°±ä¸æ˜¯ä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œå› ä¸ºç›´çº¿å˜æˆäº†æ›²çº¿ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformwanqu.png?imageView/2/w/500)\n\n## å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ\n\nåœ¨ä¸Šä¸€å°èŠ‚ä¸­æˆ‘ä»¬çŸ¥é“ï¼Œç©ºé—´çš„å˜æ¢ä¹Ÿå¯ä»¥è¯´æ˜¯å‘é‡çš„å˜æ¢ï¼Œè€Œå‘é‡åœ¨ç©ºé—´ä¸­ï¼Œå¯ä»¥ç”¨ä¸€ç»„æœ‰åºçš„æ•°å­—åˆ—è¡¨æ¥è¡¨ç¤º(å³å‘é‡çš„åæ ‡)ï¼Œæ‰€ä»¥å‘é‡å˜æ¢å‰åï¼Œå¿…ç„¶ä¼šå¼•èµ·â€œæœ‰åºæ•°å­—åˆ—è¡¨çš„å˜æ¢â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥ç”¨æ•°å­—å»æè¿°å˜æ¢å‘¢ï¼Ÿ\n\nä¹‹å‰åœ¨å‘é‡ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬äº†è§£è¿‡*åŸºå‘é‡*ï¼Œå•ä½é•¿åº¦ä¸º1ï¼Œå…¶å®ç©ºé—´ä¸­çš„ä»»æ„ä¸€ä¸ªå‘é‡æˆ‘ä»¬éƒ½å¯ä»¥çœ‹åšæ˜¯ï¼š*åŸºå‘é‡å˜æ¢åçš„å’Œå‘é‡*ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformhe.png?imageView/2/w/500)\n\nå‘é‡ <b>v</b> çš„åæ ‡æ˜¯ ![](http://7xlolm.com1.z0.glb.clouddn.com/transformzuobiao.png?imageView/2/w/50)ï¼Œå¦‚æœæˆ‘ä»¬æŠŠ `3` å’Œ `-2` çœ‹åšä¸¤ä¸ªæ ‡é‡ï¼Œä¹Ÿå°±æ˜¯çº¯æ•°å­—ï¼Œé‚£ä¹ˆå‘é‡  <b>v</b> å¯ä»¥çœ‹åšæ˜¯åŸºå‘é‡è¢«æ ‡é‡ç¼©æ”¾åç›¸åŠ å¾—åˆ°çš„å’Œå‘é‡ï¼š <b>v</b> = 3<b>i</b> + (-2<b>j</b>)\n\näº†è§£äº†è¿™äº›ï¼Œæˆ‘ä»¬ç°åœ¨å°±é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œæ¥è®¤è¯†ä¸€ä¸ªè‡³å…³é‡è¦çš„äº‹å®ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰å‘é‡ <b>v</b> = -1<b>i</b> + 2<b>j</b>ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformqian.png?imageView/2/w/500)\n\næ­¤æ—¶ï¼ŒåŸºå‘é‡ <b>i</b> çš„åæ ‡æ˜¯ `(1, 0)`ã€æ³¨æ„ï¼šä¸ºäº†æ–¹ä¾¿ï¼Œè¿™é‡Œå°±ç”¨åœ†æ‹¬å·ä»£è¡¨å‘é‡çš„åæ ‡ï¼Œä¸‹åŒã€‘ï¼ŒåŸºå‘é‡ <b>j</b> çš„åæ ‡æ˜¯ `(0, 1)`ï¼Œå‡è®¾ç»è¿‡äº†æŸäº›å˜æ¢ä¹‹åï¼ŒåŸºå‘é‡ <b>i</b> çš„åæ ‡å˜ä¸º `(1ï¼Œ -2)`ï¼ŒåŸºå‘é‡ <b>j</b> çš„åæ ‡å˜ä¸º `(3ï¼Œ 0)`ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformhou.png?imageView/2/w/500)\n\né‚£ä¹ˆå˜æ¢åçš„å‘é‡ <b>v</b> ä¾ç„¶æ»¡è¶³ <b>v</b> = -1<b>i</b> + 2<b>j</b>ï¼Œå¦‚ä¸‹ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformhou-plus.png?imageView/2/w/500)\n\nä»¥ä¸Šä¾‹å­æ‰€æè¿°çš„äº‹å®ï¼Œå®é™…ä¸Šæ˜¯çº¿æ€§å˜æ¢çš„æ€§è´¨çš„æ¨è®ºï¼Œè¯¥æ€§è´¨å¯ä»¥ä»å‡ ä½•è§’åº¦è¡¨è¿°ä¸ºï¼šçº¿æ€§å˜æ¢åçš„ç½‘æ ¼å¹³è¡Œä¸”ç­‰è·ã€‚\n\næ—¢ç„¶çº¿æ€§å˜æ¢å‰åéƒ½æ»¡è¶³è¯¥çº¿æ€§å…³ç³»ï¼š<b>v</b> = -1<b>i</b> + 2<b>j</b>\n\né‚£ä¹ˆå¾ˆå®¹æ˜“æ ¹æ®å˜æ¢å `iå¸½` å’Œ `jå¸½` çš„åæ ‡æ¨ç®—å‡ºå˜æ¢å <b>v</b> çš„åæ ‡ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformjisuan.png?imageView/2/w/500)\n\nä¹Ÿå°±æ˜¯ `(5, 2)`ï¼Œå³ï¼š![](http://7xlolm.com1.z0.glb.clouddn.com/transformzuobiao2.png?imageView/2/w/50)\n\né‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥è®¤ä¸ºï¼Œç»™å®šä»»æ„ä¸€ä¸ªå‘é‡ï¼Œå…¶åæ ‡ `(x, y)`ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å˜æ¢åçš„åŸºå‘é‡çš„åæ ‡æ¨æ–­å‡ºè¯¥å‘é‡å˜æ¢åçš„åæ ‡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå‡å¦‚åŸºå‘é‡å˜æ¢åçš„åæ ‡ `iå¸½` å’Œ `jå¸½` å¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformbianhuan2.png?imageView/2/w/200)\n\né‚£ä¹ˆä»»æ„å‘é‡ `(x, y)` åœ¨ç»è¿‡å˜æ¢åçš„åæ ‡è®¡ç®—å¦‚ä¸‹ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformzuobiao3.png?imageView/2/w/300)\n\nè¿™å‘Šè¯‰æˆ‘ä»¬å¦å¤–ä¸€ä¸ªäº‹å®ï¼Œ<b>äºŒç»´ç©ºé—´çš„çº¿æ€§å˜æ¢ä»…ç”±å››ä¸ªæ•°å­—å®Œå…¨ç¡®å®š</b>ï¼Œè¿™å››ä¸ªæ•°å­—å°±æ˜¯åŸºå‘é‡ <b>i</b> å˜æ¢å <b>iå¸½</b> çš„åæ ‡ï¼Œä»¥åŠåŸºå‘é‡ <b>j</b> å˜æ¢å <b>jå¸½</b> çš„åæ ‡ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformaaafuck.png?imageView/2/w/500)\n\næ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿåªéœ€è¦å››ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬å°±ç¡®å®šäº†äºŒç»´ç©ºé—´çš„ä¸€ä¸ªå˜æ¢ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬æŠŠè¿™å››ä¸ªæ•°å­—æ”¾åˆ°ä¸€ä¸ª `2 x 2` çš„æ ¼å­ä¸­ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º `2 x 2` çŸ©é˜µï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformjuzhen.png?imageView/2/w/500)\n\nç°åœ¨ï¼Œå½“ä½ å†çœ‹åˆ° `2 x 2` çŸ©é˜µçš„æ—¶å€™ï¼Œä½ çš„ç¬¬ä¸€å‡ ä½•ç›´è§‚åæ˜ åº”è¯¥æ˜¯ï¼šå®ƒæè¿°äº†ä¸€ä¸ªäºŒç»´ç©ºé—´çš„å˜æ¢ã€‚\n\næˆ‘ä»¬æŠŠæƒ…å†µä¸€èˆ¬åŒ–ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformyiban.png?imageView/2/w/500)\n\næˆ‘ä»¬æœ‰ä¸€ä¸ª `2 x 2` çš„çŸ©é˜µ `[a, c] [b, d]`ï¼Œå…¶ä¸­ `[a, c]` æ˜¯åŸºå‘é‡ <b>i</b> å˜æ¢åçš„åæ ‡ï¼Œ`[b, d]` æ˜¯åŸºå‘é‡ <b>j</b> å˜æ¢åçš„åæ ‡ï¼Œé‚£ä¹ˆæ ¹æ®è¿™ä¸ªå˜æ¢ï¼Œä»¥åŠçº¿æ€§å˜æ¢çš„æ€§è´¨ï¼Œæˆ‘ä»¬å¯ä»¥æ¨æ–­å‡ºä»»æ„å‘é‡ `[x, y]` å˜æ¢åçš„åæ ‡ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformyuanyin.png?imageView/2/w/400)\n\n<p class=\"tip\">\nå®é™…ä¸Šï¼Œè¿™å°±æ˜¯æ•°å­¦å®¶ä¹‹æ‰€ä»¥è¿™æ ·å®šä¹‰ çŸ©é˜µçš„å‘é‡ä¹˜æ³• çš„åŸå› ã€‚\n</p>\n\nåˆ°äº†è¿™é‡Œï¼Œè®©æˆ‘ä»¬æ•´ç†ä¸€ä¸‹æ€è·¯ï¼Œé¦–å…ˆï¼Œå¯¹äºä¸€ä¸ª `2 x 2` çš„çŸ©é˜µï¼Œä½ çš„ç›´è§‚å‡ ä½•æ„Ÿå—åº”è¯¥æ˜¯ï¼Œç¬¬ä¸€åˆ—çš„ä¸¤ä¸ªæ•°æ˜¯å¯¹åŸºå‘é‡ <b>i</b> çš„å˜æ¢ï¼Œç¬¬äºŒåˆ—çš„ä¸¤ä¸ªæ•°æ˜¯å¯¹åŸºå‘é‡ <b>j</b> çš„å˜æ¢ï¼Œè¿™å››ä¸ªæ•°å­—ç»„æˆçš„ `2 x 2` çš„çŸ©é˜µï¼Œæè¿°äº†ä¸€ä¸ªå¯¹ç©ºé—´çš„çº¿æ€§å˜æ¢ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ªå˜æ¢æ¨æ–­å‡ºä»»æ„ä¸€ç‚¹(æˆ–è€…ä»»æ„å‘é‡)å˜æ¢åçš„åæ ‡ã€‚\n\nå…¶å®æˆ‘ä¹ˆä½ è¿˜å¯ä»¥æ¢ä¸€ä¸ªè§’åº¦è€ƒè™‘ï¼Œæˆ‘ä»¬å°±å•çº¯çš„æŠŠ `2 x 2` çŸ©é˜µå«åšå˜æ¢ï¼Œé‚£ä¹ˆå‘é‡ä¸çŸ©é˜µçš„ä¹˜ç§¯ï¼Œå°±è¦å¯ä»¥çœ‹åšæ˜¯è¯¥å‘é‡åº”ç”¨äº†è¿™ä¸ªå˜æ¢ã€‚å…¶å®ï¼Œè¿™å°±æ˜¯çŸ©é˜µå‘é‡ä¹˜æ³•çš„å‡ ä½•æ„ä¹‰ã€‚\n\n## å›åˆ° CSS çš„ transform\n\nè¯´äº†ä¸€å¤§å †ï¼Œæ˜¯æ—¶å€™å›åˆ° `CSS` çš„ `transform`ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹2Då˜æ¢ä¸‹ `transform` å±æ€§çš„ `matrix` å†™æ³•ï¼š\n\n```css\ntransform: matrix(a, b, c, d, e, f);\n```\n\nåœ¨æ–‡ç« å¼€å§‹ï¼Œæˆ‘ä»¬çŸ¥é“å„ä¸ªå‚æ•°é»˜è®¤å€¼å¦‚ä¸‹ï¼š\n\n```css\ntransform: matrix(1, 0, 0, 1, 0, 0);\n```\n\næœ‰çš„åŒå­¦å¯èƒ½ä¼šé—®ï¼šè¯´å¥½çš„ `2 x 2` çŸ©é˜µä¹Ÿå°±æ˜¯å››ä¸ªæ•°å­—å°±èƒ½ç¡®å®šä¸€ä¸ªäºŒç»´ç©ºé—´å˜æ¢ï¼Œä½ è¿™é‡Œæ˜æ˜æœ‰6ä¸ªæ•°å•Šï¼Œå…¶å®ï¼Œ`transform` 2Då˜æ¢æ˜¯ä¸€ä¸ª `3 * 3` çš„çŸ©é˜µï¼Œä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ï¼Ÿå› ä¸ºï¼š*ä½ç§»(translate)*ï¼Œå‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œçº¿æ€§å˜æ¢è¦æ»¡è¶³å…¶ä¸­ä¸€ä¸ªç‰¹ç‚¹ï¼šåŸç‚¹ä¸èƒ½ç§»åŠ¨ï¼Œä½†æ˜¯ä½ç§»å´ä½¿åŸç‚¹å‘ç”Ÿäº†ç§»åŠ¨ï¼Œæ‰€ä»¥ `2 x 2` çŸ©é˜µæ»¡è¶³ä¸äº†éœ€æ±‚ï¼Œåªèƒ½å†åŠ ä¸€åˆ—ï¼Œä¹Ÿå°±æ˜¯ `3 x 3` çš„çŸ©é˜µã€‚\n\næŠŠ `matrix` ä¸­çš„ `a b c d e f` æ”¾åˆ°ä¸€ä¸ª `3 x 3` çš„çŸ©é˜µä¸­åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformmr1.png?imageView/2/w/200)\n\nå…¶å®ï¼Œåœ¨æ²¡æœ‰`ä½ç§»(translate)`çš„æƒ…å†µä¸‹ï¼Œ`[a, b] [c, d]` å››ä¸ªæ•°å­—ç»„æˆçš„ `2 x 2` çŸ©é˜µæ˜¯å®Œå…¨å¯ä»¥æè¿°2Då˜æ¢çš„ï¼Œç°åœ¨æˆ‘ä»¬åªçœ‹ç”± `[a, b] [c, d]` ç»„æˆçš„ `2 x 2` çŸ©é˜µï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformmr2.png?imageView/2/w/100)\n\næˆ‘ä»¬æŠŠ `a b c d` å››ä¸ªæ•°å­—ä½¿ç”¨é»˜è®¤å€¼æ›¿æ¢ä¸€ä¸‹ï¼Œå³ï¼š`a = 1`ï¼Œ`b = 0`ï¼Œ`c = 0`ï¼Œ`d = 1`ï¼Œå¦‚ä¸‹ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformmr3.png?imageView/2/w/100)\n\né€šè¿‡ä¹‹å‰çš„ä»‹ç»ï¼Œæˆ‘ä»¬åœ¨çœ‹åˆ°è¿™ä¸ªçŸ©é˜µçš„æ—¶å€™ï¼Œåº”è¯¥çŸ¥é“ï¼Œç¬¬ä¸€åˆ—çš„åæ ‡ `(1, 0)` åº”è¯¥æ˜¯åŸºå‘é‡ <b>i</b> å˜æ¢åçš„åæ ‡ï¼Œä½†æ˜¯åŸºå‘é‡ <b>i</b> åœ¨å˜æ¢å‰çš„åæ ‡å°±æ˜¯ `(1, 0)`ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰ä»»ä½•å˜æ¢ï¼ŒåŒç†ï¼ŒåŸºå‘é‡ <b>j</b> ä¹Ÿæ²¡æœ‰ä»»ä½•å˜æ¢ï¼Œæ‰€ä»¥è¯´ï¼Œè¿™å°±æ˜¯ `a b c d` é»˜è®¤å€¼è®¾å®šä¸ºä¸‹é¢ä»£ç æ‰€ç¤ºçš„å€¼çš„åŸå› ï¼š\n\n```css\ntransform: matrix(a, b, c, d, e, f);\n// a b c d é»˜è®¤å€¼ä¸º 1 0 0 1\ntransform: matrix(1, 0, 0, 1, e, f);\n```\n\né‚£ä¹ˆå¤§å®¶æƒ³æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬æŠŠ `a` çš„å€¼ä» `1` å˜ä¸º `2` ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¦‚æœæŠŠ `a` çš„å€¼ä» `1` å˜ä¸º `2` é‚£ä¹ˆçŸ©é˜µå¦‚ä¸‹ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformmr4.png?imageView/2/w/100)\n\nä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸºå‘é‡ <b>i</b> çš„åæ ‡ä» `(1, 0)` å˜æˆäº† `(2, 0)`ï¼Œè¿™æ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯åŸºå‘é‡ <b>i</b> è¢«æ”¾å¤§ä¸ºäº†åŸæ¥çš„äºŒå€ï¼Ÿä¸¾ä¸€ä¸ªé€šä¿—çš„ä¾‹å­ï¼šåŸæœ¬å•ä½é•¿åº¦1ä»£è¡¨20pxï¼Œè¢«æ”¾å¤§åå•ä½é•¿åº¦1åˆ™ä»£è¡¨40pxã€‚åŒæ ·çš„ï¼Œå½“æˆ‘ä»¬æŠŠ `a` çš„å€¼ä» `1` å˜ä¸º `0.5` åˆ™æ„å‘³ç€æŠŠåŸºå‘é‡ <b>i</b> ç¼©å°ä¸ºåŸæ¥çš„ä¸€åŠã€‚äº‹å®ä¸Šï¼šåœ¨ `transform: matrix()` ä¸­ï¼Œä¿®æ”¹ `a` çš„å€¼ï¼Œå°±æ˜¯åœ¨æ”¹å˜ `x` è½´æ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹ï¼š\n\n```css\ntransform: matrix(2, 0, 0, 1, 0, 0);\n/* ç­‰ä»·äº */\ntransform: scaleX(2);\n```\n\nç›¸ä¿¡å¤§å®¶å·²ç»çŸ¥é“äº†ï¼Œä¿®æ”¹ `d` çš„å€¼ï¼Œå°±æ˜¯æ”¹å˜ `y` è½´çš„ç¼©æ”¾æ¯”ä¾‹ï¼š\n\n```css\ntransform: matrix(1, 0, 0, 4, 0, 0);\n/* ç­‰ä»·äº */\ntransform: scaleY(4);\n```\n\né‚£ä¹ˆæ—‹è½¬è¦å¦‚ä½•ä¿®æ”¹ `matrix` ä¸­çš„å€¼å‘¢ï¼Ÿå…¶å®ï¼Œæƒ³è¦çŸ¥é“å¦‚ä½•ä¿®æ”¹ `a b c d` çš„å€¼ï¼Œåªéœ€è¦çŸ¥é“ï¼Œæ—‹è½¬ååŸºå‘é‡ <b>i</b> å’Œ <b>j</b> çš„åæ ‡å°±å¯ä»¥äº†ï¼Œå°†æ—‹è½¬åçš„åæ ‡å¯¹å·å¡«å…¥å°±å¯ä»¥å¾—åˆ°å˜æ¢çŸ©é˜µï¼Œä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚ä½•ç¡®å®šæ—‹è½¬ååŸºå‘é‡ <b>i</b> å’Œ <b>j</b> çš„åæ ‡ã€‚\n\næˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ `web` å¼€å‘ä¸­çš„åæ ‡ç³»å’Œæ•°å­¦ä¸­çš„åæ ‡ç³»åœ¨æ­£æ–¹å‘çš„é€‰å–ä¸Šä¸å¤ªä¸€è‡´ï¼Œåœ¨å¤§å®¶æ‰€ç†Ÿæ‚‰çš„åæ ‡ç³»ä¸­ï¼Œæ­£æ–¹å‘çš„é€‰å–å¦‚ä¸‹ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformzbx.png?imageView/2/w/100)\n\nè€Œåœ¨ `web` å¼€å‘ä¸­ï¼Œåæ ‡ç³»çš„æ­£æ–¹å‘é€‰å–æ˜¯è¿™æ ·çš„ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformzbx2.png?imageView/2/w/100)\n\nå‡è®¾æˆ‘ä»¬å°†å…¶é¡ºæ—¶é’ˆæ—‹è½¬ 45 åº¦ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformtrans.png?imageView/2/w/300)\n\nå‡è®¾ï¼Œä¸Šå›¾ä¸­æˆ‘ä»¬æ—‹è½¬çš„æ˜¯å•ä½å‘é‡ï¼Œé‚£ä¹ˆæ—‹è½¬åå•ä½å‘é‡ <b>i</b> çš„åæ ‡åº”è¯¥æ˜¯ `(cosÎ¸, sinÎ¸)`ï¼Œå•ä½å‘é‡ <b>j</b> çš„åæ ‡åº”è¯¥æ˜¯ `(-sinÎ¸, cosÎ¸)`ï¼Œæ‰€ä»¥å¦‚æœç”¨çŸ©é˜µè¡¨ç¤ºçš„è¯ï¼Œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformsanjiao.png?imageView/2/w/200)\n\nå¦‚æœå†™åˆ° `matrix` é‡Œï¼Œè‡ªç„¶å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š\n\n```css\ntransform: matrix(cosÎ¸, sinÎ¸, -sinÎ¸, cosÎ¸, 0, 0)\n```\n\næ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬è¦é¡ºæ—¶é’ˆæ—‹è½¬ 45 åº¦ï¼Œä¸‹é¢ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼š\n\n```css\n/*\n * Math.cos(Math.PI / 180 * 45) = 0.707106\n * Math.sin(Math.PI / 180 * 45) = 0.707106\n */\ntransform: matrix(0.707106, 0.707106, -0.707106, 0.707106, 0, 0)\n\n/* ç­‰ä»·äº */\ntransform: rotate(45deg);\n```\n\né€šè¿‡ä¸Šé¢ç¼©æ”¾å’Œæ—‹è½¬çš„ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ï¼Œ`2 x 2` çš„çŸ©é˜µç¡®å®èƒ½å¤Ÿæè¿°äºŒç»´ç©ºé—´çš„å˜æ¢ï¼Œè¿™ä¹Ÿå°±æ˜¯çŸ©é˜µèƒ½å¤Ÿæ“ä½œç©ºé—´çš„åŸå› ã€‚åœ¨ `transform` ä¸­ï¼Œé™¤äº†ç¼©æ”¾(`scale`)ã€æ—‹è½¬(`rotate`) è¿˜æœ‰å€¾æ–œ(`skew`)ï¼Œå¯¹äºå€¾æ–œï¼Œç±»ä¼¼äºæˆ‘ä»¬å¯»æ‰¾æ—‹è½¬ååŸºå‘é‡çš„åæ ‡ä¸€æ ·ï¼Œä½ åªéœ€è¦æ ¹æ®å€¾æ–œæ‰€å®šä¹‰çš„å˜æ¢è§„åˆ™ï¼Œæ‰¾åˆ°åŸºå‘é‡å˜æ¢åçš„åæ ‡å°±å¯ä»¥äº†ï¼Œå®é™…ä¸Šå€¾æ–œå¯¹åº”å¦‚ä¸‹è§„åˆ™ï¼š\n\n```css\ntransform: matrix(1, tan(Î¸y), tan(Î¸x), 1, 0, 0);\n```\n\nå¤§å®¶è‡ªå·±æ‹¿åªç¬”åœ¨çº¸ä¸Šç”»ä¸€ç”»åº”è¯¥å°±èƒ½ææ¸…æ¥šå€¾æ–œåœ¨åšä»€ä¹ˆæ ·å­çš„å˜æ¢ã€‚\n\næ— è®º ç¼©æ”¾(`scale`)ã€æ—‹è½¬(`rotate`) è¿˜æ˜¯å€¾æ–œ(`skew`)ï¼Œä»–ä»¬éƒ½ä¸ä¼šæ˜¯åŸç‚¹å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥ä½¿ç”¨ `a b c d` å››ä¸ªæ•°å­—ç»„æˆçš„çŸ©é˜µå®Œå…¨å¯ä»¥æè¿°ï¼Œä½†æ˜¯ä¸è¦å¿˜äº†ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ª ä½ç§»(`translate`)ï¼Œè¿™æ—¶ï¼Œå°±ä¸å¾—ä¸æåˆ° `e f` äº†ï¼Œæˆ‘æƒ³æˆ‘ä¸è¯´å¤§å®¶ä¹Ÿéƒ½çŸ¥é“äº†ï¼Œ`e f` åˆ†åˆ«ä»£è¡¨äº† `x y` æ–¹å‘çš„ä½ç§»ï¼Œäº‹å®ä¹Ÿå¦‚å¤§å®¶æ‰€æƒ³ï¼š\n\n```css\ntransform: matrix(1, 0, 0, 1, 100, 200)\n\n/* ç­‰ä»·äº */\ntransform: translateX(100px) translateY(200px);\n```\n\nè‡³æ­¤ï¼Œ`transform` ä½¿ç”¨ `3 x 3` çŸ©é˜µï¼š![](http://7xlolm.com1.z0.glb.clouddn.com/transformmr1.png?imageView/2/w/100) æ¥æè¿°äºŒç»´ç©ºé—´å˜æ¢çš„æ–¹å¼ï¼Œä»¥åŠæ˜¯å¦‚ä½•åšåˆ°çš„æˆ‘ä»¬å°±ç®—è®²å®Œäº†ã€‚\n\né™¤äº†2Då˜æ¢ï¼Œè¿˜æœ‰3Då˜æ¢ï¼Œåœ¨ `transform` ä¸­ï¼Œä½¿ç”¨ `4 x 4` çš„çŸ©é˜µæè¿°3Då˜æ¢ï¼Œä½†å®é™…ä¸Šï¼Œä¸‰ç»´ç©ºé—´çš„çº¿æ€§å˜æ¢åªéœ€è¦ä¸€ä¸ª `3 x 3` çš„çŸ©é˜µå°±å¯ä»¥æè¿°äº†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæäº†ä¸€ä¸ª `4 x 4`çŸ©é˜µå‘¢ï¼Ÿå®é™…ä¸Šè¿™å’Œæˆ‘ä»¬åœ¨å°†äºŒç»´ç©ºé—´çš„å˜æ¢ä½¿ç”¨ `3 x 3` çŸ©é˜µçš„é“ç†æ˜¯ä¸€æ ·çš„ï¼Œé‚£å°±æ˜¯ä½ç§»ã€‚\n\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹3Då˜æ¢çš„ `matrix` é»˜è®¤å€¼ï¼š\n\n```css\ntransform: matrix(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p);\ntransform: matrix(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n```\n\nè¿™åå…­ä¸ªæ•°å­—å°±æ˜¯ `4 x 4` çŸ©é˜µçš„ 16 ä¸ªæ•°å€¼ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transform3dmr.png?imageView/2/w/200)\n\nå¦‚æœæ¢æˆå¯¹åº”æ•°å­—ï¼Œæ˜¯è¿™æ ·çš„ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transform3d.png?imageView/2/w/200)\n\nç±»ä¼¼äºæˆ‘ä»¬è®²è§£ 2D å˜æ¢ä¸€æ ·ï¼Œå…¶ä¸­ç”± ![](http://7xlolm.com1.z0.glb.clouddn.com/transform3d33.png?imageView/2/w/70) ç»„æˆçš„ `3 x 3` çŸ©é˜µç”¨æ¥æè¿°ç©ºé—´çš„ 3D çº¿æ€§å˜æ¢ï¼Œå¦‚ï¼š`rotateX` `rotateY` `scaleZ` ç­‰ç­‰ï¼Œæ³¨æ„ï¼š`rotateZ` æ˜¯ 2D å˜æ¢å“¦ã€‚\n\nè€Œ `m` `n` `o` åˆ™åˆ†åˆ«ç”¨æ¥æè¿°ä½ç§»ï¼š`translateX` `translateY` `translateZ`ã€‚\n\n","source":"_posts/2017/05/13/ä»çŸ©é˜µä¸ç©ºé—´æ“ä½œçš„å…³ç³»ç†è§£CSS3çš„transform.md","raw":"title: ä»çŸ©é˜µä¸ç©ºé—´æ“ä½œçš„å…³ç³»ç†è§£CSS3çš„transform\ndate: 2017-05-13 10:50:27\ncategories:\n- WebFrontEnd\ntags:\n- finger-mover\n- css3\n- transform\n---\n\nå‰ä¸ä¹…å¼€æºäº†ä¸€ä¸ªæ’ä»¶åŒ–ç§»åŠ¨ç«¯è¿åŠ¨æ•ˆæœåº“ [finger-mover](https://github.com/HcySunYang/finger-mover)ï¼Œè¯´åˆ°è¿åŠ¨æ•ˆæœï¼Œä¸å¾—ä¸æåˆ°CSS3çš„ `transform`ï¼Œä¹Ÿå°±æ˜¯å˜æ¢ã€‚è¿™ç¯‡æ–‡ç« æ¦‚æ‹¬äº†åœ¨å®ç° [finger-mover](https://github.com/HcySunYang/finger-mover) æ—¶å¯¹ `transform` çš„ç†è§£ä¸æ€»ç»“ã€‚\n\næ³¨ï¼šæ–‡ä¸­çš„å›¾ç‰‡å¤šæ•°æˆªå–è‡ªè§†é¢‘ï¼š[çº¿æ€§ä»£æ•°çš„æœ¬è´¨](http://www.bilibili.com/video/av6731067/index_1.html#page=1)ï¼Œä¹Ÿå¼ºçƒˆå»ºè®®å¤§å®¶ç³»ç»Ÿçš„è§‚çœ‹è¿™å¥—è§†é¢‘ã€‚å¦å¤–å¦‚æœæ–‡ä¸­æœ‰è¯¯è¯·ä¸åæŒ‡æ•™ã€‚\n\n<!-- more -->\n\næ–‡ç« ç»“æ„å¦‚ä¸‹ï¼š\n\n```\n* çŸ©é˜µ\n    * æ¦‚è¿°\n* å‘é‡\n    * ä»€ä¹ˆæ˜¯å‘é‡\n    * åŸºå‘é‡\n* çº¿æ€§å˜æ¢\n* å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ\n* å›åˆ° CSS çš„ transform\n```\n\næˆ‘ä¸çŸ¥é“å¤§å®¶æ‰€ç†è§£çš„çŸ©é˜µæ˜¯æ€æ ·çš„ï¼Œä½†æˆ‘æ‰€ç†è§£çš„çŸ©é˜µæ˜¯ï¼šè¯¥é˜µæ³•å…ç–«æ³•æœ¯æ”»å‡»ä¸”100%åä¼¤å¯¹æ–¹éšæœºä¸€ä¸ªå•ä½ï¼ˆå›åˆåˆ¶æ¸¸æˆï¼‰ã€‚\n\nä»¥ä¸Šæè¿°æ˜¯åœ¨å°å­¦æ—¶ä»£çš„ç†è§£ï¼Œç°åœ¨å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œæ…¢æ…¢è¯´......\n\n## çŸ©é˜µ\n\n#### æ¦‚è¿°\n\nçŸ©é˜µï¼Œæ˜¯çº¿æ€§ä»£æ•°ä¸­æ¶‰åŠçš„å†…å®¹ï¼Œçº¿æ€§ä»£æ•°åœ¨ç§‘å­¦é¢†åŸŸæœ‰å¾ˆå¤šåº”ç”¨çš„åœºæ™¯ï¼Œå¦‚ä¸‹ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformuse-the-scene.png?imageView/2/w/500)\n\nå¤§éƒ¨åˆ†åŒå­¦åœ¨å¤§å­¦æ—¶æœŸåº”è¯¥éƒ½å­¦è¿‡ä¸€æœ¬å«åšçº¿æ€§ä»£æ•°çš„ä¹¦ï¼Œå¦‚æœæ²¡çŒœé”™çš„è¯ï¼Œä½ ä»¬çš„è€å¸ˆåœ¨æ•™å­¦çš„æ—¶å€™å¤§å¤šéƒ½æ˜¯æ¦‚å¿µæ€§çš„çŒè¾“ï¼Œæ¯”å¦‚çŸ©é˜µä¹˜æ³•å¦‚ä½•è¿ç®—ï¼ŒåŠ æ³•å¦‚ä½•è¿ç®—ï¼Œå¤§å®¶åªè¦è®°ä½å°±okäº†ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†åŒå­¦éƒ½ä¸ç†è§£ï¼Œ*ä¸ºä»€ä¹ˆçŸ©é˜µçš„ä¹˜æ³•è¦è¿™æ ·ç®—ï¼ŸçŸ©é˜µä¹˜æ³•çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ*ï¼Œç‰¹åˆ«æ˜¯æˆ‘ä»¬æè®¡ç®—æœºçš„ï¼Œå¦‚æœæœ‰åšè¿‡ 2D/3D å˜æ¢çš„åŒå­¦ä¸€å®šå¬è¯´è¿‡çŸ©é˜µï¼Œæ¯”å¦‚åœ¨å‰ç«¯çš„CSSä¸­ï¼Œä½¿ç”¨ `transform` åš 2D/3D çš„å˜æ¢ï¼Œå…¶ä¸­å°±åº”ç”¨åˆ°äº†çŸ©é˜µçš„çŸ¥è¯†ï¼Œè¿™ç¯‡æ–‡ç« å¹¶ä¸æ˜¯ä¸€ç¯‡æ•°å­¦æ€§è´¨çš„æ–‡ç« ï¼Œæ‰€ä»¥å¤§å®¶ä¸è¦çœ‹äº†æ„Ÿè§‰ä¸€é˜µçœ©æ™•ï¼Œè¿™ç¯‡æ–‡ç« çš„ç›®çš„åœ¨äºï¼šä»çŸ©é˜µä¸ç©ºé—´ä¹‹é—´çš„å…³ç³»è®²è¿°ï¼šä¸ºä»€ä¹ˆçŸ©é˜µå¯ä»¥åº”ç”¨åœ¨ç©ºé—´æ“ä½œ(å˜æ¢)ã€‚æˆ–è€…ç”¨ä¸€å¥å¤§ç™½è¯ï¼š*è¿™ç©æ„å„¿æ€ä¹ˆå°±èƒ½è®©`div`ç¿»è¿‡æ¥ï¼Œè½¬è¿‡å»ï¼Œæ‰­çš„ä»–çˆ¹éƒ½ä¸è®¤è¯†ä»–çš„ã€‚*\n\nå…ˆçœ‹ä¸€æ®µ css ä»£ç ï¼š\n\n```css\n/* 2D */\ntransform: matrix(1, 0, 0, 1, 0, 0);\n/* 3D */\ntransform: matrix(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n```\n\nä¸Šé¢ä¸¤è¡Œ css ä»£ç å…¶å®ä»€ä¹ˆå˜æ¢éƒ½ä¸ä¼šåšï¼Œå› ä¸ºé‚£æ˜¯å˜æ¢çš„é»˜è®¤çŠ¶æ€ï¼Œå³æ²¡æœ‰å˜æ¢ã€‚ä½†æ˜¯å…¶ä¸­ä½¿ç”¨åˆ°äº† `matrix`ï¼Œç¿»è¯‘æˆä¸­æ–‡å«åšï¼šçŸ©é˜µã€‚å¦‚æœæœ‰æ·±å…¥ç ”ç©¶è¿‡ css çš„åŒå­¦å¯¹è¿™ä¸¤è¡Œä»£ç ä¹Ÿè®¸ä¸é™Œç”Ÿï¼Œä½†æ˜¯å¤§å¤šæ•°äººåœ¨ä½¿ç”¨ `transform` å˜æ¢æ—¶å¾ˆå°‘ç›´æ¥ä½¿ç”¨ `matrix` çŸ©é˜µï¼Œé™¤éä½ ä¸æƒ³è®©äººçœ‹æ‡‚ä½ åœ¨åšäº›ä»€ä¹ˆé¸Ÿå˜æ¢...ï¼Œæ‰€ä»¥æ›´å¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ç±»ä¼¼å¦‚ä¸‹è¯­æ³•ï¼š\n\n```css\ntransform: translateX(100px) rotateZ(30deg);\n```\n\nå¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œä¸€ç›®äº†ç„¶ï¼Œè¦åšä»€ä¹ˆå˜æ¢å¤§å®¶ä¸€çœ‹å°±çŸ¥é“äº†ã€‚ä½†å…¶å®ï¼Œè¿™åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå…¶åº•å±‚ä¾ç„¶ä½¿ç”¨çš„æ˜¯ `matrix`ã€‚\n\nå¦‚æœæƒ³è¦ç†è§£çŸ©é˜µä¸ºä½•å¯ä»¥åº”ç”¨åˆ° 2D/3D å˜æ¢ï¼Œé‚£ä¹ˆåªä»æ•°å€¼æ°´å¹³çš„è§’åº¦ç†è§£æ˜¯ä¸å¤Ÿçš„ï¼Œä½ éœ€è¦ä»å‡ ä½•çš„è§’åº¦å»ç†è§£çŸ©é˜µï¼Œè¿™å­˜åœ¨ç€æ ¹æœ¬æ€§çš„å·®å¼‚ã€‚è€Œè¿™ï¼Œä¹Ÿå°±æ˜¯æœ¬ç¯‡æ–‡ç« çš„çœŸæ­£æ„ä¹‰ã€‚\n\nä¸è¿‡ï¼Œè¿™éœ€è¦æˆ‘ä»¬å…ˆäº†è§£ä¸€äº›å¿…è¦çš„åŸºæœ¬æ¦‚å¿µï¼Œè¿™äº›æ¦‚å¿µè‡³å…³é‡è¦ï¼Œé¦–å…ˆå°±æ˜¯å‘é‡\n\n## å‘é‡\n\n#### ä»€ä¹ˆæ˜¯å‘é‡\n\næ—¢ç„¶çŸ©é˜µæ˜¯çº¿æ€§ä»£æ•°çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆå°±ä¸å¾—ä¸æåˆ° *å‘é‡*ï¼Œå› ä¸ºå‘é‡æ˜¯çº¿æ€§ä»£æ•°æœ€åŸºç¡€ã€æœ€æ ¹æºçš„ç»„æˆéƒ¨åˆ†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆææ¸…æ¥šï¼Œå‘é‡æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘è¯´è¿‡ï¼Œè¿™ç¯‡æ–‡ç« ä¸ä¼šå¾ˆâ€œæ•°å­¦â€ï¼Œæ‰€ä»¥å¤§å®¶ä¸è¦è¢«å“åˆ°ã€‚ç”¨ä¸€å¥è¯æè¿°å‘é‡æ˜¯ä»€ä¹ˆï¼š\n\n> å‘é‡ï¼šç©ºé—´ä¸­çš„ç®­å¤´\n\nè¿™ä¸ªåœ¨å¤§å®¶çš„å°è±¡é‡Œåº”è¯¥å¾ˆå¥½ç†è§£ï¼Œè¿™ä¸ªç®­å¤´ç”±ä¸¤ä¸ªå› ç´ å†³å®šï¼š`æ–¹å‘` å’Œ `é•¿åº¦`ï¼Œæˆ‘ä»¬å…ˆæŠŠç›®å…‰å±€é™åœ¨äºŒç»´ç©ºé—´ä¸‹ï¼Œå¦‚å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformarrow.png?imageView/2/w/500)\n\nä¸Šå›¾ä¸­ï¼Œåœ¨ä¸€ä¸ªåæ ‡ç³»ä¸­ç”»äº†å››ä¸ªä¸åŒé•¿åº¦å’Œæ–¹å‘çš„ç®­å¤´ï¼Œæ¯ä¸ªç®­å¤´ä»åŸç‚¹å‘å‡ºï¼Œä»–ä»¬ä»£è¡¨äº†äºŒç»´ç©ºé—´ä¸­çš„å››ä¸ªå‘é‡ï¼Œåœ¨çº¿æ€§ä»£æ•°ä¸­ï¼Œå‘é‡é€šå¸¸ä»¥åŸç‚¹ä½œä¸ºèµ·ç‚¹ã€‚\n\nå¦‚æœä½ å·²ç»ç†è§£äº†â€œå‘é‡æ˜¯ç©ºé—´ä¸­çš„ç®­å¤´â€è¿™ç§è§‚ç‚¹ï¼Œä¸‹é¢æˆ‘ä»¬å†è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬é‡æ–°ç”¨ä¸€å¥è¯æ¥æè¿°å‘é‡ï¼š\n\n> å‘é‡ï¼šæ˜¯æœ‰åºçš„æ•°å­—åˆ—è¡¨\n\nå‡è®¾å¤§å®¶å¯¹åæ ‡ç³»çš„æ¦‚å¿µéƒ½æœ‰æ‰€äº†è§£ï¼Œæˆ‘ä»¬è¿˜æ˜¯æŠŠç›®å…‰å±€é™åœ¨äºŒç»´ç©ºé—´ï¼Œåœ¨åæ ‡ç³»ä¸­ä»»æ„é€‰å–å•ä½é•¿åº¦ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿä½¿ç”¨ä¸€ä¸ªä¸€ä¸ªçš„åˆ»åº¦æ¥æ ‡åˆ»è¿™ä¸ªåæ ‡ç³»ï¼Œé€‰å–ç‰¹å®šçš„æ–¹å‘ä¸ºx/yè½´çš„æ­£æ–¹å‘ï¼Œé‚£ä¹ˆä¸éš¾çœ‹å‡ºï¼Œæ¯ä¸€ä¸ªå‘é‡ï¼Œéƒ½å¯ä»¥ç”¨å”¯ä¸€çš„ä¸€ä¸ªåæ ‡æ¥è¡¨ç¤ºï¼ŒåŒæ ·çš„ï¼Œåæ ‡ç³»ä¸­çš„æ¯ä¸€ä¸ªåæ ‡éƒ½å¯¹åº”ç€ä¸€ä¸ªå”¯ä¸€çš„ç®­å¤´(å‘é‡)ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformnumber.png?imageView/2/w/500)\n\nåœ¨åæ ‡ç³»ä¸­ï¼Œç”±äºåæ ‡é€šå¸¸ç”¨æ¥æ ‡ç¤ºä¸€ä¸ªç‚¹ï¼Œå¦‚ `P(2, 8)` è¡¨ç¤ºç‚¹ P çš„åæ ‡ä¸º `(2, 8)`ï¼Œä¸ºäº†åŒºåˆ†ç‚¹å’Œå‘é‡ï¼Œåœ¨è¡¨ç¤ºå‘é‡æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸æŠŠåæ ‡ç«–ç€å†™ï¼Œç„¶åç”¨ä¸€å¯¹å„¿ä¸­æ‹¬å·æ¥æè¿°ï¼Œå¦‚ä¸Šå›¾ä¸­çš„ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformpoint.png?imageView/2/w/500)\n\nåœ¨ä¸‰ç»´ç©ºé—´ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œå¦‚ä¸‹å›¾ï¼Œæˆ‘å°±ä¸åšé‡å¤çš„è§£é‡Šï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œæ¯ä¸€ä¸ªå‘é‡ç”± x/y/z ä¸‰ä¸ªæ•°å­—ç»„æˆçš„åæ ‡æ¥è¡¨ç¤ºï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transform3.png?imageView/2/w/500)\n\nå¯¹äºå‘é‡ï¼Œä½ åªéœ€è¦çŸ¥é“å®ƒæ˜¯â€œç©ºé—´ä¸­çš„ç®­å¤´â€æˆ–è€…â€œæœ‰åºçš„æ•°å­—åˆ—è¡¨â€è¿™å°±è¶³å¤Ÿäº†ï¼Œæ€ä¹ˆæ ·ï¼Ÿä¸éš¾ç†è§£å§ï¼Œæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ï¼Œåœ¨åæ ‡ç³»ä¸­å­˜åœ¨ä¸€ç§ç‰¹æ®Šçš„å‘é‡ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º *åŸºå‘é‡*ã€‚\n\n#### åŸºå‘é‡\n\nåŸºå‘é‡ï¼Œä¹Ÿå«å•ä½å‘é‡ï¼Œæ˜¯å•ä½é•¿åº¦ä¸º1çš„å‘é‡ï¼Œå¦‚ä¸‹å›¾ä¸­ï¼š`iå¸½` å’Œ `jå¸½` å°±æ˜¯è¿™ä¸ªäºŒç»´åæ ‡ç³»çš„åŸºå‘é‡ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformji-xl.png?imageView/2/w/500)\n\nå¯¹äºå‘é‡ï¼Œæˆ‘ä»¬å°±å…ˆä»‹ç»åˆ°è¿™é‡Œï¼Œè¿™å·²ç»è¶³å¤Ÿäº†ã€‚é™¤äº†å‘é‡ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µéœ€è¦å¤§å®¶äº†è§£ï¼Œå³çº¿æ€§å˜æ¢ã€‚\n\n## çº¿æ€§å˜æ¢\n\nâ€œå˜æ¢â€æœ¬è´¨ä¸Šæ˜¯â€œå‡½æ•°â€çš„ä¸€ç§èŠ±å“¨çš„å«æ³•ï¼Œç©ç¼–ç¨‹çš„éƒ½çŸ¥é“å‡½æ•°ï¼Œä¸åœ¨æ•°å­¦ä¸­çš„æ¦‚å¿µç±»ä¼¼ï¼Œå‡½æ•°æ¥æ”¶è¾“å…¥çš„å†…å®¹ï¼Œå¹¶è¾“å‡ºå¯¹åº”çš„ç»“æœï¼Œå¦‚å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformfunction.png?imageView/2/w/500)\n\nå˜æ¢ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œåªä¸è¿‡æ¥æ”¶å‘é‡ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¾“å‡ºå˜æ¢åçš„å‘é‡ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformtransform.png?imageView/2/w/500)\n\næ—¢ç„¶ â€œå˜æ¢â€ ä¸ â€œå‡½æ•°â€ æœ¬è´¨ç›¸åŒï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå«å˜æ¢è€Œä¸å«å‡½æ•°å‘¢ï¼Ÿè¿™å®é™…ä¸Šå°±æš—ç¤ºäº†æˆ‘ä»¬ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªè¾“å…¥è¾“å‡ºçš„è¿‡ç¨‹ï¼Œçœ‹åšä¸€ä¸ªå‘é‡ä»åˆå§‹çŠ¶æ€åˆ°æœ€ç»ˆçŠ¶æ€çš„ä¸€ä¸ªå˜åŒ–è¿‡ç¨‹ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transforminput-output.png?imageView/2/w/500)\n\nç°åœ¨ï¼Œæˆ‘ä»¬æŠŠæƒ…å†µå®è§‚ä¸€ä¸‹ï¼Œç›®å‰åªè®¨è®ºä¸€ä¸ªå‘é‡çš„å˜æ¢ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒäºŒç»´ç©ºé—´çš„ä¸€æ•´ä¸ªå¹³é¢ï¼Œå¯ä»¥çœ‹åšæ˜¯ç”±æ— æ•°ä¸ªå‘é‡ç»„æˆ(æˆ–è€…æ— æ•°ä¸ªç‚¹ç»„æˆï¼Œå› ä¸ºæ¯ä¸€ä¸ªç‚¹å”¯ä¸€æ ‡è¯†ä¸€ä¸ªå‘é‡ï¼Œæ‰€ä»¥è¿™é‡Œè¯´å¹³é¢ç”±æ— æ•°ä¸ªå‘é‡ç»„æˆ)ï¼Œå‡å¦‚è¿™æ— æ•°ä¸ªå‘é‡åŒæ—¶åšç›¸åŒçš„å˜æ¢ï¼Œé‚£å…¶å®å°±å¯ä»¥çœ‹åšæ˜¯å¹³é¢çš„å˜æ¢ï¼Œå¦‚ä¸‹å›¾ï¼š\n\nå˜æ¢å‰ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformbefore.png?imageView/2/w/500)\n\nå˜æ¢åï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformafter.png?imageView/2/w/500)\n\nä¸è¿‡ï¼Œå¹¶éæ‰€æœ‰å˜æ¢éƒ½å«åšçº¿æ€§å˜æ¢ï¼Œçº¿æ€§å˜æ¢å¿…é¡»è¦æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ï¼š\n* 1ã€ç›´çº¿åœ¨å˜æ¢åä»ç„¶ä¸ºç›´çº¿ï¼Œä¸èƒ½æœ‰æ‰€å¼¯æ›²\n* 2ã€åŸç‚¹ä¸èƒ½ç§»åŠ¨\n\nå¦‚ä¸‹å˜æ¢ï¼Œå°±ä¸æ˜¯ä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œå› ä¸ºç›´çº¿å˜æˆäº†æ›²çº¿ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformwanqu.png?imageView/2/w/500)\n\n## å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ\n\nåœ¨ä¸Šä¸€å°èŠ‚ä¸­æˆ‘ä»¬çŸ¥é“ï¼Œç©ºé—´çš„å˜æ¢ä¹Ÿå¯ä»¥è¯´æ˜¯å‘é‡çš„å˜æ¢ï¼Œè€Œå‘é‡åœ¨ç©ºé—´ä¸­ï¼Œå¯ä»¥ç”¨ä¸€ç»„æœ‰åºçš„æ•°å­—åˆ—è¡¨æ¥è¡¨ç¤º(å³å‘é‡çš„åæ ‡)ï¼Œæ‰€ä»¥å‘é‡å˜æ¢å‰åï¼Œå¿…ç„¶ä¼šå¼•èµ·â€œæœ‰åºæ•°å­—åˆ—è¡¨çš„å˜æ¢â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥ç”¨æ•°å­—å»æè¿°å˜æ¢å‘¢ï¼Ÿ\n\nä¹‹å‰åœ¨å‘é‡ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬äº†è§£è¿‡*åŸºå‘é‡*ï¼Œå•ä½é•¿åº¦ä¸º1ï¼Œå…¶å®ç©ºé—´ä¸­çš„ä»»æ„ä¸€ä¸ªå‘é‡æˆ‘ä»¬éƒ½å¯ä»¥çœ‹åšæ˜¯ï¼š*åŸºå‘é‡å˜æ¢åçš„å’Œå‘é‡*ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformhe.png?imageView/2/w/500)\n\nå‘é‡ <b>v</b> çš„åæ ‡æ˜¯ ![](http://7xlolm.com1.z0.glb.clouddn.com/transformzuobiao.png?imageView/2/w/50)ï¼Œå¦‚æœæˆ‘ä»¬æŠŠ `3` å’Œ `-2` çœ‹åšä¸¤ä¸ªæ ‡é‡ï¼Œä¹Ÿå°±æ˜¯çº¯æ•°å­—ï¼Œé‚£ä¹ˆå‘é‡  <b>v</b> å¯ä»¥çœ‹åšæ˜¯åŸºå‘é‡è¢«æ ‡é‡ç¼©æ”¾åç›¸åŠ å¾—åˆ°çš„å’Œå‘é‡ï¼š <b>v</b> = 3<b>i</b> + (-2<b>j</b>)\n\näº†è§£äº†è¿™äº›ï¼Œæˆ‘ä»¬ç°åœ¨å°±é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œæ¥è®¤è¯†ä¸€ä¸ªè‡³å…³é‡è¦çš„äº‹å®ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰å‘é‡ <b>v</b> = -1<b>i</b> + 2<b>j</b>ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformqian.png?imageView/2/w/500)\n\næ­¤æ—¶ï¼ŒåŸºå‘é‡ <b>i</b> çš„åæ ‡æ˜¯ `(1, 0)`ã€æ³¨æ„ï¼šä¸ºäº†æ–¹ä¾¿ï¼Œè¿™é‡Œå°±ç”¨åœ†æ‹¬å·ä»£è¡¨å‘é‡çš„åæ ‡ï¼Œä¸‹åŒã€‘ï¼ŒåŸºå‘é‡ <b>j</b> çš„åæ ‡æ˜¯ `(0, 1)`ï¼Œå‡è®¾ç»è¿‡äº†æŸäº›å˜æ¢ä¹‹åï¼ŒåŸºå‘é‡ <b>i</b> çš„åæ ‡å˜ä¸º `(1ï¼Œ -2)`ï¼ŒåŸºå‘é‡ <b>j</b> çš„åæ ‡å˜ä¸º `(3ï¼Œ 0)`ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformhou.png?imageView/2/w/500)\n\né‚£ä¹ˆå˜æ¢åçš„å‘é‡ <b>v</b> ä¾ç„¶æ»¡è¶³ <b>v</b> = -1<b>i</b> + 2<b>j</b>ï¼Œå¦‚ä¸‹ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformhou-plus.png?imageView/2/w/500)\n\nä»¥ä¸Šä¾‹å­æ‰€æè¿°çš„äº‹å®ï¼Œå®é™…ä¸Šæ˜¯çº¿æ€§å˜æ¢çš„æ€§è´¨çš„æ¨è®ºï¼Œè¯¥æ€§è´¨å¯ä»¥ä»å‡ ä½•è§’åº¦è¡¨è¿°ä¸ºï¼šçº¿æ€§å˜æ¢åçš„ç½‘æ ¼å¹³è¡Œä¸”ç­‰è·ã€‚\n\næ—¢ç„¶çº¿æ€§å˜æ¢å‰åéƒ½æ»¡è¶³è¯¥çº¿æ€§å…³ç³»ï¼š<b>v</b> = -1<b>i</b> + 2<b>j</b>\n\né‚£ä¹ˆå¾ˆå®¹æ˜“æ ¹æ®å˜æ¢å `iå¸½` å’Œ `jå¸½` çš„åæ ‡æ¨ç®—å‡ºå˜æ¢å <b>v</b> çš„åæ ‡ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformjisuan.png?imageView/2/w/500)\n\nä¹Ÿå°±æ˜¯ `(5, 2)`ï¼Œå³ï¼š![](http://7xlolm.com1.z0.glb.clouddn.com/transformzuobiao2.png?imageView/2/w/50)\n\né‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥è®¤ä¸ºï¼Œç»™å®šä»»æ„ä¸€ä¸ªå‘é‡ï¼Œå…¶åæ ‡ `(x, y)`ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å˜æ¢åçš„åŸºå‘é‡çš„åæ ‡æ¨æ–­å‡ºè¯¥å‘é‡å˜æ¢åçš„åæ ‡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå‡å¦‚åŸºå‘é‡å˜æ¢åçš„åæ ‡ `iå¸½` å’Œ `jå¸½` å¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformbianhuan2.png?imageView/2/w/200)\n\né‚£ä¹ˆä»»æ„å‘é‡ `(x, y)` åœ¨ç»è¿‡å˜æ¢åçš„åæ ‡è®¡ç®—å¦‚ä¸‹ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformzuobiao3.png?imageView/2/w/300)\n\nè¿™å‘Šè¯‰æˆ‘ä»¬å¦å¤–ä¸€ä¸ªäº‹å®ï¼Œ<b>äºŒç»´ç©ºé—´çš„çº¿æ€§å˜æ¢ä»…ç”±å››ä¸ªæ•°å­—å®Œå…¨ç¡®å®š</b>ï¼Œè¿™å››ä¸ªæ•°å­—å°±æ˜¯åŸºå‘é‡ <b>i</b> å˜æ¢å <b>iå¸½</b> çš„åæ ‡ï¼Œä»¥åŠåŸºå‘é‡ <b>j</b> å˜æ¢å <b>jå¸½</b> çš„åæ ‡ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformaaafuck.png?imageView/2/w/500)\n\næ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿåªéœ€è¦å››ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬å°±ç¡®å®šäº†äºŒç»´ç©ºé—´çš„ä¸€ä¸ªå˜æ¢ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬æŠŠè¿™å››ä¸ªæ•°å­—æ”¾åˆ°ä¸€ä¸ª `2 x 2` çš„æ ¼å­ä¸­ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º `2 x 2` çŸ©é˜µï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformjuzhen.png?imageView/2/w/500)\n\nç°åœ¨ï¼Œå½“ä½ å†çœ‹åˆ° `2 x 2` çŸ©é˜µçš„æ—¶å€™ï¼Œä½ çš„ç¬¬ä¸€å‡ ä½•ç›´è§‚åæ˜ åº”è¯¥æ˜¯ï¼šå®ƒæè¿°äº†ä¸€ä¸ªäºŒç»´ç©ºé—´çš„å˜æ¢ã€‚\n\næˆ‘ä»¬æŠŠæƒ…å†µä¸€èˆ¬åŒ–ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformyiban.png?imageView/2/w/500)\n\næˆ‘ä»¬æœ‰ä¸€ä¸ª `2 x 2` çš„çŸ©é˜µ `[a, c] [b, d]`ï¼Œå…¶ä¸­ `[a, c]` æ˜¯åŸºå‘é‡ <b>i</b> å˜æ¢åçš„åæ ‡ï¼Œ`[b, d]` æ˜¯åŸºå‘é‡ <b>j</b> å˜æ¢åçš„åæ ‡ï¼Œé‚£ä¹ˆæ ¹æ®è¿™ä¸ªå˜æ¢ï¼Œä»¥åŠçº¿æ€§å˜æ¢çš„æ€§è´¨ï¼Œæˆ‘ä»¬å¯ä»¥æ¨æ–­å‡ºä»»æ„å‘é‡ `[x, y]` å˜æ¢åçš„åæ ‡ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformyuanyin.png?imageView/2/w/400)\n\n<p class=\"tip\">\nå®é™…ä¸Šï¼Œè¿™å°±æ˜¯æ•°å­¦å®¶ä¹‹æ‰€ä»¥è¿™æ ·å®šä¹‰ çŸ©é˜µçš„å‘é‡ä¹˜æ³• çš„åŸå› ã€‚\n</p>\n\nåˆ°äº†è¿™é‡Œï¼Œè®©æˆ‘ä»¬æ•´ç†ä¸€ä¸‹æ€è·¯ï¼Œé¦–å…ˆï¼Œå¯¹äºä¸€ä¸ª `2 x 2` çš„çŸ©é˜µï¼Œä½ çš„ç›´è§‚å‡ ä½•æ„Ÿå—åº”è¯¥æ˜¯ï¼Œç¬¬ä¸€åˆ—çš„ä¸¤ä¸ªæ•°æ˜¯å¯¹åŸºå‘é‡ <b>i</b> çš„å˜æ¢ï¼Œç¬¬äºŒåˆ—çš„ä¸¤ä¸ªæ•°æ˜¯å¯¹åŸºå‘é‡ <b>j</b> çš„å˜æ¢ï¼Œè¿™å››ä¸ªæ•°å­—ç»„æˆçš„ `2 x 2` çš„çŸ©é˜µï¼Œæè¿°äº†ä¸€ä¸ªå¯¹ç©ºé—´çš„çº¿æ€§å˜æ¢ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ªå˜æ¢æ¨æ–­å‡ºä»»æ„ä¸€ç‚¹(æˆ–è€…ä»»æ„å‘é‡)å˜æ¢åçš„åæ ‡ã€‚\n\nå…¶å®æˆ‘ä¹ˆä½ è¿˜å¯ä»¥æ¢ä¸€ä¸ªè§’åº¦è€ƒè™‘ï¼Œæˆ‘ä»¬å°±å•çº¯çš„æŠŠ `2 x 2` çŸ©é˜µå«åšå˜æ¢ï¼Œé‚£ä¹ˆå‘é‡ä¸çŸ©é˜µçš„ä¹˜ç§¯ï¼Œå°±è¦å¯ä»¥çœ‹åšæ˜¯è¯¥å‘é‡åº”ç”¨äº†è¿™ä¸ªå˜æ¢ã€‚å…¶å®ï¼Œè¿™å°±æ˜¯çŸ©é˜µå‘é‡ä¹˜æ³•çš„å‡ ä½•æ„ä¹‰ã€‚\n\n## å›åˆ° CSS çš„ transform\n\nè¯´äº†ä¸€å¤§å †ï¼Œæ˜¯æ—¶å€™å›åˆ° `CSS` çš„ `transform`ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹2Då˜æ¢ä¸‹ `transform` å±æ€§çš„ `matrix` å†™æ³•ï¼š\n\n```css\ntransform: matrix(a, b, c, d, e, f);\n```\n\nåœ¨æ–‡ç« å¼€å§‹ï¼Œæˆ‘ä»¬çŸ¥é“å„ä¸ªå‚æ•°é»˜è®¤å€¼å¦‚ä¸‹ï¼š\n\n```css\ntransform: matrix(1, 0, 0, 1, 0, 0);\n```\n\næœ‰çš„åŒå­¦å¯èƒ½ä¼šé—®ï¼šè¯´å¥½çš„ `2 x 2` çŸ©é˜µä¹Ÿå°±æ˜¯å››ä¸ªæ•°å­—å°±èƒ½ç¡®å®šä¸€ä¸ªäºŒç»´ç©ºé—´å˜æ¢ï¼Œä½ è¿™é‡Œæ˜æ˜æœ‰6ä¸ªæ•°å•Šï¼Œå…¶å®ï¼Œ`transform` 2Då˜æ¢æ˜¯ä¸€ä¸ª `3 * 3` çš„çŸ©é˜µï¼Œä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ï¼Ÿå› ä¸ºï¼š*ä½ç§»(translate)*ï¼Œå‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œçº¿æ€§å˜æ¢è¦æ»¡è¶³å…¶ä¸­ä¸€ä¸ªç‰¹ç‚¹ï¼šåŸç‚¹ä¸èƒ½ç§»åŠ¨ï¼Œä½†æ˜¯ä½ç§»å´ä½¿åŸç‚¹å‘ç”Ÿäº†ç§»åŠ¨ï¼Œæ‰€ä»¥ `2 x 2` çŸ©é˜µæ»¡è¶³ä¸äº†éœ€æ±‚ï¼Œåªèƒ½å†åŠ ä¸€åˆ—ï¼Œä¹Ÿå°±æ˜¯ `3 x 3` çš„çŸ©é˜µã€‚\n\næŠŠ `matrix` ä¸­çš„ `a b c d e f` æ”¾åˆ°ä¸€ä¸ª `3 x 3` çš„çŸ©é˜µä¸­åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformmr1.png?imageView/2/w/200)\n\nå…¶å®ï¼Œåœ¨æ²¡æœ‰`ä½ç§»(translate)`çš„æƒ…å†µä¸‹ï¼Œ`[a, b] [c, d]` å››ä¸ªæ•°å­—ç»„æˆçš„ `2 x 2` çŸ©é˜µæ˜¯å®Œå…¨å¯ä»¥æè¿°2Då˜æ¢çš„ï¼Œç°åœ¨æˆ‘ä»¬åªçœ‹ç”± `[a, b] [c, d]` ç»„æˆçš„ `2 x 2` çŸ©é˜µï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformmr2.png?imageView/2/w/100)\n\næˆ‘ä»¬æŠŠ `a b c d` å››ä¸ªæ•°å­—ä½¿ç”¨é»˜è®¤å€¼æ›¿æ¢ä¸€ä¸‹ï¼Œå³ï¼š`a = 1`ï¼Œ`b = 0`ï¼Œ`c = 0`ï¼Œ`d = 1`ï¼Œå¦‚ä¸‹ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformmr3.png?imageView/2/w/100)\n\né€šè¿‡ä¹‹å‰çš„ä»‹ç»ï¼Œæˆ‘ä»¬åœ¨çœ‹åˆ°è¿™ä¸ªçŸ©é˜µçš„æ—¶å€™ï¼Œåº”è¯¥çŸ¥é“ï¼Œç¬¬ä¸€åˆ—çš„åæ ‡ `(1, 0)` åº”è¯¥æ˜¯åŸºå‘é‡ <b>i</b> å˜æ¢åçš„åæ ‡ï¼Œä½†æ˜¯åŸºå‘é‡ <b>i</b> åœ¨å˜æ¢å‰çš„åæ ‡å°±æ˜¯ `(1, 0)`ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰ä»»ä½•å˜æ¢ï¼ŒåŒç†ï¼ŒåŸºå‘é‡ <b>j</b> ä¹Ÿæ²¡æœ‰ä»»ä½•å˜æ¢ï¼Œæ‰€ä»¥è¯´ï¼Œè¿™å°±æ˜¯ `a b c d` é»˜è®¤å€¼è®¾å®šä¸ºä¸‹é¢ä»£ç æ‰€ç¤ºçš„å€¼çš„åŸå› ï¼š\n\n```css\ntransform: matrix(a, b, c, d, e, f);\n// a b c d é»˜è®¤å€¼ä¸º 1 0 0 1\ntransform: matrix(1, 0, 0, 1, e, f);\n```\n\né‚£ä¹ˆå¤§å®¶æƒ³æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬æŠŠ `a` çš„å€¼ä» `1` å˜ä¸º `2` ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¦‚æœæŠŠ `a` çš„å€¼ä» `1` å˜ä¸º `2` é‚£ä¹ˆçŸ©é˜µå¦‚ä¸‹ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformmr4.png?imageView/2/w/100)\n\nä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸºå‘é‡ <b>i</b> çš„åæ ‡ä» `(1, 0)` å˜æˆäº† `(2, 0)`ï¼Œè¿™æ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯åŸºå‘é‡ <b>i</b> è¢«æ”¾å¤§ä¸ºäº†åŸæ¥çš„äºŒå€ï¼Ÿä¸¾ä¸€ä¸ªé€šä¿—çš„ä¾‹å­ï¼šåŸæœ¬å•ä½é•¿åº¦1ä»£è¡¨20pxï¼Œè¢«æ”¾å¤§åå•ä½é•¿åº¦1åˆ™ä»£è¡¨40pxã€‚åŒæ ·çš„ï¼Œå½“æˆ‘ä»¬æŠŠ `a` çš„å€¼ä» `1` å˜ä¸º `0.5` åˆ™æ„å‘³ç€æŠŠåŸºå‘é‡ <b>i</b> ç¼©å°ä¸ºåŸæ¥çš„ä¸€åŠã€‚äº‹å®ä¸Šï¼šåœ¨ `transform: matrix()` ä¸­ï¼Œä¿®æ”¹ `a` çš„å€¼ï¼Œå°±æ˜¯åœ¨æ”¹å˜ `x` è½´æ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹ï¼š\n\n```css\ntransform: matrix(2, 0, 0, 1, 0, 0);\n/* ç­‰ä»·äº */\ntransform: scaleX(2);\n```\n\nç›¸ä¿¡å¤§å®¶å·²ç»çŸ¥é“äº†ï¼Œä¿®æ”¹ `d` çš„å€¼ï¼Œå°±æ˜¯æ”¹å˜ `y` è½´çš„ç¼©æ”¾æ¯”ä¾‹ï¼š\n\n```css\ntransform: matrix(1, 0, 0, 4, 0, 0);\n/* ç­‰ä»·äº */\ntransform: scaleY(4);\n```\n\né‚£ä¹ˆæ—‹è½¬è¦å¦‚ä½•ä¿®æ”¹ `matrix` ä¸­çš„å€¼å‘¢ï¼Ÿå…¶å®ï¼Œæƒ³è¦çŸ¥é“å¦‚ä½•ä¿®æ”¹ `a b c d` çš„å€¼ï¼Œåªéœ€è¦çŸ¥é“ï¼Œæ—‹è½¬ååŸºå‘é‡ <b>i</b> å’Œ <b>j</b> çš„åæ ‡å°±å¯ä»¥äº†ï¼Œå°†æ—‹è½¬åçš„åæ ‡å¯¹å·å¡«å…¥å°±å¯ä»¥å¾—åˆ°å˜æ¢çŸ©é˜µï¼Œä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚ä½•ç¡®å®šæ—‹è½¬ååŸºå‘é‡ <b>i</b> å’Œ <b>j</b> çš„åæ ‡ã€‚\n\næˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ `web` å¼€å‘ä¸­çš„åæ ‡ç³»å’Œæ•°å­¦ä¸­çš„åæ ‡ç³»åœ¨æ­£æ–¹å‘çš„é€‰å–ä¸Šä¸å¤ªä¸€è‡´ï¼Œåœ¨å¤§å®¶æ‰€ç†Ÿæ‚‰çš„åæ ‡ç³»ä¸­ï¼Œæ­£æ–¹å‘çš„é€‰å–å¦‚ä¸‹ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformzbx.png?imageView/2/w/100)\n\nè€Œåœ¨ `web` å¼€å‘ä¸­ï¼Œåæ ‡ç³»çš„æ­£æ–¹å‘é€‰å–æ˜¯è¿™æ ·çš„ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformzbx2.png?imageView/2/w/100)\n\nå‡è®¾æˆ‘ä»¬å°†å…¶é¡ºæ—¶é’ˆæ—‹è½¬ 45 åº¦ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformtrans.png?imageView/2/w/300)\n\nå‡è®¾ï¼Œä¸Šå›¾ä¸­æˆ‘ä»¬æ—‹è½¬çš„æ˜¯å•ä½å‘é‡ï¼Œé‚£ä¹ˆæ—‹è½¬åå•ä½å‘é‡ <b>i</b> çš„åæ ‡åº”è¯¥æ˜¯ `(cosÎ¸, sinÎ¸)`ï¼Œå•ä½å‘é‡ <b>j</b> çš„åæ ‡åº”è¯¥æ˜¯ `(-sinÎ¸, cosÎ¸)`ï¼Œæ‰€ä»¥å¦‚æœç”¨çŸ©é˜µè¡¨ç¤ºçš„è¯ï¼Œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transformsanjiao.png?imageView/2/w/200)\n\nå¦‚æœå†™åˆ° `matrix` é‡Œï¼Œè‡ªç„¶å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š\n\n```css\ntransform: matrix(cosÎ¸, sinÎ¸, -sinÎ¸, cosÎ¸, 0, 0)\n```\n\næ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬è¦é¡ºæ—¶é’ˆæ—‹è½¬ 45 åº¦ï¼Œä¸‹é¢ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼š\n\n```css\n/*\n * Math.cos(Math.PI / 180 * 45) = 0.707106\n * Math.sin(Math.PI / 180 * 45) = 0.707106\n */\ntransform: matrix(0.707106, 0.707106, -0.707106, 0.707106, 0, 0)\n\n/* ç­‰ä»·äº */\ntransform: rotate(45deg);\n```\n\né€šè¿‡ä¸Šé¢ç¼©æ”¾å’Œæ—‹è½¬çš„ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ï¼Œ`2 x 2` çš„çŸ©é˜µç¡®å®èƒ½å¤Ÿæè¿°äºŒç»´ç©ºé—´çš„å˜æ¢ï¼Œè¿™ä¹Ÿå°±æ˜¯çŸ©é˜µèƒ½å¤Ÿæ“ä½œç©ºé—´çš„åŸå› ã€‚åœ¨ `transform` ä¸­ï¼Œé™¤äº†ç¼©æ”¾(`scale`)ã€æ—‹è½¬(`rotate`) è¿˜æœ‰å€¾æ–œ(`skew`)ï¼Œå¯¹äºå€¾æ–œï¼Œç±»ä¼¼äºæˆ‘ä»¬å¯»æ‰¾æ—‹è½¬ååŸºå‘é‡çš„åæ ‡ä¸€æ ·ï¼Œä½ åªéœ€è¦æ ¹æ®å€¾æ–œæ‰€å®šä¹‰çš„å˜æ¢è§„åˆ™ï¼Œæ‰¾åˆ°åŸºå‘é‡å˜æ¢åçš„åæ ‡å°±å¯ä»¥äº†ï¼Œå®é™…ä¸Šå€¾æ–œå¯¹åº”å¦‚ä¸‹è§„åˆ™ï¼š\n\n```css\ntransform: matrix(1, tan(Î¸y), tan(Î¸x), 1, 0, 0);\n```\n\nå¤§å®¶è‡ªå·±æ‹¿åªç¬”åœ¨çº¸ä¸Šç”»ä¸€ç”»åº”è¯¥å°±èƒ½ææ¸…æ¥šå€¾æ–œåœ¨åšä»€ä¹ˆæ ·å­çš„å˜æ¢ã€‚\n\næ— è®º ç¼©æ”¾(`scale`)ã€æ—‹è½¬(`rotate`) è¿˜æ˜¯å€¾æ–œ(`skew`)ï¼Œä»–ä»¬éƒ½ä¸ä¼šæ˜¯åŸç‚¹å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥ä½¿ç”¨ `a b c d` å››ä¸ªæ•°å­—ç»„æˆçš„çŸ©é˜µå®Œå…¨å¯ä»¥æè¿°ï¼Œä½†æ˜¯ä¸è¦å¿˜äº†ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ª ä½ç§»(`translate`)ï¼Œè¿™æ—¶ï¼Œå°±ä¸å¾—ä¸æåˆ° `e f` äº†ï¼Œæˆ‘æƒ³æˆ‘ä¸è¯´å¤§å®¶ä¹Ÿéƒ½çŸ¥é“äº†ï¼Œ`e f` åˆ†åˆ«ä»£è¡¨äº† `x y` æ–¹å‘çš„ä½ç§»ï¼Œäº‹å®ä¹Ÿå¦‚å¤§å®¶æ‰€æƒ³ï¼š\n\n```css\ntransform: matrix(1, 0, 0, 1, 100, 200)\n\n/* ç­‰ä»·äº */\ntransform: translateX(100px) translateY(200px);\n```\n\nè‡³æ­¤ï¼Œ`transform` ä½¿ç”¨ `3 x 3` çŸ©é˜µï¼š![](http://7xlolm.com1.z0.glb.clouddn.com/transformmr1.png?imageView/2/w/100) æ¥æè¿°äºŒç»´ç©ºé—´å˜æ¢çš„æ–¹å¼ï¼Œä»¥åŠæ˜¯å¦‚ä½•åšåˆ°çš„æˆ‘ä»¬å°±ç®—è®²å®Œäº†ã€‚\n\né™¤äº†2Då˜æ¢ï¼Œè¿˜æœ‰3Då˜æ¢ï¼Œåœ¨ `transform` ä¸­ï¼Œä½¿ç”¨ `4 x 4` çš„çŸ©é˜µæè¿°3Då˜æ¢ï¼Œä½†å®é™…ä¸Šï¼Œä¸‰ç»´ç©ºé—´çš„çº¿æ€§å˜æ¢åªéœ€è¦ä¸€ä¸ª `3 x 3` çš„çŸ©é˜µå°±å¯ä»¥æè¿°äº†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæäº†ä¸€ä¸ª `4 x 4`çŸ©é˜µå‘¢ï¼Ÿå®é™…ä¸Šè¿™å’Œæˆ‘ä»¬åœ¨å°†äºŒç»´ç©ºé—´çš„å˜æ¢ä½¿ç”¨ `3 x 3` çŸ©é˜µçš„é“ç†æ˜¯ä¸€æ ·çš„ï¼Œé‚£å°±æ˜¯ä½ç§»ã€‚\n\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹3Då˜æ¢çš„ `matrix` é»˜è®¤å€¼ï¼š\n\n```css\ntransform: matrix(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p);\ntransform: matrix(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n```\n\nè¿™åå…­ä¸ªæ•°å­—å°±æ˜¯ `4 x 4` çŸ©é˜µçš„ 16 ä¸ªæ•°å€¼ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transform3dmr.png?imageView/2/w/200)\n\nå¦‚æœæ¢æˆå¯¹åº”æ•°å­—ï¼Œæ˜¯è¿™æ ·çš„ï¼š\n\n![](http://7xlolm.com1.z0.glb.clouddn.com/transform3d.png?imageView/2/w/200)\n\nç±»ä¼¼äºæˆ‘ä»¬è®²è§£ 2D å˜æ¢ä¸€æ ·ï¼Œå…¶ä¸­ç”± ![](http://7xlolm.com1.z0.glb.clouddn.com/transform3d33.png?imageView/2/w/70) ç»„æˆçš„ `3 x 3` çŸ©é˜µç”¨æ¥æè¿°ç©ºé—´çš„ 3D çº¿æ€§å˜æ¢ï¼Œå¦‚ï¼š`rotateX` `rotateY` `scaleZ` ç­‰ç­‰ï¼Œæ³¨æ„ï¼š`rotateZ` æ˜¯ 2D å˜æ¢å“¦ã€‚\n\nè€Œ `m` `n` `o` åˆ™åˆ†åˆ«ç”¨æ¥æè¿°ä½ç§»ï¼š`translateX` `translateY` `translateZ`ã€‚\n\n","slug":"ä»çŸ©é˜µä¸ç©ºé—´æ“ä½œçš„å…³ç³»ç†è§£CSS3çš„transform","published":1,"updated":"2017-05-13T03:59:14.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj67vx532004547fyb5ir2ntq","content":"<p>å‰ä¸ä¹…å¼€æºäº†ä¸€ä¸ªæ’ä»¶åŒ–ç§»åŠ¨ç«¯è¿åŠ¨æ•ˆæœåº“ <a href=\"https://github.com/HcySunYang/finger-mover\" target=\"_blank\" rel=\"external\">finger-mover</a>ï¼Œè¯´åˆ°è¿åŠ¨æ•ˆæœï¼Œä¸å¾—ä¸æåˆ°CSS3çš„ <code>transform</code>ï¼Œä¹Ÿå°±æ˜¯å˜æ¢ã€‚è¿™ç¯‡æ–‡ç« æ¦‚æ‹¬äº†åœ¨å®ç° <a href=\"https://github.com/HcySunYang/finger-mover\" target=\"_blank\" rel=\"external\">finger-mover</a> æ—¶å¯¹ <code>transform</code> çš„ç†è§£ä¸æ€»ç»“ã€‚</p>\n<p>æ³¨ï¼šæ–‡ä¸­çš„å›¾ç‰‡å¤šæ•°æˆªå–è‡ªè§†é¢‘ï¼š<a href=\"http://www.bilibili.com/video/av6731067/index_1.html#page=1\" target=\"_blank\" rel=\"external\">çº¿æ€§ä»£æ•°çš„æœ¬è´¨</a>ï¼Œä¹Ÿå¼ºçƒˆå»ºè®®å¤§å®¶ç³»ç»Ÿçš„è§‚çœ‹è¿™å¥—è§†é¢‘ã€‚å¦å¤–å¦‚æœæ–‡ä¸­æœ‰è¯¯è¯·ä¸åæŒ‡æ•™ã€‚</p>\n<a id=\"more\"></a>\n<p>æ–‡ç« ç»“æ„å¦‚ä¸‹ï¼š</p>\n<pre><code>* çŸ©é˜µ\n    * æ¦‚è¿°\n* å‘é‡\n    * ä»€ä¹ˆæ˜¯å‘é‡\n    * åŸºå‘é‡\n* çº¿æ€§å˜æ¢\n* å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ\n* å›åˆ° CSS çš„ transform\n</code></pre><p>æˆ‘ä¸çŸ¥é“å¤§å®¶æ‰€ç†è§£çš„çŸ©é˜µæ˜¯æ€æ ·çš„ï¼Œä½†æˆ‘æ‰€ç†è§£çš„çŸ©é˜µæ˜¯ï¼šè¯¥é˜µæ³•å…ç–«æ³•æœ¯æ”»å‡»ä¸”100%åä¼¤å¯¹æ–¹éšæœºä¸€ä¸ªå•ä½ï¼ˆå›åˆåˆ¶æ¸¸æˆï¼‰ã€‚</p>\n<p>ä»¥ä¸Šæè¿°æ˜¯åœ¨å°å­¦æ—¶ä»£çš„ç†è§£ï¼Œç°åœ¨å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œæ…¢æ…¢è¯´â€¦â€¦</p>\n<h2 id=\"çŸ©é˜µ\"><a href=\"#çŸ©é˜µ\" class=\"headerlink\" title=\"çŸ©é˜µ\"></a>çŸ©é˜µ</h2><h4 id=\"æ¦‚è¿°\"><a href=\"#æ¦‚è¿°\" class=\"headerlink\" title=\"æ¦‚è¿°\"></a>æ¦‚è¿°</h4><p>çŸ©é˜µï¼Œæ˜¯çº¿æ€§ä»£æ•°ä¸­æ¶‰åŠçš„å†…å®¹ï¼Œçº¿æ€§ä»£æ•°åœ¨ç§‘å­¦é¢†åŸŸæœ‰å¾ˆå¤šåº”ç”¨çš„åœºæ™¯ï¼Œå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformuse-the-scene.png?imageView/2/w/500\" alt=\"\"></p>\n<p>å¤§éƒ¨åˆ†åŒå­¦åœ¨å¤§å­¦æ—¶æœŸåº”è¯¥éƒ½å­¦è¿‡ä¸€æœ¬å«åšçº¿æ€§ä»£æ•°çš„ä¹¦ï¼Œå¦‚æœæ²¡çŒœé”™çš„è¯ï¼Œä½ ä»¬çš„è€å¸ˆåœ¨æ•™å­¦çš„æ—¶å€™å¤§å¤šéƒ½æ˜¯æ¦‚å¿µæ€§çš„çŒè¾“ï¼Œæ¯”å¦‚çŸ©é˜µä¹˜æ³•å¦‚ä½•è¿ç®—ï¼ŒåŠ æ³•å¦‚ä½•è¿ç®—ï¼Œå¤§å®¶åªè¦è®°ä½å°±okäº†ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†åŒå­¦éƒ½ä¸ç†è§£ï¼Œ<em>ä¸ºä»€ä¹ˆçŸ©é˜µçš„ä¹˜æ³•è¦è¿™æ ·ç®—ï¼ŸçŸ©é˜µä¹˜æ³•çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</em>ï¼Œç‰¹åˆ«æ˜¯æˆ‘ä»¬æè®¡ç®—æœºçš„ï¼Œå¦‚æœæœ‰åšè¿‡ 2D/3D å˜æ¢çš„åŒå­¦ä¸€å®šå¬è¯´è¿‡çŸ©é˜µï¼Œæ¯”å¦‚åœ¨å‰ç«¯çš„CSSä¸­ï¼Œä½¿ç”¨ <code>transform</code> åš 2D/3D çš„å˜æ¢ï¼Œå…¶ä¸­å°±åº”ç”¨åˆ°äº†çŸ©é˜µçš„çŸ¥è¯†ï¼Œè¿™ç¯‡æ–‡ç« å¹¶ä¸æ˜¯ä¸€ç¯‡æ•°å­¦æ€§è´¨çš„æ–‡ç« ï¼Œæ‰€ä»¥å¤§å®¶ä¸è¦çœ‹äº†æ„Ÿè§‰ä¸€é˜µçœ©æ™•ï¼Œè¿™ç¯‡æ–‡ç« çš„ç›®çš„åœ¨äºï¼šä»çŸ©é˜µä¸ç©ºé—´ä¹‹é—´çš„å…³ç³»è®²è¿°ï¼šä¸ºä»€ä¹ˆçŸ©é˜µå¯ä»¥åº”ç”¨åœ¨ç©ºé—´æ“ä½œ(å˜æ¢)ã€‚æˆ–è€…ç”¨ä¸€å¥å¤§ç™½è¯ï¼š<em>è¿™ç©æ„å„¿æ€ä¹ˆå°±èƒ½è®©<code>div</code>ç¿»è¿‡æ¥ï¼Œè½¬è¿‡å»ï¼Œæ‰­çš„ä»–çˆ¹éƒ½ä¸è®¤è¯†ä»–çš„ã€‚</em></p>\n<p>å…ˆçœ‹ä¸€æ®µ css ä»£ç ï¼š</p>\n<pre><code class=\"css\">/* 2D */\ntransform: matrix(1, 0, 0, 1, 0, 0);\n/* 3D */\ntransform: matrix(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n</code></pre>\n<p>ä¸Šé¢ä¸¤è¡Œ css ä»£ç å…¶å®ä»€ä¹ˆå˜æ¢éƒ½ä¸ä¼šåšï¼Œå› ä¸ºé‚£æ˜¯å˜æ¢çš„é»˜è®¤çŠ¶æ€ï¼Œå³æ²¡æœ‰å˜æ¢ã€‚ä½†æ˜¯å…¶ä¸­ä½¿ç”¨åˆ°äº† <code>matrix</code>ï¼Œç¿»è¯‘æˆä¸­æ–‡å«åšï¼šçŸ©é˜µã€‚å¦‚æœæœ‰æ·±å…¥ç ”ç©¶è¿‡ css çš„åŒå­¦å¯¹è¿™ä¸¤è¡Œä»£ç ä¹Ÿè®¸ä¸é™Œç”Ÿï¼Œä½†æ˜¯å¤§å¤šæ•°äººåœ¨ä½¿ç”¨ <code>transform</code> å˜æ¢æ—¶å¾ˆå°‘ç›´æ¥ä½¿ç”¨ <code>matrix</code> çŸ©é˜µï¼Œé™¤éä½ ä¸æƒ³è®©äººçœ‹æ‡‚ä½ åœ¨åšäº›ä»€ä¹ˆé¸Ÿå˜æ¢â€¦ï¼Œæ‰€ä»¥æ›´å¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ç±»ä¼¼å¦‚ä¸‹è¯­æ³•ï¼š</p>\n<pre><code class=\"css\">transform: translateX(100px) rotateZ(30deg);\n</code></pre>\n<p>å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œä¸€ç›®äº†ç„¶ï¼Œè¦åšä»€ä¹ˆå˜æ¢å¤§å®¶ä¸€çœ‹å°±çŸ¥é“äº†ã€‚ä½†å…¶å®ï¼Œè¿™åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå…¶åº•å±‚ä¾ç„¶ä½¿ç”¨çš„æ˜¯ <code>matrix</code>ã€‚</p>\n<p>å¦‚æœæƒ³è¦ç†è§£çŸ©é˜µä¸ºä½•å¯ä»¥åº”ç”¨åˆ° 2D/3D å˜æ¢ï¼Œé‚£ä¹ˆåªä»æ•°å€¼æ°´å¹³çš„è§’åº¦ç†è§£æ˜¯ä¸å¤Ÿçš„ï¼Œä½ éœ€è¦ä»å‡ ä½•çš„è§’åº¦å»ç†è§£çŸ©é˜µï¼Œè¿™å­˜åœ¨ç€æ ¹æœ¬æ€§çš„å·®å¼‚ã€‚è€Œè¿™ï¼Œä¹Ÿå°±æ˜¯æœ¬ç¯‡æ–‡ç« çš„çœŸæ­£æ„ä¹‰ã€‚</p>\n<p>ä¸è¿‡ï¼Œè¿™éœ€è¦æˆ‘ä»¬å…ˆäº†è§£ä¸€äº›å¿…è¦çš„åŸºæœ¬æ¦‚å¿µï¼Œè¿™äº›æ¦‚å¿µè‡³å…³é‡è¦ï¼Œé¦–å…ˆå°±æ˜¯å‘é‡</p>\n<h2 id=\"å‘é‡\"><a href=\"#å‘é‡\" class=\"headerlink\" title=\"å‘é‡\"></a>å‘é‡</h2><h4 id=\"ä»€ä¹ˆæ˜¯å‘é‡\"><a href=\"#ä»€ä¹ˆæ˜¯å‘é‡\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å‘é‡\"></a>ä»€ä¹ˆæ˜¯å‘é‡</h4><p>æ—¢ç„¶çŸ©é˜µæ˜¯çº¿æ€§ä»£æ•°çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆå°±ä¸å¾—ä¸æåˆ° <em>å‘é‡</em>ï¼Œå› ä¸ºå‘é‡æ˜¯çº¿æ€§ä»£æ•°æœ€åŸºç¡€ã€æœ€æ ¹æºçš„ç»„æˆéƒ¨åˆ†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆææ¸…æ¥šï¼Œå‘é‡æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘è¯´è¿‡ï¼Œè¿™ç¯‡æ–‡ç« ä¸ä¼šå¾ˆâ€œæ•°å­¦â€ï¼Œæ‰€ä»¥å¤§å®¶ä¸è¦è¢«å“åˆ°ã€‚ç”¨ä¸€å¥è¯æè¿°å‘é‡æ˜¯ä»€ä¹ˆï¼š</p>\n<blockquote>\n<p>å‘é‡ï¼šç©ºé—´ä¸­çš„ç®­å¤´</p>\n</blockquote>\n<p>è¿™ä¸ªåœ¨å¤§å®¶çš„å°è±¡é‡Œåº”è¯¥å¾ˆå¥½ç†è§£ï¼Œè¿™ä¸ªç®­å¤´ç”±ä¸¤ä¸ªå› ç´ å†³å®šï¼š<code>æ–¹å‘</code> å’Œ <code>é•¿åº¦</code>ï¼Œæˆ‘ä»¬å…ˆæŠŠç›®å…‰å±€é™åœ¨äºŒç»´ç©ºé—´ä¸‹ï¼Œå¦‚å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformarrow.png?imageView/2/w/500\" alt=\"\"></p>\n<p>ä¸Šå›¾ä¸­ï¼Œåœ¨ä¸€ä¸ªåæ ‡ç³»ä¸­ç”»äº†å››ä¸ªä¸åŒé•¿åº¦å’Œæ–¹å‘çš„ç®­å¤´ï¼Œæ¯ä¸ªç®­å¤´ä»åŸç‚¹å‘å‡ºï¼Œä»–ä»¬ä»£è¡¨äº†äºŒç»´ç©ºé—´ä¸­çš„å››ä¸ªå‘é‡ï¼Œåœ¨çº¿æ€§ä»£æ•°ä¸­ï¼Œå‘é‡é€šå¸¸ä»¥åŸç‚¹ä½œä¸ºèµ·ç‚¹ã€‚</p>\n<p>å¦‚æœä½ å·²ç»ç†è§£äº†â€œå‘é‡æ˜¯ç©ºé—´ä¸­çš„ç®­å¤´â€è¿™ç§è§‚ç‚¹ï¼Œä¸‹é¢æˆ‘ä»¬å†è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬é‡æ–°ç”¨ä¸€å¥è¯æ¥æè¿°å‘é‡ï¼š</p>\n<blockquote>\n<p>å‘é‡ï¼šæ˜¯æœ‰åºçš„æ•°å­—åˆ—è¡¨</p>\n</blockquote>\n<p>å‡è®¾å¤§å®¶å¯¹åæ ‡ç³»çš„æ¦‚å¿µéƒ½æœ‰æ‰€äº†è§£ï¼Œæˆ‘ä»¬è¿˜æ˜¯æŠŠç›®å…‰å±€é™åœ¨äºŒç»´ç©ºé—´ï¼Œåœ¨åæ ‡ç³»ä¸­ä»»æ„é€‰å–å•ä½é•¿åº¦ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿä½¿ç”¨ä¸€ä¸ªä¸€ä¸ªçš„åˆ»åº¦æ¥æ ‡åˆ»è¿™ä¸ªåæ ‡ç³»ï¼Œé€‰å–ç‰¹å®šçš„æ–¹å‘ä¸ºx/yè½´çš„æ­£æ–¹å‘ï¼Œé‚£ä¹ˆä¸éš¾çœ‹å‡ºï¼Œæ¯ä¸€ä¸ªå‘é‡ï¼Œéƒ½å¯ä»¥ç”¨å”¯ä¸€çš„ä¸€ä¸ªåæ ‡æ¥è¡¨ç¤ºï¼ŒåŒæ ·çš„ï¼Œåæ ‡ç³»ä¸­çš„æ¯ä¸€ä¸ªåæ ‡éƒ½å¯¹åº”ç€ä¸€ä¸ªå”¯ä¸€çš„ç®­å¤´(å‘é‡)ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformnumber.png?imageView/2/w/500\" alt=\"\"></p>\n<p>åœ¨åæ ‡ç³»ä¸­ï¼Œç”±äºåæ ‡é€šå¸¸ç”¨æ¥æ ‡ç¤ºä¸€ä¸ªç‚¹ï¼Œå¦‚ <code>P(2, 8)</code> è¡¨ç¤ºç‚¹ P çš„åæ ‡ä¸º <code>(2, 8)</code>ï¼Œä¸ºäº†åŒºåˆ†ç‚¹å’Œå‘é‡ï¼Œåœ¨è¡¨ç¤ºå‘é‡æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸æŠŠåæ ‡ç«–ç€å†™ï¼Œç„¶åç”¨ä¸€å¯¹å„¿ä¸­æ‹¬å·æ¥æè¿°ï¼Œå¦‚ä¸Šå›¾ä¸­çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformpoint.png?imageView/2/w/500\" alt=\"\"></p>\n<p>åœ¨ä¸‰ç»´ç©ºé—´ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œå¦‚ä¸‹å›¾ï¼Œæˆ‘å°±ä¸åšé‡å¤çš„è§£é‡Šï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œæ¯ä¸€ä¸ªå‘é‡ç”± x/y/z ä¸‰ä¸ªæ•°å­—ç»„æˆçš„åæ ‡æ¥è¡¨ç¤ºï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transform3.png?imageView/2/w/500\" alt=\"\"></p>\n<p>å¯¹äºå‘é‡ï¼Œä½ åªéœ€è¦çŸ¥é“å®ƒæ˜¯â€œç©ºé—´ä¸­çš„ç®­å¤´â€æˆ–è€…â€œæœ‰åºçš„æ•°å­—åˆ—è¡¨â€è¿™å°±è¶³å¤Ÿäº†ï¼Œæ€ä¹ˆæ ·ï¼Ÿä¸éš¾ç†è§£å§ï¼Œæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ï¼Œåœ¨åæ ‡ç³»ä¸­å­˜åœ¨ä¸€ç§ç‰¹æ®Šçš„å‘é‡ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <em>åŸºå‘é‡</em>ã€‚</p>\n<h4 id=\"åŸºå‘é‡\"><a href=\"#åŸºå‘é‡\" class=\"headerlink\" title=\"åŸºå‘é‡\"></a>åŸºå‘é‡</h4><p>åŸºå‘é‡ï¼Œä¹Ÿå«å•ä½å‘é‡ï¼Œæ˜¯å•ä½é•¿åº¦ä¸º1çš„å‘é‡ï¼Œå¦‚ä¸‹å›¾ä¸­ï¼š<code>iå¸½</code> å’Œ <code>jå¸½</code> å°±æ˜¯è¿™ä¸ªäºŒç»´åæ ‡ç³»çš„åŸºå‘é‡ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformji-xl.png?imageView/2/w/500\" alt=\"\"></p>\n<p>å¯¹äºå‘é‡ï¼Œæˆ‘ä»¬å°±å…ˆä»‹ç»åˆ°è¿™é‡Œï¼Œè¿™å·²ç»è¶³å¤Ÿäº†ã€‚é™¤äº†å‘é‡ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µéœ€è¦å¤§å®¶äº†è§£ï¼Œå³çº¿æ€§å˜æ¢ã€‚</p>\n<h2 id=\"çº¿æ€§å˜æ¢\"><a href=\"#çº¿æ€§å˜æ¢\" class=\"headerlink\" title=\"çº¿æ€§å˜æ¢\"></a>çº¿æ€§å˜æ¢</h2><p>â€œå˜æ¢â€æœ¬è´¨ä¸Šæ˜¯â€œå‡½æ•°â€çš„ä¸€ç§èŠ±å“¨çš„å«æ³•ï¼Œç©ç¼–ç¨‹çš„éƒ½çŸ¥é“å‡½æ•°ï¼Œä¸åœ¨æ•°å­¦ä¸­çš„æ¦‚å¿µç±»ä¼¼ï¼Œå‡½æ•°æ¥æ”¶è¾“å…¥çš„å†…å®¹ï¼Œå¹¶è¾“å‡ºå¯¹åº”çš„ç»“æœï¼Œå¦‚å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformfunction.png?imageView/2/w/500\" alt=\"\"></p>\n<p>å˜æ¢ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œåªä¸è¿‡æ¥æ”¶å‘é‡ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¾“å‡ºå˜æ¢åçš„å‘é‡ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformtransform.png?imageView/2/w/500\" alt=\"\"></p>\n<p>æ—¢ç„¶ â€œå˜æ¢â€ ä¸ â€œå‡½æ•°â€ æœ¬è´¨ç›¸åŒï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå«å˜æ¢è€Œä¸å«å‡½æ•°å‘¢ï¼Ÿè¿™å®é™…ä¸Šå°±æš—ç¤ºäº†æˆ‘ä»¬ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªè¾“å…¥è¾“å‡ºçš„è¿‡ç¨‹ï¼Œçœ‹åšä¸€ä¸ªå‘é‡ä»åˆå§‹çŠ¶æ€åˆ°æœ€ç»ˆçŠ¶æ€çš„ä¸€ä¸ªå˜åŒ–è¿‡ç¨‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transforminput-output.png?imageView/2/w/500\" alt=\"\"></p>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠæƒ…å†µå®è§‚ä¸€ä¸‹ï¼Œç›®å‰åªè®¨è®ºä¸€ä¸ªå‘é‡çš„å˜æ¢ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒäºŒç»´ç©ºé—´çš„ä¸€æ•´ä¸ªå¹³é¢ï¼Œå¯ä»¥çœ‹åšæ˜¯ç”±æ— æ•°ä¸ªå‘é‡ç»„æˆ(æˆ–è€…æ— æ•°ä¸ªç‚¹ç»„æˆï¼Œå› ä¸ºæ¯ä¸€ä¸ªç‚¹å”¯ä¸€æ ‡è¯†ä¸€ä¸ªå‘é‡ï¼Œæ‰€ä»¥è¿™é‡Œè¯´å¹³é¢ç”±æ— æ•°ä¸ªå‘é‡ç»„æˆ)ï¼Œå‡å¦‚è¿™æ— æ•°ä¸ªå‘é‡åŒæ—¶åšç›¸åŒçš„å˜æ¢ï¼Œé‚£å…¶å®å°±å¯ä»¥çœ‹åšæ˜¯å¹³é¢çš„å˜æ¢ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p>å˜æ¢å‰ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformbefore.png?imageView/2/w/500\" alt=\"\"></p>\n<p>å˜æ¢åï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformafter.png?imageView/2/w/500\" alt=\"\"></p>\n<p>ä¸è¿‡ï¼Œå¹¶éæ‰€æœ‰å˜æ¢éƒ½å«åšçº¿æ€§å˜æ¢ï¼Œçº¿æ€§å˜æ¢å¿…é¡»è¦æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ï¼š</p>\n<ul>\n<li>1ã€ç›´çº¿åœ¨å˜æ¢åä»ç„¶ä¸ºç›´çº¿ï¼Œä¸èƒ½æœ‰æ‰€å¼¯æ›²</li>\n<li>2ã€åŸç‚¹ä¸èƒ½ç§»åŠ¨</li>\n</ul>\n<p>å¦‚ä¸‹å˜æ¢ï¼Œå°±ä¸æ˜¯ä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œå› ä¸ºç›´çº¿å˜æˆäº†æ›²çº¿ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformwanqu.png?imageView/2/w/500\" alt=\"\"></p>\n<h2 id=\"å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ\"><a href=\"#å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ\"></a>å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ</h2><p>åœ¨ä¸Šä¸€å°èŠ‚ä¸­æˆ‘ä»¬çŸ¥é“ï¼Œç©ºé—´çš„å˜æ¢ä¹Ÿå¯ä»¥è¯´æ˜¯å‘é‡çš„å˜æ¢ï¼Œè€Œå‘é‡åœ¨ç©ºé—´ä¸­ï¼Œå¯ä»¥ç”¨ä¸€ç»„æœ‰åºçš„æ•°å­—åˆ—è¡¨æ¥è¡¨ç¤º(å³å‘é‡çš„åæ ‡)ï¼Œæ‰€ä»¥å‘é‡å˜æ¢å‰åï¼Œå¿…ç„¶ä¼šå¼•èµ·â€œæœ‰åºæ•°å­—åˆ—è¡¨çš„å˜æ¢â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥ç”¨æ•°å­—å»æè¿°å˜æ¢å‘¢ï¼Ÿ</p>\n<p>ä¹‹å‰åœ¨å‘é‡ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬äº†è§£è¿‡<em>åŸºå‘é‡</em>ï¼Œå•ä½é•¿åº¦ä¸º1ï¼Œå…¶å®ç©ºé—´ä¸­çš„ä»»æ„ä¸€ä¸ªå‘é‡æˆ‘ä»¬éƒ½å¯ä»¥çœ‹åšæ˜¯ï¼š<em>åŸºå‘é‡å˜æ¢åçš„å’Œå‘é‡</em>ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformhe.png?imageView/2/w/500\" alt=\"\"></p>\n<p>å‘é‡ <b>v</b> çš„åæ ‡æ˜¯ <img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformzuobiao.png?imageView/2/w/50\" alt=\"\">ï¼Œå¦‚æœæˆ‘ä»¬æŠŠ <code>3</code> å’Œ <code>-2</code> çœ‹åšä¸¤ä¸ªæ ‡é‡ï¼Œä¹Ÿå°±æ˜¯çº¯æ•°å­—ï¼Œé‚£ä¹ˆå‘é‡  <b>v</b> å¯ä»¥çœ‹åšæ˜¯åŸºå‘é‡è¢«æ ‡é‡ç¼©æ”¾åç›¸åŠ å¾—åˆ°çš„å’Œå‘é‡ï¼š <b>v</b> = 3<b>i</b> + (-2<b>j</b>)</p>\n<p>äº†è§£äº†è¿™äº›ï¼Œæˆ‘ä»¬ç°åœ¨å°±é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œæ¥è®¤è¯†ä¸€ä¸ªè‡³å…³é‡è¦çš„äº‹å®ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰å‘é‡ <b>v</b> = -1<b>i</b> + 2<b>j</b>ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformqian.png?imageView/2/w/500\" alt=\"\"></p>\n<p>æ­¤æ—¶ï¼ŒåŸºå‘é‡ <b>i</b> çš„åæ ‡æ˜¯ <code>(1, 0)</code>ã€æ³¨æ„ï¼šä¸ºäº†æ–¹ä¾¿ï¼Œè¿™é‡Œå°±ç”¨åœ†æ‹¬å·ä»£è¡¨å‘é‡çš„åæ ‡ï¼Œä¸‹åŒã€‘ï¼ŒåŸºå‘é‡ <b>j</b> çš„åæ ‡æ˜¯ <code>(0, 1)</code>ï¼Œå‡è®¾ç»è¿‡äº†æŸäº›å˜æ¢ä¹‹åï¼ŒåŸºå‘é‡ <b>i</b> çš„åæ ‡å˜ä¸º <code>(1ï¼Œ -2)</code>ï¼ŒåŸºå‘é‡ <b>j</b> çš„åæ ‡å˜ä¸º <code>(3ï¼Œ 0)</code>ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformhou.png?imageView/2/w/500\" alt=\"\"></p>\n<p>é‚£ä¹ˆå˜æ¢åçš„å‘é‡ <b>v</b> ä¾ç„¶æ»¡è¶³ <b>v</b> = -1<b>i</b> + 2<b>j</b>ï¼Œå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformhou-plus.png?imageView/2/w/500\" alt=\"\"></p>\n<p>ä»¥ä¸Šä¾‹å­æ‰€æè¿°çš„äº‹å®ï¼Œå®é™…ä¸Šæ˜¯çº¿æ€§å˜æ¢çš„æ€§è´¨çš„æ¨è®ºï¼Œè¯¥æ€§è´¨å¯ä»¥ä»å‡ ä½•è§’åº¦è¡¨è¿°ä¸ºï¼šçº¿æ€§å˜æ¢åçš„ç½‘æ ¼å¹³è¡Œä¸”ç­‰è·ã€‚</p>\n<p>æ—¢ç„¶çº¿æ€§å˜æ¢å‰åéƒ½æ»¡è¶³è¯¥çº¿æ€§å…³ç³»ï¼š<b>v</b> = -1<b>i</b> + 2<b>j</b></p>\n<p>é‚£ä¹ˆå¾ˆå®¹æ˜“æ ¹æ®å˜æ¢å <code>iå¸½</code> å’Œ <code>jå¸½</code> çš„åæ ‡æ¨ç®—å‡ºå˜æ¢å <b>v</b> çš„åæ ‡ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformjisuan.png?imageView/2/w/500\" alt=\"\"></p>\n<p>ä¹Ÿå°±æ˜¯ <code>(5, 2)</code>ï¼Œå³ï¼š<img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformzuobiao2.png?imageView/2/w/50\" alt=\"\"></p>\n<p>é‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥è®¤ä¸ºï¼Œç»™å®šä»»æ„ä¸€ä¸ªå‘é‡ï¼Œå…¶åæ ‡ <code>(x, y)</code>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å˜æ¢åçš„åŸºå‘é‡çš„åæ ‡æ¨æ–­å‡ºè¯¥å‘é‡å˜æ¢åçš„åæ ‡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå‡å¦‚åŸºå‘é‡å˜æ¢åçš„åæ ‡ <code>iå¸½</code> å’Œ <code>jå¸½</code> å¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformbianhuan2.png?imageView/2/w/200\" alt=\"\"></p>\n<p>é‚£ä¹ˆä»»æ„å‘é‡ <code>(x, y)</code> åœ¨ç»è¿‡å˜æ¢åçš„åæ ‡è®¡ç®—å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformzuobiao3.png?imageView/2/w/300\" alt=\"\"></p>\n<p>è¿™å‘Šè¯‰æˆ‘ä»¬å¦å¤–ä¸€ä¸ªäº‹å®ï¼Œ<b>äºŒç»´ç©ºé—´çš„çº¿æ€§å˜æ¢ä»…ç”±å››ä¸ªæ•°å­—å®Œå…¨ç¡®å®š</b>ï¼Œè¿™å››ä¸ªæ•°å­—å°±æ˜¯åŸºå‘é‡ <b>i</b> å˜æ¢å <b>iå¸½</b> çš„åæ ‡ï¼Œä»¥åŠåŸºå‘é‡ <b>j</b> å˜æ¢å <b>jå¸½</b> çš„åæ ‡ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformaaafuck.png?imageView/2/w/500\" alt=\"\"></p>\n<p>æ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿåªéœ€è¦å››ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬å°±ç¡®å®šäº†äºŒç»´ç©ºé—´çš„ä¸€ä¸ªå˜æ¢ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬æŠŠè¿™å››ä¸ªæ•°å­—æ”¾åˆ°ä¸€ä¸ª <code>2 x 2</code> çš„æ ¼å­ä¸­ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <code>2 x 2</code> çŸ©é˜µï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformjuzhen.png?imageView/2/w/500\" alt=\"\"></p>\n<p>ç°åœ¨ï¼Œå½“ä½ å†çœ‹åˆ° <code>2 x 2</code> çŸ©é˜µçš„æ—¶å€™ï¼Œä½ çš„ç¬¬ä¸€å‡ ä½•ç›´è§‚åæ˜ åº”è¯¥æ˜¯ï¼šå®ƒæè¿°äº†ä¸€ä¸ªäºŒç»´ç©ºé—´çš„å˜æ¢ã€‚</p>\n<p>æˆ‘ä»¬æŠŠæƒ…å†µä¸€èˆ¬åŒ–ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformyiban.png?imageView/2/w/500\" alt=\"\"></p>\n<p>æˆ‘ä»¬æœ‰ä¸€ä¸ª <code>2 x 2</code> çš„çŸ©é˜µ <code>[a, c] [b, d]</code>ï¼Œå…¶ä¸­ <code>[a, c]</code> æ˜¯åŸºå‘é‡ <b>i</b> å˜æ¢åçš„åæ ‡ï¼Œ<code>[b, d]</code> æ˜¯åŸºå‘é‡ <b>j</b> å˜æ¢åçš„åæ ‡ï¼Œé‚£ä¹ˆæ ¹æ®è¿™ä¸ªå˜æ¢ï¼Œä»¥åŠçº¿æ€§å˜æ¢çš„æ€§è´¨ï¼Œæˆ‘ä»¬å¯ä»¥æ¨æ–­å‡ºä»»æ„å‘é‡ <code>[x, y]</code> å˜æ¢åçš„åæ ‡ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformyuanyin.png?imageView/2/w/400\" alt=\"\"></p>\n<p class=\"tip\"><br>å®é™…ä¸Šï¼Œè¿™å°±æ˜¯æ•°å­¦å®¶ä¹‹æ‰€ä»¥è¿™æ ·å®šä¹‰ çŸ©é˜µçš„å‘é‡ä¹˜æ³• çš„åŸå› ã€‚<br></p>\n\n<p>åˆ°äº†è¿™é‡Œï¼Œè®©æˆ‘ä»¬æ•´ç†ä¸€ä¸‹æ€è·¯ï¼Œé¦–å…ˆï¼Œå¯¹äºä¸€ä¸ª <code>2 x 2</code> çš„çŸ©é˜µï¼Œä½ çš„ç›´è§‚å‡ ä½•æ„Ÿå—åº”è¯¥æ˜¯ï¼Œç¬¬ä¸€åˆ—çš„ä¸¤ä¸ªæ•°æ˜¯å¯¹åŸºå‘é‡ <b>i</b> çš„å˜æ¢ï¼Œç¬¬äºŒåˆ—çš„ä¸¤ä¸ªæ•°æ˜¯å¯¹åŸºå‘é‡ <b>j</b> çš„å˜æ¢ï¼Œè¿™å››ä¸ªæ•°å­—ç»„æˆçš„ <code>2 x 2</code> çš„çŸ©é˜µï¼Œæè¿°äº†ä¸€ä¸ªå¯¹ç©ºé—´çš„çº¿æ€§å˜æ¢ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ªå˜æ¢æ¨æ–­å‡ºä»»æ„ä¸€ç‚¹(æˆ–è€…ä»»æ„å‘é‡)å˜æ¢åçš„åæ ‡ã€‚</p>\n<p>å…¶å®æˆ‘ä¹ˆä½ è¿˜å¯ä»¥æ¢ä¸€ä¸ªè§’åº¦è€ƒè™‘ï¼Œæˆ‘ä»¬å°±å•çº¯çš„æŠŠ <code>2 x 2</code> çŸ©é˜µå«åšå˜æ¢ï¼Œé‚£ä¹ˆå‘é‡ä¸çŸ©é˜µçš„ä¹˜ç§¯ï¼Œå°±è¦å¯ä»¥çœ‹åšæ˜¯è¯¥å‘é‡åº”ç”¨äº†è¿™ä¸ªå˜æ¢ã€‚å…¶å®ï¼Œè¿™å°±æ˜¯çŸ©é˜µå‘é‡ä¹˜æ³•çš„å‡ ä½•æ„ä¹‰ã€‚</p>\n<h2 id=\"å›åˆ°-CSS-çš„-transform\"><a href=\"#å›åˆ°-CSS-çš„-transform\" class=\"headerlink\" title=\"å›åˆ° CSS çš„ transform\"></a>å›åˆ° CSS çš„ transform</h2><p>è¯´äº†ä¸€å¤§å †ï¼Œæ˜¯æ—¶å€™å›åˆ° <code>CSS</code> çš„ <code>transform</code>ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹2Då˜æ¢ä¸‹ <code>transform</code> å±æ€§çš„ <code>matrix</code> å†™æ³•ï¼š</p>\n<pre><code class=\"css\">transform: matrix(a, b, c, d, e, f);\n</code></pre>\n<p>åœ¨æ–‡ç« å¼€å§‹ï¼Œæˆ‘ä»¬çŸ¥é“å„ä¸ªå‚æ•°é»˜è®¤å€¼å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"css\">transform: matrix(1, 0, 0, 1, 0, 0);\n</code></pre>\n<p>æœ‰çš„åŒå­¦å¯èƒ½ä¼šé—®ï¼šè¯´å¥½çš„ <code>2 x 2</code> çŸ©é˜µä¹Ÿå°±æ˜¯å››ä¸ªæ•°å­—å°±èƒ½ç¡®å®šä¸€ä¸ªäºŒç»´ç©ºé—´å˜æ¢ï¼Œä½ è¿™é‡Œæ˜æ˜æœ‰6ä¸ªæ•°å•Šï¼Œå…¶å®ï¼Œ<code>transform</code> 2Då˜æ¢æ˜¯ä¸€ä¸ª <code>3 * 3</code> çš„çŸ©é˜µï¼Œä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ï¼Ÿå› ä¸ºï¼š<em>ä½ç§»(translate)</em>ï¼Œå‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œçº¿æ€§å˜æ¢è¦æ»¡è¶³å…¶ä¸­ä¸€ä¸ªç‰¹ç‚¹ï¼šåŸç‚¹ä¸èƒ½ç§»åŠ¨ï¼Œä½†æ˜¯ä½ç§»å´ä½¿åŸç‚¹å‘ç”Ÿäº†ç§»åŠ¨ï¼Œæ‰€ä»¥ <code>2 x 2</code> çŸ©é˜µæ»¡è¶³ä¸äº†éœ€æ±‚ï¼Œåªèƒ½å†åŠ ä¸€åˆ—ï¼Œä¹Ÿå°±æ˜¯ <code>3 x 3</code> çš„çŸ©é˜µã€‚</p>\n<p>æŠŠ <code>matrix</code> ä¸­çš„ <code>a b c d e f</code> æ”¾åˆ°ä¸€ä¸ª <code>3 x 3</code> çš„çŸ©é˜µä¸­åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformmr1.png?imageView/2/w/200\" alt=\"\"></p>\n<p>å…¶å®ï¼Œåœ¨æ²¡æœ‰<code>ä½ç§»(translate)</code>çš„æƒ…å†µä¸‹ï¼Œ<code>[a, b] [c, d]</code> å››ä¸ªæ•°å­—ç»„æˆçš„ <code>2 x 2</code> çŸ©é˜µæ˜¯å®Œå…¨å¯ä»¥æè¿°2Då˜æ¢çš„ï¼Œç°åœ¨æˆ‘ä»¬åªçœ‹ç”± <code>[a, b] [c, d]</code> ç»„æˆçš„ <code>2 x 2</code> çŸ©é˜µï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformmr2.png?imageView/2/w/100\" alt=\"\"></p>\n<p>æˆ‘ä»¬æŠŠ <code>a b c d</code> å››ä¸ªæ•°å­—ä½¿ç”¨é»˜è®¤å€¼æ›¿æ¢ä¸€ä¸‹ï¼Œå³ï¼š<code>a = 1</code>ï¼Œ<code>b = 0</code>ï¼Œ<code>c = 0</code>ï¼Œ<code>d = 1</code>ï¼Œå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformmr3.png?imageView/2/w/100\" alt=\"\"></p>\n<p>é€šè¿‡ä¹‹å‰çš„ä»‹ç»ï¼Œæˆ‘ä»¬åœ¨çœ‹åˆ°è¿™ä¸ªçŸ©é˜µçš„æ—¶å€™ï¼Œåº”è¯¥çŸ¥é“ï¼Œç¬¬ä¸€åˆ—çš„åæ ‡ <code>(1, 0)</code> åº”è¯¥æ˜¯åŸºå‘é‡ <b>i</b> å˜æ¢åçš„åæ ‡ï¼Œä½†æ˜¯åŸºå‘é‡ <b>i</b> åœ¨å˜æ¢å‰çš„åæ ‡å°±æ˜¯ <code>(1, 0)</code>ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰ä»»ä½•å˜æ¢ï¼ŒåŒç†ï¼ŒåŸºå‘é‡ <b>j</b> ä¹Ÿæ²¡æœ‰ä»»ä½•å˜æ¢ï¼Œæ‰€ä»¥è¯´ï¼Œè¿™å°±æ˜¯ <code>a b c d</code> é»˜è®¤å€¼è®¾å®šä¸ºä¸‹é¢ä»£ç æ‰€ç¤ºçš„å€¼çš„åŸå› ï¼š</p>\n<pre><code class=\"css\">transform: matrix(a, b, c, d, e, f);\n// a b c d é»˜è®¤å€¼ä¸º 1 0 0 1\ntransform: matrix(1, 0, 0, 1, e, f);\n</code></pre>\n<p>é‚£ä¹ˆå¤§å®¶æƒ³æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬æŠŠ <code>a</code> çš„å€¼ä» <code>1</code> å˜ä¸º <code>2</code> ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¦‚æœæŠŠ <code>a</code> çš„å€¼ä» <code>1</code> å˜ä¸º <code>2</code> é‚£ä¹ˆçŸ©é˜µå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformmr4.png?imageView/2/w/100\" alt=\"\"></p>\n<p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸºå‘é‡ <b>i</b> çš„åæ ‡ä» <code>(1, 0)</code> å˜æˆäº† <code>(2, 0)</code>ï¼Œè¿™æ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯åŸºå‘é‡ <b>i</b> è¢«æ”¾å¤§ä¸ºäº†åŸæ¥çš„äºŒå€ï¼Ÿä¸¾ä¸€ä¸ªé€šä¿—çš„ä¾‹å­ï¼šåŸæœ¬å•ä½é•¿åº¦1ä»£è¡¨20pxï¼Œè¢«æ”¾å¤§åå•ä½é•¿åº¦1åˆ™ä»£è¡¨40pxã€‚åŒæ ·çš„ï¼Œå½“æˆ‘ä»¬æŠŠ <code>a</code> çš„å€¼ä» <code>1</code> å˜ä¸º <code>0.5</code> åˆ™æ„å‘³ç€æŠŠåŸºå‘é‡ <b>i</b> ç¼©å°ä¸ºåŸæ¥çš„ä¸€åŠã€‚äº‹å®ä¸Šï¼šåœ¨ <code>transform: matrix()</code> ä¸­ï¼Œä¿®æ”¹ <code>a</code> çš„å€¼ï¼Œå°±æ˜¯åœ¨æ”¹å˜ <code>x</code> è½´æ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹ï¼š</p>\n<pre><code class=\"css\">transform: matrix(2, 0, 0, 1, 0, 0);\n/* ç­‰ä»·äº */\ntransform: scaleX(2);\n</code></pre>\n<p>ç›¸ä¿¡å¤§å®¶å·²ç»çŸ¥é“äº†ï¼Œä¿®æ”¹ <code>d</code> çš„å€¼ï¼Œå°±æ˜¯æ”¹å˜ <code>y</code> è½´çš„ç¼©æ”¾æ¯”ä¾‹ï¼š</p>\n<pre><code class=\"css\">transform: matrix(1, 0, 0, 4, 0, 0);\n/* ç­‰ä»·äº */\ntransform: scaleY(4);\n</code></pre>\n<p>é‚£ä¹ˆæ—‹è½¬è¦å¦‚ä½•ä¿®æ”¹ <code>matrix</code> ä¸­çš„å€¼å‘¢ï¼Ÿå…¶å®ï¼Œæƒ³è¦çŸ¥é“å¦‚ä½•ä¿®æ”¹ <code>a b c d</code> çš„å€¼ï¼Œåªéœ€è¦çŸ¥é“ï¼Œæ—‹è½¬ååŸºå‘é‡ <b>i</b> å’Œ <b>j</b> çš„åæ ‡å°±å¯ä»¥äº†ï¼Œå°†æ—‹è½¬åçš„åæ ‡å¯¹å·å¡«å…¥å°±å¯ä»¥å¾—åˆ°å˜æ¢çŸ©é˜µï¼Œä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚ä½•ç¡®å®šæ—‹è½¬ååŸºå‘é‡ <b>i</b> å’Œ <b>j</b> çš„åæ ‡ã€‚</p>\n<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ <code>web</code> å¼€å‘ä¸­çš„åæ ‡ç³»å’Œæ•°å­¦ä¸­çš„åæ ‡ç³»åœ¨æ­£æ–¹å‘çš„é€‰å–ä¸Šä¸å¤ªä¸€è‡´ï¼Œåœ¨å¤§å®¶æ‰€ç†Ÿæ‚‰çš„åæ ‡ç³»ä¸­ï¼Œæ­£æ–¹å‘çš„é€‰å–å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformzbx.png?imageView/2/w/100\" alt=\"\"></p>\n<p>è€Œåœ¨ <code>web</code> å¼€å‘ä¸­ï¼Œåæ ‡ç³»çš„æ­£æ–¹å‘é€‰å–æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformzbx2.png?imageView/2/w/100\" alt=\"\"></p>\n<p>å‡è®¾æˆ‘ä»¬å°†å…¶é¡ºæ—¶é’ˆæ—‹è½¬ 45 åº¦ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformtrans.png?imageView/2/w/300\" alt=\"\"></p>\n<p>å‡è®¾ï¼Œä¸Šå›¾ä¸­æˆ‘ä»¬æ—‹è½¬çš„æ˜¯å•ä½å‘é‡ï¼Œé‚£ä¹ˆæ—‹è½¬åå•ä½å‘é‡ <b>i</b> çš„åæ ‡åº”è¯¥æ˜¯ <code>(cosÎ¸, sinÎ¸)</code>ï¼Œå•ä½å‘é‡ <b>j</b> çš„åæ ‡åº”è¯¥æ˜¯ <code>(-sinÎ¸, cosÎ¸)</code>ï¼Œæ‰€ä»¥å¦‚æœç”¨çŸ©é˜µè¡¨ç¤ºçš„è¯ï¼Œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformsanjiao.png?imageView/2/w/200\" alt=\"\"></p>\n<p>å¦‚æœå†™åˆ° <code>matrix</code> é‡Œï¼Œè‡ªç„¶å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p>\n<pre><code class=\"css\">transform: matrix(cosÎ¸, sinÎ¸, -sinÎ¸, cosÎ¸, 0, 0)\n</code></pre>\n<p>æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬è¦é¡ºæ—¶é’ˆæ—‹è½¬ 45 åº¦ï¼Œä¸‹é¢ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼š</p>\n<pre><code class=\"css\">/*\n * Math.cos(Math.PI / 180 * 45) = 0.707106\n * Math.sin(Math.PI / 180 * 45) = 0.707106\n */\ntransform: matrix(0.707106, 0.707106, -0.707106, 0.707106, 0, 0)\n\n/* ç­‰ä»·äº */\ntransform: rotate(45deg);\n</code></pre>\n<p>é€šè¿‡ä¸Šé¢ç¼©æ”¾å’Œæ—‹è½¬çš„ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ï¼Œ<code>2 x 2</code> çš„çŸ©é˜µç¡®å®èƒ½å¤Ÿæè¿°äºŒç»´ç©ºé—´çš„å˜æ¢ï¼Œè¿™ä¹Ÿå°±æ˜¯çŸ©é˜µèƒ½å¤Ÿæ“ä½œç©ºé—´çš„åŸå› ã€‚åœ¨ <code>transform</code> ä¸­ï¼Œé™¤äº†ç¼©æ”¾(<code>scale</code>)ã€æ—‹è½¬(<code>rotate</code>) è¿˜æœ‰å€¾æ–œ(<code>skew</code>)ï¼Œå¯¹äºå€¾æ–œï¼Œç±»ä¼¼äºæˆ‘ä»¬å¯»æ‰¾æ—‹è½¬ååŸºå‘é‡çš„åæ ‡ä¸€æ ·ï¼Œä½ åªéœ€è¦æ ¹æ®å€¾æ–œæ‰€å®šä¹‰çš„å˜æ¢è§„åˆ™ï¼Œæ‰¾åˆ°åŸºå‘é‡å˜æ¢åçš„åæ ‡å°±å¯ä»¥äº†ï¼Œå®é™…ä¸Šå€¾æ–œå¯¹åº”å¦‚ä¸‹è§„åˆ™ï¼š</p>\n<pre><code class=\"css\">transform: matrix(1, tan(Î¸y), tan(Î¸x), 1, 0, 0);\n</code></pre>\n<p>å¤§å®¶è‡ªå·±æ‹¿åªç¬”åœ¨çº¸ä¸Šç”»ä¸€ç”»åº”è¯¥å°±èƒ½ææ¸…æ¥šå€¾æ–œåœ¨åšä»€ä¹ˆæ ·å­çš„å˜æ¢ã€‚</p>\n<p>æ— è®º ç¼©æ”¾(<code>scale</code>)ã€æ—‹è½¬(<code>rotate</code>) è¿˜æ˜¯å€¾æ–œ(<code>skew</code>)ï¼Œä»–ä»¬éƒ½ä¸ä¼šæ˜¯åŸç‚¹å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥ä½¿ç”¨ <code>a b c d</code> å››ä¸ªæ•°å­—ç»„æˆçš„çŸ©é˜µå®Œå…¨å¯ä»¥æè¿°ï¼Œä½†æ˜¯ä¸è¦å¿˜äº†ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ª ä½ç§»(<code>translate</code>)ï¼Œè¿™æ—¶ï¼Œå°±ä¸å¾—ä¸æåˆ° <code>e f</code> äº†ï¼Œæˆ‘æƒ³æˆ‘ä¸è¯´å¤§å®¶ä¹Ÿéƒ½çŸ¥é“äº†ï¼Œ<code>e f</code> åˆ†åˆ«ä»£è¡¨äº† <code>x y</code> æ–¹å‘çš„ä½ç§»ï¼Œäº‹å®ä¹Ÿå¦‚å¤§å®¶æ‰€æƒ³ï¼š</p>\n<pre><code class=\"css\">transform: matrix(1, 0, 0, 1, 100, 200)\n\n/* ç­‰ä»·äº */\ntransform: translateX(100px) translateY(200px);\n</code></pre>\n<p>è‡³æ­¤ï¼Œ<code>transform</code> ä½¿ç”¨ <code>3 x 3</code> çŸ©é˜µï¼š<img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformmr1.png?imageView/2/w/100\" alt=\"\"> æ¥æè¿°äºŒç»´ç©ºé—´å˜æ¢çš„æ–¹å¼ï¼Œä»¥åŠæ˜¯å¦‚ä½•åšåˆ°çš„æˆ‘ä»¬å°±ç®—è®²å®Œäº†ã€‚</p>\n<p>é™¤äº†2Då˜æ¢ï¼Œè¿˜æœ‰3Då˜æ¢ï¼Œåœ¨ <code>transform</code> ä¸­ï¼Œä½¿ç”¨ <code>4 x 4</code> çš„çŸ©é˜µæè¿°3Då˜æ¢ï¼Œä½†å®é™…ä¸Šï¼Œä¸‰ç»´ç©ºé—´çš„çº¿æ€§å˜æ¢åªéœ€è¦ä¸€ä¸ª <code>3 x 3</code> çš„çŸ©é˜µå°±å¯ä»¥æè¿°äº†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæäº†ä¸€ä¸ª <code>4 x 4</code>çŸ©é˜µå‘¢ï¼Ÿå®é™…ä¸Šè¿™å’Œæˆ‘ä»¬åœ¨å°†äºŒç»´ç©ºé—´çš„å˜æ¢ä½¿ç”¨ <code>3 x 3</code> çŸ©é˜µçš„é“ç†æ˜¯ä¸€æ ·çš„ï¼Œé‚£å°±æ˜¯ä½ç§»ã€‚</p>\n<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹3Då˜æ¢çš„ <code>matrix</code> é»˜è®¤å€¼ï¼š</p>\n<pre><code class=\"css\">transform: matrix(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p);\ntransform: matrix(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n</code></pre>\n<p>è¿™åå…­ä¸ªæ•°å­—å°±æ˜¯ <code>4 x 4</code> çŸ©é˜µçš„ 16 ä¸ªæ•°å€¼ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transform3dmr.png?imageView/2/w/200\" alt=\"\"></p>\n<p>å¦‚æœæ¢æˆå¯¹åº”æ•°å­—ï¼Œæ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transform3d.png?imageView/2/w/200\" alt=\"\"></p>\n<p>ç±»ä¼¼äºæˆ‘ä»¬è®²è§£ 2D å˜æ¢ä¸€æ ·ï¼Œå…¶ä¸­ç”± <img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transform3d33.png?imageView/2/w/70\" alt=\"\"> ç»„æˆçš„ <code>3 x 3</code> çŸ©é˜µç”¨æ¥æè¿°ç©ºé—´çš„ 3D çº¿æ€§å˜æ¢ï¼Œå¦‚ï¼š<code>rotateX</code> <code>rotateY</code> <code>scaleZ</code> ç­‰ç­‰ï¼Œæ³¨æ„ï¼š<code>rotateZ</code> æ˜¯ 2D å˜æ¢å“¦ã€‚</p>\n<p>è€Œ <code>m</code> <code>n</code> <code>o</code> åˆ™åˆ†åˆ«ç”¨æ¥æè¿°ä½ç§»ï¼š<code>translateX</code> <code>translateY</code> <code>translateZ</code>ã€‚</p>\n","site":{"data":{}},"excerpt":"<p>å‰ä¸ä¹…å¼€æºäº†ä¸€ä¸ªæ’ä»¶åŒ–ç§»åŠ¨ç«¯è¿åŠ¨æ•ˆæœåº“ <a href=\"https://github.com/HcySunYang/finger-mover\" target=\"_blank\" rel=\"external\">finger-mover</a>ï¼Œè¯´åˆ°è¿åŠ¨æ•ˆæœï¼Œä¸å¾—ä¸æåˆ°CSS3çš„ <code>transform</code>ï¼Œä¹Ÿå°±æ˜¯å˜æ¢ã€‚è¿™ç¯‡æ–‡ç« æ¦‚æ‹¬äº†åœ¨å®ç° <a href=\"https://github.com/HcySunYang/finger-mover\" target=\"_blank\" rel=\"external\">finger-mover</a> æ—¶å¯¹ <code>transform</code> çš„ç†è§£ä¸æ€»ç»“ã€‚</p>\n<p>æ³¨ï¼šæ–‡ä¸­çš„å›¾ç‰‡å¤šæ•°æˆªå–è‡ªè§†é¢‘ï¼š<a href=\"http://www.bilibili.com/video/av6731067/index_1.html#page=1\" target=\"_blank\" rel=\"external\">çº¿æ€§ä»£æ•°çš„æœ¬è´¨</a>ï¼Œä¹Ÿå¼ºçƒˆå»ºè®®å¤§å®¶ç³»ç»Ÿçš„è§‚çœ‹è¿™å¥—è§†é¢‘ã€‚å¦å¤–å¦‚æœæ–‡ä¸­æœ‰è¯¯è¯·ä¸åæŒ‡æ•™ã€‚</p>","more":"<p>æ–‡ç« ç»“æ„å¦‚ä¸‹ï¼š</p>\n<pre><code>* çŸ©é˜µ\n    * æ¦‚è¿°\n* å‘é‡\n    * ä»€ä¹ˆæ˜¯å‘é‡\n    * åŸºå‘é‡\n* çº¿æ€§å˜æ¢\n* å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ\n* å›åˆ° CSS çš„ transform\n</code></pre><p>æˆ‘ä¸çŸ¥é“å¤§å®¶æ‰€ç†è§£çš„çŸ©é˜µæ˜¯æ€æ ·çš„ï¼Œä½†æˆ‘æ‰€ç†è§£çš„çŸ©é˜µæ˜¯ï¼šè¯¥é˜µæ³•å…ç–«æ³•æœ¯æ”»å‡»ä¸”100%åä¼¤å¯¹æ–¹éšæœºä¸€ä¸ªå•ä½ï¼ˆå›åˆåˆ¶æ¸¸æˆï¼‰ã€‚</p>\n<p>ä»¥ä¸Šæè¿°æ˜¯åœ¨å°å­¦æ—¶ä»£çš„ç†è§£ï¼Œç°åœ¨å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œæ…¢æ…¢è¯´â€¦â€¦</p>\n<h2 id=\"çŸ©é˜µ\"><a href=\"#çŸ©é˜µ\" class=\"headerlink\" title=\"çŸ©é˜µ\"></a>çŸ©é˜µ</h2><h4 id=\"æ¦‚è¿°\"><a href=\"#æ¦‚è¿°\" class=\"headerlink\" title=\"æ¦‚è¿°\"></a>æ¦‚è¿°</h4><p>çŸ©é˜µï¼Œæ˜¯çº¿æ€§ä»£æ•°ä¸­æ¶‰åŠçš„å†…å®¹ï¼Œçº¿æ€§ä»£æ•°åœ¨ç§‘å­¦é¢†åŸŸæœ‰å¾ˆå¤šåº”ç”¨çš„åœºæ™¯ï¼Œå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformuse-the-scene.png?imageView/2/w/500\" alt=\"\"></p>\n<p>å¤§éƒ¨åˆ†åŒå­¦åœ¨å¤§å­¦æ—¶æœŸåº”è¯¥éƒ½å­¦è¿‡ä¸€æœ¬å«åšçº¿æ€§ä»£æ•°çš„ä¹¦ï¼Œå¦‚æœæ²¡çŒœé”™çš„è¯ï¼Œä½ ä»¬çš„è€å¸ˆåœ¨æ•™å­¦çš„æ—¶å€™å¤§å¤šéƒ½æ˜¯æ¦‚å¿µæ€§çš„çŒè¾“ï¼Œæ¯”å¦‚çŸ©é˜µä¹˜æ³•å¦‚ä½•è¿ç®—ï¼ŒåŠ æ³•å¦‚ä½•è¿ç®—ï¼Œå¤§å®¶åªè¦è®°ä½å°±okäº†ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†åŒå­¦éƒ½ä¸ç†è§£ï¼Œ<em>ä¸ºä»€ä¹ˆçŸ©é˜µçš„ä¹˜æ³•è¦è¿™æ ·ç®—ï¼ŸçŸ©é˜µä¹˜æ³•çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</em>ï¼Œç‰¹åˆ«æ˜¯æˆ‘ä»¬æè®¡ç®—æœºçš„ï¼Œå¦‚æœæœ‰åšè¿‡ 2D/3D å˜æ¢çš„åŒå­¦ä¸€å®šå¬è¯´è¿‡çŸ©é˜µï¼Œæ¯”å¦‚åœ¨å‰ç«¯çš„CSSä¸­ï¼Œä½¿ç”¨ <code>transform</code> åš 2D/3D çš„å˜æ¢ï¼Œå…¶ä¸­å°±åº”ç”¨åˆ°äº†çŸ©é˜µçš„çŸ¥è¯†ï¼Œè¿™ç¯‡æ–‡ç« å¹¶ä¸æ˜¯ä¸€ç¯‡æ•°å­¦æ€§è´¨çš„æ–‡ç« ï¼Œæ‰€ä»¥å¤§å®¶ä¸è¦çœ‹äº†æ„Ÿè§‰ä¸€é˜µçœ©æ™•ï¼Œè¿™ç¯‡æ–‡ç« çš„ç›®çš„åœ¨äºï¼šä»çŸ©é˜µä¸ç©ºé—´ä¹‹é—´çš„å…³ç³»è®²è¿°ï¼šä¸ºä»€ä¹ˆçŸ©é˜µå¯ä»¥åº”ç”¨åœ¨ç©ºé—´æ“ä½œ(å˜æ¢)ã€‚æˆ–è€…ç”¨ä¸€å¥å¤§ç™½è¯ï¼š<em>è¿™ç©æ„å„¿æ€ä¹ˆå°±èƒ½è®©<code>div</code>ç¿»è¿‡æ¥ï¼Œè½¬è¿‡å»ï¼Œæ‰­çš„ä»–çˆ¹éƒ½ä¸è®¤è¯†ä»–çš„ã€‚</em></p>\n<p>å…ˆçœ‹ä¸€æ®µ css ä»£ç ï¼š</p>\n<pre><code class=\"css\">/* 2D */\ntransform: matrix(1, 0, 0, 1, 0, 0);\n/* 3D */\ntransform: matrix(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n</code></pre>\n<p>ä¸Šé¢ä¸¤è¡Œ css ä»£ç å…¶å®ä»€ä¹ˆå˜æ¢éƒ½ä¸ä¼šåšï¼Œå› ä¸ºé‚£æ˜¯å˜æ¢çš„é»˜è®¤çŠ¶æ€ï¼Œå³æ²¡æœ‰å˜æ¢ã€‚ä½†æ˜¯å…¶ä¸­ä½¿ç”¨åˆ°äº† <code>matrix</code>ï¼Œç¿»è¯‘æˆä¸­æ–‡å«åšï¼šçŸ©é˜µã€‚å¦‚æœæœ‰æ·±å…¥ç ”ç©¶è¿‡ css çš„åŒå­¦å¯¹è¿™ä¸¤è¡Œä»£ç ä¹Ÿè®¸ä¸é™Œç”Ÿï¼Œä½†æ˜¯å¤§å¤šæ•°äººåœ¨ä½¿ç”¨ <code>transform</code> å˜æ¢æ—¶å¾ˆå°‘ç›´æ¥ä½¿ç”¨ <code>matrix</code> çŸ©é˜µï¼Œé™¤éä½ ä¸æƒ³è®©äººçœ‹æ‡‚ä½ åœ¨åšäº›ä»€ä¹ˆé¸Ÿå˜æ¢â€¦ï¼Œæ‰€ä»¥æ›´å¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ç±»ä¼¼å¦‚ä¸‹è¯­æ³•ï¼š</p>\n<pre><code class=\"css\">transform: translateX(100px) rotateZ(30deg);\n</code></pre>\n<p>å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œä¸€ç›®äº†ç„¶ï¼Œè¦åšä»€ä¹ˆå˜æ¢å¤§å®¶ä¸€çœ‹å°±çŸ¥é“äº†ã€‚ä½†å…¶å®ï¼Œè¿™åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå…¶åº•å±‚ä¾ç„¶ä½¿ç”¨çš„æ˜¯ <code>matrix</code>ã€‚</p>\n<p>å¦‚æœæƒ³è¦ç†è§£çŸ©é˜µä¸ºä½•å¯ä»¥åº”ç”¨åˆ° 2D/3D å˜æ¢ï¼Œé‚£ä¹ˆåªä»æ•°å€¼æ°´å¹³çš„è§’åº¦ç†è§£æ˜¯ä¸å¤Ÿçš„ï¼Œä½ éœ€è¦ä»å‡ ä½•çš„è§’åº¦å»ç†è§£çŸ©é˜µï¼Œè¿™å­˜åœ¨ç€æ ¹æœ¬æ€§çš„å·®å¼‚ã€‚è€Œè¿™ï¼Œä¹Ÿå°±æ˜¯æœ¬ç¯‡æ–‡ç« çš„çœŸæ­£æ„ä¹‰ã€‚</p>\n<p>ä¸è¿‡ï¼Œè¿™éœ€è¦æˆ‘ä»¬å…ˆäº†è§£ä¸€äº›å¿…è¦çš„åŸºæœ¬æ¦‚å¿µï¼Œè¿™äº›æ¦‚å¿µè‡³å…³é‡è¦ï¼Œé¦–å…ˆå°±æ˜¯å‘é‡</p>\n<h2 id=\"å‘é‡\"><a href=\"#å‘é‡\" class=\"headerlink\" title=\"å‘é‡\"></a>å‘é‡</h2><h4 id=\"ä»€ä¹ˆæ˜¯å‘é‡\"><a href=\"#ä»€ä¹ˆæ˜¯å‘é‡\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å‘é‡\"></a>ä»€ä¹ˆæ˜¯å‘é‡</h4><p>æ—¢ç„¶çŸ©é˜µæ˜¯çº¿æ€§ä»£æ•°çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆå°±ä¸å¾—ä¸æåˆ° <em>å‘é‡</em>ï¼Œå› ä¸ºå‘é‡æ˜¯çº¿æ€§ä»£æ•°æœ€åŸºç¡€ã€æœ€æ ¹æºçš„ç»„æˆéƒ¨åˆ†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆææ¸…æ¥šï¼Œå‘é‡æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘è¯´è¿‡ï¼Œè¿™ç¯‡æ–‡ç« ä¸ä¼šå¾ˆâ€œæ•°å­¦â€ï¼Œæ‰€ä»¥å¤§å®¶ä¸è¦è¢«å“åˆ°ã€‚ç”¨ä¸€å¥è¯æè¿°å‘é‡æ˜¯ä»€ä¹ˆï¼š</p>\n<blockquote>\n<p>å‘é‡ï¼šç©ºé—´ä¸­çš„ç®­å¤´</p>\n</blockquote>\n<p>è¿™ä¸ªåœ¨å¤§å®¶çš„å°è±¡é‡Œåº”è¯¥å¾ˆå¥½ç†è§£ï¼Œè¿™ä¸ªç®­å¤´ç”±ä¸¤ä¸ªå› ç´ å†³å®šï¼š<code>æ–¹å‘</code> å’Œ <code>é•¿åº¦</code>ï¼Œæˆ‘ä»¬å…ˆæŠŠç›®å…‰å±€é™åœ¨äºŒç»´ç©ºé—´ä¸‹ï¼Œå¦‚å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformarrow.png?imageView/2/w/500\" alt=\"\"></p>\n<p>ä¸Šå›¾ä¸­ï¼Œåœ¨ä¸€ä¸ªåæ ‡ç³»ä¸­ç”»äº†å››ä¸ªä¸åŒé•¿åº¦å’Œæ–¹å‘çš„ç®­å¤´ï¼Œæ¯ä¸ªç®­å¤´ä»åŸç‚¹å‘å‡ºï¼Œä»–ä»¬ä»£è¡¨äº†äºŒç»´ç©ºé—´ä¸­çš„å››ä¸ªå‘é‡ï¼Œåœ¨çº¿æ€§ä»£æ•°ä¸­ï¼Œå‘é‡é€šå¸¸ä»¥åŸç‚¹ä½œä¸ºèµ·ç‚¹ã€‚</p>\n<p>å¦‚æœä½ å·²ç»ç†è§£äº†â€œå‘é‡æ˜¯ç©ºé—´ä¸­çš„ç®­å¤´â€è¿™ç§è§‚ç‚¹ï¼Œä¸‹é¢æˆ‘ä»¬å†è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬é‡æ–°ç”¨ä¸€å¥è¯æ¥æè¿°å‘é‡ï¼š</p>\n<blockquote>\n<p>å‘é‡ï¼šæ˜¯æœ‰åºçš„æ•°å­—åˆ—è¡¨</p>\n</blockquote>\n<p>å‡è®¾å¤§å®¶å¯¹åæ ‡ç³»çš„æ¦‚å¿µéƒ½æœ‰æ‰€äº†è§£ï¼Œæˆ‘ä»¬è¿˜æ˜¯æŠŠç›®å…‰å±€é™åœ¨äºŒç»´ç©ºé—´ï¼Œåœ¨åæ ‡ç³»ä¸­ä»»æ„é€‰å–å•ä½é•¿åº¦ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿä½¿ç”¨ä¸€ä¸ªä¸€ä¸ªçš„åˆ»åº¦æ¥æ ‡åˆ»è¿™ä¸ªåæ ‡ç³»ï¼Œé€‰å–ç‰¹å®šçš„æ–¹å‘ä¸ºx/yè½´çš„æ­£æ–¹å‘ï¼Œé‚£ä¹ˆä¸éš¾çœ‹å‡ºï¼Œæ¯ä¸€ä¸ªå‘é‡ï¼Œéƒ½å¯ä»¥ç”¨å”¯ä¸€çš„ä¸€ä¸ªåæ ‡æ¥è¡¨ç¤ºï¼ŒåŒæ ·çš„ï¼Œåæ ‡ç³»ä¸­çš„æ¯ä¸€ä¸ªåæ ‡éƒ½å¯¹åº”ç€ä¸€ä¸ªå”¯ä¸€çš„ç®­å¤´(å‘é‡)ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformnumber.png?imageView/2/w/500\" alt=\"\"></p>\n<p>åœ¨åæ ‡ç³»ä¸­ï¼Œç”±äºåæ ‡é€šå¸¸ç”¨æ¥æ ‡ç¤ºä¸€ä¸ªç‚¹ï¼Œå¦‚ <code>P(2, 8)</code> è¡¨ç¤ºç‚¹ P çš„åæ ‡ä¸º <code>(2, 8)</code>ï¼Œä¸ºäº†åŒºåˆ†ç‚¹å’Œå‘é‡ï¼Œåœ¨è¡¨ç¤ºå‘é‡æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸æŠŠåæ ‡ç«–ç€å†™ï¼Œç„¶åç”¨ä¸€å¯¹å„¿ä¸­æ‹¬å·æ¥æè¿°ï¼Œå¦‚ä¸Šå›¾ä¸­çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformpoint.png?imageView/2/w/500\" alt=\"\"></p>\n<p>åœ¨ä¸‰ç»´ç©ºé—´ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œå¦‚ä¸‹å›¾ï¼Œæˆ‘å°±ä¸åšé‡å¤çš„è§£é‡Šï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œæ¯ä¸€ä¸ªå‘é‡ç”± x/y/z ä¸‰ä¸ªæ•°å­—ç»„æˆçš„åæ ‡æ¥è¡¨ç¤ºï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transform3.png?imageView/2/w/500\" alt=\"\"></p>\n<p>å¯¹äºå‘é‡ï¼Œä½ åªéœ€è¦çŸ¥é“å®ƒæ˜¯â€œç©ºé—´ä¸­çš„ç®­å¤´â€æˆ–è€…â€œæœ‰åºçš„æ•°å­—åˆ—è¡¨â€è¿™å°±è¶³å¤Ÿäº†ï¼Œæ€ä¹ˆæ ·ï¼Ÿä¸éš¾ç†è§£å§ï¼Œæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ï¼Œåœ¨åæ ‡ç³»ä¸­å­˜åœ¨ä¸€ç§ç‰¹æ®Šçš„å‘é‡ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <em>åŸºå‘é‡</em>ã€‚</p>\n<h4 id=\"åŸºå‘é‡\"><a href=\"#åŸºå‘é‡\" class=\"headerlink\" title=\"åŸºå‘é‡\"></a>åŸºå‘é‡</h4><p>åŸºå‘é‡ï¼Œä¹Ÿå«å•ä½å‘é‡ï¼Œæ˜¯å•ä½é•¿åº¦ä¸º1çš„å‘é‡ï¼Œå¦‚ä¸‹å›¾ä¸­ï¼š<code>iå¸½</code> å’Œ <code>jå¸½</code> å°±æ˜¯è¿™ä¸ªäºŒç»´åæ ‡ç³»çš„åŸºå‘é‡ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformji-xl.png?imageView/2/w/500\" alt=\"\"></p>\n<p>å¯¹äºå‘é‡ï¼Œæˆ‘ä»¬å°±å…ˆä»‹ç»åˆ°è¿™é‡Œï¼Œè¿™å·²ç»è¶³å¤Ÿäº†ã€‚é™¤äº†å‘é‡ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µéœ€è¦å¤§å®¶äº†è§£ï¼Œå³çº¿æ€§å˜æ¢ã€‚</p>\n<h2 id=\"çº¿æ€§å˜æ¢\"><a href=\"#çº¿æ€§å˜æ¢\" class=\"headerlink\" title=\"çº¿æ€§å˜æ¢\"></a>çº¿æ€§å˜æ¢</h2><p>â€œå˜æ¢â€æœ¬è´¨ä¸Šæ˜¯â€œå‡½æ•°â€çš„ä¸€ç§èŠ±å“¨çš„å«æ³•ï¼Œç©ç¼–ç¨‹çš„éƒ½çŸ¥é“å‡½æ•°ï¼Œä¸åœ¨æ•°å­¦ä¸­çš„æ¦‚å¿µç±»ä¼¼ï¼Œå‡½æ•°æ¥æ”¶è¾“å…¥çš„å†…å®¹ï¼Œå¹¶è¾“å‡ºå¯¹åº”çš„ç»“æœï¼Œå¦‚å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformfunction.png?imageView/2/w/500\" alt=\"\"></p>\n<p>å˜æ¢ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œåªä¸è¿‡æ¥æ”¶å‘é‡ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¾“å‡ºå˜æ¢åçš„å‘é‡ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformtransform.png?imageView/2/w/500\" alt=\"\"></p>\n<p>æ—¢ç„¶ â€œå˜æ¢â€ ä¸ â€œå‡½æ•°â€ æœ¬è´¨ç›¸åŒï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå«å˜æ¢è€Œä¸å«å‡½æ•°å‘¢ï¼Ÿè¿™å®é™…ä¸Šå°±æš—ç¤ºäº†æˆ‘ä»¬ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªè¾“å…¥è¾“å‡ºçš„è¿‡ç¨‹ï¼Œçœ‹åšä¸€ä¸ªå‘é‡ä»åˆå§‹çŠ¶æ€åˆ°æœ€ç»ˆçŠ¶æ€çš„ä¸€ä¸ªå˜åŒ–è¿‡ç¨‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transforminput-output.png?imageView/2/w/500\" alt=\"\"></p>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠæƒ…å†µå®è§‚ä¸€ä¸‹ï¼Œç›®å‰åªè®¨è®ºä¸€ä¸ªå‘é‡çš„å˜æ¢ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒäºŒç»´ç©ºé—´çš„ä¸€æ•´ä¸ªå¹³é¢ï¼Œå¯ä»¥çœ‹åšæ˜¯ç”±æ— æ•°ä¸ªå‘é‡ç»„æˆ(æˆ–è€…æ— æ•°ä¸ªç‚¹ç»„æˆï¼Œå› ä¸ºæ¯ä¸€ä¸ªç‚¹å”¯ä¸€æ ‡è¯†ä¸€ä¸ªå‘é‡ï¼Œæ‰€ä»¥è¿™é‡Œè¯´å¹³é¢ç”±æ— æ•°ä¸ªå‘é‡ç»„æˆ)ï¼Œå‡å¦‚è¿™æ— æ•°ä¸ªå‘é‡åŒæ—¶åšç›¸åŒçš„å˜æ¢ï¼Œé‚£å…¶å®å°±å¯ä»¥çœ‹åšæ˜¯å¹³é¢çš„å˜æ¢ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p>å˜æ¢å‰ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformbefore.png?imageView/2/w/500\" alt=\"\"></p>\n<p>å˜æ¢åï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformafter.png?imageView/2/w/500\" alt=\"\"></p>\n<p>ä¸è¿‡ï¼Œå¹¶éæ‰€æœ‰å˜æ¢éƒ½å«åšçº¿æ€§å˜æ¢ï¼Œçº¿æ€§å˜æ¢å¿…é¡»è¦æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ï¼š</p>\n<ul>\n<li>1ã€ç›´çº¿åœ¨å˜æ¢åä»ç„¶ä¸ºç›´çº¿ï¼Œä¸èƒ½æœ‰æ‰€å¼¯æ›²</li>\n<li>2ã€åŸç‚¹ä¸èƒ½ç§»åŠ¨</li>\n</ul>\n<p>å¦‚ä¸‹å˜æ¢ï¼Œå°±ä¸æ˜¯ä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œå› ä¸ºç›´çº¿å˜æˆäº†æ›²çº¿ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformwanqu.png?imageView/2/w/500\" alt=\"\"></p>\n<h2 id=\"å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ\"><a href=\"#å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ\"></a>å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ï¼Ÿ</h2><p>åœ¨ä¸Šä¸€å°èŠ‚ä¸­æˆ‘ä»¬çŸ¥é“ï¼Œç©ºé—´çš„å˜æ¢ä¹Ÿå¯ä»¥è¯´æ˜¯å‘é‡çš„å˜æ¢ï¼Œè€Œå‘é‡åœ¨ç©ºé—´ä¸­ï¼Œå¯ä»¥ç”¨ä¸€ç»„æœ‰åºçš„æ•°å­—åˆ—è¡¨æ¥è¡¨ç¤º(å³å‘é‡çš„åæ ‡)ï¼Œæ‰€ä»¥å‘é‡å˜æ¢å‰åï¼Œå¿…ç„¶ä¼šå¼•èµ·â€œæœ‰åºæ•°å­—åˆ—è¡¨çš„å˜æ¢â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥ç”¨æ•°å­—å»æè¿°å˜æ¢å‘¢ï¼Ÿ</p>\n<p>ä¹‹å‰åœ¨å‘é‡ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬äº†è§£è¿‡<em>åŸºå‘é‡</em>ï¼Œå•ä½é•¿åº¦ä¸º1ï¼Œå…¶å®ç©ºé—´ä¸­çš„ä»»æ„ä¸€ä¸ªå‘é‡æˆ‘ä»¬éƒ½å¯ä»¥çœ‹åšæ˜¯ï¼š<em>åŸºå‘é‡å˜æ¢åçš„å’Œå‘é‡</em>ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformhe.png?imageView/2/w/500\" alt=\"\"></p>\n<p>å‘é‡ <b>v</b> çš„åæ ‡æ˜¯ <img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformzuobiao.png?imageView/2/w/50\" alt=\"\">ï¼Œå¦‚æœæˆ‘ä»¬æŠŠ <code>3</code> å’Œ <code>-2</code> çœ‹åšä¸¤ä¸ªæ ‡é‡ï¼Œä¹Ÿå°±æ˜¯çº¯æ•°å­—ï¼Œé‚£ä¹ˆå‘é‡  <b>v</b> å¯ä»¥çœ‹åšæ˜¯åŸºå‘é‡è¢«æ ‡é‡ç¼©æ”¾åç›¸åŠ å¾—åˆ°çš„å’Œå‘é‡ï¼š <b>v</b> = 3<b>i</b> + (-2<b>j</b>)</p>\n<p>äº†è§£äº†è¿™äº›ï¼Œæˆ‘ä»¬ç°åœ¨å°±é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œæ¥è®¤è¯†ä¸€ä¸ªè‡³å…³é‡è¦çš„äº‹å®ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰å‘é‡ <b>v</b> = -1<b>i</b> + 2<b>j</b>ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformqian.png?imageView/2/w/500\" alt=\"\"></p>\n<p>æ­¤æ—¶ï¼ŒåŸºå‘é‡ <b>i</b> çš„åæ ‡æ˜¯ <code>(1, 0)</code>ã€æ³¨æ„ï¼šä¸ºäº†æ–¹ä¾¿ï¼Œè¿™é‡Œå°±ç”¨åœ†æ‹¬å·ä»£è¡¨å‘é‡çš„åæ ‡ï¼Œä¸‹åŒã€‘ï¼ŒåŸºå‘é‡ <b>j</b> çš„åæ ‡æ˜¯ <code>(0, 1)</code>ï¼Œå‡è®¾ç»è¿‡äº†æŸäº›å˜æ¢ä¹‹åï¼ŒåŸºå‘é‡ <b>i</b> çš„åæ ‡å˜ä¸º <code>(1ï¼Œ -2)</code>ï¼ŒåŸºå‘é‡ <b>j</b> çš„åæ ‡å˜ä¸º <code>(3ï¼Œ 0)</code>ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformhou.png?imageView/2/w/500\" alt=\"\"></p>\n<p>é‚£ä¹ˆå˜æ¢åçš„å‘é‡ <b>v</b> ä¾ç„¶æ»¡è¶³ <b>v</b> = -1<b>i</b> + 2<b>j</b>ï¼Œå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformhou-plus.png?imageView/2/w/500\" alt=\"\"></p>\n<p>ä»¥ä¸Šä¾‹å­æ‰€æè¿°çš„äº‹å®ï¼Œå®é™…ä¸Šæ˜¯çº¿æ€§å˜æ¢çš„æ€§è´¨çš„æ¨è®ºï¼Œè¯¥æ€§è´¨å¯ä»¥ä»å‡ ä½•è§’åº¦è¡¨è¿°ä¸ºï¼šçº¿æ€§å˜æ¢åçš„ç½‘æ ¼å¹³è¡Œä¸”ç­‰è·ã€‚</p>\n<p>æ—¢ç„¶çº¿æ€§å˜æ¢å‰åéƒ½æ»¡è¶³è¯¥çº¿æ€§å…³ç³»ï¼š<b>v</b> = -1<b>i</b> + 2<b>j</b></p>\n<p>é‚£ä¹ˆå¾ˆå®¹æ˜“æ ¹æ®å˜æ¢å <code>iå¸½</code> å’Œ <code>jå¸½</code> çš„åæ ‡æ¨ç®—å‡ºå˜æ¢å <b>v</b> çš„åæ ‡ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformjisuan.png?imageView/2/w/500\" alt=\"\"></p>\n<p>ä¹Ÿå°±æ˜¯ <code>(5, 2)</code>ï¼Œå³ï¼š<img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformzuobiao2.png?imageView/2/w/50\" alt=\"\"></p>\n<p>é‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥è®¤ä¸ºï¼Œç»™å®šä»»æ„ä¸€ä¸ªå‘é‡ï¼Œå…¶åæ ‡ <code>(x, y)</code>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å˜æ¢åçš„åŸºå‘é‡çš„åæ ‡æ¨æ–­å‡ºè¯¥å‘é‡å˜æ¢åçš„åæ ‡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå‡å¦‚åŸºå‘é‡å˜æ¢åçš„åæ ‡ <code>iå¸½</code> å’Œ <code>jå¸½</code> å¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformbianhuan2.png?imageView/2/w/200\" alt=\"\"></p>\n<p>é‚£ä¹ˆä»»æ„å‘é‡ <code>(x, y)</code> åœ¨ç»è¿‡å˜æ¢åçš„åæ ‡è®¡ç®—å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformzuobiao3.png?imageView/2/w/300\" alt=\"\"></p>\n<p>è¿™å‘Šè¯‰æˆ‘ä»¬å¦å¤–ä¸€ä¸ªäº‹å®ï¼Œ<b>äºŒç»´ç©ºé—´çš„çº¿æ€§å˜æ¢ä»…ç”±å››ä¸ªæ•°å­—å®Œå…¨ç¡®å®š</b>ï¼Œè¿™å››ä¸ªæ•°å­—å°±æ˜¯åŸºå‘é‡ <b>i</b> å˜æ¢å <b>iå¸½</b> çš„åæ ‡ï¼Œä»¥åŠåŸºå‘é‡ <b>j</b> å˜æ¢å <b>jå¸½</b> çš„åæ ‡ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformaaafuck.png?imageView/2/w/500\" alt=\"\"></p>\n<p>æ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿåªéœ€è¦å››ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬å°±ç¡®å®šäº†äºŒç»´ç©ºé—´çš„ä¸€ä¸ªå˜æ¢ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬æŠŠè¿™å››ä¸ªæ•°å­—æ”¾åˆ°ä¸€ä¸ª <code>2 x 2</code> çš„æ ¼å­ä¸­ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <code>2 x 2</code> çŸ©é˜µï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformjuzhen.png?imageView/2/w/500\" alt=\"\"></p>\n<p>ç°åœ¨ï¼Œå½“ä½ å†çœ‹åˆ° <code>2 x 2</code> çŸ©é˜µçš„æ—¶å€™ï¼Œä½ çš„ç¬¬ä¸€å‡ ä½•ç›´è§‚åæ˜ åº”è¯¥æ˜¯ï¼šå®ƒæè¿°äº†ä¸€ä¸ªäºŒç»´ç©ºé—´çš„å˜æ¢ã€‚</p>\n<p>æˆ‘ä»¬æŠŠæƒ…å†µä¸€èˆ¬åŒ–ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformyiban.png?imageView/2/w/500\" alt=\"\"></p>\n<p>æˆ‘ä»¬æœ‰ä¸€ä¸ª <code>2 x 2</code> çš„çŸ©é˜µ <code>[a, c] [b, d]</code>ï¼Œå…¶ä¸­ <code>[a, c]</code> æ˜¯åŸºå‘é‡ <b>i</b> å˜æ¢åçš„åæ ‡ï¼Œ<code>[b, d]</code> æ˜¯åŸºå‘é‡ <b>j</b> å˜æ¢åçš„åæ ‡ï¼Œé‚£ä¹ˆæ ¹æ®è¿™ä¸ªå˜æ¢ï¼Œä»¥åŠçº¿æ€§å˜æ¢çš„æ€§è´¨ï¼Œæˆ‘ä»¬å¯ä»¥æ¨æ–­å‡ºä»»æ„å‘é‡ <code>[x, y]</code> å˜æ¢åçš„åæ ‡ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformyuanyin.png?imageView/2/w/400\" alt=\"\"></p>\n<p class=\"tip\"><br>å®é™…ä¸Šï¼Œè¿™å°±æ˜¯æ•°å­¦å®¶ä¹‹æ‰€ä»¥è¿™æ ·å®šä¹‰ çŸ©é˜µçš„å‘é‡ä¹˜æ³• çš„åŸå› ã€‚<br></p>\n\n<p>åˆ°äº†è¿™é‡Œï¼Œè®©æˆ‘ä»¬æ•´ç†ä¸€ä¸‹æ€è·¯ï¼Œé¦–å…ˆï¼Œå¯¹äºä¸€ä¸ª <code>2 x 2</code> çš„çŸ©é˜µï¼Œä½ çš„ç›´è§‚å‡ ä½•æ„Ÿå—åº”è¯¥æ˜¯ï¼Œç¬¬ä¸€åˆ—çš„ä¸¤ä¸ªæ•°æ˜¯å¯¹åŸºå‘é‡ <b>i</b> çš„å˜æ¢ï¼Œç¬¬äºŒåˆ—çš„ä¸¤ä¸ªæ•°æ˜¯å¯¹åŸºå‘é‡ <b>j</b> çš„å˜æ¢ï¼Œè¿™å››ä¸ªæ•°å­—ç»„æˆçš„ <code>2 x 2</code> çš„çŸ©é˜µï¼Œæè¿°äº†ä¸€ä¸ªå¯¹ç©ºé—´çš„çº¿æ€§å˜æ¢ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ªå˜æ¢æ¨æ–­å‡ºä»»æ„ä¸€ç‚¹(æˆ–è€…ä»»æ„å‘é‡)å˜æ¢åçš„åæ ‡ã€‚</p>\n<p>å…¶å®æˆ‘ä¹ˆä½ è¿˜å¯ä»¥æ¢ä¸€ä¸ªè§’åº¦è€ƒè™‘ï¼Œæˆ‘ä»¬å°±å•çº¯çš„æŠŠ <code>2 x 2</code> çŸ©é˜µå«åšå˜æ¢ï¼Œé‚£ä¹ˆå‘é‡ä¸çŸ©é˜µçš„ä¹˜ç§¯ï¼Œå°±è¦å¯ä»¥çœ‹åšæ˜¯è¯¥å‘é‡åº”ç”¨äº†è¿™ä¸ªå˜æ¢ã€‚å…¶å®ï¼Œè¿™å°±æ˜¯çŸ©é˜µå‘é‡ä¹˜æ³•çš„å‡ ä½•æ„ä¹‰ã€‚</p>\n<h2 id=\"å›åˆ°-CSS-çš„-transform\"><a href=\"#å›åˆ°-CSS-çš„-transform\" class=\"headerlink\" title=\"å›åˆ° CSS çš„ transform\"></a>å›åˆ° CSS çš„ transform</h2><p>è¯´äº†ä¸€å¤§å †ï¼Œæ˜¯æ—¶å€™å›åˆ° <code>CSS</code> çš„ <code>transform</code>ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹2Då˜æ¢ä¸‹ <code>transform</code> å±æ€§çš„ <code>matrix</code> å†™æ³•ï¼š</p>\n<pre><code class=\"css\">transform: matrix(a, b, c, d, e, f);\n</code></pre>\n<p>åœ¨æ–‡ç« å¼€å§‹ï¼Œæˆ‘ä»¬çŸ¥é“å„ä¸ªå‚æ•°é»˜è®¤å€¼å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"css\">transform: matrix(1, 0, 0, 1, 0, 0);\n</code></pre>\n<p>æœ‰çš„åŒå­¦å¯èƒ½ä¼šé—®ï¼šè¯´å¥½çš„ <code>2 x 2</code> çŸ©é˜µä¹Ÿå°±æ˜¯å››ä¸ªæ•°å­—å°±èƒ½ç¡®å®šä¸€ä¸ªäºŒç»´ç©ºé—´å˜æ¢ï¼Œä½ è¿™é‡Œæ˜æ˜æœ‰6ä¸ªæ•°å•Šï¼Œå…¶å®ï¼Œ<code>transform</code> 2Då˜æ¢æ˜¯ä¸€ä¸ª <code>3 * 3</code> çš„çŸ©é˜µï¼Œä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ï¼Ÿå› ä¸ºï¼š<em>ä½ç§»(translate)</em>ï¼Œå‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œçº¿æ€§å˜æ¢è¦æ»¡è¶³å…¶ä¸­ä¸€ä¸ªç‰¹ç‚¹ï¼šåŸç‚¹ä¸èƒ½ç§»åŠ¨ï¼Œä½†æ˜¯ä½ç§»å´ä½¿åŸç‚¹å‘ç”Ÿäº†ç§»åŠ¨ï¼Œæ‰€ä»¥ <code>2 x 2</code> çŸ©é˜µæ»¡è¶³ä¸äº†éœ€æ±‚ï¼Œåªèƒ½å†åŠ ä¸€åˆ—ï¼Œä¹Ÿå°±æ˜¯ <code>3 x 3</code> çš„çŸ©é˜µã€‚</p>\n<p>æŠŠ <code>matrix</code> ä¸­çš„ <code>a b c d e f</code> æ”¾åˆ°ä¸€ä¸ª <code>3 x 3</code> çš„çŸ©é˜µä¸­åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformmr1.png?imageView/2/w/200\" alt=\"\"></p>\n<p>å…¶å®ï¼Œåœ¨æ²¡æœ‰<code>ä½ç§»(translate)</code>çš„æƒ…å†µä¸‹ï¼Œ<code>[a, b] [c, d]</code> å››ä¸ªæ•°å­—ç»„æˆçš„ <code>2 x 2</code> çŸ©é˜µæ˜¯å®Œå…¨å¯ä»¥æè¿°2Då˜æ¢çš„ï¼Œç°åœ¨æˆ‘ä»¬åªçœ‹ç”± <code>[a, b] [c, d]</code> ç»„æˆçš„ <code>2 x 2</code> çŸ©é˜µï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformmr2.png?imageView/2/w/100\" alt=\"\"></p>\n<p>æˆ‘ä»¬æŠŠ <code>a b c d</code> å››ä¸ªæ•°å­—ä½¿ç”¨é»˜è®¤å€¼æ›¿æ¢ä¸€ä¸‹ï¼Œå³ï¼š<code>a = 1</code>ï¼Œ<code>b = 0</code>ï¼Œ<code>c = 0</code>ï¼Œ<code>d = 1</code>ï¼Œå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformmr3.png?imageView/2/w/100\" alt=\"\"></p>\n<p>é€šè¿‡ä¹‹å‰çš„ä»‹ç»ï¼Œæˆ‘ä»¬åœ¨çœ‹åˆ°è¿™ä¸ªçŸ©é˜µçš„æ—¶å€™ï¼Œåº”è¯¥çŸ¥é“ï¼Œç¬¬ä¸€åˆ—çš„åæ ‡ <code>(1, 0)</code> åº”è¯¥æ˜¯åŸºå‘é‡ <b>i</b> å˜æ¢åçš„åæ ‡ï¼Œä½†æ˜¯åŸºå‘é‡ <b>i</b> åœ¨å˜æ¢å‰çš„åæ ‡å°±æ˜¯ <code>(1, 0)</code>ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰ä»»ä½•å˜æ¢ï¼ŒåŒç†ï¼ŒåŸºå‘é‡ <b>j</b> ä¹Ÿæ²¡æœ‰ä»»ä½•å˜æ¢ï¼Œæ‰€ä»¥è¯´ï¼Œè¿™å°±æ˜¯ <code>a b c d</code> é»˜è®¤å€¼è®¾å®šä¸ºä¸‹é¢ä»£ç æ‰€ç¤ºçš„å€¼çš„åŸå› ï¼š</p>\n<pre><code class=\"css\">transform: matrix(a, b, c, d, e, f);\n// a b c d é»˜è®¤å€¼ä¸º 1 0 0 1\ntransform: matrix(1, 0, 0, 1, e, f);\n</code></pre>\n<p>é‚£ä¹ˆå¤§å®¶æƒ³æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬æŠŠ <code>a</code> çš„å€¼ä» <code>1</code> å˜ä¸º <code>2</code> ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¦‚æœæŠŠ <code>a</code> çš„å€¼ä» <code>1</code> å˜ä¸º <code>2</code> é‚£ä¹ˆçŸ©é˜µå¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformmr4.png?imageView/2/w/100\" alt=\"\"></p>\n<p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸºå‘é‡ <b>i</b> çš„åæ ‡ä» <code>(1, 0)</code> å˜æˆäº† <code>(2, 0)</code>ï¼Œè¿™æ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯åŸºå‘é‡ <b>i</b> è¢«æ”¾å¤§ä¸ºäº†åŸæ¥çš„äºŒå€ï¼Ÿä¸¾ä¸€ä¸ªé€šä¿—çš„ä¾‹å­ï¼šåŸæœ¬å•ä½é•¿åº¦1ä»£è¡¨20pxï¼Œè¢«æ”¾å¤§åå•ä½é•¿åº¦1åˆ™ä»£è¡¨40pxã€‚åŒæ ·çš„ï¼Œå½“æˆ‘ä»¬æŠŠ <code>a</code> çš„å€¼ä» <code>1</code> å˜ä¸º <code>0.5</code> åˆ™æ„å‘³ç€æŠŠåŸºå‘é‡ <b>i</b> ç¼©å°ä¸ºåŸæ¥çš„ä¸€åŠã€‚äº‹å®ä¸Šï¼šåœ¨ <code>transform: matrix()</code> ä¸­ï¼Œä¿®æ”¹ <code>a</code> çš„å€¼ï¼Œå°±æ˜¯åœ¨æ”¹å˜ <code>x</code> è½´æ–¹å‘çš„ç¼©æ”¾æ¯”ä¾‹ï¼š</p>\n<pre><code class=\"css\">transform: matrix(2, 0, 0, 1, 0, 0);\n/* ç­‰ä»·äº */\ntransform: scaleX(2);\n</code></pre>\n<p>ç›¸ä¿¡å¤§å®¶å·²ç»çŸ¥é“äº†ï¼Œä¿®æ”¹ <code>d</code> çš„å€¼ï¼Œå°±æ˜¯æ”¹å˜ <code>y</code> è½´çš„ç¼©æ”¾æ¯”ä¾‹ï¼š</p>\n<pre><code class=\"css\">transform: matrix(1, 0, 0, 4, 0, 0);\n/* ç­‰ä»·äº */\ntransform: scaleY(4);\n</code></pre>\n<p>é‚£ä¹ˆæ—‹è½¬è¦å¦‚ä½•ä¿®æ”¹ <code>matrix</code> ä¸­çš„å€¼å‘¢ï¼Ÿå…¶å®ï¼Œæƒ³è¦çŸ¥é“å¦‚ä½•ä¿®æ”¹ <code>a b c d</code> çš„å€¼ï¼Œåªéœ€è¦çŸ¥é“ï¼Œæ—‹è½¬ååŸºå‘é‡ <b>i</b> å’Œ <b>j</b> çš„åæ ‡å°±å¯ä»¥äº†ï¼Œå°†æ—‹è½¬åçš„åæ ‡å¯¹å·å¡«å…¥å°±å¯ä»¥å¾—åˆ°å˜æ¢çŸ©é˜µï¼Œä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚ä½•ç¡®å®šæ—‹è½¬ååŸºå‘é‡ <b>i</b> å’Œ <b>j</b> çš„åæ ‡ã€‚</p>\n<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ <code>web</code> å¼€å‘ä¸­çš„åæ ‡ç³»å’Œæ•°å­¦ä¸­çš„åæ ‡ç³»åœ¨æ­£æ–¹å‘çš„é€‰å–ä¸Šä¸å¤ªä¸€è‡´ï¼Œåœ¨å¤§å®¶æ‰€ç†Ÿæ‚‰çš„åæ ‡ç³»ä¸­ï¼Œæ­£æ–¹å‘çš„é€‰å–å¦‚ä¸‹ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformzbx.png?imageView/2/w/100\" alt=\"\"></p>\n<p>è€Œåœ¨ <code>web</code> å¼€å‘ä¸­ï¼Œåæ ‡ç³»çš„æ­£æ–¹å‘é€‰å–æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformzbx2.png?imageView/2/w/100\" alt=\"\"></p>\n<p>å‡è®¾æˆ‘ä»¬å°†å…¶é¡ºæ—¶é’ˆæ—‹è½¬ 45 åº¦ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformtrans.png?imageView/2/w/300\" alt=\"\"></p>\n<p>å‡è®¾ï¼Œä¸Šå›¾ä¸­æˆ‘ä»¬æ—‹è½¬çš„æ˜¯å•ä½å‘é‡ï¼Œé‚£ä¹ˆæ—‹è½¬åå•ä½å‘é‡ <b>i</b> çš„åæ ‡åº”è¯¥æ˜¯ <code>(cosÎ¸, sinÎ¸)</code>ï¼Œå•ä½å‘é‡ <b>j</b> çš„åæ ‡åº”è¯¥æ˜¯ <code>(-sinÎ¸, cosÎ¸)</code>ï¼Œæ‰€ä»¥å¦‚æœç”¨çŸ©é˜µè¡¨ç¤ºçš„è¯ï¼Œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformsanjiao.png?imageView/2/w/200\" alt=\"\"></p>\n<p>å¦‚æœå†™åˆ° <code>matrix</code> é‡Œï¼Œè‡ªç„¶å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p>\n<pre><code class=\"css\">transform: matrix(cosÎ¸, sinÎ¸, -sinÎ¸, cosÎ¸, 0, 0)\n</code></pre>\n<p>æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬è¦é¡ºæ—¶é’ˆæ—‹è½¬ 45 åº¦ï¼Œä¸‹é¢ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼š</p>\n<pre><code class=\"css\">/*\n * Math.cos(Math.PI / 180 * 45) = 0.707106\n * Math.sin(Math.PI / 180 * 45) = 0.707106\n */\ntransform: matrix(0.707106, 0.707106, -0.707106, 0.707106, 0, 0)\n\n/* ç­‰ä»·äº */\ntransform: rotate(45deg);\n</code></pre>\n<p>é€šè¿‡ä¸Šé¢ç¼©æ”¾å’Œæ—‹è½¬çš„ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ï¼Œ<code>2 x 2</code> çš„çŸ©é˜µç¡®å®èƒ½å¤Ÿæè¿°äºŒç»´ç©ºé—´çš„å˜æ¢ï¼Œè¿™ä¹Ÿå°±æ˜¯çŸ©é˜µèƒ½å¤Ÿæ“ä½œç©ºé—´çš„åŸå› ã€‚åœ¨ <code>transform</code> ä¸­ï¼Œé™¤äº†ç¼©æ”¾(<code>scale</code>)ã€æ—‹è½¬(<code>rotate</code>) è¿˜æœ‰å€¾æ–œ(<code>skew</code>)ï¼Œå¯¹äºå€¾æ–œï¼Œç±»ä¼¼äºæˆ‘ä»¬å¯»æ‰¾æ—‹è½¬ååŸºå‘é‡çš„åæ ‡ä¸€æ ·ï¼Œä½ åªéœ€è¦æ ¹æ®å€¾æ–œæ‰€å®šä¹‰çš„å˜æ¢è§„åˆ™ï¼Œæ‰¾åˆ°åŸºå‘é‡å˜æ¢åçš„åæ ‡å°±å¯ä»¥äº†ï¼Œå®é™…ä¸Šå€¾æ–œå¯¹åº”å¦‚ä¸‹è§„åˆ™ï¼š</p>\n<pre><code class=\"css\">transform: matrix(1, tan(Î¸y), tan(Î¸x), 1, 0, 0);\n</code></pre>\n<p>å¤§å®¶è‡ªå·±æ‹¿åªç¬”åœ¨çº¸ä¸Šç”»ä¸€ç”»åº”è¯¥å°±èƒ½ææ¸…æ¥šå€¾æ–œåœ¨åšä»€ä¹ˆæ ·å­çš„å˜æ¢ã€‚</p>\n<p>æ— è®º ç¼©æ”¾(<code>scale</code>)ã€æ—‹è½¬(<code>rotate</code>) è¿˜æ˜¯å€¾æ–œ(<code>skew</code>)ï¼Œä»–ä»¬éƒ½ä¸ä¼šæ˜¯åŸç‚¹å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥ä½¿ç”¨ <code>a b c d</code> å››ä¸ªæ•°å­—ç»„æˆçš„çŸ©é˜µå®Œå…¨å¯ä»¥æè¿°ï¼Œä½†æ˜¯ä¸è¦å¿˜äº†ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ª ä½ç§»(<code>translate</code>)ï¼Œè¿™æ—¶ï¼Œå°±ä¸å¾—ä¸æåˆ° <code>e f</code> äº†ï¼Œæˆ‘æƒ³æˆ‘ä¸è¯´å¤§å®¶ä¹Ÿéƒ½çŸ¥é“äº†ï¼Œ<code>e f</code> åˆ†åˆ«ä»£è¡¨äº† <code>x y</code> æ–¹å‘çš„ä½ç§»ï¼Œäº‹å®ä¹Ÿå¦‚å¤§å®¶æ‰€æƒ³ï¼š</p>\n<pre><code class=\"css\">transform: matrix(1, 0, 0, 1, 100, 200)\n\n/* ç­‰ä»·äº */\ntransform: translateX(100px) translateY(200px);\n</code></pre>\n<p>è‡³æ­¤ï¼Œ<code>transform</code> ä½¿ç”¨ <code>3 x 3</code> çŸ©é˜µï¼š<img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transformmr1.png?imageView/2/w/100\" alt=\"\"> æ¥æè¿°äºŒç»´ç©ºé—´å˜æ¢çš„æ–¹å¼ï¼Œä»¥åŠæ˜¯å¦‚ä½•åšåˆ°çš„æˆ‘ä»¬å°±ç®—è®²å®Œäº†ã€‚</p>\n<p>é™¤äº†2Då˜æ¢ï¼Œè¿˜æœ‰3Då˜æ¢ï¼Œåœ¨ <code>transform</code> ä¸­ï¼Œä½¿ç”¨ <code>4 x 4</code> çš„çŸ©é˜µæè¿°3Då˜æ¢ï¼Œä½†å®é™…ä¸Šï¼Œä¸‰ç»´ç©ºé—´çš„çº¿æ€§å˜æ¢åªéœ€è¦ä¸€ä¸ª <code>3 x 3</code> çš„çŸ©é˜µå°±å¯ä»¥æè¿°äº†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæäº†ä¸€ä¸ª <code>4 x 4</code>çŸ©é˜µå‘¢ï¼Ÿå®é™…ä¸Šè¿™å’Œæˆ‘ä»¬åœ¨å°†äºŒç»´ç©ºé—´çš„å˜æ¢ä½¿ç”¨ <code>3 x 3</code> çŸ©é˜µçš„é“ç†æ˜¯ä¸€æ ·çš„ï¼Œé‚£å°±æ˜¯ä½ç§»ã€‚</p>\n<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹3Då˜æ¢çš„ <code>matrix</code> é»˜è®¤å€¼ï¼š</p>\n<pre><code class=\"css\">transform: matrix(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p);\ntransform: matrix(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n</code></pre>\n<p>è¿™åå…­ä¸ªæ•°å­—å°±æ˜¯ <code>4 x 4</code> çŸ©é˜µçš„ 16 ä¸ªæ•°å€¼ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transform3dmr.png?imageView/2/w/200\" alt=\"\"></p>\n<p>å¦‚æœæ¢æˆå¯¹åº”æ•°å­—ï¼Œæ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transform3d.png?imageView/2/w/200\" alt=\"\"></p>\n<p>ç±»ä¼¼äºæˆ‘ä»¬è®²è§£ 2D å˜æ¢ä¸€æ ·ï¼Œå…¶ä¸­ç”± <img src=\"http://7xlolm.com1.z0.glb.clouddn.com/transform3d33.png?imageView/2/w/70\" alt=\"\"> ç»„æˆçš„ <code>3 x 3</code> çŸ©é˜µç”¨æ¥æè¿°ç©ºé—´çš„ 3D çº¿æ€§å˜æ¢ï¼Œå¦‚ï¼š<code>rotateX</code> <code>rotateY</code> <code>scaleZ</code> ç­‰ç­‰ï¼Œæ³¨æ„ï¼š<code>rotateZ</code> æ˜¯ 2D å˜æ¢å“¦ã€‚</p>\n<p>è€Œ <code>m</code> <code>n</code> <code>o</code> åˆ™åˆ†åˆ«ç”¨æ¥æè¿°ä½ç§»ï¼š<code>translateX</code> <code>translateY</code> <code>translateZ</code>ã€‚</p>"}],"PostAsset":[],"PostCategory":[{"post_id":"cj67vx518000747fy1m84zilu","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx51c000c47fym8kuj2x7"},{"post_id":"cj67vx50x000247fyot7dds7a","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx51f000g47fyw8c1rh0u"},{"post_id":"cj67vx519000847fymovopxni","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx51i000j47fy8xad1oyd"},{"post_id":"cj67vx51b000b47fypucmfk0n","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx51j000n47fyq9si6f97"},{"post_id":"cj67vx511000347fygxh8hc8j","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx51l000p47fyo5ne7ry6"},{"post_id":"cj67vx51c000d47fy58fg3um5","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx51q000r47fy57xk613i"},{"post_id":"cj67vx51g000h47fys20ks4l9","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx51v000u47fylfruk50y"},{"post_id":"cj67vx517000647fywcfei7bb","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx51w000w47fywim9ns2e"},{"post_id":"cj67vx51i000k47fyw2lra49p","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx51x000z47fy6xik7rlb"},{"post_id":"cj67vx51j000o47fytfe47noy","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx51z001247fyu8yt7b98"},{"post_id":"cj67vx51l000q47fy210itng8","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx520001647fyf0nn3yit"},{"post_id":"cj67vx51s000t47fysjiu5lcx","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx521001947fyxp1zrd3w"},{"post_id":"cj67vx51v000v47fyzswlx4qs","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx522001c47fytjf6itb7"},{"post_id":"cj67vx51w000x47fy6ff58evv","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx523001d47fywxpba3xh"},{"post_id":"cj67vx51y001147fyuvl8nzcz","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx524001f47fyfr1ekhn6"},{"post_id":"cj67vx51z001447fy99ud5mtr","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx527001h47fymjj1s0rg"},{"post_id":"cj67vx521001847fyy3f49pii","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx527001k47fybdyg7imi"},{"post_id":"cj67vx521001a47fyy5kq82vt","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx527001m47fylpmp09kp"},{"post_id":"cj67vx531004447fymw65xbw5","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx533004747fy124372h3"},{"post_id":"cj67vx532004547fyb5ir2ntq","category_id":"cj67vx513000447fygck4lz4z","_id":"cj67vx534004847fyi1a1khjr"}],"PostTag":[{"post_id":"cj67vx50x000247fyot7dds7a","tag_id":"cj67vx517000547fylcjv9ue2","_id":"cj67vx51h000i47fy4a5rxpul"},{"post_id":"cj67vx50x000247fyot7dds7a","tag_id":"cj67vx519000a47fylvlp4n8y","_id":"cj67vx51i000l47fyofest01y"},{"post_id":"cj67vx511000347fygxh8hc8j","tag_id":"cj67vx51e000f47fy585ve1oy","_id":"cj67vx51y001047fyi3iyogu0"},{"post_id":"cj67vx511000347fygxh8hc8j","tag_id":"cj67vx51i000m47fyg27g3hd1","_id":"cj67vx51z001347fyb28n8b4f"},{"post_id":"cj67vx511000347fygxh8hc8j","tag_id":"cj67vx51s000s47fybrjs8gb8","_id":"cj67vx520001747fy5k9550hg"},{"post_id":"cj67vx517000647fywcfei7bb","tag_id":"cj67vx51i000m47fyg27g3hd1","_id":"cj67vx524001g47fy9rkxjvn8"},{"post_id":"cj67vx517000647fywcfei7bb","tag_id":"cj67vx51e000f47fy585ve1oy","_id":"cj67vx527001i47fyzk1enj8f"},{"post_id":"cj67vx517000647fywcfei7bb","tag_id":"cj67vx51s000s47fybrjs8gb8","_id":"cj67vx527001l47fyvw01l7qt"},{"post_id":"cj67vx518000747fy1m84zilu","tag_id":"cj67vx51i000m47fyg27g3hd1","_id":"cj67vx528001p47fyca5l8fcm"},{"post_id":"cj67vx518000747fy1m84zilu","tag_id":"cj67vx51e000f47fy585ve1oy","_id":"cj67vx528001q47fyg6q8jimn"},{"post_id":"cj67vx518000747fy1m84zilu","tag_id":"cj67vx51s000s47fybrjs8gb8","_id":"cj67vx529001s47fyea27g1q8"},{"post_id":"cj67vx519000847fymovopxni","tag_id":"cj67vx528001o47fyyh40vii5","_id":"cj67vx52c001y47fy96smrd8s"},{"post_id":"cj67vx519000847fymovopxni","tag_id":"cj67vx528001r47fyidivtz2v","_id":"cj67vx52c001z47fyelelfl0s"},{"post_id":"cj67vx519000847fymovopxni","tag_id":"cj67vx52a001t47fyvqx5z9sb","_id":"cj67vx52d002147fyimp0gju2"},{"post_id":"cj67vx519000847fymovopxni","tag_id":"cj67vx52a001u47fyxmw3nnb8","_id":"cj67vx52d002247fyyv8ud3lf"},{"post_id":"cj67vx519000847fymovopxni","tag_id":"cj67vx52b001v47fyd4c2lfw1","_id":"cj67vx52d002447fyw9sdq6o4"},{"post_id":"cj67vx519000847fymovopxni","tag_id":"cj67vx52b001w47fyt5zusi8e","_id":"cj67vx52d002547fyhz3q0jpe"},{"post_id":"cj67vx51b000b47fypucmfk0n","tag_id":"cj67vx528001o47fyyh40vii5","_id":"cj67vx52f002a47fyu80j2zd9"},{"post_id":"cj67vx51b000b47fypucmfk0n","tag_id":"cj67vx528001r47fyidivtz2v","_id":"cj67vx52f002b47fy8h8phyro"},{"post_id":"cj67vx51b000b47fypucmfk0n","tag_id":"cj67vx52a001t47fyvqx5z9sb","_id":"cj67vx52g002d47fy362kbp6m"},{"post_id":"cj67vx51b000b47fypucmfk0n","tag_id":"cj67vx52a001u47fyxmw3nnb8","_id":"cj67vx52g002e47fy61gflrf9"},{"post_id":"cj67vx51b000b47fypucmfk0n","tag_id":"cj67vx52b001v47fyd4c2lfw1","_id":"cj67vx52i002g47fyj5x6xq7v"},{"post_id":"cj67vx51b000b47fypucmfk0n","tag_id":"cj67vx52b001w47fyt5zusi8e","_id":"cj67vx52i002h47fylzl9oftn"},{"post_id":"cj67vx51c000d47fy58fg3um5","tag_id":"cj67vx51e000f47fy585ve1oy","_id":"cj67vx52i002j47fybfvzy3c5"},{"post_id":"cj67vx51c000d47fy58fg3um5","tag_id":"cj67vx528001o47fyyh40vii5","_id":"cj67vx52i002k47fysqjci8u5"},{"post_id":"cj67vx51g000h47fys20ks4l9","tag_id":"cj67vx52g002f47fyu3n4qs55","_id":"cj67vx52j002n47fygpnstvps"},{"post_id":"cj67vx51g000h47fys20ks4l9","tag_id":"cj67vx52i002i47fygzhpfi6u","_id":"cj67vx52j002o47fybcvdaxwd"},{"post_id":"cj67vx51g000h47fys20ks4l9","tag_id":"cj67vx52i002l47fyh7u62uk2","_id":"cj67vx52j002q47fyxt51npro"},{"post_id":"cj67vx51i000k47fyw2lra49p","tag_id":"cj67vx52g002f47fyu3n4qs55","_id":"cj67vx52k002r47fy7gzo3ynh"},{"post_id":"cj67vx51i000k47fyw2lra49p","tag_id":"cj67vx519000a47fylvlp4n8y","_id":"cj67vx52k002t47fyspzveifa"},{"post_id":"cj67vx51j000o47fytfe47noy","tag_id":"cj67vx52j002p47fyq1srl5rd","_id":"cj67vx52l002v47fyrqko83ht"},{"post_id":"cj67vx51j000o47fytfe47noy","tag_id":"cj67vx52k002s47fyi1knck98","_id":"cj67vx52l002w47fyxk76okck"},{"post_id":"cj67vx51j000o47fytfe47noy","tag_id":"cj67vx519000a47fylvlp4n8y","_id":"cj67vx52m002y47fyj5bullxc"},{"post_id":"cj67vx51l000q47fy210itng8","tag_id":"cj67vx52a001t47fyvqx5z9sb","_id":"cj67vx52n003147fy1pgwn26q"},{"post_id":"cj67vx51l000q47fy210itng8","tag_id":"cj67vx519000a47fylvlp4n8y","_id":"cj67vx52n003247fy9lws2k3w"},{"post_id":"cj67vx51l000q47fy210itng8","tag_id":"cj67vx528001r47fyidivtz2v","_id":"cj67vx52n003447fykv56823x"},{"post_id":"cj67vx51l000q47fy210itng8","tag_id":"cj67vx52m002z47fyu9v1cqsx","_id":"cj67vx52n003547fyw2pske3o"},{"post_id":"cj67vx51s000t47fysjiu5lcx","tag_id":"cj67vx52j002p47fyq1srl5rd","_id":"cj67vx52o003847fy5cm6f1ee"},{"post_id":"cj67vx51s000t47fysjiu5lcx","tag_id":"cj67vx52n003347fyh3puckqj","_id":"cj67vx52o003947fyiuusmpa3"},{"post_id":"cj67vx51s000t47fysjiu5lcx","tag_id":"cj67vx52n003647fyadmm5cg0","_id":"cj67vx52o003b47fyn5wj299z"},{"post_id":"cj67vx51v000v47fyzswlx4qs","tag_id":"cj67vx52n003747fycyn8c7oc","_id":"cj67vx52p003e47fy8gxlp4as"},{"post_id":"cj67vx51v000v47fyzswlx4qs","tag_id":"cj67vx52o003a47fyqs4y4cys","_id":"cj67vx52p003f47fyjd2zab1l"},{"post_id":"cj67vx51v000v47fyzswlx4qs","tag_id":"cj67vx52o003c47fy2m5k7ci0","_id":"cj67vx52p003h47fyyavk1h78"},{"post_id":"cj67vx51w000x47fy6ff58evv","tag_id":"cj67vx52p003d47fycdz92bka","_id":"cj67vx52q003j47fy0x77lmfd"},{"post_id":"cj67vx51w000x47fy6ff58evv","tag_id":"cj67vx52p003g47fyyd1zktq7","_id":"cj67vx52q003k47fyhmq6izef"},{"post_id":"cj67vx51y001147fyuvl8nzcz","tag_id":"cj67vx52q003i47fyyydfiqi8","_id":"cj67vx52u003o47fybdkbjmii"},{"post_id":"cj67vx51y001147fyuvl8nzcz","tag_id":"cj67vx52q003l47fy3uec82ec","_id":"cj67vx52u003p47fys9ajdimx"},{"post_id":"cj67vx51y001147fyuvl8nzcz","tag_id":"cj67vx52q003m47fyvntbw72s","_id":"cj67vx52u003r47fy6u3vj136"},{"post_id":"cj67vx51z001447fy99ud5mtr","tag_id":"cj67vx52t003n47fyere6otfw","_id":"cj67vx52v003s47fyute0bqhg"},{"post_id":"cj67vx521001847fyy3f49pii","tag_id":"cj67vx52q003i47fyyydfiqi8","_id":"cj67vx52x003x47fylv8iuwfr"},{"post_id":"cj67vx521001847fyy3f49pii","tag_id":"cj67vx52v003t47fy60djlodc","_id":"cj67vx52x003y47fy5uz2slyf"},{"post_id":"cj67vx521001847fyy3f49pii","tag_id":"cj67vx52w003u47fyqmml2kzd","_id":"cj67vx52x004047fy4s5zp0e2"},{"post_id":"cj67vx521001847fyy3f49pii","tag_id":"cj67vx52w003v47fyjd6u742a","_id":"cj67vx52x004147fy7jztf8m0"},{"post_id":"cj67vx521001a47fyy5kq82vt","tag_id":"cj67vx52w003w47fyo4edzogv","_id":"cj67vx52y004247fycpvhxbb4"},{"post_id":"cj67vx521001a47fyy5kq82vt","tag_id":"cj67vx52x003z47fykzdeynsy","_id":"cj67vx52y004347fyb0jhzqed"},{"post_id":"cj67vx531004447fymw65xbw5","tag_id":"cj67vx533004647fykyfjh43w","_id":"cj67vx534004b47fyf7d41tml"},{"post_id":"cj67vx531004447fymw65xbw5","tag_id":"cj67vx534004947fydxduz32m","_id":"cj67vx534004c47fyzalw38zi"},{"post_id":"cj67vx532004547fyb5ir2ntq","tag_id":"cj67vx534004a47fyh5z1lwlc","_id":"cj67vx535004f47fyoypwd10d"},{"post_id":"cj67vx532004547fyb5ir2ntq","tag_id":"cj67vx534004d47fyukxcbe1r","_id":"cj67vx535004g47fylsgbuiym"},{"post_id":"cj67vx532004547fyb5ir2ntq","tag_id":"cj67vx534004e47fyf5zebmvc","_id":"cj67vx535004h47fyiyl23wm0"}],"Tag":[{"name":"express","_id":"cj67vx517000547fylcjv9ue2"},{"name":"nodejs","_id":"cj67vx519000a47fylvlp4n8y"},{"name":"html","_id":"cj67vx51e000f47fy585ve1oy"},{"name":"css","_id":"cj67vx51i000m47fyg27g3hd1"},{"name":"ç§»åŠ¨é¡µé¢","_id":"cj67vx51s000s47fybrjs8gb8"},{"name":"js","_id":"cj67vx528001o47fyyh40vii5"},{"name":"è‡ªåŠ¨åŒ–","_id":"cj67vx528001r47fyidivtz2v"},{"name":"gulp","_id":"cj67vx52a001t47fyvqx5z9sb"},{"name":"requirejs","_id":"cj67vx52a001u47fyxmw3nnb8"},{"name":"rjs","_id":"cj67vx52b001v47fyd4c2lfw1"},{"name":"æ„å»º","_id":"cj67vx52b001w47fyt5zusi8e"},{"name":"mongodb","_id":"cj67vx52g002f47fyu3n4qs55"},{"name":"æ•°æ®åº“","_id":"cj67vx52i002i47fygzhpfi6u"},{"name":"brew","_id":"cj67vx52i002l47fyh7u62uk2"},{"name":"Ubuntu","_id":"cj67vx52j002p47fyq1srl5rd"},{"name":"git","_id":"cj67vx52k002s47fyi1knck98"},{"name":"æ’ä»¶","_id":"cj67vx52m002z47fyu9v1cqsx"},{"name":"python","_id":"cj67vx52n003347fyh3puckqj"},{"name":"pycurl","_id":"cj67vx52n003647fyadmm5cg0"},{"name":"node","_id":"cj67vx52n003747fycyn8c7oc"},{"name":"npm","_id":"cj67vx52o003a47fyqs4y4cys"},{"name":"å‘½ä»¤è¡Œå·¥å…·","_id":"cj67vx52o003c47fy2m5k7ci0"},{"name":"è®¾è®¡æ¨¡å¼","_id":"cj67vx52p003d47fycdz92bka"},{"name":"è¡¨å•éªŒè¯","_id":"cj67vx52p003g47fyyd1zktq7"},{"name":"æ¡†æ¶","_id":"cj67vx52q003i47fyyydfiqi8"},{"name":"MVVM","_id":"cj67vx52q003l47fy3uec82ec"},{"name":"observe","_id":"cj67vx52q003m47fyvntbw72s"},{"name":"Worker","_id":"cj67vx52t003n47fyere6otfw"},{"name":"æ¶æ„","_id":"cj67vx52v003t47fy60djlodc"},{"name":"vue","_id":"cj67vx52w003u47fyqmml2kzd"},{"name":"webpack","_id":"cj67vx52w003v47fyjd6u742a"},{"name":"debug","_id":"cj67vx52w003w47fyo4edzogv"},{"name":"ç§»åŠ¨è°ƒè¯•","_id":"cj67vx52x003z47fykzdeynsy"},{"name":"æºç ","_id":"cj67vx533004647fykyfjh43w"},{"name":"Vue","_id":"cj67vx534004947fydxduz32m"},{"name":"finger-mover","_id":"cj67vx534004a47fyh5z1lwlc"},{"name":"css3","_id":"cj67vx534004d47fyukxcbe1r"},{"name":"transform","_id":"cj67vx534004e47fyf5zebmvc"}]}}